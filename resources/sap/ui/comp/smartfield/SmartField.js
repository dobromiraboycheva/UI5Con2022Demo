/*
 * ! SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/core/library","sap/ui/comp/library","sap/m/library","./JSONControlFactory","./ODataControlFactory","./BindingUtil","./SideEffectUtil","./ODataHelper","sap/ui/core/Control","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/comp/smartfield/UoMValidateException","sap/ui/model/json/JSONModel","sap/ui/model/BindingMode","sap/base/strings/capitalize","sap/base/Log","sap/base/util/Deferred","sap/m/DisplayListItem","sap/m/InputListItem","sap/ui/core/message/MessageMixin","./TextArrangementRead"],function(t,e,i,r,o,n,a,s,l,u,p,d,h,c,f,g,y,m,_,C,b,v){"use strict";var S=e.ValueState;var E=i.smartfield.TextInEditModeSource;var V=i.smartfield.Importance;var I=e.TextAlign;var F=r.FlexJustifyContent;var P=e.TextDirection;var M=i.smartfield.ControlContextType;var x=i.smartfield.ControlProposalType;var T=r.EmptyIndicatorMode;var A=u.extend("sap.ui.comp.smartfield.SmartField",{metadata:{interfaces:["sap.ui.core.IFormContent","sap.ui.core.ISemanticFormContent"],library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartfield/SmartField.designtime",properties:{value:{type:"any",group:"Misc",defaultValue:null},enabled:{type:"boolean",group:"Misc",defaultValue:true},entitySet:{type:"string",group:"Misc",defaultValue:""},editable:{type:"boolean",group:"Misc",defaultValue:true},contextEditable:{type:"boolean",group:"Misc",defaultValue:true},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:""},textAlign:{type:"sap.ui.core.TextAlign",group:"Misc",defaultValue:I.Initial},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:P.Inherit},placeholder:{type:"string",group:"Misc",defaultValue:""},name:{type:"string",group:"Misc",defaultValue:""},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:S.None},valueStateText:{type:"string",group:"Appearance",defaultValue:""},showValueStateMessage:{type:"boolean",group:"Appearance",defaultValue:true},jsontype:{type:"sap.ui.comp.smartfield.JSONType",group:"Misc",defaultValue:null},mandatory:{type:"boolean",group:"Misc",defaultValue:false},maxLength:{type:"int",group:"Misc",defaultValue:0},showSuggestion:{type:"boolean",group:"Misc",defaultValue:true},showValueHelp:{type:"boolean",group:"Misc",defaultValue:true},showLabel:{type:"boolean",group:"Appearance",defaultValue:true},textLabel:{type:"string",group:"Misc",defaultValue:""},tooltipLabel:{type:"string",group:"Misc",defaultValue:""},uomVisible:{type:"boolean",group:"Misc",defaultValue:true},uomEditable:{type:"boolean",group:"Misc",defaultValue:true},uomEnabled:{type:"boolean",group:"Misc",defaultValue:true},url:{type:"string",group:"Misc",defaultValue:""},uomEditState:{type:"int",group:"Misc",defaultValue:-1},controlContext:{type:"sap.ui.comp.smartfield.ControlContextType",group:"Misc",defaultValue:M.None},proposedControl:{type:"sap.ui.comp.smartfield.ControlProposalType",group:"Misc",defaultValue:x.None},wrapping:{type:"boolean",group:"Misc",defaultValue:true},clientSideMandatoryCheck:{type:"boolean",group:"Misc",defaultValue:true},fetchValueListReadOnly:{type:"boolean",group:"Misc",defaultValue:true},expandNavigationProperties:{type:"boolean",group:"Behavior",defaultValue:false},textInEditModeSource:{type:"sap.ui.comp.smartfield.TextInEditModeSource",group:"Behavior",defaultValue:E.None},historyEnabled:{type:"boolean",group:"Misc",defaultValue:true},importance:{type:"sap.ui.comp.smartfield.Importance",group:"Misc",defaultValue:V.Low},fixedValueListValidationEnabled:{type:"boolean",group:"Misc",defaultValue:false},_internalFieldGroupIds:{type:"string[]",defaultValue:[],visibility:"hidden"}},aggregations:{_content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},configuration:{type:"sap.ui.comp.smartfield.Configuration",multiple:false},controlProposal:{type:"sap.ui.comp.smartfield.ControlProposal",multiple:false},_ariaLabelInvisibleText:{type:"sap.ui.core.InvisibleText",multiple:true,visibility:"hidden"},semanticObjectController:{type:"sap.ui.comp.navpopover.SemanticObjectController",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"}},events:{entitySetFound:{parameters:{entitySet:{type:"string"}}},change:{parameters:{value:{type:"string"},newValue:{type:"string"}}},changeModelValue:{parameters:{valueChanged:{type:"boolean"},valueLastValueState:{type:"boolean"},unitChanged:{type:"boolean"},unitLastValueState:{type:"sap.ui.core.ValueState"}}},initialise:{},visibleChanged:{parameters:{visible:{type:"boolean"}}},editableChanged:{parameters:{editable:{type:"boolean"}}},contextEditableChanged:{parameters:{editable:{type:"boolean"}}},innerControlsCreated:{},valueListChanged:{parameters:{changes:{type:"sap.ui.core.Control[]"}}},press:{}}},renderer:{apiVersion:2,render:function(e,i){var r=i.getContent(),o=i._oControl.edit;e.openStart("div",i);e.class("sapUiCompSmartField");e.openEnd();if(r&&i.getMode()==="display"&&i.isFormContextType()&&i._innerControlHasNoValue()&&i.getInnerControls()[0]&&!i.getInnerControls()[0].isA("sap.m.Text")){e.openStart("span");e.class("sapUiPseudoInvisibleText");e.openEnd();e.text(t.getLibraryResourceBundle("sap.ui.comp").getText("NO_VALUE"));e.close("span");e.openStart("span");e.attr("aria-hidden","true");e.class("sapMText");e.class("sapUiSelectable");e.class("sapMTextMaxWidth");e.class("sapUiCompSmartFieldValue");e.class("sapUiCompEmptyValue");e.openEnd();e.close("span")}if(i.getMode()==="edit"&&!i._getFocusCatcher()&&(o===null||o!==null&&r!==null&&o.getId()!==r.getId())){i._createFocusCatcher();e.renderControl(i._getFocusCatcher())}else if(r){e.renderControl(r);if(i._isFocusCatcherFocused()&&o&&o.getId()===r.getId()){r.focus()}if(i._getFocusCatcher()){i._destroyFocusCatcher()}}if(i.getAggregation("_ariaLabelInvisibleText")){i.getAggregation("_ariaLabelInvisibleText").forEach(function(t){e.renderControl(t)})}e.close("div")}}});b.call(A.prototype);var B=A.prototype.refreshDataState;A.prototype.init=function(){this._isInnerControlCreationDelayed=true;this._sAnnotationLabel="";this._bInDestroy=false;this._oSideEffects=new s(this);this._oFactory=null;this._oControl={display:null,edit:null,current:null};this._oValue={display:null,edit:null,uom:null,uomset:null};this._oError={bComplex:false,bFirst:false,bSecond:false};this._oState=this._initState();this._oUtil=new a;this._bSuppressToggleControl=false;this.attachModelContextChange(function(){if(this._hasDefaultModel()){this.invalidate()}}.bind(this));this._initialStateApplied=new m};A.prototype.setVisible=function(t,e){var i=this.getVisible();u.prototype.setVisible.apply(this,arguments);t=this.getVisible();if(t!==i){this.fireVisibleChanged({visible:t})}return this};A.prototype._setVisibilityBasedOnImportance=function(t){var e,i,r,o,n,a=this._oFactory,s=this.oParent&&this.oParent.isA("sap.ui.comp.smartform.GroupElement")&&this.oParent.getDomRef();if(!a||!s){return}e=a.getMetaData&&a.getMetaData();i=e&&e.property&&e.property.property;o=a._oHelper&&a._oHelper.oAnnotation;if(o){if(!o.isNullable(i)||o.isStaticMandatory(i)||o.getVisible(i)==="false"){return}}if(this.getMandatory()||!this.getVisible()||this._fieldControlValue===0||this._fieldControlValue===7){return}r=!this.isPropertyInitial("importance")&&this.getImportance()||o&&o.getImportanceAnnotation(i);switch(t){case V.High:n=r===V.High?"":"none";break;case V.Medium:n=r===V.Low?"none":"";break;default:n=""}s.style.display=n};A.prototype.getComputedTextLabel=function(){return this.getProperty("textLabel")||this._sAnnotationLabel};A.prototype.isPropertyBeingUpdatedByModel=function(t){var e=this.getBindingInfo(t);return!!(e&&e.skipModelUpdate)};A.prototype._boundEntityExists=function(t){t=t||this.getBindingContext();return!!(t&&t.getObject())};A.prototype.setUomEditable=function(t){this.setProperty("uomEditable",t,true);var e=this._getEmbeddedSmartField();if(e){e.setEditable(this.getUomProperty("editable"))}return this};A.prototype.setUomEnabled=function(t){this.setProperty("uomEnabled",t,true);var e=this._getEmbeddedSmartField();if(e){e.setEnabled(this.getUomEnabled())}return this};A.prototype.setUomVisible=function(t){this.setProperty("uomVisible",t,true);var e=this._getEmbeddedSmartField();if(e){t=this.getUomProperty("visible");e.setVisible(t);var i=this._oFactory&&this._oFactory.oMeasureField;if(i){i.toggleStyleClass("smartFieldPaddingRight",t)}}return this};A.prototype.setShowValueHelp=function(t){var e=this.getShowValueHelp();this.setProperty("showValueHelp",t,true);var i=this.getContent();if(i&&typeof i.setShowValueHelp==="function"){t=this.getShowValueHelp();var r=t!==e,o=this._oFactory;if(r&&o){if(t){o._createValueHelp()}else{o.destroyValueHelp()}}i.setShowValueHelp(t)}return this};A.prototype.setShowSuggestion=function(t){var e=this.getShowSuggestion();this.setProperty("showSuggestion",t,true);var i=this.getContent();if(i&&typeof i.setShowSuggestion==="function"){t=this.getShowSuggestion();var r=t!==e,o=this._oFactory;if(r&&o){if(t){o._createValueHelp()}else{o.destroyValueHelp()}}i.setShowSuggestion(t)}return this};A.prototype.setConfiguration=function(t){var e=this.getConfiguration(),i=this.setAggregation("configuration",t,true);t=this.getConfiguration();var r=!!(t&&e===null||e&&t===null),o=!!this.getContent();if(o&&(r||t&&e&&(t.getControlType()!==e.getControlType()||t.getDisplayBehaviour()!==e.getDisplayBehaviour()))){this._destroyControls();this._toggleInnerControlIfRequired({mode:this.getMode()})}return i};A.prototype.setTextInEditModeSource=function(t){var e=this.getTextInEditModeSource();this.setProperty("textInEditModeSource",t,false);t=this.getTextInEditModeSource();if(t!==e){if(this._oFactory){this._oFactory.bind({mode:this.getMode(),rebind:true})}this._destroyControls();this._toggleInnerControlIfRequired({mode:this.getMode()})}return this};A.prototype.setTooltip=function(t){this._refreshTooltipBaseDelegate(t);this.setAggregation("tooltip",t,true);var e=this.getFirstInnerControl();if(e){e.setTooltip(t)}return this};A.prototype._setOnInnerControl=function(){var t,e=this.getContent();if(e){if(typeof e.setWidth==="function"){var i=this.getWidth();if(i){e.setWidth(i)}}this._setPropertyOnControls("wrapping",this.getWrapping());if(typeof e.setName==="function"){e.setName(this.getName())}if(typeof e.setPlaceholder==="function"&&this.getPlaceholder()!==""){e.setPlaceholder(this.getPlaceholder())}if(typeof e.setTextAlign==="function"){e.setTextAlign(this.getTextAlign())}if(typeof e.setJustifyContent==="function"){if(this.getTextAlign()===I.Initial||this.getTextAlign()===I.Begin){t=F.Start}else if(this.getTextAlign()==="Right"){t=F.End}else{t=this.getTextAlign()}e.setJustifyContent(t)}this._setPropertyOnControls("required",this.getMandatory());this._setPropertyOnControls("textDirection",this.getTextDirection());this._setPropertyOnControls("textAlign",this.getTextAlign());var r=this._getEmbeddedSmartField();if(r){if(!this.isPropertyInitial("uomEditable")){r.setEditable(this.getUomProperty("editable"))}if(!this.isPropertyInitial("uomEnabled")){r.setEnabled(this.getUomEnabled())}if(!this.isPropertyInitial("uomVisible")){r.setVisible(this.getUomProperty("visible"))}}}return this};A.prototype.getUomProperty=function(t){var e=this._getEmbeddedSmartField(),i=e&&e.getControlFactory(),r=i&&i._oFieldControl,o=g(t),n="getUom"+o,a=this[n]();if(e.isBound(t)&&r){var s=i.getMetaData();if(s){var l=r._oStoredBindings[t],u=r["_get"+o](s,l,t);u.path();var p=u.formatter.call(e,a);return p}}return a};A.prototype._setPropertyOnControls=function(t,e,i){i=i||this.getInnerControls();i.forEach(function(i){var r="set"+g(t);if(typeof i[r]==="function"){i[r](this._convertValueForControl(t,e,i))}},this)};A.prototype._convertValueForControl=function(t,i,r){var o;if(r){o=r.getMetadata().getProperty(t)}if(o){switch(t){case"wrapping":switch(o.type){case"boolean":return i;case"sap.ui.core.Wrapping":var n=e.Wrapping;if(i){return n.Soft}return n.None}}}return i};A.prototype.setEntitySet=function(t){this.setProperty("entitySet",t,true);this.fireEntitySetFound({entitySet:t});return this};A.prototype._setPendingEditState=function(t){this.data("pendingEditableState",!t)};A.prototype.setContent=function(t){return this.setAggregation("_content",t)};A.prototype.getContent=function(){return this.getAggregation("_content")};A.prototype.getControlFactory=function(){return this._oFactory};A.prototype.getValue=function(){var t=this.getInnerValueFunction();if(t){return t()}return this.getProperty("value")};A.prototype.getInnerValueFunction=function(){if(this._oValue&&typeof this._oValue[this.getMode()]==="function"){return this._oValue[this.getMode()]}return null};A.prototype.getValueState=function(){var t=this.getInnerControls(),e=this._getMaxSeverity(t);if(e>-1){return t[e].getValueState()}return S.None};A.prototype.setValueState=function(t){this.setProperty("valueState",t,true);var e=this.getInnerControls(),i,r="setSimpleClientError";if(e&&e.length){i=e[0];if(e.length>1){r="setComplexClientErrorFirstOperand"}}if(i&&typeof i.setValueState==="function"){i.setValueState(t);this[r](t===S.Error)}return this};A.prototype.getValueStateText=function(){var t=this.getInnerControls(),e=this._getMaxSeverity(t);if(e>-1){return t[e].getValueStateText()}return this.getProperty("valueStateText")};A.prototype.setValueStateText=function(t){this.setProperty("valueStateText",t,true);var e=this.getInnerControls(),i;if(e&&e.length){i=e[0]}if(i&&typeof i.setValueStateText==="function"){i.setValueStateText(t)}return this};A.prototype._getMaxSeverity=function(t){var e,i,r,o,n=0,a=-1,s={Error:3,Warning:2,Success:1,None:0};o=t.length;for(r=0;r<o;r++){i=t[r];if(i.getValueState){e=i.getValueState();if(e&&s[e]>n){n=s[e];a=r}}}return a};A.prototype.getFocusDomRef=function(){var t=this.getInnerControls(),e,i=t.length;if(i>0){e=t[0]}if(e&&e.getFocusDomRef){return e.getFocusDomRef()}return u.prototype.getFocusDomRef.apply(this,arguments)};A.prototype.getIdForLabel=function(){var t=this.getInnerControls(),e,i=t.length;if(i>0){e=t[0]}if(e&&typeof e.getIdForLabel==="function"){return e.getIdForLabel()}return this.getId()};A.prototype.unbindProperty=function(t,e){u.prototype.unbindProperty.apply(this,arguments);var i=this.getAllInnerControls();i.forEach(function(i){var r=i.getMetadata().getName();var o=n.getBoundPropertiesMapInfoForControl(r,{propertyName:t});if(Array.isArray(o)){o.forEach(function(t){i.unbindProperty(t,e)})}});return this};A.prototype.getMode=function(){var t=this.getEditable(),e=this.getEnabled(),i=this.getContextEditable();if(i&&this.data("configdata")&&this.data("configdata").configdata.isUOM&&this.data("configdata").configdata.isInnerControl&&this.data("configdata").configdata.getContextEditable){i=this.data("configdata").configdata.getContextEditable()}return t&&e&&i?"edit":"display"};A.prototype.isInEditMode=function(){return this.getMode()==="edit"};A.prototype._toggleInnerControlIfRequired=function(t){var e=t.mode;if(this._bSuppressToggleControl||(!this._oFactory||this._oFactory.bPending)){return}if(e==="edit"){this._createControlIfRequired(t)}else{var i=this.getProperty("value"),r=true;var o=this.data("configdata");if(o&&o.configdata&&!o.configdata.isUOM){if(i===null||i===""){r=false}}if(r){this._createControlIfRequired(t)}else{this.setContent(null);this._oControl.current="display"}}};A.prototype._propagateToInnerControls=function(t){if(t==="edit"){this._propagateFieldGroupIDs(this.getProperty("_internalFieldGroupIds"))}this._setOnInnerControl()};A.prototype._propagateFieldGroupIDs=function(t){var e;if(Array.isArray(t)&&t.length){e=this.getFirstInnerControl();if(e){e.setFieldGroupIds(t)}}};A.prototype._onInnerControlToggled=function(t){var e;if(t&&t.fetchIDAndDescription&&this.getModel()&&this.getBindingContext()&&this.getBinding("value")){this._oFactory.fetchIDAndDescriptionCollectionIfRequired(t.forceTextArrangementFetch)}this._initialStateApplied.resolve();this._propagateToInnerControls(t.mode);this._processEvents({editableChanged:t.editableChanged,editable:t.editable,contextEditableChanged:t.contextEditableChanged,contextEditable:t.contextEditable});if(t.mode==="display"&&this.isFormContextType()){this._setEmptyIndicator(this.getFirstInnerControl())}if(t.mode==="edit"&&this.getContent()){this._checkFieldGroups({mode:t.mode})}e=this._getEmbeddedSmartField();if(e&&e.data("configdata")&&e.data("configdata").configdata.isUOM){e.setClientSideMandatoryCheck(t.clientSideMandatoryCheck);if(t.isFormContextType&&t.contextEditable&&t.contextEditable!==t.editable&&e.getEditable()!==t.editable){e.setEditable(t.editable)}}};A.prototype._processEvents=function(t){if(t.editableChanged){this.fireEditableChanged({editable:t.editable})}if(t.contextEditableChanged){this.fireContextEditableChanged({editable:t.contextEditable})}};A.prototype._forceInitialise=function(){if(this._isBoundToDefaultModel()){return this._processStateHandler()}else if(!this.bIsListeningForDefaultModel){this.bIsListeningForDefaultModel=true;return new Promise(function(t,e){this.attachEvent("modelContextChange",{resolve:t,reject:e},this._forceInitialiseHandler,this)}.bind(this))}};A.prototype._forceInitialiseHandler=function(t,e){if(this._isBoundToDefaultModel()){this.detachEvent("modelContextChange",this._forceInitialiseHandler,this);this._processStateHandler().then(function(){e.resolve()}).catch(function(t){e.reject(t)})}};A.prototype._processStateHandler=function(){var t=this.getMode();return this._processState().then(function(){var e=this._getEmbeddedSmartFieldByMode(t);return e&&e._processState()}.bind(this))};A.prototype._updateInnerControlsIfRequired=function(){var t,e={mode:this.getMode(),contextEditable:this.getContextEditable(),editable:this.getEditable(),enabled:this.getEnabled(),visible:this.getVisible()};this._updateInnerControlsIfRequiredHandler(e);t=this._getEmbeddedSmartField();if(t&&t.isA("sap.ui.comp.smartfield.SmartField")){t._updateInnerControlsIfRequiredHandler(e)}};A.prototype._updateInnerControlsIfRequiredHandler=function(t){this._init();if(this._oFactory!==null){this._oFactory._init(this._oFactory._oMeta)}this._toggleInnerControlIfRequired(t)};A.prototype.setImportance=function(t){var e=this.getProperty("importance");if(e===t){return this}this.setProperty("importance",t);return this};A.prototype.setValue=function(t){this.setProperty("value",t);if(!this.isPropertyBeingUpdatedByModel("value")&&!this.getBindingContext()){var e=this.getFirstInnerControl();if(e){var i=e.getMetadata().getName();var r=n.getBoundPropertiesMapInfoForControl(i,{propertyName:"value"})[0];var o=e.getBinding(r);if(this.getMode()==="display"&&o&&typeof o.getFormatter()==="function"&&o.getBindingMode()===f.OneWay){t=o.getExternalValue()}this._setPropertyOnControls(r,t,[e])}}return this};A.prototype.isTextInEditModeSourceNotNone=function(){return this._getComputedTextInEditModeSource()!==E.None};A.prototype._getComputedTextInEditModeSource=function(){var t=this.getTextInEditModeSource(),e=this.data("defaultTextInEditModeSource");if(e&&this.isPropertyInitial("textInEditModeSource")&&this.getMode()==="edit"){t=e}return t};A.prototype._createControlIfRequired=function(t){if(!this._oFactory){return}var e,i=t.mode,r=this._oControl[i];if(i!==this._oControl.current||!r){if(!r){var o=this._oFactory.createControl(t);if(o){if(i!=="edit"&&this._getFocusCatcher()){this._destroyFocusCatcher()}this._oControl[i]=o.control;this._placeCallBacks(o,i)}}this._oControl.current=i;this.setContent(this._oControl[i]);this._oFactory.updateControl(t);this._setOnInnerControl();e=this._getEmbeddedSmartField();if(e&&e.isA("sap.ui.comp.smartfield.SmartField")){e.attachInnerControlsCreated(function(){this.fireInnerControlsCreated(this.getInnerControls())}.bind(this))}else{this.fireInnerControlsCreated(this.getInnerControls())}}else if(!this.getContent()){this._oControl.current=i;this.setContent(this._oControl[i])}};A.prototype._placeCallBacks=function(t,e){if(t.params&&t.params.getValue){this._oValue[e]=t.params.getValue}if(t.params&&t.params.uom){this._oValue.uom=t.params.uom}if(t.params&&t.params.uomset){this._oValue.uomset=t.params.uomset}};A.prototype._init=function(t){var e,i,r;if(!this._oFactory){i=this.data("configdata");if(!i){e=this.getModel(t)}r=this.getBindingPath("value");if(t===undefined&&r&&(i||e)){this._oFactory=this._createFactory(t,e,r,i)}}};A.prototype.clone=function(){var t=u.prototype.clone.apply(this,arguments);t.attachModelContextChange(function(){t.invalidate()});return t};A.prototype._destroyFactory=function(){this._bSuppressToggleControl=true;this._bSideEffects=false;if(this._oFactory){this._oFactory.destroy()}this._oFactory=null;this._bSuppressToggleControl=false;this._destroyControls()};A.prototype._destroyControls=function(){if(this._oControl){if(this._oControl.display){this._oControl.display.destroy()}if(this._oControl.edit){this._oControl.edit.destroy()}this._oControl.display=null;this._oControl.edit=null;this._oControl.current=null}this._oValue={display:null,edit:null,uom:null,uomset:null};this.destroyAggregation("_content")};A.prototype._createFactory=function(t,e,i,r){if(e&&e instanceof c){return new o(e,this,{model:t,path:i})}var a;if(!r){a=this._getEntitySet(t)}if(a||r){var s;if(r){s=r.configdata;this._enhanceConfigData(s)}else{s={entitySet:a,model:t,path:i}}return new n(e,this,s)}return null};A.prototype._enhanceConfigData=function(t){var e=this.data("ignoreInsertRestrictions");if(typeof e==="boolean"){t.ignoreInsertRestrictions=e}};A.prototype._getEntitySet=function(t,e){var i=this.getEntitySet(),r=i!=="";if(r&&!t){return i}var o=this.getBindingContext(t);if(o){var n=o.getPath();if(n===""||n===undefined||n==="/undefined"){return""}i=this._oUtil.correctPath(n);if(!e){this.fireEntitySetFound({entitySet:i})}return i}return""};A.prototype._getODataEntityType=function(t){var e,i,r,o,n=this.getModel(),a=n&&n.getMetaModel();e=this._getEntitySet(t);if(e===""){return}o=a.getODataEntitySet(e);if(o!==null&&o.entityType){i=o.entityType}if(i===undefined){r=a.getODataFunctionImport(e);if(r!==null&&r.returnType){i=r.returnType}}return i};A.prototype.getDataType=function(){var t;if(this._oFactory){if(this._oFactory.getDataProperty){t=this._oFactory.getDataProperty();if(t){return t.property.type}}return this.getJsonType()}return null};A.prototype.getDataProperty=function(){var t,e,i,r,o,n=this.getModel(),a=n&&n.getMetaModel();if(this._oFactory){if(this._oFactory.getDataProperty){return this._oFactory.getDataProperty()}}else{o=this.data("configdata")&&this.data("configdata").configdata;if(o&&o.property){return o.property}if(!a||!a.oModel){return null}e=this._getODataEntityType();if(e===undefined){return null}t=this.getBindingPath("value");if(t===undefined){return null}i=a.getODataEntityType(e);r=a.getODataProperty(i,t);if(r===null){return null}return{property:r}}};A.prototype.getUnitOfMeasure=function(){if(this._oValue.uom){return this._oValue.uom()}return null};A.prototype.setUnitOfMeasure=function(t){if(t&&this._oValue.uomset){this._oValue.uomset(t)}};A.prototype.setSimpleClientError=function(t){this._oError.bFirst=t};A.prototype.setComplexClientErrorFirstOperand=function(t){this._oError.bComplex=true;this._oError.bFirst=t};A.prototype.setComplexClientErrorSecondOperand=function(t){this._oError.bComplex=true;this._oError.bSecond=t};A.prototype.setComplexClientErrorSecondOperandNested=function(t){var e=this.getParent().getParent();e.setComplexClientErrorSecondOperand(t)};A.prototype._hasClientError=function(){if(this._oError.bComplex){return this._oError.bFirst||this._oError.bSecond}return this._oError.bFirst};A.prototype.checkClientError=function(t){t=Object.assign({handleSuccess:false},t);var e="The sap.ui.comp.smartfield.SmartField#checkClientError method is deprecated. "+"Please use the sap.ui.comp.smartfield.SmartField#checkValuesValidity method instead.";y.warning(e,this.getMetadata().getName());if(this.getMode()==="display"){return false}if(this._hasClientError()&&!t.handleSuccess){return true}this.getInnerControls().forEach(function(e){this._checkErrors(e,{checkClientErrorsOnly:true,handleSuccess:t.handleSuccess})}.bind(this));return this._hasClientError()};A.prototype.checkValuesValidity=function(t){var e,i=this.getControlFactory(),r;if(i&&i.getEdmProperty){r=i.getEdmProperty();if(!r){return Promise.resolve()}e=r.name}if(this.getMode()==="display"){return Promise.resolve({property:e,instance:this})}t=t||{};var o={handleSuccess:true,innerControls:this.getInnerControls(),rawValues:[]};var n=this._getEmbeddedSmartField();t=Object.assign(o,t);if(t.rawValues.length===0&&n&&n.data("configdata")&&n.data("configdata").configdata.isUOM){this._updateCurrencyRawValues(t)}return new Promise(function(i,r){var o={rawValues:t.rawValues,handleSuccess:t.handleSuccess,bCheckValuesValidity:true};var n=t.innerControls.map(function(t){return this._checkErrors(t,o)},this);Promise.all(n).then(function(){i({property:e,instance:this})}.bind(this)).catch(function(t){r({property:e,instance:this})}.bind(this))}.bind(this))};A.prototype.checkUnitValidity=function(t){var e=false;if(this.getMode()==="display"){return true}t=t||{};var i={handleSuccess:true,innerControls:this.getInnerControls(),rawValues:[]};var r=this._getEmbeddedSmartField();t=Object.assign(i,t);if(t.rawValues.length===0&&r&&r.data("configdata")&&r.data("configdata").configdata.isUOM){this._updateCurrencyRawValues(t)}if(i.innerControls.length!==2&&(i.innerControls.length!==1&&!this._oFactory._checkSuppressUnit())){throw new d}r=r?r:i.innerControls[1];var o=i.innerControls[0],a=r?r:this._getUomControl(),s,l,u,c;t=Object.assign({checkClientErrorsOnly:false,handleSuccess:true},t);if(o){var f=n.getBoundPropertiesMapInfoForControl(o.getMetadata().getName(),{propertyName:"value"});u=f&&f[0]}if(a){var y=n.getBoundPropertiesMapInfoForControl(a.getMetadata().getName(),{propertyName:"value"});c=y&&y[0]}if(u){s=o.getBinding(u)}if(c){l=a.getBinding(c)}if(!s||!l&&!this._oFactory._checkSuppressUnit()){return true}try{var m="get"+g(u),_=s.getType(),C=s.sInternalType,b=o[m]();if(C&&_){var v=t.rawValues||s.getValue(),S=_.parseValue(b,s.sInternalType,v);if(S){_.validateValue(S)}if(s.hasValidation()){var E=false,V=true,I={element:o,property:u,type:s.getType(),newValue:b,oldValue:s.getValue(),mParameters:{suppressChangeModelValue:true}};o.fireValidationSuccess(I,E,V);e=true}}}catch(t){var F={element:o,property:u,type:s.getType(),newValue:b,oldValue:s.getValue(),exception:t,message:t.message};if(t instanceof h){F.targetControl=r&&r.getFirstInnerControl()}if(t instanceof p){o.fireParseError(F)}else if(t instanceof d){o.fireValidationError(F)}else{if(t.toString()==="TypeError: Cannot read property 'decimals' of undefined"){t.validationUnitError=true}throw t}}try{if(!c||!a.getVisible()){return e}var P="get"+g(c),M=l.getType(),x=l.sInternalType,b=o[m](),T=a[P]();if(x&&M){var v=t.rawValues||s.getValue(),A=M.parseValue(T,l.sInternalType,v);if(A){M.validateValue(A)}if(l.hasValidation()){var E=false,V=true,B={element:a,property:c,type:l.getType(),newValue:T,oldValue:l.getValue(),mParameters:{suppressChangeModelValue:true}};a.fireValidationSuccess(B,E,V);e&=true}}}catch(t){var D={element:a,property:c,type:l.getType(),newValue:T,oldValue:l.getValue(),exception:t,message:t.message};if(t instanceof p){a.fireParseError(D)}else if(t instanceof d){a.fireValidationError(D)}else{t.validationUnitError=true;throw t}e=false}return e};A.prototype._updateCurrencyRawValues=function(t){t.rawValues=t.innerControls.map(function(t){var e=t.getMetadata(),i=n.getBoundPropertiesMapInfoForControl(e.getName(),{propertyName:"value"});return e.getProperty(i).get(t)})};A.prototype._checkErrors=function(t,e){e=Object.assign({checkClientErrorsOnly:false,handleSuccess:true},e);var i,r,o=this;if(t){var a=n.getBoundPropertiesMapInfoForControl(t.getMetadata().getName(),{propertyName:"value"});r=a&&a[0]}if(r){i=t.getBinding(r)}if(!i){return Promise.resolve()}var s;function l(e){var n,a={element:t,property:r,type:i.getType(),newValue:s,oldValue:i.getValue(),exception:e,message:e.message};if(e instanceof h){n=o._getEmbeddedSmartField();a.targetControl=n&&n.getFirstInnerControl()}if(e instanceof p){t.fireParseError(a)}else if(e instanceof d){t.fireValidationError(a)}else{throw e}}function u(){if(e.handleSuccess&&i.hasValidation()){var o={element:t,property:r,type:i.getType(),newValue:s,oldValue:i.getValue(),mParameters:{suppressChangeModelValue:true}};var n=false,a=true;t.fireValidationSuccess(o,n,a)}}try{var c="get"+g(r),f=i.getType(),m=i.sInternalType;s=t[c]();if(m&&f){if(e.checkClientErrorsOnly&&f.async){var _="The deprecated sap.ui.comp.smartfield.SmartField#checkClientError method can not be "+"used with async types. Please use sap.ui.comp.smartfield.SmartField#checkValuesValidity "+"method instead.";y.error(_,this.getMetadata().getName());this.setSimpleClientError(true);return Promise.reject()}if(f.async){var C=i.getDataState();var b=f.formatValue(C.getValue(),m);if(!C.isControlDirty()&&b===s){u();return Promise.resolve()}}var v=e.rawValues||i.getValue(),S=f.parseValue(s,i.sInternalType,v),E;if(S&&S instanceof Promise){E=S.then(function(t){return f.validateValue(t)}).then(u);E.catch(l);return E}E=f.validateValue(S,e.bCheckValuesValidity);if(E instanceof Promise){E.catch(l);return E.then(u)}}}catch(t){l(t);return Promise.reject()}u();return Promise.resolve()};A.prototype.isContextTable=function(){return this.getControlContext()==="responsiveTable"||this.getControlContext()==="table"};A.prototype.isFormContextType=function(){var t=this.getControlContext(),e=i.smartfield.ControlContextType;return t===e.Form||t===e.SmartFormGrid};A.prototype.isTableContextType=function(){var t=this.getControlContext(),e=i.smartfield.ControlContextType;return t===e.Table||t===e.ResponsiveTable};A.prototype.getInnerControls=function(){var t,e,i={"sap.m.HBox":function(t){var e,i,r=0;i=t.getItems();if(i){r=i.length}if(r===0){return[]}if(r===1){return[i[0]]}e=i[1].getContent();if(e){return[i[0],e]}return[i[0]]},"sap.ui.comp.navpopover.SmartLink":function(t){var e=t.getAggregation("innerControl");if(e){return[e]}return[t]}};t=this.getContent();if(t){e=i[t.getMetadata()._sClassName]}if(e){return e(t)}if(t){return[t]}return[]};A.prototype.getAllInnerControls=function(){var t=[],e=this._oControl;if(e){for(var i in e){if(e.hasOwnProperty(i)){var r=e[i];if(r&&r instanceof Object){t.push(r)}}}}return t};A.prototype._getEmbeddedSmartField=function(){var t=this.getContent();return this._getEmbeddedSmartFieldInstace(t)};A.prototype._getEmbeddedSmartFieldByMode=function(t){var e=t==="edit"?this._oControl.edit:this._oControl.display;return this._getEmbeddedSmartFieldInstace(e)};A.prototype._getEmbeddedSmartFieldInstace=function(t){if(t){if(t.isA("sap.m.HBox")){var e=t.getItems();if(e){for(var i=0;i<e.length;i++){if(e[i].isA("sap.ui.comp.smartfield.SmartField")){return e[i]}}}}}return null};A.prototype._createFocusCatcher=function(){this.__oFakeInput=new sap.m.Input(this.getId()+"-fakeInput")};A.prototype._destroyFocusCatcher=function(){if(this.__oFakeInput){this.__oFakeInput.destroy();this.__oFakeInput=null}};A.prototype._getFocusCatcher=function(){return this.__oFakeInput};A.prototype._isFocusCatcherFocused=function(){return this._getFocusCatcher()&&this._getFocusCatcher().getId()+"-inner"===document.activeElement.getAttribute("id")};A.prototype.onAfterRendering=function t(){u.prototype.onAfterRendering.bind(this,arguments);if(this.__oFakeInput){setTimeout(function(){if(this.__oFakeInput){this.__oFakeInput.setBlocked(true)}}.bind(this),1e3)}};A.prototype.onBeforeRendering=function t(){var e;if(this.__oFakeInput){this.__oFakeInput.setBlocked(false)}if(!this._hasDefaultModel()||this._bInDestroy){return Promise.resolve()}e=this._processState().then(this.accessibilityAttributesHandler.bind(this)).then(u.prototype.onBeforeRendering.bind(this,arguments));return e};A.prototype._calculateCurrentState=function(){var t=this.getClientSideMandatoryCheck(),e=this._getControlDescriptionPath(this._oControl.edit),i=this._getControlDescriptionPath(this._oControl.display),r=this.getEditable(),o=this.getContextEditable(),n=this.isFormContextType(),a=this.getMode(),s=this.getEnabled(),l=this.getVisible(),u=this.getBinding("value"),p=u&&this._oState.isValuePropertyChanged(u.getValue()),d=this._oState.isValueBindingPathChanged(this.getBindingPath("value")),h=this._oState.isModelChanged(this.getModel()),c=this._oState.isBindingContextChanged(this.getBindingContext()),f=this._oState.isEntitySetChanged(this._getEntitySet(undefined,true)),g=this._oState.isModeInitialized(a),y=this._oState.isModeChanged(a),m=this._oState.isEditableChanged(r),_=this._oState.isContextEditableChanged(o),C=this._isDescriptionBindingPathDefault(),b=this._getComputedTextInEditModeSource()===E.ValueListNoValidation&&p,v=y&&e!==i,S=b||!g||C||p||v,V=d||h||f,I=V,F=c||!g||y;return{mode:a,rebind:S,enabled:s,visible:l,editable:r,editableChanged:m,contextEditable:o,contextEditableChanged:_,forceTextArrangementFetch:F,clientSideMandatoryCheck:t,isFormContextType:n,isFactoryJustCreated:I,destroyFactory:V,bindingContextChanged:c}};A.prototype._processState=function(){var t,e,i,r,o=this._calculateCurrentState();e={mode:o.mode,rebind:o.rebind};i={mode:o.mode,contextEditable:o.contextEditable,editable:o.editable,enabled:o.enabled,visible:o.visible};r={editable:o.editable,editableChanged:o.editableChanged,isFormContextType:o.isFormContextType,contextEditable:o.contextEditable,contextEditableChanged:o.contextEditableChanged,forceTextArrangementFetch:o.forceTextArrangementFetch,clientSideMandatoryCheck:o.clientSideMandatoryCheck,mode:o.mode};if(this.isContextTable()&&(o.editableChanged||o.contextEditableChanged)&&(o.editable&&o.contextEditable)){var n=this._oControl&&this._oControl.edit;if(n){(n.isA("sap.m.HBox")?n.getItems():[n]).forEach(function(t){if(t.getValueState&&(t.getValueState()===S.Error||t.getValueState()===S.Warning)){t.setValueState(S.None)}})}}if(this._oFactory!==null&&o.destroyFactory){this._destroyFactory()}if(o.bindingContextChanged){this._bSideEffects=false}this._init();if(this._oFactory===null){return Promise.resolve()}t=this._oFactory.bind(e).then(function t(e){r.fetchIDAndDescription=e&&e.fetchIDAndDescription||false;if(this._oFactory===null){return Promise.reject()}if(o.isFactoryJustCreated&&this._oFactory.isA("sap.ui.comp.smartfield.ODataControlFactory")){this._oFactory.triggerCreationOfControls()}this._toggleInnerControlIfRequired(i);this._onInnerControlToggled(r);if(o.isFactoryJustCreated&&this._oFactory.isA("sap.ui.comp.smartfield.ODataControlFactory")){this.fireInitialise()}}.bind(this));return t};A.prototype.accessibilityAttributesHandler=function(){var t=this._getEmbeddedSmartField();if(this.isContextTable()){this._handleAriaLabelledByInSmartTable(t)}else if(t){this._handleUoMAriaLabelledBy(t)}};A.prototype.getFirstInnerControl=function(){var t=this.getInnerControls();if(t.length){return t[0]||null}return null};A.prototype._checkFieldGroups=function(t){var e,i,r=t.mode;if(this.getBindingContext()&&this._oFactory&&this._oFactory.getMetaData&&r==="edit"&&!this._bSideEffects){i=this._calculateFieldGroupMetaData();e=this._getView();if(e&&i){this._setFieldGroup(i,e)}}};A.prototype._calculateFieldGroupMetaData=function(){var t=this._oFactory.getMetaData();if(t&&(!t.property||t.property&&!t.property.property)){return}return t};A.prototype._setFieldGroup=function(t,e){var i,r=this._oSideEffects.getFieldGroupIDs(t,e);if(r){i=this.getFirstInnerControl();if(i){this._bSideEffects=true;i.setFieldGroupIds(r)}}};A.prototype._getView=function(){var t=this.getParent();while(t){if(t.isA("sap.ui.core.mvc.View")){return t}t=t.getParent()}return null};A.prototype._getUomControl=function(){var t=this.getAllInnerControls();if(this.getUomEnabled()&&t&&t.length===1){var e=t[0].getItems?t[0].getItems():[];for(var i=0;i<e.length;i++){if(e[i].isA("sap.ui.comp.smartfield.SmartField")){return e[i]}}}return null};A.prototype.refreshDataState=function(t,e){var i,r;if(t==="value"){B.apply(this,arguments);if(e.isLaundering()){if(this.getEditable()){i=this.getBindingContext();if(i&&i.getObject){r=i.getObject();if(r&&r.__metadata&&r.__metadata.created){this._checkCreated=true;return}}}}if(this._checkCreated&&!e.isLaundering()&&!e.isDirty()){if(this._oFactory){this._oFactory.rebindOnCreated()}this._checkCreated=false}}};A.prototype.onValidation=function(t){var e,i=t.getParameters(),r=i.newValue!==i.oldValue,o=this.data("configdata")&&this.data("configdata").configdata,n=o&&o.smartFieldRootControl?o.smartFieldRootControl:this,a=n._getEmbeddedSmartField(),s=a&&a.getFirstInnerControl(),l=s&&s.getId(),u=n.getModel(),p=t.getSource().getId(),d=i.mParameters,h=d&&d.originSource&&d.originSource.getId(),c=d&&d.suppressChangeModelValue||false,g=l&&l!==p,y=l&&l===p,m=l&&h&&l!==h,_=l&&h&&l===h;if(h&&h!==p||c||u.getDefaultBindingMode()!==f.TwoWay){return}if(m||g){e={valueChanged:r,valueLastValueState:n.getValueState(),unitChanged:false,unitLastValueState:a.getValueState()}}else if(_||y){e={valueChanged:false,valueLastValueState:n.getValueState(),unitChanged:r,unitLastValueState:a.getValueState()}}else{e={valueChanged:r,valueLastValueState:n.getValueState()}}n.fireChangeModelValue(e)};A.prototype.exit=function(){this._bInDestroy=true;var t=null;if(this.__oFakeInput){this.__oFakeInput.destroy()}if(this._oSideEffects){this._oSideEffects.destroy()}if(this._oUtil){this._oUtil.destroy()}if(this._oFactory){this._oFactory.destroy()}var e=this._oControl;if(e){if(e.current==="edit"){t=e["display"]}else{t=e["edit"]}if(e[e.current]&&!e[e.current].getParent()){e[e.current].destroy()}}if(t&&typeof t.destroy==="function"){t.destroy()}this._oUtil=null;this._oError=null;this._oValue=null;this._oFactory=null;this._oControl=null;this._oSideEffects=null;this._oState=null;this._sAnnotationLabel=""};A.getSupportedAnnotationPaths=function(t,e,i,r){var o,n,a=[],s;if(t&&e&&i){s={entitySet:e,entityType:t.getODataEntityType(e.entityType),path:i};o={helper:new l(null,null,t)};if(r){o.navigationPathOnly=r}o.helper.getProperty(s);A._getFromEntitySet(a,s,o);A._getFromProperty(a,s,o);n=o.helper.getUnitOfMeasure2(s);if(n){A._getFromProperty(a,n,o)}o.helper.destroy()}return a};A._getFromEntitySet=function(t,e,i){var r;if(e.entitySet){r=i.helper.oAnnotation.getUpdateEntitySetPath(e.entitySet);A._push(r,t,e,i)}};A._push=function(t,e,i,r){var o,n,a,s,l={};if(t){if(r.navigationPathOnly){o=t.split("/");a=o.length;l.entityType=i.entityType;while(a--){n=o.shift();if(n===""){continue}l=r.helper.getNavigationProperty(l.entityType,n);if(!l.entitySet){break}if(s){s=s+"/"+n}else{s=n}}}else{s=t}}if(s){if(i.navigationPath){e.push(i.navigationPath+"/"+s)}else{e.push(s)}}};A._getFromProperty=function(t,e,i){var r;if(e.property.property){r=i.helper.oAnnotation.getText(e.property.property);A._push(r,t,e,i);r=i.helper.oAnnotation.getUnit(e.property.property);A._push(r,t,e,i);r=i.helper.oAnnotation.getFieldControlPath(e.property.property);A._push(r,t,e,i)}};A.prototype.addAssociation=function(t,e,i){if(t==="ariaLabelledBy"&&e){this.getInnerControls().forEach(function(t){if(t.addAriaLabelledBy){t.addAriaLabelledBy(e)}})}else if(t==="ariaDescribedBy"&&e){this.getInnerControls().forEach(function(t){if(t.addAriaDescribedBy){t.addAriaDescribedBy(e)}})}return u.prototype.addAssociation.apply(this,arguments)};A.prototype.removeAssociation=function(t,e,i){var r=u.prototype.removeAssociation.apply(this,arguments);if(t==="ariaLabelledBy"&&r){this.getInnerControls().forEach(function(t){if(t.removeAriaLabelledBy){t.removeAriaLabelledBy(r)}})}else if(t==="ariaDescribedBy"&&r){this.getInnerControls().forEach(function(t){if(t.removeAriaDescribedBy){t.removeAriaDescribedBy(r)}})}return r};A.prototype.getAccessibilityInfo=function(){var t=this.getContent();return t&&t.getAccessibilityInfo?t.getAccessibilityInfo():null};A.prototype.enhanceAccessibilityState=function(t,e){var i=this.getParent();if(i&&i.enhanceAccessibilityState){i.enhanceAccessibilityState(this,e)}};A.prototype._handleAriaLabelledByInSmartTable=function(t){var e,i=this;if(this.getAriaLabelledBy().length>0){this.getInnerControls().forEach(function(r){if(r.addAriaLabelledBy&&r.getAriaLabelledBy){e=r.getAriaLabelledBy().indexOf(i.getAriaLabelledBy()[0])>-1;if(!e&&r.getAriaLabelledBy().length===0){r.addAriaLabelledBy(i.getAriaLabelledBy()[0])}if(t){i._handleUoMAriaLabelledBy(t)}}})}};A.prototype._handleUoMAriaLabelledBy=function(t){this.getInnerControls().forEach(function(e){if(e.addAriaLabelledBy&&e.getAriaLabelledBy&&!t.getEditable()){var i=e.getAriaLabelledBy().indexOf(t.getId()+"-text")>-1;if(!i){e.addAriaLabelledBy(t.getId()+"-text")}}})};A.prototype._isValueInitial=function(){var t,e;if(this._bValueNotInitial){return false}t=this.getBinding("value");e=t&&t.getDataState();if(!e){this._bValueNotInitial=true;return true}if(e.getValue()!==e.getOriginalValue()){this._bValueNotInitial=true;return false}return true};A.prototype.getRequired=function(){if(this.getContextEditable()&&this.getEditable()){return this.getMandatory()}else{return false}};A.prototype.getBindingMode=function(t){var e=this.getBindingInfo(t);return e?e.parts[0].mode:undefined};A.prototype._innerControlHasNoValue=function(){var t,e,i,r,o,a,s,l,u=this.getInnerControls(),p=false;for(t=0;t<u.length;t++){o=u[t];a=o.getMetadata().getName();if(a==="sap.m.ObjectStatus"&&!(o.getText().trim()||o.getIcon().trim()||o.getTitle().trim())){p=true;break}else{l=n.getBoundPropertiesMapInfoForControl(a,{propertyName:"value"});if(!Array.isArray(l)){return false}i=0;for(e=0;e<l.length;e++){r=undefined;s=l[e];r=o.getProperty(s);if(r===""||r===null){i+=1}}if(i===l.length){p=true;break}}}return p};A.prototype._getHistoryEnabled=function(){return this.getHistoryEnabled()};A.prototype.getFormValueProperty=function(){return"value"};A.prototype.getFormFormattedValue=function(){var t,e=this._forceInitialise();if(e instanceof Promise){return e.then(function(){return this.getInnerControls().map(function(e){if(e.isA("sap.m.Text")){t=e.getText();if(!t&&e.getEmptyIndicatorMode()===T.On){t="-"}return t}}).join("")}.bind(this))}};A.prototype.getDataSourceLabel=function(){return this._sAnnotationLabel};A.prototype._isAsync=function(){var t=this._getComputedTextInEditModeSource(),e=i.smartfield.TextInEditModeSource,r;if(t===e.ValueList){return true}else if(t===e.NavigationProperty){return true}else if(t===e.ValueListNoValidation){r=this.getControlFactory()._getDisplayBehaviourConfiguration("defaultInputFieldDisplayBehaviour");return r==="descriptionOnly"}return false};A.prototype._getTextArrangementRead=function(){if(!this._oTextArrangementRead){this._oTextArrangementRead=new v}return this._oTextArrangementRead};A.prototype._hasDefaultModel=function(){var t=this.getModel();return t!==undefined};A.prototype._isBoundToDefaultModel=function(){var t=this._hasDefaultModel(),e=this.getBindingContext();return t&&e!==undefined&&e!==null};A.prototype._isDescriptionBindingPathDefault=function(){var t=this.getFirstInnerControl(),e=t&&t.getBinding("value"),i=e&&e.isA("sap.ui.model.CompositeBinding")&&e.getBindings()[1]&&e.getBindings()[1].getPath()==="__$$SmartFieldNotExistingBindingPath"||false;return i};A.prototype._getControlDescriptionPath=function(t){var e=t&&t.getBindingInfo("value"),i=e&&Array.isArray(e.parts)&&e.parts[1]&&e.parts[1].path;return i};A.prototype._initState=function(){return Object.create({_setProperty:function(t,e){if(this.mProperties===undefined||this.mProperties===null){this.mProperties={}}if(this.mProperties[t]===undefined){this.mProperties[t]={}}this.mProperties[t].previous=this.mProperties[t].current;this.mProperties[t].current=e},_getProperty:function(t){return this.mProperties&&this.mProperties[t]&&this.mProperties[t].current},_resetProperty:function(t){if(this.mProperties[t]!==undefined){this.mProperties[t]={}}},_resetProperties:function(){if(this.mProperties){this.mProperties={}}},isModeInitialized:function(t){var e=t.toUpperCase(),i=this._getProperty(e);if(!i){this._setProperty(e,true)}return i},isModeChanged:function(t){var e="MODE",i=this._getProperty(e)!==t;if(i){this._setProperty(e,t)}return i},isValuePropertyChanged:function(t){var e="VALUE_PROPERTY_VALUE",i=this._getProperty(e)!==t;if(i){this._setProperty(e,t)}return i},isModelChanged:function(t){var e="MODEL_ID",i=t&&t.getId(),r=this._getProperty(e)!==i;if(r){this._setProperty(e,i)}return r},isValueBindingPathChanged:function(t){var e="VALUE_PROPERTY_BINDING_PATH",i=typeof t!=="undefined"&&this._getProperty(e)!==t;if(i){this._setProperty(e,t)}return i},isEntitySetChanged:function(t){var e="ENTITY_SET",i=typeof t!=="undefined"&&t!==""&&this._getProperty(e)!==t;if(i){this._setProperty(e,t)}return i},isBindingContextChanged:function(t){var e="BINDING_CONTEXT_PATH",i=t&&t.getPath(),r=typeof i!=="undefined"&&this._getProperty(e)!==i;if(r){this._setProperty(e,i)}return r},isEditableChanged:function(t){var e="EDITABLE",i=this._getProperty(e)!==t;if(i){this._setProperty(e,t)}return i},isContextEditableChanged:function(t){var e="CONTEXT_EDITABLE",i=this._getProperty(e)!==t;if(i){this._setProperty(e,t)}return i}})};A.prototype.readODataLabel=function(){return new Promise(function(t,e){var i=this.getModel(),r=this.data("configdata"),o,n=i&&i.getMetaModel(),a,s;if(this._sAnnotationLabel){t(this._sAnnotationLabel);return}if(!i&&!r){e();return}a=new l(i,this._oUtil,n);if(r&&r.configdata){this._sAnnotationLabel=a.oAnnotation.getLabel(a.getEdmProperty(r.configdata));t(this._sAnnotationLabel);return}o=this.getBindingPath("value");s=this._getEntitySet();if(o&&s){n.loaded().then(function(){var e=a.oMeta.getODataEntitySet(s),i={entitySet:e,entityType:a.oMeta.getODataEntityType(e.entityType),path:o};a.getProperty(i);this._sAnnotationLabel=a.oAnnotation.getLabel(a.getEdmProperty(i));t(this._sAnnotationLabel)}.bind(this))}else{e()}}.bind(this))};A.prototype._setEmptyIndicator=function(t){if(t&&t.getEmptyIndicatorMode&&t.getEmptyIndicatorMode()!==T.On){t.setEmptyIndicatorMode(T.On)}};A.prototype._getEditableForNotExpandedNavigation=function(){return false};A.prototype._getComputedMetadata=function(){return this._initialStateApplied.promise.then(function(){return this._oFactory.isA("sap.ui.comp.smartfield.ODataControlFactory")&&this._oFactory.getMetaData()}.bind(this))};A.prototype._calculateFieldGroupIDs=function(t){return this._oSideEffects.getFieldGroupIDs(t,this._getView())};A.prototype._setInternalFieldGroupIds=function(t){this.setProperty("_internalFieldGroupIds",t)};return A},true);