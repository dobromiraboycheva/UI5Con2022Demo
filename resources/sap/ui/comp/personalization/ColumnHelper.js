/*
 * ! SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","./Util","./ColumnWrapper"],function(o,t,e,n){"use strict";var u=t.extend("sap.ui.comp.personalization.ColumnHelper",{constructor:function(o,e){t.apply(this,arguments)},metadata:{properties:{callbackOnSetVisible:{type:"object",defaultValue:null},callbackOnSetSummed:{type:"object",defaultValue:null}}}});u.prototype.init=function(){this._oColumnKey2ColumnMap={};this._oColumnKeyIsMonkeyPatched={}};u.prototype.exit=function(){this._oColumnKey2ColumnMap=null;this._oColumnKeyIsMonkeyPatched=null};u.prototype.addColumns=function(o){if(!o){return}o.forEach(function(o){this._addColumnToMap(e.getColumnKey(o),o)},this);this._checkConsistencyOfColumns(this._oColumnKey2ColumnMap)};u.prototype.addColumnMap=function(o){if(!o){return}for(var t in o){this._addColumnToMap(t,o[t])}this._checkConsistencyOfColumns(this._oColumnKey2ColumnMap)};u.prototype.getColumnMap=function(){return this._oColumnKey2ColumnMap};u.prototype._checkConsistencyOfColumns=function(t){if(o.isEmptyObject(t)){return}var n=Object.keys(t)[0];var u=!!e._getCustomProperty(t[n],"columnKey");for(var i in t){if(u!==!!e._getCustomProperty(t[i],"columnKey")){throw"The table instance contains some columns for which a columnKey is provided, some for which a columnKey is not provided."}}};u.prototype._addColumnToMap=function(o,t){if(this._oColumnKey2ColumnMap[o]){throw"Duplicate 'columnKey': The column '"+t.getId()+"' and column '"+this._oColumnKey2ColumnMap[o]+"' have same 'columnKey' "+o}if(!this._oColumnKey2ColumnMap[o]){this._oColumnKey2ColumnMap[o]=t;this._monkeyPatchColumn(t,o)}};u.prototype._monkeyPatchColumn=function(o,t){if(o instanceof n){return}if(this._oColumnKeyIsMonkeyPatched[t]){return}this._oColumnKeyIsMonkeyPatched[t]=true;var e=this.getCallbackOnSetVisible();var u=o.setVisible.bind(o);var i=function(o){if(e){e(o,t)}u(o)};o.setVisible=i;if(o.setSummed){var l=this.getCallbackOnSetSummed();var a=o.setSummed.bind(o);var s=function(t){if(l){l(t,o)}a(t)};o.setSummed=s}};return u});