/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/base/Log","sap/ui/fl/changeHandler/Base","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,t,r){"use strict";var n={};n.applyChange=function(t,r,n){var o=n.modifier;var i=n.appComponent;var a=n.view;var u=t.getDefinition();if(u.texts&&u.texts.groupLabel&&u.texts.groupLabel.value&&u.content&&u.content.group&&(u.content.group.selector||u.content.group.id)){var p=u.texts.groupLabel.value;var c=u.content.group.index;var l=u.content.group.selector;return Promise.resolve().then(o.createControl.bind(o,"sap.ui.comp.smartform.Group",i,a,u.content.group.selector||u.content.group.id)).then(function(e){if(!l){l=o.getSelector(u.content.group.id,i)}t.setRevertData({newGroupSelector:l});o.setProperty(e,"visible",true);o.setProperty(e,"label",p);return o.insertAggregation(r,"groups",e,c,a)})}e.error("Change does not contain sufficient information to be applied: ["+u.layer+"]"+u.namespace+"/"+u.fileName+"."+u.fileType);return Promise.resolve()};n.completeChangeContent=function(e,n,o){var i=e.getDefinition();var a=o.appComponent;if(n.newLabel){t.setTextInChange(i,"groupLabel",n.newLabel,"XFLD")}else{throw new Error("oSpecificChangeInfo.groupLabel attribute required")}if(!i.content){i.content={}}if(!i.content.group){i.content.group={}}if(n.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required")}else{i.content.group.index=n.index}if(n.newControlId){i.content.group.selector=r.getSelector(n.newControlId,a)}else{throw new Error("oSpecificChangeInfo.newControlId attribute required")}};n.revertChange=function(e,t,r){var n=r.appComponent;var o=r.view;var i=r.modifier;var a=e.getRevertData().newGroupSelector;var u=i.bySelector(a,n,o);return Promise.resolve().then(i.removeAggregation.bind(i,t,"groups",u)).then(function(){i.destroy(u);e.resetRevertData()})};n.getChangeVisualizationInfo=function(e){return{affectedControls:[e.getContent().group.selector]}};return n},true);