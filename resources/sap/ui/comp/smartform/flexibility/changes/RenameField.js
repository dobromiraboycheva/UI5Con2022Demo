/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/fl/changeHandler/BaseRename","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,t,n){"use strict";var r="label";var a="fieldLabel";var i="XFLD";var o=e.createRenameChangeHandler({changePropertyName:a,translationTextType:i});o.applyChange=function(e,n,i){var o=e.getDefinition();var l=o.texts[a];var f=l.value;if(o.texts&&l&&typeof f==="string"){return this.setLabelPropertyOnControl(n,f,i.modifier,r).then(function(t){e.setRevertData(t)})}t.error("Change does not contain sufficient information to be applied: ["+o.layer+"]"+o.namespace+"/"+o.fileName+"."+o.fileType);return Promise.resolve()};o.revertChange=function(e,n,a){var i=e.getRevertData();if(i||i===""){if(i==="$$Handled_Internally$$"){i=undefined}return this.setLabelPropertyOnControl(n,i,a.modifier,r).then(function(){e.resetRevertData()})}t.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.");return Promise.resolve()};o.setLabelPropertyOnControl=function(e,t,n,r){return Promise.resolve().then(n.getProperty.bind(n,e,r)).then(function(t){if(t&&typeof t!=="string"){r="text";e=t}}).then(n.getPropertyBindingOrProperty.bind(n,e,r)).then(function(a){n.setPropertyBindingOrProperty(e,r,t);return a||"$$Handled_Internally$$"})};o.getChangeVisualizationInfo=function(e,t){var r=e.getDefinition().texts&&e.getDefinition().texts[a],i=e.getRevertData(),o,l,f;if(i==="$$Handled_Internally$$"){i=undefined;o=e.getSelector();l=n.bySelector(o,t);if(l.isA("sap.ui.comp.smartform.GroupElement")){f=l.getDataSourceLabel();if(f){i=f}}}return{payload:{originalLabel:i,newLabel:r&&r.value}}};return o},true);