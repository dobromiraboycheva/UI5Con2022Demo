/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/OverflowToolbarButton","sap/m/library","sap/m/MenuButton","sap/ui/core/library","sap/ui/Device","sap/ui/core/ShortcutHintsMixin"],function(e,t,n,a,o,r){"use strict";var i=a.aria.HasPopup;var s;var u={createSettingsButton:function(e,t){if(!s){this._loadResourceBundle()}var n=this._createButton(e+"-settings",{icon:"sap-icon://action-settings",text:s.getText("table.SETTINGS"),press:t,tooltip:s.getText("table.SETTINGS"),ariaHasPopup:i.Dialog});r.addConfig(n,{addAccessibilityLabel:true,messageBundleKey:o.os.macintosh?"mdc.PERSONALIZATION_SHORTCUT_MAC":"mdc.PERSONALIZATION_SHORTCUT"},t[1]);return n},createPasteButton:function(e){var t=this._createButton(e+"-paste");sap.ui.require(["sap/m/plugins/PasteProvider"],function(n){t.addDependent(new n({pasteFor:e+"-innerTable"}))});return t},createExportButton:function(e,a){if(!s){this._loadResourceBundle()}var i=new n(e+"-export",{icon:"sap-icon://excel-attachment",tooltip:s.getText("table.EXPORT_BUTTON_TEXT"),type:t.ButtonType.Ghost,buttonMode:t.MenuButtonMode.Split,useDefaultActionOnly:true,defaultAction:a.default});sap.ui.getCore().loadLibrary("sap.ui.unified",{async:true}).then(function(){sap.ui.require(["sap/m/Menu","sap/m/MenuItem"],function(e,t){var n=new e({items:[new t({text:s.getText("table.QUICK_EXPORT"),press:a.default}),new t({text:s.getText("table.EXPORT_WITH_SETTINGS"),press:a.exportAs})]});i.setMenu(n)})});r.addConfig(i._getButtonControl(),{addAccessibilityLabel:true,messageBundleKey:o.os.macintosh?"table.SHORTCUT_EXPORT_TO_EXCEL_MAC":"table.SHORTCUT_EXPORT_TO_EXCEL"},a.exportAs[1]);return i},_createButton:function(t,n){return new e(t,n)},_loadResourceBundle:function(){s=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")},showPanel:function(e,t,n,a){u["showUI"+t](e,n)},showUIColumns:function(e,t){e.getEngine().uimanager.show(e,e.getActiveP13nModes(),t)},showUIFilter:function(e,t){e.getEngine().uimanager.show(e,"Filter",t)},createSort:function(e,t,n,o){e.getEngine().createChanges({control:e,key:"Sort",state:[{selected:true,name:t,descending:n===a.SortOrder.Descending,sorted:n!==a.SortOrder.None}],applyAbsolute:o})},createGroup:function(e,t){var n={grouped:true,name:t};var a=[n];e.getCurrentState().groupLevels.some(function(e){if(e.name==t){a[0].grouped=false}});e.getEngine().createChanges({control:e,key:"Group",state:a,applyAbsolute:e._bMobileTable})},createAggregation:function(e,t){var n={name:t,aggregated:true};var a=[n];if(e.getCurrentState().aggregations[t]){n.aggregated=false}e.getEngine().createChanges({control:e,key:"Aggregate",state:a,applyAbsolute:false})},createColumnWidth:function(e,t,n){var a={name:t,width:n};var o=[a];e.getEngine().createChanges({control:e,key:"ColumnWidth",state:o,applyAbsolute:false})},moveColumn:function(e,t,n){if(t!=n){this._moveItem(e,t,n,"moveColumn")}},_moveItem:function(e,t,n,a){var o=e.getCurrentState(e).items||[];var r=o[t];e.getEngine().createChanges({control:e,key:"Column",state:[{name:r.name,position:n}]})}};return u});