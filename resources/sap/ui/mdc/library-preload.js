//@ui5-bundle sap/ui/mdc/library-preload.js
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/ActionToolbar",["sap/m/OverflowToolbar","sap/m/OverflowToolbarRenderer","sap/m/ToolbarSpacer","sap/m/ToolbarSeparator","sap/m/library","sap/ui/mdc/enum/ActionToolbarActionAlignment","sap/ui/mdc/p13n/subcontroller/ActionToolbarController","sap/ui/mdc/p13n/Engine"],function(t,e,o,n,r,i,a,s){"use strict";var g=r.OverflowToolbarPriority;var p=t.extend("sap.ui.mdc.ActionToolbar",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/actiontoolbar/ActionToolbar.designtime",defaultAggregation:"actions",properties:{useAsHeader:{type:"boolean",group:"Behavior",defaultValue:true}},aggregations:{begin:{type:"sap.ui.core.Control",multiple:true},between:{type:"sap.ui.core.Control",multiple:true},actions:{type:"sap.ui.mdc.actiontoolbar.ActionToolbarAction",multiple:true},end:{type:"sap.ui.core.Control",multiple:true}}},renderer:e});var l=["begin","between","actions","end"];var h=function(){var t={canOverflow:true,getCustomImportance:function(){return g.NeverOverflow}};return t};p.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oBeginSeparator=new n({visible:false});this._oBeginSeparator.getOverflowToolbarConfig=h;this._oEndActionsBeginSeparator=new n({visible:false});this._oEndActionsBeginSeparator.getOverflowToolbarConfig=h;this._oEndActionsEndSeparator=new n({visible:false});this._oEndActionsEndSeparator.getOverflowToolbarConfig=h;this._oSpacer=new o;this.setUseAsHeader(true);s.getInstance().registerAdaptation(this,{controller:{actionsKey:a}})};p.prototype.exit=function(){t.prototype.exit.apply(this,arguments);if(this._oBeginSeparator){this._oBeginSeparator.destroy()}if(this._oEndActionsBeginSeparator){this._oEndActionsBeginSeparator.destroy()}if(this._oEndActionsEndSeparator){this._oEndActionsEndSeparator.destroy()}if(this._oSpacer){this._oSpacer.destroy()}};p.prototype.addAggregation=function(e,o){if(e==="content"){throw new Error("Mutator functions of the content aggregation of the ActionToolbar '"+this.getId()+"' must not be used.")}var n=arguments;if(l.includes(e)){this._registerControlListener(o);this._resetAndInvalidateToolbar(false);if(o){this._moveControlInSuitableCollection(o,this._getControlPriority(o))}this._informNewFlexibleContentAdded(o);var r=this._callToolbarMethod("addAggregation",n);this._updateSeparators();return r}return t.prototype.addAggregation.apply(this,arguments)};p.prototype.destroyAggregation=function(e){if(e==="content"){throw new Error("Mutator functions of the content aggregation of the ActionToolbar '"+this.getId()+"' must not be used.")}if(l.includes(e)){var o=this.removeAllAggregation(e);for(var n=0;n<o.length;n++){o[n].destroy()}this._updateSeparators();return this}return t.prototype.destroyAggregation.apply(this,arguments)};p.prototype.insertAggregation=function(e,o,n){if(e==="content"){throw new Error("Mutator functions of the content aggregation of the ActionToolbar '"+this.getId()+"' must not be used.")}if(l.includes(e)){this._registerControlListener(o);this._resetAndInvalidateToolbar(false);if(o){this._moveControlInSuitableCollection(o,this._getControlPriority(o))}this._informNewFlexibleContentAdded(o);var r=this._callToolbarMethod("insertAggregation",arguments);this._updateSeparators();return r}return t.prototype.insertAggregation.apply(this,arguments)};p.prototype.removeAllAggregation=function(e){if(e==="content"){throw new Error("Mutator functions of the content aggregation of the ActionToolbar '"+this.getId()+"' must not be used.")}return t.prototype.removeAllAggregation.apply(this,arguments)};p.prototype.removeAggregation=function(e,o){if(e==="content"){throw new Error("Mutator functions of the content aggregation of the ActionToolbar '"+this.getId()+"' must not be used.")}if(l.includes(e)){var n=this._callToolbarMethod("removeAggregation",arguments);if(n){this._getPopover().removeAssociatedContent(n.getId())}this._resetAndInvalidateToolbar(false);this._deregisterControlListener(n);this._removeContentFromControlsCollections(n);this._updateSeparators();return n}return t.prototype.removeAggregation.apply(this,arguments)};p.prototype.setUseAsHeader=function(t){this.setProperty("useAsHeader",t,true);this.toggleStyleClass("sapMTBHeader-CTX",!!t);return this};p.prototype.getEndActionsBegin=function(){return this.getActionsWithLayoutInformation({aggregationName:"end",alignment:i.Begin})};p.prototype.getEndActionsEnd=function(){return this.getActionsWithLayoutInformation({aggregationName:"end",alignment:i.End})};p.prototype.getActionsWithLayoutInformation=function(t){return this.getActions().filter(function(e){var o=e.getLayoutInformation();return o.aggregationName===t.aggregationName&&o.alignment===t.alignment})};p.prototype.onAfterRendering=function(){t.prototype.onAfterRendering.apply(this,arguments);this._updateSeparators()};p.prototype._onContentPropertyChangedOverflowToolbar=function(e){if(this._bIsBeingDestroyed){return}t.prototype._onContentPropertyChangedOverflowToolbar.apply(this,arguments);if(e.getParameter("name")==="visible"||e.getParameter("name")==="width"&&e.getSource()!=this._oBeginSeparator){this._updateSeparators()}};p.prototype._hasVisible=function(t){var e=this.getAggregation("_popover")?this.getAggregation("_popover")._getAllContent():[];var o=t.filter(function(t){return e.indexOf(t)===-1});return o.some(function(t){var e=t.getWidth?t.getWidth()!=="0px":true;return t.getVisible()&&e})};p.prototype._updateSeparators=function(){var t=this._hasVisible(this.getEnd());if(this._oBeginSeparator){var e=this._hasVisible(this.getBegin());var o=this._hasVisible(this.getBetween());this._oBeginSeparator.setVisible(e&&o)}if(this._oEndActionsBeginSeparator){var n=this._hasVisible(this.getEndActionsBegin());this._oEndActionsBeginSeparator.setVisible(t&&n)}if(this._oEndActionsEndSeparator){var r=this._hasVisible(this.getEndActionsEnd());this._oEndActionsEndSeparator.setVisible(t&&r)}};p.prototype.indexOfContent=function(t){return this.getContent().indexOf(t)};p.prototype.getContent=function(){var t=this.getBegin();t.push(this._oBeginSeparator);t=t.concat(this.getBetween());t.push(this._oSpacer);t=t.concat(this.getEndActionsBegin());t.push(this._oEndActionsBeginSeparator);t=t.concat(this.getEnd());t.push(this._oEndActionsEndSeparator);t=t.concat(this.getEndActionsEnd());return t};p.prototype.getCurrentState=function(){var t=[],e;this.getActions().forEach(function(o,n){e=o&&o.getId();if(o.getVisible()){t.push({name:e,alignment:o.getLayoutInformation().alignment})}});return{items:t}};p.prototype.initPropertyHelper=function(){return Promise.resolve({getProperties:function(){var t=[];this.getActions().forEach(function(e){t.push({name:e.getId(),alignment:e.getLayoutInformation().alignment,label:e.getLabel(),visible:true})});return t}.bind(this)})};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/AggregationBaseDelegate",["sap/ui/mdc/BaseDelegate","sap/ui/core/library"],function(e,r){"use strict";var t=Object.assign(e,{fetchProperties:function(e){return Promise.resolve([])},addItem:function(e,r,t){return Promise.resolve()},removeItem:function(e,r,t){return Promise.resolve(true)},validateState:function(e,t){var i=r.MessageType.None;return{validation:i,message:undefined}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/BaseDelegate",["sap/ui/mdc/util/TypeUtil"],function(e){"use strict";var t={getTypeUtil:function(t){return e}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Chart",["sap/ui/core/Core","sap/ui/mdc/Control","./chart/ChartSettings","sap/ui/mdc/util/loadModules","./ChartRenderer","sap/ui/mdc/library","sap/m/Text","sap/m/VBox","sap/base/Log","./chart/ChartToolbar","./chart/PropertyHelper","sap/ui/mdc/mixin/FilterIntegrationMixin","sap/ui/model/base/ManagedObjectModel","sap/ui/mdc/p13n/subcontroller/ChartItemController","sap/ui/mdc/p13n/subcontroller/FilterController","sap/ui/mdc/p13n/subcontroller/SortController","sap/ui/mdc/p13n/subcontroller/ChartTypeController","sap/ui/base/ManagedObjectObserver","sap/ui/mdc/chart/DrillBreadcrumbs","sap/ui/mdc/actiontoolbar/ActionToolbarAction","sap/ui/thirdparty/jquery"],function(t,e,i,r,o,n,a,s,l,h,p,u,d,g,c,f,y,C,b,m,D){"use strict";var _;var I=e.extend("sap.ui.mdc.Chart",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/chart/Chart.designtime",interfaces:["sap.ui.mdc.IFilterSource","sap.ui.mdc.IxState"],defaultAggregation:"items",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%",invalidate:true},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%",invalidate:true},delegate:{type:"object",group:"Data",defaultValue:{name:"sap/ui/mdc/ChartDelegate"}},header:{type:"string",group:"Misc",defaultValue:null},noDataText:{type:"string",defaultValue:"No data"},p13nMode:{type:"sap.ui.mdc.ChartP13nMode[]",defaultValue:[]},legendVisible:{type:"boolean",group:"Misc",defaultValue:true},ignoreToolbarActions:{type:"sap.ui.mdc.ChartToolbarActionType[]",defaultValue:[]},minWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"240px",invalidate:true},minHeight:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"400px",invalidate:true},sortConditions:{type:"object"},filterConditions:{type:"object",defaultValue:{}},showChartTooltip:{type:"boolean",group:"Misc",defaultValue:true},autoBindOnInit:{type:"boolean",group:"Misc",defaultValue:true},chartType:{type:"string",group:"Misc",defaultValue:"column"},showSelectionDetails:{type:"boolean",group:"Misc",defaultValue:true},propertyInfo:{type:"object",defaultValue:[]}},aggregations:{items:{type:"sap.ui.mdc.chart.Item",multiple:true},actions:{type:"sap.ui.core.Control",multiple:true,forwarding:{getter:"_getToolbar",aggregation:"actions"}},_toolbar:{type:"sap.ui.mdc.chart.ChartToolbar",multiple:false,visibility:"hidden"},_breadcrumbs:{type:"sap.m.Breadcrumbs",multiple:false,visibility:"hidden"},_innerChart:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},selectionDetailsActions:{type:"sap.ui.mdc.chart.SelectionDetailsActions",multiple:false},variant:{type:"sap.ui.fl.variants.VariantManagement",multiple:false}},associations:{filter:{type:"sap.ui.mdc.IFilter",multiple:false}},events:{selectionDetailsActionPressed:{parameters:{action:{type:"sap.ui.core.Item"},itemContexts:{type:"sap.ui.model.Context"},level:{type:"sap.m.SelectionDetailsActionLevel"}}},innerChartLoadedData:{parameters:{innerChart:{type:"sap.ui.core.Control"}}}}},renderer:o});u.call(I.prototype);I.prototype.init=function(){this._oManagedObjectModel=new d(this);this.setModel(this._oManagedObjectModel,"$mdcChart");this._bNewP13n=true;e.prototype.init.apply(this,arguments);this._setupPropertyInfoStore("propertyInfo");this._setPropertyHelperClass(p)};I.prototype.setP13nMode=function(t){var e=null;if(t&&t.length>=1){e=[];var i=t.reduce(function(t,e,i){t[e]=true;return t},{});if(i.Item){e.push("Item")}if(i.Sort){e.push("Sort")}if(i.Filter){e.push("Filter")}if(i.Type){this._typeBtnActive=true;e.push("Type")}else{this._typeBtnActive=false}}else{e=t}this.setProperty("p13nMode",e,true);this._updateAdaptation(this.getP13nMode());return this};I.prototype._updateAdaptation=function(t){var e={controller:{}};var i={Item:g,Sort:f,Filter:c,Type:y};if(t&&t.length>0){t.forEach(function(t){var r=t;var o=i[t];if(o){e.controller[r]=o}});this.getEngine().registerAdaptation(this,e)}};I.prototype.isFilteringEnabled=function(){return this.getP13nMode().indexOf("Filter")>-1};I.prototype.setFilterConditions=function(t){this.setProperty("filterConditions",t,true);var e=this.getInbuiltFilter();if(e){e.setFilterConditions(t)}return this};I.prototype.getConditions=function(){return this.getInbuiltFilter()?this.getInbuiltFilter().getConditions():[]};I.prototype._registerInnerFilter=function(t){t.attachSearch(function(){this._rebind()},this)};I.prototype.applySettings=function(t,i){this._setPropertyHelperClass(p);e.prototype.applySettings.apply(this,arguments);this.initializedPromise=new Promise(function(t,e){this._fnResolveInitialized=t;this._fnRejectInitialized=e}.bind(this));this.innerChartBoundPromise=new Promise(function(t,e){this._fnResolveInnerChartBound=t;this._fnRejectInnerChartBound=e}.bind(this));var r=this._loadDelegate().then(function(t){return t}).then(function(t){return this.initControlDelegate(t)}.bind(this)).catch(function(t){this._fnRejectInitialized(t)}.bind(this));var o=[r];if(this.isFilteringEnabled()){o.push(this.retrieveInbuiltFilter())}Promise.all(o).then(function(){this._initInnerControls()}.bind(this))};I.prototype._initInnerControls=function(){this.getControlDelegate().initializeInnerChart(this).then(function(t){this.setBusyIndicatorDelay(0);this.getControlDelegate().createInitialChartContent(this);this._renderOverlay(true);if(this.getAutoBindOnInit()){this.setBusy(true);this._createContentfromPropertyInfos(t)}this.setAggregation("_innerChart",t);this._bInnerChartReady=true;this._fnResolveInitialized();this.invalidate()}.bind(this)).catch(function(t){this._fnRejectInitialized(t)}.bind(this));this._getToolbar().createToolbarContent(this)};I.prototype._createContentfromPropertyInfos=function(t){this.getControlDelegate().checkAndUpdateMDCItems(this).then(function(){this.getControlDelegate().createInnerChartContent(this,this._innerChartDataLoadComplete.bind(this)).then(function(){this._createBreadcrumbs();this._oObserver=new C(this._propagateItemChangeToInnerChart.bind(this));this._oObserver.observe(this,{aggregations:["items"]});this._propagatePropertiesToInnerChart();this._fnResolveInnerChartBound()}.bind(this))}.bind(this))};I.prototype.setHeight=function(t){try{this.getControlDelegate().adjustChartHeight(this)}catch(t){}this.setProperty("height",t);return this};I.prototype._createBreadcrumbs=function(){this._oBreadcrumbs=new b(this.getId()+"--breadcrumbs");this._oBreadcrumbs.updateDrillBreadcrumbs(this,this.getControlDelegate().getDrillableItems(this));this.setAggregation("_breadcrumbs",this._oBreadcrumbs);this._oBreadcrumbs.addEventDelegate({onAfterRendering:function(){this.getControlDelegate().adjustChartHeight(this)}.bind(this)})};I.prototype._loadDelegate=function(){return new Promise(function(t){var e=[this.getDelegate().name];function i(e){t(e)}sap.ui.require(e,i)}.bind(this))};I.prototype.isFilteringEnabled=function(){return this.getP13nMode().indexOf("Filter")>-1};I.prototype.getAdaptationUI=function(){return this.getControlDelegate().getAdaptionUI(this)};I.prototype._propagateItemChangeToInnerChart=function(t){if(this._bIsDestroyed){return}this.setBusy(true);switch(t.mutation){case"insert":var e;if(t.child&&t.child.getType()){e=this.getItems().filter(function(e){return e.getType()===t.child.getType()}).indexOf(t.child)}else{e=this.getItems().indexOf(t.child)}this.getControlDelegate().insertItemToInnerChart(this,t.child,e);break;case"remove":this.getControlDelegate().removeItemFromInnerChart(this,t.child);break;default:l.error("Unknown mutation on MDC Chart Item Aggregation. This will not sync to inner chart!");break}this._rebind();this._oBreadcrumbs.updateDrillBreadcrumbs(this,this.getControlDelegate().getDrillableItems(this))};I.prototype._rebind=function(){if(!this._bInnerChartReady){this.initialized().then(function(){this._rebind()}.bind(this));return}this.setBusy(true);if(!this.getControlDelegate().getInnerChartBound(this)){this._createContentfromPropertyInfos();return}var t=this.getControlDelegate()._getBindingInfo(this);this.getControlDelegate().updateBindingInfo(this,t);this.getControlDelegate().rebind(this,t)};I.prototype._getToolbar=function(){if(this.getAggregation("_toolbar")){return this.getAggregation("_toolbar")}else{var t=new h(this.getId()+"--toolbar",{design:"Transparent"});this.setAggregation("_toolbar",t);return t}};I.prototype._updateToolbar=function(){if(this.getAggregation("_toolbar")){this.getAggregation("_toolbar").updateToolbar(this)}else{l.warning("Trying to uipdate Chart Toolbar, but toolbar is not yet initialized. This will not work!")}};I.prototype._getInnerChart=function(){if(this._bInnerChartReady){return this.getControlDelegate().getInnerChart(this)}else{l.error("Trying to acces inner chart while inner chart is not yet initialized!")}};I.prototype._addItems=function(){};I.prototype.getCollectionModel=function(){var t=this.getBindingInfo("data");return t?this.getModel(t.model):null};I.prototype.initialized=function(){return this.initializedPromise};I.prototype.innerChartBound=function(){return this.innerChartBoundPromise};I.prototype.zoomIn=function(t){if(!t){t=10}this.getControlDelegate().zoomIn(this,t)};I.prototype.zoomOut=function(t){if(t){t=10}this.getControlDelegate().zoomOut(this,t)};I.prototype.getZoomState=function(){return this.getControlDelegate().getZoomState(this)};I.prototype.getSelectionHandler=function(){return this.getControlDelegate().getInnerChartSelectionHandler(this)};I.prototype.getChartTypeLayoutConfig=function(){return this.getControlDelegate().getChartTypeLayoutConfig()};I.prototype.getAllowedRolesForKinds=function(){return this.getControlDelegate().getAllowedRolesForKinds()};I.prototype.setLegendVisible=function(t){this.setProperty("legendVisible",t);try{this.getControlDelegate().setLegendVisible(this,t)}catch(t){l.info("Trying to set legend visiblity for Chart before delegate was initialized")}return this};I.prototype.setShowChartTooltip=function(t){this.setProperty("showChartTooltip",t);try{this.getControlDelegate().setChartTooltipVisibility(this,t)}catch(t){l.info("Trying to set tooltip visibility before delegate was initialized")}return this};I.prototype.destroy=function(){this._bIsDestroyed=true;e.prototype.destroy.apply(this,arguments)};I.prototype._showDrillDown=function(t){if(!this.oDrillPopover){if(_){this.oDrillPopover=_.createDrillDownPopover(this);this.oDrillPopover.attachAfterClose(function(){delete this.oDrillPopover}.bind(this));return _.showDrillDownPopover(this,t)}return new Promise(function(e,i){sap.ui.require(["sap/ui/mdc/chart/DrillStackHandler"],function(i){_=i;this.oDrillPopover=_.createDrillDownPopover(this);this.oDrillPopover.attachAfterClose(function(){delete this.oDrillPopover}.bind(this));_.showDrillDownPopover(this,t).then(function(t){e(t)})}.bind(this))}.bind(this))}};I.prototype._propagatePropertiesToInnerChart=function(){this.setLegendVisible(this.getLegendVisible());this.setShowChartTooltip(this.getShowChartTooltip());this.setChartType(this.getChartType())};I.prototype.getChartTypeInfo=function(){var t;try{t=this.getControlDelegate().getChartTypeInfo(this)}catch(e){if(!t){t={icon:"sap-icon://vertical-bar-chart",text:"Selected Chart Type: Bar Chart"}}}return t};I.prototype.getAvailableChartTypes=function(){return this.getControlDelegate().getAvailableChartTypes(this)};I.prototype.setChartType=function(t){this.setProperty("chartType",t);try{this.getControlDelegate().setChartType(this,t)}catch(t){l.info("Trying to set chart type for Chart before delegate was initialized")}return this};I.prototype.getManagedObjectModel=function(){return this._oManagedObjectModel};I.prototype._innerChartDataLoadComplete=function(t){this.setBusy(false);this._renderOverlay(false);this.getControlDelegate().requestToolbarUpdate(this);this.fireEvent("innerChartLoadedData ",{innerChart:this.getControlDelegate().getInnerChart(this)})};I.prototype.getCurrentState=function(){var t={};var e=this.getP13nMode();if(e){if(e.indexOf("Item")>-1){t.items=this._getVisibleProperties()}if(e.indexOf("Sort")>-1){t.sorters=this._getSortedProperties()}if(e.indexOf("Filter")>-1){t.filter=this.getFilterConditions()}if(e.indexOf("Type")>-1){t.chartType=this.getChartType()}}return t};I.prototype._getVisibleProperties=function(){var t=[];this.getItems().forEach(function(e){t.push({name:e.getName(),role:e.getRole()})});return t};I.prototype._getSortedProperties=function(){return this.getSortConditions()?this.getSortConditions().sorters:[]};I.prototype._getPropertyData=function(){if(!this.aFetchedProperties){this.aFetchedProperties=this.getControlDelegate().fetchProperties(this)}else{return this.aFetchedProperties}};I.prototype._getTypeBtnActive=function(){return!!this._typeBtnActive};I.prototype.setNoDataText=function(t){this.setProperty("noDataText",t);try{this.getControlDelegate().setNoDataText(this,t)}catch(t){}return this};I.prototype._onFiltersChanged=function(t){if(this._bInnerChartReady&&this.getControlDelegate()&&this.getControlDelegate().getInnerChartBound(this)&&t.getParameter("conditionsBased")){this._renderOverlay(true)}};I.prototype.setVariant=function(t){this.setAggregation("variant",t);if(this.getAggregation("_toolbar")){this.getAggregation("_toolbar").addVariantManagement(t)}return this};I.prototype._renderOverlay=function(t){if(this.getControlDelegate().getInnerChart(this)){var e=this.getControlDelegate().getInnerChart(this).$(),i=e.find(".sapUiMdcChartOverlay");if(t&&i.length===0){i=D("<div>").addClass("sapUiOverlay sapUiMdcChartOverlay").css("z-index","1");e.append(i)}else if(!t){i.remove()}}};I.prototype.addAction=function(t){if(t.getMetadata().getName()!=="sap.ui.mdc.actiontoolbar.ActionToolbarAction"){t=new m(t.getId()+"-action",{action:t})}return e.prototype.addAggregation.apply(this,["actions",t])};return I});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/ChartDelegate",["sap/ui/mdc/AggregationBaseDelegate"],function(n){"use strict";var t=Object.assign({},n);t.zoomIn=function(n){};t.zoomOut=function(n){};t.getZoomState=function(){};t.getFilterDelegate=function(){return{addItem:function(n,t){return Promise.resolve()},addCondition:function(n,t,e){return Promise.resolve()},removeCondition:function(n,t,e){return Promise.resolve()}}};t.addItem=function(n,t,e,i){};t.getInnerChartSelectionHandler=function(){};t.setLegendVisible=function(n){};t.getSorterForItem=function(n,t){};t.insertItemToInnerChart=function(n,t){};t.removeItemFromInnerChart=function(n){};t.removeItem=function(n,t){return Promise.resolve(true)};t.initializeInnerChart=function(n){};t.createInitialChartContent=function(n){};t.getInnerChart=function(){};t.getChartTypeInfo=function(){};t.getChartTypeLayoutConfig=function(){};t.getAvailableChartTypes=function(){};t.getDrillStack=function(){};t.getSortedDimensions=function(n){};t.getDrillableItems=function(n){};t.setChartType=function(n){};t.createInnerChartContent=function(n,t){};t.rebindChart=function(n,t){};t.rebind=function(n,t){};t.getInnerChartBound=function(){};t.updateBindingInfo=function(n,t){};t.setChartTooltipVisibility=function(n){};t.getInternalChartNameFromPropertyNameAndKind=function(n,t,e){};t.getPropertyFromNameAndKind=function(n,t,e){};t.initPropertyHelper=function(n){return Promise.resolve(true)};t.setNoDataText=function(n,t){};t.fetchProperties=function(n){};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/ChartRenderer",["./library"],function(e){"use strict";var r={apiVersion:2};r.CSS_CLASS="sapUiMDCChart";r.render=function(e,t){e.openStart("div",t);e.attr("id",t.getId());e.class(r.CSS_CLASS);e.style("height",t.getHeight());e.style("width",t.getWidth());e.style("min-height",t.getMinHeight());e.style("min-width",t.getMinWidth());e.openEnd();this.renderToolbar(e,t.getAggregation("_toolbar"));this.renderBreadcrumbs(e,t.getAggregation("_breadcrumbs"));this.renderInnerStructure(e,t.getAggregation("_innerChart"));e.close("div")};r.renderNoDataStruct=function(e,r){if(r){}};r.renderToolbar=function(e,r){if(r){e.openStart("div");e.class("sapUiFixFlexFixed");e.openEnd();e.renderControl(r);e.close("div")}};r.renderBreadcrumbs=function(e,r){if(r){e.renderControl(r)}};r.renderInnerChart=function(e,r){if(r){e.renderControl(r)}};r.renderInnerStructure=function(e,r){e.renderControl(r)};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Control",["sap/ui/core/Control","sap/ui/mdc/mixin/DelegateMixin","sap/ui/mdc/mixin/PropertyHelperMixin","sap/ui/mdc/mixin/AdaptationMixin"],function(e,i,r,t){"use strict";var a=e.extend("sap.ui.mdc.Control",{metadata:{library:"sap.ui.mdc",properties:{delegate:{type:"object",group:"Data"}}},renderer:e.renderer});i.call(a.prototype);t.call(a.prototype);r.call(a.prototype);return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Delegate",[],function(){"use strict";var e=function(){};e.retrieveAllMetadata=function(e,t){return[]};e.retrieveAggregationItem=function(e,t){return null};e.preConfiguration=function(e,t){return e};e.getNavigationTargets=function(e){return[]};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Element",["sap/ui/core/Element","sap/ui/mdc/mixin/DelegateMixin","sap/ui/mdc/mixin/PropertyHelperMixin","sap/ui/mdc/mixin/AdaptationMixin"],function(e,i,t,r){"use strict";var a=e.extend("sap.ui.mdc.Element",{metadata:{library:"sap.ui.mdc",properties:{delegate:{type:"object",group:"Data"}}},renderer:e.renderer});i.call(a.prototype);r.call(a.prototype);t.call(a.prototype);return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Field",["sap/ui/base/ManagedObjectObserver","sap/ui/mdc/field/FieldBase","sap/ui/mdc/field/FieldBaseRenderer","sap/ui/mdc/enum/FieldDisplay","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/enum/BaseType","sap/ui/mdc/enum/ConditionValidated","sap/base/util/deepEqual","sap/base/util/merge","sap/ui/model/BindingMode","sap/ui/model/Context"],function(t,e,i,a,n,o,s,r,l,d,p,h){"use strict";var u=e.extend("sap.ui.mdc.Field",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/field/Field.designtime",properties:{value:{type:"any",defaultValue:null},additionalValue:{type:"any",defaultValue:null}},events:{change:{parameters:{value:{type:"string"},valid:{type:"boolean"},promise:{type:"Promise"}}}},defaultProperty:"value"},renderer:i});u.prototype.init=function(){this._vValue=null;this._vAdditionalValue=null;e.prototype.init.apply(this,arguments);this.setMaxConditions(1);this._oObserver.observe(this,{properties:["value","additionalValue"]})};u.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this._iConditionUpdateTimer){clearTimeout(this._iConditionUpdateTimer);delete this._iConditionUpdateTimer;delete this._bPendingConditionUpdate}this._oBindingContext=undefined};u.prototype.bindProperty=function(t,i){if(t==="value"&&!i.formatter){i.targetType="raw";var a=this._oContentFactory.getDataType();if(i.type&&(!a||a.getMetadata().getName()!==i.type.getMetadata().getName()||!l(a.getFormatOptions(),i.type.getFormatOptions())||!l(a.getConstraints(),i.type.getConstraints())||a._bCreatedByOperator!==i.type._bCreatedByOperator)){this._oContentFactory.setDataType(i.type);if(i.type.isA("sap.ui.model.CompositeType")&&i.parts){var n=[];for(var o=0;o<i.parts.length;o++){n.push(i.parts[o].type)}this._oContentFactory.setCompositeTypes(n)}this._oContentFactory.updateConditionType();this.invalidate()}}e.prototype.bindProperty.apply(this,arguments)};u.prototype._handleModelContextChange=function(t){e.prototype._handleModelContextChange.apply(this,arguments);var i=this.getBinding("value");if(i){var a=i.isA("sap.ui.model.CompositeBinding")?i.getBindings()[0].getContext():i.getContext();if(h.hasChanged(this._oBindingContext,a)){this._oBindingContext=a;this._oContentFactory.updateConditionType();if(this._bParseError||this.getFieldHelp()){if(this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true)}this._bParseError=false}}if(!this._oContentFactory.getDataType()){this._oContentFactory.setDataType(i.getType());this.invalidate()}}};u.prototype._initDataType=function(){e.prototype._initDataType.apply(this,arguments);var t=this.getBinding("value");if(t){this._oContentFactory.setDataType(t.getType())}};u.prototype.setProperty=function(t,i,a){if(t==="value"&&this._bParseError&&l(this.getValue(),this.validateProperty(t,i))){if(this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true)}this._bParseError=false}return e.prototype.setProperty.apply(this,arguments)};u.prototype.setMaxConditions=function(t){if(t!==1){throw new Error("Only one condition allowed for Field "+this)}return this.setProperty("maxConditions",t,true)};u.prototype._observeChanges=function(t){e.prototype._observeChanges.apply(this,arguments);if(t.name==="value"){var i=_.call(this,t.current,t.old);if(this._vAdditionalValue!==null&&T.call(this)&&!C.call(this,i,this._vValue,true)){this._vAdditionalValue=this.getAdditionalValue()}this._vValue=i;v.call(this,t.current);c.call(this)}if(t.name==="additionalValue"){this._vAdditionalValue=t.current;c.call(this)}if(t.name==="conditions"){if(this._getContent().length<=1){m.call(this,t.current)}}};function y(){return this._vValue}function g(){return this._vAdditionalValue}function c(){if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){if(!this.bIsDestroyed){c.call(this)}}.bind(this));return}if(this.getDisplay()===a.Value){f.call(this,y.call(this),g.call(this))}else if(!this._iConditionUpdateTimer){this._iConditionUpdateTimer=setTimeout(function(){f.call(this,y.call(this),g.call(this));this._iConditionUpdateTimer=undefined;this._bPendingConditionUpdate=false}.bind(this),0);this._bPendingConditionUpdate=true}}function f(t,e){var i=this.getConditions();if(this._checkValueInitial(t)&&!e){if(i.length>0){this.setConditions([])}}else{var a=i[0]&&i[0].values[0];var o=i[0]&&i[0].values[1]?i[0].values[1]:null;if(!i[0]||i[0].operator!=="EQ"||!C.call(this,a,t)||o!==e){var s=n.createItemCondition(t,e);s.validated=r.Validated;this.setConditions([s])}}}function _(t,e){var i=this._oContentFactory.getDataType()?this._oContentFactory.getDataType().getMetadata().getName():this.getDataType();if(t&&e&&(i==="sap.ui.model.odata.type.Unit"||i==="sap.ui.model.odata.type.Currency")&&!t[2]&&e[2]!==undefined){t=d([],t);t[2]=e[2];if(this._bPendingChange){var a=this.getConditions()[0];if(a){if(t[0]===e[0]&&t[0]!==a.values[0][0]){t[0]=a.values[0][0]}if(t[1]===e[1]&&t[1]!==a.values[0][1]){t[1]=a.values[0][1]}}}}return t}function C(t,e,i){var a=t===e;var n=this._oContentFactory.getDataType()?this._oContentFactory.getDataType().getMetadata().getName():this.getDataType();if(!a&&this.getTypeUtil().getBaseType(n)===s.Unit&&Array.isArray(t)&&Array.isArray(e)){var o=t[0];var r=t[1];var d=t.length>=3?t[2]:null;var p=e[0];var h=e[1];var u=e.length>=3?e[2]:null;if(o===p&&r===h&&((this._bUnitSet||i)&&(!d||!u)||l(d,u))){a=true}if((d||u)&&!i){this._bUnitSet=true}}return a}function v(t){if(!this._bTypeInitialized){if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){if(!this.bIsDestroyed){v.call(this,t)}}.bind(this));return}var e=this.getBinding("value");var i=e?e.getType():this._oContentFactory.getDataType();this._oTypeInitialization=this.getControlDelegate().initializeTypeFromBinding(this.getPayload(),i,t);this._bTypeInitialized=this._oTypeInitialization.bTypeInitialized;if(this._bTypeInitialized&&this._oContentFactory.getUnitOriginalType()){this.getControlDelegate().initializeInternalUnitType(this.getPayload(),this._oContentFactory.getDataType(),this._oTypeInitialization);this.getControlDelegate().initializeInternalUnitType(this.getPayload(),this._oContentFactory.getUnitType(),this._oTypeInitialization)}}}u.prototype._fireChange=function(t,e,i,a){var n;if(t){if(e){n=this._getResultForPromise(t)}else{n=i}}if(this._getContent().length>1){if(t){m.call(this,this.getConditions())}else if(a){a=a.then(function(t){m.call(this,this.getConditions());return t}.bind(this))}}this.fireChange({value:n,valid:e,promise:a})};u.prototype._getResultForPromise=function(t){var e;if(t.length===0&&this._oContentFactory.getDataType()){e=this._oContentFactory.getDataType().parseValue("","string",[])}else if(t.length===1){e=t[0].values[0]}return e};function m(t){if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){if(!this.bIsDestroyed){m.call(this,t)}}.bind(this));return}var e=null;var i=null;var a=this.getValue();var n=this.getAdditionalValue();if(t.length===0&&a===null&&n===null){return}e=this._getResultForPromise(t);if(t.length===0&&!n){i=n}else if(t.length===1&&t[0].values.length>1){i=t[0].values[1]}this._vValue=e;this._vAdditionalValue=i;if(!C.call(this,e,a,true)){this.setProperty("value",e,true)}if(i!==n&&!T.call(this)){this.setProperty("additionalValue",i,true)}}u.prototype._getOperators=function(){return["EQ"]};function T(){var t=this.getBinding("additionalValue");if(t&&t.getBindingMode()===p.OneWay){return true}return false}u.prototype._checkCreateInternalContent=function(){if(!this.bIsDestroyed&&this._oContentFactory.getDataType()&&!this._isPropertyInitial("editMode")&&!this._isPropertyInitial("multipleLines")){e.prototype._checkCreateInternalContent.apply(this,arguments)}};return u});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/FilterBar",["sap/ui/mdc/p13n/subcontroller/FilterController","sap/ui/mdc/p13n/subcontroller/AdaptFiltersController","sap/ui/mdc/filterbar/aligned/FilterContainer","sap/ui/mdc/filterbar/aligned/FilterItemLayout","sap/ui/mdc/filterbar/FilterBarBase","sap/ui/mdc/filterbar/FilterBarBaseRenderer","sap/m/library","sap/m/Button","sap/ui/mdc/p13n/StateUtil","sap/base/util/merge","sap/ui/mdc/filterbar/p13n/AdaptationFilterBar","sap/ui/core/library"],function(t,e,i,r,o,n,s,a,l,d,p,u){"use strict";var h=u.aria.HasPopup;var _=o.extend("sap.ui.mdc.FilterBar",{metadata:{designtime:"sap/ui/mdc/designtime/filterbar/FilterBar.designtime",properties:{showAdaptFiltersButton:{type:"boolean",defaultValue:true},p13nMode:{type:"sap.ui.mdc.FilterBarP13nMode[]"},_p13nModeItem:{type:"boolean",visibility:"hidden",defaultValue:false},_p13nModeValue:{type:"boolean",visibility:"hidden",defaultValue:false}}},renderer:n});var c=s.ButtonType;_.prototype._createInnerLayout=function(){this._cLayoutItem=r;this._oFilterBarLayout=new i;this._oFilterBarLayout.getInner().setParent(this);this._oFilterBarLayout.getInner().addStyleClass("sapUiMdcFilterBarBaseAFLayout");this.setAggregation("layout",this._oFilterBarLayout,true);this._addButtons()};_.prototype.setP13nMode=function(i){var r=this.getP13nMode();this.setProperty("p13nMode",i||[],false);var o={};o.controller={};i&&i.forEach(function(i){if(!r||r.indexOf(i)<0){this._setP13nMode(i,true)}if(i=="Item"){o.controller["Item"]=e}if(i=="Value"){o.controller["Filter"]=t}}.bind(this));r&&r.forEach(function(t){if(!i||i.indexOf(t)<0){this._setP13nMode(t,false)}}.bind(this));this.getEngine().registerAdaptation(this,o);return this};_.prototype._setP13nMode=function(t,e){switch(t){case"Item":this._setP13nModeItem(e);break;case"Value":this._setP13nModeValue(e);break}};_.prototype.setFilterConditions=function(e,i){t.checkConditionOperatorSanity(e);if(this._oP13nFB){this._oP13nFB.setFilterConditions(d({},e))}this.setProperty("filterConditions",e,i);return this};_.prototype._getP13nModeItem=function(){return this._oModel.getProperty("/_p13nModeItem")};_.prototype._setP13nModeItem=function(t){this._oModel.setProperty("/_p13nModeItem",t,true)};_.prototype._getP13nModeValue=function(){return this._oModel.getProperty("/_p13nModeValue")};_.prototype._setP13nModeValue=function(t){this._oModel.setProperty("/_p13nModeValue",t,false);this._bPersistValues=t};_.prototype._addButtons=function(){if(this._oFilterBarLayout){this.setProperty("_filterCount",this._oRb.getText("filterbar.ADAPT"),false);this._btnAdapt=new a(this.getId()+"-btnAdapt",{type:c.Transparent,text:"{"+o.INNER_MODEL_NAME+">/_filterCount}",press:this.onAdaptFilters.bind(this)});this._btnAdapt.setAriaHasPopup(h.ListBox);this._btnAdapt.setModel(this._oModel,o.INNER_MODEL_NAME);this._btnAdapt.bindProperty("visible",{parts:[{path:"/showAdaptFiltersButton",model:o.INNER_MODEL_NAME},{path:"/_p13nModeItem",model:o.INNER_MODEL_NAME}],formatter:function(t,e){return t&&e}});this._btnSearch=this._getSearchButton();this._btnSearch.setModel(this._oModel,o.INNER_MODEL_NAME);this._btnSearch.bindProperty("visible",{parts:[{path:"/showGoButton",model:o.INNER_MODEL_NAME},{path:"/liveMode",model:o.INNER_MODEL_NAME}],formatter:function(t,e){return t&&(this._isPhone()?true:!e)}.bind(this)});this._btnSearch.addStyleClass("sapUiMdcFilterBarBaseButtonPaddingRight");this._oFilterBarLayout.addButton(this._btnSearch);this._oFilterBarLayout.addButton(this._btnAdapt)}};_.prototype.retrieveInbuiltFilter=function(){var t=o.prototype.retrieveInbuiltFilter.apply(this,arguments);return t.then(function(t){t._bPersistValues=this._bPersistValues;return t}.bind(this))};_.prototype.onAdaptFilters=function(t){return this._retrieveMetadata().then(function(){return this.getEngine().uimanager.show(this,"Item",this._btnAdapt)}.bind(this))};_.prototype.getCurrentState=function(){var t=o.prototype.getCurrentState.apply(this,arguments);if(!this.getProperty("_p13nModeItem")){delete t.items}return t};o.prototype.setFocusOnFirstErroneousField=function(){return this._setFocusOnFirstErroneousField()};return _});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/FilterBarDelegate",["sap/ui/mdc/AggregationBaseDelegate"],function(e){"use strict";var r=Object.assign({},e);r.addItem=function(e,r,n){return Promise.resolve(null)};r.removeItem=function(e,r,n){return Promise.resolve(true)};r.addCondition=function(e,r,n){return Promise.resolve()};r.removeCondition=function(e,r,n){return Promise.resolve()};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/FilterField",["sap/ui/mdc/field/FieldBase","sap/ui/mdc/field/FieldBaseRenderer","sap/ui/mdc/enum/FieldDisplay","sap/base/util/merge","sap/base/util/deepEqual"],function(t,e,r,i,o){"use strict";var a=t.extend("sap.ui.mdc.FilterField",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/field/FilterField.designtime",properties:{operators:{type:"string[]",group:"Data",defaultValue:[]},defaultOperator:{type:"string",group:"Data",defaultValue:null}},events:{change:{parameters:{value:{type:"string"},valid:{type:"boolean"},conditions:{type:"object[]"},promise:{type:"boolean"}}}}},renderer:e});a.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["value","operators"]})};a.prototype.exit=function(){t.prototype.exit.apply(this,arguments)};a.prototype.setProperty=function(e,r,i){if(e==="conditions"&&this._bParseError&&o(this.getConditions(),this.validateProperty(e,r))){if(this._oContentFactory.getBoundProperty()){if(this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true)}}else{var a=this._getContent()[0];if(a&&a.setValue){a.setValue()}this._removeUIMessage()}this._bParseError=false}return t.prototype.setProperty.apply(this,arguments)};a.prototype._observeChanges=function(e){t.prototype._observeChanges.apply(this,arguments);if(e.name==="operators"){this._updateInternalContent()}};a.prototype._fireChange=function(t,e,r,o){var a;if(t){if(e){if(t.length==1){a=t[0].values[0]}}else{a=r}}this.fireChange({value:a,valid:e,conditions:i([],t),promise:o})};a.prototype._getOperators=function(){var e=this.getOperators();if(e.length===0){e=t.prototype._getOperators.apply(this,arguments)}return e};a.prototype.setOperators=function(t){var e=[];if(!Array.isArray(t)){t=t.split(",")}t.forEach(function(t){if(typeof t==="string"){e.push(t)}else{e.push(t.name)}});this.setProperty("operators",e);return this};a.prototype.addOperator=function(t){var e=this._getOperators();var r=t;if(typeof t!=="string"){r=t.name}if(e.indexOf(r)<0){e.push(r);this.setOperators(e)}return this};a.prototype.addOperators=function(t){if(!Array.isArray(t)){t=[t]}t.forEach(function(t){this.addOperator(t)}.bind(this));return this};a.prototype.removeOperator=function(t){var e=this.getOperators();var r=t;if(typeof t!=="string"){r=t.name}if(e.indexOf(r)>-1){e.splice(e.indexOf(r),1);this.setOperators(e)}};a.prototype.removeOperators=function(t){if(!Array.isArray(t)){t=[t]}t.forEach(function(t){this.removeOperator(t)}.bind(this))};a.prototype.removeAllOperators=function(){this.setOperators([])};a.prototype.setDefaultOperator=function(t){var e=t;if(t&&typeof t!=="string"){e=t.name}this.setProperty("defaultOperator",e);return this};a.prototype._checkCreateInternalContent=function(){if(!this.bIsDestroyed&&!this.isPropertyInitial("dataType")){var e=this.getFieldHelp();var i=sap.ui.getCore().byId(e);var o=this.getBindingInfo("conditions");var a=this.getBinding("conditions");if(this.getDisplay()!==r.Value&&e&&(!i||o&&!a)){return}this._oContentFactory.retrieveDataType();t.prototype._checkCreateInternalContent.apply(this,arguments)}};a.prototype._handleModelContextChange=function(e){t.prototype._handleModelContextChange.apply(this,arguments);if(this._getContent().length===0){this._triggerCheckCreateInternalContent()}};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Link",["sap/ui/mdc/field/FieldInfoBase","sap/ui/thirdparty/jquery","sap/ui/model/BindingMode","sap/ui/model/json/JSONModel","sap/ui/mdc/link/Log","sap/base/Log","sap/ui/mdc/link/Panel","sap/ui/mdc/link/PanelItem","sap/ui/layout/form/SimpleForm","sap/ui/core/Title","sap/ui/layout/library"],function(e,t,i,n,r,o,a,s,l,u,d){"use strict";var p=d.form.SimpleFormLayout.ResponsiveGridLayout;var g=e.extend("sap.ui.mdc.Link",{metadata:{library:"sap.ui.mdc",properties:{enablePersonalization:{type:"boolean",defaultValue:true},delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/LinkDelegate",payload:{}}}},associations:{sourceControl:{type:"sap.ui.core.Control",multiple:false}}}});g.prototype.applySettings=function(){e.prototype.applySettings.apply(this,arguments);this.initControlDelegate()};g.prototype.init=function(){var t=new n({contentTitle:undefined,linkItems:[]});t.setDefaultBindingMode(i.TwoWay);t.setSizeLimit(1e3);this.setModel(t,"$sapuimdcLink");this.attachEvent("modelContextChange",this.fireDataUpdate,this);this._bLinkItemsFetched=false;this._aLinkItems=[];this._oLinkType=null;e.prototype.init.apply(this,arguments)};g.prototype.isTriggerable=function(){return this.retrieveLinkType().then(function(e){var t=e.runtimeType;var i=e.initialType?e.initialType:e;if(t&&t instanceof Promise){t.then(function(e){if(!this._oLinkType||e.linkType!==this._oLinkType.linkType){this._oLinkType=e;this.fireDataUpdate()}}.bind(this))}return this._oLinkType?this._oLinkType.type>0:i.type>0}.bind(this))};g.prototype.getTriggerHref=function(){return this.getDirectLinkHrefAndTarget().then(function(e){return e?e.href:null})};g.prototype.getDirectLinkHrefAndTarget=function(){return this._retrieveDirectLinkItem().then(function(e){this.addDependent(e);return e?{target:e.getTarget(),href:e.getHref()}:null}.bind(this))};g.prototype._retrieveDirectLinkItem=function(){return this.retrieveLinkType().then(function(e){if(this._linkTypeHasDirectLink(this._oLinkType)){return this._oLinkType.directLink}var t=e.initialType?e.initialType:e;if(this._linkTypeHasDirectLink(t)){return t.directLink}return null}.bind(this))};g.prototype._linkTypeHasDirectLink=function(e){return e&&e.type===1&&e.directLink};g.prototype.getContent=function(e){var i=this.retrieveLinkItems();var r=this.retrieveAdditionalContent();return Promise.all([i,r]).then(function(i){var r=i[0];var o=i[1];return new Promise(function(i){sap.ui.require(["sap/ui/fl/Utils","sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(l,u){this._setConvertedLinkItems(r);var d=this._getInternalModel().getProperty("/linkItems");var p=this._getInternalModel().getProperty("/baselineLinkItems");var g=!o.length&&!d.length?this._getNoContent():o;var h=new a(this._createPanelId(l,u),{enablePersonalization:this.getEnablePersonalization(),items:p.map(function(e){return new s(e.key,{text:e.text,description:e.description,href:e.href,target:e.target,icon:e.icon,visible:true})}),additionalContent:g,beforeSelectionDialogOpen:function(){if(e&&e()){e().setModal(true)}},afterSelectionDialogClose:function(){if(e&&e()){e().setModal(false)}},beforeNavigationCallback:this._beforeNavigationCallback.bind(this),metadataHelperPath:"sap/ui/mdc/Link"});h.setModel(new n({metadata:t.extend(true,[],this._getInternalModel().getProperty("/linkItems")),baseline:t.extend(true,[],this._getInternalModel().getProperty("/baselineLinkItems"))}),"$sapuimdcLink");return i(h)}.bind(this))}.bind(this))}.bind(this))};g.prototype.checkDirectNavigation=function(){var e=this.retrieveLinkItems();var t=this.retrieveAdditionalContent();return Promise.all([e,t]).then(function(e){var t=e[0];var i=e[1];this._setConvertedLinkItems(t);var n=this._getInternalModel().getProperty("/linkItems");if(n.length===1&&!i.length){a.navigate(n[0].href);return Promise.resolve(true)}return Promise.resolve(false)}.bind(this))};g.prototype._setConvertedLinkItems=function(e){var t=this._getInternalModel();var i=e.map(function(e){if(!e.getKey()){o.error("sap.ui.mdc.Link: undefined 'key' property of the LinkItem "+e.getId()+". The mandatory 'key' property should be defined due to personalization reasons.")}return{key:e.getKey(),text:e.getText(),description:e.getDescription(),href:e.getHref(),target:e.getTarget(),icon:e.getIcon(),initiallyVisible:e.getInitiallyVisible(),visible:false}});t.setProperty("/linkItems/",i);var n=i.filter(function(e){return e.initiallyVisible});t.setProperty("/baselineLinkItems/",n)};g.prototype._getNoContent=function(){var e=new l({layout:p,content:[new u({text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("info.POPOVER_MSG_NO_CONTENT")})]});e.addStyleClass("mdcbaseinfoPanelDefaultAdditionalContent");return e};g.prototype._createPanelId=function(e,t){var i;if(this.getParent()){i=this.getParent()}var n=typeof this.getSourceControl()==="string"?sap.ui.getCore().byId(this.getSourceControl()):this.getSourceControl();if(!n){this.setSourceControl(i);n=i}if(!t.isFlexSupported({element:this})||!t.isFlexSupported({element:n})){o.error("Invalid component. The mandatory 'sourceControl' association should be assigned to the app component due to personalization reasons.");return this.getId()+"-idInfoPanel"}var r=e.getAppComponentForControl(n)||e.getAppComponentForControl(i);return r.createId("idInfoPanel")};g.retrieveAllMetadata=function(e){if(!e.getModel||!e.getModel("$sapuimdcLink")){return[]}var t=e.getModel("$sapuimdcLink");return t.getProperty("/metadata").map(function(e){return{id:e.key,text:e.text,description:e.description,href:e.href,target:e.target,visible:e.visible}})};g.retrieveBaseline=function(e){if(!e.getModel||!e.getModel("$sapuimdcLink")){return[]}var t=e.getModel("$sapuimdcLink");return t.getProperty("/baseline").map(function(e){return{id:e.key,visible:true}})};g.prototype._getInfoLog=function(){if(this.getPayload()&&this.getPayload().semanticObjects){if(this._oInfoLog){return this._oInfoLog}if(o.getLevel()>=o.Level.INFO){this._oInfoLog=new r;this._oInfoLog.initialize(this.getPayload().semanticObjects,this._getContextObject(this._getControlBindingContext()));return this._oInfoLog}}return undefined};g.prototype._getContextObject=function(e){return e?e.getObject(e.getPath()):undefined};g.prototype.retrieveAdditionalContent=function(){if(this.awaitControlDelegate()){return this.awaitControlDelegate().then(function(){var e=Object.assign({},this.getPayload());return this.getControlDelegate().fetchAdditionalContent(e,this).then(function(e){return e})}.bind(this))}o.error("mdc.Link retrieveAdditionalContent: control delegate is not set - could not load AdditionalContent from delegate.");return Promise.resolve([])};g.prototype.retrieveLinkType=function(){if(this.awaitControlDelegate()){return this.awaitControlDelegate().then(function(){var e=Object.assign({},this.getPayload());return this.getControlDelegate().fetchLinkType(e,this)}.bind(this))}o.error("mdc.Link retrieveLinkType: control delegate is not set - could not load LinkType from delegate.");return Promise.resolve(null)};g.prototype.retrieveLinkItems=function(){var e=Object.assign({},this.getPayload());var t=this._getControlBindingContext();return this._retrieveUnmodifiedLinkItems().then(function(i){return this.getControlDelegate().modifyLinkItems(e,t,i).then(function(e){return e})}.bind(this))};g.prototype._retrieveUnmodifiedLinkItems=function(){if(this._bLinkItemsFetched){return Promise.resolve(this._aLinkItems)}else{this.oUseDelegateItemsPromise=this._useDelegateItems();return this.oUseDelegateItemsPromise.then(function(){return Promise.resolve(this._aLinkItems)}.bind(this))}};g.prototype._useDelegateItems=function(){if(this.awaitControlDelegate()){return this.awaitControlDelegate().then(function(){var e=Object.assign({},this.getPayload());var t=this._getControlBindingContext();var i=this._getInfoLog();return new Promise(function(n){this.getControlDelegate().fetchLinkItems(e,t,i).then(function(e){this._setLinkItems(e===null?[]:e);this._bLinkItemsFetched=e!==null;n()}.bind(this))}.bind(this))}.bind(this))}o.error("mdc.Link _useDelegateItems: control delegate is not set - could not load LinkItems from delegate.");return Promise.resolve()};g.prototype._setLinkItems=function(e){var t=e.filter(function(e){return e.getParent()===null});t.forEach(function(e){this.addDependent(e)}.bind(this));this._aLinkItems=e};g.prototype._beforeNavigationCallback=function(e){if(this.awaitControlDelegate()){var t=Object.assign({},this.getPayload());return this.getControlDelegate().beforeNavigationCallback(t,e)}o.error("mdc.Link _beforeNavigationCallback: control delegate is not set - could not load beforeNavigationCallback from delegate.");return Promise.resolve()};g.prototype._getControlBindingContext=function(){var e=typeof this.getSourceControl()==="string"?sap.ui.getCore().byId(this.getSourceControl()):this.getSourceControl();return e&&e.getBindingContext()||this.getBindingContext()};g.prototype._getInternalModel=function(){return this.getModel("$sapuimdcLink")};return g});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/LinkDelegate",["sap/ui/mdc/BaseDelegate"],function(e){"use strict";var n=Object.assign({},e,{fetchLinkItems:function(e,n,i){return Promise.resolve(null)},fetchLinkType:function(e,n){return Promise.resolve({initialType:{type:2,directLink:undefined},runtimeType:null})},fetchAdditionalContent:function(e,n){return Promise.resolve([])},modifyLinkItems:function(e,n,i){return Promise.resolve(i)},beforeNavigationCallback:function(e,n){return Promise.resolve(true)}});return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/MultiValueField",["sap/ui/mdc/library","sap/ui/mdc/field/FieldBase","sap/ui/mdc/field/FieldBaseRenderer","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated"],function(t,e,i,n,o){"use strict";var a=e.extend("sap.ui.mdc.MultiValueField",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/field/MultiValueField.designtime",properties:{delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/field/MultiValueFieldDelegate",payload:{}}}},aggregations:{items:{type:"sap.ui.mdc.field.MultiValueFieldItem",multiple:true,singularName:"item"}},defaultAggregation:"items",events:{change:{parameters:{items:{type:"sap.ui.mdc.field.MultiValueFieldItem[]"},valid:{type:"boolean"},promise:{type:"Promise"}}}}},renderer:i});a.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver.observe(this,{aggregations:["items"]})};a.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this._iConditionUpdateTimer){clearTimeout(this._iConditionUpdateTimer);delete this._iConditionUpdateTimer}};a.prototype.bindAggregation=function(t,i){if(t==="items"&&!i.formatter){s.call(this,i)}e.prototype.bindAggregation.apply(this,arguments)};function s(t){if(t.template&&t.template.mBindingInfos.key){var e=t.template.mBindingInfos.key;if(e.type&&(!this._oDataType||this._oDataType.getMetadata().getName()!==e.type.getMetadata().getName())){this._oContentFactory.setDataType(e.type);this.invalidate()}}}a.prototype._handleModelContextChange=function(t){e.prototype._handleModelContextChange.apply(this,arguments);if(!this._oDataType){var i=this.getBinding("items");if(i){s.call(this,i)}}};a.prototype._initDataType=function(){e.prototype._initDataType.apply(this,arguments);var t=this.getBindingInfo("items");if(t){s.call(this,t)}};a.prototype.setMaxConditions=function(t){if(t===1){throw new Error("Multiple Conditions needed on MultiValueField "+this)}return this.setProperty("maxConditions",t,true)};a.prototype._observeChanges=function(t){e.prototype._observeChanges.apply(this,arguments);if(t.name==="items"){r.call(this,t.child,t.mutation)}if(t.name==="key"){d.call(this)}if(t.name==="description"){d.call(this)}if(t.name==="conditions"){p.call(this,t.current)}};function r(t,e){if(e==="insert"){this._oObserver.observe(t,{properties:true})}else{this._oObserver.unobserve(t)}if(!this._bMyItemUpdate){d.call(this)}}function p(t){if(this._bConditionsUpdateFromItems){return}if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){if(!this.bIsDestroyed){p.call(this.getConditions())}}.bind(this));return}this.getControlDelegate().updateItems(this.getPayload(),t,this)}function d(){if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){if(!this.bIsDestroyed){d.call(this)}}.bind(this));return}if(!this._iConditionUpdateTimer){this._iConditionUpdateTimer=setTimeout(function(){l.call(this);this._iConditionUpdateTimer=undefined}.bind(this),0)}}function l(){var t=this.getItems();var e=[];for(var i=0;i<t.length;i++){var a=t[i];var s=n.createItemCondition(a.getKey(),a.getDescription());s.validated=o.Validated;e.push(s)}this._bConditionsUpdateFromItems=true;this.setConditions(e);this._bConditionsUpdateFromItems=false}a.prototype._fireChange=function(t,e,i,n){this.fireChange({items:this.getItems(),valid:e,promise:n})};a.prototype._getResultForPromise=function(t){return this.getItems()};a.prototype._getOperators=function(){return["EQ"]};a.prototype._checkCreateInternalContent=function(){if(!this.bIsDestroyed&&this._oContentFactory.getDataType()&&!this._isPropertyInitial("editMode")){e.prototype._checkCreateInternalContent.apply(this,arguments)}};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/Table",["./Control","./ActionToolbar","./table/TableSettings","./table/GridTableType","./table/ResponsiveTableType","./table/PropertyHelper","./mixin/FilterIntegrationMixin","./library","sap/m/Text","sap/m/Title","sap/m/ColumnHeaderPopover","sap/m/ColumnPopoverSelectListItem","sap/m/ColumnPopoverActionItem","sap/m/OverflowToolbar","sap/m/library","sap/m/table/columnmenu/Menu","sap/ui/core/Core","sap/ui/core/format/NumberFormat","sap/ui/core/dnd/DragDropInfo","sap/ui/core/Item","sap/ui/core/format/ListFormat","sap/ui/core/library","sap/ui/events/KeyCodes","sap/ui/model/Sorter","sap/base/strings/capitalize","sap/base/util/deepEqual","sap/base/util/Deferred","sap/base/util/UriParameters","sap/ui/core/InvisibleMessage","sap/ui/core/InvisibleText","sap/ui/mdc/p13n/subcontroller/ColumnController","sap/ui/mdc/p13n/subcontroller/SortController","sap/ui/mdc/p13n/subcontroller/FilterController","sap/ui/mdc/p13n/subcontroller/GroupController","sap/ui/mdc/p13n/subcontroller/AggregateController","sap/ui/mdc/p13n/subcontroller/ColumnWidthController","sap/ui/mdc/actiontoolbar/ActionToolbarAction","sap/ui/mdc/table/RowActionItem","sap/ui/mdc/table/RowSettings","sap/ui/mdc/table/menu/QuickActionContainer","sap/ui/mdc/table/menu/ItemContainer","sap/ui/base/ManagedObjectMetadata"],function(t,e,i,o,n,r,s,a,l,u,h,p,d,g,c,f,b,_,m,T,y,C,v,P,I,S,x,E,A,w,B,M,R,D,F,N,L,O,z,H,V,k){"use strict";var G=a.SelectionMode;var U=a.TableType;var j=a.TableP13nMode;var W=c.ToolbarDesign;var q=c.ToolbarStyle;var Q=a.MultiSelectMode;var K=C.TitleLevel;var X=C.SortOrder;var $=new window.WeakMap;var J=function(t){if(!$.has(t)){$.set(t,{oFilterInfoBar:null})}return $.get(t)};function Y(t,e){sap.ui.require(["sap/m/MessageToast"],function(i){var o=b.getLibraryResourceBundle("sap.ui.mdc");i.show(o.getText(t,e))})}var Z=t.extend("sap.ui.mdc.Table",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/table/Table.designtime",interfaces:["sap.ui.mdc.IFilterSource","sap.ui.mdc.IxState"],defaultAggregation:"columns",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null,invalidate:true},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null,invalidate:true},p13nMode:{type:"sap.ui.mdc.TableP13nMode[]",defaultValue:[]},delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/TableDelegate",payload:{}}},headerLevel:{type:"sap.ui.core.TitleLevel",group:"Appearance",defaultValue:K.Auto},autoBindOnInit:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:null},headerVisible:{type:"boolean",group:"Misc",defaultValue:true},selectionMode:{type:"sap.ui.mdc.SelectionMode",defaultValue:G.None},showRowCount:{type:"boolean",group:"Misc",defaultValue:true},threshold:{type:"int",group:"Appearance",defaultValue:-1},noDataText:{type:"string"},sortConditions:{type:"object"},filterConditions:{type:"object",defaultValue:{}},groupConditions:{type:"object"},aggregateConditions:{type:"object"},enableExport:{type:"boolean",defaultValue:false},busyIndicatorDelay:{type:"int",defaultValue:100},enableColumnResize:{type:"boolean",group:"Behavior",defaultValue:true},showPasteButton:{type:"boolean",group:"Behavior",defaultValue:false},enablePaste:{type:"boolean",group:"Behavior",defaultValue:true},multiSelectMode:{type:"sap.ui.mdc.MultiSelectMode",group:"Behavior",defaultValue:Q.Default},enableAutoColumnWidth:{type:"boolean",group:"Behavior",defaultValue:false}},aggregations:{_content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},type:{type:"sap.ui.mdc.table.TableTypeBase",altTypes:["sap.ui.mdc.TableType"],multiple:false},columns:{type:"sap.ui.mdc.table.Column",multiple:true},creationRow:{type:"sap.ui.mdc.table.CreationRow",multiple:false},actions:{type:"sap.ui.core.Control",multiple:true,forwarding:{getter:"_createToolbar",aggregation:"actions"}},variant:{type:"sap.ui.fl.variants.VariantManagement",multiple:false},quickFilter:{type:"sap.ui.core.Control",multiple:false},rowSettings:{type:"sap.ui.mdc.table.RowSettings",multiple:false},dataStateIndicator:{type:"sap.m.plugins.DataStateIndicator",multiple:false}},associations:{filter:{type:"sap.ui.mdc.IFilter",multiple:false}},events:{rowPress:{parameters:{bindingContext:{type:"sap.ui.model.Context"}}},selectionChange:{parameters:{bindingContext:{type:"sap.ui.model.Context"},selected:{type:"boolean"},selectAll:{type:"boolean"}}},beforeExport:{parameters:{exportSettings:{type:"object"},userExportSettings:{type:"object"}}},paste:{parameters:{data:{type:"string[][]"}}}}},constructor:function(){this._oTableReady=new x;this._oFullInitialize=new x;this._bUseColumnMenu=E.fromQuery(window.location.search).get("sap-ui-xx-columnmenu")==="true";t.apply(this,arguments);this.bCreated=true;this._doOneTimeOperations();this._initializeContent()},renderer:{apiVersion:2,render:function(t,e){t.openStart("div",e);t.class("sapUiMdcTable");t.style("height",e.getHeight());t.style("width",e.getWidth());t.openEnd();t.renderControl(e.getAggregation("_content"));t.close("div")}}});var tt=["variant","quickFilter"];s.call(Z.prototype);tt.forEach(function(t){var e=I(t),i="_o"+e,o="get"+e,n="set"+e,r="destroy"+e;Z.prototype[o]=function(){return this[i]};Z.prototype[r]=function(){var t=this[i];this[n]();if(t){t.destroy()}return this};Z.prototype[n]=function(e){this.validateAggregation(t,e,false);var n=this._createToolbar(),r=e!==this[i];if(!e||r){n.removeBetween(this[o]());this[i]=e}if(r&&e){this._setToolbarBetween(n)}return this}});Z.prototype.init=function(){t.prototype.init.apply(this,arguments);this.mSkipPropagation={rowSettings:true};this._bForceRebind=true;this._aSupportedP13nModes=Object.keys(j);this._updateAdaptation()};Z.prototype.applySettings=function(){this._setPropertyHelperClass(r);t.prototype.applySettings.apply(this,arguments);this.initControlDelegate()};Z.prototype._setToolbarBetween=function(t){[this._oVariant,this._oQuickFilter].forEach(function(e){if(e){t.addBetween(e)}})};Z.prototype.initialized=function(){return this._oTableReady.promise};Z.prototype._fullyInitialized=function(){return this._oFullInitialize.promise};Z.prototype.getDataStateIndicatorPluginOwner=function(t){return this._oTable||this._oFullInitialize.promise};Z.prototype.setDataStateIndicator=function(t){this._handleDataStateEvents(this.getDataStateIndicator(),"detach");this.setAggregation("dataStateIndicator",t,true);this._handleDataStateEvents(this.getDataStateIndicator(),"attach");return this};Z.prototype._handleDataStateEvents=function(t,e){if(t){t[e+"ApplyFilter"](this._onApplyMessageFilter,this);t[e+"ClearFilter"](this._onClearMessageFilter,this);t[e+"Event"]("filterInfoPress",pt,this)}};Z.prototype._onApplyMessageFilter=function(t){this._oMessageFilter=t.getParameter("filter");t.preventDefault();this._rebind()};Z.prototype._onClearMessageFilter=function(t){this._oMessageFilter=null;t.preventDefault();this._rebind()};Z.prototype._getStringType=function(t){var e,i=e=t||this.getType();if(!i){e=U.Table}else if(typeof i==="object"){if(i.isA("sap.ui.mdc.table.ResponsiveTableType")){e=U.ResponsiveTable}else{e=U.Table}}return e};Z.prototype._isOfType=function(t){return this._getStringType()===t};Z.prototype._updateTypeSettings=function(){var t=this.getType();if(t&&typeof t==="object"){t.updateTableSettings()}else{if(t==="ResponsiveTable"){t=n}else{t=o}t.updateDefault(this._oTable)}};Z.prototype.scrollToIndex=function(t){return new Promise(function(e,i){if(!this._oTable){return i()}if(typeof t!=="number"){return i("The iIndex parameter has to be a number")}if(this._isOfType(U.ResponsiveTable)){this._oTable.scrollToIndex(t).then(e).catch(i)}else{if(t===-1){t=this._getRowCount(false)}if(this._oTable._setFirstVisibleRowIndex(t)){this._oTable.attachEventOnce("rowsUpdated",function(){e()})}else{e()}}}.bind(this))};Z.prototype.focusRow=function(t,e){return this.scrollToIndex(t).then(function(){return this._oTable._setFocus(t,e)}.bind(this))};Z.prototype.setType=function(t){var e=this._getStringType(t);var i=this._getStringType();this.setAggregation("type",t,true);if(e===i&&this._oTable){this._updateTypeSettings();return this}if(this.bCreated){if(this._oTable){if(i==="ResponsiveTable"){this._oTable.setHeaderToolbar()}else{this._oTable.removeExtension(this._oToolbar)}this._oTable.destroy("KeepDom");this._oTable=null;this._bTableExists=false}else{this._onAfterTableCreated();this._onAfterFullInitialization()}if(this._oTemplate){this._oTemplate.destroy();this._oTemplate=null}this._oTableReady=new x;this._oFullInitialize=new x;this._bFullyInitialized=false;this._initializeContent()}return this};Z.prototype.setRowSettings=function(t){this.setAggregation("rowSettings",t,true);if(this._oTable){this._oRowActions={};if(this._isOfType(U.ResponsiveTable)){n.updateRowSettings(this,t,this._onResponsiveRowActionPress)}else{o.updateRowSettings(this._oTable,t,[this._onRowActionPress,this])}this._bForceRebind=true;this._rebind()}return this};Z.prototype.setHeaderLevel=function(t){if(this.getHeaderLevel()===t){return this}this.setProperty("headerLevel",t,true);this._oTitle&&this._oTitle.setLevel(t);return this};Z.prototype.focus=function(t){if(this._oTable){this._oTable.focus(t)}};Z.prototype.setBusy=function(t){this.setProperty("busy",t,true);if(this._oTable){this._oTable.setBusy(t)}return this};Z.prototype.setBusyIndicatorDelay=function(t){this.setProperty("busyIndicatorDelay",t,true);if(this._oTable){this._oTable.setBusyIndicatorDelay(t)}return this};Z.prototype.setSelectionMode=function(t){var e=this.getSelectionMode();this.setProperty("selectionMode",t,true);if(this._oTable&&e!=this.getSelectionMode()){this._updateSelectionBehavior()}return this};Z.prototype.setMultiSelectMode=function(t){var e=this.getMultiSelectMode();this.setProperty("multiSelectMode",t,true);if(this._oTable&&e!=this.getMultiSelectMode()){this._updateMultiSelectMode()}return this};Z.prototype.setCreationRow=function(t){this.setAggregation("creationRow",t,true);if(t){t.update()}return this};Z.prototype.setEnableColumnResize=function(t){var e=this.getEnableColumnResize();this.setProperty("enableColumnResize",t,true);if(this.getEnableColumnResize()!==e){this._updateColumnResizer();this._updateAdaptation()}return this};Z.prototype._onModifications=function(){this.getColumns().forEach(function(t){t._onModifications()})};Z.prototype.setP13nMode=function(t){var e=this.getP13nMode();var i=[];if(t&&t.length>1){var o=t.reduce(function(t,e,i){t[e]=true;return t},{});if(o.Column){i.push("Column")}if(o.Sort){i.push("Sort")}if(o.Filter){i.push("Filter")}if(o.Group){i.push("Group")}if(o.Aggregate){i.push("Aggregate")}}else{i=t}this.setProperty("p13nMode",i,true);this._updateAdaptation();if(!S(e.sort(),this.getP13nMode().sort())){et(this)}return this};Z.prototype._updateAdaptation=function(){var t={controller:{}};var e={Column:B,Sort:M,Group:D,Filter:R,Aggregate:F,ColumnWidth:N};this.getActiveP13nModes().forEach(function(i){t.controller[i]=e[i]});if(this.getEnableColumnResize()){t.controller["ColumnWidth"]=e["ColumnWidth"]}this.getEngine().registerAdaptation(this,t)};function et(t){if(t._oToolbar){t._oToolbar.destroyEnd();t._getP13nButtons().forEach(function(e){t._oToolbar.addEnd(e)})}if(t._oTable){var e=t._oTable.getDragDropConfig()[0];if(e){e.setEnabled(t.getActiveP13nModes().indexOf("Column")>-1)}}if(t.isFilteringEnabled()){ot(t)}it(t)}Z.prototype.setFilterConditions=function(t){this.setProperty("filterConditions",t,true);var e=this.getInbuiltFilter();if(e){e.setFilterConditions(t)}it(this);return this};function it(t){var e=st(t);var i=at(t);var o=lt(t);if(!e){return}if(o.length===0||!t.isFilteringEnabled()){var n=e.getDomRef();if(n&&n.contains(document.activeElement)){t.focus()}e.setVisible(false);nt(t).setText("");return}t._fullyInitialized().then(function(){var n=t.getPropertyHelper();var r=o.map(function(t){return n.hasProperty(t)?n.getProperty(t).label:""});var s=b.getLibraryResourceBundle("sap.ui.mdc");var a=y.getInstance();var l=s.getText("table.FILTER_INFO",a.format(r));if(!e.getVisible()){e.setVisible(true)}i.setText(l);nt(t).setText(l)})}function ot(t){if(!t._oTable){return}var e=st(t);if(!e){e=rt(t)}if(t._bMobileTable){if(t._oTable.getInfoToolbar()!==e){t._oTable.setInfoToolbar(e)}}else if(t._oTable.indexOfExtension(e)===-1){t._oTable.insertExtension(e,1)}var i=nt(t);t._oTable.addAriaLabelledBy(i.getId())}function nt(t){if(!t){return null}if(!t._oFilterInfoBarInvisibleText){t._oFilterInfoBarInvisibleText=(new w).toStatic()}return t._oFilterInfoBarInvisibleText}function rt(t){var e=t.getId()+"-filterInfoBar";var i=J(t).oFilterInfoBar;if(i&&!i.bIsDestroyed){i.destroy()}i=new g({id:e,active:true,design:W.Info,visible:false,content:[new l({id:e+"-text",wrapping:false})],press:[pt,t]});i.focus=function(){if(this.getDomRef()){g.prototype.focus.apply(this,arguments)}else{t.focus()}};J(t).oFilterInfoBar=i;it(t);return i}function st(t){var e=J(t).oFilterInfoBar;if(e&&(e.bIsDestroyed||e.bIsBeingDestroyed)){return null}return J(t).oFilterInfoBar}function at(t){var e=st(t);return e?e.getContent()[0]:null}Z.prototype.setThreshold=function(t){this.setProperty("threshold",t,true);if(!this._oTable){return this}t=this.getThreshold()>-1?this.getThreshold():undefined;if(this._bMobileTable){this._oTable.setGrowingThreshold(t)}else{this._oTable.setThreshold(t)}return this};Z.prototype._onFilterProvided=function(t){this._updateInnerTableNoDataText()};Z.prototype._onFilterRemoved=function(t){this._updateInnerTableNoDataText()};Z.prototype._onFiltersChanged=function(t){if(this.isTableBound()&&t.getParameter("conditionsBased")){this._oTable.setShowOverlay(true)}};Z.prototype._onFilterSearch=function(t){this._bIgnoreChange=true;this._bAnnounceTableUpdate=true};Z.prototype.setNoDataText=function(t){this.setProperty("noDataText",t,true);this._updateInnerTableNoDataText();return this};Z.prototype._updateInnerTableNoDataText=function(){if(!this._oTable){return}var t=this._getNoDataText();if(this._bMobileTable){this._oTable.setNoDataText(t)}else{this._oTable.setNoData(t)}};Z.prototype._getNoDataText=function(){var t=this.getNoDataText();if(t){return t}var e=b.getLibraryResourceBundle("sap.ui.mdc");if(!this.isTableBound()){if(this.getFilter()){return e.getText("table.NO_DATA_WITH_FILTERBAR")}return e.getText("table.NO_DATA")}var i=b.byId(this.getFilter());if(this.isFilteringEnabled()&&lt(this).length>0||i&&lt(i).length>0){return e.getText("table.NO_RESULTS")}return e.getText("table.NO_DATA")};Z.prototype._updateRowAction=function(){if(!this._oTable){return}var t=this._bMobileTable?n:o;t.updateRowActions(this,this.getRowSettings(),this._bMobileTable?this._onResponsiveRowActionPress:this._onRowActionPress)};Z.prototype._initializeContent=function(){var t,e=this._getStringType();if(this._isOfType(U.ResponsiveTable)){t=n}else{t=o}var i=[this.awaitControlDelegate(),t.loadTableModules()];if(this.isFilteringEnabled()){i.push(this.retrieveInbuiltFilter())}Promise.all(i).then(function(){if(this.bIsDestroyed){return}var t=this.getControlDelegate();this._aSupportedP13nModes=t.getSupportedP13nModes(this);this._updateAdaptation();if(t.preInit){this._pDelegatePreInit=t.preInit(this)}if(!this._bTableExists&&e===this._getStringType()){this._bMobileTable=e==="ResponsiveTable";this._createContent();this._bTableExists=true}}.bind(this)).catch(function(t){this._onAfterTableCreated();throw t}.bind(this))};Z.prototype._doOneTimeOperations=function(){if(!this.bColumnsOrdered){this.bColumnsOrdered=true;this._orderColumns()}};Z.prototype._onAfterTableCreated=function(t){this._oTableReady[t?"resolve":"reject"](this)};Z.prototype._onAfterFullInitialization=function(t){this._oFullInitialize[t?"resolve":"reject"](this)};Z.prototype._createContent=function(){this._createToolbar();this._createTable();this._updateColumnResizer();this._updateRowAction();this.getColumns().forEach(this._insertInnerColumn,this);this.setAggregation("_content",this._oTable);this._onAfterTableCreated(true);var t=this.initialized().then(function(){this.initPropertyHelper();var t=this.getCreationRow();if(t){t.update()}if(this.getAutoBindOnInit()){this.rebind()}return this.awaitPropertyHelper()}.bind(this));Promise.all([t,this._pDelegatePreInit]).then(function(){delete this._pDelegatePreInit;this._bFullyInitialized=true;this._onAfterFullInitialization(true)}.bind(this)).catch(function(t){this._onAfterFullInitialization();throw t}.bind(this))};Z.prototype.setHeader=function(t){this.setProperty("header",t,true);this._updateHeaderText();this._updateExportState(true);return this};Z.prototype.setHeaderVisible=function(t){this.setProperty("headerVisible",t,true);if(this._oTitle){this._oTitle.setWidth(this.getHeaderVisible()?undefined:"0px")}return this};Z.prototype.setShowRowCount=function(t){this.setProperty("showRowCount",t,true);this._updateHeaderText();return this};Z.prototype.setEnableExport=function(t){if(t!==this.getEnableExport()){this.setProperty("enableExport",t,true);if(t&&!this._oExportButton&&this._oToolbar){this._oToolbar.addEnd(this._getExportButton())}else if(this._oExportButton){this._oExportButton.setVisible(t)}}return this};Z.prototype.setShowPasteButton=function(t){if((t=!!t)==this.getShowPasteButton()){return this}this.setProperty("showPasteButton",t,true);if(t&&!this._oPasteButton&&this._oToolbar){this._oToolbar.insertEnd(this._getPasteButton(),0);this._oPasteButton.setEnabled(this.getEnablePaste())}else if(this._oPasteButton){this._oPasteButton.setVisible(t);this._oPasteButton.setEnabled(this.getEnablePaste())}return this};Z.prototype.setEnablePaste=function(t){this.setProperty("enablePaste",t,true);if(this._oPasteButton){this._oPasteButton.setEnabled(this.getEnablePaste())}return this};Z.prototype._createToolbar=function(){if(this.isDestroyStarted()||this.isDestroyed()){return}if(!this._oToolbar){this._oTitle=new u(this.getId()+"-title",{text:this.getHeader(),width:this.getHeaderVisible()?undefined:"0px",level:this.getHeaderLevel()});this._oToolbar=new e(this.getId()+"-toolbar",{design:W.Transparent,begin:[this._oTitle],end:[this._getPasteButton(),this._getP13nButtons(),this._getExportButton()]})}this._oToolbar.setStyle(this._bMobileTable?q.Standard:q.Clear);return this._oToolbar};Z.prototype._getVisibleProperties=function(){var t=[],e;this.getColumns().forEach(function(i,o){e=i&&i.getDataProperty();if(e){t.push({name:e})}});return t};Z.prototype.getConditions=function(){return this.getInbuiltFilter()?this.getInbuiltFilter().getConditions():[]};Z.prototype._getSortedProperties=function(){return this.getSortConditions()?this.getSortConditions().sorters:[]};Z.prototype._getGroupedProperties=function(){return this.getGroupConditions()?this.getGroupConditions().groupLevels:[]};Z.prototype._getAggregatedProperties=function(){return this.getAggregateConditions()?this.getAggregateConditions():{}};Z.prototype._getXConfig=function(){return this.getEngine().readXConfig(this)};function lt(t){var e=t.getFilterConditions();return Object.keys(e).filter(function(t){return e[t].length>0})}Z.prototype.getCurrentState=function(){var t={};var e=this.getActiveP13nModes();if(e.indexOf("Column")>-1){t.items=this._getVisibleProperties()}if(this.isSortingEnabled()){t.sorters=this._getSortedProperties()}if(this.isFilteringEnabled()){t.filter=this.getFilterConditions()}if(this.isGroupingEnabled()){t.groupLevels=this._getGroupedProperties()}if(this.isAggregationEnabled()){t.aggregations=this._getAggregatedProperties()}if(this.getEnableColumnResize()){t.xConfig=this._getXConfig()}return t};Z.prototype.isFilteringEnabled=function(){return this.getActiveP13nModes().includes(j.Filter)};Z.prototype.isSortingEnabled=function(){return this.getActiveP13nModes().includes(j.Sort)};Z.prototype.isGroupingEnabled=function(){return this.getActiveP13nModes().includes(j.Group)};Z.prototype.isAggregationEnabled=function(){return this.getActiveP13nModes().includes(j.Aggregate)};Z.prototype.getSupportedP13nModes=function(){return this._aSupportedP13nModes||[]};Z.prototype.getActiveP13nModes=function(){var t=this.getP13nMode();var e=this.getSupportedP13nModes();t=t.filter(function(t){return e.includes(t)});return t};Z.prototype._getP13nButtons=function(){var t=this.getActiveP13nModes();var e=[];var o=t.length===1&&t[0]==="Aggregate";if(t.length>0&&!o){e.push(i.createSettingsButton(this.getId(),[ht,this]))}return e};Z.prototype._getPasteButton=function(){if(this.getShowPasteButton()){if(!this._oPasteButton){this._oPasteButton=i.createPasteButton(this.getId())}return this._oPasteButton}};Z.prototype._getExportButton=function(){if(!this.getEnableExport()){return null}if(!this._oExportButton){this._oExportButton=i.createExportButton(this.getId(),{default:[function(){this._onExport()},this],exportAs:[function(){this._onExport(true)},this]})}this._updateExportState();return this._oExportButton};Z.prototype._updateExportState=function(t){if(this._oExportButton){this._oExportButton.setEnabled(this._getRowCount(false)>0);if(t&&this._cachedExportSettings){this._cachedExportSettings.fileName=this.getHeader()}}};Z.prototype._createExportColumnConfiguration=function(){var t=this.getColumns();return this._fullyInitialized().then(function(){var e=this.getPropertyHelper();var i=[];t.forEach(function(t){var o=e.getColumnExportSettings(t);i=i.concat(o)},this);return i}.bind(this))};Z.prototype._getColumnLabel=function(t){var e=this.getPropertyHelper();var i=e.getProperty(t);return i&&i.label};Z.prototype._onExport=function(t){var e=this;return this._createExportColumnConfiguration().then(function(i){if(!i||!i.length){sap.ui.require(["sap/m/MessageBox"],function(t){t.error(b.getLibraryResourceBundle("sap.ui.mdc").getText("table.NO_COLS_EXPORT"),{styleClass:this.$()&&this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":""})}.bind(e));return}var o=e._getRowBinding();var n=e._getColumnLabel.bind(e);var r={workbook:{columns:i,context:{title:e.getHeader()}},dataSource:o,fileName:e.getHeader()};e._loadExportLibrary().then(function(){sap.ui.require(["sap/ui/export/ExportHandler"],function(i){var o;e.getControlDelegate().fetchExportCapabilities(e).then(function(s){if(!e._oExportHandler){o=new i(s);o.attachBeforeExport(function(t){e.fireBeforeExport({exportSettings:t.getParameter("exportSettings"),userExportSettings:t.getParameter("userExportSettings")})});e._oExportHandler=o}if(t){e._oExportHandler.exportAs(r,n)}else{e._oExportHandler.export(r,n)}})})})})};Z.prototype._loadExportLibrary=function(){if(!this._oExportLibLoadPromise){this._oExportLibLoadPromise=b.loadLibrary("sap.ui.export",true)}return this._oExportLibLoadPromise};Z.prototype.onkeydown=function(t){if(t.isMarked()){return}if((t.metaKey||t.ctrlKey)&&t.shiftKey&&t.which===v.E){if(this.getEnableExport()&&this._oExportButton&&this._oExportButton.getEnabled()){this._onExport(true);t.setMarked();t.preventDefault()}}if((t.metaKey||t.ctrlKey)&&t.which===v.COMMA){var e=b.byId(this.getId()+"-settings");if(e&&e.getEnabled()&&e.getVisible()){e.firePress();t.setMarked();t.preventDefault()}}};Z.prototype._createTable=function(){var t=this.getThreshold()>-1?this.getThreshold():undefined;var e=this.getRowSettings()?this.getRowSettings().getAllSettings():{};if(this._bMobileTable){this._oTable=n.createTable(this.getId()+"-innerTable",{autoPopinMode:true,contextualWidth:"Auto",growing:true,sticky:["ColumnHeaders","HeaderToolbar","InfoToolbar"],itemPress:[this._onItemPress,this],selectionChange:[this._onSelectionChange,this],growingThreshold:t,noDataText:this._getNoDataText(),headerToolbar:this._oToolbar,ariaLabelledBy:[this._oTitle]});this._oTemplate=n.createTemplate(this.getId()+"-innerTableRow",e);this._sAggregation="items";this._oTable.bindRows=this._oTable.bindItems;this._oTable.bActiveHeaders=true;this._oTable.attachEvent("columnPress",this._onResponsiveTableColumnPress,this)}else{this._oTable=o.createTable(this.getId()+"-innerTable",{enableBusyIndicator:true,enableColumnReordering:false,threshold:t,cellClick:[this._onCellClick,this],noData:this._getNoDataText(),extension:[this._oToolbar],ariaLabelledBy:[this._oTitle],plugins:[o.createMultiSelectionPlugin(this,[this._onRowSelectionChange,this])],columnSelect:[this._onGridTableColumnPress,this],rowSettingsTemplate:e});this._sAggregation="rows"}this._updateTypeSettings();this._updateSelectionBehavior();this._updateMultiSelectMode();var i=new m({sourceAggregation:"columns",targetAggregation:"columns",dropPosition:"Between",enabled:this.getActiveP13nModes().includes(j.Column),drop:[this._onColumnRearrange,this]});i.bIgnoreMetadataCheck=true;this._oTable.addDragDropConfig(i);this._oTable.setBusyIndicatorDelay(this.getBusyIndicatorDelay());this._oTable.attachPaste(this._onInnerTablePaste,this);if(this.isFilteringEnabled()){ot(this)}};Z.prototype._updateColumnResizer=function(){if(!this._oTable){return}var t=this.getEnableColumnResize();var e=this._bMobileTable?n:o;if(t){e.enableColumnResizer(this,this._oTable)}else{e.disableColumnResizer(this,this._oTable)}};Z.prototype._updateSelectionBehavior=function(){var t=this._bMobileTable?n:o;t.updateSelection(this)};Z.prototype._updateMultiSelectMode=function(){if(this._bMobileTable){n.updateMultiSelectMode(this)}};Z.prototype._onColumnRearrange=function(t){var e=t.getParameter("draggedControl");var o=t.getParameter("droppedControl");if(e===o){return}var n=t.getParameter("dropPosition");var r=this._oTable.indexOfColumn(e);var s=this._oTable.indexOfColumn(o);var a=s+(n=="Before"?0:1)+(r<s?-1:0);i.moveColumn(this,r,a)};Z.prototype._onColumnPress=function(t){if(this._bSuppressOpenMenu){return}var e=t.getParent(),i=e.indexOfColumn(t),o=this.getColumns()[i];this._fullyInitialized().then(function(){if(this._bUseColumnMenu){if(!this._oColumnHeaderMenu){this._oQuickActionContainer=new H({table:this});this._oItemContainer=new V({table:this});this._oColumnHeaderMenu=new f({_quickActions:[this._oQuickActionContainer],_items:[this._oItemContainer]})}this._oQuickActionContainer.setAssociation("column",o);Promise.all([this._oQuickActionContainer.initializeQuickActions(),this._oItemContainer.initializeItems()]).then(function(){if(this._oQuickActionContainer.hasQuickActions()||this._oItemContainer.hasItems()){this._oColumnHeaderMenu.openBy(t)}}.bind(this))}else{var e=b.getLibraryResourceBundle("sap.ui.mdc"),i=this._bMobileTable&&this.getEnableColumnResize();if(this._oPopover){this._oPopover.destroy();this._oPopover=null}if(this.isSortingEnabled()){var r=[],s=[];var a=this.getPropertyHelper().getProperty(o.getDataProperty()).getSortableProperties();a.forEach(function(t){r.push(new T({text:t.label,key:t.name}));s.push(new T({text:t.label,key:t.name}))});if(r.length>0){this._oPopover=new h({items:[new p({items:r,label:e.getText("table.SETTINGS_ASCENDING"),icon:"sap-icon://sort-ascending",action:[X.Ascending,this._onCustomSort,this]}),new p({items:s,label:e.getText("table.SETTINGS_DESCENDING"),icon:"sap-icon://sort-descending",action:[X.Descending,this._onCustomSort,this]})]});t.addDependent(this._oPopover)}}var l=[];var u=this.getControlDelegate();var d=u.addColumnMenuItems&&u.addColumnMenuItems(this,o)||[];this.getPropertyHelper().getFilterableProperties(o.getDataProperty()).forEach(function(t){l.push(new T({text:t.label,key:t.name}))});if(this.isFilteringEnabled()&&l.length){var g=new p({label:e.getText("table.SETTINGS_FILTER"),icon:"sap-icon://filter",action:[pt,this]});d.unshift(g)}if(i){var c=n.startColumnResize(this._oTable,t);c&&d.push(c)}d.forEach(function(e){this._createPopover(e,t)},this);this._oPopover&&this._oPopover.openBy(t)}}.bind(this))};Z.prototype._createPopover=function(t,e){if(this._oPopover){this._oPopover.addItem(t)}else{this._oPopover=new h({items:t});e.addDependent(this._oPopover)}};Z.prototype._onCustomSort=function(t,e){var o=t.getParameter("property");this.getCurrentState().sorters.forEach(function(t){if(t.name===o){if(t.descending&&e===X.Descending||!t.descending&&e===X.Ascending){e=X.None}}});i.createSort(this,o,e,true)};Z.prototype._onColumnResize=function(t){var e=t.getParameter("column");var o=t.getParameter("width");var n=this._oTable.indexOfColumn(e);var r=this.getColumns()[n];var s=r.getDataProperty();i.createColumnWidth(this,s,o)};Z.prototype._onCustomGroup=function(t){i.createGroup(this,t)};Z.prototype._onCustomAggregate=function(t){i.createAggregation(this,t)};Z.prototype._insertInnerColumn=function(t,e){if(!this._oTable){return}var i=t.getInnerColumn();this._setMobileColumnTemplate(t,e);this._bForceRebind=true;if(e===undefined){this._oTable.addColumn(i)}else{this._oTable.insertColumn(i,e)}};Z.prototype._orderColumns=function(){var t,e=[],i=this.getColumns();i.forEach(function(i){t=i.getInitialIndex();if(t>-1){e.push({index:t,column:this.removeColumn(i)})}},this);e.sort(function(t,e){return t-e});e.forEach(function(t){this.insertColumn(t.column,t.index)},this)};Z.prototype.moveColumn=function(t,e){t._bIsBeingMoved=true;this.removeAggregation("columns",t,true);this.insertAggregation("columns",t,e,true);delete t._bIsBeingMoved;if(this._oTable){var i=t.getInnerColumn();this._oTable.removeColumn(i);this._oTable.insertColumn(i,e);this._setMobileColumnOrder();this._updateMobileColumnTemplate(t,e)}};Z.prototype.removeColumn=function(t){t=this.removeAggregation("columns",t,true);this._updateMobileColumnTemplate(t,-1);return t};Z.prototype.addColumn=function(t){this.addAggregation("columns",t,true);this._insertInnerColumn(t);return this};Z.prototype.insertColumn=function(t,e){this.insertAggregation("columns",t,e,true);this._insertInnerColumn(t,e);return this};Z.prototype._setMobileColumnTemplate=function(t,e){if(!this._bMobileTable){return}var i=t.getTemplateClone();if(e>=0){this._oTemplate.insertCell(i,e);this._oTable.getItems().forEach(function(t){t.insertAggregation("cells",new w,e,true)})}else{this._oTemplate.addCell(i)}};Z.prototype._updateMobileColumnTemplate=function(t,e){if(!this._bMobileTable){return}var i,o;if(this._oTemplate){i=t.getTemplateClone();o=this._oTemplate.indexOfCell(i);ut(this._oTemplate,o,e)}if(o>-1){this._oTable.getItems().forEach(function(t){if(t.removeCell){ut(t,o,e)}})}};Z.prototype._setMobileColumnOrder=function(){if(!this._bMobileTable){return}this.getColumns().forEach(function(t){var e=t.getInnerColumn();if(!e){return}e.setOrder(this.indexOfColumn(t))},this);this._oTable.invalidate()};function ut(t,e,i){var o=t.removeCell(e);if(o){if(i>-1){t.insertCell(o,i)}else{o.destroy()}}}Z.prototype._onItemPress=function(t){this.fireRowPress({bindingContext:t.getParameter("listItem").getBindingContext()});n._onRowActionPress.apply(this,[t])};Z.prototype._onSelectionChange=function(t){var e=t.getParameter("selectAll");this.fireSelectionChange({bindingContext:t.getParameter("listItem").getBindingContext(),selected:t.getParameter("selected"),selectAll:e});if(e){var i=this.getRowBinding();if(i&&this._oTable){var o=i.getLength();var n=this._oTable.getItems().length;var r=i.isLengthFinal();if(n!=o||!r){Y("table.SELECTION_LIMIT_MESSAGE",[n])}}}};Z.prototype._onResponsiveTableColumnPress=function(t){this._onColumnPress(t.getParameter("column"))};Z.prototype._onCellClick=function(t){this.fireRowPress({bindingContext:t.getParameter("rowBindingContext")})};Z.prototype._onRowSelectionChange=function(t){if(!this._bSelectionChangedByAPI){this.fireSelectionChange({bindingContext:t.getParameter("rowContext"),selected:t.getSource().isIndexSelected(t.getParameter("rowIndex")),selectAll:t.getParameter("selectAll")})}};Z.prototype._onGridTableColumnPress=function(t){t.preventDefault();this._onColumnPress(t.getParameter("column"))};Z.prototype.getSelectedContexts=function(){if(this._oTable){if(this._bMobileTable){return this._oTable.getSelectedContexts()}var t=this._oTable.getPlugins()[0].getSelectedIndices();return t.map(function(t){return this._oTable.getContextByIndex(t)},this)}return[]};Z.prototype.clearSelection=function(){if(this._oTable){if(this._bMobileTable){this._oTable.removeSelections(true)}else{this._bSelectionChangedByAPI=true;this._oTable.getPlugins()[0].clearSelection();this._bSelectionChangedByAPI=false}}};Z.prototype._registerInnerFilter=function(t){t.attachSearch(function(){this._rebind()},this)};Z.prototype.isTableBound=function(){return this._oTable?this._oTable.isBound(this._bMobileTable?"items":"rows"):false};Z.prototype.bindRows=function(){if(!this.bDelegateInitialized||!this._oTable){return}var t={};this.getControlDelegate().updateBindingInfo(this,t);if(t.path){this._oTable.setShowOverlay(false);if(this._bMobileTable&&this._oTemplate){t.template=this._oTemplate}else{delete t.template}Z._addBindingListener(t,"dataRequested",this._onDataRequested.bind(this));Z._addBindingListener(t,"dataReceived",this._onDataReceived.bind(this));Z._addBindingListener(t,"change",this._onBindingChange.bind(this));this._updateColumnsBeforeBinding();this.getControlDelegate().updateBinding(this,t,this._bForceRebind?null:this.getRowBinding());this._updateInnerTableNoDataText();this._bForceRebind=false}};Z.prototype._onDataRequested=function(){this._bIgnoreChange=true};Z.prototype._onDataReceived=function(){this._bIgnoreChange=false;this._updateHeaderText();this._updateExportState()};Z.prototype._onBindingChange=function(){if(this._bIgnoreChange){return}this._updateHeaderText()};Z.prototype._updateHeaderText=function(){var t,e;if(!this._oNumberFormatInstance){this._oNumberFormatInstance=_.getFloatInstance()}if(this._oTitle&&this.getHeader()){t=this.getHeader();if(this.getShowRowCount()){e=this._getRowCount(true);if(e>0){var i=this._oNumberFormatInstance.format(e);t+=" ("+i+")"}}this._oTitle.setText(t)}if(!this._bIgnoreChange&&this._bAnnounceTableUpdate){this._bAnnounceTableUpdate=false;this._announceTableUpdate(e)}};Z.prototype._announceTableUpdate=function(t){var e=A.getInstance();if(e){var i=b.getLibraryResourceBundle("sap.ui.mdc");var o=this.getHeader();if(t===undefined&&this._getRowCount(false)>0){e.announce(i.getText("table.ANNOUNCEMENT_TABLE_UPDATED",[o]))}else if(t>1){e.announce(i.getText("table.ANNOUNCEMENT_TABLE_UPDATED_MULT",[o,t]))}else if(t===1){e.announce(i.getText("table.ANNOUNCEMENT_TABLE_UPDATED_SING",[o,t]))}else{e.announce(i.getText("table.ANNOUNCEMENT_TABLE_UPDATED_NOITEMS",[o]))}}};Z.prototype._updateColumnsBeforeBinding=function(){var t=this.getColumns();var e=this.getPropertyHelper();t.forEach(function(t){var i=t.getInnerColumn();var o=e.getProperty(t.getDataProperty());var n=o?o.getSortableProperties().map(function(t){return t.name}):[];var r=this._getSortedProperties().find(function(t){return n.includes(t.name)});var s=r&&r.descending?X.Descending:X.Ascending;if(this._bMobileTable){i.setSortIndicator(r?s:X.None)}else{i.setSorted(!!r).setSortOrder(s)}},this)};Z.prototype._getRowCount=function(t){var e=this._getRowBinding();if(!e){return t?undefined:0}var i;if(!t){i=e.getLength()}else if(typeof e.getCount==="function"){i=e.getCount()}else if(e.isLengthFinal()){i=e.getLength()}if(i<0||i==="0"){i=0}return i};Z.prototype.getRowBinding=function(){return this._getRowBinding()};Z.prototype._getRowBinding=function(){if(this._oTable){return this._oTable.getBinding(this._sAggregation)}};Z._addBindingListener=function(t,e,i){if(!t.events){t.events={}}if(!t.events[e]){t.events[e]=i}else{var o=t.events[e];t.events[e]=function(){i.apply(this,arguments);o.apply(this,arguments)}}};Z.prototype._rebind=function(){if(this._bFullyInitialized){this.bindRows()}else{this._fullyInitialized().then(this._rebind.bind(this))}};function ht(t){i.showPanel(this,"Columns",t.getSource())}function pt(t){i.showPanel(this,"Filter",t.getSource())}Z.prototype._getSorters=function(){var t=this.getSortConditions()?this.getSortConditions().sorters:[];var e=[],i=this.getPropertyHelper();t.forEach(function(t){if(i.hasProperty(t.name)){var o=i.getProperty(t.name).path;e.push(new P(o,t.descending))}});return e};Z.prototype._onInnerTablePaste=function(t){if(!this.getEnablePaste()){return}this.firePaste({data:t.getParameter("data")})};Z.prototype.exit=function(){if(this._oTemplate){this._oTemplate.destroy()}this._oTemplate=null;this._oTable=null;if(this._oToolbar&&!this._bTableExists){this._oToolbar.destroy()}this._oToolbar=null;this._oTitle=null;this._oNumberFormatInstance=null;tt.forEach(function(t){var e=I(t),i="_o"+e;this[i]=null},this);this._oTableReady=null;this._oFullInitialize=null;this._oPasteButton=null;if(this._oFilterInfoBarInvisibleText){this._oFilterInfoBarInvisibleText.destroy();this._oFilterInfoBarInvisibleText=null}t.prototype.exit.apply(this,arguments)};Z.prototype.addAction=function(e){if(e.getMetadata().getName()!=="sap.ui.mdc.actiontoolbar.ActionToolbarAction"){e=new L(e.getId()+"-action",{action:e})}return t.prototype.addAggregation.apply(this,["actions",e])};return Z});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/TableDelegate",["./AggregationBaseDelegate","./library","sap/ui/model/Sorter","sap/ui/core/library","sap/ui/core/Core"],function(e,r,t,i,a){"use strict";var n=r.TableP13nMode;var o=r.TableType;var s=Object.assign({},e);s.updateBindingInfo=function(e,r){r.parameters={};r.filters=[];r.sorter=[];if(e._oMessageFilter){r.filters=[e._oMessageFilter]}if(e._bMobileTable){var i=e._getGroupedProperties()[0];if(i){var a=e._getSortedProperties().find(function(e){return e.name===i.name});var n=e.getPropertyHelper().getProperty(i.name).path;var o=a?a.descending:false;r.sorter.push(new t(n,o,function(r){return this.formatGroupHeader(e,r,i.name)}.bind(this)))}}r.sorter=r.sorter.concat(r.sorter.length===1?e._getSorters().filter(function(e){return e.sPath!==r.sorter[0].sPath}):e._getSorters())};s.updateBinding=function(e,r,t){this.rebind(e,r)};s.formatGroupHeader=function(e,r,t){var i=e.getPropertyHelper().getProperty(t);var n=i.textProperty;var o=a.getLibraryResourceBundle("sap.ui.mdc");var s="table.ROW_GROUP_TITLE";var u=[i.label,r.getProperty(i.path,true)];if(n){s="table.ROW_GROUP_TITLE_FULL";u.push(r.getProperty(n.path,true))}return o.getText(s,u)};s.validateState=function(r,t,n){if(n=="Filter"&&r._oMessageFilter){var o=a.getLibraryResourceBundle("sap.ui.mdc");return{validation:i.MessageType.Information,message:o.getText("table.PERSONALIZATION_DIALOG_FILTER_MESSAGESTRIP")}}return e.validateState.apply(this,arguments)};s.rebind=function(e,r){if(e._oTable){e._oTable.bindRows(r)}};s.getFilterDelegate=function(){return{addItem:function(e,r){return Promise.resolve(null)},addCondition:function(e,r,t){return Promise.resolve()},removeCondition:function(e,r,t){return Promise.resolve()}}};s.fetchExportCapabilities=function(e){return Promise.resolve({XLSX:{}})};s.getSupportedP13nModes=function(e){var r=[n.Column,n.Sort,n.Filter];if(e._getStringType()===o.ResponsiveTable){r.push(n.Group)}return r};return s});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/ValueHelp",["sap/ui/mdc/Element","sap/ui/mdc/mixin/PromiseMixin","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/FilterConverter","sap/ui/mdc/enum/SelectType","sap/ui/mdc/enum/OutParameterMode","sap/ui/mdc/enum/ConditionValidated","sap/ui/model/Context","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/base/ManagedObjectModel","sap/ui/base/ManagedObjectObserver","sap/base/util/merge","sap/base/util/deepEqual","sap/ui/mdc/enum/PropagationReason"],function(e,t,i,n,o,a,r,s,l,p,u,c,d,g,h,f){"use strict";var v=e.extend("sap.ui.mdc.ValueHelp",{metadata:{library:"sap.ui.mdc",properties:{conditions:{type:"object[]",defaultValue:[],byValue:true},delegate:{type:"object",group:"Data",defaultValue:{name:"sap/ui/mdc/ValueHelpDelegate"}},filterValue:{type:"string",defaultValue:""},validateInput:{type:"boolean",defaultValue:true},_config:{type:"object",defaultValue:{},visibility:"hidden"},_valid:{type:"boolean",group:"Appearance",defaultValue:true,visibility:"hidden"}},aggregations:{dialog:{type:"sap.ui.mdc.valuehelp.IDialogContainer",multiple:false},typeahead:{type:"sap.ui.mdc.valuehelp.ITypeaheadContainer",multiple:false}},events:{select:{parameters:{conditions:{type:"object[]"},add:{type:"boolean"},close:{type:"boolean"}}},disconnect:{},closed:{},navigated:{parameters:{leaveFocus:{type:"boolean"},condition:{type:"object"},itemId:{type:"string"}}},switchToValueHelp:{}},defaultProperty:"filterValue"}});v.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver=new d(T.bind(this));this._oObserver.observe(this,{aggregations:["typeahead","dialog"]});this.setBindingContext(null);this._oConditions={}};v.prototype.exit=function(){if(this._oManagedObjectModel){this._oManagedObjectModel.destroy();delete this._oManagedObjectModel}};v.prototype.invalidate=function(e){return};v.prototype.connect=function(e,t){if(this._oControl&&this._oControl!==e){this.close();this.setFilterValue("");this.setConditions([]);this.fireDisconnect()}this._oControl=e;this.setProperty("_config",t,true);I.call(this);return this};v.prototype.getControl=function(){return this._oControl};v.prototype.getDomRef=function(){var e=this.getTypeahead();var t=this.getDialog();if(e&&(e.isOpen()||e.isOpening())){return e.getDomRef()}else if(t&&(t.isOpen()||t.isOpening())){return t.getDomRef()}};v.prototype.getAriaAttributes=function(e){var t=this.getTypeahead();var i=this.getDialog();if(!i&&t&&t.getUseAsValueHelp()){i=t}var n=t&&t.isOpen();var o=i&&i.isOpen();var a=t&&t.getAriaAttributes(e);var r=i&&i.getAriaAttributes(e);var s;var l;var p;var u;if(n){s=a.contentId}else if(o){s=r.contentId}l=t&&a.ariaHasPopup||i&&r.ariaHasPopup;p=t&&a.role||i&&r.role;u=t&&a.roleDescription||i&&r.roleDescription;return{contentId:s,ariaHasPopup:l,role:p,roleDescription:u,valueHelpEnabled:!!i||!!t&&!!t.getUseAsValueHelp()}};v.prototype._retrieveDelegateContent=function(e,t){var i;if(!t){var n=e.getSelectedContent();t=n&&n.getId()}i=this._retrievePromise("delegateContent");var o=this.isOpen();if(!i||i&&o||i&&i.aggregation!==e.sParentAggregationName){var a=function(){return this._getControlDelegatePromise().then(function(i){return i.retrieveContent(this.getPayload(),e,t)}.bind(this))}.bind(this);var r=i&&i.isPending();i=this._addPromise("delegateContent",r?i.getInternalPromise().then(a):a);i.aggregation=e.sParentAggregationName}return i.getInternalPromise()};v.prototype._getControlDelegatePromise=function(e){return this._retrievePromise("delegate",this.initControlDelegate.bind(this))};v.prototype.open=function(e){var t=e?this.getTypeahead():x.call(this);var i=e?this.getDialog():this.getTypeahead();if(i&&t!==i&&(i.isOpen()||i.isOpening())){i.close()}if(t&&!t.isOpen()&&!t.isOpening()){t.open(this._retrieveDelegateContent(t))}};function y(e){var t=e.getSource();this._retrieveDelegateContent(t,e.getParameter("contentId"))}function m(e){this.fireSwitchToValueHelp()}v.prototype.close=function(){var e=this.getTypeahead();var t=this.getDialog();if(e&&e.isOpen()){e.close()}if(t&&t.isOpen()){t.close()}};v.prototype.toggleOpen=function(e){var t=this.getTypeahead();var i=this.getDialog();if(!e&&!i&&t&&t.getUseAsValueHelp()){i=t}var n=t&&t.isOpen();var o=i&&i.isOpen();if(e&&n||!e&&o){this.close()}else if(e&&t||!e&&i){this.open(e)}};v.prototype.isOpen=function(){var e=this.getTypeahead();var t=this.getDialog();return!!(e&&e.isOpen()||t&&t.isOpen())};v.prototype.skipOpening=function(){var e=this.getTypeahead();var t=this.getDialog();if(e&&e.isOpening()){e.close()}if(t&&t.isOpening()){t.close()}};v.prototype.initBeforeOpen=function(e){};v.prototype.isTypeaheadSupported=function(){var e=this.getTypeahead();if(e){return this._retrieveDelegateContent(e).then(function(){return!!e&&e.isTypeaheadSupported()})}else{return Promise.resolve(false)}};v.prototype.shouldOpenOnClick=function(){var e=x.call(this);if(e){return e.shouldOpenOnClick()}return false};v.prototype.isFocusInHelp=function(){var e=x.call(this);return e&&e.isFocusInHelp()};v.prototype.removeFocus=function(){var e=this.getTypeahead();if(e){e.removeFocus()}};v.prototype.navigate=function(e){var t=this.getTypeahead();if(t){var i=function(){if(t.shouldOpenOnNavigate()&&!t.isOpening()&&!t.isOpen()){return t.open(true).then(function(){t.navigate(e)})}return t.navigate(e)};var n=this._retrievePromise("navigate");var o=n&&!n.isSettled()&&n.getInternalPromise();this._addPromise("navigate",o?o.then(i):this._retrieveDelegateContent(t).then(i))}};v.prototype.getTextForKey=function(e,t,i,n,o){return this.getItemForValue({parsedValue:e,value:e,context:t,bindingContext:i,conditionModel:n,conditionModelName:o,checkKey:true,exception:p,caseSensitive:true})};v.prototype.getKeyForText=function(e,t){return this.getItemForValue({value:e,context:t,checkDescription:true,exception:u,caseSensitive:true})};v.prototype.getItemForValue=function(e){var t=this.getTypeahead();if(t){var i=["getItemForValue",e.parsedValue||e.value,JSON.stringify(e.context),e.oBindingContext&&e.oBindingContext.getPath()];var n=i.join("_");return this._retrievePromise(n,function(){return this._retrieveDelegateContent(t).then(function(){e.caseSensitive=e.hasOwnProperty("caseSensitive")?e.caseSensitive:false;var i=t.getItemForValue(e);return i})}.bind(this))}else{return Promise.reject("No Typeahead")}};v.prototype.isValidationSupported=function(){var e=this.getTypeahead();return e&&e.isValidationSupported()};v.prototype.onControlChange=function(){if(this.bIsDestroyed){return}C.call(this,f.ControlChange);I.call(this)};v.prototype.getIcon=function(){var e=this.getTypeahead();var t=this.getDialog();if(t){return t.getValueHelpIcon()}else if(e){return e.getValueHelpIcon()}};v.prototype.getMaxConditions=function(){var e=this.getProperty("_config");return e&&e.maxConditions||-1};v.prototype.getDisplay=function(){};v.prototype.getDataType=function(){};v.prototype.valueHelpEnabled=function(){var e=this.getTypeahead();var t=this.getDialog();if(t){return true}else{return e&&e.getUseAsValueHelp()}};function C(e,t){var i=this.bDelegateInitialized&&this.getControlDelegate();if(i){i.onConditionPropagation(this._oPayload,this,e,t||this.getProperty("_config"))}}function O(e){var t=e.getParameter("condition");this.fireNavigated({condition:t,itemId:e.getParameter("itemId"),leaveFocus:e.getParameter("leaveFocus")})}function b(e){var t=e.getParameter("type");var i=e.getParameter("conditions")||[];var o;var r=this.getMaxConditions()===1;if(r){o=t===a.Remove?[]:i.slice(0,1)}if(t===a.Set){o=[].concat(r?i.slice(0,1):i)}if(t===a.Add){if(r){o=i.slice(0,1)}else{o=this.getConditions();for(var s=0;s<i.length;s++){o.push(i[s])}}}if(t===a.Remove){if(r){o=[]}else{o=this.getConditions();for(var l=0;l<i.length;l++){var p=n.indexOfCondition(i[l],o);if(p>=0){o.splice(p,1)}}}}if(o){this.setProperty("conditions",o,true)}}function P(e){if(this.getProperty("_valid")){var t=this.getMaxConditions()===1;var o=e.getParameter("close");var a=typeof o!=="undefined"?o:t;var r=this.getConditions();var s=!t&&!e.getSource().isMultiSelect();if(a){this.close()}r=i._removeEmptyConditions(r);r=i._removeInitialFlags(r);n.updateConditionsValues(r);this.fireSelect({conditions:r,add:s,close:a});C.call(this,f.Select)}}function _(e){this.close()}function D(e){}function V(e){this._removePromise("delegateContent");this._removePromise("navigate");this.fireClosed()}function T(e){if(["typeahead","dialog"].indexOf(e.name)!==-1){var t=e.child;var i=e.mutation==="insert";var n=i?t.attachEvent.bind(t):t.detachEvent.bind(t);n("select",b,this);n("requestDelegateContent",y,this);n("confirm",P,this);n("cancel",_,this);n("opened",D,this);n("closed",V,this);if(t.attachRequestSwitchToDialog){n("requestSwitchToDialog",m,this)}if(t.attachNavigated){n("navigated",O,this)}if(i){if(!this._oManagedObjectModel){this._oManagedObjectModel=new c(this)}t.setModel(this._oManagedObjectModel,"$valueHelp")}}}function I(){var e=this._oControl?this._oControl.getBindingContext():null;this.setBindingContext(e)}function x(){var e=this.getDialog();if(!e){var t=this.getTypeahead();if(t&&t.getUseAsValueHelp()){e=t}}return e}t.call(v.prototype);return v});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/ValueHelpDelegate",["sap/ui/mdc/BaseDelegate","sap/ui/model/FilterType","sap/ui/mdc/enum/ConditionValidated"],function(e,n,t){"use strict";var i=Object.assign({},e);i.retrieveContent=function(e,n,t){return Promise.resolve()};i.isSearchSupported=function(e,n,t){return false};i.executeSearch=function(e,n,t){return Promise.resolve()};i.adjustSearch=function(e,n,t){return t};i.executeFilter=function(e,t,i,r){if(t.isA("sap.ui.model.json.JSONListBinding")){t.filter(i,n.Application);return Promise.resolve(t)}else{var o;var a=function(){o(t)};t.attachEventOnce("dataReceived",a);t.initialize();t.filter(i,n.Application);t.getContexts(0,r);return new Promise(function(e,n){o=e})}};i.checkBindingsPending=function(e,n){return null};i.checkListBindingPending=function(e,n,t){return false};i.onConditionPropagation=function(e,n,t,i){};i.getInitialFilterConditions=function(e,n,t){var i={};return i};i.isFilterableListItemSelected=function(e,n,i,r){var o=n._getListBindingInfo().model;var a=i&&i.getBindingContext(o);var u=n._getItemFromContext(a);for(var c=0;c<r.length;c++){var s=r[c];if(s.validated===t.Validated&&u.key===s.values[0]){return true}}return false};i.modifySelectionBehaviour=function(e,n,t){return t};i.createConditionPayload=function(e,n,t,i){return undefined};i.getTypesForConditions=function(e,n,t){var i={};var r=n&&n._getListBindingInfo();if(r&&r.template){r.template.mAggregations.cells.forEach(function(e){Object.values(e.mBindingInfos).forEach(function(e){e.parts.forEach(function(e){i[e.path]={type:e.type||null}})})},{})}return i};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/actiontoolbar/ActionToolbarAction",["sap/ui/core/Control","sap/ui/mdc/actiontoolbar/ActionToolbarActionRenderer","sap/ui/mdc/enum/ActionToolbarActionAlignment"],function(t,e,o){"use strict";var r=t.extend("sap.ui.mdc.actiontoolbar.ActionToolbarAction",{metadata:{library:"sap.ui.mdc",interfaces:["sap.m.IOverflowToolbarContent"],properties:{layoutInformation:{type:"object",defaultValue:{aggregationName:"end",alignment:o.Begin}}},defaultAggregation:"action",aggregations:{action:{type:"sap.ui.core.Control",multiple:false}},renderer:e}});r.prototype.getOverflowToolbarConfig=function(){var t={canOverflow:true};t.onBeforeEnterOverflow=this._onBeforeEnterOverflow.bind(this);t.onAfterExitOverflow=this._onAfterExitOverflow.bind(this);return t};r.prototype._onBeforeEnterOverflow=function(){if(this.getParent()){this.getParent()._updateSeparators()}};r.prototype._onAfterExitOverflow=function(){if(this.getParent()){this.getParent()._updateSeparators()}};r.prototype.getLabel=function(){var t=this.getAction();return t&&t.getText?t.getText():this.getId()};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/actiontoolbar/ActionToolbarActionRenderer",[],function(){"use strict";var e={apiVersion:2};e.render=function(e,r){var n={role:"form"};e.openStart("div",r);e.accessibilityState(r,n);e.openEnd();e.renderControl(r.getAction());e.close("div")};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/ChartSelectionDetails",["sap/ui/core/Core","sap/ui/mdc/library","sap/m/SelectionDetails","sap/m/SelectionDetailsItem","sap/m/SelectionDetailsItemLine","sap/m/SelectionDetailsRenderer","./SelectionDetailsActions"],function(e,t,i,a,n,r,s){"use strict";var o=i.extend("sap.ui.mdc.chart.ChartSelectionDetails",{metadata:{library:"sap.ui.mdc",interfaces:[],defaultAggregation:"",properties:{},aggregations:{},associations:{},events:{}},renderer:r});o.prototype.init=function(){i.prototype.init.apply(this,arguments);this._registerTemplate();this._attachEvents()};o.prototype._registerTemplate=function(){this.registerSelectionDetailsItemFactory([],function(e,t,i,r){var s=[];for(var o=0;o<e.length;o++){s.push(new n({label:e[o].label,value:this._formatValue(e[o].value),unit:e[o].unit}))}return new a({enableNav:this._hasNavigationTargets(t),lines:s}).setBindingContext(i)}.bind(this))};o.prototype._formatValue=function(e){if(e){return e instanceof Object?e:e.toString()}else{return e}};o.prototype._hasNavigationTargets=function(e){return false};o.prototype._attachEvents=function(){this.attachActionPress(function(e){var t=this.getParent().getParent();var i=[];e.getParameter("items").forEach(function(e){i.push(e.getBindingContext())});t.fireSelectionDetailsActionPressed({id:e.getParameter("id"),action:e.getParameter("action"),itemContexts:i,level:e.getParameter("level")})})};return o});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/ChartSettings",[],function(){"use strict";var n={showPanel:function(t,e,i,o){n["showUI"+e](t,i)},showUIChart:function(n,t){n.getEngine().uimanager.show(n,"Item")},showUISort:function(n,t){n.getEngine().uimanager.show(n,"Sort")}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/ChartToolbar",["sap/ui/core/Core","sap/ui/mdc/library","sap/ui/mdc/ActionToolbar","sap/m/OverflowToolbarRenderer","sap/m/OverflowToolbarButton","sap/m/OverflowToolbarToggleButton","sap/m/Title","sap/ui/mdc/library","sap/ui/mdc/chart/ChartTypeButton","sap/ui/mdc/chart/ChartSettings","./ChartSelectionDetails","sap/m/ToolbarSeparator"],function(t,e,o,n,i,a,r,s,l,h,c,d){"use strict";var g=o.extend("sap.ui.mdc.chart.ChartToolbar",{metadata:{library:"sap.ui.mdc",interfaces:[],defaultAggregation:"",properties:{},aggregations:{},associations:{},events:{}},renderer:n});var u=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");g.prototype.init=function(){o.prototype.init.apply(this,arguments)};g.prototype.createToolbarContent=function(t){this._chartInternalButtonsToEnable=[];var e=new r(t.getId()+"-title",{text:t.getHeader()});this.addBegin(e);if(t.getVariant()){this.addVariantManagement(t.getVariant())}this._oChartSelectionDetails=new c(t.getId()+"-selectionDetails",{});this._oChartSelectionDetails.attachBeforeOpen(function(e){this._updateSelectionDetailsActions(t)}.bind(this));this.addEnd(this._oChartSelectionDetails);var o=t.getP13nMode()||[];if(o.indexOf("Item")>-1&&(!t.getIgnoreToolbarActions().length||t.getIgnoreToolbarActions().indexOf(s.ChartToolbarActionType.DrillDownUp)<0)){this._oDrillDownBtn=new i(t.getId()+"-drillDown",{icon:"sap-icon://drill-down",tooltip:u.getText("chart.CHART_DRILLDOWN_TITLE"),text:u.getText("chart.CHART_DRILLDOWN_TITLE"),enabled:false,press:function(e){t._showDrillDown(this._oDrillDownBtn)}.bind(this)});this.addEnd(this._oDrillDownBtn);this._chartInternalButtonsToEnable.push(this._oDrillDownBtn)}if(!t.getIgnoreToolbarActions().length||t.getIgnoreToolbarActions().indexOf(s.ChartToolbarActionType.Legend)<0){this._oLegendBtn=new a(t.getId()+"btnLegend",{type:"Transparent",text:u.getText("chart.LEGENDBTN_TEXT"),tooltip:u.getText("chart.LEGENDBTN_TOOLTIP"),icon:"sap-icon://legend",pressed:"{$mdcChart>/legendVisible}",enabled:false});this.addEnd(this._oLegendBtn);this._chartInternalButtonsToEnable.push(this._oLegendBtn)}if(!t.getIgnoreToolbarActions().length||t.getIgnoreToolbarActions().indexOf(s.ChartToolbarActionType.ZoomInOut)){this.oZoomInButton=new i(t.getId()+"btnZoomIn",{icon:"sap-icon://zoom-in",tooltip:u.getText("chart.TOOLBAR_ZOOM_IN"),text:u.getText("chart.TOOLBAR_ZOOM_IN"),enabled:false,press:function e(o){t.zoomIn();this.toggleZoomButtons(t)}.bind(this)});this.oZoomOutButton=new i(t.getId()+"btnZoomOut",{icon:"sap-icon://zoom-out",tooltip:u.getText("chart.TOOLBAR_ZOOM_OUT"),text:u.getText("chart.TOOLBAR_ZOOM_OUT"),enabled:false,press:function e(o){t.zoomOut();this.toggleZoomButtons(t)}.bind(this)});this.addEnd(this.oZoomInButton);this.addEnd(this.oZoomOutButton)}if(o.indexOf("Sort")>-1||o.indexOf("Item")>-1){this._oSettingsBtn=new i(t.getId()+"-chart_settings",{icon:"sap-icon://action-settings",tooltip:u.getText("chart.PERSONALIZATION_DIALOG_TITLE"),text:u.getText("chart.PERSONALIZATION_DIALOG_TITLE"),enabled:false,press:function(e){var o=t.getP13nMode();var n=o.indexOf("Type");if(n>-1){o.splice(n,1)}if(t.isPropertyHelperFinal()){t.getEngine().uimanager.show(t,o)}else{t.finalizePropertyHelper().then(function(){t.getEngine().uimanager.show(t,o)})}}});this.addEnd(this._oSettingsBtn);this._chartInternalButtonsToEnable.push(this._oSettingsBtn)}if(t._getTypeBtnActive()){this._oChartTypeBtn=new l(t);this._oChartTypeBtn.setEnabled(false);this.addEnd(this._oChartTypeBtn);this._chartInternalButtonsToEnable.push(this._oChartTypeBtn)}};g.prototype.addVariantManagement=function(t){if(t){if(this._oVariantManagement){this.removeBetween(this._oVariantManagement)}this._oVariantManagement=t;this.addBetween(this._oVariantManagement)}};g.prototype.toggleZoomButtons=function(t){var e=this._getZoomEnablement(t);if(e.enabled){this.oZoomInButton.setEnabled(e.enabledZoomIn);this.oZoomOutButton.setEnabled(e.enabledZoomOut)}else{this.oZoomInButton.setEnabled(false);this.oZoomOutButton.setEnabled(false)}};g.prototype.updateToolbar=function(t){this.toggleZoomButtons(t);if(!this._toolbarInitialUpdated){this.setEnabled(true);this._chartInternalButtonsToEnable.forEach(function(t){t.setEnabled(true)});this._toolbarInitialUpdated=true}var e=t.getSelectionHandler();if(e){this._oChartSelectionDetails.attachSelectionHandler(e.eventId,e.listener)}};g.prototype._getZoomEnablement=function(t){var e;try{e=t.getZoomState()}catch(t){e={enabled:false}}if(e&&e.hasOwnProperty("currentZoomLevel")&&e.currentZoomLevel!=null&&e.enabled){var o={enabled:true};o.enabledZoomOut=e.currentZoomLevel>0;o.enabledZoomIn=e.currentZoomLevel<1;return o}else{return{enabled:false}}};g.prototype._updateSelectionDetailsActions=function(t){var e=t.getSelectionDetailsActions(),o;if(e){var n=this._oChartSelectionDetails.getItems();n.forEach(function(t){var n=e.getDetailsItemActions();n.forEach(function(e){o=e.clone();t.addAction(o)})});var i=e.getDetailsActions();this._oChartSelectionDetails.removeAllActions();i.forEach(function(t){o=t.clone();this._oChartSelectionDetails.addAction(o)}.bind(this));var a=e.getActionGroups();this._oChartSelectionDetails.removeAllActionGroups();a.forEach(function(t){o=t.clone();this._oChartSelectionDetails.addActionGroup(o)}.bind(this))}};return g});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/ChartTypeButton",["sap/m/OverflowToolbarButton","sap/m/ButtonRenderer","sap/ui/base/ManagedObjectObserver","sap/ui/core/library","sap/m/library"],function(e,t,a,i,r){"use strict";var o=r.PlacementType;var s=i.aria.HasPopup;var n,c,l,p,h,u,d,b;var m=e.extend("sap.ui.mdc.chart.ChartTypeButton",{metadata:{library:"sap.ui.mdc"},constructor:function(t){if(!t){e.apply(this);return}this.oMDCChartModel=t.getManagedObjectModel();var i={type:"Transparent",press:function(e){this.displayChartTypes(e.getSource(),t)}.bind(this),id:t.getId()+"-btnChartType",icon:"{$chart>/getChartTypeInfo/icon}",tooltip:"{$chart>/getChartTypeInfo/text}",text:"{$chart>/getChartTypeInfo/text}",ariaHasPopup:s.ListBox};this.oMDCChart=t;e.apply(this,[i]);this.setModel(this.oMDCChartModel,"$chart");this._oObserver=new a(function(){this.oMDCChartModel.checkUpdate(true)}.bind(this));this._oObserver.observe(this.oMDCChart,{aggregations:["items"],properties:["chartType"]})},renderer:t});m.mMatchingIcon={bar:"sap-icon://horizontal-bar-chart",bullet:"sap-icon://horizontal-bullet-chart",bubble:"sap-icon://bubble-chart",column:"sap-icon://vertical-bar-chart",combination:"sap-icon://business-objects-experience",dual_bar:"sap-icon://horizontal-bar-chart",dual_column:"sap-icon://vertical-bar-chart",dual_combination:"sap-icon://business-objects-experience",dual_horizontal_combination:"sap-icon://business-objects-experience",dual_horizontal_stacked_combination:"sap-icon://business-objects-experience",dual_line:"sap-icon://line-chart",dual_stacked_bar:"sap-icon://full-stacked-chart",dual_stacked_column:"sap-icon://vertical-stacked-chart",dual_stacked_combination:"sap-icon://business-objects-experience",donut:"sap-icon://donut-chart",heatmap:"sap-icon://heatmap-chart",horizontal_stacked_combination:"sap-icon://business-objects-experience",line:"sap-icon://line-chart",pie:"sap-icon://pie-chart",scatter:"sap-icon://scatter-chart",stacked_bar:"sap-icon://full-stacked-chart",stacked_column:"sap-icon://vertical-stacked-chart",stacked_combination:"sap-icon://business-objects-experience",treemap:"sap-icon://Chart-Tree-Map",vertical_bullet:"sap-icon://vertical-bullet-chart","100_dual_stacked_bar":"sap-icon://full-stacked-chart","100_dual_stacked_column":"sap-icon://vertical-stacked-chart","100_stacked_bar":"sap-icon://full-stacked-chart","100_stacked_column":"sap-icon://full-stacked-column-chart",waterfall:"sap-icon://vertical-waterfall-chart",horizontal_waterfall:"sap-icon://horizontal-waterfall-chart"};m.prototype.displayChartTypes=function(e,t){if(!t||!e){return}if(!this.oReadyPromise){this.oReadyPromise=new Promise(function(e){if(n){e(true)}else{sap.ui.require(["sap/m/ResponsivePopover","sap/m/List","sap/m/Bar","sap/m/SearchField","sap/m/StandardListItem","sap/ui/core/InvisibleText","sap/ui/Device"],function(t,a,i,r,o,s,m){n=t;c=a;l=i;p=r;h=o;u=s;d=m;if(!b){sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc",true).then(function(t){b=t;e(true)})}else{e(true)}})}})}this.oReadyPromise.then(function(){if(!this.oPopover){this.oPopover=this._createPopover(e,t);this.oPopover.attachAfterClose(function(){this.oPopover.destroy();delete this.oPopover}.bind(this));return this.oPopover.openBy(e)}}.bind(this))};m.prototype._createPopover=function(e,t){var a=new h({title:"{$chart>text}",icon:"{$chart>icon}",selected:"{$chart>selected}"});var i=new c({mode:"SingleSelectMaster",items:{path:"$chart>/getAvailableChartTypes",template:a},selectionChange:function(e){if(e&&e.mParameters&&e.mParameters.listItem){var a=e.mParameters.listItem.getBinding("title");if(a){var i=a.getContext();if(i){var r=i.getObject();if(r&&r.key){sap.ui.require(["sap/ui/mdc/p13n/FlexUtil","sap/ui/mdc/flexibility/Chart.flexibility"],function(e,a){t.getEngine().createChanges({control:t,key:"Type",state:{type:r.key}})})}}}}m.close()}});var r=new l;var s=new p({placeholder:b.getText("chart.CHART_TYPE_SEARCH")});s.attachLiveChange(function(e){if(t){this._triggerSearchInPopover(e,i)}}.bind(this));r.addContentRight(s);var m=new n({id:t.getId()+"-btnChartTypePopover",placement:o.VerticalPreferredBottom,subHeader:r,contentWidth:"25rem"});m.setModel(this.oMDCChartModel,"$chart");if(d.system.desktop){var f=new u({text:b.getText("chart.CHART_TYPELIST_TEXT")});m.setShowHeader(false);m.addContent(f);m.addAriaLabelledBy(f)}else{m.setTitle(b.getText("chart.CHART_TYPELIST_TEXT"))}m.addContent(i);if(i.getItems().length<7){r.setVisible(false)}return m};m.prototype._triggerSearchInPopover=function(e,t){var a,i,r,o,s,n;if(!e||!t){return}a=e.getParameters();if(!a){return}s=a.newValue?a.newValue.toLowerCase():"";n=t.getItems();for(i=0;i<n.length;i++){o=n[i].getTooltip();r=n[i].getTitle();if(r&&r.toLowerCase().indexOf(s)>-1||o&&o.toLowerCase().indexOf(s)>-1){n[i].setVisible(true)}else{n[i].setVisible(false)}}};m.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this.oPopover){this.oPopover.destroy();this.oPopover=null}};return m});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/DrillBreadcrumbs",["sap/m/Breadcrumbs","sap/m/Link"],function(e,t){"use strict";var r=e.extend("sap/m/Breadcrumbs",{});r.prototype.init=function(){e.prototype.init.apply(this,arguments);this.addStyleClass("sapUiMDCChartBreadcrumbs")};r.prototype.updateDrillBreadcrumbs=function(e,t){var r=[];if(t){t.reverse();if(t.length>0){t.forEach(function(t,i,s){this.setVisible(true);var a=t.getLabel();var n=t.getName();if(i==0){this.setCurrentLocationText(a)}else{var o={dimensionKey:n,dimensionText:a};var l=this._createCrumb(e,o);r.push(l)}},this)}else{this.setVisible(false)}}var i=this.getLinks();r.reverse();var s=false;if(i.length!==r.length){s=true}else{for(var a=0;a<r.length;a++){if(r[a].getText()!=i[a].getText()){s=true;break}}}if(s){if(this.getLinks()){this.destroyLinks()}for(var a=0;a<r.length;a++){this.addLink(r[a])}}return this};r.prototype._createCrumb=function(e,r){var i=new t({text:r.dimensionText,press:function t(r){var i=this.indexOfLink(r.getSource());var s=e.getControlDelegate().getDrillableItems(e),a=s.slice(i+1);var n=a.map(function(e){return{name:e.getName(),visible:false}});e.getEngine().createChanges({control:e,key:"Item",state:n})}.bind(this)});i.data("key",r.dimensionKey);return i};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/DrillStackHandler",["sap/ui/core/Core","sap/m/ResponsivePopover","sap/m/List","sap/m/Bar","sap/m/StandardListItem","sap/ui/core/InvisibleText","sap/m/library","sap/ui/Device","sap/base/Log"],function(e,t,n,r,a,o,i,l,s){"use strict";var d=i.PlacementType;var c=i.ListType;var u=i.ListMode;function p(e){var t=e.getControlDelegate().getDrillStack(e);var n=[];t.forEach(function(e){e.dimension.forEach(function(e){if(e!=null&&e!=""&&n.indexOf(e)==-1){n.push(e)}})});return n}var m=function(){};m.createDrillDownPopover=function(a){var i=new r;var s=new t({id:a.getId()+"-drilldownPopover",contentWidth:"25rem",contentHeight:"20rem",placement:d.Bottom,subHeader:i});var c=new n({mode:u.SingleSelectMaster,selectionChange:function(e){var t=e.getParameter("listItem");if(t){a.getEngine().createChanges({control:a,key:"Item",state:[{name:t.data("dim").dim.name,position:a.getItems().length}]})}s.close()}});s.attachAfterClose(function(){s.destroy()});var p=e.getLibraryResourceBundle("sap.ui.mdc");if(l.system.desktop){var m=new o({text:p.getText("chart.CHART_DRILLDOWN_TITLE")});s.setShowHeader(false);s.addContent(m);s.addAriaLabelledBy(m)}else{s.setTitle(p.getText("chart.CHART_DRILLDOWN_TITLE"))}s.addContent(c);a._oDrillDownPopover=s;return s};m.showDrillDownPopover=function(e,t){var r=e.getControlDelegate().getSortedDimensions(e);return r.then(function(r){var o=e._oDrillDownPopover;var i,l,d;var u=o.getContent().filter(function(e){return e.getMetadata().getClass()==n});var m=u.length>0?u[0]:null;if(!m){s.error("MDC Chart: Could not determine list to show drilldown. This should not happen. Did the application modify the drill-down popover?");return}m.destroyItems();i=p(e);for(var v=0;v<r.length;v++){l=r[v];if(i.indexOf(l.name)>-1){continue}d=new a({title:l.label,type:c.Active});d.data("dim",{dim:l});m.addItem(d)}return new Promise(function(e,n){o.attachEventOnce("afterOpen",function t(n){e(o)});o.openBy(t)})})};return m});
/*
 * !OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/Item",["sap/ui/core/Element","sap/base/Log"],function(e,t){"use strict";var a=e.extend("sap.ui.mdc.chart.Item",{metadata:{abstract:false,library:"sap.ui.mdc",properties:{name:{type:"string"},label:{type:"string"},type:{type:"string",defaultValue:""},role:{type:"string"}}}});return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/PropertyHelper",["../util/PropertyHelper"],function(e){"use strict";var r=e.extend("sap.ui.mdc.chart.PropertyHelper");r.prototype.prepareProperty=function(r){e.prototype.prepareProperty.apply(this,arguments);r.isAggregatable=function(){if(r){return r.isComplex()?false:r.aggregatable}}};r.prototype.getAllAggregatableProperties=function(){return this.getProperties().filter(function(e){return e.isAggregatable()})};return r});
/*
 * !OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/chart/SelectionDetailsActions",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.chart.SelectionDetailsActions",{metadata:{library:"sap.ui.mdc",aggregations:{detailsItemActions:{type:"sap.ui.core.Item",multiple:true},detailsActions:{type:"sap.ui.core.Item",multiple:true},actionGroups:{type:"sap.ui.core.Item",multiple:true}}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/condition/Condition",["sap/base/Log","sap/ui/mdc/enum/ConditionValidated"],function(i,e){"use strict";var t={createItemCondition:function(i,t,n,a,r){var o=e.NotValidated;var d=[i,t];if(t===null||t===undefined){d.pop()}else{o=e.Validated}return this.createCondition("EQ",d,n,a,o,r)},createCondition:function(i,e,t,n,a,r){var o={operator:i,values:e,isEmpty:null,validated:a};if(t){o.inParameters=t}if(n){o.outParameters=n}if(r){o.payload=r}return o},_removeEmptyConditions:function(i){for(var e=i.length-1;e>-1;e--){if(i[e].isEmpty){i.splice(parseInt(e),1)}}return i},_removeInitialFlags:function(i){for(var e=i.length-1;e>-1;e--){if(i[e].isInitial){delete i[e].isInitial}}return i}};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/condition/ConditionConverter",["sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/BaseType","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/util/DateUtil","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/base/util/merge"],function(e,a,t,r,n,i,o){"use strict";var u="yyyy-MM-ddTHH:mm:ssZ";var s="yyyy-MM-dd";var p="HH:mm:ss";var d={toString:function(a,t,r){var i=n.getOperator(a.operator);var u=l(a.values,c(r,t,i)||t,i);var s;var p;var d;if(a.inParameters){s=o({},a.inParameters)}if(a.outParameters){p=o({},a.outParameters)}if(a.payload){d=o({},a.payload)}var v=e.createCondition(a.operator,u,s,p,a.validated,d);return v},toType:function(a,r,i){var u=n.getOperator(a.operator);var s=y(a.values,c(i,r,u)||r);var p;var d;var l;if(a.inParameters){p=o({},a.inParameters)}if(a.outParameters){d=o({},a.outParameters)}if(a.payload){l=o({},a.payload)}var v=e.createCondition(a.operator,s,p,d,a.validated,l);if(v.validated!==t.Validated&&u.validateInput){u.checkValidated(v)}return v},createExternalCondition:function(a,t,r,i,o,u){var s=n.getOperator(a);var p=u.getTypeConfig(o);t=l(t,c(u,p,s)||p,s);var d=e.createCondition(a,t,undefined,undefined,r);return d},getInternalValues:function(e,a,t){var r=n.getOperator(e.operator);var i=t.getTypeConfig(a);var o=y(e.values,c(t,i,r)||i);return o}};function c(e,a,t){if(t&&t.valueTypes[0]&&(t.valueTypes[0]!==i.ValueType.Self&&t.valueTypes[0]!==i.ValueType.Static)){return e.getTypeConfig(t._createLocalType(t.valueTypes[0],a&&a.typeInstance))}}function l(e,a,t){var r=[];for(var n=0;n<e.length;n++){if(!t||t.valueTypes[n]&&t.valueTypes[n]!==i.ValueType.Static){var o=e[n];r.push(v(o,a))}}return r}function v(e,t){var n=t.baseType;var i=t.typeInstance;switch(n){case a.DateTime:return r.typeToString(e,i,u);case a.Date:return r.typeToString(e,i,s);case a.Time:return r.typeToString(e,i,p);case a.Boolean:return e;case a.Numeric:if(typeof e!=="string"&&(i.getMetadata().getName()==="sap.ui.model.odata.type.Int64"||i.getMetadata().getName()==="sap.ui.model.odata.type.Decimal")){return e.toString()}return e;default:return i.formatValue(e,"string")}}function y(e,a){var t=[];for(var r=0;r<e.length;r++){var n=e[r];t.push(m(n,a))}return t}function m(e,t){var n=t.baseType;var i=t.typeInstance;switch(n){case a.DateTime:return r.stringToType(e,i,u);case a.Date:return r.stringToType(e,i,s);case a.Time:return r.stringToType(e,i,p);case a.Boolean:return e;case a.Numeric:if(typeof e!=="string"&&(i.getMetadata().getName()==="sap.ui.model.odata.type.Int64"||i.getMetadata().getName()==="sap.ui.model.odata.type.Decimal")){return e.toString()}return e;default:return i.parseValue(e,"string")}}return d},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/condition/ConditionModel",["sap/ui/mdc/condition/ConditionModelPropertyBinding","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/ChangeReason","sap/ui/mdc/condition/FilterOperatorUtil","sap/base/util/merge","sap/base/util/deepEqual","sap/base/Log","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterConverter"],function(t,e,i,n,o,r,s,a,d,p){"use strict";var h=e.extend("sap.ui.mdc.condition.ConditionModel",{constructor:function(){e.apply(this,arguments);this.setSizeLimit(1e3);if(!this.getProperty("/conditions")){this.setProperty("/conditions",{})}if(!this.getProperty("/fieldPath")){this.setProperty("/fieldPath",{})}}});h.prototype.bindProperty=function(e,i,n){var o=e;if(e.startsWith("/conditions/")){var r=e.slice(12);this._getFieldPathProperty(r);r=l.call(this,r);o="/conditions/"+r}var s=new t(this,o,i,n);s._sOriginapPath=e;return s};h.prototype.getContext=function(t){if(t.startsWith("/conditions/")){var i=t.slice(12);i=l.call(this,i);t="/conditions/"+i}return e.prototype.getContext.apply(this,[t])};h.prototype.bindList=function(t,i,n,o,r){var s=e.prototype.bindList.apply(this,arguments);s.enableExtendedChangeDetection(true);return s};h.prototype.destroy=function(){e.prototype.destroy.apply(this,arguments)};h.prototype.clone=function(t){var e=new h;e._sName=this._sName+"_clone";var i={};if(typeof t==="string"){var n=this.getConditions(t);for(var o=0;o<n.length;o++){var s=n[o];var a=l.call(this,t);if(!i[a]){i[a]=[]}i[a].push(r({},s))}}else{i=r({},this.getAllConditions())}e.setConditions(i);return e};h.prototype.merge=function(t,e,i){this.removeAllConditions(t);var n=r({},e.getAllConditions());for(var o in n){if(!(typeof i==="string")||o===i){var s=d._removeEmptyConditions(n[o]);for(var a=0;a<s.length;a++){var p=s[a];this.addCondition(o,p)}}}this.checkUpdate(true,true)};h.prototype.getConditions=function(t){return f.call(this,t)};function f(t,e){var i=this.getProperty("/conditions");var n;if(typeof t=="string"){t=l.call(this,t);if(!i[t]&&e){i[t]=[]}n=i[t]||[]}else{throw new Error("ConditionModel","getConditions without FieldPath is not supported!")}return n}h.prototype.getAllConditions=function(t){var e=this.getProperty("/conditions");var i={};for(var n in e){var o=this.getProperty("/fieldPath");var s=o[n];var a=s?s.fieldPath:n;if(t&&[].concat(t).indexOf(a)===-1){continue}i[a]=r([],e[n])}return i};h.prototype.indexOf=function(t,e,i){if(typeof t!=="string"){throw new Error("sFieldPath must be a string "+this)}var n=this.getConditions(t);var r=i?[i(e),n.map(i)]:[e,n];var s=o.indexOfCondition.apply(o,r);return s};h.prototype.exist=function(t,e){if(typeof e==="string"){return this.indexOf(e,t)>=0}else{throw new Error("sFieldPath must be provided "+this)}};h.prototype.setConditions=function(t){var e=0;var i;this.setProperty("/conditions",{},undefined,true);if(Array.isArray(t)){throw new Error("setConditions with an Array of condition is not supported! "+this)}else{this._bNoSingleEvent=true;for(var o in t){this._getFieldPathProperty(o);for(e=0;e<t[o].length;e++){i=t[o][e];this.insertCondition(o,-1,i,true)}this.firePropertyChange({reason:n.Add,path:"/conditions/"+o,context:undefined,value:t[o]})}this.checkUpdate(true,true);this._bNoSingleEvent=false}return this};h.prototype.addCondition=function(t,e,i){if(typeof t!=="string"){throw new Error("sFieldPath must be a string "+this)}return this.insertCondition(t,-1,e,i)};h.prototype.insertCondition=function(t,e,i,r){if(typeof t!=="string"){throw new Error("sFieldPath must be a string "+this)}if(!i){return this}var s;o.checkConditionsEmpty(i);o.updateConditionsValues(i);this._getFieldPathProperty(t);if(!r){var a=this.indexOf(t,i);if(a>=0){return this}}s=f.call(this,t,true);if(e==-1){s.push(i)}else{s.splice(e,0,i)}if(!this._bNoSingleEvent){this.checkUpdate(true,true);this.firePropertyChange({reason:n.Add,path:"/conditions/"+t,context:undefined,value:s})}return this};h.prototype.createItemCondition=function(t,e,i){a.error("ConditionModel","createItemCondition is deprecated");return d.createItemCondition(e,i)};h.prototype.createCondition=function(t,e,i){a.error("ConditionModel","createCondition is deprecated");return d.createCondition(e,i)};h.prototype.removeCondition=function(t,e){if(typeof t!=="string"){throw new Error("sFieldPath must be a string "+this)}var i=-1;if(typeof e==="object"){i=this.indexOf(t,e)}else if(typeof e==="number"){i=e}if(i>=0){var o=this.getConditions(t);if(o.length>i){o.splice(i,1);this.checkUpdate(true,true);this.firePropertyChange({reason:n.Remove,path:"/conditions/"+t,context:undefined,value:o});return true}}return false};h.prototype.removeAllConditions=function(t){var e=this.getProperty("/conditions");if(typeof t==="string"){var i=l.call(this,t);if(e[i]&&e[i].length>0){e[i]=[];this.firePropertyChange({reason:n.Remove,path:"/conditions/"+t,context:undefined,value:e[t]})}}else{for(var o in e){if(e[o]&&e[o].length>0){e[o]=[];var r=this.getProperty("/fieldPath");var s=r[o].fieldPath;this.firePropertyChange({reason:n.Remove,path:"/conditions/"+s,context:undefined,value:e[o]})}}}this.checkUpdate(true,true);return this};h.prototype._getFieldPathProperty=function(t){var e=l.call(this,t);var i=this.getProperty("/fieldPath");if(!i[e]){i[e]={fieldPath:t}}var n=this.getProperty("/conditions");if(!n[e]){n[e]=[]}return i[e]};h.prototype.getFilters=function(t){a.error("ConditionModel","usage or deprecated getFilters() function! Please use the FilterConverter.createFilters() function instead.");return p.createFilters(this.getAllConditions(),{})};h.prototype.serialize=function(){var t=r({},this.getAllConditions());for(var e in t){var i=t[e];i.forEach(function(t){delete t.isEmpty},this);if(i.length===0){delete t[e]}}return'{"conditions":'+JSON.stringify(t)+"}"};h.prototype.parse=function(t){var e=function(t,e){var i;if(!isNaN(parseInt(t))&&typeof e==="string"){i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).(\d{3})Z$/.exec(e);if(i){return new Date(e)}}return e};this.setConditions(JSON.parse(t,e).conditions)};function l(t){if(t){var e=t.split("/");if(e.length>1){t="";for(var i=0;i<e.length;i++){var n=e[i];if(i>0){if(!isNaN(n)||!isNaN(e[i-1])){t=t+"/"}else{t=t+"\\"}}t=t+n}}}return t}return h});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/condition/ConditionModelPropertyBinding",["sap/ui/model/ChangeReason","sap/ui/model/json/JSONPropertyBinding","sap/base/util/merge","sap/base/util/deepEqual"],function(t,e,i,a){"use strict";var s=e.extend("sap.ui.mdc.condition.ConditionModelPropertyBinding",{constructor:function(t,i,a,s){e.apply(this,arguments);this.oValue=o.call(this,this._getValue())}});s.prototype.getValue=function(){return o.call(this,this.oValue)};s.prototype.setValue=function(e){if(this.bSuspended){return}if(!a(this.oValue,e)){if(this.oModel.setProperty(this.sPath,e,this.oContext,true)){this.oValue=o.call(this,e);this.getDataState().setValue(this.oValue);this.oModel.firePropertyChange({reason:t.Binding,path:this._sOriginapPath,context:this.oContext,value:e})}}};s.prototype.checkUpdate=function(e){if(this.bSuspended&&!e){return}var i=this._getValue();if(!a(i,this.oValue)||e){this.oValue=o.call(this,i);this.getDataState().setValue(this.oValue);this.checkDataState();this._fireChange({reason:t.Change})}};function o(t){var e;if(!t){e=t}else if(Array.isArray(t)){e=i([],t)}else if(t instanceof Date){e=new Date(t)}else if(typeof t==="object"){e=i({},t)}else{e=t}return e}return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/condition/FilterConverter",["sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/Log"],function(e,t,r,i){"use strict";var n={createConditionTypesMapFromFilterBar:function(e,t){var r={};for(var i in e){if(t){var n=t._getPropertyByName(i);var a;if(n&&n.typeConfig){a=n.typeConfig.typeInstance}else{var o=t._getFilterField(i);if(o){var l=o._getFormatOptions();if(l.originalDateType){a=l.originalDateType}else{a=l.valueType}}}r[i]={type:a}}}return r},createFilters:function(a,o,l,s){var f,p,u,h=[],v,c,d,g,y;var F=function(e,t,r){var i="L1";var n,a,o;if(e.sPath&&e.sPath.indexOf(r)>-1){n=e.sPath.split(r);if(n.length===2){a=n[0];o=n[1];e.sPath=i+"/"+o;return{path:a,operator:t,variable:i}}else{throw new Error("FilterConverter: not supported binding "+e.sPath)}}return false};var P=function(e){var t=F(e,r.Any,"*/");if(t){return t}else{return F(e,r.All,"+/")}};for(var O in a){p=[];u=[];y=null;var w=a[O];if(O==="$search"){continue}var C;var b=true;var m;if(o){if(o[O]){C=o[O].type;b=o[O].caseSensitive;m=o[O].baseType;if(!C){i.warning("FilterConverter","Not able to retrieve the type of path '"+O+"!")}}}for(f=0;f<w.length;f++){g=w[f];v=e.getOperator(g.operator);if(!v){continue}try{c=v.getModelFilter(g,O,C,b,m)}catch(e){i.error("FilterConverter","Not able to convert the condition for path '"+O+"' into a filter! The type is missing!");continue}if(l){c=l(g,O,C,c);if(!c){continue}}if(!v.exclude){if(c.sPath==="$search"){continue}var T=/^\*(.+)\*$/.exec(c.sPath);if(T){var A=T[1].split(",");for(var x=0;x<A.length;x++){p.push(new t({path:A[x],operator:c.sOperator,value1:c.oValue1,caseSensitive:s}))}continue}y=P(c);p.push(c)}else{y=P(c);u.push(c)}}c=undefined;if(p.length===1){c=p[0]}else if(p.length>1){c=new t({filters:p,and:false})}if(c){u.unshift(c)}d=undefined;if(u.length===1){d=u[0]}else if(u.length>1){d=new t({filters:u,and:true})}if(y){y.condition=d;d=new t(y)}if(d){h.push(d)}}if(h.length===1){c=h[0]}else if(h.length>1){c=new t({filters:h,and:true})}else{c=null}i.info("FilterConverter",n.prettyPrintFilters(c));return c},prettyPrintFilters:function(e){var t;if(!e){return"no filters set"}if(e._bMultiFilter){t="";var i=e.bAnd;e.aFilters.forEach(function(e,r,a){t+=n.prettyPrintFilters(e);if(a.length-1!=r){t+=i?" and ":" or "}},this);return"("+t+")"}else{if(e.sOperator===r.Any||e.sOperator===r.All){t=e.sPath+" "+e.sOperator+" "+n.prettyPrintFilters(e.oCondition)}else{if(e.bCaseSensitive===false){t="tolower("+e.sPath+") "+e.sOperator+" tolower('"+e.oValue1+"')"}else{t=e.sPath+" "+e.sOperator+" '"+e.oValue1+"'"}if([r.BT,r.NB].indexOf(e.sOperator)>=0){t+="...'"+e.oValue2+"'"}}return t}}};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/condition/FilterOperatorUtil",["sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/ui/model/ValidateException","sap/base/Log","sap/base/util/merge","sap/ui/mdc/enum/FieldDisplay","./Operator","./RangeOperator","sap/ui/mdc/enum/BaseType","sap/ui/mdc/enum/ConditionValidated","sap/ui/core/date/UniversalDate","sap/ui/core/date/UniversalDateUtils","sap/ui/core/format/DateFormat","sap/ui/model/json/JSONModel","sap/ui/model/type/Integer"],function(e,t,a,r,n,o,s,l,i,u,p,m,f,c,y){"use strict";var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.getCore().attachLocalizationChanged(function(){T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")});var O;var g={_mOperators:{equal:new s({name:"EQ",alias:{Date:"DATE",DateTime:"DATETIME"},filterOperator:e.EQ,tokenParse:"^=([^=].*)$",tokenFormat:"{1} ({0})",valueTypes:[s.ValueType.Self,null],displayFormats:{DescriptionValue:"{1} ({0})",ValueDescription:"{0} ({1})",Description:"{1}",Value:"{0}"},format:function(e,t,a,r,n){a=a||o.DescriptionValue;var s=this.valueTypes.length;var l=e.values;var i=e&&e.validated===u.Validated||l.length===2||r?"":"=";var p=i+this.displayFormats[a];if(!l[1]){p=i+this.displayFormats["Value"];s=1}for(var m=0;m<s;m++){var f,c=l[m];if(c===null||c===undefined){c=""}if(m==0){f=this._formatValue(c,t,n)}else{f=c}if(f===null){p=null;break}p=p.replace(new RegExp("\\$"+m+"|"+m+"\\$"+"|"+"\\{"+m+"\\}","g"),f)}return p},parse:function(e,t,a,r,n){a=a||o.DescriptionValue;var l=s.prototype.parse.apply(this,[e,t,a,r,n]);if(r&&(!l||l[0]===null||l[0]===undefined)&&a!==o.Value){a=o.Value;l=s.prototype.parse.apply(this,[e,t,a,r,n])}if(l&&(l[1]===null||l[1]===undefined)&&a===o.Value){l=[l[0]]}return l},getValues:function(e,t,a){var r=e.match(this.tokenParseRegExp);var n;if(r||a&&e){var o;var s=this.displayFormats[t];var l=s.indexOf("{0}");var i=s.indexOf("{1}");var u;var p;if(r){o=r[1]}else if(a){o=e}if(l>=0&&i>=0){if(o.lastIndexOf("(")>0&&(o.lastIndexOf(")")===o.length-1||o.lastIndexOf(")")===-1)){var m=o.length;if(o[m-1]===")"){m--}var f=o.substring(0,o.lastIndexOf("("));if(f[f.length-1]===" "){f=f.substring(0,f.length-1)}var c=o.substring(o.lastIndexOf("(")+1,m);if(l<i){u=f;p=c}else{u=c;p=f}}else if(l<i){u=o}else{p=o}}else if(l>=0){u=o}else{p=o}n=[u];if(i>=0){n.push(p)}}return n},isEmpty:function(e,t){var a=false;var r=e.values[0];if((r===null||r===undefined||r==="")&&!e.values[1]){a=true}return a},getCheckValue:function(e){return{value:e.values[0]}},checkValidated:function(e){if(e.values.length===2&&e.values[0]!==undefined&&e.values[1]!==null&&e.values[1]!==undefined){e.validated=u.Validated}else{e.validated=u.NotValidated}},validateInput:true}),between:new s({name:"BT",alias:{Date:"DATERANGE",DateTime:"DATETIMERANGE"},filterOperator:e.BT,tokenParse:"^([^!].*)\\.\\.\\.(.+)$",tokenFormat:"{0}...{1}",valueTypes:[s.ValueType.Self,s.ValueType.Self],validate:function(e,t){if(e.length===2){if(d(e[0])&&d(e[1])){return}else if(d(e[0])||d(e[1])){throw new a(T.getText("operator.between.validate.missingValue"))}else if(e[0]===e[1]){throw new a(T.getText("operator.between.validate.sameValues"))}}s.prototype.validate.apply(this,[e,t])}}),notBetween:new s({name:"NOTBT",filterOperator:e.NB,tokenParse:"^!(.+)\\.\\.\\.(.+)$",tokenFormat:"!({0}...{1})",valueTypes:[s.ValueType.Self,s.ValueType.Self],exclude:true,validate:function(e,t){g._mOperators.between.validate(e,t)}}),lessThan:new s({name:"LT",filterOperator:e.LT,tokenParse:"^<([^=].*)$",tokenFormat:"<{0}",valueTypes:[s.ValueType.Self]}),notLessThan:new s({name:"NOTLT",filterOperator:e.GE,tokenParse:"^!<([^=].*)$",tokenFormat:"!(<{0})",valueTypes:[s.ValueType.Self],exclude:true}),greaterThan:new s({name:"GT",filterOperator:e.GT,tokenParse:"^>([^=].*)$",tokenFormat:">{0}",valueTypes:[s.ValueType.Self]}),notGreaterThan:new s({name:"NOTGT",filterOperator:e.LE,tokenParse:"^!>([^=].*)$",tokenFormat:"!(>{0})",valueTypes:[s.ValueType.Self],exclude:true}),lessEqual:new s({name:"LE",alias:{Date:"TO",DateTime:"TODATETIME"},filterOperator:e.LE,tokenParse:"^<=(.+)$",tokenFormat:"<={0}",valueTypes:[s.ValueType.Self]}),notLessEqual:new s({name:"NOTLE",filterOperator:e.GT,tokenParse:"^!<=(.+)$",tokenFormat:"!(<={0})",valueTypes:[s.ValueType.Self],exclude:true}),greaterEqual:new s({name:"GE",alias:{Date:"FROM",DateTime:"FROMDATETIME"},filterOperator:e.GE,tokenParse:"^>=(.+)$",tokenFormat:">={0}",valueTypes:[s.ValueType.Self]}),notGreaterEqual:new s({name:"NOTGE",filterOperator:e.LT,tokenParse:"^!>=(.+)$",tokenFormat:"!(>={0})",valueTypes:[s.ValueType.Self],exclude:true}),startsWith:new s({name:"StartsWith",filterOperator:e.StartsWith,tokenParse:"^([^!\\*]+.*)\\*$",tokenFormat:"{0}*",valueTypes:[s.ValueType.SelfNoParse]}),notStartsWith:new s({name:"NotStartsWith",filterOperator:e.NotStartsWith,tokenParse:"^!([^\\*].*)\\*$",tokenFormat:"!({0}*)",valueTypes:[s.ValueType.SelfNoParse],exclude:true}),endsWith:new s({name:"EndsWith",filterOperator:e.EndsWith,tokenParse:"^\\*(.*[^\\*])$",tokenFormat:"*{0}",valueTypes:[s.ValueType.SelfNoParse]}),notEndsWith:new s({name:"NotEndsWith",filterOperator:e.NotEndsWith,tokenParse:"^!\\*(.*[^\\*])$",tokenFormat:"!(*{0})",valueTypes:[s.ValueType.SelfNoParse],exclude:true}),contains:new s({name:"Contains",filterOperator:e.Contains,tokenParse:"^\\*(.*)\\*$",tokenFormat:"*{0}*",valueTypes:[s.ValueType.SelfNoParse]}),notContains:new s({name:"NotContains",filterOperator:e.NotContains,tokenParse:"^!\\*(.*)\\*$",tokenFormat:"!(*{0}*)",valueTypes:[s.ValueType.SelfNoParse],exclude:true}),notEqual:new s({name:"NE",filterOperator:e.NE,tokenParse:"^!=(.+)$",tokenFormat:"!(={0})",valueTypes:[s.ValueType.Self],exclude:true}),empty:new s({name:"Empty",filterOperator:e.EQ,tokenParse:"^<#tokenText#>$",tokenFormat:"<#tokenText#>",valueTypes:[],getModelFilter:function(a,r,n,o,s){var l=false;if(n){var i=n.parseValue("","string");try{n.validateValue(i);l=i===null}catch(e){l=false}}if(l){return new t({filters:[new t({path:r,operator:e.EQ,value1:""}),new t({path:r,operator:e.EQ,value1:null})],and:false})}else{return new t({path:r,operator:this.filterOperator,value1:""})}}}),notEmpty:new s({name:"NotEmpty",filterOperator:e.NE,tokenParse:"^!<#tokenText#>$",tokenFormat:"!(<#tokenText#>)",valueTypes:[],exclude:true,getModelFilter:function(a,r,n,o,s){var l=false;if(n){var i=n.parseValue("","string");try{n.validateValue(i);l=i===null}catch(e){l=false}}if(l){return new t({filters:[new t({path:r,operator:e.NE,value1:""}),new t({path:r,operator:e.NE,value1:null})],and:true})}else{return new t({path:r,operator:this.filterOperator,value1:""})}}}),yesterday:new l({name:"YESTERDAY",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.yesterday()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),today:new l({name:"TODAY",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.today()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),tomorrow:new l({name:"TOMORROW",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.tomorrow()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDays:new l({name:"LASTDAYS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastDays(e)}}),firstDayWeek:new l({name:"FIRSTDAYWEEK",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.firstDayOfWeek()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayWeek:new l({name:"LASTDAYWEEK",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastDayOfWeek()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),firstDayMonth:new l({name:"FIRSTDAYMONTH",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.firstDayOfMonth()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayMonth:new l({name:"LASTDAYMONTH",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastDayOfMonth()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),firstDayQuarter:new l({name:"FIRSTDAYQUARTER",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.firstDayOfQuarter()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayQuarter:new l({name:"LASTDAYQUARTER",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastDayOfQuarter()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),firstDayYear:new l({name:"FIRSTDAYYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.firstDayOfYear()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayYear:new l({name:"LASTDAYYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastDayOfYear()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),todayFromTo:new l({name:"TODAYFROMTO",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null}},{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null}}],paramTypes:["([-+]?\\d+)","([-+]?\\d+)"],additionalInfo:"",calcRange:function(e,t){var a=e>=0?m.ranges.lastDays(e)[0]:m.ranges.nextDays(-e)[1];var r=t>=0?m.ranges.nextDays(t)[1]:m.ranges.lastDays(-t)[0];if(a.oDate.getTime()>r.oDate.getTime()){r=[a,a=r][0]}return[m.resetStartTime(a),m.resetEndTime(r)]}}),nextDays:new l({name:"NEXTDAYS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextDays(e)}}),lastWeek:new l({name:"LASTWEEK",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastWeek()}}),thisWeek:new l({name:"THISWEEK",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.currentWeek()}}),nextWeek:new l({name:"NEXTWEEK",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.nextWeek()}}),lastWeeks:new l({name:"LASTWEEKS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastWeeks(e)}}),nextWeeks:new l({name:"NEXTWEEKS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextWeeks(e)}}),lastMonth:new l({name:"LASTMONTH",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastMonth()}}),thisMonth:new l({name:"THISMONTH",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.currentMonth()}}),nextMonth:new l({name:"NEXTMONTH",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.nextMonth()}}),lastMonths:new l({name:"LASTMONTHS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastMonths(e)}}),nextMonths:new l({name:"NEXTMONTHS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextMonths(e)}}),lastQuarter:new l({name:"LASTQUARTER",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastQuarter()}}),thisQuarter:new l({name:"THISQUARTER",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.currentQuarter()}}),nextQuarter:new l({name:"NEXTQUARTER",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.nextQuarter()}}),lastQuarters:new l({name:"LASTQUARTERS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastQuarters(e)}}),nextQuarters:new l({name:"NEXTQUARTERS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextQuarters(e)}}),quarter1:new l({name:"QUARTER1",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.quarter(1)}}),quarter2:new l({name:"QUARTER2",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.quarter(2)}}),quarter3:new l({name:"QUARTER3",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.quarter(3)}}),quarter4:new l({name:"QUARTER4",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.quarter(4)}}),lastYear:new l({name:"LASTYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.lastYear()}}),thisYear:new l({name:"THISYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.currentYear()}}),nextYear:new l({name:"NEXTYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.nextYear()}}),lastYears:new l({name:"LASTYEARS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.lastYears(e)}}),nextYears:new l({name:"NEXTYEARS",valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return m.ranges.nextYears(e)}}),specificMonth:new l({name:"SPECIFICMONTH",valueTypes:[{name:"sap.ui.model.type.Integer",constraints:{minimum:0,maximum:11}}],paramTypes:["(.+)"],additionalInfo:"",label:[T.getText("operators.SPECIFICMONTH_MONTH.label")],defaultValues:function(){var e=new p;return[e.getMonth()]},calcRange:function(e){var t=new p;t.setMonth(e);t=m.getMonthStartDate(t);return m.getRange(0,"MONTH",t)},format:function(e,t,a,r,n){var o=e.values[0];var s=this.tokenFormat;var l=v.apply(this)[o];if(r){return l}else{return l==null?null:s.replace(new RegExp("\\$"+0+"|"+0+"\\$"+"|"+"\\{"+0+"\\}","g"),l)}},getValues:function(e,t,a){var r=e.match(this.tokenParseRegExp);var n;if(r||a&&e){n=[];for(var o=0;o<this.valueTypes.length;o++){var s;if(r){s=r[o+1]}else if(a&&e){s=e}n.push(s)}return[_.call(this,n[0])]}return null},createControl:function(e,t,a,n,o){var s=sap.ui.require("sap/ui/mdc/Field");if(s&&E.call(this)){var l=new s(n,{value:{path:t,type:e,mode:"TwoWay",targetType:"raw"},additionalValue:{path:t,formatter:function(e){return O.getTextForKey(e)},mode:"OneWay"},display:"Description",width:"100%",fieldHelp:"LFHForSpecificMonth"});return l}else{r.warning("Operator.createControl","not able to create the control for the operator "+this.name);return null}}}),specificMonthInYear:new l({name:"SPECIFICMONTHINYEAR",valueTypes:[{name:"sap.ui.model.type.Integer",constraints:{minimum:0,maximum:11}},{name:"sap.ui.model.type.Integer",constraints:{minimum:1,maximum:9999}}],paramTypes:["(.+)","(.+)"],additionalInfo:"",label:[T.getText("operators.SPECIFICMONTHINYEAR_MONTH.label"),T.getText("operators.SPECIFICMONTHINYEAR_YEAR.label")],defaultValues:function(){var e=new p;return[e.getMonth(),e.getFullYear()]},calcRange:function(e,t){var a=new p;a.setMonth(e);a.setYear(t);a=m.getMonthStartDate(a);return m.getRange(0,"MONTH",a)},format:function(e,t,a,r,n){var o=e.values[0];var s=e.values[1];var l=this.tokenFormat;var i=v.apply(this)[o];if(r){return i+","+s}else{var u=new RegExp("\\$"+0+"|"+0+"\\$"+"|"+"\\{"+0+"\\}","g");var p=new RegExp("\\$"+1+"|"+1+"\\$"+"|"+"\\{"+1+"\\}","g");l=i==null?null:l.replace(u,i);return l.replace(p,s)}},getValues:function(e,t,a){var r=e.match(this.tokenParseRegExp);var n;if(r||a&&e){n=[];for(var o=0;o<this.valueTypes.length;o++){var s;if(r){s=r[o+1]}else if(a&&e){s=e}n.push(s)}return[_.call(this,n[0]),n[1]]}return null},createControl:function(e,t,a,n,o){var s;var l=sap.ui.require("sap/ui/mdc/Field");if(!l){r.warning("Operator.createControl","not able to create the control for the operator "+this.name);return null}if(a==0){if(E.call(this)){s=new l(n,{value:{path:t,type:e,mode:"TwoWay",targetType:"raw"},additionalValue:{path:t,formatter:function(e){return O.getTextForKey(e)},mode:"OneWay"},display:"Description",width:"100%",fieldHelp:"LFHForSpecificMonth"})}else{r.warning("Operator.createControl","not able to create the control for the operator "+this.name)}}if(a==1){s=new l(n,{value:{path:"$this>",type:e,mode:"TwoWay",targetType:"raw"},width:"100%"})}return s}}),yearToDate:new l({name:"YEARTODATE",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.yearToDate()}}),dateToYear:new l({name:"DATETOYEAR",valueTypes:[s.ValueType.Static],calcRange:function(){return m.ranges.dateToYear()}})},_mDefaultOpsForType:{},addOperator:function(e){g._mOperators[e.name]=e},addOperators:function(e){if(!Array.isArray(e)){e=[e]}e.forEach(function(e){g.addOperator(e)})},removeOperators:function(e){if(!Array.isArray(e)){e=[e]}e.forEach(function(e){g.removeOperator(e)})},removeOperator:function(e){if(typeof e==="string"){delete g._mOperators[e]}else{delete g._mOperators[e.name]}},setOperatorsForType:function(e,t,a){if(!Array.isArray(t)){t=[t]}if(!g._mDefaultOpsForType[e]){g._mDefaultOpsForType[e]={}}g._mDefaultOpsForType[e].operators=[];t.forEach(function(t){g.addOperatorForType(e,t)});if(a){g.setDefaultOperatorForType(e,a)}},setDefaultOperatorForType:function(e,t){if(!g._mDefaultOpsForType[e]){g._mDefaultOpsForType[e]={}}if(typeof t==="string"){t=g.getOperator(t)}g._mDefaultOpsForType[e].defaultOperator=t},addOperatorForType:function(e,t){g.insertOperatorForType(e,t)},insertOperatorForType:function(e,t,a){if(!g._mDefaultOpsForType[e]){g._mDefaultOpsForType[e]={operators:[]}}a=a===undefined?g._mDefaultOpsForType[e].operators.length:a;if(typeof t==="string"){t=g.getOperator(t)}g._mDefaultOpsForType[e].operators.splice(a,0,t)},removeOperatorForType:function(e,t){var a;if(typeof t==="string"){a=t}else{a=t.name}for(var r=0;r<g._mDefaultOpsForType[e].operators.length;r++){if(g._mDefaultOpsForType[e].operators[r].name===a){g._mDefaultOpsForType[e].operators.splice(r,1);return}}},getOperatorsForType:function(e){var t=[];for(var a=0;a<g._mDefaultOpsForType[e].operators.length;a++){t.push(g._mDefaultOpsForType[e].operators[a].name)}return t},getDefaultOperator:function(e){return g._mDefaultOpsForType[e].defaultOperator||g._mOperators.equal},getMatchingOperators:function(e,t){var a=[];for(var r=0;r<e.length;r++){var n=this.getOperator(e[r]);if(n){a.push(n)}}return h.call(this,a,t)},getOperator:function(e){for(var t in g._mOperators){var a=g._mOperators[t];if(a.name===e){return a}}return undefined},getEQOperator:function(e){if(e){for(var t=0;t<e.length;t++){var a=this.getOperator(e[t]);if(a&&a.validateInput&&!a.exclude&&a.valueTypes[0]&&a.valueTypes[0]!==s.ValueType.Static){return a}}}return g._mOperators.equal},onlyEQ:function(e){if(e.length===1&&e[0]==="EQ"){return true}else{return false}},checkConditionsEmpty:function(e){if(!Array.isArray(e)){e=[e]}e.forEach(function(e){var t=this.getOperator(e.operator);if(t){e.isEmpty=t.isEmpty(e)}}.bind(this))},updateConditionsValues:function(e){if(!Array.isArray(e)){e=[e]}for(var t=0;t<e.length;t++){this.updateConditionValues(e[t])}},updateConditionValues:function(e){var t=this.getOperator(e.operator);if(t&&e.validated!==u.Validated){var a=t.valueTypes.length;if(t.valueTypes.length===2&&t.valueTypes[1]===null&&(e.values.length<2||e.values[1]===null||e.values[1]===undefined)){a=a-1}if(t.valueTypes[0]==="static"){e.values=[]}else{while(e.values.length!=a){if(e.values.length<a){e.values.push(null)}if(e.values.length>a){e.values=e.values.slice(0,e.values.length-1)}}}}},indexOfCondition:function(e,t){var a=-1;for(var r=0;r<t.length;r++){if(this.compareConditions(e,t[r])){a=r;break}}return a},compareConditions:function(e,t){var a=false;if(e.operator===t.operator){var r=this.getOperator(e.operator);if(r){a=r.compareConditions(e,t)}}return a},compareConditionsArray:function(e,t){var a=false;if(e.length===t.length){a=true;for(var r=0;r<e.length;r++){if(!this.compareConditions(e[r],t[r])){a=false;break}}}return a},checkConditionValidated:function(e){var t=this.getOperator(e.operator);if(!e.validated&&t&&t.checkValidated){t.checkValidated(e)}},getOperatorForDynamicDateOption:function(e,t){var a;if(t&&e.startsWith(t)){a=this.getOperator(e.slice(t.length+1))}else{a=this.getOperator(e)}if(!a&&t){for(var r in g._mOperators){var n=g._mOperators[r];if(n.alias&&n.alias[t]===e){a=n;break}}}return a},getDynamicDateOptionForOperator:function(e,t,a){var r;if(e){if(t[e.name]){r=e.name}else if(e.alias&&t[e.alias[a]]){r=e.alias[a]}}return r},getCustomDynamicDateOptionForOperator:function(e,t){return t+"-"+e.name}};g.setOperatorsForType(i.String,[g._mOperators.contains,g._mOperators.equal,g._mOperators.between,g._mOperators.startsWith,g._mOperators.endsWith,g._mOperators.lessThan,g._mOperators.lessEqual,g._mOperators.greaterThan,g._mOperators.greaterEqual,g._mOperators.empty,g._mOperators.notContains,g._mOperators.notEqual,g._mOperators.notBetween,g._mOperators.notStartsWith,g._mOperators.notEndsWith,g._mOperators.notLessThan,g._mOperators.notLessEqual,g._mOperators.notGreaterThan,g._mOperators.notGreaterEqual,g._mOperators.notEmpty],g._mOperators.equal);g.setOperatorsForType(i.Date,[g._mOperators.equal,g._mOperators.between,g._mOperators.lessThan,g._mOperators.lessEqual,g._mOperators.greaterThan,g._mOperators.greaterEqual,g._mOperators.notEqual,g._mOperators.notBetween,g._mOperators.notLessThan,g._mOperators.notLessEqual,g._mOperators.notGreaterThan,g._mOperators.notGreaterEqual,g._mOperators.today,g._mOperators.yesterday,g._mOperators.tomorrow,g._mOperators.firstDayWeek,g._mOperators.lastDayWeek,g._mOperators.firstDayMonth,g._mOperators.lastDayMonth,g._mOperators.firstDayQuarter,g._mOperators.lastDayQuarter,g._mOperators.firstDayYear,g._mOperators.lastDayYear,g._mOperators.todayFromTo,g._mOperators.lastDays,g._mOperators.nextDays,g._mOperators.thisWeek,g._mOperators.lastWeek,g._mOperators.lastWeeks,g._mOperators.nextWeek,g._mOperators.nextWeeks,g._mOperators.specificMonth,g._mOperators.specificMonthInYear,g._mOperators.thisMonth,g._mOperators.lastMonth,g._mOperators.lastMonths,g._mOperators.nextMonth,g._mOperators.nextMonths,g._mOperators.thisQuarter,g._mOperators.lastQuarter,g._mOperators.lastQuarters,g._mOperators.nextQuarter,g._mOperators.nextQuarters,g._mOperators.quarter1,g._mOperators.quarter2,g._mOperators.quarter3,g._mOperators.quarter4,g._mOperators.thisYear,g._mOperators.lastYear,g._mOperators.lastYears,g._mOperators.nextYear,g._mOperators.nextYears,g._mOperators.yearToDate,g._mOperators.dateToYear]);g.setOperatorsForType(i.DateTime,[g._mOperators.equal,g._mOperators.between,g._mOperators.lessThan,g._mOperators.lessEqual,g._mOperators.greaterThan,g._mOperators.greaterEqual,g._mOperators.notEqual,g._mOperators.notBetween,g._mOperators.notLessThan,g._mOperators.notLessEqual,g._mOperators.notGreaterThan,g._mOperators.notGreaterEqual,g._mOperators.today,g._mOperators.yesterday,g._mOperators.tomorrow,g._mOperators.firstDayWeek,g._mOperators.lastDayWeek,g._mOperators.firstDayMonth,g._mOperators.lastDayMonth,g._mOperators.firstDayQuarter,g._mOperators.lastDayQuarter,g._mOperators.firstDayYear,g._mOperators.lastDayYear,g._mOperators.todayFromTo,g._mOperators.lastDays,g._mOperators.nextDays,g._mOperators.thisWeek,g._mOperators.lastWeek,g._mOperators.lastWeeks,g._mOperators.nextWeek,g._mOperators.nextWeeks,g._mOperators.specificMonth,g._mOperators.specificMonthInYear,g._mOperators.thisMonth,g._mOperators.lastMonth,g._mOperators.lastMonths,g._mOperators.nextMonth,g._mOperators.nextMonths,g._mOperators.thisQuarter,g._mOperators.lastQuarter,g._mOperators.lastQuarters,g._mOperators.nextQuarter,g._mOperators.nextQuarters,g._mOperators.quarter1,g._mOperators.quarter2,g._mOperators.quarter3,g._mOperators.quarter4,g._mOperators.thisYear,g._mOperators.lastYear,g._mOperators.lastYears,g._mOperators.nextYear,g._mOperators.nextYears,g._mOperators.yearToDate,g._mOperators.dateToYear]);g.setOperatorsForType(i.Numeric,[g._mOperators.equal,g._mOperators.between,g._mOperators.lessThan,g._mOperators.lessEqual,g._mOperators.greaterThan,g._mOperators.greaterEqual,g._mOperators.notEqual,g._mOperators.notBetween,g._mOperators.notLessThan,g._mOperators.notLessEqual,g._mOperators.notGreaterThan,g._mOperators.notGreaterEqual]);g.setOperatorsForType(i.Time,[g._mOperators.equal,g._mOperators.between,g._mOperators.lessThan,g._mOperators.lessEqual,g._mOperators.greaterThan,g._mOperators.greaterEqual,g._mOperators.notEqual,g._mOperators.notBetween,g._mOperators.notLessThan,g._mOperators.notLessEqual,g._mOperators.notGreaterThan,g._mOperators.notGreaterEqual]);g.setOperatorsForType(i.Boolean,[g._mOperators.equal,g._mOperators.notEqual]);function h(e,t){var a=[];for(var r=0;r<e.length;r++){var n=e[r];if(n&&n.test&&n.test(t)){a.push(n)}}return a}function d(e){return e===null||e===undefined||e===""}function v(){if(!this._aMonths){var e=new p,t=f.getDateInstance({pattern:"LLLL"});e.setDate(15);e.setMonth(0);var a=[];for(var r=0;r<12;r++){a.push(t.format(e));e.setMonth(e.getMonth()+1)}this._aMonths=a}return this._aMonths}function _(e){var t=e.toLowerCase();var a=v.apply(this);var r=-1;a.some(function(e,a){if(e.toLowerCase()==t){r=a;return true}});return r}function E(){if(!O){var e=sap.ui.require("sap/ui/mdc/field/ListFieldHelp");var t=sap.ui.require("sap/ui/core/ListItem");if(!e||!t){r.warning("Operator.createControl","not able to create the control for the operator "+this.name);return null}var a=function(){if(!this._aMonthsItems){var e=v.apply(this);this._aMonthsItems=[];for(var t=0;t<12;t++){this._aMonthsItems.push({text:e[t],key:t})}}return this._aMonthsItems}.bind(this);O=new e({id:"LFHForSpecificMonth",items:{path:"$items>/",template:new t({text:{path:"$items>text"},key:{path:"$items>key"}}),templateShareable:false}}).setModel(new c(a()),"$items")}return O}return g},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/condition/Operator",["sap/ui/base/Object","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/ParseException","sap/base/Log","sap/base/util/ObjectPath","sap/base/util/merge","sap/base/util/deepEqual","./Condition","sap/ui/mdc/enum/ConditionValidated","sap/base/strings/escapeRegExp"],function(e,t,a,r,i,s,o,n,l,p,u){"use strict";var f=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.getCore().attachLocalizationChanged(function(){f=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")});var h=e.extend("sap.ui.mdc.condition.Operator",{constructor:function(t){e.apply(this,arguments);if(!t){throw new Error("Operator configuration missing")}if(!t.name){i.warning("Operator configuration expects a name property")}if(!t.filterOperator&&!t.getModelFilter){throw new Error("Operator configuration for "+t.name+" needs a default filter operator from sap.ui.model.FilterOperator or the function getModelFilter")}this.name=t.name;if(t.alias){this.alias=t.alias}this.filterOperator=t.filterOperator;this.valueTypes=t.valueTypes;this.paramTypes=t.paramTypes;this.displayFormats=t.displayFormats;var a="operators."+this.name;var r=a+".longText";var s=a+".tokenText";this.longText=t.longText||d(r)||"";this.tokenText=t.tokenText||d(s)||"";if(this.longText===r){this.longText=this.tokenText.replace(/\{0\}/g,"X").replace(/\{1\}/g,"Y")}if(this.tokenText===s){this.tokenText=this.longText}if(this.tokenText){var o;var n;if(t.tokenParse){n=u(this.tokenText);this.tokenParse=t.tokenParse.replace(/#tokenText#/g,n);for(var l=0;l<this.valueTypes.length;l++){var p=this.paramTypes?this.paramTypes[l]:this.valueTypes[l];this.tokenParse=this.tokenParse.replace(new RegExp("\\\\\\$"+l+"|"+l+"\\\\\\$"+"|"+"\\\\\\{"+l+"\\\\\\}","g"),p)}o=this.tokenParse}else{o=u(this.tokenText)}this.tokenParseRegExp=new RegExp(o,"i");if(t.tokenFormat){n=this.tokenText;this.tokenFormat=t.tokenFormat.replace(/\#tokenText\#/g,n)}else{this.tokenFormat=this.tokenText}}if(t.format){this.format=t.format}if(t.parse){this.parse=t.parse}if(t.validate){this.validate=t.validate}if(t.getModelFilter){this.getModelFilter=t.getModelFilter}if(t.isEmpty){this.isEmpty=t.isEmpty}if(t.createControl){this.createControl=t.createControl}if(t.getCheckValue){this.getCheckValue=t.getCheckValue}if(t.getValues){this.getValues=t.getValues}if(t.checkValidated){this.checkValidated=t.checkValidated}if(t.additionalInfo!==undefined){this.additionalInfo=t.additionalInfo}this.exclude=!!t.exclude;this.validateInput=!!t.validateInput;if(t.group){this.group=t.group}else{this.group={id:!this.exclude?"1":"2"};if(!this.group.text){this.group.text=f.getText("VALUEHELP.OPERATOR.GROUP"+this.group.id)}}}});h.ValueType={Self:"self",Static:"static",SelfNoParse:"selfNoParse"};function d(e,t){var a=e+(t?"."+t:""),r;r=f.getText(a,undefined,true);if(r===a||r===undefined){if(t){r=f.getText(e,undefined,true);if(r===a||r===undefined){r=e}}else{r=a}}return r}h.prototype.getTypeText=function(e,t){return d(e,t)};h.prototype.getModelFilter=function(e,r,i,s,o){var n=e.values[0];var l;var u;var f=r.split(",");if(Array.isArray(n)&&f.length>1){n=n[0];r=f[0];u=new t({path:f[1],operator:a.EQ,value1:e.values[0][1]})}if(u&&n===undefined){l=u;u=undefined}else if(!this.valueTypes[1]){if(!s&&e.validated===p.Validated){s=true}l=new t({path:r,operator:this.filterOperator,value1:n,caseSensitive:s===false?false:undefined})}else{var h=e.values[1];if(Array.isArray(h)&&f.length>1){h=h[0]}l=new t({path:r,operator:this.filterOperator,value1:n,value2:h,caseSensitive:s===false?false:undefined})}if(u){l=new t({filters:[l,u],and:true})}if(e.inParameters){var d=[l];for(var v in e.inParameters){if(v.startsWith("conditions/")){d.push(new t({path:v.slice(11),operator:a.EQ,value1:e.inParameters[v]}))}}if(d.length>1){l=new t({filters:d,and:true})}}return l};h.prototype.isEmpty=function(e,t){var a=false;if(e){for(var r=0;r<this.valueTypes.length;r++){if(this.valueTypes[r]!==h.ValueType.Static){var i=e.values[r];if(i===null||i===undefined||i===""){a=true;break}}}}return a};h.prototype.format=function(e,t,a,r,i){var s=e.values;var o=this.valueTypes.length;var n=r&&o===1?"{0}":this.tokenFormat;for(var l=0;l<o;l++){if(this.valueTypes[l]!==h.ValueType.Static){if(this.valueTypes[l]!==h.ValueType.Self){t=this._createLocalType(this.valueTypes[l],t)}var p=s[l];if(p===undefined||p===null){p=t?t.parseValue("","string"):""}var u=this._formatValue(p,t,i);n=n.replace(new RegExp("\\$"+l+"|"+l+"\\$"+"|"+"\\{"+l+"\\}","g"),u)}}return n};h.prototype._formatValue=function(e,t,a){var r;if(t){if(t.isA("sap.ui.model.CompositeType")&&t.getUseInternalValues()&&Array.isArray(e)&&a){e=o([],e);for(var i=0;i<e.length;i++){if(a[i]){var s=a[i].getModelFormat();if(s&&typeof s.parse==="function"){e[i]=s.parse(e[i])}}}}r=t.formatValue(e,"string")}else{r=e}return r};h.prototype.parse=function(e,t,a,r,s){var o=this.getValues(e,a,r);var n;if(o){n=[];for(var l=0;l<this.valueTypes.length;l++){if(this.valueTypes[l]&&[h.ValueType.Self,h.ValueType.Static].indexOf(this.valueTypes[l])===-1){t=this._createLocalType(this.valueTypes[l],t)}try{if(this.valueTypes[l]!==h.ValueType.Static){var p;if(this.valueTypes[l]){p=this._parseValue(o[l],t,s)}else{p=o[l]}n.push(p)}}catch(e){i.warning(e.message);throw e}}}return n};h.prototype._parseValue=function(e,t,a){if(e===undefined){return e}var r;if(t&&t.isA("sap.ui.model.CompositeType")&&t._aCurrentValue&&t.getParseWithValues()){r=t._aCurrentValue}var i=t?t.parseValue(e,"string",r):e;if(t&&t.isA("sap.ui.model.CompositeType")&&Array.isArray(i)&&(t._aCurrentValue||t.getUseInternalValues()&&a)){for(var s=0;s<i.length;s++){if(i[s]===undefined&&t._aCurrentValue){i[s]=t._aCurrentValue[s]===undefined?null:t._aCurrentValue[s]}else if(t.getUseInternalValues()&&a&&a[s]){var o=a[s].getModelFormat();if(o&&typeof o.format==="function"){i[s]=o.format(i[s])}}}}return i};h.prototype.validate=function(e,t,a){var r=this.valueTypes.length;for(var i=0;i<r;i++){if(this.valueTypes[i]&&this.valueTypes[i]!==h.ValueType.Static){if([h.ValueType.Self,h.ValueType.Static].indexOf(this.valueTypes[i])===-1){t=this._createLocalType(this.valueTypes[i],t)}if(e.length<i+1){throw new Error("value "+i+" for operator "+this.getName()+" missing")}if(t){var s=e[i];if(s===undefined||s===null){s=t?t.parseValue("","string"):""}if(t.isA("sap.ui.model.CompositeType")&&Array.isArray(s)&&a){s=o([],s);for(var n=0;n<s.length;n++){if(a[n]){a[n].validateValue(s[n]);if(t.getUseInternalValues()){var l=a[n].getModelFormat();if(l&&typeof l.parse==="function"){s[n]=l.parse(s[n])}}}}}t.validateValue(s)}}}};h.prototype._createLocalType=function(e,t){if(!this._aTypes){this._aTypes=[]}var a;var r;var i;var l;if(e===h.ValueType.SelfNoParse){a=t.getMetadata().getName();r=o({},t.getFormatOptions());i=o(t.getConstraints())}else if(typeof e==="string"){a=e}else if(e&&typeof e==="object"){a=e.name;r=e.formatOptions;i=e.constraints}for(var p=0;p<this._aTypes.length;p++){var u=this._aTypes[p];if(u.name===a&&n(u.formatOptions,r)&&n(u.constraints,i)){l=u.type;break}}if(!l){var f=s.get(a||"");l=new f(r,i);l._bCreatedByOperator=true;if(e===h.ValueType.SelfNoParse){l.parseValue=function(e,t){f.prototype.parseValue.apply(this,arguments);return e};l.validateValue=function(e){var t=f.prototype.parseValue.apply(this,[e,"string"]);f.prototype.validateValue.apply(this,[t])};l.formatValue=function(e,t){f.prototype.formatValue.apply(this,arguments);return e}}this._aTypes.push({name:a,formatOptions:r,constraints:i,type:l})}return l};h.prototype.test=function(e){return this.tokenParseRegExp.test(e)};h.prototype.getValues=function(e,t,a){var r=e.match(this.tokenParseRegExp);var i;if(r||a&&e){i=[];for(var s=0;s<this.valueTypes.length;s++){var o;if(r){o=r[s+1]}else if(a){if(s>0){break}o=e}i.push(o)}}return i};h.prototype.getCondition=function(e,t,a,i,s){if(this.test(e)||i&&e&&this.hasRequiredValues()){var o=this.parse(e,t,a,i,s);if(o.length==this.valueTypes.length||this.valueTypes[0]===h.ValueType.Static||o.length===1&&this.valueTypes.length===2&&!this.valueTypes[1]){var n=l.createCondition(this.name,o);this.checkValidated(n);return n}else{throw new r("Parsed value don't meet operator")}}return null};h.prototype.isSingleValue=function(){if(this.valueTypes.length>1&&this.valueTypes[1]){return false}return true};h.prototype.getCheckValue=function(e){if(this.valueTypes[0]&&this.valueTypes[0]===h.ValueType.Static){return{}}else{return{values:e.values}}};h.prototype.hasRequiredValues=function(){if(this.valueTypes[0]&&this.valueTypes[0]!==h.ValueType.Static){return true}else{return false}};h.prototype.compareConditions=function(e,t){var a=false;if(e.operator===this.name&&e.operator===t.operator){var r=this.getCheckValue(e);var i=this.getCheckValue(t);if(e.inParameters&&t.inParameters){r.inParameters=e.inParameters;i.inParameters=t.inParameters}if(e.outParameters&&t.outParameters){r.outParameters=e.outParameters;i.outParameters=t.outParameters}if(e.payload&&t.payload){r.payload=e.payload;i.payload=t.payload}if(e.validated&&t.validated){r.validated=e.validated;i.validated=t.validated}var s=JSON.stringify(r);var o=JSON.stringify(i);if(s===o){a=true}}return a};h.prototype.checkValidated=function(e){e.validated=p.NotValidated};return h});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/condition/OperatorDynamicDateOption",["sap/m/DynamicDateOption","sap/m/DynamicDateValueHelpUIType","sap/m/Input","sap/ui/mdc/condition/Operator","sap/ui/mdc/enum/BaseType","sap/ui/mdc/enum/FieldDisplay","sap/ui/mdc/util/DateUtil","sap/ui/mdc/util/loadModules","sap/ui/model/json/JSONModel","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/core/library"],function(e,t,a,r,o,s,i,p,l,n,u,y,v){"use strict";var f=v.ValueState;var h;var c;var d=e.extend("sap.ui.mdc.condition.OperatorDynamicDateOption",{metadata:{library:"sap.ui.mdc",properties:{operator:{type:"object"},type:{type:"object"},baseType:{type:"sap.ui.mdc.enum.BaseType"}}}});d.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this._oModel){this._oModel.destroy();this._oModel=undefined;this._mChangeHandler=undefined}if(this._aUITypes){for(var t=0;t<this._aUITypes.length;t++){this._aUITypes[t].destroy()}this._aUITypes=undefined}};d.prototype.applySettings=function(){e.prototype.applySettings.apply(this,arguments);var t=[];var a=this.getBaseType();if(a===o.DateTime){if(!c){t.push("sap/m/DateTimePicker")}}else if(!h){t.push("sap/m/DatePicker")}if(t.length>0){return p(t).then(function(e){if(a===o.DateTime){c=e[0]}else{h=e[0]}})}};d.prototype.validateProperty=function(t,a){if(t==="operator"&&a&&(typeof a!=="object"||!a.isA||!a.isA("sap.ui.mdc.condition.Operator"))){throw new Error('"'+a+'" is of type '+typeof a+", expected "+'sap.ui.mdc.condition.Operator for property "'+t+'" of '+this)}else if(t==="type"&&a&&(typeof a!=="object"||!a.isA||!a.isA("sap.ui.model.Type"))){throw new Error('"'+a+'" is of type '+typeof a+", expected "+'sap.ui.model.Type for property "'+t+'" of '+this)}return e.prototype.validateProperty.apply(this,arguments)};d.prototype.isRange=function(){var e=this.getOperator();return e.isA("sap.ui.mdc.condition.RangeOperator")};d.prototype.getText=function(e){var t=this.getOperator();return t.longText};d.prototype.getValueHelpUITypes=function(e){if(!this._aUITypes){var a=this.getOperator();var s=this.getType();var i=this.getBaseType();this._aUITypes=[];for(var p=0;p<a.valueTypes.length;p++){var l=a.valueTypes[p];if(l===r.ValueType.Self){var n;if(i===o.DateTime){n="datetime"}else{n="date"}this._aUITypes.push(new t({type:n}))}else if(!l||l===r.ValueType.Static){continue}else{s=a._createLocalType(l,s);if(s.isA("sap.ui.model.type.Integer")||s.isA("sap.ui.model.odata.type.Int")){this._aUITypes.push(new t({type:"int"}))}else{this._aUITypes.push(new t({type:"custom"}))}}}}return this._aUITypes};d.prototype.createValueHelpUI=function(e,t){var s=e.getValue();var p=this.getOperator();var n=this.getType();var u=this.getKey();var y=e.getId();if(!s||s.operator!==u){s={operator:u,values:[]};if(p.valueDefaults){s.values=p.valueDefaults}}g.call(this,e);if(!e.aControlsByParameters){e.aControlsByParameters={}}e.aControlsByParameters[u]=[];var v=function(e){t(this)}.bind(this);for(var f=0;f<p.valueTypes.length;f++){var d=p.valueTypes[f];var m=this.getBaseType();var T;if(!d){continue}if(!e.aControlsByParameters[u][f]){if(p.createControl){if(!this._oModel){v=function(e){var t=e.getParameter("path");var a=t.split("/");var r=a[0]||a[1];if(this._mChangeHandler&&this._mChangeHandler[r]){this._mChangeHandler[r](this)}}.bind(this);this._oModel=new l;this._oModel.attachPropertyChange({},v,this);this._mChangeHandler={}}var _=this._oModel.getData();_[y]={value0:s&&s.values[0],value1:s&&s.values[1]};this._mChangeHandler[y]=t;if(d!==r.ValueType.Self){n=p._createLocalType(d,n)}var V=p.createControl(n,"internal>/"+y+"/value"+f,f,y+"-"+f);V.setModel(this._oModel,"internal");e.aControlsByParameters[u].push(V)}else if(d===r.ValueType.Self){if(s&&s.values[f]){T=i.typeToUniversalDate(s.values[f],n,m);T=i.utcToLocal(T)}var C=n.getFormatOptions();var O;if(m===o.DateTime){O=c}else{O=h}var D=new O(y+"-"+f,{dateValue:T,displayFormat:C.style||C.pattern,displayFormatType:C.calendarType,change:v});e.aControlsByParameters[u].push(D)}else if(typeof d==="object"){n=p._createLocalType(p.valueTypes[f],n);var P=n.formatValue(s&&s.values[f],"string");var B=new a(y+"-"+f,{value:P,change:v});e.aControlsByParameters[u].push(B)}}}return e.aControlsByParameters[u]};d.prototype.validateValueHelpUI=function(e){var t=this.getKey();var a=this.getOperator();var r=this.getType();var o;var s=true;var i=f.None;var p;var l=0;try{o=this.getValueHelpOutput(e);for(l=0;l<o.values.length;l++){var n=o.values[l];if(n===undefined||n===null){s=false}}a.validate(o.values,r)}catch(e){s=false;i=f.Error;p=e.message;if(e&&!(e instanceof u)&&!(e instanceof y)){throw e}}if(!a.createControl){for(l=0;l<e.aControlsByParameters[t].length;l++){var v=e.aControlsByParameters[t][l];if(v.setValueState){v.setValueState(i);v.setValueStateText(p)}}}return s};d.prototype.getValueHelpOutput=function(e){var t=this.getKey();var a={operator:t,values:[]};var o=this.getOperator();var s=this.getType();var p=this.getBaseType();var l=e.getId();for(var n=0;n<o.valueTypes.length;n++){if(!o.valueTypes[n]){continue}var y=e.aControlsByParameters[t][n];if(y){var v;if(o.createControl){v=this._oModel?this._oModel.getProperty("/"+l+"/value"+n):null}else if(o.valueTypes[n]===r.ValueType.Self){if(!y.isValidValue()){throw new u}v=y.getDateValue();if(v){v=i.localToUtc(v);v=i.universalDateToType(v,s,p)}}else{v=y.getValue();s=o._createLocalType(o.valueTypes[n],s);v=s.parseValue(v,"string")}a.values.push(v)}}return a};d.prototype.getGroupHeader=function(){var t=this.getOperator();if(t.group&&t.group.text){return t.group.text}return e.prototype.getGroupHeader.apply(this,arguments)};d.prototype.getGroup=function(){var t=this.getOperator();if(t.group){return t.group.id}return e.prototype.getGroup.apply(this,arguments)};d.prototype.toDates=function(e){var t=this.getOperator();var a=this.getType();var o=this.getBaseType();var s;var p=0;if(t.isA("sap.ui.mdc.condition.RangeOperator")){s=t._getRange(e&&e.values,a,o);for(p=0;p<s.length;p++){s[p]=i.typeToUniversalDate(s[p],a,o);s[p]=i.utcToLocal(s[p])}}else if(t.valueTypes[0]===r.ValueType.Self){s=e.values;for(p=0;p<s.length;p++){if(s[p]){s[p]=i.typeToUniversalDate(s[p],a,o);s[p]=i.utcToLocal(s[p])}}if(s.length===1){s.push(s[0])}}else if([r.ValueType.Self,r.ValueType.Static].indexOf(t.valueTypes[0])===-1){throw new Error("Cannot convert to date, use RangeOperator")}return s};d.prototype.format=function(e){var t=this.getOperator();var a=this.getType();return t.format(e,a,s.Value)};d.prototype.parse=function(e){var t=this.getOperator();var a=this.getType();if(e&&t.parse(e)){var r={};r.operator=this.getKey();r.values=t.parse(e,a,s.Value);return r}};d.prototype.enhanceFormattedValue=function(e,t){return false};function g(e){var t=this.getKey();if(e&&e.aControlsByParameters&&e.aControlsByParameters[t]){for(var a=0;a<e.aControlsByParameters[t].length;a++){var r=e.aControlsByParameters[t][a];if(!r.bIsDestroyed){r.destroy()}}delete e.aControlsByParameters[t]}}return d});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/condition/RangeOperator",["sap/ui/mdc/condition/Operator","sap/ui/model/Filter","sap/ui/mdc/util/DateUtil","sap/base/Log"],function(e,t,a,i){"use strict";var n=e.extend("sap.ui.mdc.condition.RangeOperator",{constructor:function(t){t.filterOperator="RANGE";t.tokenParse=t.tokenParse||"^#tokenText#$";t.tokenFormat=t.tokenFormat||"#tokenText#";e.apply(this,arguments);if(this.paramTypes){if(t.defaultValues!==undefined){if(Array.isArray(t.defaultValues)){this.valueDefaults=t.defaultValues}else{this.valueDefaults=t.defaultValues()}}else{this.paramTypes.forEach(function(e){if(!this.valueDefaults){this.valueDefaults=[]}this.valueDefaults.push(1)}.bind(this))}}if(t.label!==undefined){this.aLabels=t.label}if(t.calcRange){this.calcRange=t.calcRange}if(t.formatRange){this.formatRange=t.formatRange}else if(this.calcRange){this.formatRange=function(e,t){return t.formatValue(e[0],"string")+" - "+t.formatValue(e[1],"string")}}}});n.prototype.getModelFilter=function(e,a,i,n,r){var s=this._getRange(e.values,i,r);return new t({path:a,operator:"BT",value1:s[0],value2:s[1]})};n.prototype._getRange=function(e,t,i){var n;if(e){if(e.length===2){n=this.calcRange(e[0],e[1])}else{n=this.calcRange(e[0])}}else{n=this.calcRange()}for(var r=0;r<2;r++){n[r].oDate=a.localToUtc(n[r].oDate);n[r]=a.universalDateToType(n[r],t,i)}return n};n.prototype.getStaticText=function(e){var t=this._getRange(null,e);return this.formatRange(t,e)};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/ActionToolbarActionAlignment",function(){"use strict";var n={Begin:"Begin",End:"End"};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/BaseType",function(){"use strict";var e={String:"String",Numeric:"Numeric",Boolean:"Boolean",Date:"Date",Time:"Time",DateTime:"DateTime",Unit:"Unit"};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/ConditionValidated",function(){"use strict";var a={NotValidated:"NotValidated",Validated:"Validated"};return a},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/ContentMode",function(){"use strict";var i={Display:"Display",DisplayMultiValue:"DisplayMultiValue",DisplayMultiLine:"DisplayMultiLine",Edit:"Edit",EditMultiValue:"EditMultiValue",EditMultiLine:"EditMultiLine",EditOperator:"EditOperator",EditForHelp:"EditForHelp"};return i},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/EditMode",function(){"use strict";var e={Display:"Display",Editable:"Editable",ReadOnly:"ReadOnly",Disabled:"Disabled",EditableReadOnly:"EditableReadOnly",EditableDisplay:"EditableDisplay"};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/FieldDisplay",function(){"use strict";var e={Value:"Value",Description:"Description",ValueDescription:"ValueDescription",DescriptionValue:"DescriptionValue"};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/OutParameterMode",function(){"use strict";var e={Always:"Always",WhenEmpty:"WhenEmpty"};return e},true);
/*
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/PersistenceMode",function(){"use strict";var e={Global:"Global",Auto:"Auto",Transient:"Transient"};return e},true);
/*
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/PropagationReason",function(){"use strict";var e={ControlChange:"ControlChange",Select:"Select",Info:"Info"};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/enum/SelectType",function(){"use strict";var e={Set:"Set",Add:"Add",Remove:"Remove"};return e},true);
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/BoolFieldHelp",["sap/ui/mdc/library","sap/ui/mdc/field/FieldHelpBase","sap/ui/mdc/condition/Condition","sap/ui/base/ManagedObjectObserver","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/json/JSONModel"],function(e,t,i,s,o,a,r){"use strict";var n;var l;var p;var d;var u=t.extend("sap.ui.mdc.field.BoolFieldHelp",{metadata:{library:"sap.ui.mdc"}});u.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oObserver=new s(c.bind(this));this._oObserver.observe(this,{properties:["filterValue","conditions"]});this._oModel=new r({type:"",items:[{key:true,text:"true"},{key:false,text:"false"}]});this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")};u._init=function(){t._init.apply(this,arguments);n=undefined;l=undefined;p=undefined;d=undefined};u.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oObserver.disconnect();this._oObserver=undefined;this._oModel.destroy();this._oModel=undefined};u.prototype.connect=function(e){t.prototype.connect.apply(this,arguments);b.call(this);return this};u.prototype._createPopover=function(){var e=t.prototype._createPopover.apply(this,arguments);if((!n||!l||!p)&&!this._bListRequested){n=sap.ui.require("sap/m/List");l=sap.ui.require("sap/m/StandardListItem");p=sap.ui.require("sap/m/library");d=sap.ui.require("sap/ui/model/Filter");if(!n||!l||!p){sap.ui.require(["sap/m/List","sap/m/StandardListItem","sap/m/library","sap/ui/model/Filter"],f.bind(this));this._bListRequested=true}}if(e){var i=this._getField();if(i){e.setInitialFocus(i)}h.call(this)}return e};function h(){if(!this._oList&&n&&l&&p&&!this._bListRequested){var e=new l(this.getId()+"-item",{type:p.ListType.Active,title:"{text}"}).addStyleClass("sapMComboBoxNonInteractiveItem");this._oList=new n(this.getId()+"-List",{width:"100%",showNoData:false,mode:p.ListMode.SingleSelectMaster,rememberSelections:false,items:{path:"/items",template:e},itemPress:v.bind(this)}).addStyleClass("sapMComboBoxBaseList").addStyleClass("sapMComboBoxList");this._oList.setModel(this._oModel);_.call(this,this.getFilterValue());g.call(this);this._setContent(this._oList);if(this._bNavigate){this._bNavigate=false;this.navigate(this._iStep);this._iStep=null}}}function f(e,t,i,s){n=e;l=t;p=i;d=s;this._bListRequested=false;if(!this._bIsBeingDestroyed){h.call(this)}}u.prototype.open=function(e){var i=this.getAggregation("_popover");if(i){var s=this._getField();i.setInitialFocus(s)}t.prototype.open.apply(this,arguments);return this};u.prototype._handleAfterClose=function(e){if(this._bUpdateFilterAfterClose){this._bUpdateFilterAfterClose=false;_.call(this)}this._oList.removeStyleClass("sapMListFocus");t.prototype._handleAfterClose.apply(this,arguments)};function c(e){if(e.name==="conditions"){m.call(this,e.current)}if(e.name==="filterValue"){if(this._oList){if(this._bClosing){this._bUpdateFilterAfterClose=true}else{_.call(this,e.current)}}}}u.prototype.openByTyping=function(){return true};u.prototype.removeFocus=function(){if(this._oList){this._oList.removeStyleClass("sapMListFocus")}};u.prototype.navigate=function(e){var t=this._getPopover();if(!t||!this._oList){this._bNavigate=true;this._iStep=e;return}this._oList.addStyleClass("sapMListFocus");var i=this._oList.getSelectedItem();var s=this._oList.getItems();var o=s.length;var a=0;var r=false;if(i){a=this._oList.indexOfItem(i);a=a+e;if(a<0){a=0;r=true}else if(a>=o-1){a=o-1}}else if(e>=0){a=e-1}else{a=o+e}var n=s[a];if(n){if(!t.isOpen()){this.open()}if(n!==i){n.setSelected(true);var l=y.call(this,n);var p=L.call(this,l);this.setProperty("conditions",[p],true);this.fireNavigate({value:n.getTitle(),key:l,condition:p,itemId:n.getId()})}else if(r){this.fireNavigate({key:undefined,value:undefined,condition:undefined,itemId:undefined,leaveFocus:r})}}};u.prototype._getTextOrKey=function(e,t,i,s,r,n,l,p){if(e===null||e===undefined||e===""){return null}else if(!e&&!t){return null}var d=this._oModel.getData()["items"];for(var u=0;u<d.length;u++){var h=d[u];if(t){if(h["key"]===e){return h["text"]}}else if(h["text"]===e){return h["key"]}}var f=this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[e]);if(t){throw new o(f)}else{throw new a(f)}};function v(e){var t=e.getParameter("listItem");var i=t.getSelected();if(i){var s=y.call(this,t);var o=L.call(this,s);this.setProperty("conditions",[o],true);this.close();this.fireSelect({conditions:[o],add:true,close:true})}}function _(e){var t=this._oList.getBinding("items");if(e){var i=new d({path:"text",operator:"StartsWith",value1:e});t.filter(i)}else{t.filter()}this._oList.invalidate();g.call(this)}function g(){if(this._oList){var e=this.getConditions();var t;var i;var s=this._oList.getItems();var o=this._getOperator();if(e.length>0&&e[0].operator===o.name){t=e[0].values[0];i=this.getTextForKey(t)}for(var a=0;a<s.length;a++){var r=s[a];if(r.getTitle()===i){r.setSelected(true)}else{r.setSelected(false)}}}}function m(e){g.call(this)}function y(e){var t=e.getBindingContext();var i=t&&t.getObject();if(i){return i["key"]}}function L(e){var t;var i=this.getTextForKey(e);if(i){t=this._createCondition(e,i)}return t}function b(){if(this._oField&&this._oField._getFormatOptions){var e=this._oField._getFormatOptions().valueType;var t=this._oModel.getData();if(e&&t["type"]!==e.getMetadata().getName()){t["type"]=e.getMetadata().getName();var i=t["items"];for(var s=0;s<i.length;s++){var o=i[s];o["text"]=e.formatValue(o["key"],"string")}}}}return u});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/ConditionFieldHelp",["sap/m/library","sap/ui/mdc/field/FieldHelpBase","sap/ui/mdc/condition/Condition","sap/ui/base/ManagedObjectObserver"],function(e,t,i,o){"use strict";var n=e.ButtonType;var s;var r;var a;var p;var l;var u;var d=t.extend("sap.ui.mdc.field.ConditionFieldHelp",{metadata:{library:"sap.ui.mdc",properties:{title:{type:"string",group:"Appearance",defaultValue:""},label:{type:"string",group:"Appearance",defaultValue:""},_enableOK:{type:"boolean",group:"Appearance",defaultValue:true,visibility:"hidden"}}}});d.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oObserver=new o(f.bind(this));this._oObserver.observe(this,{properties:["title"]});this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")};d._init=function(){t._init.apply(this,arguments);s=undefined;p=undefined};d.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oObserver.disconnect();this._oObserver=undefined};d.prototype.getIcon=function(){return"sap-icon://value-help"};d.prototype.isFocusInHelp=function(){return true};d.prototype.openByTyping=function(){return false};d.prototype.getAriaHasPopup=function(){return"dialog"};d.prototype._createPopover=function(){var e=t.prototype._createPopover.apply(this,arguments);if((!s||!r||!a||!p||!l||!u)&&!this._bModulesRequested){s=sap.ui.require("sap/ui/mdc/field/DefineConditionPanel");r=sap.ui.require("sap/m/Toolbar");a=sap.ui.require("sap/m/ToolbarSpacer");p=sap.ui.require("sap/m/Button");l=sap.ui.require("sap/ui/model/base/ManagedObjectModel");u=sap.ui.require("sap/ui/mdc/condition/FilterOperatorUtil");if(!s||!r||!a||!p||!l){sap.ui.require(["sap/ui/mdc/field/DefineConditionPanel","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/ui/model/base/ManagedObjectModel","sap/ui/mdc/condition/FilterOperatorUtil"],c.bind(this));this._bModulesRequested=true}}if(e){e.setShowArrow(true);e.setTitle(this.getTitle());e.setShowHeader(true);e.setTitleAlignment("Center");e.setContentWidth("500px");e.setResizable(false);h.call(this)}return e};function h(){if(!this._oDefineConditionPanel&&s&&r&&a&&p&&l&&u&&!this._bModulesRequested){this._oManagedObjectModel=new l(this);this._oDefineConditionPanel=new s(this.getId()+"-DCP",{conditions:{path:"$help>/conditions"},formatOptions:g.call(this),label:"{$help>/label}",inputOK:"{$help>/_enableOK}"}).setModel(this._oManagedObjectModel,"$help");this._setContent(this._oDefineConditionPanel);var e=new p(this.getId()+"-ok",{text:this._oResourceBundle.getText("valuehelp.OK"),enabled:"{$help>/_enableOK}",type:n.Emphasized,press:_.bind(this)});var t=new p(this.getId()+"-cancel",{text:this._oResourceBundle.getText("valuehelp.CANCEL"),press:b.bind(this)});var i=new r(this.getId()+"-TB",{content:[new a(this.getId()+"-Spacer"),e,t]}).setModel(this._oManagedObjectModel,"$help");var o=this.getAggregation("_popover");if(o){o.setFooter(i)}}}function c(e,t,i,o,n,d){s=e;r=t;a=i;p=o;l=n;u=d;this._bModulesRequested=false;if(!this._bIsBeingDestroyed){h.call(this)}}d.prototype.open=function(e){t.prototype.open.apply(this,arguments);var i=this.getAggregation("_popover");if(i&&this._oDefineConditionPanel){this._oDefineConditionPanel.setFormatOptions(g.call(this));this._oDefineConditionPanel.getBinding("conditions").resume()}return this};d.prototype._handleAfterClose=function(e){this._oDefineConditionPanel.getBinding("conditions").suspend();setTimeout(function(){this._oDefineConditionPanel.cleanUp();this.setProperty("_enableOK",true,true)}.bind(this),0);t.prototype._handleAfterClose.apply(this,arguments)};d.prototype._getControlForSuggestion=function(){var e=t.prototype._getControlForSuggestion.apply(this,arguments);var i=e.getAggregation("_endIcon",[]);if(i.length===1){e=i[0]}return e};function f(e){if(e.name==="title"){var t=this.getAggregation("_popover");if(t){t.setTitle(this.getTitel())}}}d.prototype.isValidationSupported=function(){return false};d.prototype.getItemForValue=function(e,t,i,o,n,s,r,a){return{key:t,description:undefined}};function g(){if(this._oField&&this._oField._getFormatOptions){return this._oField._getFormatOptions()}else{return{}}}function _(e){this.close();var t=this.getConditions();t=i._removeEmptyConditions(t);t=i._removeInitialFlags(t);u.updateConditionsValues(t);this.setProperty("conditions",t,true);this.fireSelect({conditions:t,add:false,close:true})}function b(e){this.close()}return d});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/ConditionType",["sap/ui/model/SimpleType","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/type/String","sap/ui/mdc/enum/FieldDisplay","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/BaseType","sap/ui/mdc/enum/ConditionValidated","sap/base/util/merge","sap/base/strings/whitespaceReplacer","sap/ui/base/SyncPromise"],function(e,t,a,i,r,n,o,s,l,u,c,d,f,h){"use strict";var p=e.extend("sap.ui.mdc.field.ConditionType",{constructor:function(t,a){e.apply(this,arguments);this.sName="Condition";this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._oCalls={active:0,last:0,condition:undefined,exception:undefined}}});p.prototype.destroy=function(){e.prototype.destroy.apply(this,arguments);if(this._oDefaultType){this._oDefaultType.destroy();delete this._oDefaultType}this._bDestroyed=true};p.prototype.formatValue=function(e,a){if(e==undefined||e==null||this._bDestroyed){return null}if(typeof e!=="object"||!e.operator||!e.values||!Array.isArray(e.values)){throw new t("No valid condition provided")}if(!a){a="string"}var i=_.call(this);var r=N(i);var s=this.oFormatOptions.preventGetDescription;E.call(this,e,i);switch(this.getPrimitiveType(a)){case"string":case"any":var l=V.call(this);var u=P.call(this);var f=o.getEQOperator(u);if(!this.oFormatOptions.maxConditions||this.oFormatOptions.maxConditions===1){this._oCalls.active++;this._oCalls.last++}var p=this._oCalls.last;if(!s&&l!==n.Value&&e.validated===c.Validated&&(r||e.operator===f.name&&!e.values[1])){var v=this.oFormatOptions.bindingContext;var g=this.oFormatOptions.conditionModel;var y=this.oFormatOptions.conditionModelName;var O=r?e.values[0][1]:e.values[0];return h.resolve().then(function(){return U.call(this,O,e,v,g,y)}.bind(this)).then(function(t){if(t){e=d({},e);if(r){i=w.call(this);e.operator=f.name;if(typeof t!=="object"){t={key:O,description:t}}}if(typeof t==="object"){e=S.call(this,e,t)}else if(e.values.length===1){e.values.push(t)}else{e.values[1]=t}}return m.call(this,e,undefined,p,true,i)}.bind(this)).catch(function(a){var r;if(!(a instanceof t)||!Q.call(this)){r=a}return m.call(this,e,r,p,true,i)}.bind(this)).unwrap()}return m.call(this,e,undefined,p,true,i);default:if(i&&e.values.length>=1){return i.formatValue(e.values[0],a)}throw new t("Don't know how to format Condition to "+a)}};function v(e,a){var i=V.call(this);var r=N(a);if(r&&e.values.length>1&&e.values[0][1]===e.values[1][1]){e=d({},e);e.operator="EQ";e.values.splice(1)}var s=this.oFormatOptions.hideOperator&&e.values.length===1||r;var l=o.getOperator(e.operator);var c=D.call(this);if(!l){throw new t("No valid condition provided, Operator wrong.")}var h=l.format(e,a,i,s,c);var p=this.oFormatOptions.convertWhitespaces;if(p&&(I.call(this,a)===u.String||i!==n.Value)){h=f(h)}return h}function m(e,t,a,i,r){if(this._oCalls.active>0){this._oCalls.active--}if(a<this._oCalls.last&&(this._oCalls.condition!==undefined||this._oCalls.exception!==undefined)){e=this._oCalls.condition;t=this._oCalls.exception}if(a===this._oCalls.last&&this._oCalls.active>0){this._oCalls.condition=d({},e);this._oCalls.exception=t}else if(this._oCalls.active===0&&this._oCalls.last>0){this._oCalls={active:0,last:0,condition:undefined,exception:undefined}}if(t){throw t}var n;if(i){n=v.call(this,e,r)}else{n=g.call(this,e,r)}return n}p.prototype.parseValue=function(e,t){if(this._bDestroyed){return null}if(!t){t="string"}else if(t==="any"&&typeof e==="string"){t="string"}var i=this.oFormatOptions.navigateCondition;if(i){var r=this.formatValue(i,t);if(r===e){return d({},i)}}var n=V.call(this);var s=k.call(this);var u=_.call(this);var f=F.call(this);var h=P.call(this);var p=N(u);var v;if(e===null||e===undefined||e===""&&!s){if(!x.call(this,u)){return null}}M.call(this,u);switch(this.getPrimitiveType(t)){case"string":var g;var O=false;var C=false;if(h.length===1){g=o.getOperator(h[0]);C=true}else{var w=o.getMatchingOperators(h,e);if(w.length===0){g=R.call(this,h,u);if(s&&!x.call(this,u)){var T=o.getEQOperator(h);if(h.indexOf(T.name)>=0){O=!!g&&g.name!==T.name;g=T}}C=true}else{var b=w.filter(function(e){return e.valueTypes.length===0});if(b.length>=1){g=b[0]}else{g=w[0]}}}if(g){if(p&&g!==o.getEQOperator(h)){throw new a("unsupported operator")}var E;var S=x.call(this,u);var I=D.call(this);this._oCalls.active++;this._oCalls.last++;var Q=this._oCalls.last;if((!S||p)&&g.validateInput&&s){E=y.call(this,g,e,u,C,O,h,n,true);if(E instanceof Promise){return A.call(this,E)}else{return E}}else{try{if(e===""&&S&&C){E=l.createCondition(g.name,[u.parseValue(e,"string",u._aCurrentValue)],undefined,undefined,c.NotValidated)}else{E=g.getCondition(e,u,n,C,I)}}catch(t){var B=t;if(B instanceof a&&f){try{f.parseValue(e,"string",f._aCurrentValue)}catch(e){B=e}}return m.call(this,undefined,B,Q,false,u)}}if(E){return m.call(this,E,undefined,Q,false,u)}}throw new a("Cannot parse value "+e);default:if(u){if(h.length===1){v=h[0]}else{v=R.call(this,h,u).name;if(h.indexOf(v)<0){v=undefined}}if(v){return l.createCondition(v,[u.parseValue(e,t)],undefined,undefined,c.NotValidated)}}throw new a("Don't know how to parse Condition from "+t)}};function g(e,t){var a=N(t);var i=x.call(this,t);if(e&&!a&&i){var r=t.getMetadata().getName();var n=t.getFormatOptions();var o=t.getConstraints();var s=this.oFormatOptions.delegate;var l=this.oFormatOptions.payload;var c=s&&s.getTypeUtil(l).getBaseType(r,n,o);if((c===u.Unit||c===u.DateTime)&&!e.values[0][1]&&t._aCurrentValue){var d=t._aCurrentValue[1]?t._aCurrentValue[1]:null;e.values[0][1]=d;if(e.operator==="BT"){e.values[1][1]=d}}}E.call(this,e,t);return e}function y(e,r,o,u,d,f,p,v){var g;var V;var _=true;var w=true;var F=false;var T;var P;var b=this.oFormatOptions.bindingContext;var x=this.oFormatOptions.conditionModel;var D=this.oFormatOptions.conditionModelName;var E;if(r===""){E=[];g=r;T=r}else{E=e.getValues(r,p,u);g=v?E[0]:E[1];V=v?E[1]:E[0];F=p!==n.Value;w=p===n.Value||p===n.ValueDescription;T=w?g||V:V||g}var M=function(i){if(i&&!(i instanceof a)&&!(i instanceof t)){throw i}if(!i._bNotUnique){if(r===""){return null}if(v&&E[0]&&E[1]){return y.call(this,e,r,o,u,d,f,p,false)}if(d){return O.call(this,o,f,r,p)}}if(Q.call(this)){return C.call(this,o,f,r,p)}throw new a(i.message)};var S=function(t){if(t){var i=[t.key];if(e.valueTypes.length>1&&e.valueTypes[1]!==s.ValueType.Static){i.push(t.description)}return l.createCondition(e.name,i,t.inParameters,t.outParameters,c.Validated,t.payload)}else if(r===""){return null}else{return M.call(this,new a(this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[r])))}};var A=this._oCalls.last;var I=function(t,i){var n;var s;try{n=i.call(this,t);if(N(o)){if(n){if(n.operator!=="EQ"){throw new a("unsupported operator")}var u=o._aCurrentValue&&o._aCurrentValue[0]!==undefined?o._aCurrentValue[0]:null;var d=n.values[0];n.values=[[u,d]]}else if(r===""){n=l.createCondition(e.name,[o.parseValue(r,"string",o._aCurrentValue)],undefined,undefined,c.NotValidated)}}}catch(e){s=e}return m.call(this,n,s,A,false,o)};try{if(N(o)){P=o.parseValue(T,"string",o._aCurrentValue);o.validateValue(P);P=P[1]}else{P=o.parseValue(T,"string");o.validateValue(P)}}catch(e){if(e&&!(F&&(e instanceof a||e instanceof i))){throw e}_=false;w=false;P=undefined}return h.resolve().then(function(){return B.call(this,T,P,b,w,_,F,x,D)}.bind(this)).then(function(e){return I.call(this,e,S)}.bind(this)).catch(function(e){return I.call(this,e,M)}.bind(this)).unwrap()}function O(e,t,a,i){var r=R.call(this,t,e);var o;if(r&&t.indexOf(r.name)>=0){o=r.getCondition(a,e,n.Value,true);o.validated=c.NotValidated}return o}function C(e,t,i,r){var s;if(N(e)){s=o.getEQOperator("EQ")}else if(t.length===1){s=o.getOperator(t[0])}else{s=o.getEQOperator(t);if(t.indexOf(s.name)<0){s=undefined}}if(!s){throw new a("Cannot parse value "+i)}var l=s.getCondition(i,e,n.Value,true);if(l){l.validated=c.NotValidated;if(N(e)&&Array.isArray(l.values[0])){l.values[0]=l.values[0][1]}}return l}p.prototype.validateValue=function(e){var t=_.call(this);var a=F.call(this);var r=P.call(this);var n=N(t);var s=D.call(this);if(e===undefined||this._bDestroyed){return null}else if(e===null){if(o.onlyEQ(r)){try{if(t.hasOwnProperty("_sParsedEmptyString")&&t._sParsedEmptyString!==null){t.validateValue(t._sParsedEmptyString)}else{t.validateValue(null)}}catch(e){if(e instanceof i){throw e}else{return null}}}return null}if(typeof e!=="object"||!e.operator||!e.values||!Array.isArray(e.values)){throw new i(this._oResourceBundle.getText("field.VALUE_NOT_VALID"))}var l=o.getOperator(e.operator);if(n){l=o.getEQOperator()}if(!l||r.indexOf(l.name)===-1){throw new i("No valid condition provided, Operator wrong.")}try{l.validate(e.values,t,s)}catch(t){if(t instanceof i&&a){l.validate(e.values,a,s)}throw t}};function V(){var e=this.oFormatOptions.display;if(!e){e=n.Value}return e}function _(){var e=this.oFormatOptions.valueType;if(!e){e=w.call(this)}return e}function w(){if(!this._oDefaultType){this._oDefaultType=new r}return this._oDefaultType}function F(){return this.oFormatOptions.originalDateType}function T(){return this.oFormatOptions.additionalType}function P(){var e=this.oFormatOptions.operators;if(!e||e.length===0){e=o.getOperatorsForType(u.String)}return e}function b(){var e=this.oFormatOptions.fieldHelpID;if(e){var t=sap.ui.getCore().byId(e);if(t&&t.isValidationSupported()){return t}}return null}function x(e){return e&&e.isA("sap.ui.model.CompositeType")}function D(){return this.oFormatOptions.compositeTypes}function N(e){if(x(e)){var t=e.getFormatOptions();var a=!t||!t.hasOwnProperty("showMeasure")||t.showMeasure;var i=!t||!t.hasOwnProperty("showNumber")||t.showNumber;var r=!t||!t.hasOwnProperty("showTimezone")||t.showTimezone;var n=!t||!t.hasOwnProperty("showDate")||t.showDate;var o=!t||!t.hasOwnProperty("showTime")||t.showTime;if(a&&!i||r&&!n&&!o){return true}}return false}function E(e,t){if(x.call(this,t)&&e&&e.values[0]){t._aCurrentValue=d([],e.values[0]);var a=T.call(this);if(x.call(this,a)){a._aCurrentValue=d([],e.values[0])}var i=F.call(this);if(x.call(this,i)){i._aCurrentValue=d([],e.values[0])}}}function M(e){if(x.call(this,e)){var t=T.call(this);if(x.call(this,t)){if(!t._aCurrentValue){t._aCurrentValue=[]}e._aCurrentValue=t._aCurrentValue}}}function S(e,t){e.values=[t.key,t.description];if(t.inParameters){e.inParameters=t.inParameters}if(t.outParameters){e.outParameters=t.outParameters}return e}function A(e){if(this.oFormatOptions.asyncParsing){this.oFormatOptions.asyncParsing(e)}return e}function I(e){var t=e.getMetadata().getName();var a=e.getFormatOptions();var i=e.getConstraints();var r=this.oFormatOptions.delegate;var n=this.oFormatOptions.payload;var o=r?r.getTypeUtil(n).getBaseType(t,a,i):u.String;if(o===u.Unit){o=u.Numeric}return o}function k(){var e=b.call(this);var t=this.oFormatOptions.delegate;var a=this.oFormatOptions.payload;if(t){return t.isInputValidationEnabled(a,e)}else{return!!e}}function Q(){var e=b.call(this);var t=this.oFormatOptions.delegate;var a=this.oFormatOptions.payload;if(t){return t.isInvalidInputAllowed(a,e)}else if(e){return!e.getValidateInput()}else{return true}}function B(e,t,i,r,n,o,s,l){var u=b.call(this);var c=this.oFormatOptions.delegate;var d=this.oFormatOptions.payload;var f=this.oFormatOptions.control;var h={value:e,parsedValue:t,inParameters:undefined,outParameters:undefined,bindingContext:i,checkKeyFirst:r,checkKey:n,checkDescription:o,conditionModel:s,conditionModelName:l,exception:a,control:f};if(c){return c.getItemForValue(d,u,h)}else if(u){return u.getItemForValue(h)}}function U(e,a,i,r,n){var o=b.call(this);var s=this.oFormatOptions.delegate;var l=this.oFormatOptions.payload;var u=this.oFormatOptions.control;if(s){return s.getDescription(l,o,e,a.inParameters,a.outParameters,i,r,n,a.payload,u)}else if(o){if(o.isA("sap.ui.mdc.ValueHelp")){var c={value:e,parsedValue:e,context:{inParameters:a.inParameters,outParameters:a.outParameters,payload:a.payload},bindingContext:i,conditionModel:r,conditionModelName:n,checkKey:true,checkDescription:false,caseSensitive:true,exception:t,control:u};return o.getItemForValue(c)}else{return o.getTextForKey(e,a.inParameters,a.outParameters,i,r,n)}}}function R(e,t){var a=this.oFormatOptions.defaultOperatorName;var i;if(a){i=o.getOperator(a)}else{i=o.getDefaultOperator(I.call(this,t))}if(i&&e.indexOf(i.name)<0){for(var r=0;r<e.length;r++){i=o.getOperator(e[r]);if(i.exclude||!i.hasRequiredValues()){i=undefined}else{break}}}return i}return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/ConditionsType",["sap/ui/mdc/field/ConditionType","sap/ui/model/SimpleType","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/base/util/merge","sap/ui/base/SyncPromise"],function(t,e,i,o,n,r,s){"use strict";var a=e.extend("sap.ui.mdc.field.ConditionsType",{constructor:function(i,o){e.apply(this,arguments);this.sName="Conditions";i=u(i);this._oConditionType=new t(i,this.oConstraints);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")}});a.prototype.destroy=function(){e.prototype.destroy.apply(this,arguments);if(this._oConditionType){this._oConditionType.destroy();this._oConditionType=undefined}this._bDestroyed=true};a.prototype.setFormatOptions=function(t){e.prototype.setFormatOptions.apply(this,arguments);t=u(t);if(this._oConditionType){this._oConditionType.setFormatOptions(t)}};function u(t){t=r({},t);if(t.asyncParsing){delete t.asyncParsing}return t}a.prototype.setConstraints=function(t){e.prototype.setConstraints.apply(this,arguments);if(this._oConditionType){this._oConditionType.setConstraints(this.oConstraints)}};a.prototype.formatValue=function(t,e){if(t==undefined||t==null||this._bDestroyed){return null}if(!Array.isArray(t)){throw new i("No valid conditions provided")}var o;if(!e||e==="string"||e==="any"){o=""}else if(e==="float"||e==="int"){o=0}var n=d.call(this);var r=[];var a=function(t,e){return s.resolve().then(function(){return this._oConditionType.formatValue(t,e)}.bind(this))};for(var u=0;u<t.length;u++){r.push(a.call(this,t[u],e));if(n>0&&u>=n-1){break}}return s.all(r).then(function(t){return p.call(this,t,o)}.bind(this)).unwrap()};function p(t,e){for(var i=0;i<t.length;i++){if(e){e=e+this._oResourceBundle.getText("field.SEPARATOR")+t[i]}else{e=t[i]}}return e}a.prototype.parseValue=function(t,e){if(this._bDestroyed){return null}if(d.call(this)!==1){throw new o("Only one condition supported for parsing")}var i=s.resolve().then(function(){return this._oConditionType.parseValue(t,e)}.bind(this)).then(function(t){return l.call(this,t)}.bind(this)).unwrap();if(i instanceof Promise&&this.oFormatOptions.asyncParsing){this.oFormatOptions.asyncParsing(i)}return i};function l(t){var e=h(this.oFormatOptions.valueType);if(e&&this.oFormatOptions.getConditions){var i=t&&t.values[0][1];var o=t&&t.inParameters;var n=t&&t.outParameters;var r=this.oFormatOptions.getConditions();for(var s=0;s<r.length;s++){r[s].values[0][1]=i;if(i===undefined){r[s].values[0][0]=t.values[0][0]}r[s].values[0].splice(2);if(r[s].operator==="BT"){r[s].values[1][1]=i;if(i===undefined){r[s].values[1][0]=t.values[0][0]}r[s].values[1].splice(2)}if(o||r[s].inParameters){r[s].inParameters=o}if(n||r[s].outParameters){r[s].outParameters=n}}if(r.length===0){r.push(t)}return r}else if(t){return[t]}else{return[]}}a.prototype.validateValue=function(t){if(t===undefined||t===null||this._bDestroyed){return}if(!Array.isArray(t)){throw new n("No valid conditions provided")}for(var e=0;e<t.length;e++){var i=t[e];this._oConditionType.validateValue(i)}var o=d.call(this);if(t.length===0&&o===1){this._oConditionType.validateValue(null)}};function d(){var t=1;if(this.oFormatOptions.hasOwnProperty("maxConditions")){t=this.oFormatOptions.maxConditions}return t}function h(t){if(t&&t.isA("sap.ui.model.CompositeType")){var e=t.getFormatOptions();var i=!e||!e.hasOwnProperty("showMeasure")||e.showMeasure;var o=!e||!e.hasOwnProperty("showNumber")||e.showNumber;var n=!e||!e.hasOwnProperty("showTimezone")||e.showTimezone;var r=!e||!e.hasOwnProperty("showDate")||e.showDate;var s=!e||!e.hasOwnProperty("showTime")||e.showTime;if(i&&!o||n&&!r&&!s){return true}}return false}return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/CustomFieldHelp",["sap/ui/mdc/field/FieldHelpBase"],function(e){"use strict";var t=e.extend("sap.ui.mdc.field.CustomFieldHelp",{metadata:{library:"sap.ui.mdc",properties:{},aggregations:{content:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"content",events:{beforeOpen:{}}}});t.prototype._createPopover=function(){var t=e.prototype._createPopover.apply(this,arguments);if(t){t._getAllContent=function(){var e=this.getParent();if(e){var t=[];t.push(e.getContent());return t}else{return this.getContent()}}}return t};t.prototype.fireSelectEvent=function(e){this.close();this.fireSelect({conditions:e})};t.prototype.open=function(t){this.fireBeforeOpen();e.prototype.open.apply(this,arguments)};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/CustomFieldInfo",["sap/ui/mdc/field/FieldInfoBase","sap/ui/core/Control","sap/ui/core/InvisibleText","sap/ui/base/ManagedObjectObserver"],function(e,t,o,i){"use strict";var n=e.extend("sap.ui.mdc.field.CustomFieldInfo",{metadata:{library:"sap.ui.mdc",properties:{},aggregations:{content:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"content"}});n._oBox=undefined;n.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver=new i(r.bind(this));this._oObserver.observe(this,{aggregations:["content"]})};n.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this._oMyBox){this._oMyBox.destroy();this._oMyBox=undefined}};n.prototype.isTriggerable=function(){return Promise.resolve(!!this.getAggregation("content"))};n.prototype.getTriggerHref=function(){return Promise.resolve(null)};n.prototype.getDirectLinkHrefAndTarget=function(){return Promise.resolve(null)};n.prototype.getContent=function(){if(!n._oBox){n._oBox=t.extend("sap.ui.mdc.field.CustomFieldInfoBox",{metadata:{},renderer:function(e,t){var o=t._oInfo.getAggregation("content");e.write("<div");e.writeControlData(t);e.write(">");if(o){e.renderControl(o)}e.write("</div>")}})}if(!this._oMyBox||this._oMyBox._bIsBeingDestroyed){this._oMyBox=new n._oBox(this.getId()+"-box");this._oMyBox._oInfo=this}return Promise.resolve(this._oMyBox)};function r(e){if(e.object==this&&!this._bIsBeingDestroyed){if(e.name=="content"){this.fireDataUpdate()}}}return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/DefineConditionPanel",["sap/ui/core/Control","sap/ui/base/ManagedObjectObserver","sap/base/util/merge","sap/base/util/deepEqual","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/field/ConditionType","sap/ui/mdc/enum/EditMode","sap/ui/mdc/enum/FieldDisplay","sap/ui/mdc/enum/BaseType","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/Field","sap/ui/mdc/field/ListFieldHelp","sap/ui/mdc/field/ListFieldHelpItem","sap/ui/model/base/ManagedObjectModel","sap/ui/model/json/JSONModel","sap/ui/model/resource/ResourceModel","sap/ui/model/type/String","sap/ui/core/library","sap/ui/core/InvisibleText","sap/ui/core/ListItem","sap/ui/layout/Grid","sap/ui/layout/GridData","sap/m/library","sap/m/Button","sap/m/Panel","sap/base/Log","sap/ui/core/InvisibleMessage","sap/ui/thirdparty/jquery"],function(e,t,i,a,n,r,s,o,l,d,u,p,h,v,f,g,c,y,m,C,O,b,T,I,x,_,S,D,M,V){"use strict";var P=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");sap.ui.getCore().attachLocalizationChanged(function(){P=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")});var w=x.ButtonType;var N=C.ValueState;var $=C.InvisibleMessageMode;var L=e.extend("sap.ui.mdc.field.DefineConditionPanel",{metadata:{library:"sap.ui.mdc",properties:{conditions:{type:"object[]",group:"Data",defaultValue:[],byValue:true},formatOptions:{type:"object",defaultValue:{}},label:{type:"string",defaultValue:""},inputOK:{type:"boolean",defaultValue:true}},aggregations:{_content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},events:{conditionProcessed:{}}},_oManagedObjectModel:null,renderer:{apiVersion:2,render:function(e,t){e.openStart("section",t);e.class("sapUiMdcDefineConditionPanel");e.openEnd();e.renderControl(t.getAggregation("_content"));e.close("section")}},init:function(){sap.ui.getCore().getMessageManager().registerObject(this,true);e.prototype.init.apply(this,arguments);this.oInvisibleMessage=M.getInstance();this._oManagedObjectModel=new g(this);this._oObserver=new t(E.bind(this));this._oObserver.observe(this,{properties:["conditions","formatOptions"]});z.call(this);this.setModel(this._oManagedObjectModel,"$this");this.setModel(this._oManagedObjectModel,"$condition")},exit:function(){sap.ui.getCore().getMessageManager().unregisterObject(this,true);this._oObserver.disconnect();this._oObserver=undefined;if(this._sConditionsTimer){clearTimeout(this._sConditionsTimer);this._sConditionsTimer=null}if(this._oDefaultType){this._oDefaultType.destroy();delete this._oDefaultType}this._oManagedObjectModel.destroy();delete this._oManagedObjectModel},byId:function(e){return sap.ui.getCore().byId(this.getId()+"--"+e)},onBeforeRendering:function(){if(!this.getModel("$i18n")){this.setModel(new y({bundleName:"sap/ui/mdc/messagebundle",async:false}),"$i18n")}if(this.getConditions().length===0){this.updateDefineConditions()}},removeCondition:function(e){var t=e.oSource;var i=t.getBindingContext("$this");var a=this.getConditions();var n=i.getPath();var r=n.match(/^.*\/(\d+)\/$/);var s;if(r){s=parseInt(r[1])}if(s>0&&a.length-1===s){this._bFocusLastRemoveBtn=true}this.oInvisibleMessage.announce(P.getText("valuehelp.DEFINECONDITIONS_REMOVECONDITION_ANNOUNCE"),$.Polite);var o=this.byId("conditions");var l=o.getContent();var d=0;for(var u=0;u<l.length&&d<=s;u++){var p=l[u];if(d===s&&p instanceof h&&p.hasOwnProperty("_iValueIndex")){if(p._bParseError){p.setValue(null)}}if(p instanceof _&&p.getId().endsWith("-removeBtnLarge")){d++}}if(a.length===1&&s===0){this.addDummyCondition(1);a=this.getConditions()}a.splice(s,1);this.setProperty("conditions",a,true);ue.call(this,undefined);this.fireConditionProcessed()},addCondition:function(e){var t=this.getConditions();var i=this.getFormatOptions();var a=i.maxConditions;if(a===-1||t.length<a){this.addDummyCondition(t.length+1);if(this.getConditions().length===a){this._bFocusLastCondition=true}}},addDummyCondition:function(e){var t=A.call(this);var i=R.call(this);var a=i.name;var o=n.createCondition(a,i.valueDefaults?i.valueDefaults:[],undefined,undefined,p.NotValidated);if(i.valueTypes[0]&&i.valueTypes[0]!==s.ValueType.Static){o.isInitial=true}r.updateConditionValues(o);r.checkConditionsEmpty(o,t);var l=this.getConditions();if(e!==undefined){l.splice(e,0,o)}else{l.push(o)}this.setProperty("conditions",l,true);if(!o.isInitial){this.fireConditionProcessed()}},updateDefineConditions:function(){var e=this.getConditions().filter(function(e){var t=r.getOperator(e.operator);return e.validated!==p.Validated||t.exclude});H.call(this,e,true,false);if(e.length===0){this.addDummyCondition()}},onChange:function(e){var t=A.call(this);var i=this.getConditions();r.checkConditionsEmpty(i,t);r.updateConditionsValues(i,t);if(e){i.forEach(function(e){if(!e.isEmpty){delete e.isInitial}})}this.setProperty("conditions",i,true)},onSelectChange:function(e){var t=e.getSource();var i=t.getBindingContext("$this").getObject();var n=this.getConditions();var o=r.indexOfCondition(i,n);if(o>=0){i=n[o]}if(!e.getParameter("valid")){i.invalid=true;this.setProperty("conditions",n,true);t._sOldKey=t.getValue();ue.call(this,true);return}var l=t.getValue();var d=t._sOldKey;var u=r.getOperator(l);var p=d&&r.getOperator(d);if(u&&p){var h=false;if(!a(u.valueTypes[0],p.valueTypes[0])&&u.valueTypes[0]!==s.ValueType.Static){if(o>=0){i.values.forEach(function(e,t){if(e!==null){if(u.valueTypes[t]===s.ValueType.Self&&p.valueTypes[t]===s.ValueType.SelfNoParse||u.valueTypes[t]===s.ValueType.SelfNoParse&&p.valueTypes[t]===s.ValueType.Self){var a=j.call(this,u.name,t);var n=j.call(this,p.name,t);var r=n.formatValue(i.values[t],"string");var o=a.parseValue(r,"string");if(o!==i.values[t]){i.values[t]=a.parseValue(r,"string");h=true}}else{i.values[t]=null;h=true}}}.bind(this))}}if(o>=0&&u.valueDefaults){i.values.forEach(function(e,t){if(i.isInitial&&e!==u.valueDefaults[t]||e===null){i.values[t]=u.valueDefaults[t];i.isInitial=true;h=true}})}if(!u.valueTypes[1]&&p.valueTypes[1]){if(o>=0){if(i.values.length>1&&i.values[1]){i.values=i.values.slice(0,1);h=true}}}if(i.invalid){delete i.invalid;h=true}if(h){r.checkConditionsEmpty(i,A.call(this));this.setProperty("conditions",n,true);ue.call(this,false)}}delete t._sOldKey},onPaste:function(e){var t;var a=e.srcControl;var n=this.getFormatOptions();var s=n.hasOwnProperty("maxConditions")?n.maxConditions:-1;var l=a.getBindingContext("$condition").getPath();var u=parseInt(l.split("/")[2]);if(window.clipboardData){t=window.clipboardData.getData("Text")}else{t=e.originalEvent.clipboardData.getData("text/plain")}var p=t.split(/\r\n|\r|\n/g);if(p&&p.length>1){setTimeout(function(){var e=i({},this.getFormatOptions());delete e.fieldHelpID;delete e.conditionModelName;e.maxConditions=1;e.display=d.Value;var t=new o(e);var n=p.length;var l=this.getConditions();for(var h=0;h<n;h++){if(p[h]){var v=p[h].trim();var f=v.split(/\t/g);if(f.length==2&&f[0]&&f[1]){var g=r.getOperator("BT");v=g.tokenFormat;for(var c=0;c<2;c++){v=v.replace(new RegExp("\\{"+c+"\\}","g"),f[c])}}try{var y=t.parseValue(v,"string");t.validateValue(y);if(l.length>u){l.splice(u,1,y)}else{l.push(y)}u++}catch(e){D.error("Paste handling","the pasted value '"+v+"' could not be handled! "+e.message)}}}if(s>=0&&l.length>s){l.splice(s,l.length-s)}if(a.setDOMValue){a.setDOMValue("")}r.checkConditionsEmpty(l);this.setProperty("conditions",l,true);this.fireConditionProcessed()}.bind(this),0)}},cleanUp:function(){var e=this.byId("conditions");var t=e.getContent();for(var i=0;i<t.length;i++){var a=t[i];if(a instanceof h&&a.hasOwnProperty("_iValueIndex")){if(a._bParseError){a.setValue()}}}this.setProperty("inputOK",true,true)}});function E(e){if(e.name==="value"){B.call(this,e.object,e.current,e.old)}if(e.name==="formatOptions"){var t=this.getConditions();var i=e.current&&e.current.operators;var n=e.old&&e.old.operators;var r=false;if(!a(i,n)){r=true;X.call(this)}var s=e.current&&e.current.valueType&&e.current.valueType.getMetadata().getName();var o=e.old&&e.old.valueType&&e.old.valueType.getMetadata().getName();if(s!==o&&t.length>0){if(!r){X.call(this)}this._bUpdateType=true;Y.call(this);this._bUpdateType=false;H.call(this,t,true,true)}}if(e.name==="conditions"){if(this._sConditionsTimer){clearTimeout(this._sConditionsTimer);this._sConditionsTimer=null}this._sConditionsTimer=setTimeout(function(){this._sConditionsTimer=null;this.updateDefineConditions();Y.call(this)}.bind(this),0)}}function B(e,t,i){e._sOldKey=i;var a=0;if(t&&i){var n=r.getOperator(t);var s=r.getOperator(i);var o=e.getParent();var l;var d;a=o.indexOfContent(e);l=o.getContent()[a+2];if(l&&l.hasOwnProperty("_iValueIndex")&&l._iValueIndex===0){if(l instanceof h&&!l._bParseError){l.setValueState(N.None);l.setValueStateText()}d=o.getContent()[a+3];if(d&&d.hasOwnProperty("_iValueIndex")&&d._iValueIndex===1){if(d instanceof h&&!d._bParseError){d.setValueState(N.None);d.setValueStateText()}}else{d=undefined}}else{l=undefined}if(n.createControl||s.createControl){if(l){l.destroy()}if(d){d.destroy()}}else{if(l&&n.valueTypes[0]!==s.valueTypes[0]){l.unbindProperty("value")}if(d&&n.valueTypes[1]!==s.valueTypes[1]&&s.valueTypes[1]){d.unbindProperty("value")}}}if(!t){var u=e.getBindingContext("$this").getObject();if(u){var p=this.getConditions();a=r.indexOfCondition(u,p);if(a>=0){u=p[a];u.operator=i;this.setProperty("conditions",p,true)}}}var v=this.oOperatorModel.getData();var f;for(var g=0;g<v.length;g++){var c=v[g];if(c.key===t){f=c.text;break}}e.setAdditionalValue(f);this.onChange()}function F(e,t,i,a){var n=r.getOperator(e.operator);if(!n||!n.valueTypes[t]){return null}var s=j.call(this,n.name,t);var o=this._oManagedObjectModel.getContext(a.getPath()+"values/"+t+"/");var l;if(n.createControl){l=n.createControl(s,"$this>",t,i)}if(!l){l=new h(i,{delegate:q.call(this),value:{path:"$this>",type:s,mode:"TwoWay",targetType:"raw"},editMode:{parts:[{path:"$condition>operator"},{path:"$condition>invalid"}],formatter:te},multipleLines:false,width:"100%"})}if(l.getMetadata().hasProperty("placeholder")){if(t===0){l.bindProperty("placeholder",{path:"$condition>operator",formatter:re})}else{l.bindProperty("placeholder",{path:"$condition>operator",formatter:se})}}l._iValueIndex=t;if(l.attachChange){l.attachChange(this.onChange.bind(this))}l.onpaste=this.onPaste.bind(this);l.setLayoutData(new I({span:{parts:[{path:"$condition>"},{path:"$this>/formatOptions"}],formatter:ne.bind(this)}}));l.setBindingContext(o,"$this");l.setBindingContext(a,"$condition");l.setFieldGroupIds([a.getPath()]);return l}function j(e,t){var i=G.call(this);var a=r.getOperator(e);if(a.valueTypes[t]&&[s.ValueType.Self,s.ValueType.Static].indexOf(a.valueTypes[t])===-1){i=a._createLocalType(a.valueTypes[t],i)}var n=false;if(a.valueTypes[t]===s.ValueType.Static){n=true;i=K.call(this)}var o=n?u.String:W.call(this,i);var l;switch(o){case u.Numeric:var d=i.getFormatOptions();if(d&&d.hasOwnProperty("emptyString")&&d.emptyString===null){l=i}else{l=k(i,{emptyString:null})}break;case u.Date:case u.Time:case u.DateTime:l=i;break;default:if(i.getConstraints()&&i.getConstraints().hasOwnProperty("nullable")&&i.getConstraints().nullable===false){l=k(i);if(i._bCreatedByOperator){l=a._createLocalType(a.valueTypes[t],i)}}else{l=i}break}return l}function k(e,t,a){var n=sap.ui.require(e.getMetadata().getName().replace(/\./g,"/"));var r=i(e.getFormatOptions(),t||{});var s=i(e.getConstraints(),a||{});if(s.hasOwnProperty("nullable")&&s.nullable===false){s.nullable=true}return new n(r,s)}function R(){var e=A.call(this);var t;var i=this.getFormatOptions().defaultOperatorName;if(i){t=r.getOperator(i)}else{var a=G.call(this);var n=W.call(this,a);t=r.getDefaultOperator(n)}if(t&&e.indexOf(t.name)<0){for(var s=0;s<e.length;s++){t=r.getOperator(e[s]);if(!t||t.exclude||!t.hasRequiredValues()){t=undefined}else{break}}}if(!t){t=r.getOperator(e[0])}return t}function A(){var e=this.getFormatOptions();var t=e&&e.operators;if(!t||t.length===0){t=r.getOperatorsForType(u.String)}return t}function U(){var e;var t=A.call(this);for(var i=0;i<t.length;i++){var a=t[i];var n=r.getOperator(a);if(!e){e=n.group.id}else if(e!==n.group.id){return true}}return false}function X(){if(!this.oOperatorModel){return}var e=G.call(this);var t=A.call(this);var i=[];var a=U.call(this);var n=this.getId()+"--rowSelect-help";var s=sap.ui.getCore().byId(n);var o;if(a){o=new f({key:"{om>key}",text:"{om>text}",additionalText:"{om>additionalText}",groupKey:"{om>groupId}",groupText:"{om>groupText}"})}else{o=new b({key:"{om>key}",text:"{om>text}",additionalText:"{om>additionalText}"})}s.bindAggregation("items",{path:"om>/",templateShareable:false,template:o});for(var l=0;l<t.length;l++){var d=t[l];var u=r.getOperator(d);if(!u||u.showInSuggest!==undefined&&u.showInSuggest==false){continue}var p=u.textKey||"operators."+u.name+".longText";var h=u.getTypeText(p,W.call(this,e).toLowerCase());if(h===p){h=u.longText}var v=u.additionalInfo;if(v===undefined){if(v!==""&&u.formatRange){v=u.formatRange(u._getRange(undefined,e),e)}else if(!a){v=u.group.text}}i.push({key:u.name,text:h,additionalText:v,groupId:u.group.id,groupText:u.group.text})}this.oOperatorModel.setData(i)}function G(){var e=this.getFormatOptions();var t=e&&e.valueType;if(!t){t=K.call(this)}return t}function K(){if(!this._oDefaultType){this._oDefaultType=new m}return this._oDefaultType}function W(e){var t=e.getMetadata().getName();var i=e.getFormatOptions();var a=e.getConstraints();var n=this.getFormatOptions().delegate;var r=this.getFormatOptions().payload;var s=n?n.getTypeUtil(r).getBaseType(t,i,a):u.String;if(s===u.Unit){s=u.Numeric}return s}function q(){var e=this.getFormatOptions();var t=e.delegateName||"sap/ui/mdc/field/FieldBaseDelegate";var i=e.payload;return{name:t,payload:i}}function H(e,t,i){var a=G.call(this);var n=[];var o=0;for(o=0;o<e.length;o++){var l=e[o];var d=r.getOperator(l.operator);if(d&&d.valueTypes[0]===s.ValueType.Static&&(l.values.length===0||i)){if(d.getStaticText){var u=d.getStaticText(a,W.call(this,a));if(l.values.length>0){l.values[0]=u}else{l.values.push(u)}n.push(o)}}}if(n.length>0){this.setProperty("conditions",e,true)}}function z(){var e=new O(this.getId()+"--ivtOperator",{text:"{$i18n>valuehelp.DEFINECONDITIONS_OPERATORLABEL}"});var t=new S({headerText:"{$this>/label}",expanded:true,height:"100%",backgroundDesign:"Transparent"}).addStyleClass("sapMdcDefineconditionPanel");t.addDependent(new v(this.getId()+"--rowSelect-help",{filterList:false,useFirstMatch:true}));var i=new T(this.getId()+"--conditions",{width:"100%",hSpacing:0,vSpacing:0,containerQuery:true}).addStyleClass("sapUiMdcDefineConditionGrid");ee.call(this,undefined,i,0,null,0);t.addContent(e);t.addContent(i);this._oInvisibleAddOperatorButtonText=new O({text:P.getText("valuehelp.DEFINECONDITIONS_ADDCONDITION_DESCRIPTION")});t.addContent(this._oInvisibleAddOperatorButtonText);var a=new _(this.getId()+"--addBtn",{press:this.addCondition.bind(this),type:w.Default,text:"{$i18n>valuehelp.DEFINECONDITIONS_ADDCONDITION}",layoutData:new I({span:"XL2 L3 M3 S3",indent:"XL9 L8 M8 S7",linebreak:true,visibleS:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:J.bind(this)},visibleM:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:J.bind(this)},visibleL:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:J.bind(this)},visibleXL:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:J.bind(this)}}),ariaDescribedBy:this._oInvisibleAddOperatorButtonText});i.addContent(a);i.attachValidateFieldGroup(le,this);this.setAggregation("_content",t)}function J(e,t){var i=t.hasOwnProperty("maxConditions")?t.maxConditions:-1;return i===-1||e.length<i}function Q(e,t){var i=t.hasOwnProperty("maxConditions")?t.maxConditions:-1;return i!==1}function Y(){var e=this.getConditions();var t=this.byId("conditions");var i;var a=-1;var n=0;for(var s=0;s<e.length;s++){var o=e[s];var l=r.getOperator(o.operator);if(o.validated!==p.Validated||l.exclude){var d=this._oManagedObjectModel.getContext("/conditions/"+s+"/");a++;if(!this.oOperatorModel){this.oOperatorModel=new c;this.setModel(this.oOperatorModel,"om");X.call(this)}i=t.getContent();if(i[n]&&i[n].isA("sap.ui.mdc.Field")){n=oe.call(this,o,t,n,d,a)}else{n=ee.call(this,o,t,n,d,a)}}}i=t.getContent();while(i[n]&&i[n]!==this.byId("addBtn")){i[n].destroy();n++}if(this._bFocusLastCondition){i[0].focus();this._bFocusLastCondition=false}if(this._bFocusLastRemoveBtn){n=Z.call(this,["-removeBtnLarge","-removeBtnSmall"]);i[n].focus();this._bFocusLastRemoveBtn=false}}function Z(e){var t=this.byId("conditions");var i=t.getContent();var a=i.length-1;if(!Array.isArray(e)){e=[e]}var n=0;var r=e[n];while(a>=0&&r!==undefined){var s=i[a];if(s.getId().endsWith(r)){var o=V(s.getDomRef());if(o.is(":visible")){return a}else{n++;r=e[n]}}a--}return 0}function ee(e,t,i,a,n){var r=this.getId()+"--"+n;if(!this._oOperatorFieldType){this._oOperatorFieldType=new m({},{minLength:1})}var s=new h(r+"-operator",{value:{path:"$this>operator",type:this._oOperatorFieldType},width:"100%",display:d.Description,editMode:l.Editable,multipleLines:false,fieldHelp:this.getId()+"--rowSelect-help",change:this.onSelectChange.bind(this),ariaLabelledBy:this.getId()+"--ivtOperator"}).setLayoutData(new I({span:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:ae.bind(this)},linebreak:true})).setBindingContext(a,"$this");if(a){s.setFieldGroupIds([a.getPath()])}this._oObserver.observe(s,{properties:["value"]});t.insertContent(s,i);i++;var o=new _(r+"--removeBtnSmall",{press:this.removeCondition.bind(this),type:w.Transparent,icon:"sap-icon://decline",tooltip:"{$i18n>valuehelp.DEFINECONDITIONS_REMOVECONDITION}"}).setLayoutData(new I({span:"XL1 L1 M1 S2",indent:{path:"$this>operator",formatter:ie},visibleS:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Q.bind(this)},visibleM:false,visibleL:false,visibleXL:false})).setBindingContext(a,"$this");if(a){o.setFieldGroupIds([a.getPath()])}t.insertContent(o,i);i++;if(e){for(var u=0;u<e.values.length;u++){var p=F.call(this,e,u,r+"-values"+u,a);if(p){t.insertContent(p,i);i++}}}var v=new _(r+"--removeBtnLarge",{press:this.removeCondition.bind(this),type:w.Transparent,icon:"sap-icon://decline",tooltip:"{$i18n>valuehelp.DEFINECONDITIONS_REMOVECONDITION}"}).setLayoutData(new I({span:"XL1 L1 M1 S1",indent:{path:"$this>operator",formatter:ie},visibleS:false,visibleM:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Q.bind(this)},visibleL:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Q.bind(this)},visibleXL:{parts:[{path:"$this>/conditions"},{path:"$this>/formatOptions"}],formatter:Q.bind(this)}})).setBindingContext(a,"$this");t.insertContent(v,i);i++;return i}function te(e,t){if(!e){return l.Display}else if(t){return l.ReadOnly}var i=r.getOperator(e);var a=false;if(i&&i.valueTypes[0]===s.ValueType.Static){a=true}return a?l.Display:l.Editable}function ie(e){var t=e&&r.getOperator(e);if(!t||!t.valueTypes[0]||t.valueTypes[0]===s.ValueType.Static&&!t.getStaticText){return"XL8 L8 M8 S0"}else{return""}}function ae(e,t){var i=t.hasOwnProperty("maxConditions")?t.maxConditions:-1;var a="XL3 L3 M3 ";if(i===1){a+="S12"}else{a+="S10"}return a}function ne(e,t){var i=t.hasOwnProperty("maxConditions")?t.maxConditions:-1;var a=e&&r.getOperator(e.operator);var n="";if(a&&a.valueTypes[1]){n="XL4 L4 M4 "}else{n="XL8 L8 M8 "}if(i===1){n+="S12"}else{n+="S10"}return n}function re(e){var t=e&&r.getOperator(e);if(t&&t.aLabels){return t.aLabels[0]}else if(t&&t.valueTypes[1]){return P.getText("valuehelp.DEFINECONDITIONS_FROM")}else{return P.getText("valuehelp.DEFINECONDITIONS_VALUE")}}function se(e){var t=e&&r.getOperator(e);if(t&&t.aLabels){return t.aLabels[1]}else if(t&&t.valueTypes[1]){return P.getText("valuehelp.DEFINECONDITIONS_TO")}}function oe(e,t,i,a,n){var r=this.getId()+"--"+n;var s=t.getContent();var o;var l=s[i];l.setBindingContext(a,"$this");if(a){l.setFieldGroupIds([a.getPath()])}if(l.getValueState()===N.Error&&!e.invalid){l.setValue(l.getValue())}i++;var d=s[i];d.setBindingContext(a,"$this");if(a){d.setFieldGroupIds([a.getPath()])}i++;var u;var p=s[i];var h;if(p.hasOwnProperty("_iValueIndex")&&p._iValueIndex===0){if(e.values.length>0){u=this._oManagedObjectModel.getContext(a.getPath()+"values/0/");p.setBindingContext(u,"$this");p.setBindingContext(a,"$condition");if(p.getMetadata().hasProperty("value")&&(this._bUpdateType||!p.getBindingInfo("value"))){o=j.call(this,e.operator,0);p.bindProperty("value",{path:"$this>",type:o})}i++;h=s[i];if(h.hasOwnProperty("_iValueIndex")&&h._iValueIndex===1){if(e.values.length>1){u=this._oManagedObjectModel.getContext(a.getPath()+"values/1/");h.setBindingContext(u,"$this");if(h.getMetadata().hasProperty("value")&&(this._bUpdateType||!h.getBindingInfo("value"))){o=j.call(this,e.operator,1);h.bindProperty("value",{path:"$this>",type:o})}i++}else{h.destroy()}}else if(e.values.length>1){h=F.call(this,e,1,r+"-values1",a);if(h){t.insertContent(h,i);i++}}}else{p.destroy();p=undefined;h=s[i+1];if(h&&h.hasOwnProperty("_iValueIndex")&&h._iValueIndex===1){h.destroy()}}}else if(e.values.length>0){for(var v=0;v<e.values.length;v++){var f=F.call(this,e,v,r+"-values"+v,a);if(f){t.insertContent(f,i);i++}}}s=t.getContent();var g=s[i];g.setBindingContext(a,"$this");i++;return i}function le(e){var t=e.getSource();while(!(t.getParent()instanceof T)){t=t.getParent()}de.call(this,t)}function de(e){var t=e.getParent();var i=t.indexOfContent(e);var a;if(e.getId().endsWith("-operator")){a=e.getBindingContext("$this");i=i+2;e=t.getContent()[i]}else if(e.getId().endsWith("-removeBtnSmall")){a=e.getBindingContext("$this");i=i+1;e=t.getContent()[i]}else{a=e.getBindingContext("$condition")}var n;var o=a.getObject();var l=r.getOperator(o.operator);var d=!!o.invalid;if(!d&&l.valueTypes.length>0&&l.valueTypes[0]!==s.ValueType.Static){if(l.valueTypes.length>1&&l.valueTypes[1]){if(e.hasOwnProperty("_iValueIndex")&&e._iValueIndex===0){n=t.getContent()[i+1]}else if(e.hasOwnProperty("_iValueIndex")&&e._iValueIndex===1){n=t.getContent()[i-1]}}if(e.getMetadata().getAllProperties().valueState&&!e._bParseError&&(!n||!n._bParseError)){var u=e.getBinding("value").getType();try{l.validate(o.values,u);e.setValueState(N.None);e.setValueStateText();if(n&&n.getMetadata().getAllProperties().valueState){n.setValueState(N.None);n.setValueStateText()}}catch(t){d=true;e.setValueState(N.Error);e.setValueStateText(t.message);if(n&&n.getMetadata().getAllProperties().valueState){n.setValueState(N.Error);n.setValueStateText(t.message)}}}}ue.call(this,d);this.fireConditionProcessed()}function ue(e){var t=0;if(e!==true){var i=this.getConditions();for(t=0;t<i.length;t++){if(i[t].invalid){e=true;break}}}if(e!==true){var a=this.byId("conditions");var n=a.getContent();e=false;for(t=0;t<n.length;t++){var r=n[t];if(r.hasOwnProperty("_iValueIndex")&&r.getValueState&&r.getValueState()===N.Error){e=true;break}}}this.setProperty("inputOK",!e,true)}return L});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/DynamicDateRangeConditionsType",["sap/ui/mdc/field/ConditionsType","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/enum/BaseType","sap/ui/mdc/util/DateUtil","sap/ui/model/SimpleType","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/m/DynamicDate","sap/m/library"],function(e,t,a,r,i,o,n,s,l,p,u,d,v){"use strict";var c=e.extend("sap.ui.mdc.field.DynamicDateRangeConditionsType",{constructor:function(e,t){s.apply(this,arguments);this.sName="ConditionsDateRange";this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")}});c.prototype.destroy=function(){s.prototype.destroy.apply(this,arguments);this._bDestroyed=true};c.prototype.formatValue=function(e,r){if(e==undefined||e==null||this._bDestroyed){return null}if(!Array.isArray(e)){throw new l("No valid conditions provided")}var i=g.call(this);var o;if(i!==1){throw new l("MaxConditions must be 1")}if(e.length===1){var n=e[0];var s=t.getOperator(n.operator);if(!n.operator||!s){throw new l("No valid condition provided, Operator wrong.")}var p=[];var u=O.call(this);var d=t.getDynamicDateOptionForOperator(s,v.StandardDynamicDateRangeKeys,u);for(var c=0;c<s.valueTypes.length;c++){if(d&&s.valueTypes[c]===a.ValueType.Self){p.push(m.call(this,n.values[c]))}else if(s.valueTypes[c]&&s.valueTypes[c]!==a.ValueType.Static){p.push(n.values[c])}}if(!d){d=t.getCustomDynamicDateOptionForOperator(s,u)}var h=y.call(this,u);o=h.formatValue({operator:d,values:p},r)}return o};function y(e){if(!this._oDynamicDateType){var t={date:{source:{pattern:"timestamp"}},int:{}};if(e===o.DateTime){t.datetime={source:{pattern:"timestamp"}}}this._oDynamicDateType=new d(t)}return this._oDynamicDateType}function m(e){var t=f.call(this);var a=O.call(this);var r=t.formatValue(e,"string");var i;var n=0;var s=0;var l=0;var p=0;if(a===o.DateTime){i=r.split("T");r=i[0];var u=i[1];i=u.split(":");n=parseInt(i[0]);s=parseInt(i[1]);l=parseInt(i[2])}i=r.split("-");var d=parseInt(i[0]);var v=parseInt(i[1])-1;var c=parseInt(i[2]);var y=new Date(d,v,c,n,s,l,p).getTime();return y}function h(e){var t=f.call(this);var a=O.call(this);var r=new Date(e);var i=r.getFullYear();var n=r.getMonth()+1;var s=r.getDate();var l=i.toString()+"-"+(n<10?"0":"")+n.toString()+"-"+(s<10?"0":"")+s.toString();if(a===o.DateTime){var p=r.getHours();var u=r.getMinutes();var d=r.getSeconds();var v=0;l=l+"T"+(p<10?"0":"")+p.toString()+":"+(u<10?"0":"")+u.toString()+":"+(d<10?"0":"")+d.toString()+":"+(v<100?"0":"")+(v<10?"0":"")+v.toString()}var c=t.parseValue(l,"string");return c}function f(){if(!this._oInternalType){var e=T.call(this);var t=O.call(this);var a;if(t===o.DateTime){a="yyyy-MM-dd'T'HH:mm:ss:SSS"}else{a="yyyy-MM-dd"}this._oInternalType=n.createInternalType(e,a)}return this._oInternalType}c.prototype.parseValue=function(e,o){if(this._bDestroyed){return null}if(g.call(this)!==1){throw new p("Only one condition supported for parsing")}var n=D.call(this);var s=[];if(e&&e.operator){if(e.operator==="PARSEERROR"){throw new p(e.values[0])}var l=e.operator;var u=t.getOperatorForDynamicDateOption(l,O.call(this));l=u.name;if(u){var d=O.call(this);var c=y.call(this,d);var m=c.parseValue(e,o);var f=[];for(var T=0;T<u.valueTypes.length;T++){if(v.StandardDynamicDateRangeKeys[e.operator]&&u.valueTypes[T]===a.ValueType.Self){f.push(h.call(this,m.values[T]))}else if(u.valueTypes[T]&&u.valueTypes[T]!==a.ValueType.Static){f.push(m.values[T])}}var w=r.createCondition(u.name,f,undefined,undefined,i.NotValidated);t.updateConditionValues(w);t.checkConditionsEmpty(w,n);s.push(w)}}return s};c.prototype.validateValue=function(e){if(e===undefined||e===null||this._bDestroyed){return}if(!Array.isArray(e)){throw new u("No valid conditions provided")}var a=T.call(this);var r=D.call(this);for(var i=0;i<e.length;i++){var o=e[i];if(typeof o!=="object"||!o.operator||!o.values||!Array.isArray(o.values)){throw new u(this._oResourceBundle.getText("field.VALUE_NOT_VALID"))}var n=t.getOperator(o.operator);if(!n||r.indexOf(n.name)===-1){throw new u("No valid condition provided, Operator wrong.")}n.validate(o.values,a)}};function g(){var e=1;if(this.oFormatOptions.hasOwnProperty("maxConditions")){e=this.oFormatOptions.maxConditions}return e}function T(){var e=this.oFormatOptions.valueType;if(!e){throw new Error("Type missing")}return e}function D(){var e=this.oFormatOptions.operators;if(!e||e.length===0){e=t.getOperatorsForType(O.call(this))}return e}function O(){var e=T.call(this);var t=e.getMetadata().getName();var a=e.getFormatOptions();var r=e.getConstraints();var i=this.oFormatOptions.delegate;var n=this.oFormatOptions.payload;var s=i?i.getTypeUtil(n).getBaseType(t,a,r):o.Date;return s}return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldBase",["sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/mdc/enum/EditMode","sap/ui/mdc/enum/FieldDisplay","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/field/FieldBaseRenderer","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Condition","sap/ui/mdc/field/ConditionType","sap/ui/mdc/field/ConditionsType","sap/ui/mdc/enum/BaseType","sap/ui/mdc/field/content/ContentFactory","sap/ui/mdc/Control","sap/ui/core/library","sap/ui/core/LabelEnablement","sap/ui/core/message/MessageMixin","sap/base/util/deepEqual","sap/base/util/merge","sap/base/Log","sap/ui/dom/containsOrEquals","sap/ui/model/BindingMode","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/base/ManagedObjectModel","sap/ui/base/ManagedObjectObserver","sap/ui/base/SyncPromise","sap/base/util/restricted/_debounce","sap/ui/events/KeyCodes"],function(e,t,i,a,n,o,s,r,l,h,d,u,g,p,c,f,y,v,C,_,m,b,F,P,D,T,E,V,M){"use strict";var I=p.ValueState;var O=p.TextAlign;var A=p.TextDirection;var H=g.extend("sap.ui.mdc.field.FieldBase",{metadata:{interfaces:["sap.ui.core.IFormContent","sap.ui.core.ISemanticFormContent"],designtime:"sap/ui/mdc/designtime/field/FieldBase.designtime",library:"sap.ui.mdc",properties:{dataType:{type:"string",group:"Data",defaultValue:"sap.ui.model.type.String"},dataTypeConstraints:{type:"object",group:"Data",defaultValue:null},dataTypeFormatOptions:{type:"object",group:"Data",defaultValue:null},editMode:{type:"sap.ui.mdc.enum.EditMode",group:"Data",defaultValue:i.Editable},required:{type:"boolean",group:"Data",defaultValue:false},display:{type:"sap.ui.mdc.enum.FieldDisplay",defaultValue:a.Value},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:O.Initial},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:A.Inherit},placeholder:{type:"string",group:"Misc",defaultValue:""},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:I.None},valueStateText:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},multipleLines:{type:"boolean",group:"Appearance",defaultValue:false},maxConditions:{type:"int",group:"Behavior",defaultValue:-1},conditions:{type:"object[]",group:"Data",defaultValue:[],byValue:true},label:{type:"string",group:"Misc",defaultValue:""},delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/field/FieldBaseDelegate",payload:{}}},showEmptyIndicator:{type:"boolean",group:"Appearance",defaultValue:false},_fieldHelpEnabled:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"},_ariaAttributes:{type:"object",defaultValue:{},byValue:true,visibility:"hidden"}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false},contentEdit:{type:"sap.ui.core.Control",multiple:false},contentDisplay:{type:"sap.ui.core.Control",multiple:false},_content:{type:"sap.ui.core.Control",multiple:true,visibility:"hidden"},fieldInfo:{type:"sap.ui.mdc.field.FieldInfoBase",multiple:false}},associations:{fieldHelp:{type:"sap.ui.mdc.ValueHelp",multiple:false},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{liveChange:{parameters:{value:{type:"string"},escPressed:{type:"boolean"},previousValue:{type:"string"}}},press:{},submit:{parameters:{promise:{type:"Promise"}}}},publicMethods:[],defaultAggregation:"content"},renderer:o,_oManagedObjectModel:null});f.call(H.prototype);var B={onsapprevious:te,onsapnext:te,onsapup:te,onsapdown:te,onsapbackspace:te};var x={onsapenter:N};var S;H._init=function(){if(S&&S.bool&&S.bool.control){S.bool.control.destroy()}if(S&&S.defineConditions&&S.defineConditions.control){S.defineConditions.control.destroy()}S={bool:{name:"sap/ui/mdc/field/BoolFieldHelp",id:"BoolDefaultHelp",getDelegate:"getDefaultFieldHelpBaseDelegate",properties:{},control:undefined},defineConditions:{name:"sap/ui/mdc/field/FieldValueHelp",id:"Field-DefineConditions-Help",getDelegate:"getDefaultFieldValueHelpDelegate",properties:{showConditionPanel:true},control:undefined}}};H._init();H.prototype.init=function(){g.prototype.init.apply(this,arguments);this._oObserver=new T(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["display","editMode","dataType","dataTypeFormatOptions","dataTypeConstraints","multipleLines","maxConditions","conditions","delegate"],aggregations:["fieldInfo","content","contentEdit","contentDisplay"],associations:["fieldHelp","ariaLabelledBy"]});this.attachEvent("modelContextChange",this._handleModelContextChange,this);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._aAsyncChanges=[];this._bPreventGetDescription=false;this._oContentFactory=new u(this.getId()+"-contentFactory",{field:this,handleTokenUpdate:_e.bind(this),handleContentChange:pe.bind(this),handleContentLiveChange:ye.bind(this),handleValueHelpRequest:De.bind(this),handleEnter:N.bind(this),handleContentPress:Ce.bind(this)});this._oCreateContentPromise=undefined;this._sFilterValue=""};H.prototype.exit=function(){var e=this.getFieldInfo();if(e){e.detachEvent("dataUpdate",xe,this)}var t=this.getContent();if(t){K.call(this,t)}var i=this.getContentEdit();if(i){K.call(this,i)}var a=this.getContentDisplay();if(a){K.call(this,a)}if(this._oManagedObjectModel){this._oManagedObjectModel.destroy();delete this._oManagedObjectModel}this._oObserver.disconnect();this._oObserver=undefined;this._oCreateContentPromise=undefined;var n=Fe.call(this);if(n){n.detachEvent("dataUpdate",Ie,this);if(this._bConnected){Oe.call(this);n.connect()}}if(this._oContentFactory){this._oContentFactory.destroy();this._oContentFactory=undefined}ve.call(this);delete this._fnLiveChangeTimer};H.prototype.applySettings=function(){g.prototype.applySettings.apply(this,arguments);if(!this.bDelegateInitialized&&!this.bDelegateLoading){this.initControlDelegate()}this._triggerCheckCreateInternalContent();this._bSettingsApplied=true;return this};H.prototype.setProperty=function(e,t,a){if(e==="editMode"){var n=this.getEditMode();if(n!==i.Display&&n!==i.EditableDisplay&&t!==i.Display&&t!==i.EditableDisplay){a=true}}else if(e!=="width"&&e!=="multipleLines"&&e!=="showEmptyIndicator"){a=true}return g.prototype.setProperty.apply(this,[e,t,a])};H.prototype.onBeforeRendering=function(){X.call(this)};H.prototype.onAfterRendering=function(){};H.prototype.onfocusin=function(e){Ae.call(this)};H.prototype.onsapfocusleave=function(e){ve.call(this)};function w(e){var t=e.indexOf(this.getId());if(t>-1){if(this._bPendingChange){var i=document.activeElement;var a=Fe.call(this);if(!(i&&a&&_(a.getDomRef(),i))){var n=we.call(this);if(n){L.call(this,undefined,undefined,undefined,n)}else{L.call(this,this.getConditions(),!this._bParseError)}}}if(e.length>1){e.splice(t,1);this.fireValidateFieldGroup({fieldGroupIds:e})}}}H.prototype.onsapup=function(e){if(this.getEditMode()===i.Editable){var t=Fe.call(this);var a=e.srcControl;if(t&&(!t.valueHelpEnabled||t.valueHelpEnabled()||t.isOpen())&&(!this._oContentFactory.isMeasure()||a.getShowValueHelp())){e.preventDefault();e.stopPropagation();t.setFilterValue(this._sFilterValue);t.navigate(-1)}}};H.prototype.onsapdown=function(e){if(this.getEditMode()===i.Editable){var t=Fe.call(this);var a=e.srcControl;if(t&&(!t.valueHelpEnabled||t.valueHelpEnabled()||t.isOpen())&&(!this._oContentFactory.isMeasure()||a.getShowValueHelp())){e.preventDefault();e.stopPropagation();t.setFilterValue(this._sFilterValue);t.navigate(1)}}};H.prototype.onsapenter=function(e){var t=Fe.call(this);if(t&&t.isOpen(true)){t.close()}this._sFilterValue=""};H.prototype.onsapescape=function(e){this.onsapenter(e)};H.prototype.ontap=function(e){var t=Fe.call(this);if(t){if(t.shouldOpenOnClick()&&!t.isOpen(true)){t.open(true)}var i=e.srcControl;if(t.isOpen(true)&&(!this._oContentFactory.isMeasure()||i.getShowValueHelp&&i.getShowValueHelp())){i.addStyleClass("sapMFocus");t.removeFocus()}}};H.prototype.clone=function(e,t){this.detachEvent("modelContextChange",this._handleModelContextChange,this);var i=this.getContent();if(i){K.call(this,i)}var a=this.getContentEdit();if(a){K.call(this,a)}var n=this.getContentDisplay();if(n){K.call(this,n)}var o=this.getFieldInfo();if(o){o.detachEvent("dataUpdate",xe,this)}var s=g.prototype.clone.apply(this,arguments);this.attachEvent("modelContextChange",this._handleModelContextChange,this);if(i){Y.call(this,i)}if(a){Y.call(this,a)}if(n){Y.call(this,n)}if(o){o.attachEvent("dataUpdate",xe,this)}if(this._bTriggerable){s._bTriggerable=this._bTriggerable}return s};H.prototype.getFieldPath=function(){var e=this.getBindingPath("conditions");if(e&&e.startsWith("/conditions/")){return e.slice(12)}else{return""}};function U(e,t,i,a){if(this._getContent().length>1){this._bPendingChange=true}else{L.call(this,e,t,i,a)}}function L(e,t,i,a){if(!a){if(t){a=Promise.resolve(this._getResultForPromise(e))}else{a=Promise.reject(i)}}this._fireChange(e,t,i,a);this._bPendingChange=false}H.prototype._fireChange=function(e,t,i,a){};function N(e){var t=this.getEditMode();if(u._getEditable(t)&&(this.hasListeners("submit")||this._bPendingChange)){var i=we.call(this);var a=false;if(i){a=true}else if(this._bParseError){i=Promise.reject()}else{i=Promise.resolve(this._getResultForPromise(this.getConditions()))}if(this._bPendingChange){if(a){L.call(this,undefined,undefined,undefined,i)}else{L.call(this,this.getConditions(),!this._bParseError,undefined,i)}}this.fireSubmit({promise:i})}}H.prototype._initDataType=function(){if(this._oContentFactory.getDataType()){this._oContentFactory.getDataType().destroy();this._oContentFactory.setDataType(undefined)}if(this._oContentFactory.getDateOriginalType()){if(this._oContentFactory.getDateOriginalType()._bCreatedByField){this._oContentFactory.getDateOriginalType().destroy()}this._oContentFactory.setDateOriginalType(undefined)}if(this._oContentFactory.getUnitOriginalType()){if(this._oContentFactory.getUnitOriginalType()._bCreatedByField){this._oContentFactory.getUnitOriginalType().destroy()}this._oContentFactory.getUnitOriginalType(undefined)}};function R(){if(this._oContentFactory.getDataType()&&typeof this._oContentFactory.getDataType()==="object"){return this._oContentFactory.getDataType().getMetadata().getName()}else if(this.bDelegateInitialized){return this.getControlDelegate().getDataTypeClass(this.getPayload(),this.getDataType())}else{return this.getDataType()}}function k(){var e=this._oContentFactory.getDataType();if(e&&typeof e==="object"&&e.getConstraints()){return e.getConstraints()}else{return this.getDataTypeConstraints()}}function G(){var e=this._oContentFactory.getDataType();if(e&&typeof e==="object"&&e.getFormatOptions()){return e.getFormatOptions()}else{return this.getDataTypeFormatOptions()}}H.prototype.getBaseType=function(){var e=R.call(this);var t=k.call(this);var i=G.call(this);var a=this.getTypeUtil().getBaseType(e,i,t);return a};function j(e,t){var i=Fe.call(this);if(i&&this._bConnected){Pe.call(this,e,i)}}H.prototype._getContent=function(){var e=this.getContent();if(!e){if(this.getEditMode()===i.Display){e=this.getContentDisplay()}else{e=this.getContentEdit()}}if(e){return[e]}else{return this.getAggregation("_content",[])}};H.prototype._handleModelContextChange=function(e){};function q(e){this.setValueState(I.Error);this.setValueStateText(e)}H.prototype._removeUIMessage=function(){this.setValueState(I.None);this.setValueStateText()};H.prototype._observeChanges=function(e){if(e.name==="dataType"){if(this._oContentFactory.getDataType()){var t=function(t){var i=this.getTypeUtil().getDataTypeClass(e.current);if(!(this._oContentFactory.getDataType()instanceof i)){this._initDataType();this.destroyAggregation("_content");this._oContentFactory.updateConditionType()}}.bind(this);if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){t.call(this,e.current)}.bind(this));return}t.call(this,e.current)}}if(e.name==="dataTypeFormatOptions"||e.name==="dataTypeConstraints"){if(this._oContentFactory.getDataType()){this._initDataType();this.destroyAggregation("_content");this._oContentFactory.updateConditionType()}}if(e.name==="maxConditions"){this._updateInternalContent()}if(e.name==="conditions"){this._bParseError=false;j.call(this,e.current,e.old);var a=false;var n=0;for(n=0;n<this._aAsyncChanges.length;n++){var o=this._aAsyncChanges[n];if(o.waitForUpdate&&y(o.result,e.current)){ce.call(this,o);a=true;break}}if(a){this._aAsyncChanges.splice(n,1)}if((e.current.length===0||e.old.length===0)&&this.getShowEmptyIndicator()&&this.getEditMode()===i.Display&&!this.getContent()&&!this.getContentDisplay()){this.invalidate()}}if(e.name==="display"){this._destroyInternalContent();this._oContentFactory.updateConditionType()}if(e.name==="fieldHelp"&&e.ids){me.call(this,e.ids,e.mutation);this._oContentFactory.updateConditionType()}if(e.name==="fieldInfo"&&e.child){Be.call(this,e.child,e.mutation)}if(e.name==="content"&&e.child){Q.call(this,e.child,e.mutation,e.name)}if(e.name==="contentEdit"&&e.child){Q.call(this,e.child,e.mutation,e.name)}if(e.name==="contentDisplay"&&e.child){Q.call(this,e.child,e.mutation,e.name)}if(e.name==="delegate"&&!this.bDelegateInitialized&&!this.bDelegateLoading){this.initControlDelegate.call(this)}if(e.name==="ariaLabelledBy"&&e.ids){$.call(this,e.ids,e.mutation)}if(e.name==="editMode"){W.call(this);if(this._bSettingsApplied&&(e.old===i.Display||e.old===i.EditableDisplay||e.current===i.Display||e.current===i.EditableDisplay)){this._triggerCheckCreateInternalContent()}}};H.prototype._updateInternalContent=function(){if(this.getAggregation("_content",[]).length>0){X.call(this);this._oContentFactory.updateConditionType()}};H.prototype.getFocusDomRef=function(){var e=this._getContent();if(e.length>0){return e[0].getFocusDomRef()}else{return this.getDomRef()}};H.prototype.getIdForLabel=function(){var e;var t=this._getContent();if(t.length>0){e=t[0].getIdForLabel()}else{e=Z.call(this)}return e};H.prototype.getEditable=function(){return u._getEditable(this.getEditMode())};H.prototype.getControlForSuggestion=function(){var e=this._getContent();if(e.length>0){if(this._oContentFactory.isMeasure()){return e[1]}else{return e[0]}}else{return this}};H.prototype.getFocusElementForValueHelp=function(e){var t=this.getControlForSuggestion();var i=t&&t.getMetadata().getAllPrivateAggregations()._endIcon&&t.getAggregation("_endIcon",[]);var a;for(var n=0;n<i.length;n++){if(i[n].getVisible()){a=i[n];break}}return e||!a?t:a};H.prototype.getMaxConditionsForHelp=function(){if(this._oContentFactory.isMeasure()){return 1}else{return this.getMaxConditions()}};H.prototype.getFormFormattedValue=function(){var e=this.getConditions();var t=this.getShowEmptyIndicator()&&e.length===0&&!this.getContent()&&!this.getContentDisplay();if(t){if(!this._oResourceBundleM){this._oResourceBundleM=sap.ui.getCore().getLibraryResourceBundle("sap.m")}return this._oResourceBundleM.getText("EMPTY_INDICATOR")}else if(this._oContentFactory.isMeasure()&&this._oContentFactory.getUnitOriginalType()){var i=e.length>0?e[0].values[0]:[0,null];return this._oContentFactory.getUnitOriginalType().formatValue(i,"string")}else if(this._oContentFactory.getDateOriginalType()){var a=e.length>0?e[0].values[0]:null;return this._oContentFactory.getDateOriginalType().formatValue(a,"string")}else{var n=this._oContentFactory.getConditionsType();return n.formatValue(e)}};H.prototype.getFormValueProperty=function(){return"conditions"};H.prototype.enhanceAccessibilityState=function(e,t){var i=this.getParent();if(i&&i.enhanceAccessibilityState){i.enhanceAccessibilityState(this,t)}};H.prototype.getAccessibilityInfo=function(){var e=this._getContent();if(e.length>0&&e[0].getAccessibilityInfo){return e[0].getAccessibilityInfo()}else{return{}}};function $(e,t){var i=this.getAggregation("_content",[]);var a=this.getContent();if(a){i.push(a)}a=this.getContentDisplay();if(a){i.push(a)}a=this.getContentEdit();if(a){i.push(a)}for(var n=0;n<i.length;n++){a=i[n];if(a.getMetadata().getAllAssociations().ariaLabelledBy){if(t==="remove"){a.removeAriaLabelledBy(e)}else if(t==="insert"){a.addAriaLabelledBy(e)}}}}function z(e,t){var i={aria:{}};var a=Fe.call(this);if(a){var n=a.getAriaAttributes(this.getMaxConditionsForHelp());var o=n.roleDescription;i["role"]=n.role;if(o){i.aria["roledescription"]=o}i.aria["haspopup"]=n.ariaHasPopup;i["autocomplete"]="off";if(e){i.aria["expanded"]="true";i.aria["controls"]=n.contentId;if(t){i.aria["activedescendant"]=t}}else{i.aria["expanded"]="false"}i["valueHelpEnabled"]=n.valueHelpEnabled}this.setProperty("_ariaAttributes",i,true)}H.prototype.connectLabel=function(e){ee.call(this,e);e.bindProperty("text",{path:"$field>/label"});e.setLabelFor(this);return this};function W(){var e=c.getReferencingLabels(this);for(var t=0;t<e.length;t++){var i=sap.ui.getCore().byId(e[t]);i.invalidate()}}function Q(e,t,i){if(t==="remove"){K.call(this,e);ae.call(this,e);oe.call(this,e);if(this._oContentFactory.getContentConditionTypes()){delete this._oContentFactory.getContentConditionTypes()[i]}e.setModel(null,"$field")}else if(t==="insert"){if(!e.isA("sap.ui.core.IFormContent")){throw new Error(e+" is not a valid content! Only use valid content in "+this)}ie.call(this,e,true);Y.call(this,e);ne.call(this,e,true);if(this.getAggregation("_content",[]).length>0){this._destroyInternalContent()}if(!this._oContentFactory.getContentConditionTypes()){this._oContentFactory.setContentConditionTypes({})}if(!this._oContentFactory.getContentConditionTypes()[i]){this._oContentFactory.getContentConditionTypes()[i]={}}var a;var n;for(n in e.getMetadata().getAllProperties()){if(e.getBindingPath(n)==="/conditions"){a=e.getBindingInfo(n);if(a&&a.type&&a.type instanceof h){this._oContentFactory.getContentConditionTypes()[i].oConditionsType=a.type}this._oContentFactory.setBoundProperty(n)}if(n==="editable"&&!e.getBindingPath(n)&&e.isPropertyInitial(n)){e.bindProperty(n,{path:"$field>/editMode",formatter:u._getEditable})}if(n==="enabled"&&!e.getBindingPath(n)&&e.isPropertyInitial(n)){e.bindProperty(n,{path:"$field>/editMode",formatter:u._getEnabled})}if(n==="displayOnly"&&!e.getBindingPath(n)&&e.isPropertyInitial(n)){e.bindProperty(n,{path:"$field>/editMode",formatter:u._getDisplayOnly})}if(n==="required"&&!e.getBindingPath(n)&&e.isPropertyInitial(n)){e.bindProperty(n,{path:"$field>/required"})}if(n==="textAlign"&&!e.getBindingPath(n)&&e.isPropertyInitial(n)){e.bindProperty(n,{path:"$field>/textAlign"})}if(n==="textDirection"&&!e.getBindingPath(n)&&e.isPropertyInitial(n)){e.bindProperty(n,{path:"$field>/textDirection"})}if(n==="valueState"&&!e.getBindingPath(n)&&e.isPropertyInitial(n)){e.bindProperty(n,{path:"$field>/valueState"})}if(n==="valueStateText"&&!e.getBindingPath(n)&&e.isPropertyInitial(n)){e.bindProperty(n,{path:"$field>/valueStateText"})}if(n==="placeholder"&&!e.getBindingPath(n)&&e.isPropertyInitial(n)){e.bindProperty(n,{path:"$field>/placeholder"})}if(n==="showValueHelp"&&!e.getBindingPath(n)&&e.isPropertyInitial(n)){e.bindProperty(n,{path:"$field>/_fieldHelpEnabled"})}if(n==="valueHelpIconSrc"&&!e.getBindingPath(n)&&e.isPropertyInitial(n)){e.setValueHelpIconSrc(this._getFieldHelpIcon())}}for(var o in e.getMetadata().getAllAggregations()){if(e.getBindingPath(o)==="/conditions"){a=e.getBindingInfo(o);if(a&&a.template){for(n in a.template.getMetadata().getAllProperties()){var s=a.template.getBindingInfo(n);if(s&&s.type&&s.type instanceof l){this._oContentFactory.getContentConditionTypes()[i].oConditionType=s.type;break}}}}if(o==="tooltip"&&!e.getBindingPath(o)&&!e.getAggregation(o)){e.bindProperty(o,{path:"$field>/tooltip"})}}if(e.getMetadata().getAllAssociations().ariaLabelledBy){this._oContentFactory.setAriaLabelledBy(e)}}}function Y(e){if(e.getMetadata().getEvents().change){e.attachEvent("change",pe,this)}if(e.getMetadata().getEvents().liveChange){e.attachEvent("liveChange",ye,this)}if(e.getMetadata().getEvents().press){e.attachEvent("press",Ce,this)}if(e.getMetadata().getEvents().valueHelpRequest){e.attachEvent("valueHelpRequest",De,this)}}function K(e){if(e.getMetadata().getEvents().change){e.detachEvent("change",pe,this)}if(e.getMetadata().getEvents().liveChange){e.detachEvent("liveChange",ye,this)}if(e.getMetadata().getEvents().press){e.detachEvent("press",Ce,this)}if(e.getMetadata().getEvents().valueHelpRequest){e.detachEvent("valueHelpRequest",De,this)}}function X(){var e=function(){if(!this.bDelegateInitialized){this.awaitControlDelegate().then(function(){X.call(this)}.bind(this))}else{J.call(this)}};if(this._oCreateContentPromise){this._oCreateContentPromise.then(function(){e.call(this)}.bind(this))}else{e.call(this)}}H.prototype._checkCreateInternalContent=function(){if(this.getVisible()&&this._oContentFactory.getDataType()){X.call(this)}};H.prototype._triggerCheckCreateInternalContent=function(){if(!this._oCheckCreateInternalContentPromise){this._oCheckCreateInternalContentPromise=this.awaitControlDelegate().then(function(){delete this._oCheckCreateInternalContentPromise;this._checkCreateInternalContent()}.bind(this))}};function J(){var e=this.getEditMode();var t=this.getContent();this._oContentFactory._setUsedConditionType(t,e);be.call(this,this.getFieldHelp());z.call(this,false);if(t||this._bIsBeingDestroyed||e===i.Display&&this.getContentDisplay()||e!==i.Display&&this.getContentEdit()){this._destroyInternalContent();var a=this._getContent();if(a.length===1){ee.call(this,a[0])}return}var n=this.getMaxConditions();var o=this._getOperators();var s;var r=this.getAggregation("_content",[]);var l;var h;var d=this.getMultipleLines();var u=this._bTriggerable;var g=this._oContentFactory.getContentType(this.getBaseType(),this.getMaxConditions(),u);if(r.length>0){l=r[0];h=l.getMetadata().getName().replace(/\./g,"/")}var p=this._oContentFactory.getContentMode(g,e,n,d,o);var c=g.getControlNames(p,o[0]);s=c[0];if(s!==h){this._oContentFactory.setHideOperator(he.call(this,o));if(l){this._destroyInternalContent();if(l.isA("sap.m.DateTimeField")){this._initDataType()}this._oContentFactory.updateConditionType()}if(le.call(this,g,o,e,n)){se.call(this,g.getUseDefaultFieldHelp().name)}else if(this._sDefaultFieldHelp){delete this._sDefaultFieldHelp}var f=Z.call(this);this._oCreateContentPromise=this._oContentFactory.createContent(g,p,f);this._oCreateContentPromise.then(function(e){for(var t=0;t<e.length;t++){var i=e[t];i.attachEvent("parseError",de,this);i.attachEvent("validationError",ue,this);i.attachEvent("validationSuccess",ge,this);ie.call(this,i,g.getUseDefaultEnterHandler());ne.call(this,i,false);ee.call(this,i);if(this._bConnected&&(t===0&&!this._oContentFactory.isMeasure()||t===1&&this._oContentFactory.isMeasure())){He.call(this,i)}this.addAggregation("_content",i)}W.call(this);delete this._oCreateContentPromise}.bind(this))}}function Z(){return this.getId()+"-inner"}H.prototype._destroyInternalContent=function(){this.destroyAggregation("_content");if(this._oContentFactory.getDateOriginalType()){this._oContentFactory.setDataType(this._oContentFactory.getDateOriginalType());this._oContentFactory.setDateOriginalType(undefined)}else if(this._oContentFactory.getUnitOriginalType()){this._oContentFactory.setDataType(this._oContentFactory.getUnitOriginalType());this._oContentFactory.setUnitOriginalType(undefined)}if(this._bParseError){this._bParseError=false;this._removeUIMessage()}if(this._oContentFactory.isMeasure()){this._oContentFactory.setIsMeasure(false)}};function ee(e){if(!this._oManagedObjectModel&&!this._bIsBeingDestroyed){this._oManagedObjectModel=new D(this)}e.setModel(this._oManagedObjectModel,"$field")}function te(e){var t=false;var i=Fe.call(this);if(!i){return}else if(i.isOpen()){t=true}else{switch(e.type){case"sapprevious":case"sapup":if(e.keyCode===M.ARROW_UP){t=true}break;case"sapnext":case"sapdown":if(e.keyCode===M.ARROW_DOWN){t=true}break;default:break}}if(t){e.stopPropagation();e.stopImmediatePropagation(true);switch(e.type){case"sapup":this.onsapup(e);break;case"sapdown":this.onsapdown(e);break;default:break}}}function ie(e,t){e.addDelegate(B,true,this);if(t){e.addDelegate(x,false,this)}}function ae(e){e.removeDelegate(B);e.removeDelegate(x)}function ne(e,t){if(t){e._OriginalGetFieldGroupIds=e._getFieldGroupIds;e._OriginalTriggerValidateFieldGroup=e.triggerValidateFieldGroup}e._getFieldGroupIds=function(){var e=this.getFieldGroupIds();var t=this.getParent();if(t){e=e.concat(t._getFieldGroupIds())}return e};e.triggerValidateFieldGroup=function(e){var t=this.getParent();if(t){var i=e.indexOf(t.getId());if(i>-1){w.call(t,e)}else{t.fireValidateFieldGroup({fieldGroupIds:e})}}}}function oe(e){if(e._OriginalGetFieldGroupIds&&e._OriginalTriggerValidateFieldGroup){e._getFieldGroupIds=e._OriginalGetFieldGroupIds;delete e._OriginalGetFieldGroupIds;e.triggerValidateFieldGroup=e._OriginalTriggerValidateFieldGroup;delete e._OriginalTriggerValidateFieldGroup}}function se(e){this.setProperty("_fieldHelpEnabled",true,true);this._sDefaultFieldHelp=S[e].id;var t=S[e].control;if(t&&t.bIsDestroyed){S[e].control=undefined;t=undefined}if(!t){if(S[e].promise){S[e].promise.then(re.bind(this,S[e].id))}var i=sap.ui.require(S[e].name);if(!i&&!S[e].promise){S[e].promise=new Promise(function(t){S[e].resolve=t;sap.ui.require([S[e].name],function(t){se.call(this,e)}.bind(this))}.bind(this)).then(re.bind(this,S[e].id))}if(i){var a=this.bDelegateInitialized&&this.getControlDelegate()[S[e].getDelegate]();var n=v({delegate:a},S[e].properties);t=new i(S[e].id,n);t._bIsDefaultHelp=true;S[e].control=t;t.connect(this);if(S[e].resolve){S[e].resolve();delete S[e].resolve}if(!S[e].promise){re.call(this,S[e].id)}}}else{re.call(this,S[e].id)}z.call(this,false)}function re(e){me.call(this,e,"insert")}function le(e,t,a,n){var o=e.getUseDefaultFieldHelp();if(o&&!this.getFieldHelp()&&a!==i.Display){if(n===1&&o.single||n!==1&&o.multi){if(t.length===1){var s=he.call(this,t);if(n===1){if(!(e.getEditOperator()&&e.getEditOperator()[t[0]])&&(o.oneOperatorSingle||!s)){return true}}else if(o.oneOperatorMulti||!s){return true}}else{return true}}}return false}function he(e){if(e.length===1){var t=s.getOperator(e[0]);return!t||t.isSingleValue()}else{return false}}function de(e){this._bParseError=true;this._sFilterValue=""}function ue(e){this._bParseError=true;this._sFilterValue="";var t=e.getParameter("newValue");var i=false;var a=0;for(a=0;a<this._aAsyncChanges.length;a++){var n=this._aAsyncChanges[a];if(n.waitForUpdate&&Array.isArray(n.result)){if(n.result.length===0&&t===""){n.reject(e.getParameter("exception"));i=true}else{for(var o=0;o<n.result.length;o++){var s=n.result[o];if(y(s.values[0],t)||s.operator==="BT"&&y(s.values[1],t)){n.reject(e.getParameter("exception"));i=true;break}}}if(i){break}}}if(i){this._aAsyncChanges.splice(a,1)}}function ge(e){this._bParseError=false}function pe(e){var t={parameters:v({},e.getParameters()),source:e.getSource()};var i=this._aAsyncChanges.length;if(i>0&&!this._aAsyncChanges[i-1].changeFired){this._aAsyncChanges[i-1].changeFired=true;this._aAsyncChanges[i-1].changeEvent=t;U.call(this,undefined,undefined,undefined,this._aAsyncChanges[i-1].promise);return}var a={changeEvent:t};ce.call(this,a)}function ce(e){var t=this.getConditions();var i;var a=true;var n;var o;var s=e.changeEvent.source;var r=false;var l=true;var h=false;if(e.changeEvent.parameters.hasOwnProperty("valid")){a=e.changeEvent.parameters["valid"];if(!a&&e.changeEvent.parameters.hasOwnProperty("value")){n=e.changeEvent.parameters["value"]}}var d=false;var u=this._oContentFactory.getBoundProperty();var g=u&&s.getBinding(u);if(g&&g.getBindingMode()!==m.OneWay&&g.getPath()==="/conditions"&&a){o=t[0];i=t[0]&&t[0].values[0]}else if(e.changeEvent.parameters.hasOwnProperty("value")){i=e.changeEvent.parameters["value"];if(a){d=true}}else{o=t[0];i=t[0]&&t[0].values[0]}if(d){this._removeUIMessage();var p;var c;if(this._bIgnoreInputValue){this._bIgnoreInputValue=false;s.setDOMValue("");if(s.getMetadata().hasProperty("value")){s.setValue()}return}o=E.resolve().then(function(){var t=this.getMaxConditions();if(this._oNavigateCondition){a=true;return this._oNavigateCondition}else if(i===""&&t!==1){return null}else{p=this._oContentFactory.getConditionType();var n=p.parseValue(i);var o=this._aAsyncChanges.length;if(o>0&&!this._aAsyncChanges[o-1].changeFired){c=this._aAsyncChanges[o-1];c.changeFired=true;c.changeEvent=e.changeEvent;U.call(this,undefined,undefined,undefined,c.promise)}return n}}.bind(this)).then(function(n){l=fe.call(this,n,t,p,a,i,s,c||e);l=l||h;return n}.bind(this)).catch(function(e){if(e&&!(e instanceof F)&&!(e instanceof b)&&!(e instanceof P)){throw e}a=false;n=i;this._bParseError=true;this._sFilterValue="";q.call(this,e.message);if(c&&c.reject){if(Le.call(this,c)){c.reject(e)}}else if(r){U.call(this,t,a,n)}}.bind(this)).unwrap();if(o instanceof Promise){r=true}}else if(!e.changeEvent.parameters.hasOwnProperty("valid")&&this._bParseError){n=e.changeEvent.parameters["value"];a=false}var f=Fe.call(this);if(f&&this._bConnected){if(sap.ui.getCore().getCurrentFocusedControlId()===s.getId()){f.close()}this._sFilterValue="";if(!r&&a){Pe.call(this,t,f);f.onControlChange()}ve.call(this)}if(this._oNavigateCondition){this._oNavigateCondition=undefined;this._oContentFactory.updateConditionType()}if(e.resolve){Ue.call(this,e)}else if(!r&&l){U.call(this,t,a,n)}}function fe(e,t,i,a,n,o,r){var l=this.getMaxConditions();var h=false;if(e===null&&l!==1){return true}if(i){i.validateValue(e)}if(a){if(e){if(this._oContentFactory.isMeasure()&&t.length===1&&t[0].values[0][0]===undefined){t=[]}if(l!==1&&s.indexOfCondition(e,t)>=0){throw new F(this._oResourceBundle.getText("field.CONDITION_ALREADY_EXIST",[n]))}else{if(l>0&&l<=t.length){t.splice(0,t.length-l+1)}t.push(e)}}else if(l===1){t=[]}if(!y(t,this.getConditions())){this.setProperty("conditions",t,true);h=true}if(l!==1){o.setValue("")}}if(r.resolve){var d=Fe.call(this);if(d&&this._bConnected){Pe.call(this,t,d);d.onControlChange()}r.result=t;Ue.call(this,r);Le.call(this,r)}return h}function ye(e){var t;var i;var a=false;var n=e.getSource();this._oNavigateCondition=undefined;this._oContentFactory.updateConditionType();if("value"in e.getParameters()){t=e.getParameter("value")}else if("newValue"in e.getParameters()){t=e.getParameter("newValue")}if("escPressed"in e.getParameters()){a=e.getParameter("escPressed")}if("previousValue"in e.getParameters()){i=e.getParameter("previousValue")}else{var o=this.getConditions();i=o[0]&&o[0].values[0]}var r=Fe.call(this);if(r&&(!this._oContentFactory.isMeasure()||n.getShowValueHelp())){if(a){if(r.isOpen(true)){r.close();Pe.call(this,this.getConditions(),r);ve.call(this);this._sFilterValue=""}}else{var l=this._getOperators();var h=false;for(var d=0;d<l.length;d++){var u=s.getOperator(l[d]);if(u.validateInput){h=true;break}}if(h){this._bIgnoreInputValue=false;this._vLiveChangeValue=t;if(!this._fnLiveChangeTimer){this._fnLiveChangeTimer=V(function(){var e=this.getDisplay();this._sFilterValue="";if(this._vLiveChangeValue){var t=s.getEQOperator();var i=t.getValues(this._vLiveChangeValue,e,true);if(i[0]){this._sFilterValue=i[0];if(i[1]){this._sFilterValue=this._sFilterValue+" "}}if(i[1]){this._sFilterValue=this._sFilterValue+i[1]}}var a=this.hasOwnProperty("_bOpenByTyping")?this._bOpenByTyping:r.isTypeaheadSupported();if(this._bConnected&&this._getContent()[0]&&a&&(sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[0].getId()||this._getContent()[1]&&sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[1].getId())){r.setFilterValue(this._sFilterValue);if(this.getMaxConditionsForHelp()===1&&r.getConditions().length>0){r.setConditions([])}r.open(true);z.call(this,true);delete this._vLiveChangeValue}}.bind(this),300,{leading:false,trailing:true});r.initBeforeOpen(true)}var g=r.isTypeaheadSupported();if(g instanceof Promise){g.then(function(e){var t=document.activeElement;if(t&&_(this.getDomRef(),t)&&this._fnLiveChangeTimer){this._fnLiveChangeTimer()}this._bOpenByTyping=e}.bind(this))}this._fnLiveChangeTimer()}}}this.fireLiveChange({value:t,escPressed:a,previousValue:i})}function ve(){if(this._fnLiveChangeTimer){this._fnLiveChangeTimer.cancel();delete this._vLiveChangeValue}}function Ce(e){var t=this.getFieldInfo();if(t){t.getTriggerHref().then(function(e){if(!e){t.open(this._getContent()[0]);z.call(this,true)}}.bind(this))}this.firePress()}function _e(e){if(e.getParameter("type")==="removed"){var t=e.getParameter("removedTokens");var i=this.getConditions();var a;var n;for(n=0;n<t.length;n++){var o=t[n];var s=o.getBindingContext("$field").sPath;var l=parseInt(s.slice(s.lastIndexOf("/")+1));i[l].delete=true}for(n=i.length-1;n>=0;n--){if(i[n].delete){if(this._oContentFactory.isMeasure()){a=i[n].values[0][1]}i.splice(n,1)}}if(this._oContentFactory.isMeasure()&&a&&i.length===0){i=[r.createItemCondition([undefined,a],undefined)]}this.setProperty("conditions",i,true);L.call(this,i,true);e.preventDefault(true)}}function me(e,t){if(t==="remove"){var i=sap.ui.getCore().byId(e);if(i){i.detachEvent("select",Te,this);i.detachEvent("navigated",Ee,this);i.detachEvent("dataUpdate",Ie,this);i.detachEvent("disconnect",Oe,this);i.detachEvent("afterClose",Ve,this);i.detachEvent("switchToValueHelp",Me,this)}this.setProperty("_fieldHelpEnabled",false,true);this._bConnected=false}else if(t==="insert"){be.call(this,e)}var a=this._getContent()[0];if(a&&a.setValueHelpIconSrc){a.setValueHelpIconSrc(this._getFieldHelpIcon())}j.call(this,this.getConditions())}function be(e){if(e&&!this.getProperty("_fieldHelpEnabled")){var t=sap.ui.getCore().byId(e);if(t){t.attachEvent("dataUpdate",Ie,this);if(!t.valueHelpEnabled||t.valueHelpEnabled()){this.setProperty("_fieldHelpEnabled",true,true)}}}}function Fe(){var e=this.getFieldHelp();var t;if(!e&&this._sDefaultFieldHelp){e=this._sDefaultFieldHelp}if(e){t=sap.ui.getCore().byId(e)}return t}function Pe(e,t){if(!t){t=Fe.call(this)}if(this._oContentFactory.isMeasure()){var i=[];for(var a=0;a<e.length;a++){var n=e[a];if(n.values[0]&&n.values[0][1]){var o=r.createItemCondition(n.values[0][1],undefined,n.inParameters,n.outParameters);i.push(o)}}t.setConditions(i)}else{t.setConditions(e)}}function De(e){var t=Fe.call(this);if(t){t.setFilterValue(this._sFilterValue);var i=this.getConditions();Pe.call(this,i,t);t.toggleOpen(false);z.call(this,true);if(!t.isFocusInHelp()){var a=e.getSource();if(a.bValueHelpRequested){a.bValueHelpRequested=false}}}}function Te(e){var t=this.getConditions();var i=e.getParameter("conditions");var a=e.getParameter("add");var o=e.getParameter("close");var l=e.oSource;var h=this.getMaxConditions();var d;var u=this.getControlForSuggestion();var g;var p=0;if(this._oContentFactory.isMeasure()){if(i.length>1){throw new Error("Only one item must be selected! "+this)}if(i[0].operator!=="EQ"){throw new Error("Only EQ allowed! "+this)}if(t.length>0){for(p=0;p<t.length;p++){t[p].values[0][1]=i[0].values[0];if(t[p].operator==="BT"){t[p].values[1][1]=i[0].values[0]}if(i[0].inParameters){t[p].inParameters=i[0].inParameters}if(i[0].outParameters){t[p].outParameters=i[0].outParameters}if(i[0].payload){t[p].payload=i[0].payload}}}else{var c=s.getEQOperator(this._getOperators());var f=this.getControlDelegate().enhanceValueForUnit(this.getPayload(),[null,i[0].values[0]],this._oTypeInitialization);d=r.createCondition(c.name,[f],i[0].inParameters,i[0].outParameters,n.NotValidated);t.push(d);var v=this._oContentFactory.getConditionType(true);var C=this._oContentFactory.getUnitConditionsType(true);if(v){g=v.formatValue(d)}else if(C){g=C.formatValue(t)}}}else{if(!a){t=[]}for(p=0;p<i.length;p++){d=i[p];if(!Ne.call(this,d.operator)){continue}var _=a?-1:s.indexOfCondition(d,t);if(_===-1){t.push(d)}else if(d.values[1]!==t[_].values[1]&&t[_].values[1]){t[_].values[1]=d.values[1]}}}if(h>0&&h<t.length){t.splice(0,t.length-h)}var m=false;if(u&&u.setDOMValue){if(this.getMaxConditionsForHelp()===1&&t.length>0){if(this._oContentFactory.isMeasure()&&this._oContentFactory.getUnitConditionsType()){g=this._oContentFactory.getUnitConditionsType().formatValue(t)}else if(this._oContentFactory.getConditionType(true)){g=this._oContentFactory.getConditionType().formatValue(t[0])}else if(this._oContentFactory.getConditionsType(true)){g=this._oContentFactory.getConditionsType().formatValue(t)}if(g instanceof Promise){g.then(function(e){u.setDOMValue("");u.setDOMValue(e)})}else{u.setDOMValue("");u.setDOMValue(g)}this._sFilterValue=""}else if(o){if(this.getMaxConditions()!==1&&!this._oContentFactory.getBoundProperty()&&u.getMetadata().hasProperty("value")&&u.getProperty("value")){u.setValue()}u.setDOMValue("");this._sFilterValue="";this._bIgnoreInputValue=false}else{this._bIgnoreInputValue=true}if(this._bParseError){this._bParseError=false;this._removeUIMessage();m=true}}var b=this.getConditions();if(!y(t,b)){this._oNavigateCondition=undefined;this._oContentFactory.updateConditionType();this.setProperty("conditions",t,true);if(!s.compareConditionsArray(t,b)){l.onControlChange();U.call(this,t,true)}}else if(m){U.call(this,t,true)}}function Ee(e){var t=e.getParameter("value");var i=e.getParameter("key");var o=e.getParameter("condition");var l=e.getParameter("itemId");var h=e.getParameter("leaveFocus");if(!o&&i){o=r.createItemCondition(i,t)}var d;var u;var g=this.getControlForSuggestion();var p=s.getEQOperator(this._getOperators());var c=Fe.call(this);if(h){g.addStyleClass("sapMFocus");g.focus();c.removeFocus();return}if(o){this._oNavigateCondition=v({},o);this._oNavigateCondition.operator=p.name;i=o.values[0];t=o.values[1]}else{this._oNavigateCondition=r.createCondition(p.name,[i,t],undefined,undefined,n.Validated)}if(this._oContentFactory.isMeasure()){var f=this.getConditions();if(f.length>0){this._oNavigateCondition.operator=f[0].operator;this._oNavigateCondition.values[0]=[f[0].values[0][0],i];if(f[0].operator==="BT"){this._oNavigateCondition.values[1]=[f[0].values[1][0],this._oNavigateCondition.values[0][1]]}else if(this._oNavigateCondition.values.length>1){this._oNavigateCondition.values.splice(1)}}else{this._oNavigateCondition.values=[this.getControlDelegate().enhanceValueForUnit(this.getPayload(),[null,i],this._oTypeInitialization)]}}this._bPreventGetDescription=true;this._oContentFactory.updateConditionType();if(this.getDisplay()!==a.Value){d=i}else if(t){d=t}else{d=i}if(g&&g.setDOMValue){if(!u){if(this._oContentFactory.isMeasure()&&this._oContentFactory.getUnitConditionsType()&&this._oNavigateCondition){u=this._oContentFactory.getUnitConditionsType().formatValue([this._oNavigateCondition])}else if(this._oContentFactory.getConditionType(true)&&this._oNavigateCondition){u=this._oContentFactory.getConditionType().formatValue(this._oNavigateCondition)}else if(this._oContentFactory.getConditionsType(true)&&this._oNavigateCondition){u=this._oContentFactory.getConditionsType().formatValue([this._oNavigateCondition])}else{u=t||i}}g.setDOMValue(u);g._doSelect();if(c.isOpen()){g.removeStyleClass("sapMFocus")}}this._bPreventGetDescription=false;this._oContentFactory.updateConditionType();z.call(this,true,l);this._bIgnoreInputValue=false;this.fireLiveChange({value:d})}function Ve(e){if(this._bIgnoreInputValue){var t=this.getControlForSuggestion();this._bIgnoreInputValue=false;t.setDOMValue("");this._sFilterValue="";if(this.getMaxConditions()!==1&&!this._oContentFactory.getBoundProperty()&&t.getMetadata().hasProperty("value")&&t.getProperty("value")){t.setValue()}}z.call(this,false);var i=e.getSource();var a=this.getConditions();Pe.call(this,a,i)}function Me(e){var t=this.getControlForSuggestion();t.focus();if(t.fireValueHelpRequest){t.bValueHelpRequested=true;t.fireValueHelpRequest()}}function Ie(e){var t=this.getEditMode()===i.Editable&&this._getContent().length>0&&sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[0].getId();if(!t&&!this._bPendingConditionUpdate&&this.getConditions().length>0&&(this.getMaxConditions()!==1||this.getDisplay()!==a.Value&&!this._bParseError)&&this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true)}}function Oe(e){var t=Fe.call(this);t.detachEvent("select",Te,this);t.detachEvent("navigated",Ee,this);t.detachEvent("disconnect",Oe,this);t.detachEvent("afterClose",Ve,this);t.detachEvent("switchToValueHelp",Me,this);t.detachEvent("closed",Ve,this);this._bConnected=false}function Ae(){var e=Fe.call(this);if(e&&!this._bConnected){var t=Re.call(this);var i;var n=this._oContentFactory.isMeasure();if(n){var o=this._oContentFactory.getCompositeTypes();if(o&&o.length>1){i=o[1]}}else{i=this._oContentFactory.getDataType()}var s={maxConditions:this.getMaxConditions(),dataType:i,operators:this._getOperators(),display:n?a.Value:this.getDisplay(),delegate:this.getControlDelegate(),delegateName:this.getDelegate()&&this.getDelegate().name,payload:this.getPayload(),conditionModel:t.model,conditionModelName:t.name,defaultOperatorName:this.getDefaultOperator?this.getDefaultOperator():null};e.connect(this,s);this._bConnected=true;e.attachEvent("select",Te,this);e.attachEvent("navigated",Ee,this);e.attachEvent("disconnect",Oe,this);e.attachEvent("afterClose",Ve,this);e.attachEvent("switchToValueHelp",Me,this);e.attachEvent("closed",Ve,this);var r=this.getConditions();Pe.call(this,r,e);var l=this.getControlForSuggestion();He.call(this,l);if(e._bIsDefaultHelp&&e.setTitle){e.setTitle(this.getLabel())}}}function He(e){if(e&&!e.orgOnsapfocusleave&&e.onsapfocusleave){e.orgOnsapfocusleave=e.onsapfocusleave;e.onsapfocusleave=function(e){var t=Fe.call(this.getParent());if(t){var i=sap.ui.getCore().byId(e.relatedControlId);if(i){if(_(t.getDomRef(),i.getFocusDomRef())){e.stopPropagation();return}else{t.skipOpening()}}}this.orgOnsapfocusleave(e)}}}H.prototype._getFieldHelpIcon=function(){var e=Fe.call(this);if(e){return e.getIcon()}};function Be(e,t){if(t==="remove"){e.detachEvent("dataUpdate",xe,this)}else if(t==="insert"){e.attachEvent("dataUpdate",xe,this);xe.call(this)}}function xe(){var e=this.getFieldInfo();var t=this;e.isTriggerable().then(function(a){t._bTriggerable=a;var n=t.getAggregation("_content",[]);if(n.length>0&&t.getEditMode()===i.Display){X.call(t);if(t._bTriggerable){n=t.getAggregation("_content",[]);var o=n[0];e.getDirectLinkHrefAndTarget().then(function(e){u._updateLink(o,e)})}}})}H.prototype._getFormatOptions=function(){if(!this._asyncParsingCall){this._asyncParsingCall=Se.bind(this)}var e=Re.call(this);return{valueType:this._oContentFactory.retrieveDataType(),originalDateType:this._oContentFactory.getDateOriginalType()||this._oContentFactory.getUnitOriginalType(),additionalType:this._oContentFactory.getUnitType(),compositeTypes:this._oContentFactory.getCompositeTypes(),display:this._oContentFactory.isMeasure()?a.Value:this.getDisplay(),fieldHelpID:this._oContentFactory.isMeasure()?undefined:this.getFieldHelp()||this._sDefaultFieldHelp,operators:this._getOperators(),hideOperator:this._oContentFactory.getHideOperator(),maxConditions:this.getMaxConditions(),bindingContext:this.getBindingContext(),asyncParsing:this._asyncParsingCall,navigateCondition:this._oNavigateCondition,delegate:this.getControlDelegate(),delegateName:this.getDelegate()&&this.getDelegate().name,payload:this.getPayload(),preventGetDescription:this._bPreventGetDescription,conditionModel:e.model,conditionModelName:e.name,convertWhitespaces:this.getEditMode()===i.Display||this.getMaxConditions()!==1,control:this,defaultOperatorName:this.getDefaultOperator?this.getDefaultOperator():null}};H.prototype._checkValueInitial=function(e){if(e===null||e===undefined){return true}if(e===""||typeof e==="string"&&e.match(/^0+$/)){var t=this._oContentFactory.retrieveDataType();var i=t.parseValue("","string");if(i===e){return true}else{try{t.validateValue(i)}catch(e){return true}}}else{var a=R.call(this);if(this.getTypeUtil().getBaseType(a)===d.Unit&&Array.isArray(e)&&e.length>1&&(e[0]===undefined||e[0]===null)&&!e[1]){return true}}return false};H.prototype._getUnitFormatOptions=function(){if(!this._asyncParsingCall){this._asyncParsingCall=Se.bind(this)}var e=Re.call(this);return{valueType:this._oContentFactory.getUnitType(),originalDateType:this._oContentFactory.getDateOriginalType()||this._oContentFactory.getUnitOriginalType(),additionalType:this._oContentFactory.retrieveDataType(),compositeTypes:this._oContentFactory.getCompositeTypes(),display:this.getDisplay(),fieldHelpID:this.getFieldHelp()||this._sDefaultFieldHelp,operators:["EQ"],hideOperator:true,maxConditions:1,bindingContext:this.getBindingContext(),asyncParsing:this._asyncParsingCall,navigateCondition:this._oNavigateCondition,delegate:this.getControlDelegate(),delegateName:this.getDelegate()&&this.getDelegate().name,payload:this.getPayload(),preventGetDescription:this._bPreventGetDescription,conditionModel:e.model,conditionModelName:e.name,convertWhitespaces:this.getEditMode()===i.Display||this.getEditMode()===i.EditableDisplay,control:this,getConditions:this.getConditions.bind(this)}};function Se(e){var t=Fe.call(this);if(t&&t.isOpen()){var i=document.activeElement;if(i&&(_(this.getDomRef(),i)||_(t.getDomRef(),i))){t.close()}}var a={};var n=new Promise(function(t,i){a.resolve=t;a.reject=i;e.then(function(e){a.result=e;this._bParseError=false;var t=this.getConditions();if(y(e,t)){Ue.call(this,a);Le.call(this,a)}else{a.waitForUpdate=true}}.bind(this)).catch(function(e){if(e&&!(e instanceof F)&&!(e instanceof b)&&!(e instanceof P)){throw e}this._bParseError=true;i(e);Le.call(this,a)}.bind(this))}.bind(this));a.promise=n;this._aAsyncChanges.push(a)}function we(){var e=[];for(var t=0;t<this._aAsyncChanges.length;t++){e.push(this._aAsyncChanges[t].promise)}if(e.length>0){return Promise.all(e).then(function(){return this._getResultForPromise(this.getConditions())}.bind(this))}return null}H.prototype._getResultForPromise=function(e){return e};function Ue(e){e.resolve(this._getResultForPromise(e.result))}function Le(e){var t=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){if(e===this._aAsyncChanges[i]){t=true;break}}if(t){this._aAsyncChanges.splice(i,1)}return t}H.prototype._getOperators=function(){var e=new RegExp("^\\*(.*)\\*|\\$search$");if(e.test(this.getFieldPath())&&this.getMaxConditions()===1){return["Contains"]}var t=this.getBaseType();if(t===d.Unit){t=d.Numeric}return s.getOperatorsForType(t)};function Ne(e){var t=this._getOperators();for(var i=0;i<t.length;i++){if(e===t[i]){return true}}return false}function Re(){var e;var t;var i=this.getBinding("conditions");if(i){var a=i.getModel();if(a&&a.isA("sap.ui.mdc.condition.ConditionModel")){e=a;var n=this.getBindingInfo("conditions");if(n.model){t=n.model}else if(n.parts&&n.parts.length===1){t=n.parts[0].model}}}return{name:t,model:e}}H.prototype._isPropertyInitial=function(e){if(this.isBound(e)&&!this.getBinding(e)){return!Object.prototype.hasOwnProperty.call(this.mProperties,e)}else{return this.isPropertyInitial(e)}};return H});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldBaseDelegate",["sap/ui/mdc/BaseDelegate","sap/ui/mdc/odata/TypeUtil","sap/ui/model/FormatException"],function(e,t,n){"use strict";var i=Object.assign({},e);i.getDataTypeClass=function(e,n){return t.getDataTypeClassName(n)};i.getBaseType=function(e,n,i,a){return t.getBaseType(n,i,a)};i.initializeTypeFromBinding=function(e,t,n){return{}};i.initializeInternalUnitType=function(e,t,n){};i.enhanceValueForUnit=function(e,t,n){return t};i.isInputValidationEnabled=function(e,t){if(t&&t.isValidationSupported()){return true}else{return false}};i.isInvalidInputAllowed=function(e,t){if(t){return!t.getValidateInput()}else{return true}};i.getItemForValue=function(e,t,n){if(t){return t.getItemForValue(n)}};i.getDescription=function(e,t,i,a,u,l,r,o,s,c){if(t&&t.isA("sap.ui.mdc.ValueHelp")){var p={value:i,parsedValue:i,context:{inParameters:a,outParameters:u,payload:s},bindingContext:l,conditionModel:r,conditionModelName:o,checkKey:true,checkDescription:false,caseSensitive:true,exception:n,control:c};return t.getItemForValue(p)}else if(t){return t.getTextForKey(i,a,u,l,r,o)}};i.getDefaultFieldHelpBaseDelegate=function(e){return{name:"sap/ui/mdc/field/FieldHelpBaseDelegate",payload:{}}};i.getDefaultFieldValueHelpDelegate=function(e){return{name:"sap/ui/mdc/field/FieldValueHelpDelegate",payload:{}}};i.getTypeUtil=function(e){return t};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldBaseRenderer",["sap/ui/core/Renderer","sap/ui/core/IconPool","sap/ui/mdc/enum/EditMode"],function(e,i,t){"use strict";var n=e.extend("sap.ui.mdc.field.FieldBaseRenderer");n=Object.assign(n,{apiVersion:2});n.render=function(e,i){var n=i._getContent();var a=i.getWidth();var d=i.getConditions();var r=i.getEditMode();var s=i.getShowEmptyIndicator()&&d.length===0&&r===t.Display&&!i.getContent()&&!i.getContentDisplay();e.openStart("div",i);e.class("sapUiMdcFieldBase");if(n.length>1){e.class("sapUiMdcFieldBaseMoreFields")}if(s){e.class("sapMShowEmpty-CTX")}e.style("width",a);e.openEnd();for(var o=0;o<n.length;o++){var l=n[o];e.renderControl(l)}e.close("div")};return n});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldHelpBase",["sap/ui/mdc/Element","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated","sap/base/Log","sap/base/util/merge","sap/ui/base/SyncPromise","sap/ui/model/FormatException","sap/ui/model/ParseException"],function(e,t,i,o,n,r,s,a,p,l){"use strict";var u;var f;var h=e.extend("sap.ui.mdc.field.FieldHelpBase",{metadata:{interfaces:["sap.ui.core.PopupInterface"],library:"sap.ui.mdc",properties:{conditions:{type:"object[]",defaultValue:[],byValue:true},delegate:{type:"object",group:"Data",defaultValue:{name:"sap/ui/mdc/field/FieldHelpBaseDelegate"}},filterValue:{type:"string",defaultValue:""},validateInput:{type:"boolean",defaultValue:true}},aggregations:{_popover:{type:"sap.m.Popover",multiple:false,visibility:"hidden"}},events:{select:{parameters:{conditions:{type:"object[]"},add:{type:"boolean"},close:{type:"boolean"}}},navigate:{parameters:{value:{type:"any"},key:{type:"any"},condition:{type:"object"},itemId:{type:"string"},leaveFocus:{type:"boolean"}}},dataUpdate:{},disconnect:{},open:{suggestion:{type:"boolean"}},afterClose:{},switchToValueHelp:{}},defaultProperty:"filterValue"}});h._init=function(){u=undefined;f=undefined};h.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oTextOrKeyPromises={}};h.prototype.invalidate=function(e){if(e){var t=this.getAggregation("_popover");if(t&&e===t){if(e.bOutput&&!this._bIsBeingDestroyed){var i=this.getParent();if(i){i.invalidate(this)}}return}}};h.prototype.setFilterValue=function(e){this.setProperty("filterValue",e,true);return this};h.prototype.connect=function(e){if(this._oField&&this._oField!==e){var t=this.getAggregation("_popover");if(t){t._oPreviousFocus=null}this.close();this.setFilterValue("");this.setConditions([]);this.fireDisconnect()}this._oField=e;O.call(this,e);return this};h.prototype._getField=function(){if(this._oField){return this._oField}else{return this.getParent()}};h.prototype._getOperator=function(){if(!this._oOperator){this._oOperator=t.getEQOperator()}return this._oOperator};h.prototype._createCondition=function(e,t,r,s){var a=this._getOperator();var p=[e];if(a.valueTypes.length>1&&a.valueTypes[1]!==i.ValueType.Static&&t!==null&&t!==undefined){p.push(t)}return o.createCondition(a.name,p,r,s,n.Validated)};h.prototype._getControlForSuggestion=function(){var e=this._getField();if(e.getControlForSuggestion){return e.getControlForSuggestion()}else{return e}};h.prototype.getFieldPath=function(){var e="";if(this._oField&&this._oField.getFieldPath){e=this._oField.getFieldPath()}return e||"Help"};h.prototype.getDomRef=function(){var t=this.getAggregation("_popover");if(t){return t.getDomRef()}else{return e.prototype.getDomRef.apply(this,arguments)}};h.prototype.getContentId=function(){var e=this.getAggregation("_popover");if(e){var t=e._getAllContent();if(t.length===1){return t[0].getId()}}};h.prototype.getAriaHasPopup=function(){return"listbox"};h.prototype.getRoleDescription=function(e){return null};h.prototype.getValueHelpEnabled=function(){return true};h.prototype.open=function(e){var t=this._getField();if(t){var i=this._getPopover();if(i&&!this._bOpenAfterPromise){delete this._bOpen;delete this._bSuggestion;if(!i.isOpen()){if(!this.isFocusInHelp()){i.setInitialFocus(this._getControlForSuggestion())}i.setFieldGroupIds(t.getFieldGroupIds());var o=function(){if(this._bOpenAfterPromise){delete this._bOpenAfterPromise;this.open(e)}}.bind(this);var n=this._fireOpen(!!e,o);if(n){if(i._getAllContent().length>0){i.openBy(this._getControlForSuggestion())}else{this._bOpenIfContent=true}}else{this._bOpenAfterPromise=true}}}else{this._bOpen=true;this._bSuggestion=e}}else{r.warning("FieldHelp not assigned to field -> can not be opened.",this)}};h.prototype.close=function(){var e=this.getAggregation("_popover");if(e&&e.isOpen()){var t=e.oPopup.getOpenState();if(t!=="CLOSED"&&t!=="CLOSING"){this._bClosing=true;e.close()}}else{delete this._bOpen;delete this._bSuggestion;delete this._bOpenIfContent;delete this._bOpenAfterPromise}this._bReopen=false};h.prototype.toggleOpen=function(e){var t=this.getAggregation("_popover");if(t){if(t.isOpen()){var i=t.oPopup.getOpenState();if(i!=="CLOSED"&&i!=="CLOSING"){this.close()}else{this._bReopen=true}}else{this.open(e)}}else if(this._bOpen||this._bOpenIfContent||this._bOpenAfterPromise){delete this._bOpen;delete this._bSuggestion;delete this._bOpenIfContent;delete this._bOpenAfterPromise}else{this.open(e)}};h.prototype.isOpen=function(e){if(e&&this._bClosing){return false}var t=false;var i=this.getAggregation("_popover");if(i){t=i.isOpen()}return t};h.prototype.skipOpening=function(){if(this._bOpenIfContent){delete this._bOpenIfContent}if(this._bOpenAfterPromise){delete this._bOpenAfterPromise}};h.prototype.initBeforeOpen=function(e){if(this._bOpenAfterPromise){return}var t=function(){this._bBeforeOpenPending=false;if(this._bOpenAfterPromise){delete this._bOpenAfterPromise;this.open(e)}}.bind(this);var i=this._callContentRequest(e,t);if(!i){this._bBeforeOpenPending=true}};h.prototype._createPopover=function(){var e;if((!u||!f)&&!this._bPopoverRequested){u=sap.ui.require("sap/m/Popover");f=sap.ui.require("sap/m/library");if(!u||!f){sap.ui.require(["sap/m/Popover","sap/m/library"],d.bind(this));this._bPopoverRequested=true}}if(u&&f&&!this._bPopoverRequested){e=new u(this.getId()+"-pop",{contentHeight:"auto",placement:f.PlacementType.VerticalPreferredBottom,showHeader:false,showArrow:false,afterOpen:this._handleAfterOpen.bind(this),afterClose:this._handleAfterClose.bind(this)}).addStyleClass("sapMComboBoxBasePicker").addStyleClass("sapMComboBoxBasePicker-CTX");e.isPopupAdaptationAllowed=function(){return false};this.setAggregation("_popover",e,true);if(this._oContent){this._setContent(this._oContent)}}return e};function d(e,t){u=e;f=t;this._bPopoverRequested=false;if(!this._bIsBeingDestroyed){this._createPopover();if(this._bOpen){this.open(this._bSuggestion)}}}h.prototype._getPopover=function(){var e=this.getAggregation("_popover");if(!e){e=this._createPopover()}return e};h.prototype._handleAfterOpen=function(e){};h.prototype._handleAfterClose=function(e){this._bClosing=false;if(this._bReopen){this._bReopen=false;this.open()}this.fireAfterClose()};h.prototype.openByTyping=function(){return false};h.prototype.openByClick=function(){return false};h.prototype.isFocusInHelp=function(){return!this.openByTyping()};h.prototype.removeFocus=function(){};h.prototype.navigate=function(e){};h.prototype.getTextForKey=function(e,t,i,o,n,r){return c.call(this,e,o,t,i,false,n,r,true)};function c(e,t,i,o,n,r,s,a){return _.call(this,true,e,t,i,o,n,r,s,undefined,false,a)}h.prototype.getKeyForText=function(e,t,i,o){return g.call(this,e,t,false,i,o,true)};function g(e,t,i,o,n,r){return _.call(this,false,e,t,undefined,undefined,i,o,n,undefined,false,r)}h.prototype._getTextOrKey=function(e,t,i,o,n,r,s,a,p,l,u){if(t){return""}else{return undefined}};h.prototype._isTextOrKeyRequestSupported=function(){return false};h.prototype.isValidationSupported=function(){return this.isUsableForValidation()};h.prototype.getItemForValue=function(e,t,i,o,n,r,s,a,p,l){if(typeof e!=="object"||!e.hasOwnProperty("value")){e={value:e,parsedValue:t,inParameters:i,outParameters:o,bindingContext:n,checkKeyFirst:r,checkKey:s,checkDescription:a,conditionModel:p,conditionModelName:l}}if(e&&typeof e==="object"&&e.hasOwnProperty("value")){return y.call(this,e.value,e.parsedValue,e.inParameters,e.outParameters,e.bindingContext,e.checkKeyFirst&&e.checkKey,e.checkKey,e.checkDescription,e.conditionModel,e.conditionModelName)}else{return y.call(this,e,t,i,o,n,r&&s,s,a,p,l)}};function y(e,t,i,o,n,r,s,p,l,u){return a.resolve().then(function(){if(s&&p){return _.call(this,true,e,n,i,o,false,l,u,t,true,false)}else if(s){return c.call(this,t,n,i,o,false,l,u,false)}else if(p){return g.call(this,e,n,false,l,u,false)}}.bind(this)).then(function(i){if(i){if(typeof i==="object"){return i}else if(s){return{key:t,description:i}}else{return{key:i,description:e}}}else{return undefined}}).catch(function(e){throw e}).unwrap()}h.prototype.isUsableForValidation=function(){return true};h.prototype.onFieldChange=function(){};h.prototype._setContent=function(e){var t=this.getAggregation("_popover");if(t){t.removeAllContent();t.addContent(e);this._oContent=undefined;if(this._bOpenIfContent){var i=this._getField();if(i){t.openBy(this._getControlForSuggestion())}this._bOpenIfContent=false}}else{this._oContent=e}return this};h.prototype.getIcon=function(){return"sap-icon://slim-arrow-down"};h.prototype.getUIArea=function(){var t=e.prototype.getUIArea.apply(this,arguments);if(!t){if(this._oField){t=this._oField.getUIArea()}}return t};h.prototype.getScrollDelegate=function(){var e=this.getAggregation("_popover");if(e){return e.getScrollDelegate()}else{return undefined}};h.prototype._fireOpen=function(e,t){if(this._bBeforeOpenPending){return false}var i=this._callContentRequest(e,t);if(i){this.fireOpen({suggestion:e})}return i};h.prototype._callContentRequest=function(e,t){if(!this._bNoContentRequest){if(this._oContentRequestPromise){this._oContentRequestPromise.then(function(){this._bNoContentRequest=true;t();this._bNoContentRequest=false}.bind(this));return false}if(!this.bDelegateInitialized&&!this.bDelegateLoading){this.initControlDelegate()}if(this.bDelegateInitialized){var i=this._getContenRequestProperties(e);var o=this.getControlDelegate().contentRequest(this.getPayload(),this,e,i);if(o instanceof Promise){this._oContentRequestPromise=o;o.then(function(){this._oContentRequestPromise=undefined;this._bNoContentRequest=true;t();this._bNoContentRequest=false}.bind(this));return false}}else{this.awaitControlDelegate().then(function(){if(this._callContentRequest(e,t)){t()}}.bind(this));return false}}return true};h.prototype._getContenRequestProperties=function(e){return null};function _(e,t,i,o,n,r,a,p,l,u,f){var h=JSON.stringify(o);var d=i&&i.getPath();if(this._oTextOrKeyPromises[e]&&this._oTextOrKeyPromises[e][t]&&this._oTextOrKeyPromises[e][t][h]&&this._oTextOrKeyPromises[e][t][h][d]){return this._oTextOrKeyPromises[e][t][h][d].promise}var c=function(){v.call(this)}.bind(this);var g=this._callContentRequest(true,c);if(!g){if(!this._oTextOrKeyPromises[e]){this._oTextOrKeyPromises[e]={}}if(!this._oTextOrKeyPromises[e][t]){this._oTextOrKeyPromises[e][t]={}}if(!this._oTextOrKeyPromises[e][t][h]){this._oTextOrKeyPromises[e][t][h]={}}if(!this._oTextOrKeyPromises[e][t][h][d]){this._oTextOrKeyPromises[e][t][h][d]={}}this._oTextOrKeyPromises[e][t][h][d].promise=new Promise(function(c,g){this._oTextOrKeyPromises[e][t][h][d].resolve=c;this._oTextOrKeyPromises[e][t][h][d].reject=g;this._oTextOrKeyPromises[e][t][h][d].key=e;this._oTextOrKeyPromises[e][t][h][d].value=t;this._oTextOrKeyPromises[e][t][h][d].inParameters=o?s({},o):undefined;this._oTextOrKeyPromises[e][t][h][d].outParameters=n?s({},n):undefined;this._oTextOrKeyPromises[e][t][h][d].bindingContext=i;this._oTextOrKeyPromises[e][t][h][d].noRequest=r;this._oTextOrKeyPromises[e][t][h][d].conditionModel=a;this._oTextOrKeyPromises[e][t][h][d].conditionModelName=p;this._oTextOrKeyPromises[e][t][h][d].parsedValue=l;this._oTextOrKeyPromises[e][t][h][d].keyAndDescription=u;this._oTextOrKeyPromises[e][t][h][d].caseSensitive=f}.bind(this));return this._oTextOrKeyPromises[e][t][h][d].promise}return this._getTextOrKey(t,e,i,o,n,r,a,p,l,u,f)}function v(){for(var e in this._oTextOrKeyPromises){for(var t in this._oTextOrKeyPromises[e]){for(var i in this._oTextOrKeyPromises[e][t]){for(var o in this._oTextOrKeyPromises[e][t][i]){m.call(this,this._oTextOrKeyPromises[e][t][i][o]);delete this._oTextOrKeyPromises[e][t][i][o]}}}}}function m(e){var t=e.value;var i=e.key;var o=e.inParameters;var n=e.outParameters;var r=e.bindingContext;var s=e.noRequest;var p=e.resolve;var l=e.reject;var u=e.conditionModel;var f=e.conditionModelName;var h=e.parsedValue;var d=e.keyAndDescription;var c=e.caseSensitive;a.resolve().then(function(){return this._getTextOrKey(t,i,r,o,n,s,u,f,h,d,c)}.bind(this)).then(function(e){p(e)}).catch(function(e){l(e)}).unwrap()}function O(e){this._oOperator=undefined;if(e&&e._getOperators){this._oOperator=t.getEQOperator(e._getOperators())}}h.prototype.isTypeaheadSupported=function(){return this.openByTyping()};h.prototype.shouldOpenOnClick=function(){return this.openByClick()};h.prototype.onControlChange=function(){return this.onFieldChange()};h.prototype.getAriaAttributes=function(e){return{contentId:this.getContentId(),ariaHasPopup:this.getAriaHasPopup(),role:"combobox",roleDescription:this.getRoleDescription(e),valueHelpEnabled:this.getValueHelpEnabled()}};h.prototype.attachEvent=function(t,i,o,n){if(t==="navigated"){return e.prototype.attachEvent.apply(this,["navigate",i,o,n])}else{return e.prototype.attachEvent.apply(this,arguments)}};h.prototype.detachEvent=function(t,i,o){if(t==="navigated"){return e.prototype.detachEvent.apply(this,["navigate",i,o])}else{return e.prototype.detachEvent.apply(this,arguments)}};return h});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldHelpBaseDelegate",[],function(){"use strict";var e={contentRequest:function(e,t,i,n){}};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldInfoBase",["sap/ui/Device","sap/ui/mdc/Element","sap/m/library","sap/m/ResponsivePopover"],function(e,t,o,i){"use strict";var n=o.PlacementType;var r=t.extend("sap.ui.mdc.field.FieldInfoBase",{metadata:{library:"sap.ui.mdc",events:{dataUpdate:{},popoverAfterOpen:{}}}});r.prototype.isTriggerable=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method isTriggerable must be redefined")};r.prototype.getTriggerHref=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getTriggerHref must be redefined")};r.prototype.getDirectLinkHrefAndTarget=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getDirectLinkHrefAndTarget must be redefined")};r.prototype.open=function(e){var t=this.getParent();if(!t){throw new Error("sap.ui.mdc.field.FieldInfoBase: popover can not be open because the control is undefined")}if(this._oPopover&&this._oPopover.isOpen()){return Promise.resolve()}return this.checkDirectNavigation().then(function(o){return o?Promise.resolve():this.createPopover().then(function(o){if(o){this._oPopover=o;this.addDependent(this._oPopover);this._oPopover.openBy(e||t);this._oPopover.attachAfterOpen(function(){this.firePopoverAfterOpen()}.bind(this))}}.bind(this))}.bind(this))};r.prototype.getContent=function(e){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getContent must be redefined")};r.prototype.checkDirectNavigation=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method checkDirectNavigation must be redefined")};r.prototype.getSourceControl=function(){return this.getParent()};r.prototype.createPopover=function(){var t;return this.getContent(function(){return t}).then(function(o){t=new i(this.getId()+"-popover",{contentWidth:"380px",horizontalScrolling:false,showHeader:e.system.phone,placement:n.Auto,content:[o],afterClose:function(){if(this._oPopover){this._oPopover.destroy()}}.bind(this)});sap.ui.require(["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(e){if(e.isFlexSupported({element:o})){e.waitForChanges({element:o}).then(function(){t.addAriaLabelledBy(o.getContentTitle?o.getContentTitle():"")})}else if(o){t.addAriaLabelledBy(o.getContentTitle?o.getContentTitle():"")}});return t}.bind(this))};return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldInput",["sap/m/Input","sap/ui/mdc/field/FieldInputRenderer"],function(e,t){"use strict";var i=e.extend("sap.ui.mdc.field.FieldInput",{metadata:{library:"sap.ui.mdc",properties:{ariaAttributes:{type:"object",defaultValue:{},byValue:true}}},renderer:t});return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldInputRenderUtil",["sap/ui/core/InvisibleText"],function(e){"use strict";var t={getAriaRole:function(e,t){var i=e.getAriaAttributes();if(i.role){return i.role}else{return t.getAriaRole.apply(this,arguments)}},getAccessibilityState:function(t,i){var r=t.getAriaAttributes();var a=i.getAccessibilityState.apply(this,arguments);if(r.aria){for(var l in r.aria){a[l]=r.aria[l]}}if(!r.valueHelpEnabled&&a.describedby){var s=e.getStaticId("sap.m","INPUT_VALUEHELP");var n=a.describedby.value.split(" ");var u="";for(var b=0;b<n.length;b++){var d=n[b];if(d!==s){u=u?u+" "+d:d}}if(u){a.describedby.value=u}else{delete a.describedby}}return a},writeInnerAttributes:function(e,t,i){i.writeInnerAttributes.apply(this,arguments);var r=t.getAriaAttributes();for(var a in r){if(a!=="aria"&&a!=="role"&&a!=="valueHelpEnabled"){e.attr(a,r[a])}}}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldInputRenderer",["sap/ui/core/Renderer","sap/m/InputRenderer","sap/ui/mdc/field/FieldInputRenderUtil"],function(e,t,i){"use strict";var r=e.extend(t);r.apiVersion=2;r.addOuterClasses=function(e,i){t.addOuterClasses.apply(this,arguments);e.class("sapUiMdcFieldInput")};r.getAriaRole=function(e){return i.getAriaRole.call(this,e,t)};r.getAccessibilityState=function(e){return i.getAccessibilityState.call(this,e,t)};r.writeInnerAttributes=function(e,r){return i.writeInnerAttributes.call(this,e,r,t)};return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldMultiInput",["sap/m/MultiInput","sap/ui/mdc/field/FieldMultiInputRenderer"],function(e,t){"use strict";var i=e.extend("sap.ui.mdc.field.FieldMultiInput",{metadata:{library:"sap.ui.mdc",properties:{ariaAttributes:{type:"object",defaultValue:{},byValue:true}}},renderer:t});return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldMultiInputRenderer",["sap/ui/core/Renderer","sap/m/MultiInputRenderer","sap/ui/mdc/field/FieldInputRenderUtil"],function(e,t,i){"use strict";var r=e.extend(t);r.apiVersion=2;r.addOuterClasses=function(e,i){t.addOuterClasses.apply(this,arguments);e.class("sapUiMdcFieldMultiInput")};r.getAriaRole=function(e){return i.getAriaRole.call(this,e,t)};r.getAccessibilityState=function(e){return i.getAccessibilityState.call(this,e,t)};r.writeInnerAttributes=function(e,r){return i.writeInnerAttributes.call(this,e,r,t)};return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldValueHelp",["sap/ui/mdc/field/FieldHelpBase","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/enum/OutParameterMode","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/condition/FilterConverter","sap/ui/base/ManagedObjectObserver","sap/ui/base/SyncPromise","sap/base/util/ObjectPath","sap/base/util/deepEqual","sap/base/util/merge","sap/ui/model/resource/ResourceModel","sap/ui/model/Context","sap/ui/Device","sap/m/library","sap/ui/core/library","sap/ui/mdc/util/loadModules","sap/ui/events/KeyCodes"],function(e,t,i,a,r,n,s,l,o,h,u,d,f,g,c,p,v,_){"use strict";var m;var b;var y;var C;var F;var P;var O;var S;var I;var D=c.ButtonType;var A=p.OpenState;var B=e.extend("sap.ui.mdc.field.FieldValueHelp",{metadata:{library:"sap.ui.mdc",properties:{delegate:{type:"object",group:"Data",defaultValue:{name:"sap/ui/mdc/field/FieldValueHelpDelegate"}},filterFields:{type:"string",defaultValue:""},keyPath:{type:"string",defaultValue:""},descriptionPath:{type:"string",defaultValue:""},showConditionPanel:{type:"boolean",defaultValue:false},title:{type:"string",group:"Appearance",defaultValue:""},noDialog:{type:"boolean",group:"Appearance",defaultValue:false},caseSensitive:{type:"boolean",defaultValue:true},_enableOK:{type:"boolean",group:"Appearance",defaultValue:true,visibility:"hidden"}},aggregations:{content:{type:"sap.ui.mdc.field.FieldValueHelpContentWrapperBase",multiple:false},suggestContent:{type:"sap.ui.mdc.field.FieldValueHelpContentWrapperBase",multiple:false},dialogContent:{type:"sap.ui.mdc.field.FieldValueHelpContentWrapperBase",multiple:false},filterBar:{type:"sap.ui.mdc.filterbar.FilterBarBase",multiple:false},inParameters:{type:"sap.ui.mdc.field.InParameter",group:"Data",multiple:true},outParameters:{type:"sap.ui.mdc.field.OutParameter",group:"Data",multiple:true},_dialog:{type:"sap.m.Dialog",multiple:false,visibility:"hidden"},_filterBar:{type:"sap.ui.mdc.filterbar.FilterBarBase",multiple:false,visibility:"hidden"},collectiveSearchItems:{type:"sap.ui.core.Item",multiple:true,singularName:"collectiveSearchItem"}},defaultAggregation:"content",events:{dataRequested:{}}}});B._init=function(){e._init.apply(this,arguments);m=undefined;b=undefined;y=undefined;C=undefined;F=undefined};B.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver=new s(V.bind(this));this._oObserver.observe(this,{properties:["filterValue","conditions","showConditionPanel","filterFields"],aggregations:["content","suggestContent","dialogContent","filterBar","_filterBar","inParameters","collectiveSearchItems"]});this.setBindingContext(null);this._oConditions={}};B.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this._oManagedObjectModel){this._oManagedObjectModel.destroy();delete this._oManagedObjectModel}this._oObserver.disconnect();this._oObserver=undefined;delete this._oConditions;if(this._iUpdateTimer){clearTimeout(this._iUpdateTimer);this._iUpdateTimer=null}if(this._iFilterTimer){clearTimeout(this._iFilterTimer);this._iFilterTimer=null}if(this._iSearchFieldTimer){clearTimeout(this._iSearchFieldTimer);this._iSearchFieldTimer=null}if(this._oCollectiveSearchSelect){this._oCollectiveSearchSelect.destroy();delete this._oCollectiveSearchSelect}if(this._oResourceBundleM){this._oResourceBundleM=null}if(this._oResourceBundle){this._oResourceBundle=null}};B.prototype.invalidate=function(t){if(t){var i=Be.call(this,true);var a=Be.call(this,false);var r=this.getAggregation("_dialog");if(i&&t===i||a&&t===a){var n=this.getAggregation("_popover");if(r&&r.isOpen()){var s=r.getContent()[0];s.invalidate(t)}else if(n&&n.isOpen()){n.invalidate(t)}return}var l=this._getFilterBar();if(r&&t===r||l&&t===l){if(t.bOutput&&!this._bIsBeingDestroyed){var o=this.getParent();if(o){o.invalidate(this)}}return}}e.prototype.invalidate.apply(this,arguments)};B.prototype.connect=function(t){e.prototype.connect.apply(this,arguments);Oe.call(this);pe.call(this,this.getShowConditionPanel());return this};B.prototype.getIcon=function(){if(this.getNoDialog()){return"sap-icon://slim-arrow-down"}else{return"sap-icon://value-help"}};B.prototype._createPopover=function(){var t=e.prototype._createPopover.apply(this,arguments);var i=function(e){this.fireSwitchToValueHelp()}.bind(this);if(t){t.addDelegate({onsapshow:i});var a=Be.call(this,true);if(a){l.resolve(a.initialize(true)).then(function(){if(a.enableShowAllItems()){v(["sap/m/Button","sap/m/Toolbar","sap/m/ToolbarSpacer"]).then(function(e){var r=e[0];var n=e[1];var s=e[2];var l=Se.apply(this);var o=new r(this.getId()+"-showAllItems",{text:l.getText("INPUT_SUGGESTIONS_SHOW_ALL"),press:i});var h=[new s(this.getId()+"-Spacer")].concat(o);var u=new n(this.getId()+"-TB",{content:h,visible:!a.getAllItemsShown()}).setModel(this._oFooterModel,"$config");t.setFooter(u)}.bind(this))}}.bind(this))}t._getAllContent=function(){var e=this.getParent();var t=[];if(e){var i=Pe.call(e);if(i){t.push(i)}}return t};if(this._bNavigate){this.navigate(this._iStep)}}return t};B.prototype._handleAfterOpen=function(t){e.prototype._handleAfterOpen.apply(this,arguments);var i=Be.call(this,true);if(i){i.fieldHelpOpen(true)}};B.prototype.open=function(t){if(this.getNoDialog()&&!t){t=true}Oe.call(this);if(this._bOpenAfterPromise){this._bSuggestion=t;return}var i=Be.call(this,t);var a=function(){if(this._bOpenAfterPromise){delete this._bOpenAfterPromise;this.open(this._bSuggestion);delete this._bSuggestion}}.bind(this);var r=this._bOpen?this._callContentRequest(!!t,a):this._fireOpen(!!t,a);delete this._bOpen;if(!r){this._bSuggestion=t;if(t){this._getPopover()}else{ue.call(this)}this._bOpenAfterPromise=true;return}this._bOpenHandled=true;i=Be.call(this,t);if(i&&i.getFilterEnabled()&&!this._bNavigateRunning){this._bApplyFilter=false;if(!i.isSuspended()||t||this.getFilterValue()){this._bApplyFilter=true}me.call(this)}if(this._bUpdateFilterAfterClose){this._bUpdateFilterAfterClose=false;j.call(this,this.getFilterValue())}if(t){if(!i){this._bOpenIfContent=true}else{i.fieldHelpOpen(t);if(!this.getFilterValue()&&!this._bNavigateRunning){ie.call(this,true)}e.prototype.open.apply(this,[t])}}else{var n=this.getAggregation("_popover");if(n){if(n.isOpen()){this.close();this._bSwitchToDialog=true}n.$().remove()}var s=ue.call(this);if(s){Fe.call(this);Ae.call(this,true);_e.call(this);s.setFieldGroupIds(this._oField.getFieldGroupIds());var l=s.getContent()[0];l.setShowTokenizer(this.getMaxConditions()!==1&&!!i);l.setFormatOptions(this._getFormatOptions());l.bindProperty("conditions",{path:"$help>/conditions"});if(i){i.fieldHelpOpen(false);K.call(this)}this._aOldConditions=this.getConditions();s.open();this._bDialogOpen=true}else{this._bOpen=true}}this._bOpenHandled=false;return};B.prototype.toggleOpen=function(t){if(this.getNoDialog()&&!t){t=true}if(t){e.prototype.toggleOpen.apply(this,[t])}else if(this._bOpen||this._bOpenIfContent||this._bOpenAfterPromise){delete this._bOpen;delete this._bSuggestion;delete this._bOpenIfContent;delete this._bOpenAfterPromise}else{var i=ue.call(this);if(i){if(i.isOpen()){var a=i.oPopup.getOpenState();if(a!=="CLOSED"&&a!=="CLOSING"){this.close()}else{this._bReopen=true}}else{this.open(t)}}else{this.open(t)}}};B.prototype.close=function(){if(!this._bDialogOpen){e.prototype.close.apply(this,arguments)}else{var t=this.getAggregation("_dialog");if(t){this._bClosing=true;t.close();var i=t.getContent()[0];i.unbindProperty("conditions",true);if(i._oDefineConditionPanel){i._oDefineConditionPanel.cleanUp()}}this._bReopen=false;this._bSwitchToDialog=false;delete this._bOpen;delete this._bOpenAfterPromise}};B.prototype.isOpen=function(t){var i=e.prototype.isOpen.apply(this,arguments);if(!i&&(!t||!this._bClosing)){var a=this.getAggregation("_dialog");if(a){i=a.isOpen()}}return i};B.prototype.getDomRef=function(){if(!this._bDialogOpen){return e.prototype.getDomRef.apply(this,arguments)}else{var t=this.getAggregation("_dialog");if(t){return t.getDomRef()}}};function T(){var e=this._getFilterBar();var t;if(e){t=e.getInternalConditions()}else{t=this._oConditions}var i=false;for(var a in t){if(t[a].length>0){Ce.call(this,a);i=true}}if(i){ie.call(this,true)}}B.prototype._handleAfterClose=function(t){var i=this.getAggregation("_dialog");var a=!i||t.getSource()!==i;var r=Be.call(this,a);if(r){if(!r.getAsyncKeyText()){T.call(this)}r.fieldHelpClose()}if(!this.isOpen()){this._bApplyFilter=false}this._bNavigateRunning=false;e.prototype._handleAfterClose.apply(this,arguments)};function V(e){if(e.object==this){var t;if(e.name==="content"){he.call(this,e.mutation,e.child,e.name)}if(e.name==="suggestContent"){he.call(this,e.mutation,e.child,e.name)}if(e.name==="dialogContent"){he.call(this,e.mutation,e.child,e.name)}if(e.name==="filterBar"){if(e.mutation==="insert"&&this.getAggregation("_filterBar")){this.destroyAggregation("_filterBar");delete this._oSearchField}ve.call(this,e.mutation,e.child,false)}if(e.name==="_filterBar"){ve.call(this,e.mutation,e.child,true)}if(e.name==="conditions"){q.call(this,e.current)}if(e.name==="filterValue"){if(this._bClosing){this._bUpdateFilterAfterClose=true}else{j.call(this,e.current)}}if(e.name==="showConditionPanel"){pe.call(this,e.current)}if(e.name==="filterFields"){t=this.getAggregation("_dialog");if(t){if(t.isOpen()){if(e.current){Fe.call(this)}else if(this.getAggregation("_filterBar")){this.destroyAggregation("_filterBar")}}}}if(e.name==="inParameters"){$.call(this,e.child,e.mutation)}if(e.name==="collectiveSearchItems"){Ae.call(this,false)}}else if(e.object.isA("sap.ui.mdc.field.InParameter")){if(e.name==="value"){W.call(this,e.object.getHelpPath(),e.current,e.old,e.object.getUseConditions(),e.object.getInitialValueFilterEmpty())}if(e.name==="helpPath"){G.call(this,e.current,e.old,e.object.getValue(),e.object.getUseConditions(),e.object.getInitialValueFilterEmpty())}}}B.prototype.openByTyping=function(){if(!this._bDetermineSearchSupportedCalled&&!this.isOpen()&&!this._bOpen&&!this._bOpenIfContent&&!this._bOpenAfterPromise){if(!this.bDelegateInitialized&&!this.bDelegateLoading){this.initControlDelegate()}if(this.bDelegateInitialized){return M.call(this)}else{this._bDetermineSearchSupportedCalled=true;return this.awaitControlDelegate().then(function(){return M.call(this)}.bind(this))}}return!!this.getFilterFields()};function M(){this.fireOpen({suggestion:true});this._bDetermineSearchSupportedCalled=true;var e=this.getControlDelegate().determineSearchSupported(this.getPayload(),this);if(e instanceof Promise){return e.then(function(){return!!this.getFilterFields()}.bind(this))}else{return!!this.getFilterFields()}}B.prototype.isFocusInHelp=function(){if(!this.getNoDialog()){var e=this.getAggregation("_dialog");if(e&&e.isOpen()||this._bDialogRequested&&this._bOpen||this._bOpenAfterPromise&&!this._bSuggestion){return true}}if(this._bFocusPopover){return true}return false};B.prototype.removeFocus=function(){var e=Be.call(this,true);if(e){e.removeFocus()}};B.prototype.navigate=function(e){var t=Be.call(this,true);var i=this.getAggregation("_popover");Oe.call(this);if(!i||!i.isOpen()){var a=function(){this.navigate(e)}.bind(this);var r=this._bNavigate?this._callContentRequest(true,a):this._fireOpen(true,a);if(!r){t=Be.call(this,true);this._bNavigate=false;this._iStep=null;if(t){this._getPopover()}return}}this._bNavigate=false;this._iStep=null;t=Be.call(this,true);if(t){i=this._getPopover();this._bApplyFilter=true;this._bNavigateRunning=true;me.call(this);ie.call(this,true)}if(!i){this._bNavigate=true;this._iStep=e;return}if(t){t.navigate(e,i.isOpen())}};function x(e){var t=this._getPopover();var i=e.getParameter("disableFocus");var a=e.getParameter("key");var r=e.getParameter("description");var n=e.getParameter("inParameters");var s=e.getParameter("outParameters");var l=e.getParameter("leave");var o=e.getParameter("itemId");var h;if(l){this.fireNavigate({key:undefined,value:undefined,condition:undefined,itemId:undefined,leaveFocus:l});return}if(a===undefined&&!i){this._bFocusPopover=true}if(!t.isOpen()){this._bOpenHandled=true;this.open(true);this._bOpenHandled=false}this._bNavigateRunning=false;if(a===undefined){this._bFocusPopover=false;return}if(n){n=X.call(this,n)}if(s){s=J.call(this,s)}h=this._createCondition(a,r,n,s);this.setProperty("conditions",[h],true);this.fireNavigate({value:r,key:a,condition:h,itemId:o,leaveFocus:l})}B.prototype._getTextOrKey=function(e,t,i,a,r,n,s,o,h,u,d){var g="";var c=Be.call(this,true);if(c){var p=c.getListBinding();if(!p){this.fireDataRequested()}if(i&&!i.getModel()){return null}d=d||this.getCaseSensitive();var v=this.oBindingContexts[undefined];var _=this.getInParameters();var m=false;if(i&&f.hasChanged(v,i)){m=true}var b=w.call(this,_,m,i,v,s,o);g=l.resolve().then(function(){return H.call(this,b)}.bind(this)).then(function(){return l.resolve().then(function(){if(i&&!i.getModel()){return null}else if(u){return c.getKeyAndText(h,e,te.call(this,a,_,false,b,i,true),te.call(this,r,this.getOutParameters(),true,undefined,undefined,true),d)}else if(t){return c.getTextForKey(e,te.call(this,a,_,false,b,i,true),te.call(this,r,this.getOutParameters(),true,undefined,undefined,true),n,d)}else{return c.getKeyForText(e,te.call(this,undefined,_,false,b,i,true),n,d)}}.bind(this)).then(function(e){R.call(this,b,m);return E.call(this,e)}.bind(this)).unwrap()}.bind(this)).unwrap()}return g};function w(e,t,i,a,r,n){var s=[];for(var l=0;l<e.length;l++){var o=e[l];var u=o.getBinding("value");if(o.getUseConditions()&&r){var d=this.getModel(n);if(d!==r){s.push(r.bindProperty("/"+o.getFieldPath()))}}else if(u){var f=u.getPath();var g=u.getContext();if(t&&u.isRelative()&&(g===a||!g&&a)){if(i.getProperty(f)===undefined){var c=u.getModel();s.push(c.bindProperty(f,i))}}else if(!g&&u.isRelative()||g&&g.getProperty(f)===undefined||u.getValue()===undefined||g&&!h(o.validateProperty("value",g.getProperty(f)),o.getValue())){s.push(u)}}}return s}function R(e,t){if(!t){return}for(var i=0;i<e.length;i++){e[i].destroy()}}function H(e){if(e.length===0){return null}if(!this.bDelegateInitialized&&!this.bDelegateLoading){this.initControlDelegate()}if(this.bDelegateInitialized){return this.getControlDelegate().checkBindingsPending(this.getPayload(),e)}else{return this.awaitControlDelegate().then(function(){return this.getControlDelegate().checkBindingsPending(this.getPayload(),e)}.bind(this))}}function E(e){if(e&&typeof e==="object"){e=u({},e);if(e.inParameters){e.inParameters=X.call(this,e.inParameters)}if(e.outParameters){e.outParameters=J.call(this,e.outParameters)}}return e}B.prototype._isTextOrKeyRequestSupported=function(){var e=Be.call(this,true);return!!e};B.prototype.isUsableForValidation=function(){var e=Be.call(this,true);return!!e};function N(e){var t=e.getParameter("selectedItems");var i=e.getParameter("itemPress");var a;var n=this.getConditions();var s;var l=0;var o=0;var u=false;var d=this.getMaxConditions();var f=this._getOperator();for(l=n.length-1;l>=0;l--){s=n[l];s.inParameters=Z.call(this,s.inParameters);s.outParameters=ee.call(this,s.outParameters);if(s.operator===f.name&&s.validated===r.Validated){u=false;for(o=0;o<t.length;o++){a=t[o];if(s.values[0]===a.key&&(!s.inParameters||!a.inParameters||h(s.inParameters,a.inParameters))&&(!s.outParameters||!a.outParameters||h(s.outParameters,a.outParameters))){u=true;if(s.values[1]!==a.description&&a.description){if(s.values.length===1){s.values.push(a.description)}else{s.values[1]=a.description}}break}}if(!u){n.splice(l,1)}}}for(l=0;l<t.length;l++){a=t[l];u=false;for(o=0;o<n.length;o++){s=n[o];if(s.operator===f.name&&s.validated===r.Validated&&s.values[0]===a.key&&(!s.inParameters||h(s.inParameters,a.inParameters))&&(!s.outParameters||h(s.outParameters,a.outParameters))){u=true;s.inParameters=a.inParameters;s.outParameters=a.outParameters;break}}if(!u){s=this._createCondition(a.key,a.description,a.inParameters,a.outParameters);n.push(s)}}if(d>0&&n.length>d){n.splice(0,n.length-d)}for(l=0;l<n.length;l++){s=n[l];if(s.inParameters){s.inParameters=X.call(this,s.inParameters)}else{delete s.inParameters}if(s.outParameters){s.outParameters=J.call(this,s.outParameters)}else{delete s.outParameters}}if(this._bDialogOpen){this.setProperty("conditions",n,true)}else{var g=false;var c=false;if(this.getMaxConditions()===1||i){this.close();c=true}if(this.getMaxConditions()===1){g=true}this.setProperty("conditions",n,true);this.fireSelect({conditions:n,add:g,close:c})}}function U(e){var t=e.getParameter("contentChange");var i=e.getSource();var a;if(i.enableShowAllItems()){a=this.getAggregation("_popover");var r=a&&a.getFooter();if(r){r.setVisible(!i.getAllItemsShown())}}if(t){a=a||this.getAggregation("_popover");var n=this.getAggregation("_dialog");if(a&&this._bOpenIfContent){i=Be.call(this,true);if(i){var s=this._getField();if(s){i.fieldHelpOpen(true);a.openBy(this._getControlForSuggestion());ie.call(this)}this._bOpenIfContent=false}}else if(n){i=Be.call(this,false);if(i){var l=n.getContent()[0];oe.call(this,l,i.getDialogContent());if(!this._bApplyFilter&&!this._bClosing&&(this.isOpen()||this._bOpen)&&!i.isSuspended()){this._bApplyFilter=true}}}}if(!i||!i.getAsyncKeyText()){this.fireDataUpdate()}}function q(e){var t=false;for(var a=0;a<e.length;a++){var r=e[a];if(!r.validated){i.checkConditionValidated(r);t=true}}if(t){this.setConditions(e)}else{K.call(this)}}function K(){if(!this._oField){return}k.call(this,Be.call(this,true));k.call(this,Be.call(this,false))}function k(e){if(e){var t=this._getOperator();var i=this.getConditions();var a=[];for(var n=0;n<i.length;n++){var s=i[n];if(s.operator===t.name&&s.validated===r.Validated){a.push({key:s.values[0],description:s.values[1],inParameters:Z.call(this,s.inParameters),outParameters:ee.call(this,s.outParameters)})}}if(!h(a,e.getSelectedItems())){e.setSelectedItems(a)}}}function j(e){var i=this.getFilterFields();if(!i){return}var a=be.call(this,i);var n=a.length>0?a[0].values[0]:"";if(e===n){return}Ce.call(this,i);e=e.trim();if(e){this._bOwnFilterChange=false;var s=t.createCondition("StartsWith",[e],undefined,undefined,r.NotValidated);ye.call(this,i,s)}ie.call(this,true)}function $(e,t){var i=e.getHelpPath();var a=false;if(t==="remove"){this._oObserver.unobserve(e);if(this._getField()&&this.isOpen()){a=z.call(this,i)}}else{this._oObserver.observe(e,{properties:true});if(this._getField()&&this.isOpen()){var r=e.getValue();var n=e.getUseConditions();var s=e.getInitialValueFilterEmpty();a=z.call(this,i);a=L.call(this,i,r,n,s)||a;K.call(this)}}ie.call(this,true)}function L(e,i,a,n){var s;var l=false;if(e&&(i||n&&!a)){if(a){if(Array.isArray(i)){for(var o=0;o<i.length;o++){s=u({},i[o]);if(s.inParameters){s.inParameters=Z.call(this,s.inParameters,true)}if(s.outParameters){s.outParameters=ee.call(this,s.outParameters,false,true)}ye.call(this,e,s);l=true}}}else{if(!i&&n){s=t.createCondition("Empty",[]);s.isEmpty=false}else{s=t.createItemCondition(i);s.validated=r.Validated}ye.call(this,e,s);l=true}}return l}function z(e){var t=false;if(e&&be.call(this,e).length>0){Ce.call(this,e);t=true}return t}function W(e,t,i,a,r){if(this._bNoInOutFilterUpdate){return}if(!this._iUpdateTimer){this._iUpdateTimer=setTimeout(function(){this._iUpdateTimer=undefined;this.fireDataUpdate()}.bind(this),0)}if(!this._getField()||!this.isOpen()){return}var n=false;n=z.call(this,e);n=L.call(this,e,t,a,r)||n;K.call(this);ie.call(this,true)}function G(e,t,i,a,r){if(!this._getField()||!this.isOpen()){return}var n=false;n=z.call(this,t);n=L.call(this,e,i,a,r)||n;ie.call(this,true)}function Q(){var e=this.getInParameters();var t=false;for(var i=0;i<e.length;i++){var a=e[i];var r=a.getHelpPath();var n=a.getValue();var s=a.getUseConditions();var l=a.getInitialValueFilterEmpty();t=z.call(this,r)||t;t=L.call(this,r,n,s,l)||t}if(t||this._bApplyFilter&&this._bPendingFilterUpdate){this._bPendingFilterUpdate=false;ie.call(this,true)}}B.prototype.onFieldChange=function(){var e=this.getOutParameters();Oe.call(this);var n=w.call(this,e,false);l.resolve().then(function(){return H.call(this,n)}.bind(this)).then(function(){if(this.bIsDestroyed){return}var n=this.getConditions();for(var s=0;s<n.length;s++){var l=n[s];if(l.outParameters){for(var o in l.outParameters){for(var h=0;h<e.length;h++){var u=e[h];var d=u.getValue();var f=u.getUseConditions();var g=true;if(u.getMode()===a.WhenEmpty){if(f){g=!d||Array.isArray(d)&&d.length===0}else{g=!d}}if(g){if(f){var c;if(!u.getHelpPath()){c=t.createCondition("EQ",[u.getFixedValue()],undefined,undefined,r.NotValidated)}else if(u.getFieldPath()===o){c=t.createCondition("EQ",[l.outParameters[o]],undefined,undefined,r.Validated)}else{continue}if(!d){d=[]}if(!Array.isArray(d)){throw new Error("Value on OutParameter must be an array "+u)}if(i.indexOfCondition(c,d)<0){c.validated=r.Validated;d.push(c);u.setValue(d)}}else if(!u.getHelpPath()){u.setValue(u.getFixedValue())}else if(u.getFieldPath()===o){u.setValue(l.outParameters[o])}}}}}}}.bind(this)).unwrap()};function X(e){return Y.call(this,e,this.getInParameters())}function J(e){return Y.call(this,e,this.getOutParameters())}function Y(e,t){if(!e||t.length===0){return null}var i={};for(var a=0;a<t.length;a++){var r=t[a];var n=r.getHelpPath();var s=r.getFieldPath();if(n&&s){for(var l in e){if(n===l){i[s]=e[l];break}}}else if(!n&&s&&r.getFixedValue){i[s]=r.getFixedValue()}}return i}function Z(e,t){return te.call(this,e,this.getInParameters(),false,undefined,undefined,false,t)}function ee(e,t,i){return te.call(this,e,this.getOutParameters(),t,undefined,undefined,false,i)}function te(e,i,a,s,l,o,h){var d;var f;var g;var c;var p=0;var v;if(i.length>0){if(!e){if(!a){var _=this.getBindingContext();for(p=0;p<i.length;p++){f=i[p];g=h?"conditions/"+f.getHelpPath():f.getHelpPath();var m=f.getValue();var b=f.getUseConditions();var y=f.getInitialValueFilterEmpty();var C=0;if(s||l){var F=f.getBinding("value");var P=false;if(F||b){c=f.getFieldPath();for(C=0;C<s.length;C++){if(F&&F.getPath()===s[C].getPath()||b&&s[C].getPath()==="/"+c){m=s[C].getValue();P=true;break}}if(!P&&!b&&l&&F&&F.isRelative()&&(!F.getContext()||F.getContext()!==l&&F.getContext()===_)){m=l.getProperty(F.getPath())}}}if(g){if(!d){d={}}if(o){d[g]=[];if(b){if(!m){m=[]}for(C=0;C<m.length;C++){v=u({},m[C]);if(v.inParameters){v.inParameters=Z.call(this,v.inParameters,true)}if(v.outParameters){v.outParameters=ee.call(this,v.outParameters,false,true)}d[g].push(v)}}else{if(!m&&y){v=t.createCondition("Empty",[]);v.isEmpty=false}else if(m){v=t.createItemCondition(m);v.validated=r.Validated}if(v){d[g].push(v)}}v=undefined}else{if(b){if(m&&m.length>0){d[g]=m[0].values[0]}}else{d[g]=m}}}}}}else{for(var O in e){for(p=0;p<i.length;p++){f=i[p];g=h?"conditions/"+f.getHelpPath():f.getHelpPath();c=f.getFieldPath();if(c&&(c===O||c==="conditions/"+O)&&g){if(!d){d={}}if(o){d[g]=[];v=t.createItemCondition(e[O]);v.validated=r.Validated;d[g].push(v)}else{d[g]=e[O]}}}}}if(o){var S=this._getTypesForConditions(d);var I=n.createFilters(d,S);d=I}}return d}function ie(e){if(e){if(!this._iFilterTimer){this._iFilterTimer=setTimeout(function(){this._iFilterTimer=undefined;ie.call(this)}.bind(this),0)}return}else if(this._iFilterTimer){clearTimeout(this._iFilterTimer);this._iFilterTimer=undefined}if(!this.isOpen()&&!this._bNavigateRunning&&!this._bOpen||this._bClosing&&!this._bSwitchToDialog||!this._bApplyFilter){this._bPendingFilterUpdate=true;return}if(this._bFilterWaitingForBinding){return}var t=this.getInParameters();var i=w.call(this,t,false);var a=H.call(this,i);if(a instanceof Promise){a.then(function(){this._bFilterWaitingForBinding=false;ie.call(this,true)}.bind(this));this._bFilterWaitingForBinding=true;return}var r=this.getAggregation("_dialog");var s=(!r||!r.isOpen())&&!(this._bClosing&&this._bSwitchToDialog);var l=Be.call(this,s);if(l){var o=this._getFilterBar();var h;if(o){h=o.getInternalConditions()}else{h=this._oConditions}var u=this._getTypesForConditions(h);var d=n.createFilters(h,u,undefined,this.getCaseSensitive());var f=[];var g=h["$search"];var c;if(d){f.push(d)}if(g&&g.length>0){c=g[0].values[0]}l.applyFilters(f,c,o)}}B.prototype._getTypesForConditions=function(e){var t=this.getFilterBar();var i=this.getInParameters();var a;var r;if(t){a=n.createConditionTypesMapFromFilterBar(e,t)}else{a={};for(r in e){a[r]={type:null}}}for(r in a){if(!a[r].type){for(var s=0;s<i.length;s++){var l=i[s];if(l.getHelpPath()===r){a[r].type=l.getDataType();break}}}}return a};B.prototype.getMaxConditions=function(){if(this._oField&&this._oField.getMaxConditionsForHelp){return this._oField.getMaxConditionsForHelp()}else if(this._oField&&this._oField.getMaxConditions){return this._oField.getMaxConditions()}else{return 1}};B.prototype.getDisplay=function(){if(this._oField&&this._oField.getDisplay){return this._oField.getDisplay()}};B.prototype.getRequired=function(){if(this._oField&&this._oField.getRequired){return this._oField.getRequired()}else{return false}};B.prototype.getDataType=function(){if(this._oField.getDataType){return this._oField.getDataType()}else{return"sap.ui.model.type.String"}};B.prototype._getFormatOptions=function(){if(this._oField&&this._oField._getFormatOptions){return this._oField._getFormatOptions()}else{return{}}};B.prototype._getKeyPath=function(){var e=this.getKeyPath();if(!e&&this._oField&&this._oField.getFieldPath&&this._oField.getFieldPath()){e=this._oField.getFieldPath()}return e};B.prototype._getFilterBar=function(){var e=this.getFilterBar();if(!e){e=this.getAggregation("_filterBar")}return e};B.prototype.clone=function(t,i){var a=[this.getContent(),this.getSuggestContent(),this.getDialogContent()];var r=this.getFilterBar();var n=0;var s;for(n=0;n<a.length;n++){s=a[n];if(s){s.detachEvent("navigate",x,this);s.detachEvent("selectionChange",N,this);s.detachEvent("dataUpdate",U,this)}}if(r){r.detachEvent("search",_e,this)}var l=e.prototype.clone.apply(this,arguments);for(n=0;n<a.length;n++){s=a[n];if(s){s.attachEvent("navigate",x,this);s.attachEvent("selectionChange",N,this);s.attachEvent("dataUpdate",U,this)}}if(r){r.attachEvent("search",_e,this)}return l};function ae(){var e;if((!m||!b||!y||!C||!F||!P||!O||!S||!I)&&!this._bDialogRequested){m=sap.ui.require("sap/m/Dialog");b=sap.ui.require("sap/m/Button");y=sap.ui.require("sap/ui/mdc/field/ValueHelpPanel");C=sap.ui.require("sap/ui/mdc/field/DefineConditionPanel");F=sap.ui.require("sap/ui/model/base/ManagedObjectModel");P=sap.ui.require("sap/ui/mdc/filterbar/vh/FilterBar");O=sap.ui.require("sap/ui/mdc/FilterField");S=sap.ui.require("sap/ui/mdc/filterbar/vh/CollectiveSearchSelect");I=sap.ui.require("sap/ui/core/Item");if(!m||!b||!y||!C||!F||!P||!O||!S||!I){sap.ui.require(["sap/m/Dialog","sap/m/Button","sap/ui/mdc/field/ValueHelpPanel","sap/ui/mdc/field/DefineConditionPanel","sap/ui/model/base/ManagedObjectModel","sap/ui/mdc/filterbar/vh/FilterBar","sap/ui/mdc/FilterField","sap/ui/mdc/filterbar/vh/CollectiveSearchSelect","sap/ui/core/Item"],se.bind(this));this._bDialogRequested=true}}if(m&&b&&y&&C&&F&&P&&O&&S&&I&&!this._bDialogRequested){if(!this._oResourceBundle){this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")}var t=new b(this.getId()+"-ok",{text:this._oResourceBundle.getText("valuehelp.OK"),enabled:"{$help>/_enableOK}",type:D.Emphasized,press:de.bind(this)});var i=new b(this.getId()+"-cancel",{text:this._oResourceBundle.getText("valuehelp.CANCEL"),press:fe.bind(this)});this._oManagedObjectModel=new F(this);var a=le.call(this);e=new m(this.getId()+"-dialog",{contentHeight:re(),contentWidth:ne(),horizontalScrolling:false,verticalScrolling:false,title:"{$help>/title}",stretch:g.system.phone,resizable:true,draggable:true,content:[a],afterOpen:ge.bind(this),afterClose:ce.bind(this),buttons:[t,i]}).setModel(this._oManagedObjectModel,"$help");e.isPopupAdaptationAllowed=function(){return false};e.addStyleClass("sapMdcValueHelpTitle");this.setAggregation("_dialog",e,true);this.setModel(new d({bundleName:"sap/ui/mdc/messagebundle",async:false}),"$i18n");pe.call(this,this.getShowConditionPanel())}return e}function re(){if(g.system.desktop){return"700px"}if(g.system.tablet){return g.orientation.landscape?"600px":"600px"}}function ne(){if(g.system.desktop){return"1080px"}if(g.system.tablet){return g.orientation.landscape?"920px":"600px"}}function se(e,t,i,a,r,n,s,l,o){m=e;b=t;y=i;C=a;F=r;P=n;O=s;S=l;I=o;this._bDialogRequested=false;if(!this._bIsBeingDestroyed){ae.call(this);if(this._bOpen){this.open()}}}function le(){var e=Be.call(this,false);var t=this._getFilterBar();var i=new y(this.getId()+"-VHP",{height:"100%",showFilterbar:!!t,formatOptions:this._getFormatOptions(),inputOK:"{$help>/_enableOK}"});i.setModel(this._oManagedObjectModel,"$help");if(e){e.initialize(false);oe.call(this,i,e.getDialogContent())}if(t){i.setFilterbar(t)}return i}function oe(e,t){e.setTable(t)}function he(e,t,i){var a=this.getAggregation("_popover");var r=this.getAggregation("_dialog");if(e==="remove"){t.detachEvent("navigate",x,this);t.detachEvent("selectionChange",N,this);t.detachEvent("dataUpdate",U,this);t=undefined}else{t.attachEvent("navigate",x,this);t.attachEvent("selectionChange",N,this);t.attachEvent("dataUpdate",U,this);K.call(this)}this.fireDataUpdate();if(this._bNavigate){this.navigate(this._iStep)}else if(a){a.invalidate();var n=this.getFilterValue();if(n){j.call(this,n)}Q.call(this);if(t&&this._bOpenIfContent){t.initialize(true);var s=this._getField();if(s){t.fieldHelpOpen(true);a.openBy(this._getControlForSuggestion())}this._bOpenIfContent=false}}else if(t&&this._bOpenIfContent){this._bOpenIfContent=false;this.open(true)}if(r&&i!=="suggestContent"&&!(i==="content"&&this.getDialogContent())){if(t){t.initialize(false);var l=r.getContent()[0];l.setShowTokenizer(this.getMaxConditions()!==1);oe.call(this,l,t.getDialogContent());if(r.isOpen()||this._bOpen){t.fieldHelpOpen(false)}}}}function ue(){var e=this.getAggregation("_dialog");if(!e){e=ae.call(this)}return e}function de(e){this.close();var a=this.getConditions();a=t._removeEmptyConditions(a);a=t._removeInitialFlags(a);i.updateConditionsValues(a);this.setProperty("conditions",a,true);this._bOK=true}function fe(e){this.close();this.setProperty("conditions",this._aOldConditions,true)}function ge(e){this._bSwitchToDialog=false}function ce(e){var t=this.getConditions();this._bDialogOpen=false;this._aOldConditions=undefined;this._handleAfterClose(e);if(this._bOK){this.fireSelect({conditions:t,add:false,close:true})}this._bOK=undefined;this.setProperty("_enableOK",true,true)}function pe(e){var t=this.getAggregation("_dialog");if(t&&this._oField){var i=t.getContent()[0];if(e){if(!i._oDefineConditionPanel){var a=new C(this.getId()+"-DCP",{label:"{$help>/title}"});i.setDefineConditions(a)}}else{i.setDefineConditions()}}}function ve(e,t,i){if(e==="remove"){t.detachEvent("search",_e,this);if(!i){var a=t.getBasicSearchField();if(a&&a._bCreadedByFVH){t.setBasicSearchField()}if(t.getCollectiveSearch&&t.getCollectiveSearch()){t.setCollectiveSearch()}}t=undefined}else{t.attachEvent("search",_e,this);Ae.call(this,false)}var r=this.getAggregation("_dialog");if(r){var n=r.getContent()[0];n.setFilterbar(t);n.setShowFilterbar(!!t);if(this.isOpen()){me.call(this);if(!i||e==="remove"){Fe.call(this,e==="remove")}}}}function _e(e){var t=this._getFilterBar();if(t){var i=this.getFilterFields();if(i&&!this._bUpdateFilterAfterClose){var a=be.call(this,i);var r=a.length>0?a[0].values[0]:"";if(r!==this.getFilterValue()){this.setProperty("filterValue",r,true)}}if(this._bApplyFilter||!this._bApplyFilter&&(e||t.getLiveMode())){this._bApplyFilter=true;ie.call(this,true)}}}function me(){var e=this._getFilterBar();if(e){e.setInternalConditions(Object.keys(e.getConditions()).reduce(function(e,t){e[t]=[];return e},{}))}j.call(this,this.getFilterValue());Q.call(this)}function be(e){var t=this._getFilterBar();var i;if(t){i=t.getInternalConditions()}else{i=this._oConditions}return i[e]||[]}function ye(e,t){var i=this._getFilterBar();var a;if(i){a=i.getInternalConditions()}else{a=this._oConditions}if(!a[e]){a[e]=[]}a[e].push(t);if(i){i.setInternalConditions(a)}}function Ce(e){var t=this._getFilterBar();var i;if(t){i=t.getInternalConditions()}else{i=this._oConditions}if(i[e]&&i[e].length>0){i[e]=[]}if(t){t.setInternalConditions(i)}}function Fe(e){if(e){if(!this._iSearchFieldTimer){this._iSearchFieldTimer=setTimeout(function(){this._iSearchFieldTimer=undefined;Fe.call(this,false)}.bind(this),0)}return}else if(this._iSearchFieldTimer){clearTimeout(this._iSearchFieldTimer);this._iSearchFieldTimer=null}var t=this.getFilterFields();var i=Be.call(this,false);if(t&&i){var a=this._getFilterBar();if(!a){a=new P(this.getId()+"-FB",{liveMode:!i.isSuspended(),showGoButton:false});a.setInternalConditions(this._oConditions);this._oConditions={};this.setAggregation("_filterBar",a,true)}if(!a.getBasicSearchField()){if(!this._oSearchField){this._oSearchField=new O(this.getId()+"-search",{conditions:"{$filters>/conditions/"+t+"}",placeholder:"{$i18n>filterbar.SEARCH}",label:"{$i18n>filterbar.SEARCH}",maxConditions:1,width:"50%"});this._oSearchField._bCreadedByFVH=true}else{this._oSearchField.setConditions([])}a.setBasicSearchField(this._oSearchField)}}if(this._oSearchField&&!this._oSearchField.getParent()){this._oSearchField.destroy();delete this._oSearchField}}function Pe(){var e=Be.call(this,true);if(e){return e.getSuggestionContent()}}function Oe(){var e=this._oField?this._oField.getBindingContext():null;this.setBindingContext(e);var t=this._getFormatOptions();if(t.conditionModel&&this.getModel(t.conditionModelName)!==t.conditionModel){this.setModel(t.conditionModel,t.conditionModelName)}}function Se(){if(!this._oResourceBundleM){this._oResourceBundleM=sap.ui.getCore().getLibraryResourceBundle("sap.m")}return this._oResourceBundleM}B.prototype.getScrollDelegate=function(){var t=this.getAggregation("_dialog");if(t&&(t.isOpen()||t.oPopup.getOpenState()===A.OPENING)){var i=Be.call(this,false);var a=i&&i.getDialogContent();if(a&&a.getScrollDelegate){return a.getScrollDelegate()}else{return undefined}}else{return e.prototype.getScrollDelegate.apply(this,arguments)}};B.prototype._fireOpen=function(t){if(!this._bOpenHandled){return e.prototype._fireOpen.apply(this,arguments)}return true};B.prototype.getRoleDescription=function(e){if(!e||e===1){return null}else if(!Be.call(this,false)&&this.getShowConditionPanel()&&!this.getNoDialog()){return null}else{var t=Se.apply(this);return t.getText("MULTICOMBOBOX_ARIA_ROLE_DESCRIPTION")}};B.prototype.getAriaHasPopup=function(){if(this.getNoDialog()){return"listbox"}else if(this.getShowConditionPanel()){return"dialog"}else{return"listbox"}};B.prototype.getValueHelpEnabled=function(){if(this.getNoDialog()){return false}else{return true}};B.prototype._getContenRequestProperties=function(e){var t={};var i=this.getCollectiveSearchItems();if(i.length>0){var a=this.getAggregation("_dialog");if(a&&a.isOpen()&&this._oCollectiveSearchSelect){var r=this._oCollectiveSearchSelect.getSelectedItemKey();t.collectiveSearchKey=r}else{t.collectiveSearchKey=i[0].getKey()}}return t};function Ie(){if(!this._oCollectiveSearchSelect){var e=new I(this.getId()+"-collSearchItem",{key:"{$help>key}",text:"{$help>text}",enabled:"{$help>enabled}",textDirection:"{$help>textDirection}"});this._oCollectiveSearchSelect=new S(this.getId()+"-collSearch",{title:"{$i18n>COL_SEARCH_SEL_TITLE}",items:{path:"$help>/collectiveSearchItems",template:e},select:De.bind(this)}).setModel(this._oManagedObjectModel,"$help")}return this._oCollectiveSearchSelect}function De(e){var t=function(){ie.call(this,true)}.bind(this);this.setProperty("filterValue","",true);var i=this._callContentRequest(false,t);if(i){t()}}function Ae(e){var t=this.getAggregation("_dialog");var i=this._getFilterBar();if(t&&i){var a=this.getCollectiveSearchItems();if(a.length<=1){if(i.getCollectiveSearch&&i.getCollectiveSearch()){i.setCollectiveSearch()}}else{if(i.getCollectiveSearch&&!i.getCollectiveSearch()){i.setCollectiveSearch(Ie.call(this))}if(e&&this._oCollectiveSearchSelect){this._oCollectiveSearchSelect.setSelectedItemKey(a[0].getKey())}}}}function Be(e){var t;if(e){t=this.getSuggestContent()}else{t=this.getDialogContent()}if(!t){t=this.getContent()}return t}return B});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldValueHelpContentWrapperBase",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.field.FieldValueHelpContentWrapperBase",{metadata:{library:"sap.ui.mdc",properties:{selectedItems:{type:"object[]",defaultValue:[]}},defaultProperty:"selectedItems",events:{navigate:{parameters:{key:{type:"any"},description:{type:"string"},leave:{type:"boolean"},disableFocus:{type:"boolean"},itemId:{type:"string"}}},selectionChange:{parameters:{selectedItems:{type:"object[]"},itemPress:{type:"boolean"}}},dataUpdate:{parameters:{contentChange:{type:"boolean"}}}}}});t.prototype.init=function(){};t.prototype.exit=function(){this.dispose()};t.prototype.initialize=function(e){return this};t.prototype.dispose=function(e){};t.prototype.setSelectedItems=function(e){this.setProperty("selectedItems",e,true);return this};t.prototype.getDialogContent=function(){return undefined};t.prototype.getSuggestionContent=function(){return undefined};t.prototype.fieldHelpOpen=function(e){this._bSuggestion=e;return this};t.prototype.fieldHelpClose=function(){delete this._bSuggestion;return this};t.prototype.removeFocus=function(){return this};t.prototype.getFilterEnabled=function(){return true};t.prototype.navigate=function(e){};t.prototype.getTextForKey=function(e,t,n,r,o){return""};t.prototype.getKeyForText=function(e,t,n,r){return undefined};t.prototype.getKeyAndText=function(e,t,n,r,o){return undefined};t.prototype.getListBinding=function(){return undefined};t.prototype.getAsyncKeyText=function(){return false};t.prototype.applyFilters=function(e,t){};t.prototype.isSuspended=function(){return false};t.prototype.enableShowAllItems=function(){return false};t.prototype.getAllItemsShown=function(){return false};t.prototype._getFieldHelp=function(){var e=this.getParent();if(!e||!e.isA("sap.ui.mdc.field.FieldValueHelp")){throw new Error(this.getId()+" must be assigned to a sap.ui.mdc.field.FieldValueHelp")}return e};t.prototype._getKeyPath=function(){var e=this._getFieldHelp();return e._getKeyPath()};t.prototype._getDescriptionPath=function(){var e=this._getFieldHelp();return e.getDescriptionPath()};t.prototype._getInParameters=function(){var e=this._getFieldHelp();var t=[];if(e){t=n(e.getInParameters())}return t};t.prototype._getOutParameters=function(){var e=this._getFieldHelp();var t=[];if(e){t=n(e.getOutParameters())}return t};function n(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];var o=r.getHelpPath();if(o){t.push(o)}}return t}t.prototype._getMaxConditions=function(){var e=this._getFieldHelp();return e.getMaxConditions()};t.prototype._getDelegate=function(){var e=this._getFieldHelp();return{delegate:e.getControlDelegate(),payload:e.getPayload()}};t.prototype.getScrollDelegate=function(){var e=this._getFieldHelp();return e.getScrollDelegate&&e.getScrollDelegate()};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldValueHelpDelegate",["sap/ui/mdc/field/FieldHelpBaseDelegate","sap/ui/model/FilterType"],function(e,i){"use strict";var n=Object.assign({},e);n.determineSearchSupported=function(e,i){};n.isSearchSupported=function(e,i){return false};n.executeSearch=function(e,i,n){};n.adjustSearch=function(e,i,n){return n};n.executeFilter=function(e,n,t,u,c){if(n.isA("sap.ui.model.json.JSONListBinding")){n.filter(t,i.Application);u()}else{n.attachEventOnce("dataReceived",u);n.initialize();n.filter(t,i.Application);n.getContexts(0,c)}};n.checkBindingsPending=function(e,i){return null};n.checkListBindingPending=function(e,i){if(i&&(i.isSuspended()||i.getLength()===0)){return false}return true};return n});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldValueHelpMTableWrapper",["sap/ui/mdc/field/FieldValueHelpTableWrapperBase","sap/ui/model/ChangeReason","sap/base/strings/capitalize","sap/m/library","sap/ui/mdc/util/loadModules","sap/ui/thirdparty/jquery"],function(e,t,i,n,a,r){"use strict";var s=n.ListMode;var o=n.Sticky;var l;var p=e.extend("sap.ui.mdc.field.FieldValueHelpMTableWrapper",{metadata:{library:"sap.ui.mdc",aggregations:{table:{type:"sap.m.Table",multiple:false}},defaultAggregation:"table"}});p._init=function(){l=undefined};p.prototype.exit=function(){e.prototype.exit.apply(this,arguments)};p.prototype.initialize=function(e){if(e||this._oScrollContainer){return this._bTableResolved?this:this._oTablePromise}if(!l){a("sap/m/ScrollContainer").then(function(e){if(!this._bIsBeingDestroyed){l=e[0];this.initialize();this.fireDataUpdate({contentChange:true})}}.bind(this));return this}this._oScrollContainer=new l(this.getId()+"-SC",{height:"100%",width:"100%",vertical:true});this._oScrollContainer._oWrapper=this;this._oScrollContainer.getContent=function(){var e=[];var t=this._oWrapper&&this._oWrapper.getTable();if(t){e.push(t)}return e};return this};p.prototype.dispose=function(){if(this._oScrollContainer){this._oScrollContainer.destroy();delete this._oScrollContainer}};p.prototype.getDialogContent=function(){return this._oScrollContainer};p.prototype.getSuggestionContent=function(){return this._getWrappedTable()};p.prototype.fieldHelpOpen=function(t){e.prototype.fieldHelpOpen.apply(this,arguments);var i=this._getWrappedTable();if(i){if(t){var n=i.getSelectedItem();if(n){this._handleScrolling(n)}}}return this};p.prototype.getListBinding=function(){var e=this._getWrappedTable();return e&&e.getBinding("items")};p.prototype._getListBindingInfo=function(){var e=this._getWrappedTable();return e&&e.getBindingInfo("items")};p.prototype.isSuspended=function(){var e=this.getListBinding();if(!e){return true}return e.isSuspended()};p.prototype._handleEvents=function(e){var t=this._getWrappedTable();if(t){var i=(e?t.attachEvent:t.detachEvent).bind(t);i("itemPress",this._handleItemPress,this);i("selectionChange",this._handleSelectionChange,this);i("updateFinished",this._handleUpdateFinished,this)}};p.prototype._adjustTable=function(t,i){e.prototype._adjustTable.apply(this,arguments);var n=this._getWrappedTable();if(n&&this.getParent()){n.setRememberSelections(false);if(t){if(this._getMaxConditions()===1){n.setMode(s.SingleSelectMaster)}else{n.setMode(s.MultiSelect)}}else if(this._getMaxConditions()===1){n.setMode(s.SingleSelectLeft)}else{n.setMode(s.MultiSelect)}var a=n.getSticky();if(!a||a.length===0){n.setSticky([o.ColumnHeaders])}}};var h=function(e){if(e){this._handleModelContextChange();return true}};p.prototype._handleTableChanged=function(t,i){if(t==="insert"){this._adjustTable(true);if(!h.call(this,this.getListBinding())){this._oObserver.observe(i,{bindings:["items"]})}}else{this._oObserver.unobserve(i)}e.prototype._handleTableChanged.call(this,t,i)};p.prototype._observeChanges=function(t,i){if(t.name==="items"&&t.mutation==="ready"){h.call(this,t.bindingInfo.binding)}e.prototype._observeChanges.apply(this,arguments)};p.prototype._handleItemPress=function(e){var t=e.getParameter("listItem");if(!this._bSuggestion||this._getMaxConditions()!==1){t.setSelected(!t.getSelected())}this._fireSelectionChange(true)};p.prototype._handleSelectionChange=function(e,t){if(!this._bSuggestion||this._getMaxConditions()!==1||t){this._fireSelectionChange.call(this,false)}};p.prototype._handleUpdateFinished=function(e){if(!this.getParent()){return}this._updateSelectedItems();if(this._bNavigate){this._bNavigate=false;this.navigate(this._iStep)}this.fireDataUpdate({contentChange:false})};p.prototype._getTableItems=function(e,t){var i=this._getWrappedTable();if(i){return e?i.getSelectedItems():i.getItems()}return[]};p.prototype._modifyTableSelection=function(e,t,i,n){if(t.getSelected()!==i){t.setSelected(i)}};p.prototype._handleTableEvent=function(e){if(!this._bSuggestion){return}var t=this._getWrappedTable();var i=r(e.target).control(0);switch(e.type){case"sapprevious":if(i.isA("sap.m.ListItemBase")){if(t.indexOfItem(i)===0){this.fireNavigate({key:undefined,description:undefined,leave:true});e.preventDefault();e.stopPropagation();e.stopImmediatePropagation(true)}}break;default:break}};p.prototype._handleScrolling=function(e){var t=this.getScrollDelegate();if(t){var i=this._getWrappedTable();var n=!isNaN(e)?e:i.indexOfItem(e);i.scrollToIndex(n).catch(function(e){});return true}};p.prototype.enableShowAllItems=function(){var e=this._getWrappedTable();var t=e&&e.getBindingInfo("items");return t&&!!t.length};p.prototype.getAllItemsShown=function(){var e=this.getListBinding();return e&&(!e.getLength()||e.bLengthFinal)};return p});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldValueHelpMdcTableWrapper",["sap/ui/mdc/field/FieldValueHelpTableWrapperBase","sap/ui/mdc/util/loadModules","sap/base/util/deepEqual","sap/ui/mdc/library","sap/ui/mdc/enum/PersistenceMode","sap/ui/mdc/p13n/Engine","sap/ui/mdc/condition/FilterConverter","sap/ui/thirdparty/jquery"],function(e,t,r,i,n,a,s,p){"use strict";var l=i.SelectionMode;var o={Table:"sap/ui/mdc/field/FieldValueHelpUITableWrapper",ResponsiveTable:"sap/ui/mdc/field/FieldValueHelpMTableWrapper"};var h=e.extend("sap.ui.mdc.field.FieldValueHelpMdcTableWrapper",{metadata:{library:"sap.ui.mdc",aggregations:{table:{type:"sap.ui.mdc.Table",multiple:false}},defaultAggregation:"table"}});h.prototype.init=function(){e.prototype.init.apply(this,arguments);this.OInnerWrapperClass=null};h.prototype.setParent=function(t,r){if(t){a.getInstance().defaultProviderRegistry.attach(t,n.Transient)}e.prototype.setParent.apply(this,arguments)};h.prototype._getStringType=function(){var e=this.getTable();var t,r=t=e&&e.getType();if(!r){t="Table"}else if(typeof r==="object"){if(r.isA("sap.ui.mdc.table.ResponsiveTableType")){t="ResponsiveTable"}else{t="Table"}}return t};h.prototype.fieldHelpOpen=function(e){var t=this.getTable();if(t){if(this.OInnerWrapperClass){return this.OInnerWrapperClass.prototype.fieldHelpOpen.call(this,e)}}return this};h.prototype.fieldHelpClose=function(){this._bSearchTriggered=false;e.prototype.fieldHelpClose.apply(this,arguments);return this};h.prototype._updateInnerWrapperClass=function(){var e=this._getStringType();var r=o[e];if(r&&this._sInnerWrapperType!==e){this._sInnerWrapperType=e;if(this.OInnerWrapperClass){this.OInnerWrapperClass.prototype.dispose.apply(this);this.OInnerWrapperClass=null}this._oInnerWrapperClassPromise=t(r).then(function(e){this.OInnerWrapperClass=e[0];this.OInnerWrapperClass.prototype.initialize.apply(this)}.bind(this))}};h.prototype._adjustTable=function(e){var t=this.getTable();if(t){var r=this.getParent();if(r){t.setHeight("100%");t.setSelectionMode(this._getMaxConditions()===1?l.Single:l.Multi);var i=this._getFieldHelp();var n=i._getFilterBar();var a=n&&t.getFilter()!==n.getId();if(a){t.setFilter(n)}}if(this.OInnerWrapperClass){this.OInnerWrapperClass.prototype._adjustTable.call(this,e)}}};h.prototype.exit=function(){var t=this.getParent();if(t){a.getInstance().defaultProviderRegistry.detach(t)}this._oCurrentConditions=null;this._bSuggestion=null;if(this._oInnerWrapperClassPromise){this._oInnerWrapperClassPromise=null}if(this.OInnerWrapperClass){this.OInnerWrapperClass.prototype.dispose.apply(this);this.OInnerWrapperClass=null}this._sInnerWrapperType=null;this._bSearchTriggered=null;e.prototype.exit.apply(this,arguments)};h.prototype.isSuspended=function(){var e=this.getTable();var t=this.getListBinding();return t?t.isSuspended():e&&!e.getAutoBindOnInit()};h.prototype.getListBinding=function(){var e=this.getTable();return e&&e.getRowBinding()};var d={onmouseover:function(e){var t=p(e.target).control(0);if(t&&t.isA("sap.m.ColumnListItem")){t.setType("Active")}}};var u=function(e,t){if(t){e.addDelegate(d,true,this);return}e.removeDelegate(d)};h.prototype._handleTableChanged=function(e,t){var r;if(e==="insert"){this._updateInnerWrapperClass();u.call(this,t,true);r=this._getWrappedTable();if(r){this._handleInnerTableChanged("insert",r)}this._oObserver.observe(t,{aggregations:["_content"]})}else{u.call(this,t);r=t._oTable;if(r){this._handleInnerTableChanged(e,r)}this._oObserver.unobserve(t)}};h.prototype._handleToolbarExtensions=function(e){if(e.mAggregations["extension"]&&e.mAggregations["extension"].length){e.getAggregation("extension").forEach(function(e){e.setVisible(false)})}if(e.mAggregations["headerToolbar"]){var t=e.getAggregation("headerToolbar");t.setVisible(false)}};h.prototype._handleInnerTableChanged=function(e,t){if(e==="insert"){this._updateInnerWrapperClass();this._handleToolbarExtensions(t);this._oObserver.observe(t,{bindings:["rows"]})}this._oInnerWrapperClassPromise.then(function(){this.OInnerWrapperClass.prototype._handleTableChanged.call(this,e,t);this.getTable().initialized().then(function(){this.fireDataUpdate({contentChange:true})}.bind(this))}.bind(this))};h.prototype.applyFilters=function(e,t,i){var n=this.getTable();if(n&&i){var a=this.getListBinding();var p=a&&a.isSuspended();var l=this._getFieldHelp();if(a&&!p&&!this._bSearchTriggered){var o=i.getSearch()||"";var h=a.mParameters.$search||"";var d=i.getConditions();var u=l._getTypesForConditions(d);var g=d&&u&&s.createFilters(d,u,undefined,l.getCaseSensitive());var c=g?[].concat(g):[];var f=a.aApplicationFilters.reduce(function(e,t){return e.concat(t._bMultiFilter?t.aFilters:t)},[]);var y=!r(c,f);var b=o!==h;var _=n._oTable&&n._oTable.getShowOverlay&&n._oTable.getShowOverlay();if(y||b||_){this._handleScrolling();i.triggerSearch();this._bSearchTriggered=true}}if(p){a.resume()}if(!a&&n.getAutoBindOnInit()){this._oTablePromise.then(function(){if(!this._bIsBeingDestroyed){this.applyFilters(e,t,i)}}.bind(this))}}};h.prototype._observeChanges=function(t,r){if(t.name==="_content"){this._handleInnerTableChanged(t.mutation,t.child)}if(this.OInnerWrapperClass){this.OInnerWrapperClass.prototype._observeChanges.call(this,t,true)}else{e.prototype._observeChanges.call(this,t,true)}};h.prototype._handleUpdateFinished=function(e){this._bSearchTriggered=false;return this.OInnerWrapperClass.prototype._handleUpdateFinished.apply(this,arguments)};h.prototype._handleEvents=function(e){if(this.OInnerWrapperClass){return this.OInnerWrapperClass.prototype._handleEvents.apply(this,arguments)}};h.prototype._handleItemPress=function(e){return this.OInnerWrapperClass.prototype._handleItemPress.apply(this,arguments)};h.prototype._handleSelectionChange=function(e){var t=this._isTableReady();return this._iRunningTableSelectionUpdates||!t||this._bBusy?undefined:this._fireSelectionChange.call(this,false)};h.prototype._getTableItems=function(e,t){return this.OInnerWrapperClass.prototype._getTableItems.apply(this,arguments)};h.prototype._modifyTableSelection=function(e,t,r,i){return this.OInnerWrapperClass.prototype._modifyTableSelection.apply(this,arguments)};h.prototype._getDataFromItem=function(e,t,r){return this.OInnerWrapperClass.prototype._getDataFromItem.apply(this,arguments)};h.prototype._handleTableEvent=function(e){return this.OInnerWrapperClass.prototype._handleTableEvent.apply(this,arguments)};h.prototype._isTableReady=function(){var t=this._getWrappedTable();if(t&&t._bInvalid){return false}return e.prototype._isTableReady.apply(this,arguments)};h.prototype._getWrappedTable=function(){var e=this.getTable();return e&&e._oTable};h.prototype._handleScrolling=function(){return this.OInnerWrapperClass.prototype._handleScrolling.apply(this,arguments)};h.prototype.getDialogContent=function(){if(this.OInnerWrapperClass){return this.OInnerWrapperClass.prototype.getDialogContent.apply(this,arguments)}};h.prototype.initialize=function(){if(this.OInnerWrapperClass){return this.OInnerWrapperClass.prototype.initialize.apply(this,arguments)}};h.prototype.getSuggestionContent=function(){return this.getTable()};return h});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldValueHelpTableWrapperBase",["sap/ui/mdc/field/FieldValueHelpContentWrapperBase","sap/ui/model/ChangeReason","sap/ui/model/Filter","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/FilterType","sap/ui/model/FilterOperator","sap/ui/model/FilterProcessor","sap/ui/base/ManagedObjectObserver","sap/base/strings/capitalize","sap/m/library","sap/base/util/deepEqual","sap/base/Log","sap/ui/base/SyncPromise"],function(e,t,i,a,r,s,n,o,l,h,u,p,d,f){"use strict";var g=e.extend("sap.ui.mdc.field.FieldValueHelpTableWrapperBase",{metadata:{library:"sap.ui.mdc",aggregations:{table:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"table"}});g.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver=new l(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["selectedItems"],aggregations:["table"]});this._bTableResolved=false;this._oTablePromise=new Promise(function(e){this._oTablePromiseResolve=e}.bind(this));this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._oPromises={};this._oTableDelegate={onsapprevious:this._handleTableEvent,onsapnext:this._handleTableEvent,cellClick:this._handleTableEvent};this._iRunningTableSelectionUpdates=0};g.prototype.exit=function(){this._sTableWidth=null;this._oObserver.disconnect();this._oObserver=undefined;if(this._oTableModificationPromise){this._oTableModificationPromise=null}delete this._oTablePromise;delete this._oTablePromiseResolve;delete this._bTableResolved;this._iRunningTableSelectionUpdates=null;e.prototype.exit.apply(this,arguments)};g.prototype.invalidate=function(t){if(t){var i=this._getWrappedTable();if(i&&t===i){if(t.bOutput&&!this._bIsBeingDestroyed){var a=this.getParent();if(a){a.invalidate(this)}}return}}e.prototype.invalidate.apply(this,arguments)};g.prototype.getDialogContent=function(){return this._getWrappedTable()};g.prototype.getSuggestionContent=function(){return this._getWrappedTable()};g.prototype.fieldHelpOpen=function(t){e.prototype.fieldHelpOpen.apply(this,arguments);var i=this._getWrappedTable();if(i){this._adjustTable(t);this._updateSelectedItems()}return this};g.prototype.fieldHelpClose=function(){e.prototype.fieldHelpClose.apply(this,arguments);var t=this._getWrappedTable();if(t){t.removeStyleClass("sapMListFocus")}return this};g.prototype.removeFocus=function(){e.prototype.removeFocus.apply(this,arguments);var t=this._getWrappedTable();if(t){t.removeStyleClass("sapMListFocus")}return this};g.prototype.navigate=function(e,t){var i=this._getWrappedTable();if(!this._isTableReady(i)){if(i&&!this._bTableResolved&&!this._bNavigationDelayed){this._bNavigationDelayed=true;this._oTablePromise.then(function(){this.fireNavigate({disableFocus:true});this._bNavigationDelayed=false}.bind(this))}this._bNavigate=true;this._iStep=e;return}var a=this.getSelectedItems();var r=a&&a[0];var s=r&&this._getTableItemByKey(r.key);if(this._getMaxConditions()!==1){this._bShouldRebind=false;this.fireNavigate();i.focus();return}i.addStyleClass("sapMListFocus");var n=this._getTableItems();var o=n.length;var l=0;var h=false;if(s){l=n.indexOf(s);l=l+e}else if(e>=0){l=e-1}else{l=o+e}var u;if(l<0){l=0;u=true;h=true}else if(l>=o-1){l=o-1;u=false}else{u=e>=0}while(n[l]&&n[l].isA("sap.m.GroupHeaderListItem")){if(u){l++}else{l--}}var p=n[l];if(p){var d=this._getDataFromItem(p);var g=p===s;if(!g){this._modifyTableSelection(n,p,true,undefined,true)}f.resolve(this._handleScrolling(p)).then(function(e){var t=p.getId&&p.getId();if(g){if(!this.getParent().isOpen()){this.fireNavigate({key:d.key,description:d.description,inParameters:d.inParameters,outParameters:d.outParameters,itemId:t,leave:h})}else if(h){this.fireNavigate({key:undefined,value:undefined,condition:undefined,itemId:undefined,leave:h})}return}this._bNoTableUpdate=true;this.setSelectedItems([{key:d.key,description:d.description,inParameters:d.inParameters,outParameters:d.outParameters}]);this._bNoTableUpdate=false;if(!t&&p.isA("sap.ui.model.Context")){var i=this._getTableItems(false,true).find(function(e){return e.getBindingContext()===p});t=i&&i.getId()}if(t){this.fireNavigate({key:d.key,description:d.description,inParameters:d.inParameters,outParameters:d.outParameters,itemId:t,leave:h})}else{this.fireNavigate({disableFocus:true})}}.bind(this))}};g.prototype.getTextForKey=function(e,t,i,a,r){return c.call(this,[e],["key"],t,i,a,r)};g.prototype.getKeyForText=function(e,t,i,a){return c.call(this,[e],["description"],t,undefined,i,a)};g.prototype.getKeyAndText=function(e,t,i,a,r){return c.call(this,[e,t],["key","description"],i,a,false,r)};function c(e,t,i,s,n,o){if((e[0]===null||e[0]===undefined||t[0]==="description"&&e[0]==="")&&(e.length===1||!e[1])){return null}return b.call(this).then(function(l){var h=t.length>1||t[0]==="description"?r:a;var u=[t[0]==="description"?this._getDescriptionPath:this._getKeyPath];if(t.length>1){u.push(t[1]==="description"?this._getDescriptionPath:this._getKeyPath)}if(l&&this._getKeyPath()){var p=this._getTableItems();var d=m.call(this,e,p,u,i,s,h,o);if(d){return d}}if(n){throw new h(this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[e[0]]))}else{return this.loadData(u,e,i,s,h,o)}}.bind(this)).unwrap()}function m(e,t,a,r,s,l,h){var u=0;var p=[];for(u=0;u<a.length;u++){p.push(a[u].call(this));if(!p[u]){throw new Error("path for filter missing")}}var d=function(e,t){var i=e.isA("sap.ui.model.Context")?e:e.getBindingContext();return i.getProperty(t)};var f;var g=[];for(u=0;u<e.length;u++){g.push(new i({path:p[u],operator:n.EQ,value1:e[u],caseSensitive:h}))}if(g.length===1){f=g[0]}else{f=new i({filters:g,and:false})}if(r||s){g=[f];if(r){g.push(r)}if(s){g.push(s)}f=new i({filters:g,and:true})}var c=o.apply(t,f,d);if(c.length===1){var _=this._getDataFromItem(c[0]);return{key:_.key,description:_.description,inParameters:_.inParameters,outParameters:_.outParameters}}else if(c.length>1){if(!h){return m.call(this,e,t,a,r,s,l,true)}throw v.call(this,l,true,e[0])}}g.prototype.loadData=function(e,t,a,r,s,o){var l="";var h=0;for(h=0;h<e.length;h++){l=l+e[h].call(this)}if(this._oPromises[l]&&this._oPromises[l][t[0]]){return this._oPromises[l][t[0]]}if(!this._oPromises[l]){this._oPromises[l]={}}this._oPromises[l][t[0]]=new Promise(function(u,p){this._oTablePromise.then(function(d){var f=l;l="";for(h=0;h<e.length;h++){l=l+e[h].call(this)}if(!l){p(new Error("missing FieldPath"));return}if(l!==f){if(!this._oPromises[l]){this._oPromises[l]={}}this._oPromises[l][t[0]]=this._oPromises[f][t[0]];delete this._oPromises[f][t[0]]}var g=this.getListBinding();var c=g.getModel();var m=g.getPath();var _;var b=g.getContext();var y=[];for(h=0;h<e.length;h++){y.push(new i({path:e[h].call(this),operator:n.EQ,value1:t[h],caseSensitive:o}))}if(y.length===1){_=y[0]}else{_=new i({filters:y,and:false})}y=[];if(a){y.push(a)}if(r){if(a){var P=r.aFilters?r.aFilters:[r];var T=a.aFilters?a.aFilters:[a];for(h=0;h<P.length;h++){var S=P[h];var I=false;for(var F=0;F<T.length;F++){var C=T[F];if(C.sPath===S.sPath&&C.oValue1===S.oValue1&&C.oValue2===S.oValue2){I=true;break}}if(!I){y.push(S)}}}else{y.push(r)}}if(y.length>0){y.push(_);_=new i({filters:y,and:true})}try{var x=c.bindList(m,b);var D=function(){var e=x.getContexts();if(e.length===1){var i=this._getDataFromContext(e[0]);var a={key:i.key,description:i.description,inParameters:i.inParameters,outParameters:i.outParameters};u(a)}else if(t[0]===""&&e.length===0){u(null)}else{var r=v.call(this,s,e.length>1,t[0]);p(r)}setTimeout(function(){x.destroy()},0);delete this._oPromises[l][t[0]]};var B=this._getDelegate();if(B.delegate){B.delegate.executeFilter(B.payload,x,_,D.bind(this),2)}}catch(e){p(e)}}.bind(this))}.bind(this));return this._oPromises[l][t[0]]};function v(e,t,i){var a;if(t){a=this._oResourceBundle.getText("valuehelp.VALUE_NOT_UNIQUE",[i])}else{a=this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[i])}var r=new e(a);r._bNotUnique=t;return r}g.prototype.getAsyncKeyText=function(){return true};g.prototype.applyFilters=function(e,t,i){var a=this.getListBinding();var r=this._getDelegate();if(!a){this._oTablePromise.then(function(a){if(!this._bIsBeingDestroyed){this.applyFilters(e,t,i)}}.bind(this));return}var n=true;var o;try{o=a.getFilterInfo()}catch(e){d.info("ValueHelp-Filter: getFilterInfo threw error")}if(!e){e=[]}if(e.length===0&&!o){n=false}if(r.delegate&&r.delegate.isSearchSupported(r.payload,a)){if(!a.isSuspended()&&n){a.suspend()}t=r.delegate.adjustSearch(r.payload,this._bSuggestion,t);r.delegate.executeSearch(r.payload,a,t);d.info("ValueHelp-Search: "+t)}if(n){a.filter(e,s.Application);d.info("ValueHelp-Filter: "+_.call(this,e))}if(a.isSuspended()){a.resume()}};g.prototype.isSuspended=function(){var e=this.getListBinding();if(!e){return true}return e.isSuspended()};function _(e){var t;if(!e){return""}if(Array.isArray(e)){t="";e.forEach(function(e,i,a){t+=_.call(this,e);if(a.length-1!=i){t+=" or "}},this);return"("+t+")"}else if(e._bMultiFilter){t="";var i=e.bAnd;e.aFilters.forEach(function(e,a,r){t+=_.call(this,e);if(r.length-1!=a){t+=i?" and ":" or "}},this);return"("+t+")"}else{t=e.sPath+" "+e.sOperator+" '"+e.oValue1+"'";if(e.sOperator==="BT"){t+="...'"+e.oValue2+"'"}return t}}g.prototype.clone=function(t,i){this._handleEvents();var a=e.prototype.clone.apply(this,arguments);this._handleEvents(true);return a};g.prototype._observeChanges=function(e){if(e.name==="table"){this._handleTableChanged.call(this,e.mutation,e.child)}if(e.name==="selectedItems"){this._updateSelectedItems.call(this)}};g.prototype._handleTableChanged=function(e,t){if(e==="remove"){this._handleEvents();t.removeDelegate(this._oTableDelegate);t.removeStyleClass("sapMComboBoxList");t=undefined;this._oTablePromise=new Promise(function(e){this._oTablePromiseResolve=function(){e();this._bTableResolved=true}}.bind(this))}else{this._handleEvents(true);t.addDelegate(this._oTableDelegate,true,this);this._updateSelectedItems();if(this._bNavigate){this._bNavigate=false;this.navigate(this._iStep)}t.addStyleClass("sapMComboBoxList")}this.fireDataUpdate({contentChange:true})};g.prototype._handleModelContextChange=function(e){var t=this._getWrappedTable();if(this.getListBinding()){this._oTablePromiseResolve(t)}};g.prototype._adjustTable=function(e){var t=this.getTable();if(t&&this.getParent()){if(e){if(this._sTableWidth){t.setWidth(this._sTableWidth)}}else if(t.getWidth()!=="100%"){this._sTableWidth=t.getWidth();t.setWidth("100%")}}};g.prototype._fireSelectionChange=function(e){var t=[];var i=this._getWrappedTable();if(i){var a=this.getSelectedItems();var r;var s;if(a.length>0){var n=this._getTableItems();for(var o=0;o<n.length;o++){r=n[o];s=this._getDataFromItem(r);if(!s){throw new Error("Key of item cannot be determined"+this)}for(var l=a.length-1;l>=0;l--){var h=a[l];if(h.key===s.key&&(!s.inParameters||!h.inParameters||p(h.inParameters,s.inParameters))&&(!s.outParameters||!h.outParameters||p(h.outParameters,s.outParameters))){a.splice(l,1);break}}if(!a.length){break}}}if(a.length>0){t=a}a=this._getTableItems(true);for(var u=0;u<a.length;u++){r=a[u];s=this._getDataFromItem(r);if(!s){throw new Error("Key of item cannot be determined"+this)}t.push({key:s.key,description:s.description,inParameters:s.inParameters,outParameters:s.outParameters})}}this._bNoTableUpdate=true;this.setSelectedItems(t);this._bNoTableUpdate=false;this.fireSelectionChange({selectedItems:t,itemPress:e})};g.prototype._handleUpdateFinished=function(e){if(!this.getParent()){return}this._updateSelectedItems.call(this);if(this._bNavigate){this._bNavigate=false;this.navigate(this._iStep)}if(e.getParameter("reason")!==h(t.Filter)){this.fireDataUpdate({contentChange:false})}};g.prototype._handleBusyStateChanged=function(e){this._bBusy=e.getParameter("busy")};g.prototype._updateSelectedItems=function(){if(this._bNoTableUpdate){return}var e=[];var t=this._getWrappedTable();if(this._isTableReady(t)&&this._getKeyPath()){var i=this.getSelectedItems();var a=this._getTableItems();var r=false;this._iRunningTableSelectionUpdates=this._iRunningTableSelectionUpdates+1||1;for(var s=0;s<a.length;s++){var n=a[s];if(n){var o=false;if(i.length>0){var l=this._getDataFromItem(n);for(var h=0;h<i.length;h++){var u=i[h];if(l.key===u.key&&(!l.inParameters||!u.inParameters||p(u.inParameters,l.inParameters))&&(!l.outParameters||!u.outParameters||p(u.outParameters,l.outParameters))){o=true;if(l.description!==u.description){u.description=l.description;r=true}break}}}e.push(this._modifyTableSelection(a,n,o,s))}}if(r){this._bNoTableUpdate=true;this.setSelectedItems(i);this._bNoTableUpdate=false}this._oTableModificationPromise=Promise.all(e).then(function(){this._iRunningTableSelectionUpdates=this._iRunningTableSelectionUpdates-1}.bind(this))}};g.prototype._getDataFromItem=function(e,t,i){var a=e.isA("sap.ui.model.Context")?e:e.getBindingContext();return a&&this._getDataFromContext.call(this,a,t,i)};g.prototype._getDataFromContext=function(e,t,i){var a=this._getKeyPath();var r=this._getDescriptionPath();var s;var n;if(!a){throw new Error("KeyPath missing")}if(!t){t=this._getInParameters()}if(!i){i=this._getOutParameters()}var o=t.length>0?{}:null;var l=i.length>0?{}:null;var h;if(e){s=a?e.getProperty(a):undefined;n=r?e.getProperty(r):undefined;var u=0;for(u=0;u<t.length;u++){h=t[u];o[h]=e.getProperty(h)}for(u=0;u<i.length;u++){h=i[u];l[h]=e.getProperty(h)}}if(s===null||s===undefined){return false}return{key:s,description:n,inParameters:o,outParameters:l}};g.prototype._isTableReady=function(){var e=this._getWrappedTable();var t=e&&this.getListBinding();if(!e||!t){return false}if(t&&(t.isSuspended()||t.getLength()===0)){return false}return true};function b(){return f.resolve().then(function(){var e=this.getListBinding();var t=this._getListBindingInfo();var i=this._getDelegate();if(e&&i.delegate){return i.delegate.checkListBindingPending(i.payload,e,t)}else{return false}}.bind(this)).catch(function(e){throw e})}g.prototype._handleItemPress=function(e){};g.prototype._handleSelectionChange=function(e,t){};g.prototype._getTableItems=function(e,t){return[]};g.prototype._getTableItemByKey=function(e,t){var i=this._getTableItems(undefined,t);return i&&i.find(function(t){var i=this._getDataFromItem(t);return i.key===e}.bind(this))};g.prototype._handleTableEvent=function(e){};g.prototype._modifyTableSelection=function(e,t,i,a,r){};g.prototype._getWrappedTable=function(){return this.getTable()};g.prototype._handleEvents=function(e){};g.prototype._handleScrolling=function(e){};g.prototype.getListBinding=function(){};g.prototype._getListBindingInfo=function(){};return g});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/FieldValueHelpUITableWrapper",["sap/ui/mdc/field/FieldValueHelpTableWrapperBase","sap/ui/model/ChangeReason","sap/base/strings/capitalize","sap/ui/table/library","sap/ui/thirdparty/jquery"],function(e,t,i,a,n){"use strict";var r=a.VisibleRowCountMode;var s=a.SelectionMode;var o=a.SelectionBehavior;var l=e.extend("sap.ui.mdc.field.FieldValueHelpUITableWrapper",{metadata:{library:"sap.ui.mdc",aggregations:{table:{type:"sap.ui.table.Table",multiple:false}},defaultAggregation:"table"}});l.prototype.fieldHelpOpen=function(t){e.prototype.fieldHelpOpen.apply(this,arguments);var i=this._getWrappedTable();if(i&&t){var a=this._getTableItems(true);var n=a&&a[0];this._handleScrolling(n)}return this};l.prototype.getListBinding=function(){var e=this._getWrappedTable();return e&&e.getBinding("rows")};l.prototype.isSuspended=function(){var e=this.getListBinding();if(!e){return true}return e.isSuspended()};var d=function(e){e=e||this._getWrappedTable();var t=e.getPlugins().find(function(e){return e.isA("sap.ui.table.plugins.SelectionPlugin")});return t||e};var p=function(e){if(e){this._handleModelContextChange();return true}};l.prototype._handleTableChanged=function(t,i){if(t==="insert"){this._adjustTable(true);var a=p.call(this,this.getListBinding());this._oObserver.observe(i,{aggregations:["plugins"],bindings:[!a&&"rows"]});var n=d.call(this,i);if(n&&n!==i){n.attachEvent("selectionChange",this._handleSelectionChange,this)}}else{this._oObserver.unobserve(i)}e.prototype._handleTableChanged.call(this,t,i)};l.prototype._observeChanges=function(t,i){if(t.name==="rows"&&t.mutation==="ready"){p.call(this,t.bindingInfo.binding)}if(!i&&t.name==="plugins"&&t.child.isA("sap.ui.table.plugins.SelectionPlugin")){var a=(t.mutation==="insert"?t.child.attachEvent:t.child.detachEvent).bind(t.child);a("selectionChange",this._handleSelectionChange,this)}e.prototype._observeChanges.apply(this,arguments)};l.prototype._handleEvents=function(e){var t=this._getWrappedTable();if(t){var i=(e?t.attachEvent:t.detachEvent).bind(t);i("cellClick",this._handleItemPress,this);i("rowSelectionChange",this._handleSelectionChange,this);i("rowsUpdated",this._handleUpdateFinished,this);i("busyStateChanged",this._handleBusyStateChanged,this);var a=this.getListBinding();if(a){var n=(e?a.attachEvent:a.detachEvent).bind(a);n("change",this._handleUpdateFinished,this)}}};l.prototype._adjustTable=function(t){e.prototype._adjustTable.apply(this,arguments);var i=this._getWrappedTable();var a=this.getParent();if(i){var n=i.getRowMode();if(!n){i.setVisibleRowCountMode(t?r.Fixed:r.Auto);i.setMinAutoRowCount(3)}else if(n.isA("sap.ui.table.rowmodes.AutoRowMode")){n.setMinRowCount(3)}if(a){var l=d.call(this);var p=function(e,t){i.setSelectionBehavior(t);l.setSelectionMode(e)};var h=this._getMaxConditions()===1;var u=h?s.Single:s.MultiToggle;var g=h?o.RowOnly:o.Row;p(u,g)}}};l.prototype._handleSelectionChange=function(e){var t=e.getParameter("userInteraction");if(t||this._bSuggestion&&this._getMaxConditions()!==1){this._fireSelectionChange.call(this,false)}};l.prototype._handleUpdateFinished=function(e){if(!this.getParent()){return}this._updateSelectedItems();if(this._bNavigate){this._bNavigate=false;this.navigate(this._iStep)}if(!e||e.getParameter("reason")!==i(t.Filter)){this.fireDataUpdate({contentChange:false})}};function h(e){var t=d.call(this,e);var i=t.getSelectedIndices();return i.reduce(function(t,i){var a=e.getContextByIndex(i);return a?t.concat(a):t},[])}l.prototype._getTableItems=function(e,t){var i=[];var a=this._getWrappedTable();if(a){if(!t){if(e){i=h.call(this,a)}else{var n=a.getBinding();i=n&&n.getAllCurrentContexts()||[]}}else{i=a.getRows().filter(function(e){var t=e.getBindingContext();return t&&t.getObject()});if(e){i=i.filter(function(e){return h.call(this,a).indexOf(e.getBindingContext())>=0})}}}return i};l.prototype._modifyTableSelection=function(e,t,i,a,n){a=typeof a!=="undefined"?a:e.indexOf(t);if(a>=0){var r=d.call(this);var s=r.getSelectedIndices().indexOf(a)>=0;if(i&&!s){return this._getMaxConditions()===1?r.setSelectedIndex(a):r.addSelectionInterval(a,a)}else if(!i&&s){return r.removeSelectionInterval(a,a)}}};l.prototype._handleTableEvent=function(e){if(!this._bSuggestion){return}var t=n(e.target).control(0);switch(e.type){case"sapprevious":if(t.isA("sap.ui.table.Row")){if(this._getTableItems(false,true).indexOf(t)===0){this.fireNavigate({key:undefined,description:undefined,leave:true});e.preventDefault();e.stopPropagation();e.stopImmediatePropagation(true)}}break;case"sapnext":if(t.isA("sap.ui.table.Column")&&this._getMaxConditions()===1){t=this._getTableItems(false,true)[0];if(t){var i=this._getDataFromItem(t);if(i){this.fireNavigate({key:i.key,description:i.description,inParameters:i.inParameters,outParameters:i.outParameters,itemId:t.getId()});e.preventDefault();e.stopPropagation();e.stopImmediatePropagation(true)}}}break;default:break}};l.prototype._handleScrolling=function(e){var t=this._getWrappedTable();var i=!isNaN(e)&&e;var a=t.getFirstVisibleRow();if(!i&&e){var n=e.isA("sap.ui.table.Row")&&e.getBindingContext();if(!n&&e.isA("sap.ui.model.Context")){n=e}i=this._getTableItems().indexOf(n)}if(typeof i==="undefined"||i<0){i=a-1}if(i>=0&&i!=a){t.setFirstVisibleRow(i);return Promise.resolve()}};l.prototype._handleItemPress=function(e){};return l});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/InParameter",["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.ui.mdc.field.InParameter",{metadata:{library:"sap.ui.mdc",properties:{value:{type:"any",byValue:true,defaultValue:null},helpPath:{type:"string"},initialValueFilterEmpty:{type:"boolean",defaultValue:false}},defaultProperty:"value"}});e.prototype.init=function(){this.attachEvent("modelContextChange",i,this)};e.prototype.exit=function(){};e.prototype.bindProperty=function(e,i){if(e==="value"&&!i.formatter){i.targetType="raw"}t.prototype.bindProperty.apply(this,arguments)};e.prototype.getFieldPath=function(){var t=this.getBinding("value");var e;if(t){e=t.getPath()}else{var i=this.getBindingInfo("value");if(i){if(i.path){e=i.path}else if(i.parts&&i.parts.length===1){e=i.parts[0].path}}}if(e&&e.startsWith("/")){e=e.slice(1)}if(!e){e=this.getHelpPath()}return e};function i(t){var e=this.getBinding("value");this._bBound=false;this._bConditionModel=false;if(e){this._bBound=true;var i=e.getModel();if(i&&i.isA("sap.ui.mdc.condition.ConditionModel")){this._bConditionModel=true}}}e.prototype.getUseConditions=function(){var t=false;if(this._bConditionModel){t=true}else if(!this._bBound){var e=this.getBindingInfo("value");if(e){var i;if(e.path){i=e.path}else if(e.parts&&e.parts.length===1){i=e.parts[0].path}if(i.startsWith("/conditions/")){t=true}}else{var a=this.getValue();if(Array.isArray(a)&&(a.length===0||a[0].hasOwnProperty("operator"))){t=true}}}return t};e.prototype.getDataType=function(){var t;if(!this.getUseConditions()){var e=this.getBinding("value");if(e){t=e.getType()}}return t};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/ListFieldHelp",["sap/ui/mdc/field/FieldHelpBase","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/base/ManagedObjectModel","sap/ui/base/ManagedObjectObserver","sap/ui/mdc/library"],function(e,t,i,s,a,r,l,o){"use strict";var n;var d;var u;var p;var h;var f=e.extend("sap.ui.mdc.field.ListFieldHelp",{metadata:{library:"sap.ui.mdc",properties:{filterList:{type:"boolean",group:"Appearance",defaultValue:true},useFirstMatch:{type:"boolean",group:"Behavior",defaultValue:false}},aggregations:{items:{type:"sap.ui.core.ListItem",multiple:true,singularName:"item"}},defaultAggregation:"items"}});f._init=function(){e._init.apply(this,arguments);n=undefined;d=undefined;u=undefined;p=undefined};f.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oManagedObjectModel=new r(this);this._oObserver=new l(m.bind(this));this._oObserver.observe(this,{properties:["filterValue","conditions"],aggregations:["items"],bindings:["items"]});this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")};f.prototype.exit=function(){e.prototype.exit.apply(this,arguments);this._oManagedObjectModel.destroy();delete this._oManagedObjectModel;this._oObserver.disconnect();this._oObserver=undefined;if(this._iDataUpdateTimer){clearTimeout(this._iDataUpdateTimer);this._iDataUpdateTimer=null}};f.prototype._createPopover=function(){var t=e.prototype._createPopover.apply(this,arguments);if((!n||!d||!u)&&!this._bListRequested){n=sap.ui.require("sap/m/List");d=sap.ui.require("sap/m/DisplayListItem");u=sap.ui.require("sap/m/library");p=sap.ui.require("sap/ui/model/Filter");h=sap.ui.require("sap/ui/model/Sorter");if(!n||!d||!u){sap.ui.require(["sap/m/List","sap/m/DisplayListItem","sap/m/library","sap/ui/model/Filter","sap/ui/model/Sorter"],v.bind(this));this._bListRequested=true}}if(t){c.call(this)}return t};function c(){if(!this._oList&&n&&d&&u&&!this._bListRequested){var e=this.getBindingInfo("items");this._oList=new n(this.getId()+"-List",{width:"100%",showNoData:false,mode:u.ListMode.SingleSelectMaster,rememberSelections:false,itemPress:b.bind(this)}).addStyleClass("sapMComboBoxBaseList").addStyleClass("sapMComboBoxList");this._oList.setModel(this._oManagedObjectModel,"$field");this._oList.bindElement({path:"/",model:"$field"});g.call(this,e);this._setContent(this._oList);if(this._bNavigate){this._bNavigate=false;this.navigate(this._iStep);this._iStep=null}}}function g(e){if(this._oList){this._oList.unbindAggregation("items");var t=new d(this.getId()+"-item",{type:u.ListType.Active,label:"{$field>text}",value:"{$field>additionalText}",valueTextDirection:"{$field>textDirection}"}).addStyleClass("sapMComboBoxNonInteractiveItem");var i=new p("text",C.bind(this));var s=false;if(e&&e.template&&e.template.isA("sap.ui.mdc.field.ListFieldHelpItem")){s=true}else{var a=this.getItems();if(a.length>0&&a[0].isA("sap.ui.mdc.field.ListFieldHelpItem")){s=true}}var r=s&&new h("groupKey",false,I.bind(this));this._oList.bindAggregation("items",{path:"$field>items",template:t,filters:i,sorter:r,templateShareable:false});M.call(this)}}function v(e,t,i,s,a){n=e;d=t;u=i;p=s;h=a;this._bListRequested=false;if(!this._bIsBeingDestroyed){c.call(this)}}f.prototype.open=function(t){e.prototype.open.apply(this,arguments);var i=this._getPopover();var s=this._getControlForSuggestion();if(i&&s){var a=s.$().outerWidth()/parseFloat(u.BaseFontSize)+"rem";i.setContentMinWidth(a)}};f.prototype._handleAfterClose=function(t){if(this._bUpdateFilterAfterClose){this._bUpdateFilterAfterClose=false;L.call(this)}this._oList.removeStyleClass("sapMListFocus");e.prototype._handleAfterClose.apply(this,arguments)};function m(e){if(e.object===this){if(e.name==="items"){if(e.type==="binding"){if(e.mutation==="prepare"){g.call(this,e.bindingInfo)}}else{if(e.mutation==="insert"){this._oObserver.observe(e.child,{properties:true})}else{this._oObserver.unobserve(e.child)}_.call(this)}}if(e.name==="conditions"){if(!this._bConditionUpdate){M.call(this)}}if(e.name==="filterValue"){if(this._oList){if(this._bClosing){this._bUpdateFilterAfterClose=true}else{L.call(this)}}}}else{_.call(this)}}function _(){if(!this._iDataUpdateTimer){this._iDataUpdateTimer=setTimeout(function(){this._iDataUpdateTimer=null;this.fireDataUpdate()}.bind(this),0)}}f.prototype.openByTyping=function(){return true};f.prototype.openByClick=function(){return!this.getFilterList()};f.prototype.getValueHelpEnabled=function(){return false};f.prototype.removeFocus=function(){if(this._oList){this._oList.removeStyleClass("sapMListFocus")}};f.prototype.navigate=function(e){var t=this._getPopover();if(!t||!this._oList){this._bNavigate=true;this._iStep=e;return}this._oList.addStyleClass("sapMListFocus");var i=this._oList.getSelectedItem();var s=this._oList.getItems();var a=s.length;var r=0;var l=this.getFilterList();var o=this.getFilterValue();var n=false;if(!l&&!i){var d=0;if(e>=0){for(d=0;d<s.length;d++){if(s[d].getLabel&&F.call(this,s[d].getLabel(),o)){r=d;break}}}else{for(d=s.length-1;d>=0;d--){if(s[d].getLabel&&F.call(this,s[d].getLabel(),o)){r=d;break}}}}else if(i){r=this._oList.indexOfItem(i);r=r+e}else if(e>=0){r=e-1}else{r=a+e}var u;if(r<0){r=0;u=true;n=true}else if(r>=a-1){r=a-1;u=false}else{u=e>=0}while(s[r]&&s[r].isA("sap.m.GroupHeaderListItem")){if(u){r++}else{r--}}var p=s[r];if(p){if(p!==i){var h=y.call(this,p);var f=x.call(this,h);p.setSelected(true);var c=S.call(this,f,p.getLabel());if(!t.isOpen()){this.open()}this._oList.scrollToIndex(r);this.fireNavigate({key:f,value:p.getLabel(),condition:c,itemId:p.getId(),leaveFocus:false})}else if(n){this.fireNavigate({key:undefined,value:undefined,condition:undefined,itemId:undefined,leaveFocus:n})}}};f.prototype._getTextOrKey=function(e,t,i,r,l,o,n,d,u,p){if(e===null||e===undefined){return null}else if(!e&&!t){return null}var h=this.getItems();var f;var c=0;for(c=0;c<h.length;c++){f=h[c];if(p){if(x.call(this,f)===u||f.getText()===e){return{key:x.call(this,f),description:f.getText()}}}else if(t){if(x.call(this,f)===e){return f.getText()}}else if(f.getText()===e){return x.call(this,f)}}if(t&&e===""){return null}if((!t||p)&&this.getUseFirstMatch()){for(c=0;c<h.length;c++){f=h[c];var g=f.getText();if(F.call(this,g,e)){return{key:x.call(this,f),description:g}}}}var v=this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[e]);if(t&&!p){throw new s(v)}else{throw new a(v)}};function b(e){var t=e.getParameter("listItem");var i=t.getSelected();if(i){var s=y.call(this,t);var a=x.call(this,s);S.call(this,a,t.getLabel());this.close();this.fireSelect({conditions:this.getConditions(),add:true,close:true})}}function y(e){var t=e.getBindingContextPath();return this._oManagedObjectModel.getProperty(t)}function L(){var e=this._oList.getBinding("items");e.update();this._oList.updateItems();this._oList.invalidate();M.call(this)}function C(e){var t=this.getFilterList();return!t||F.call(this,e,this.getFilterValue())}function F(e,t){return!t||typeof t==="string"&&e.toLowerCase().startsWith(t.toLowerCase())}function I(e){var t=e.getProperty("groupKey");var i=e.getProperty("groupText");return{key:t,text:i}}function M(){if(this._oList){var e=this.getConditions();var t;var s=this.getFilterValue();var a=this.getUseFirstMatch();var r=false;var l=this._getOperator();if(e.length>0&&(e[0].validated===i.Validated||e[0].operator===l.name)){t=e[0].values[0]}var o=this._oList.getItems();for(var n=0;n<o.length;n++){var d=o[n];if(d.isA("sap.m.DisplayListItem")){var u=y.call(this,d);if(e.length>0&&x.call(this,u)===t){d.setSelected(true)}else if(e.length===0&&a&&s&&!r&&F.call(this,d.getLabel(),s)){d.setSelected(true);r=true}else{d.setSelected(false)}}}}}function x(e){var t=e.getBinding("key");if(t){return t.getInternalValue()}else{return e.getKey()}}function S(e,t){this._bConditionUpdate=true;var i=this._createCondition(e,t);this.setProperty("conditions",[i],true);this._bConditionUpdate=false;return i}return f});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/ListFieldHelpItem",["sap/ui/core/ListItem"],function(e){"use strict";var p=e.extend("sap.ui.mdc.field.ListFieldHelpItem",{metadata:{library:"sap.ui.mdc",properties:{groupKey:{type:"any",group:"Appearance",defaultValue:null},groupText:{type:"string",group:"Appearance",defaultValue:null}}}});return p});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/MultiValueFieldDelegate",["sap/ui/mdc/field/FieldBaseDelegate"],function(e){"use strict";var i=Object.assign({},e);i.updateItems=function(e,i,t){};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/MultiValueFieldItem",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.field.MultiValueFieldItem",{metadata:{library:"sap.ui.mdc",properties:{key:{type:"any",byValue:true},description:{type:"string"}},defaultProperty:"key"}});t.prototype.bindProperty=function(t,r){if(t==="key"&&!r.formatter){r.targetType="raw"}e.prototype.bindProperty.apply(this,arguments)};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/OutParameter",["sap/ui/mdc/field/InParameter","sap/ui/mdc/enum/OutParameterMode"],function(e,a){"use strict";var u=e.extend("sap.ui.mdc.field.OutParameter",{metadata:{library:"sap.ui.mdc",properties:{fixedValue:{type:"any",defaultValue:null},mode:{type:"sap.ui.mdc.enum.OutParameterMode",defaultValue:a.Always}},defaultProperty:"value"}});return u});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/TokenDisplay",["sap/m/Token","sap/ui/mdc/field/TokenDisplayRenderer"],function(e,i){"use strict";var t=e.extend("sap.ui.mdc.field.TokenDisplay",{metadata:{library:"sap.ui.mdc",properties:{_delimiter:{type:"string",defaultValue:"",visibility:"hidden"}}},renderer:i});t.prototype.init=function(){e.prototype.init.apply(this,arguments);if(!this._oResourceBundle){this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")}this.setProperty("_delimiter",this._oResourceBundle.getText("field.SEPARATOR").trim())};t.prototype.getSelected=function(){return false};t.prototype.focus=function(){return};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/TokenDisplayRenderer",["sap/ui/core/Renderer","sap/m/TokenRenderer"],function(e,r){"use strict";var t=e.extend(r);t.apiVersion=2;t._setAttributes=function(e,t){r._setAttributes(e,t);e.attr("delimiter",t.getProperty("_delimiter"))};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/TokenizerDisplay",["sap/m/Tokenizer","sap/ui/mdc/field/TokenizerDisplayRenderer","sap/ui/events/KeyCodes","sap/m/library"],function(e,i,t,r){"use strict";var a=r.EmptyIndicatorMode;var n=e.extend("sap.ui.mdc.field.TokenizerDisplay",{metadata:{library:"sap.ui.mdc",properties:{emptyIndicatorMode:{type:"sap.m.EmptyIndicatorMode",group:"Appearance",defaultValue:a.Off}}},renderer:i});n.prototype.init=function(){e.prototype.init.apply(this,arguments);this.allowTextSelection(true);this.addStyleClass("sapUiMdcTokenizerDisplay")};n.prototype.onkeydown=function(i){e.prototype.onkeydown.call(this,i);if(!this.getEnabled()){return}if(i.which===t.ENTER){if(this.getHiddenTokensCount()>0){this._handleNMoreIndicatorPress()}}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/TokenizerDisplayRenderer",["sap/ui/core/Renderer","sap/m/TokenizerRenderer","sap/m/library","sap/ui/core/Core"],function(e,n,t,r){"use strict";var a=t.EmptyIndicatorMode;var i=r.getLibraryResourceBundle("sap.m");var o=e.extend(n);o.apiVersion=2;o._renderIndicator=function(e,t){n._renderIndicator.apply(this,arguments);if(t.getEmptyIndicatorMode()!==a.Off&&t.getTokens().length==0){this._renderEmptyIndicator(e,t)}};o._renderTabIndex=function(e,n){e.attr("tabindex","-1")};o._renderIndicatorTabIndex=function(e,n){e.attr("tabindex","0")};o._renderEmptyIndicator=function(e,n){e.openStart("span");e.class("sapMEmptyIndicator");if(n.getEmptyIndicatorMode()===a.Auto){e.class("sapMEmptyIndicatorAuto")}e.openEnd();e.openStart("span");e.attr("aria-hidden",true);e.openEnd();e.text(i.getText("EMPTY_INDICATOR"));e.close("span");e.openStart("span");e.class("sapUiPseudoInvisibleText");e.openEnd();e.text(i.getText("EMPTY_INDICATOR_TEXT"));e.close("span");e.close("span")};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/ValueHelpPanel",["sap/ui/core/XMLComposite","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/base/ManagedObjectObserver","sap/base/strings/formatMessage","sap/ui/model/resource/ResourceModel","sap/m/Tokenizer","sap/ui/mdc/enum/ConditionValidated"],function(e,t,i,n,o,a,r,s){"use strict";var l=e.extend("sap.ui.mdc.field.ValueHelpPanel",{metadata:{library:"sap.ui.mdc",properties:{showTokenizer:{type:"boolean",group:"Data",defaultValue:true},showFilterbar:{type:"boolean",group:"Data",defaultValue:true},conditions:{type:"object[]",group:"Data",defaultValue:[],byValue:true},formatOptions:{type:"object",defaultValue:{}},inputOK:{type:"boolean",defaultValue:true},_filterBarVisible:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"}}},fragment:"sap.ui.mdc.field.ValueHelpPanel",init:function(){var e=this._getManagedObjectModel();e.setSizeLimit(1e6);if(!this._oTokenizer){this._oTokenizer=this.byId("VHPTokenizer");this._oTokenizer.addAriaDescribedBy(this._oTokenizer.getTokensInfoId());this._oTokenizer._oScroller.setHorizontal(true)}this._oTokenizerPanel=this.byId("VHPTokenizerPanel");this._oFilterVBox=this.byId("filterbarVBox");this._oFilterVBox._oValueHelpPanel=this;this._oFilterVBox.getItemsOriginal=this._oFilterVBox.getItems;this._oFilterVBox.getItems=function(){var e=this.getItemsOriginal();if(this._oValueHelpPanel._oFilterbar&&this._oValueHelpPanel.getProperty("_filterBarVisible")){e.push(this._oValueHelpPanel._oFilterbar)}return e};this._oTablePanel=this.byId("tablePanel");this._oTablePanel._oValueHelpPanel=this;this._oTablePanel.getContentOriginal=this._oTablePanel.getContent;this._oTablePanel.getContent=function(){var e=this.getContentOriginal();if(this._oValueHelpPanel._oTable){e.push(this._oValueHelpPanel._oTable)}return e};this._oObserver=new n(d.bind(this));this._oObserver.observe(this,{properties:["formatOptions","showFilterbar","showTokenizer","_filterBarVisible"]});this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")},exit:function(){if(!this.getShowTokenizer()){this._oTokenizerPanel.destroy()}if(this._oDefineConditionPanel&&!this._oDefineConditionPanel.getParent()){this._oDefineConditionPanel.destroy()}this._oObserver.disconnect();this._oObserver=undefined;this._oTablePanel=null;this._oFilterVBox=null;this._oResourceBundle=null},onBeforeRendering:function(){if(!this.getModel("$i18n")){this.setModel(new a({bundleName:"sap/ui/mdc/messagebundle",async:false}),"$i18n")}},setFilterbar:function(e){var t=this.getShowFilterbar();if(this._oFilterbar){if(this._bFilterbarParentSet){this._oFilterbar.setParent();delete this._bFilterbarParentSet}}this._oFilterbar=e;if(e){if(!e.getParent()){e.setParent(this);this._bFilterbarParentSet=true}e.getParent().getDirection=this._oFilterVBox.getDirection.bind(this._oFilterVBox)}var i=this.byId("iconTabBar");i.getItems()[0].setVisible(i.getItems()[0].getContent().length>0);i.setSelectedKey("selectFromList");this._updateITBHeaderVisiblity();this.setProperty("_filterBarVisible",t&&!!this._oFilterbar,true)},setTable:function(e){if(this._oTable){if(this._bTableParentSet&&this._oTable.getParent()){this._oTable.setParent()}delete this._bTableParentSet}this._oTable=e;if(e){if(!e.getParent()){e.setParent(this);this._bTableParentSet=true}}this._oTablePanel.invalidate();var t=this.byId("iconTabBar");t.getItems()[0].setVisible(t.getItems()[0].getContent().length>0);t.setSelectedKey("selectFromList");this._updateITBHeaderVisiblity()},getTable:function(){if(this._oTable){return this._oTable}else{return undefined}},setDefineConditions:function(e){var t=this.byId("iconTabBar");var i=this.byId("defineConditionPanel");if(this._oDefineConditionPanel){i.removeContent(this._oDefineConditionPanel);this._oDefineConditionPanel.destroy()}this._oDefineConditionPanel=e;t.getItems()[1].setVisible(!!this._oDefineConditionPanel);this._updateITBHeaderVisiblity()},_updateITBHeaderVisiblity:function(){var e=this.byId("iconTabBar");if(e.getItems()[0].getVisible()&&e.getItems()[1].getVisible()){e.removeStyleClass("sapMdcNoHeader")}else{e.addStyleClass("sapMdcNoHeader")}if(e.getItems()[1].getVisible()&&e.getSelectedKey()!=="selectFromList"){h.call(this)}},_handleTokenDelete:function(e){if(e.getParameter("tokens")){var t=e.getParameter("tokens");var i=this.getConditions();var n;for(n=0;n<t.length;n++){var o=t[n];var a=o.getBindingContext("$this").sPath;var r=parseInt(a.slice(a.lastIndexOf("/")+1));i[r].delete=true}for(n=i.length-1;n>=0;n--){if(i[n].delete){i.splice(n,1)}}this.setProperty("conditions",i,true)}},_onRemoveAllConditions:function(e){this.setProperty("conditions",[],true)},iconTabSelect:function(e){var t=e.getParameter("key");if(t==="defineCondition"){h.call(this)}},_formatListTabTitle:function(e,t){var i=0;for(var n=0;n<t.length;n++){var a=t[n];if(a.isEmpty!==true&&a.validated===s.Validated){i++}}if(i===0){e=this._oResourceBundle.getText("valuehelp.SELECTFROMLISTNONUMBER")}return o(e,i)},_formatDefineTabTitle:function(e,t){var i=0;for(var n=0;n<t.length;n++){var a=t[n];if(a.isEmpty!==true&&a.validated!==s.Validated){i++}}if(i===0){e=this._oResourceBundle.getText("valuehelp.DEFINECONDITIONSNONUMBER")}return o(e,i)},_formatTableTitle:function(e){var t=0;e=this._oResourceBundle.getText("valuehelp.TABLETITLENONUMBER");return o(e,t)},_formatTokenizerTitle:function(e,t){var i=0;for(var n=0;n<t.length;n++){var a=t[n];if(a.isEmpty!==true){i++}}if(i===0){e=this._oResourceBundle.getText("valuehelp.TOKENIZERTITLENONUMBER")}return o(e,i)}});function d(e){if(e.name==="formatOptions"){var t=this._oTokenizer.getBindingInfo("tokens");if(t&&t.template){t=t.template.getBindingInfo("text");if(t&&t.type){t.type.setFormatOptions(e.current)}}}if(e.name==="showTokenizer"){var i=this.byId("rootVBox");var n=this._oTokenizer.getBinding("tokens");if(e.current){if(n){n.resume()}i.insertItem(this._oTokenizerPanel,1)}else{if(n){n.suspend()}i.removeItem(this._oTokenizerPanel)}}if(e.name==="showFilterbar"){this.setProperty("_filterBarVisible",e.current&&!!this._oFilterbar,true)}if(e.name==="_filterBarVisible"){this._oTablePanel.invalidate()}}function h(){if(this._oDefineConditionPanel){if(!this._oDefineConditionPanel.getModel("$VHP")){var e=this._getManagedObjectModel();this._oDefineConditionPanel.setModel(e,"$VHP");var t=this._oDefineConditionPanel.getMetadata();if(t.hasProperty("formatOptions")&&!this._oDefineConditionPanel.getBindingPath("formatOptions")&&this._oDefineConditionPanel.isPropertyInitial("formatOptions")){this._oDefineConditionPanel.bindProperty("formatOptions",{path:"$VHP>/formatOptions"})}if(t.hasProperty("conditions")&&!this._oDefineConditionPanel.getBindingPath("conditions")&&this._oDefineConditionPanel.isPropertyInitial("conditions")){this._oDefineConditionPanel.bindProperty("conditions",{path:"$VHP>/conditions"})}if(t.hasProperty("inputOK")&&!this._oDefineConditionPanel.getBindingPath("inputOK")&&this._oDefineConditionPanel.isPropertyInitial("inputOK")){this._oDefineConditionPanel.bindProperty("inputOK",{path:"$VHP>/inputOK"})}}var i=this.byId("defineConditionPanel");i.addContent(this._oDefineConditionPanel)}}return l});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/BooleanContent",["sap/ui/mdc/field/content/DefaultContent"],function(e){"use strict";var t=Object.assign({},e,{getDisplayMultiValue:function(){return[null]},getDisplayMultiLine:function(){return[null]},getEditMultiValue:function(){return[null]},getEditMultiLine:function(){return[null]},getUseDefaultFieldHelp:function(){return{name:"bool",oneOperatorSingle:true,oneOperatorMulti:true,single:true,multi:true}},createEditMultiValue:function(){throw new Error("sap.ui.mdc.field.content.BooleanContent - createEditMultiValue not defined!")},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.BooleanContent - createEditMultiLine not defined!")},createDisplayMultiValue:function(){throw new Error("sap.ui.mdc.field.content.BooleanContent - createDisplayMultiValue not defined!")},createDisplayMultiLine:function(){throw new Error("sap.ui.mdc.field.content.BooleanContent - createDisplayMultiLine not defined!")}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/ContentFactory",["sap/ui/base/Object","sap/ui/mdc/enum/EditMode","sap/ui/mdc/enum/ContentMode","sap/ui/mdc/util/loadModules","sap/ui/mdc/field/content/DefaultContent","sap/ui/mdc/field/content/SearchContent","sap/ui/mdc/field/content/DateContent","sap/ui/mdc/field/content/TimeContent","sap/ui/mdc/field/content/DateTimeContent","sap/ui/mdc/field/content/LinkContent","sap/ui/mdc/field/content/BooleanContent","sap/ui/mdc/field/content/UnitContent","sap/ui/mdc/field/ConditionType","sap/ui/mdc/field/ConditionsType","sap/ui/base/SyncPromise"],function(t,e,n,i,o,s,r,a,p,d,l,y,u,h,f){"use strict";var c=t.extend("sap.ui.mdc.field.content.ContentFactory",{metadata:{library:"sap.ui.mdc"},constructor:function(e,n){this._oField=n?n.field:null;this._fnHandleTokenUpdate=n?n.handleTokenUpdate:null;this._fnHandleContentChange=n?n.handleContentChange:null;this._fnHandleContentLiveChange=n?n.handleContentLiveChange:null;this._fnHandleValueHelpRequest=n?n.handleValueHelpRequest:null;this._fnHandleEnter=n?n.handleEnter:null;this._fnHandleContentPress=n?n.handleContentPress:null;t.prototype.constructor.apply(this,arguments)}});var C={Default:o,Search:s,Date:r,Time:a,DateTime:p,Link:d,Boolean:l,Unit:y};c.prototype.init=function(){this._oContentTypeClass;this._sOperator};c.prototype.exit=function(){this._oField=undefined;this._fnHandleTokenUpdate=undefined;this._fnHandleContentChange=undefined;this._fnHandleContentLiveChange=undefined;this._fnHandleValueHelpRequest=undefined;this._fnHandleEnter=undefined;this._fnHandleContentPress=undefined;this._oContentTypeClass=undefined;this._sOperator=undefined;if(this._oConditionType&&this._oConditionType._bCreatedByField){this._oConditionType.destroy();this._oConditionType=undefined}if(this._oConditionsType&&this._oConditionsType._bCreatedByField){this._oConditionsType.destroy();this._oConditionsType=undefined}};c.prototype.createContent=function(t,e,n){var o=t.getControlNames(e,this._sOperator);var s;if(o.every(function(t){return!t})){return Promise.resolve([])}try{s=i(o).catch(function(t){throw new Error("loadModules promise rejected in sap.ui.mdc.field.content.ContentFactory:createContent function call - could not load controls "+JSON.stringify(o))}).then(function(i){if(this.getField()&&!this.getField()._bIsBeingDestroyed){return t.create(this,e,this._sOperator,i,n)}else{return[]}}.bind(this)).unwrap()}catch(t){throw new Error("Error in sap.ui.mdc.field.content.ContentFactory:createContent function call ErrorMessage: '"+t.message+"'")}if(s.then){s.catch(function(t){throw new Error("Error in sap.ui.mdc.field.content.ContentFactory:createContent function call ErrorMessage: '"+t.message+"'")});return s}return f.resolve(s)};c.prototype.getContentMode=function(t,i,o,s,r){var a=n.Edit;if(i===e.Display){if(o!==1){a=n.DisplayMultiValue}else if(s){a=n.DisplayMultiLine}else{a=n.Display}}else if(o!==1){a=n.EditMultiValue}else if(s){a=n.EditMultiLine}else if(r.length===1&&t.getEditOperator()&&t.getEditOperator()[r[0]]){this._sOperator=r[0];a=n.EditOperator}else if(this.getField().getFieldHelp()){a=n.EditForHelp}return a};c.prototype.getContentType=function(t,e,n){var i=this.getField();var o=C[t]?C[t]:null;if(!o){if(i.getFieldInfo()&&n){o=C.Link}else{var s=new RegExp("^\\*(.*)\\*|\\$search$");if(s.test(i.getFieldPath())&&e===1){o=C.Search}else{o=C.Default}}}return o};c._updateLink=function(t,e){if(e){t.setHref(e.href);t.setTarget(e.target)}};c._getEnabled=function(t){return t&&t!==e.Disabled};c._getEditable=function(t){return t===e.Editable||t===e.EditableReadOnly||t===e.EditableDisplay};c._getDisplayOnly=function(t){return t&&t!==e.Editable};c._getEditableUnit=function(t){return t===e.Editable};c.prototype.getField=function(){return this._oField};c.prototype.getFieldHelpIcon=function(){return this.getField()._getFieldHelpIcon()};c.prototype.getHandleTokenUpdate=function(){return this._fnHandleTokenUpdate};c.prototype.getHandleContentChange=function(){return this._fnHandleContentChange};c.prototype.getHandleContentLiveChange=function(){return this._fnHandleContentLiveChange};c.prototype.getHandleValueHelpRequest=function(){return this._fnHandleValueHelpRequest};c.prototype.getHandleEnter=function(){return this._fnHandleEnter};c.prototype.getHandleContentPress=function(){return this._fnHandleContentPress};c.prototype.setBoundProperty=function(t){this._sBoundProperty=t};c.prototype.getBoundProperty=function(){return this._sBoundProperty};c.prototype.setAriaLabelledBy=function(t){if(t.addAriaLabelledBy){var e=this.getField().getAriaLabelledBy();for(var n=0;n<e.length;n++){var i=e[n];t.addAriaLabelledBy(i)}}};c.prototype.setHideOperator=function(t){this._bHideOperator=t};c.prototype.getHideOperator=function(){return this._bHideOperator};function _(t,e,n,i){if(!i){if(this[t]&&this[t].getMetadata().getName()!==e.getMetadata().getName()){this[t].destroy();this[t]=undefined}if(!this[t]){var o=n();this[t]=new e(o);this[t]._bCreatedByField=true}}return this[t]}c.prototype.getConditionType=function(t){return _.call(this,"_oConditionType",u,this.getField()._getFormatOptions.bind(this.getField()),t)};c.prototype.setConditionType=function(t){this._oConditionType=t};c.prototype.getConditionsType=function(t,e){var n=e||h;return _.call(this,"_oConditionsType",n,this.getField()._getFormatOptions.bind(this.getField()),t)};c.prototype.setConditionsType=function(t){this._oConditionsType=t};c.prototype.getUnitConditionsType=function(t){return _.call(this,"_oUnitConditionsType",h,this.getField()._getUnitFormatOptions.bind(this.getField()),t)};c.prototype.getContentConditionTypes=function(){return this._oContentConditionTypes};c.prototype.setContentConditionTypes=function(t){this._oContentConditionTypes=t};c.prototype._setUsedConditionType=function(t,n){if(this._oConditionType&&!this._oConditionType._bCreatedByField){this._oConditionType=undefined}if(this._oConditionsType&&!this._oConditionsType._bCreatedByField){this._oConditionsType=undefined}var i;var o;if(t){if(this._oContentConditionTypes.content){i=this._oContentConditionTypes.content.oConditionType;o=this._oContentConditionTypes.content.oConditionsType}}else if(n===e.Display&&this.getField().getContentDisplay()){if(this._oContentConditionTypes.contentDisplay){i=this._oContentConditionTypes.contentDisplay.oConditionType;o=this._oContentConditionTypes.contentDisplay.oConditionsType}}else if(n!==e.Display&&this.getField().getContentEdit()){if(this._oContentConditionTypes.contentEdit){i=this._oContentConditionTypes.contentEdit.oConditionType;o=this._oContentConditionTypes.contentEdit.oConditionsType}}if(i){if(this._oConditionType&&this._oConditionType._bCreatedByField){this._oConditionType.destroy()}this._oConditionType=i}if(o){if(this._oConditionsType&&this._oConditionsType._bCreatedByField){this._oConditionsType.destroy()}this._oConditionsType=o}this.updateConditionType()};c.prototype.getDataType=function(){return this._oDataType};c.prototype.setDataType=function(t){this._oDataType=t};c.prototype.retrieveDataType=function(){if(!this._oDataType){var t=this.getField().getDataType();if(typeof t==="string"){this._oDataType=this.getField().getTypeUtil().getDataTypeInstance(t,this.getField().getDataTypeFormatOptions(),this.getField().getDataTypeConstraints());this._oDataType._bCreatedByField=true}}return this._oDataType};c.prototype.getDateOriginalType=function(){return this._oDateOriginalType};c.prototype.setDateOriginalType=function(t){this._oDateOriginalType=t};c.prototype.getUnitOriginalType=function(){return this._oUnitOriginalType};c.prototype.setUnitOriginalType=function(t){this._oUnitOriginalType=t};c.prototype.getUnitType=function(){return this._oUnitType};c.prototype.setUnitType=function(t){this._oUnitType=t};c.prototype.getCompositeTypes=function(){return this._aCompositeTypes};c.prototype.setCompositeTypes=function(t){this._aCompositeTypes=t};c.prototype.isMeasure=function(){return this._bIsMeasure};c.prototype.setIsMeasure=function(t){this._bIsMeasure=t};c.prototype.getDisplayFormat=function(){return this._sDisplayFormat};c.prototype.setDisplayFormat=function(t){this._sDisplayFormat=t};c.prototype.getValueFormat=function(){return this._sValueFormat};c.prototype.setValueFormat=function(t){this._sValueFormat=t};c.prototype.getCalendarType=function(){return this._sCalendarType};c.prototype.setCalendarType=function(t){this._sCalendarType=t};c.prototype.getFieldTypeInitialization=function(){return this.getField()._oTypeInitialization};c.prototype.updateConditionType=function(){var t=this._oConditionType;var e=this._oConditionsType;if(t||e){var n=this.getField()._getFormatOptions();if(t){t.setFormatOptions(n)}if(e){e.setFormatOptions(n)}if(this._oUnitConditionsType){n=this.getField()._getUnitFormatOptions();this._oUnitConditionsType.setFormatOptions(n)}}};return c});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/DateContent",["sap/ui/mdc/field/content/DefaultContent","sap/ui/mdc/enum/BaseType","sap/ui/mdc/util/DateUtil","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/core/library"],function(e,t,a,r,i,n){"use strict";var l=n.CalendarType;var o;var d;var p;var s=Object.assign({},e,{getEditMultiLine:function(){return[null]},getEdit:function(){return["sap/m/DynamicDateRange","sap/ui/mdc/condition/OperatorDynamicDateOption","sap/ui/mdc/field/DynamicDateRangeConditionsType","sap/m/StandardDynamicDateRangeKeys","sap/m/DynamicDateUtil","sap/m/DynamicDateFormat"]},getEditOperator:function(){return{EQ:{name:"sap/m/DatePicker",create:this._createDatePickerControl},BT:{name:"sap/m/DateRangeSelection",create:this._createDateRangePickerControl}}},getEditForHelp:function(){return e.getEdit.apply(this,arguments)},getUseDefaultFieldHelp:function(){return{name:"defineConditions",oneOperatorSingle:false,oneOperatorMulti:true,single:false,multi:true}},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.DateContent - createEditMultiLine not defined!")},_createDatePickerControl:function(e,t,a){var r=t[0];var i=e.getConditionsType();e.setHideOperator(true);this._adjustDataTypeForDate(e);var n=new r(a,{value:{path:"$field>/conditions",type:i},displayFormat:e.getDisplayFormat(),valueFormat:e.getValueFormat(),placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",change:e.getHandleContentChange()});if(n.setDisplayFormatType){n.setDisplayFormatType(e.getCalendarType())}n._setPreferUserInteraction(true);e.setAriaLabelledBy(n);e.setBoundProperty("value");return[n]},_createDateRangePickerControl:function(e,t,a){var r=t[0];var i=e.getConditionsType();this._adjustDataTypeForDate(e);var n=new r(a,{value:{path:"$field>/conditions",type:i},displayFormat:e.getDisplayFormat(),valueFormat:e.getValueFormat(),delimiter:"...",displayFormatType:e.getCalendarType(),placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",change:e.getHandleContentChange()});n._setPreferUserInteraction(true);e.setAriaLabelledBy(n);e.setBoundProperty("value");return[n]},_adjustDataTypeForDate:function(e){var t=e.retrieveDataType();var r=t.getFormatOptions();this._getDatePattern(e,r);if(!r||r.style||!r.pattern||r.pattern!==e.getValueFormat()||!r.calendarType||r.calendarType!==l.Gregorian){e.setDateOriginalType(e.getDataType());e.setDataType(a.createInternalType(t,e.getValueFormat()));e.updateConditionType()}},_getDatePattern:function(e,a){var r=e.getField().getBaseType();switch(r){case t.Date:e.setValueFormat("yyyy-MM-dd");break;case t.DateTime:e.setValueFormat("yyyy-MM-dd'T'HH:mm:ss");break;case t.Time:e.setValueFormat("HH:mm:ss");break;default:return}e.setDisplayFormat("medium");if(a){if(a.style){e.setDisplayFormat(a.style)}else if(a.pattern){e.setDisplayFormat(a.pattern)}if(a.calendarType){e.setCalendarType(a.calendarType)}}},createEdit:function(e,t,a){var r=t[0];var i=t[1];var n=t[2];if(!o||!d||!p){o=t[3];d=t[4];p=t[5]}var l=e.getConditionsType(false,n);var s;if(e.getField().getMetadata().hasProperty("operators")){var u=function(t){return this._getDateRangeOptions(t,e,i)}.bind(this);s={path:"$field>/operators",formatter:u}}else{s=this._getDateRangeOptions(undefined,e,i)}var c=new r(a,{value:{path:"$field>/conditions",type:l},formatter:this._getDateRangeFormatter(e),placeholder:"{$field>/placeholder}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",options:s,change:e.getHandleContentChange()});e.setBoundProperty("value");e.setAriaLabelledBy(r);return[c]},createEditForHelp:function(t,a,r){return e.createEdit.apply(this,arguments)},_getDateRangeOptions:function(e,t,a){if(!e||e.length===0){e=t.getField()._getOperators()}var r=[];var i=t.getField().getBaseType();for(var n=0;n<e.length;n++){var l=e[n];var o=this._getDateRangeOption(l,t,a,i);if(o){r.push(o)}}return r},_getDateRangeOption:function(e,t,a,n){var l=r.getOperator(e);var p;if(l){p=r.getDynamicDateOptionForOperator(l,o,n);if(!p){p=r.getCustomDynamicDateOptionForOperator(l,n);if(!d.getOption(p)){var s=t.retrieveDataType();var u=[];for(var c=0;c<l.valueTypes.length;c++){if(l.valueTypes[c]&&l.valueTypes[c]!==i.ValueType.Static){u.push("custom")}}d.addOption(new a({key:p,operator:l,type:s,baseType:n,valueTypes:u}))}}}return p},_getDateRangeFormatter:function(e){var a=e.retrieveDataType();var r=e.getField().getBaseType();var i=a.getFormatOptions();var n;var l={};if(i.style){n={style:i.style}}else if(i.pattern){n={pattern:i.pattern}}if(r===t.DateTime){l.datetime=n}l.date=n;return p.getInstance(l)}});return s});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/DateTimeContent",["sap/ui/mdc/field/content/DefaultContent","sap/ui/mdc/field/content/DateContent","sap/ui/mdc/util/DateUtil","sap/base/util/merge","sap/base/util/ObjectPath"],function(e,t,a,i,n){"use strict";var r=Object.assign({},t,{getEditOperator:function(){return{EQ:{name:"sap/m/DateTimePicker",create:this._createDatePickerControl}}},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.DateTimeContent - createEditMultiLine not defined!")},_createDatePickerControl:function(e,i,n){var r=t._createDatePickerControl.apply(this,arguments);var o=e.getDateOriginalType()||e.getDataType();if(a.showTimezone(o)){var s=e.getUnitConditionsType();r[0].bindProperty("timezone",{path:"$field>/conditions",type:s});r[0].setShowTimezone(true)}return r},_adjustDataTypeForDate:function(e){var r=e.retrieveDataType();var o=r.getFormatOptions();if(a.showTimezone(r)){this._getDatePattern(e,o);e.setDateOriginalType(e.getDataType());e.setDataType(a.createInternalType(r,e.getValueFormat()));e.updateConditionType();o=i({},o);delete o.pattern;o.showDate=false;o.showTime=false;o.showTimezone=true;var s=r.getConstraints();var p=r.getMetadata().getName();var c=n.get(p);e.setUnitType(new c(o,s))}else{t._adjustDataTypeForDate.apply(this,arguments)}}});return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/DefaultContent",["sap/m/library","sap/ui/mdc/enum/ContentMode"],function(e,t){"use strict";var i=e.EmptyIndicatorMode;var a=e.TokenizerRenderMode;var l={getDisplay:function(){return["sap/m/Text"]},getDisplayMultiValue:function(){return["sap/ui/mdc/field/TokenizerDisplay","sap/ui/mdc/field/TokenDisplay"]},getDisplayMultiLine:function(){return["sap/m/ExpandableText"]},getEdit:function(){return["sap/ui/mdc/field/FieldInput"]},getEditMultiValue:function(){return["sap/ui/mdc/field/FieldMultiInput","sap/m/Token"]},getEditMultiLine:function(){return["sap/m/TextArea"]},getEditOperator:function(){return[null]},getEditForHelp:function(){return this.getEdit()},getUseDefaultEnterHandler:function(){return true},getUseDefaultFieldHelp:function(){return{name:"defineConditions",oneOperatorSingle:false,oneOperatorMulti:false,single:true,multi:true}},getControlNames:function(e,i){var a;switch(e){case t.Display:a=this.getDisplay();break;case t.DisplayMultiValue:a=this.getDisplayMultiValue();break;case t.DisplayMultiLine:a=this.getDisplayMultiLine();break;case t.EditMultiValue:a=this.getEditMultiValue();break;case t.EditMultiLine:a=this.getEditMultiLine();break;case t.EditOperator:if(this.getEditOperator()){a=this.getEditOperator()[i]?this.getEditOperator()[i].name:[null]}else{a=[null]}break;case t.EditForHelp:a=this.getEditForHelp();break;default:a=this.getEdit()}if(a){return Array.isArray(a)?a:[a]}throw new Error("No control defined for content mode "+e)},create:function(e,i,a,l,r){switch(i){case t.Display:return this.createDisplay(e,l,r);case t.DisplayMultiValue:return this.createDisplayMultiValue(e,l,r);case t.DisplayMultiLine:return this.createDisplayMultiLine(e,l,r);case t.EditMultiValue:return this.createEditMultiValue(e,l,r);case t.EditMultiLine:return this.createEditMultiLine(e,l,r);case t.EditOperator:if(this.getEditOperator()){return this.getEditOperator()[a]?this.getEditOperator()[a].create.call(this,e,l,r):[null]}return[null];case t.EditForHelp:return this.createEditForHelp(e,l,r);default:return this.createEdit(e,l,r)}},createEdit:function(e,t,i){var a=t[0];var l=e.getConditionsType();var r=new a(i,{value:{path:"$field>/conditions",type:l},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",valueHelpIconSrc:e.getFieldHelpIcon(),showValueHelp:"{$field>/_fieldHelpEnabled}",ariaAttributes:"{$field>/_ariaAttributes}",width:"100%",tooltip:"{$field>/tooltip}",autocomplete:false,change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),valueHelpRequest:e.getHandleValueHelpRequest()});r._setPreferUserInteraction(true);e.setBoundProperty("value");e.setAriaLabelledBy(r);return[r]},createEditMultiValue:function(e,t,i){var a=t[0];var l=t[1];var r=e.getConditionType();var n=new l(i+"-token",{text:{path:"$field>",type:r}});var d=new a(i,{placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",valueHelpIconSrc:e.getFieldHelpIcon(),ariaAttributes:"{$field>/_ariaAttributes}",width:"100%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:n},dependents:[n],autocomplete:false,showSuggestion:false,change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),tokenUpdate:e.getHandleTokenUpdate(),valueHelpRequest:e.getHandleValueHelpRequest()});d._setPreferUserInteraction(true);e.setAriaLabelledBy(d);return[d]},createEditMultiLine:function(e,t,i){var a=t[0];var l=e.getConditionsType();var r=new a(i,{value:{path:"$field>/conditions",type:l},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",rows:4,tooltip:"{$field>/tooltip}",change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange()});r._setPreferUserInteraction(true);e.setBoundProperty("value");e.setAriaLabelledBy(r);return[r]},createDisplay:function(e,t,a){var l=t[0];var r=e.getConditionsType();var n=new l(a,{text:{path:"$field>/conditions",type:r},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",wrapping:"{$field>/multipleLines}",width:"100%",tooltip:"{$field>/tooltip}",emptyIndicatorMode:i.Auto});e.setBoundProperty("text");return[n]},createDisplayMultiLine:function(e,t,a){var l=t[0];var r=e.getConditionsType();var n=new l(a,{text:{path:"$field>/conditions",type:r},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",tooltip:"{$field>/tooltip}",emptyIndicatorMode:i.Auto});e.setBoundProperty("text");return[n]},createDisplayMultiValue:function(e,t,l){var r=t[0];var n=t[1];var d=e.getConditionType();var o=new n(l+"-token",{text:{path:"$field>",type:d}});var u=new r(l,{editable:false,emptyIndicatorMode:i.Auto,renderMode:a.Narrow,width:"100%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:o},dependents:[o]});return[u]},createEditForHelp:function(e,t,i){return this.createEdit(e,t,i)}};return l});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/LinkContent",["sap/ui/mdc/field/content/DefaultContent"],function(e){"use strict";var t=Object.assign({},e,{getDisplay:function(){return["sap/m/Link"]},getDisplayMultiValue:function(){return[null]},getDisplayMultiLine:function(){return["sap/m/Link"]},getUseDefaultFieldHelp:function(){return false},createDisplay:function(e,t,n){var i=t[0];var l=e.getConditionsType();var a=new i(n,{text:{path:"$field>/conditions",type:l},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",tooltip:"{$field>/tooltip}",press:e.getHandleContentPress(),wrapping:"{$field>/multipleLines}"});var r=e.getField().getFieldInfo();if(r){r.getDirectLinkHrefAndTarget().then(function(t){e.getMetadata()._oClass._updateLink(a,t)})}e.setAriaLabelledBy(a);e.setBoundProperty("text");return[a]},createDisplayMultiValue:function(){throw new Error("sap.ui.mdc.field.content.LinkContent - createDisplayMultiValue not defined!")},createDisplayMultiLine:function(e,n,i){return t.createDisplay(e,n,i)}});return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/SearchContent",["sap/ui/mdc/field/content/DefaultContent","sap/ui/model/BindingMode"],function(e,t){"use strict";var n=Object.assign({},e,{getDisplayMultiValue:function(){return[null]},getDisplayMultiLine:function(){return[null]},getEdit:function(){return["sap/m/SearchField"]},getEditMultiValue:function(){return[null]},getEditMultiLine:function(){return[null]},getEditForHelp:function(){return[null]},getUseDefaultEnterHandler:function(){return false},getUseDefaultFieldHelp:function(){return false},createEdit:function(e,n,i){var r=n[0];var l=e.getConditionsType();e.setHideOperator(true);e.updateConditionType();var a=new r(i,{value:{path:"$field>/conditions",type:l,mode:t.OneWay},placeholder:"{$field>/placeholder}",width:"100%",tooltip:"{$field>/tooltip}",search:e.getHandleEnter(),change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange()});e.setAriaLabelledBy(a);e.setBoundProperty("value");return[a]},createEditMultiValue:function(){throw new Error("sap.ui.mdc.field.content.SearchContent - createEditMultiValue not defined!")},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.SearchContent - createEditMultiLine not defined!")},createDisplayMultiValue:function(){throw new Error("sap.ui.mdc.field.content.SearchContent - createDisplayMultiValue not defined!")},createDisplayMultiLine:function(){throw new Error("sap.ui.mdc.field.content.SearchContent - createDisplayMultiLine not defined!")},createEditForHelp:function(){throw new Error("sap.ui.mdc.field.content.SearchContent - createEditForHelp not defined!")}});return n});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/TimeContent",["sap/ui/mdc/field/content/DefaultContent","sap/ui/mdc/field/content/DateContent"],function(t,e){"use strict";var n=Object.assign({},e,{getEditOperator:function(){return{EQ:{name:"sap/m/TimePicker",create:this._createDatePickerControl}}},getEdit:function(){return t.getEdit.apply(this,arguments)},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.TimeContent - createEditMultiLine not defined!")},createEdit:function(e,n,i){return t.createEdit.apply(this,arguments)}});return n});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/field/content/UnitContent",["sap/ui/mdc/field/content/DefaultContent","sap/ui/model/Filter","sap/base/util/isEmptyObject","sap/base/util/merge","sap/base/util/ObjectPath","sap/ui/mdc/enum/EditMode"],function(e,t,a,i,l,n){"use strict";var d=Object.assign({},e,{getEdit:function(){return["sap/ui/mdc/field/FieldInput","sap/ui/core/InvisibleText"]},getEditMultiValue:function(){return["sap/ui/mdc/field/FieldMultiInput","sap/ui/mdc/field/FieldInput","sap/m/Token","sap/ui/core/InvisibleText"]},getEditMultiLine:function(){return[null]},getUseDefaultFieldHelp:function(){return false},createEdit:function(e,t,a){e.setIsMeasure(true);var i=t[0];var l=t[1];var n=e.getConditionsType();this._adjustDataTypeForUnit(e);var d=l.getStaticId("sap.ui.mdc","field.NUMBER");var r=[];var o=new i(a,{value:{path:"$field>/conditions",type:n},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",valueHelpIconSrc:"sap-icon://slim-arrow-down",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",autocomplete:false,fieldGroupIds:[e.getField().getId()],ariaDescribedBy:[d],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange()});o._setPreferUserInteraction(true);e.setAriaLabelledBy(o);r.push(o);r=this._addUnitControl(e,r,a,i,l);e.setBoundProperty("value");return r},createEditMultiValue:function(e,a,i){e.setIsMeasure(true);var l=a[0];var n=a[2];var d=a[1];var r=a[3];var o=e.getConditionType();this._adjustDataTypeForUnit(e);var s=[];var u=new n(i+"-token",{text:{path:"$field>",type:o}});var p=new t({path:"values",test:function(e){if(!Array.isArray(e[0])||e[0][0]){return true}else{return false}}});var f=r.getStaticId("sap.ui.mdc","field.NUMBER");var g=new l(i,{placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",fieldGroupIds:[e.getField().getId()],ariaDescribedBy:[f],tokens:{path:"$field>/conditions",template:u,filters:[p]},dependents:[u],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),tokenUpdate:e.getHandleTokenUpdate()});g._setPreferUserInteraction(true);e.setAriaLabelledBy(g);s.push(g);s=this._addUnitControl(e,s,i,d,r);e.setBoundProperty("value");return s},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.UnitContent - createEditMultiLine not defined!")},_addUnitControl:function(e,t,a,i,l){var d=e.getUnitConditionsType();if(e.getField().getEditMode()===n.EditableDisplay){t[0].bindProperty("description",{path:"$field>/conditions",type:d});t[0].setWidth("100%");t[0].setFieldWidth("70%")}else{var r;var o=e.getUnitOriginalType();var s=o&&o.getMetadata().getName();if(s&&s.indexOf("Currency")>=0){r=l.getStaticId("sap.ui.mdc","field.CURRENCY")}else{r=l.getStaticId("sap.ui.mdc","field.UNIT")}var u=new i(a+"-unit",{value:{path:"$field>/conditions",type:d},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditableUnit},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueHelpIconSrc:e.getFieldHelpIcon(),valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",ariaAttributes:"{$field>/_ariaAttributes}",width:"30%",tooltip:"{$field>/tooltip}",autocomplete:false,fieldGroupIds:[e.getField().getId()],ariaDescribedBy:[r],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),valueHelpRequest:e.getHandleValueHelpRequest()});u._setPreferUserInteraction(true);e.setAriaLabelledBy(u);t.push(u)}return t},_adjustDataTypeForUnit:function(e){var t=e.getField();var n=e.retrieveDataType();var d=n.getMetadata().getName();var r=n.getFormatOptions();var o=a(n.getConstraints())?undefined:n.getConstraints();var s=!r||!r.hasOwnProperty("showMeasure")||r.showMeasure;var u=!r||!r.hasOwnProperty("showNumber")||r.showNumber;if(s&&u){r=i({},r);r.showMeasure=false;r.showNumber=true;r.strictParsing=true;var p=l.get(d);e.setUnitOriginalType(e.getDataType());e.setDataType(new p(r,o));t.getControlDelegate().initializeInternalUnitType(t.getPayload(),e.getDataType(),e.getFieldTypeInitialization());r=i({},r);r.showMeasure=true;r.showNumber=false;r.strictParsing=true;p=l.get(d);e.setUnitType(new p(r,o));t.getControlDelegate().initializeInternalUnitType(t.getPayload(),e.getUnitType(),e.getFieldTypeInitialization());e.updateConditionType()}}});return d});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/FilterBarBase",["sap/ui/mdc/p13n/subcontroller/FilterController","sap/ui/core/library","sap/ui/core/ShortcutHintsMixin","sap/ui/Device","sap/ui/mdc/Control","sap/base/Log","sap/base/util/merge","sap/ui/model/base/ManagedObjectModel","sap/ui/base/ManagedObjectObserver","sap/ui/mdc/condition/ConditionModel","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/ConditionConverter","sap/ui/mdc/util/IdentifierUtil","sap/ui/mdc/filterbar/PropertyHelper","sap/ui/fl/apply/api/ControlVariantApplyAPI","sap/m/library","sap/m/Button","sap/m/MessageBox"],function(t,e,i,n,r,o,s,a,l,h,d,p,u,c,f,g,_,y){"use strict";var m=e.ValueState;var v=r.extend("sap.ui.mdc.filterbar.FilterBarBase",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/filterbar/FilterBarBase.designtime",defaultAggregation:"filterItems",interfaces:["sap.ui.mdc.IFilter","sap.ui.mdc.IxState"],properties:{delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/FilterBarDelegate",payload:{modelName:undefined,collectionName:""}}},liveMode:{type:"boolean",defaultValue:false},showMessages:{type:"boolean",group:"Misc",defaultValue:true},showGoButton:{type:"boolean",defaultValue:true},filterConditions:{type:"object",defaultValue:{}},propertyInfo:{type:"object",defaultValue:[]},suspendSelection:{type:"boolean",defaultValue:false},_filterCount:{type:"string",visibility:"hidden"}},aggregations:{filterItems:{type:"sap.ui.mdc.FilterField",multiple:true},basicSearchField:{type:"sap.ui.mdc.FilterField",multiple:false},layout:{type:"sap.ui.mdc.filterbar.IFilterContainer",multiple:false,visibility:"hidden"}},associations:{variantBackreference:{type:"sap.ui.fl.variants.VariantManagement",multiple:false}},events:{search:{conditions:{type:"object"}},filtersChanged:{conditionsBased:{type:"boolean"},filtersText:{type:"string"},filtersTextExpanded:{type:"string"}}}}});var C=g.ButtonType;v.INNER_MODEL_NAME="$sap.ui.filterbar.mdc.FilterBarBase";v.CONDITION_MODEL_NAME="$filters";var b={NoError:-1,RequiredHasNoValue:0,FieldInErrorState:1,AsyncValidation:2,OngoingChangeAppliance:3};v.prototype.init=function(){r.prototype.init.apply(this,arguments);this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._createInnerModel();this._oObserver=new l(this._observeChanges.bind(this));this._oObserver.observe(this,{aggregations:["filterItems","basicSearchField"]});this._createInnerLayout();this._bPersistValues=false;this.getEngine().registerAdaptation(this,{controller:{Filter:t}});this._fResolveInitialFiltersApplied=undefined;this._oInitialFiltersAppliedPromise=new Promise(function(t){this._fResolveInitialFiltersApplied=t}.bind(this));this._bIgnoreChanges=false;this._bSearchTriggered=false;this._bIgnoreQueuing=false};v.prototype._createInnerLayout=function(){this._cLayoutItem=null;this._oFilterBarLayout=null;this._bPersistValues=false;this._btnAdapt=null;this.setAggregation("layout",this._oFilterBarLayout,true)};v.prototype._isPhone=function(){return n.system.phone?true:false};v.prototype._isLiveMode=function(){if(this._isPhone()){return false}return this.getLiveMode()};v.prototype._getConditionModel=function(){return this._oConditionModel};v.prototype._getSearchButton=function(){if(!this._btnSearch){this._btnSearch=new _(this.getId()+"-btnSearch",{text:this._oRb.getText("filterbar.GO"),press:this.onSearch.bind(this),type:C.Emphasized});i.addConfig(this._btnSearch,{addAccessibilityLabel:true,message:this._oRb.getText("filterbar.GoBtnShortCutHint")},this)}return this._btnSearch};v.prototype.getConditionModelName=function(){return this._getConditionModelName()};v.prototype._getConditionModelName=function(){return v.CONDITION_MODEL_NAME};v.prototype._createConditionModel=function(){this._oConditionModel=new h;this.setModel(this._oConditionModel,this._getConditionModelName())};v.prototype.applySettings=function(t,e){this._setPropertyHelperClass(c);this._setupPropertyInfoStore("propertyInfo");this._applySettings(t,e);Promise.all([this.awaitPropertyHelper()]).then(function(){if(!this._bIsBeingDestroyed){this._applyInitialFilterConditions()}}.bind(this))};v.prototype._applySettings=function(t,e){r.prototype.applySettings.apply(this,arguments);this._createConditionModel();this._oConditionModel.attachPropertyChange(this._handleConditionModelPropertyChange,this)};v.prototype._waitForMetadata=function(){return this._retrieveMetadata().then(function(){this._applyInitialFilterConditions()}.bind(this))};v.prototype.setIgnoreQueuing=function(t){this._bIgnoreQueuing=t};v.prototype.getIgnoreQueuing=function(){return this._bIgnoreQueuing};v.prototype.setSuspendSelection=function(t){this.setProperty("suspendSelection",t);if(!t){if(this._bSearchTriggered&&!this.getIgnoreQueuing()){this.triggerSearch()}this._bSearchTriggered=false;this.setIgnoreQueuing(false)}return this};v.prototype._createInnerModel=function(){this._oModel=new a(this);this.setModel(this._oModel,v.INNER_MODEL_NAME);return this};v.prototype.getCurrentState=function(){var t={};var e={};if(this._bPersistValues){var i=s({},this.getFilterConditions());for(var n in i){if(this._getPropertyByName(n)){t[n]=i[n]}}e.filter=t}var r=this.getFilterItems();var o=[];r.forEach(function(t,e){o.push({name:t.getFieldPath()})});e.items=o;return e};v.prototype.getAssignedFilterNames=function(){var t,e=null,i=this._getConditionModel();if(i){e=[];var n=i.getConditions("$search");if(n&&n.length>0){e.push(this._oRb.getText("filterbar.ADAPT_SEARCHTERM"))}this._getNonHiddenPropertyInfoSet().forEach(function(n){t=u.getPropertyKey(n);var r=i.getConditions(t);if(r&&r.length>0){e.push(n.label||t)}})}return e};v.prototype._getAssignedFiltersText=function(){var t={};t.filtersText=this._getAssignedFiltersCollapsedText(this.getAssignedFilterNames());t.filtersTextExpanded=this._getAssignedFiltersExpandedText();return t};v.prototype._getAssignedFiltersExpandedText=function(){var t=0,e=0,i=this._getConditionModel();if(i){var n=i.getAllConditions();for(var r in n){var o=this._getPropertyByName(r);if(o&&!o.hiddenFilter&&n[r].length>0){++t;if(!(r==="$search"&&this.getAggregation("basicSearchField")||this._getFilterField(r))){++e}}}}if(!t&&!e){return this._oRb.getText("filterbar.ADAPT_NOTFILTERED")}if(!e){if(t===1){return this._oRb.getText("filterbar.ADAPT_FILTER_WITH_NON_HIDDEN",[t])}return this._oRb.getText("filterbar.ADAPT_FILTERS_WITH_NON_HIDDEN",[t])}if(t===1){return this._oRb.getText("filterbar.ADAPT_FILTER_WITH_HIDDEN",[t,e])}return this._oRb.getText("filterbar.ADAPT_FILTERS_WITH_HIDDEN",[t,e])};v.prototype._getAssignedFiltersCollapsedText=function(t){var e;t=t||[];if(t.length){e=Object.keys(t).map(function(e){return t[e]}).join(", ");if(t.length===1){return this._oRb.getText("filterbar.ADAPT_FILTER_COLLAPSED",[t.length,e])}return this._oRb.getText("filterbar.ADAPT_FILTERS_COLLAPSED",[t.length,e])}return this._oRb.getText("filterbar.ADAPT_NOTFILTERED")};v.prototype.getAssignedFiltersText=function(){return this._getAssignedFiltersText()};v.prototype._reportModelChange=function(t,e){this._handleAssignedFilterNames(false,e);if(this.getLiveMode()||t){this.triggerSearch()}};v.prototype._isPersistenceSupported=function(t){return this.getEngine().isModificationSupported(this)};v.prototype.getPropertyInfoSet=function(){return this.getPropertyHelper()?this.getPropertyHelper().getProperties():[]};v.prototype._addConditionChange=function(t,e){if(!this._aOngoingChangeAppliance){this._aOngoingChangeAppliance=[]}this._aOngoingChangeAppliance.push(this.getEngine().createChanges({control:this,applySequentially:true,key:"Filter",state:t}))};v.prototype._handleConditionModelPropertyChange=function(t){var e=function(t,e){var i={};i[t]=this._stringifyConditions(t,s([],e));this._cleanupConditions(i[t]);this._addConditionChange(i,t)}.bind(this);if(!this._bIgnoreChanges){var i=t.getParameter("path");if(i.indexOf("/conditions/")===0){var n=i.substring("/conditions/".length);if(this._bPersistValues&&this._isPersistenceSupported()){var r=t.getParameter("value");if(this._getPropertyByName(n)){e(n,r)}else{this._retrieveMetadata().then(function(){e(n,r)})}}else{this._reportModelChange(false)}}}};v.prototype._toExternal=function(t,e){var i=s({},e);i=p.toString(i,t.typeConfig,this.getTypeUtil());this._cleanupCondition(i);this._convertInOutParameters(e,i,"inParameters",p.toString);this._convertInOutParameters(e,i,"outParameters",p.toString);return i};v.prototype._toInternal=function(t,e){var i=s({},e);i=p.toType(i,t.typeConfig,this.getTypeUtil());this._convertInOutParameters(e,i,"inParameters",p.toType);this._convertInOutParameters(e,i,"outParameters",p.toType);return i};v.prototype._convertInOutParameters=function(t,e,i,n){if(t[i]&&Object.keys(t[i]).length>0){Object.keys(t[i]).forEach(function(r){var s=r.startsWith("conditions/")?r.slice(11):r;var a=this._getPropertyByName(s);if(a){var l=d.createCondition("EQ",[t[i][r]]);var h=n(l,a.typeConfig,this.getTypeUtil());if(!e[i]){e[i]={}}if(!r.startsWith("conditions/")){delete e[i][r];r="conditions/"+s}e[i][r]=h.values[0]}else{o.error("mdc.FilterBar._convertInOutParameters: could not find property info for "+s)}}.bind(this))}};v.prototype._cleanupCondition=function(t){if(t){if(t.hasOwnProperty("isEmpty")){delete t.isEmpty}}};v.prototype._cleanupConditions=function(t){if(t){t.forEach(function(t){this._cleanupCondition(t)},this)}};v.prototype._stringifyCondition=function(t,e){var i=e;if(e&&e.values){if(e.values.length>0){i=this._toExternal(t,e)}else{i=s({},e);this._cleanupCondition(i)}}return i};v.prototype._stringifyConditions=function(t,e){var i=this._getPropertyByName(t);var n=e;if(i&&e){n=[];e.forEach(function(t){n.push(this._stringifyCondition(i,t))},this)}return n};v.prototype._handleAssignedFilterNames=function(t,e){if(this._bIsBeingDestroyed){return}if(!t){if(this._btnAdapt){var i=this.getAssignedFilterNames();this.setProperty("_filterCount",this._oRb.getText(i.length?"filterbar.ADAPT_NONZERO":"filterbar.ADAPT",i.length),false)}}var n=this._getAssignedFiltersText();var r={conditionsBased:!t&&!e,filtersText:n.filtersText,filtersTextExpanded:n.filtersTextExpanded};this.fireFiltersChanged(r)};v.prototype.onReset=function(t){this._getConditionModel().oConditionModel.removeAllConditions()};v.prototype.onSearch=function(t){if(!this._bSearchPressed){this._bSearchPressed=true;this.triggerSearch().then(function(){this._bSearchPressed=false}.bind(this),function(){this._bSearchPressed=false}.bind(this))}};v.prototype.triggerSearch=function(){if(this.getSuspendSelection()){this._bSearchTriggered=true;return Promise.resolve()}return this.validate()};v.prototype._hasRetrieveMetadataToBeCalled=function(){return this.getPropertyHelper()===null||this.getPropertyHelper().getProperties().length===0&&!this.isPropertyHelperFinal()};v.prototype.validate=function(t){var e=!t;var i=function(){if(!this._oValidationPromise){this._oValidationPromise=new Promise(function(t,e){this._fResolvedSearchPromise=t;this._fRejectedSearchPromise=e}.bind(this));var t=function(){this._validate(e);this._oValidationPromise=null};setTimeout(t.bind(this),0)}return this._oValidationPromise}.bind(this);return this.waitForInitialization().then(function(){if(this._hasRetrieveMetadataToBeCalled()){return this._retrieveMetadata().then(function(){return i()})}else{return i()}}.bind(this))};v.prototype._clearDelayedSearch=function(){if(this._iDelayedSearchId){clearTimeout(this._iDelayedSearchId);this._iDelayedSearchId=null}};v.prototype._getRequiredFieldsWithoutValues=function(){var t=[];this._getRequiredPropertyNames().forEach(function(e){var i=this._getConditionModel().getConditions(e);if(!i||i.length===0){t.push(e)}}.bind(this));return t};v.prototype._checkAsyncValidation=function(){var t=b.NoError;if(this._aFIChanges&&this._aFIChanges.length>0){t=b.AsyncValidation}return t};v.prototype._checkOngoingChangeAppliance=function(){var t=b.NoError;if(this._aOngoingChangeAppliance&&this._aOngoingChangeAppliance.length>0){t=b.OngoingChangeAppliance}return t};v.prototype._checkRequiredFields=function(){var t=b.NoError;var e=this._getRequiredFieldsWithoutValues();e.forEach(function(e){var i=this._getFilterField(e);if(i){if(i.getValueState()===m.None){i.setValueState(m.Error);i.setValueStateText(this._oRb.getText("filterbar.REQUIRED_FILTER_VALUE_MISSING"))}}else{o.error("Mandatory filter field '"+e+"' not visible on FilterBarBase has no value.")}t=b.RequiredHasNoValue}.bind(this));return t};v.prototype._checkFieldsInErrorState=function(){var t=b.NoError;this._getNonRequiredPropertyNames().some(function(e){var i=this._getFilterField(e);if(i&&i.getValueState()!==m.None){t=b.FieldInErrorState}return t!==b.NoError}.bind(this));return t};v.prototype._handleFilterItemSubmit=function(t){var e=t.getParameter("promise");if(e){e.then(function(){this.triggerSearch()}.bind(this)).catch(function(t){o.error(t)})}};v.prototype._handleFilterItemChanges=function(t){if(this._bIgnoreChanges){return}var e=t.oSource;if(e.getRequired()&&e.getValueState()===m.Error&&t.getParameter("valid")){e.setValueState(m.None);return}if(!this._aFIChanges){this._aFIChanges=[]}this._aFIChanges.push({name:e.getFieldPath(),promise:t.getParameter("promise")})};v.prototype._checkFilters=function(){var t=this._checkAsyncValidation();if(t!==b.NoError){return t}t=this._checkOngoingChangeAppliance();if(t!==b.NoError){return t}t=this._checkRequiredFields();if(t!==b.NoError){return t}t=this._checkFieldsInErrorState();if(t!==b.NoError){return t}return t};v.prototype._setFocusOnFirstErroneousField=function(){var t=null;this.getFilterItems().some(function(e){if(e.getValueState()!==m.None){t=e;setTimeout(e["focus"].bind(e),0)}return t!=null});return t};v.prototype._handleAsyncValidation=function(t){if(this._aFIChanges&&this._aFIChanges.length>0){var e=this._aFIChanges.slice();this._aFIChanges=null;var i=[];e.forEach(function(t){i.push(t.promise)});Promise.all(i).then(function(i){i.forEach(function(t,i){var n=this._getFilterField(e[i].name);if(n&&n.getRequired()&&n.getValueState()===m.Error){n.setValueState(m.None)}},this);this._validate(t)}.bind(this),function(e){this._validate(t)}.bind(this))}};v.prototype._handleOngoingChangeAppliance=function(t){if(this._aOngoingChangeAppliance&&this._aOngoingChangeAppliance.length>0){var e=this._aOngoingChangeAppliance.slice();this._aOngoingChangeAppliance=null;Promise.all(e).then(function(){this._validate(t)}.bind(this),function(){this._validate(t)}.bind(this))}};v.prototype._validate=function(t){var e,i;var n=function(){if(t){this.fireSearch()}}.bind(this);var r=function(){this._fRejectedSearchPromise=null;this._fResolvedSearchPromise=null}.bind(this);if(this.bIsDestroyed){r();return}i=this._checkFilters();if(i===b.AsyncValidation){this._handleAsyncValidation(t);return}if(i===b.OngoingChangeAppliance){this._handleOngoingChangeAppliance(t);return}if(i===b.NoError){n();this._fResolvedSearchPromise();r()}else{if(i===b.RequiredHasNoValue){e=this._oRb.getText("filterbar.REQUIRED_CONDITION_MISSING")}else{e=this._oRb.getText("filterbar.VALIDATION_ERROR")}if(this.getShowMessages()&&!this._isLiveMode()){try{y.error(e,{styleClass:this.$()&&this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":"",onClose:this._setFocusOnFirstErroneousField.bind(this)})}catch(t){o.error(t.message)}}else{o.warning("search was not triggered. "+e)}this._fRejectedSearchPromise();r()}};v.prototype.setInternalConditions=function(t){var e=this._getConditionModel();if(e){e.setConditions(t)}};v.prototype.getInternalConditions=function(){return this._getModelConditions(this._getConditionModel(),true)};v.prototype.waitForInitialization=function(){return Promise.all([this._oInitialFiltersAppliedPromise,this._oMetadataAppliedPromise])};v.prototype.initialized=function(){if(!this._oMetadataAppliedPromise){this._retrieveMetadata()}return this.waitForInitialization()};v.prototype._getModelConditions=function(t,e,i){var n={};if(t){var r=s({},t.getAllConditions());for(var o in r){if(r[o]&&(i||r[o].length>0)){n[o]=r[o];if(!e){this._cleanupConditions(n[o]);var a=this._stringifyConditions(o,n[o]);n[o]=a}}}}return n};var F=function(t){var e=t.typeConfig.typeInstance;var i=e.getConstraints();return e.getMetadata().getName()==="sap.ui.model.odata.type.String"&&i&&i.isDigitSequence&&i.maxLength?function(e){return this._toExternal(t,e,this.getTypeUtil())}.bind(this):undefined};v.prototype._isPathKnownAsync=function(t,e){var i,n,r=[];r.push(this._getPropertyByNameAsync(t));for(n in e["inParameters"]){i=n.startsWith("conditions/")?n.slice(11):n;r.push(this._getPropertyByNameAsync(i))}for(n in e["outParameters"]){i=n.startsWith("conditions/")?n.slice(11):n;r.push(this._getPropertyByNameAsync(i))}return Promise.all(r)};v.prototype._isPathKnown=function(t,e){var i,n;if(!this._getPropertyByName(t)){return false}for(i in e["inParameters"]){n=i.startsWith("conditions/")?i.slice(11):i;if(!this._getPropertyByName(n)){return false}}for(i in e["outParameters"]){n=i.startsWith("conditions/")?i.slice(11):i;if(!this._getPropertyByName(n)){return false}}return true};v.prototype._removeCondition=function(t,e,i){var n=this._getPropertyByName(t);if(n){var r=this._toInternal(n,e);if(i.indexOf(t,r,F.call(this,n))>=0){i.removeCondition(t,r)}}};v.prototype.removeCondition=function(t,e){return this.waitForInitialization().then(function(){var i=this._getConditionModel();if(i){this._isPathKnownAsync(t,e).then(function(){this._removeCondition(t,e,i)}.bind(this))}}.bind(this))};v.prototype._addCondition=function(e,i,n){var r=this._getPropertyByName(e);if(r){var o=this._toInternal(r,i);if(n.indexOf(e,o,F.call(this,r))<0){var s={};s[e]=[o];t.checkConditionOperatorSanity(s);var a=s[e];if(a&&a.length>0){this._cleanUpFilterFieldInErrorStateByName(e);n.addCondition(e,o)}}}};v.prototype.addCondition=function(t,e){return this.waitForInitialization().then(function(){var i=this._getConditionModel();if(i){this._isPathKnownAsync(t,e).then(function(){this._addCondition(t,e,i)}.bind(this))}}.bind(this))};v.prototype._setXConditions=function(t,e){var i,n,r,o=this._getConditionModel();var s=null;var a=new Promise(function(t,e){s=t});this._oConditionModel.detachPropertyChange(this._handleConditionModelPropertyChange,this);var l=function(t){for(i in t){r=t[i];n=this._getPropertyByName(i);if(n){if(r.length===0){o.removeAllConditions(i)}else{if(n.maxConditions!==-1){o.removeAllConditions(i)}r.forEach(function(t){this._addCondition(i,t,o)}.bind(this))}}}this._oConditionModel.attachPropertyChange(this._handleConditionModelPropertyChange,this);s()}.bind(this);if(e){o.removeAllConditions()}if(t){var h=true;for(i in t){r=t[i];if(!this._isPathKnown(i,r)){h=false;break}}if(!h){this._retrieveMetadata().then(function(){l(t)})}else{l(t)}}return a};v.prototype._getXConditions=function(){return this._getModelConditions(this._getConditionModel(),false)};v.prototype._getRequiredPropertyNames=function(){var t=[];this._getNonHiddenPropertyInfoSet().forEach(function(e){if(e.required){t.push(u.getPropertyKey(e))}});return t};v.prototype._getNonRequiredPropertyNames=function(){var t=[];this._getNonHiddenPropertyInfoSet().forEach(function(e){if(!e.required){t.push(u.getPropertyKey(e))}});return t};v.prototype._insertFilterFieldtoContent=function(t,e){if(!this._cLayoutItem){return}var i=this._cLayoutItem;var n=new i;n.setFilterField(t);this._oFilterBarLayout.insertFilterField(n,e)};v.prototype._filterItemInserted=function(t){if(!t.getVisible()){return}if(t.setWidth){t.setWidth("")}this._applyFilterItemInserted(t);this._handleAssignedFilterNames(true)};v.prototype._applyFilterItemInserted=function(t){var e,i;i=this.indexOfAggregation("filterItems",t);if(this.getAggregation("basicSearchField")){i++}e=i;var n=this.getFilterItems();for(var r=0;r<e;r++){if(!n[r].getVisible()){i--}}this._insertFilterFieldtoContent(t,i);if(!this._oObserver.isObserved(t,{properties:["visible"]})){this._oObserver.observe(t,{properties:["visible"]})}};v.prototype._filterItemRemoved=function(t){this._applyFilterItemRemoved(t.getFieldPath());this._handleAssignedFilterNames(true)};v.prototype._applyFilterItemRemoved=function(t){this._removeFilterFieldFromContentByName(t)};v.prototype._removeFilterFieldFromContent=function(t){this._removeFilterFieldFromContentByName(t.getFieldPath())};v.prototype._removeFilterFieldFromContentByName=function(t){var e=this._getFilterItemLayoutByName(t);if(e){this._oFilterBarLayout.removeFilterField(e);e.destroy()}};v.prototype._observeChanges=function(t){if(t.type==="aggregation"){if(t.name==="filterItems"){switch(t.mutation){case"insert":t.child.attachChange(this._handleFilterItemChanges,this);t.child.attachSubmit(this._handleFilterItemSubmit,this);this._filterItemInserted(t.child);break;case"remove":t.child.detachChange(this._handleFilterItemChanges,this);t.child.detachSubmit(this._handleFilterItemSubmit,this);this._filterItemRemoved(t.child);break;default:o.error("operation "+t.mutation+" not yet implemented")}}else if(t.name==="basicSearchField"){switch(t.mutation){case"insert":t.child.attachSubmit(this._handleFilterItemSubmit,this);this._insertFilterFieldtoContent(t.child,0);break;case"remove":t.child.detachSubmit(this._handleFilterItemSubmit,this);this._removeFilterFieldFromContent(t.child);break;default:o.error("operation "+t.mutation+" not yet implemented")}}}else if(t.type==="property"){var e;if(t.object.isA&&t.object.isA("sap.ui.mdc.FilterField")){e=t.object;if(e){if(t.current){this._filterItemInserted(e)}else{this._filterItemRemoved(e)}this._oFilterBarLayout.rerender()}}}};v.prototype._getFilterItemLayout=function(t){return this._getFilterItemLayoutByName(t.getFieldPath())};v.prototype._getFilterItemLayoutByName=function(t){var e=null;if(this._oFilterBarLayout){this._oFilterBarLayout.getFilterFields().some(function(i){if(i._getFieldPath()===t){e=i}return e!==null})}return e};v.prototype._getFilterField=function(t){var e=null;this.getFilterItems().some(function(i){if(i&&i.getFieldPath&&i.getFieldPath()===t){e=i}return e!==null});return e};v.prototype._retrieveMetadata=function(){if(this._oMetadataAppliedPromise){return this._oMetadataAppliedPromise}this._fResolveMetadataApplied=undefined;this._oMetadataAppliedPromise=new Promise(function(t,e){this._fResolveMetadataApplied=t;this._fRejectMetadataApplied=e}.bind(this));this.initControlDelegate().then(function(){if(!this._bIsBeingDestroyed){var t=function(t){t?this._fResolveMetadataApplied():this._fRejectMetadataApplied();this._fResolveMetadataApplied=null;this._fRejectMetadataApplied=null}.bind(this);if(this.bDelegateInitialized){this.finalizePropertyHelper().then(function(){t(true)})}else{o.error("Delegate not initialized.");t(false)}}}.bind(this));return this._oMetadataAppliedPromise};v.prototype.setBasicSearchField=function(t){var e=this.getAggregation("basicSearchField");if(e){this.removeAggregation("basicSearchField",e)}this.setAggregation("basicSearchField",t);if(t){if(!this._oObserver.isObserved(t,{properties:["visible"]})){this._oObserver.observe(t,{properties:["visible"]})}}return this};v.prototype._getNonHiddenPropertyInfoSet=function(){var t=[];this.getPropertyInfoSet().every(function(e){if(!e.hiddenFilter){if(u.getPropertyKey(e)!=="$search"){t.push(e)}}return true});return t};v.prototype._getNonHiddenPropertyByName=function(t){var e=null;this._getNonHiddenPropertyInfoSet().some(function(i){if(u.getPropertyKey(i)===t){e=i}return e!=null});return e};v.prototype._cleanUpFilterFieldInErrorStateByName=function(t){var e=null;var i=this.getFilterItems();i.some(function(i){if(i.getFieldPath()===t){e=i}return e!=null});if(e){this._cleanUpFilterFieldInErrorState(e)}};v.prototype._cleanUpAllFilterFieldsInErrorState=function(){var t=this.getFilterItems();t.forEach(function(t){this._cleanUpFilterFieldInErrorState(t)}.bind(this))};v.prototype._cleanUpFilterFieldInErrorState=function(t){if(t&&t.getValueState()!==m.None){t.setValueState(m.None)}};v.prototype.applyConditionsAfterChangesApplied=function(){if(this._isChangeApplying()){return}this._bIgnoreChanges=true;this._oFlexPromise=this._getWaitForChangesPromise();Promise.all([this._oFlexPromise,this._oInitialFiltersAppliedPromise,this._oMetadataAppliedPromise]).then(function(t){this._oFlexPromise=null;this._changesApplied()}.bind(this))};v.prototype._isChangeApplying=function(){return!!this._oFlexPromise};v.prototype._applyInitialFilterConditions=function(){this._bIgnoreChanges=true;this._applyFilterConditionsChanges().then(function(){this._changesApplied();this._bInitialFiltersApplied=true;this._fResolveInitialFiltersApplied();this._fResolveInitialFiltersApplied=null}.bind(this))};v.prototype._applyFilterConditionsChanges=function(){var t,e;t=this.getProperty("filterConditions");if(Object.keys(t).length>0){e=s({},t);return this._setXConditions(e,true)}return Promise.resolve()};v.prototype.setVariantBackreference=function(t){if(!this._hasAssignedVariantManagement()){this.setAssociation("variantBackreference",t);f.attachVariantApplied({selector:this,vmControlId:this.getVariantBackreference(),callback:this._handleVariantSwitch.bind(this),callAfterInitialVariant:true})}else{o.error("the association 'variant' may only be assigned once and may not change afterwards.")}};v.prototype._handleVariantSwitch=function(t){this._cleanUpAllFilterFieldsInErrorState();this._bExecuteOnSelect=this._getExecuteOnSelectionOnVariant(t);this._bDoNotTriggerFiltersChangeEventBasedOnVariantSwitch=undefined;if(t.hasOwnProperty("createScenario")&&t.createScenario==="saveAs"){this._bDoNotTriggerFiltersChangeEventBasedOnVariantSwitch=true}if(!this._isChangeApplying()&&this._bInitialFiltersApplied){this._changesApplied()}};v.prototype._getExecuteOnSelectionOnVariant=function(t){var e=false,i=this._getAssignedVariantManagement();if(i){e=i.getApplyAutomaticallyOnVariant(t)}return e};v.prototype._hasAssignedVariantManagement=function(){return this._getAssignedVariantManagement()?true:false};v.prototype._getAssignedVariantManagement=function(){var t=this.getVariantBackreference();if(t){var e=sap.ui.getCore().byId(t);if(e&&e.isA("sap.ui.fl.variants.VariantManagement")){return e}}return null};v.prototype._changesApplied=function(){if(!this._isChangeApplying()){this._bIgnoreChanges=false}this._reportModelChange(this._bExecuteOnSelect,this._bDoNotTriggerFiltersChangeEventBasedOnVariantSwitch);this._bExecuteOnSelect=undefined;this._bDoNotTriggerFiltersChangeEventBasedOnVariantSwitch=undefined};v.prototype._getView=function(){return u.getView(this)};v.prototype.getConditions=function(){var t=this._bPersistValues?this.getCurrentState().filter:this._getXConditions();if(t&&t["$search"]){delete t["$search"]}return t};v.prototype.getSearch=function(){var t=this._getConditionModel()?this._getConditionModel().getConditions("$search"):[];return t[0]?t[0].values[0]:""};v.prototype.exit=function(){if(this._hasAssignedVariantManagement()){f.detachVariantApplied({selector:this,vmControlId:this.getVariantBackreference()})}if(this.bDelegateInitialized&&this.getControlDelegate().cleanup){this.getControlDelegate().cleanup(this)}r.prototype.exit.apply(this,arguments);this._clearDelayedSearch();this._oFilterBarLayout=null;this._cLayoutItem=null;this._btnAdapt=undefined;this._btnSearch=undefined;this._oRb=null;if(this._oModel){this._oModel.destroy();this._oModel=null}if(this._oConditionModel){this._oConditionModel.detachPropertyChange(this._handleConditionModelPropertyChange,this);this._oConditionModel.destroy();this._oConditionModel=null}this._oObserver.disconnect();this._oObserver=undefined;this._bPersistValues=null;this._oDelegate=null;this._oFlexPromise=null;this._fResolveMetadataApplied=undefined;this._oMetadataAppliedPromise=null;this._oInitialFiltersAppliedPromise=null;this._oValidationPromise=null;this._aBindings=null;this._aFIChanges=null;this._aOngoingChangeAppliance=null};return v});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/FilterBarBaseRenderer",[],function(){"use strict";var e={apiVersion:2};e.CSS_CLASS="sapUiMdcFilterBarBase";e.render=function(r,n){r.openStart("div",n);r.class(e.CSS_CLASS);r.openEnd();var t=n.getAggregation("layout")?n.getAggregation("layout").getInner():null;r.renderControl(t);r.close("div")};return e},true);
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/IFilterContainer",["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.ui.mdc.filterbar.IFilterContainer");e.prototype.init=function(){t.prototype.init.apply(this,arguments);this.oLayout=null};e.prototype.getInner=function(){return this.oLayout};e.prototype.insertFilterField=function(t,e){};e.prototype.removeFilterField=function(t){};e.prototype.getFilterFields=function(){};e.prototype.exit=function(){t.prototype.exit.apply(this,arguments);if(this.oLayout){this.oLayout.destroy();this.oLayout=null}};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/filterbar/PropertyHelper",["../util/PropertyHelper"],function(e){"use strict";var t=e.extend("sap.ui.mdc.filterbar.PropertyHelper",{constructor:function(t,r,p,i){var o=["required","hiddenFilter"];e.call(this,t,r,p,o,i)}});t.prototype.prepareProperty=function(t){if(!t.typeConfig){var r=this.getParent();if(r&&r._oDelegate){var p=r._oDelegate.getTypeUtil();try{t.typeConfig=p.getTypeConfig(t.dataType,t.formatOptions,t.constraints)}catch(e){}}}e.prototype.prepareProperty.apply(this,arguments)};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/aligned/FilterContainer",["sap/ui/mdc/filterbar/IFilterContainer","sap/ui/layout/AlignedFlowLayout"],function(t,e){"use strict";var i=t.extend("sap.ui.mdc.filterbar.aligned.FilterContainer");i.prototype.init=function(){t.prototype.init.apply(this,arguments);this.oLayout=new e};i.prototype.addButton=function(t){this.oLayout.addEndContent(t)};i.prototype.insertFilterField=function(t,e){this.oLayout.insertContent(t,e)};i.prototype.removeFilterField=function(t){this.oLayout.removeContent(t)};i.prototype.getFilterFields=function(){return this.oLayout.getContent()};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/aligned/FilterItemLayout",["sap/ui/layout/VerticalLayout","sap/ui/layout/VerticalLayoutRenderer","sap/m/Label"],function(e,t,i){"use strict";var a=e.extend("sap.ui.mdc.filterbar.aligned.FilterItemLayout",{metadata:{library:"sap.ui.mdc"},renderer:{apiVersion:2,render:t.render}});a.prototype._setLabel=function(e){this._oLabel=new i(e.getId()+"-label");this._oLabel.setParent(this);e.connectLabel(this._oLabel);if(e.getFieldPath()==="$search"){this._oLabel.setText("")}else{this._oLabel.addStyleClass("sapUiMdcFilterBarBaseLabel")}};a.prototype._getFilterField=function(){return this._oFilterField};a.prototype._getFieldPath=function(){return this._sFieldPath};a.prototype.setFilterField=function(e){this._setLabel(e);this._oFilterField=e;this._sFieldPath=e.getFieldPath()};a.prototype.getContent=function(){var e=[];e.push(this._oLabel);e.push(this._oFilterField);return e};a.prototype.exit=function(){this._oFilterField=null;this._sFieldPath=null;if(this._oLabel&&!this._oLabel.bIsDestroyed){this._oLabel.destroy();this._oLabel=undefined}e.prototype.exit.apply(this,arguments)};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/p13n/AdaptationFilterBar",["sap/ui/mdc/filterbar/p13n/GroupContainer","sap/ui/mdc/filterbar/p13n/FilterColumnLayout","sap/ui/mdc/filterbar/p13n/FilterGroupLayout","sap/ui/mdc/filterbar/p13n/TableContainer","sap/ui/mdc/filterbar/FilterBarBase","sap/ui/mdc/filterbar/FilterBarBaseRenderer","sap/base/util/merge","sap/base/util/UriParameters","sap/ui/core/Core","sap/ui/mdc/enum/PersistenceMode"],function(t,e,i,n,o,r,a,s,l,p){"use strict";var h=o.extend("sap.ui.mdc.filterbar.p13n.AdaptationFilterBar",{metadata:{library:"sap.ui.mdc",associations:{adaptationControl:{type:"sap.ui.mdc.Control",multiple:false}},events:{change:{}}},renderer:r});h.prototype.init=function(){o.prototype.init.apply(this,arguments);this.addStyleClass("sapUIAdaptationFilterBar");this._bPersistValues=true;this.getEngine().defaultProviderRegistry.attach(this,p.Transient);this._fnResolveAdaptationControlPromise=null;this._oAdaptationControlPromise=new Promise(function(t,e){this._fnResolveAdaptationControlPromise=t}.bind(this))};h.prototype.applySettings=function(){o.prototype._applySettings.apply(this,arguments);this._waitForAdaptControlAndPropertyHelper().then(function(){this._initControlDelegate()}.bind(this))};h.prototype._getPropertyByName=function(t){var e=this.getPropertyHelper();if(e){var i=e.getProperties().find(function(e){return e.path===t});if(!i){i=e.getPropertyMap()[t]||null}return i}};h.prototype._waitForAdaptControlAndPropertyHelper=function(){return this._oAdaptationControlPromise.then(function(){return this._getAdaptationControlInstance().awaitPropertyHelper().then(function(t){this._oPropertyHelper=t}.bind(this))}.bind(this))};h.prototype._initControlDelegate=function(){return this.initControlDelegate().then(function(){if(!this._bIsBeingDestroyed){this._applyInitialFilterConditions()}}.bind(this))};h.prototype.getControlDelegate=function(){return this._getAdaptationControlInstance().getControlDelegate()};h.prototype.initControlDelegate=function(){return this._oAdaptationControlPromise.then(function(){return this._getAdaptationControlInstance().initControlDelegate()}.bind(this))};h.prototype.initPropertyHelper=function(){return this._oAdaptationControlPromise.then(function(){return this._getAdaptationControlInstance().initPropertyHelper()}.bind(this))};h.prototype.getTypeUtil=function(){if(!this._getAdaptationControlInstance()){throw new Error("No adaptation control assigned yet.")}return this._getAdaptationControlInstance().getTypeUtil()};h.prototype.setMessageStrip=function(t){this._oFilterBarLayout.setMessageStrip(t)};h.prototype.setLiveMode=function(t,e){o.prototype.setLiveMode.apply(this,arguments);this._oConditionModel.attachPropertyChange(function(t){var e=t.getParameter("path").substring(12);if(this.oAdaptationData){var i=this.oAdaptationData.items;var n=i.find(function(t){return t.name==e});if(n){n.active=this._getConditionModel().getConditions(e).length>0?true:false}}}.bind(this));return this};h.prototype._retrieveMetadata=function(){return this._oAdaptationControlPromise.then(function(){return this._getAdaptationControlInstance().awaitPropertyHelper().then(function(t){this._oMetadataAppliedPromise=Promise.resolve();if(!this._getAdaptationControlInstance().isPropertyHelperFinal()){return this.finalizePropertyHelper()}return o.prototype._retrieveMetadata.apply(this,arguments)}.bind(this))}.bind(this))};h.prototype.createConditionChanges=function(){return Promise.all([this._oAdaptationControlPromise,this._getAdaptationControlInstance().awaitControlDelegate()]).then(function(){var t=this._getModelConditions(this._getConditionModel(),false,true);if(this._bPersistValues){return this.getEngine().createChanges({control:this._getAdaptationControlInstance(),key:"Filter",state:t,suppressAppliance:true})}else{this._getAdaptationControlInstance()._setXConditions(t,true);return Promise.resolve(null)}}.bind(this))};h.prototype.setP13nData=function(t){this.oAdaptationData=t;this._oFilterBarLayout.update(t)};h.prototype.getP13nData=function(){return this.oAdaptationData};h.prototype._handleFilterItemSubmit=function(){return};h.prototype._getWaitForChangesPromise=function(){return this.getEngine().waitForChanges(this._getAdaptationControlInstance())};h.prototype.applyConditionsAfterChangesApplied=function(t){o.prototype.applyConditionsAfterChangesApplied.apply(this,arguments);if(t===this._getAdaptationControlInstance()){this.triggerSearch()}};h.prototype.createFilterFields=function(){return this.initialized().then(function(){var t=this._bPersistValues?this._getAdaptationControlInstance().getFilterConditions():this._getAdaptationControlInstance()._getXConditions();this.setFilterConditions(t);this._setXConditions(t,true);if(this._bFilterFieldsCreated){this._oFilterBarLayout.setP13nData(this.oAdaptationData);return this}var e=this._getAdaptationControlInstance();var i=e.getControlDelegate();var n=this._checkAdvancedParent(e)?i:i.getFilterDelegate();this._mOriginalsForClone={};var o=[];this.oAdaptationData.items.forEach(function(t,i){var r;r=this._checkExisting(t,n);r.then(function(i){var n;if(this._checkAdvancedParent(e)){if(i._bTemporaryOriginal){delete r._bTemporaryOriginal;this._mOriginalsForClone[i.getFieldPath()]=i}n=i.clone()}else{n=i}t.filterfield=n}.bind(this));o.push(r)}.bind(this));return Promise.all(o).then(function(){this.oAdaptationData.items.forEach(function(t){this.addAggregation("filterItems",t.filterfield);delete t.filterfield}.bind(this));this._oFilterBarLayout.setP13nData(this.oAdaptationData);this._bFilterFieldsCreated=true;return this}.bind(this))}.bind(this))};h.prototype._checkExisting=function(t,e){var i;var n=this._getAdaptationControlInstance();var o=this._checkAdvancedParent(n)?n.getFilterItems():[];var r=o.reduce(function(t,e){t[e.getFieldPath()]=e;return t},{});if(r[t.name]){i=Promise.resolve(r[t.name])}else{i=e.addItem(t.name,this._getAdaptationControlInstance());i=i.then(function(e){if(!e){throw new Error("No FilterField could be created for property: '"+t.name+"'.")}e._bTemporaryOriginal=true;return e})}return i};h.prototype.executeRemoves=function(){var t=this._oFilterBarLayout.getInner().getSelectedFields();var e=[];Object.keys(this._mOriginalsForClone).forEach(function(i){var n=this._getAdaptationControlInstance().getControlDelegate();if(t.indexOf(i)<0){var o=n.removeItem.call(n,i,this._getAdaptationControlInstance()).then(function(t){if(t&&this._mOriginalsForClone[i]){this._mOriginalsForClone[i].destroy();delete this._mOriginalsForClone[i]}}.bind(this));e.push(o)}}.bind(this));return Promise.all(e)};h.prototype._checkAdvancedParent=function(t){if(!t.isA("sap.ui.mdc.IFilterSource")&&!t.isA("sap.ui.mdc.IFilter")){throw new Error("The 'adaptationControl' needs to implement the IFilterSource or IFilter interface")}return t.isA("sap.ui.mdc.IFilter")};h.prototype.setAdaptationControl=function(o,r){if(this._fnResolveAdaptationControlPromise){this._fnResolveAdaptationControlPromise();this._fnResolveAdaptationControlPromise=null}this.setAssociation("adaptationControl",o,r);var l=new s(window.location.search).getAll("sap-ui-xx-filterQueryPanel")[0]==="true";this._cLayoutItem=l||this._checkAdvancedParent(o)?i:e;this._oFilterBarLayout=this._checkAdvancedParent(o)?new t:new n;this._oFilterBarLayout.getInner().setParent(this);this.setAggregation("layout",this._oFilterBarLayout,true);if(this._oFilterBarLayout.getInner().attachChange){this._oFilterBarLayout.getInner().attachChange(function(t){if(t.getParameter("reason")==="Remove"){var e=t.getParameter("item");var i=this._bPersistValues?a({},this._getAdaptationControlInstance().getFilterConditions()):this._getAdaptationControlInstance()._getXConditions();i[e.name]=[];this._setXConditions(i,true)}this.fireChange()}.bind(this))}return this};h.prototype._getAdaptationControlInstance=function(){var t=this.getAdaptationControl();return t&&l.byId(t)};h.prototype.exit=function(){this.getEngine().defaultProviderRegistry.detach(this);o.prototype.exit.apply(this,arguments);for(var t in this._mOriginalsForClone){this._mOriginalsForClone[t].destroy()}this._mOriginalsForClone=null;this.oAdaptationData=null;this._fnResolveAdaptationControlPromise=null;this._oAdaptationControlPromise=null};return h});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/p13n/FilterColumnLayout",["sap/m/ColumnListItem","sap/m/ColumnListItemRenderer","sap/m/Label"],function(t,e,i){"use strict";var r=t.extend("sap.ui.mdc.filterbar.p13n.FilterColumnLayout",{metadata:{library:"sap.ui.mdc"},renderer:e});r.prototype._getFieldPath=function(){return this._sFieldPath};r.prototype.setFilterField=function(t){this._sLabel=t.getLabel();this._oFilterField=t;this._sFieldPath=t.getFieldPath()};r.prototype.getCells=function(){var t=[];var e=new i({text:this._sLabel});e.setParent(this);t.push(e);t.push(this._oFilterField);return t};r.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oFilterField=null;this._sFieldPath=null};return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/p13n/FilterGroupLayout",["sap/ui/core/Control"],function(t){"use strict";var e=t.extend("sap.ui.mdc.filterbar.p13n.FilterGroupLayout",{renderer:{apiVersion:2,render:function(t,e){t.openStart("div",e);t.style("height","100%");t.openEnd();t.renderControl(e.getItems()[0]);t.close("div")}}});e.prototype._getFieldPath=function(){return this._sFieldPath};e.prototype.setFilterField=function(t){this._oFilterField=t;this._sFieldPath=t.getFieldPath()};e.prototype.getAccessibilityInfo=function(){return{children:this.getItems()}};e.prototype.getItems=function(){var t=[];t.push(this._oFilterField);return t};e.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oFilterField=null;this._sFieldPath=null};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/p13n/GroupContainer",["sap/ui/mdc/filterbar/IFilterContainer","sap/ui/mdc/p13n/panels/AdaptFiltersPanel"],function(t,e){"use strict";var i=t.extend("sap.ui.mdc.filterbar.p13n.GroupContainer");i.prototype.init=function(){t.prototype.init.apply(this,arguments);this.mFilterItems={};this.oLayout=new e;this.oLayout.setItemFactory(function(t){var e=t.getProperty(t.sPath).name;var i=this.mFilterItems[e];return i}.bind(this))};i.prototype.setMessageStrip=function(t){this.oLayout.getCurrentViewContent().setMessageStrip(t)};i.prototype.insertFilterField=function(t,e){this.mFilterItems[t._getFieldPath()]=t};i.prototype.removeFilterField=function(t){this.oLayout.removeItem(t)};i.prototype.getFilterFields=function(){var t=[];Object.keys(this.mFilterItems).forEach(function(e){t.push(this.mFilterItems[e])}.bind(this));return t};i.prototype.update=function(t){this.oLayout.restoreDefaults()};i.prototype.setP13nData=function(t){this.oLayout.setP13nData(t)};i.prototype.exit=function(){this.mFilterItems=null;this.mFilterFields=null;t.prototype.exit.apply(this,arguments)};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/p13n/TableContainer",["sap/ui/mdc/filterbar/IFilterContainer","sap/m/Table","sap/m/Column","sap/m/Text","sap/m/VBox","sap/ui/mdc/p13n/panels/FilterPanel","sap/base/util/UriParameters"],function(e,t,i,s,r,a,n){"use strict";var o=e.extend("sap.ui.mdc.filterbar.p13n.TableContainer");o.prototype.init=function(){e.prototype.init.apply(this,arguments);var o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._oTable=new t({sticky:["ColumnHeaders"],growing:true,columns:[new i({header:new s({text:o.getText("filter.AdaptationFilterBar_FIELD_COLUMN")})}),new i({header:new s({text:o.getText("filter.AdaptationFilterBar_FIELD_VALUE_COLUMN")})})]});var l=new n(window.location.search);this._bUseQueryPanel=l.getAll("sap-ui-xx-filterQueryPanel")[0]==="true";if(this._bUseQueryPanel){this.oLayout=new a({enableReorder:false});this.mFilterItems={};this.oLayout.setItemFactory(function(e){var t=e.name;var i=this.mFilterItems[t];return i}.bind(this))}else{this._oMessageStripContainer=new r(this.getId()+"-messageStripContainer");this.oLayout=new r({items:[this._oMessageStripContainer,this._oTable]})}};o.prototype.insertFilterField=function(e,t){if(this._bUseQueryPanel){this.mFilterItems[e._getFieldPath()]=e}else{this._oTable.insertItem(e,t)}};o.prototype.setP13nData=function(e){if(this._bUseQueryPanel){this.oLayout.setP13nData(e.items)}};o.prototype.removeFilterField=function(e){this._oTable.removeItem(e)};o.prototype.setMessageStrip=function(e){if(this._bUseQueryPanel){this.oLayout.setMessageStrip(e)}else{this._oMessageStripContainer.removeAllItems();this._oMessageStripContainer.addItem(e)}};o.prototype.getFilterFields=function(){return this._oTable.getItems()};o.prototype.update=function(e){};o.prototype.exit=function(){this._oTable=null;this._oMessageStripContainer=null};return o});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/vh/CollectiveSearchSelect",["sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/core/InvisibleText","sap/ui/core/Item","sap/ui/core/Control","sap/ui/layout/HorizontalLayout","sap/m/SearchField","sap/m/Page","sap/m/Toolbar","sap/m/ToggleButton","sap/m/Title","sap/m/ResponsivePopover","sap/m/SelectList","sap/ui/events/KeyCodes","sap/m/library","sap/ui/model/base/ManagedObjectModel","sap/ui/base/ManagedObjectObserver"],function(e,t,i,o,s,r,a,n,l,h,c,p,d,u,g,v,m,f){"use strict";var y=v.ButtonType;var S=v.PlacementType;var T=r.extend("sap.ui.mdc.filterbar.vh.CollectiveSearchSelect",{metadata:{library:"sap.ui.mdc",properties:{title:{type:"string",group:"Misc",defaultValue:null},selectedItemKey:{type:"string",group:"Misc",defaultValue:null},_currentItemText:{type:"string",group:"Misc",defaultValue:null,hidden:true}},aggregations:{items:{type:"sap.ui.core.Item",multiple:true,singularName:"item"}},events:{select:{parameters:{key:{type:"string"}}}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t).class("sapUiMdcCollectiveSearchSelect").attr("title",t.oRb.getText("COL_SEARCH_TRIGGER_TT")).openEnd();e.renderControl(t.oLayout);e.close("div")}}});T.prototype.init=function(){this._oManagedObjectModel=new m(this);this.setModel(this._oManagedObjectModel,"$mdcColSearch");this._oObserver=new f(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["selectedItemKey"],aggregations:["items"]});this.oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this.oInvisibleText=new o;this.oText=new p(this.getId()+"-text",{text:"{$mdcColSearch>/_currentItemText}"}).addStyleClass("sapUiMdcCollectiveSearchSelectClickable").addStyleClass("sapUiMdcCollectiveSearchSelectTitle");if(i.system.phone){this.oText.addStyleClass("sapUiMdcCollectiveSearchSelectTextPhoneMaxWidth")}else{this.oText.addStyleClass("sapUiMdcCollectiveSearchSelectTextMaxWidth")}this.oPopoverTrigger=new c(this.getId()+"-trigger",{icon:"sap-icon://slim-arrow-down",type:y.Transparent,tooltip:this.oRb.getText("COL_SEARCH_TRIGGER_TT")}).addAriaLabelledBy(this.oInvisibleText).addStyleClass("sapUiMdcCollectiveSearchSelectTriggerBtn").addStyleClass("sapMTitleStyleH4");this.oLayout=new a({content:[this.oText,this.oPopoverTrigger]}).addStyleClass("sapUiMdcCollectiveSearchSelectLayout");this.oInvisibleText.toStatic();this.addDependent(this.oLayout)};T.prototype._observeChanges=function(e){if(["selectedItemKey","items"].indexOf(e.name)>=-1){this._updateCurrentItemText()}};T.prototype._updateCurrentItemText=function(){var e=this.getSelectedItemKey();var t=this._getItemByKey(e);var i=t?t.getText():e;this.oInvisibleText.setText(this.oRb.getText("COL_SEARCH_SEL_INVISIBLETXT",[i]));this.setProperty("_currentItemText",i)};T.prototype._getItemByKey=function(e){var t=null;var i=this.getItems();i.some(function(i){if(i.getKey()===e){t=i}return t!==null});return t};T.prototype.handleOpenClosePopover=function(){if(!this.bPopoverOpen){this._openList()}else if(this.oPopover&&this.oPopover.isOpen()){this.oPopover.close()}};T.prototype.getFocusDomRef=function(){if(this.oPopoverTrigger){return this.oPopoverTrigger.getFocusDomRef()}};T.prototype.onclick=function(){if(this.oPopoverTrigger&&!this.bPopoverOpen){this.oPopoverTrigger.focus()}this.handleOpenClosePopover()};T.prototype.onkeyup=function(e){if(e.which===g.F4||e.which===g.SPACE||e.altKey===true&&e.which===g.ARROW_UP||e.altKey===true&&e.which===g.ARROW_DOWN){this._openList()}};T.prototype.onAfterRendering=function(){this.oText.$().off("mouseover").on("mouseover",function(){this.oPopoverTrigger.addStyleClass("sapUiMdcCollectiveSearchSelectTriggerBtnHover")}.bind(this));this.oText.$().off("mouseout").on("mouseout",function(){this.oPopoverTrigger.removeStyleClass("sapUiMdcCollectiveSearchSelectTriggerBtnHover")}.bind(this))};T.prototype._createList=function(){if(this.oPopover){return}this.oList=new u(this.getId()+"-list",{selectedKey:{path:"$mdcColSearch>/selectedItemKey"},itemPress:function(e){var t=null;if(e&&e.getParameter("item")){var i=e.getParameter("item");if(i){t=i.getKey()}}this.oPopover.close();if(this.getSelectedItemKey()!==t){this.setSelectedItemKey(t);this.fireSelect({key:t})}}.bind(this)});this.oList.bindAggregation("items",{path:"/items",model:"$mdcColSearch",template:new s({key:"{$mdcColSearch>key}",text:"{$mdcColSearch>text}"})});this.oSearchField=new n(this.getId()+"-search");this.oSearchField.attachLiveChange(function(e){var t=e.getParameter("newValue")||"";this._triggerSearch(t,this.oList)}.bind(this));this.oPage=new l(this.getId()+"-selpage",{subHeader:new h({content:[this.oSearchField]}),content:[this.oList],showNavButton:false,showHeader:false});this.oPopover=new d(this.getId()+"-popover",{title:{path:"$mdcColSearch>/title"},titleAlignment:"Auto",contentWidth:"400px",placement:S.VerticalPreferredBottom,content:[this.oPage],afterOpen:function(){this.bPopoverOpen=true;this.oPopoverTrigger.setPressed(true)}.bind(this),afterClose:function(){this.oPopoverTrigger.setPressed(false);if(this.bPopoverOpen){setTimeout(function(){this.bPopoverOpen=false}.bind(this),200)}}.bind(this),contentHeight:"300px"});this.oPopover.addStyleClass("sapUiMdcCollectiveSearchSelectPopover");if(this.oLayout.$().closest(".sapUiSizeCompact").length>0){this.oPopover.addStyleClass("sapUiSizeCompact")}this.addDependent(this.oPopover)};T.prototype._openList=function(){if(this.bPopoverOpen){return}this._createList();this.oSearchField.setValue("");this._triggerSearch("",this.oList);this.oPage.setShowSubHeader(this.oList.getItems().length>9);this.oPopover.openBy(this.oPopoverTrigger)};T.prototype._triggerSearch=function(i,o){var s=[];if(i){var r=new e({path:"text",operator:t.Contains,value1:i});s.push(r)}o.getBinding("items").filter(s)};T.prototype.exit=function(){if(this.oInvisibleText){this.oInvisibleText.destroy(true);this.oInvisibleText=undefined}this.oRb=undefined;this.oList=undefined;this.oPage=undefined;this.oLayout=undefined;this.oText=undefined;this.oPopoverTrigger=undefined;this.oSearchField=undefined;this._oManagedObjectModel.destroy();this._oManagedObjectModel=undefined;this._oObserver.disconnect();this._oObserver=undefined};return T});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/vh/FilterBar",["sap/m/library","sap/ui/mdc/filterbar/FilterBarBase","sap/ui/mdc/filterbar/FilterBarBaseRenderer","sap/ui/mdc/filterbar/aligned/FilterItemLayout","sap/ui/mdc/filterbar/vh/FilterContainer","sap/m/Button","sap/ui/mdc/enum/PersistenceMode"],function(t,e,i,r,o,s,a){"use strict";var l=e.extend("sap.ui.mdc.filterbar.vh.FilterBar",{metadata:{properties:{expandFilterFields:{type:"boolean",defaultValue:true},filterFieldThreshold:{type:"int",defaultValue:8}},aggregations:{}},renderer:i});var h=t.ButtonType;l.prototype._createInnerLayout=function(){this._cLayoutItem=r;this._oFilterBarLayout=new o(this.getId()+"-innerLayout",{});this.setAggregation("layout",this._oFilterBarLayout,true);this._oBtnFilters=new s(this.getId()+"-btnShowFilters",{type:h.Transparent,press:this._onToggleFilters.bind(this)});this._oBtnFilters.bindProperty("text",{model:e.INNER_MODEL_NAME,path:"/expandFilterFields",formatter:function(t){return this._oRb.getText("valuehelp."+(t?"HIDE":"SHOW")+"ADVSEARCH")}.bind(this)});this._oBtnFilters.bindProperty("visible",{model:e.INNER_MODEL_NAME,path:"/filterItems",formatter:function(t){return t.length>0}});this._oFilterBarLayout.addControl(this._getSearchButton().bindProperty("visible",{parts:[{path:"/showGoButton",model:e.INNER_MODEL_NAME},{path:"/liveMode",model:e.INNER_MODEL_NAME}],formatter:function(t,e){return t&&(this._isPhone()?true:!e)}.bind(this)}));this._oFilterBarLayout.addControl(this._oBtnFilters);this._oShowAllFiltersBtn=new s(this.getId()+"-btnShowAllFilters",{type:h.Transparent,press:this._onShowAllFilters.bind(this),text:this._oRb.getText("valuehelp.SHOWALLFILTERS")});this._oFilterBarLayout.addEndContent(this._oShowAllFiltersBtn)};l.prototype.applySettings=function(t,e){this._applySettings(t,e);this._waitForMetadata()};l.prototype._handleConditionModelPropertyChange=function(){e.prototype._handleConditionModelPropertyChange.apply(this,arguments);this.fireFiltersChanged({conditionsBased:true})};l.prototype.init=function(){e.prototype.init.apply(this,arguments);this._bPersistValues=true;this.getEngine().defaultProviderRegistry.attach(this,a.Transient)};l.prototype.exit=function(){this.getEngine().defaultProviderRegistry.detach(this);if(this._oCollectiveSearch){this._oFilterBarLayout.removeControl(this._oCollectiveSearch);this._oCollectiveSearch=null}e.prototype.exit.apply(this,arguments);this._oBasicSearchField=null;this._oBtnFilters=null;this._oShowAllFiltersBtn=null};l.prototype._onToggleFilters=function(t){this.setExpandFilterFields(!this.getExpandFilterFields())};l.prototype._onShowAllFilters=function(t){this._oFilterBarLayout._updateFilterBarLayout(true)};l.prototype.setCollectiveSearch=function(t){if(this._oCollectiveSearch){if(this._oFilterBarLayout){this._oFilterBarLayout.removeControl(this._oCollectiveSearch)}}this._oCollectiveSearch=t;if(this._oFilterBarLayout&&this._oCollectiveSearch){this._oFilterBarLayout.insertControl(this._oCollectiveSearch,0)}return this};l.prototype.getCollectiveSearch=function(){return this._oCollectiveSearch};l.prototype.destroyCollectiveSearch=function(){if(this._oCollectiveSearch&&this._oFilterBarLayout){this._oFilterBarLayout.removeControl(this._oCollectiveSearch);this._oCollectiveSearch.destroy();this._oCollectiveSearch=undefined}return this};l.prototype.setBasicSearchField=function(t){if(this._oBasicSearchField){if(this._oFilterBarLayout){this._oFilterBarLayout.removeControl(this._oBasicSearchField)}this._oBasicSearchField.detachSubmit(this._handleFilterItemSubmit,this)}this._oBasicSearchField=t;if(t){if(this.isPropertyInitial("expandFilterFields")){this.setExpandFilterFields(false)}if(this._oFilterBarLayout){this._oFilterBarLayout.insertControl(t,this._oCollectiveSearch?1:0)}t.attachSubmit(this._handleFilterItemSubmit,this);if(!this._oObserver.isObserved(t,{properties:["visible"]})){this._oObserver.observe(t,{properties:["visible"]})}}return this};l.prototype.getBasicSearchField=function(){return this._oBasicSearchField};l.prototype.destroyBasicSearchField=function(){if(this._oBasicSearchField&&this._oFilterBarLayout){this._oFilterBarLayout.removeControl(this._oBasicSearchField);this._oBasicSearchField.detachSubmit(this._handleFilterItemSubmit,this);if(this._oObserver.isObserved(this._oBasicSearchField,{properties:["visible"]})){this._oObserver.unobserve(this._oBasicSearchField)}this._oBasicSearchField.destroy();this._oBasicSearchField=undefined}return this};return l});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/filterbar/vh/FilterContainer",["sap/ui/mdc/filterbar/IFilterContainer","sap/ui/layout/AlignedFlowLayout","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/VBox"],function(t,e,o,i,n){"use strict";var a=t.extend("sap.ui.mdc.filterbar.vh.FilterContainer",{metadata:{aggregations:{_layout:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}}}});a.prototype.init=function(){this.aLayoutItems=[];this.oToolbar=new o(this.getId()+"-tbr",{content:[new i]});this.oAlgnLayout=new e(this.getId()+"-aflayout",{visible:"{$sap.ui.filterbar.mdc.FilterBarBase>/expandFilterFields}"}).addStyleClass("sapUiMdcFilterBarBaseAFLayout");this.oLayout=new n(this.getId()+"-vbox",{items:[this.oToolbar,this.oAlgnLayout]});this.setAggregation("_layout",this.oLayout,true)};a.prototype.exit=function(){this.aLayoutItems.forEach(function(t){t.destroy()});this.aLayoutItems=null};a.prototype.addControl=function(t){this.oToolbar.addContent(t)};a.prototype.insertControl=function(t,e){this.oToolbar.insertContent(t,e)};a.prototype.removeControl=function(t){this.oToolbar.removeContent(t)};a.prototype.addEndContent=function(t){this.oAlgnLayout.addEndContent(t)};a.prototype.insertFilterField=function(t,e){this.aLayoutItems.splice(e,0,t);this._updateFilterBarLayout()};a.prototype.removeFilterField=function(t){var e=-1;this.aLayoutItems.some(function(o,i){if(t===o){e=i;return true}return false});if(e>=0){this.aLayoutItems.splice(e,1);this._updateFilterBarLayout()}};a.prototype.getFilterFields=function(){return this.oAlgnLayout.getContent()};a.prototype._updateFilterBarLayout=function(t){var e=this.aLayoutItems.length;var o=this.getParent().getFilterFieldThreshold();var i=t||e<=o+1;if(!i){var n=this.oAlgnLayout.getContent();n.some(function(t,e){if(t!=this.aLayoutItems[e]){i=true;return true}return false}.bind(this))}if(i){this.oAlgnLayout.removeAllContent();this.aLayoutItems.some(function(i,n){if(t||e<=o||n+1<o){this.oAlgnLayout.insertContent(i,n);return false}return true}.bind(this))}var a=this.oAlgnLayout.getEndContent()[0];a.setVisible(!t&&e>o)};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ActionToolbar.flexibility",["./ItemBaseFlex"],function(e){"use strict";var i=Object.assign({},e);i.findItem=function(e,i,t){return sap.ui.getCore().byId(t)};return{moveControls:"default",moveAction:i.createMoveChangeHandler()}});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ActionToolbarAction.flexibility",[],function(){"use strict";return{unhideControl:{changeHandler:"default"},hideControl:{changeHandler:"default"}}});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/AggregateFlex",["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(e){"use strict";var n=function(n){var t=n&&n.isA&&n.isA("sap.ui.mdc.Table")&&n.isTableBound();var r=n&&n.isA&&n.isA("sap.ui.mdc.Chart");if(t||r){if(!n._bWaitForBindChanges){n._bWaitForBindChanges=true;e.waitForChanges({element:n}).then(function(){if(t){n.rebind()}else if(r){n.rebind()}delete n._bWaitForBindChanges})}}};var t=function(e,t,r,a){if(a){e.resetRevertData()}else{e.setRevertData(r)}n(t)};var r=function(e,n,r,a){return new Promise(function(i,o){var g=r.modifier;var u=a?e.getRevertData():e.getContent();Promise.resolve().then(g.getProperty.bind(g,n,"aggregateConditions")).then(function(r){var o=r?r:{};o[u.name]={};var s={name:u.name};g.setProperty(n,"aggregateConditions",o);t(e,n,s,a);i()}).catch(function(e){o(e)})})};var a=function(e,n,r,a){return new Promise(function(i,o){var g=r.modifier;var u=a?e.getRevertData():e.getContent();Promise.resolve().then(g.getProperty.bind(g,n,"aggregateConditions")).then(function(r){var s=r?r:{};if(!s){o()}delete s[u.name];g.setProperty(n,"aggregateConditions",s);t(e,n,u,a);i()}).catch(function(e){o(e)})})};var i={};i.removeAggregate={changeHandler:{applyChange:function(e,n,t){return a(e,n,t,false)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return r(e,n,t,true)}},layers:{USER:true}};i.addAggregate={changeHandler:{applyChange:function(e,n,t){return r(e,n,t,false)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return a(e,n,t,true)}},layers:{USER:true}};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/AggregationConfigFlex",["sap/ui/mdc/p13n/Engine"],function(e){"use strict";var n={};var t=function(n){if(!n._bWaitForModificationChanges&&n.isA){n._bWaitForModificationChanges=true;e.getInstance().waitForChanges(n).then(function(){if(n._onModifications instanceof Function){n._onModifications()}delete n._bWaitForModificationChanges})}};var a=function(e,n){var t=function(n){if(e._pQueue===n){delete e._pQueue}};e._pQueue=e._pQueue instanceof Promise?e._pQueue.then(n):n();e._pQueue.then(t.bind(null,e._pQueue));return e._pQueue};n.createSetChangeHandler=function(n){if(!n||!n.hasOwnProperty("aggregation")||!n.hasOwnProperty("property")){throw new Error("Please provide a map containing the affected aggregation and property name!")}var r=n.aggregation;var o=n.property;return{changeHandler:{applyChange:function(n,i,g){return a(i,function(){return e.getInstance().readXConfig(i,{propertyBag:g}).then(function(t){var a=null;if(t&&t.aggregations&&t.aggregations[r]&&t.aggregations[r][n.getContent().name]&&t.aggregations[r][n.getContent().name][o]){a=t.aggregations[r][n.getContent().name][o]}n.setRevertData({name:n.getContent().name,value:a});return e.getInstance().enhanceXConfig(i,{controlMeta:{aggregation:r,property:o},name:n.getContent().name,value:n.getContent().value,propertyBag:g})}).then(function(){t(i)})})},completeChangeContent:function(e,n,t){},revertChange:function(n,a,i){return e.getInstance().enhanceXConfig(a,{controlMeta:{aggregation:r,property:o},name:n.getRevertData().name,value:n.getRevertData().value,propertyBag:i}).then(function(){n.resetRevertData();t(a)})}},layers:{USER:true}}};return n});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/Chart.flexibility",["./SortFlex","./ChartItemFlex","./ConditionFlex","./ChartTypeFlex"],function(e,t,o,r){"use strict";return{addItem:t.addItem,removeItem:t.removeItem,moveItem:t.moveItem,setChartType:r.setChartType,removeSort:e.removeSort,addSort:e.addSort,moveSort:e.moveSort,addCondition:o.addCondition,removeCondition:o.removeCondition}},true);
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ChartItemFlex",["./ItemBaseFlex"],function(e){"use strict";var r=Object.assign({},e);r.beforeAddItem=function(e,r,t,n,a){return e.addItem.call(e,r,t,n,a.role)};r.findItem=function(e,r,t){return r.reduce(function(r,n){return r.then(function(r){if(!r){return Promise.all([e.getProperty(n,"key"),e.getProperty(n,"name")]).then(function(e){if(e[0]===t||e[1]===t){return n}})}return r})},Promise.resolve())};r.addItem=r.createAddChangeHandler();r.removeItem=r.createRemoveChangeHandler();r.moveItem=r.createMoveChangeHandler();return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ChartTypeFlex",[],function(){"use strict";var e={};e.setChartType={layers:{USER:true},changeHandler:{createChange:function(e){if(!e.control){throw new Error("Invalid control. The existing control object is mandatory")}return{selectorElement:e.control,changeSpecificData:{changeType:"setChartType",content:{chartType:e.chartType}}}},completeChangeContent:function(e,t){},applyChange:function(e,t,r){var n=r.modifier;return Promise.resolve().then(n.getProperty.bind(n,t,"chartType")).then(function(r){e.setRevertData(r);n.setProperty(t,"chartType",e.getContent().chartType)})},revertChange:function(e,t,r){r.modifier.setProperty(t,"chartType",e.getRevertData());e.resetRevertData()}}};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ColumnFlex",["sap/ui/mdc/p13n/Engine","./ItemBaseFlex"],function(e,n){"use strict";var t=Object.assign({},n);var r=function(n){if(n&&n.isA&&n.isA("sap.ui.mdc.Table")&&n.isTableBound()){if(!n._bWaitForBindChanges){n._bWaitForBindChanges=true;e.getInstance().waitForChanges(n).then(function(){n.rebind();delete n._bWaitForBindChanges})}}};t.findItem=function(e,n,t){return n.reduce(function(n,r){return n.then(function(n){if(!n){return Promise.resolve().then(e.getProperty.bind(e,r,"dataProperty")).then(function(e){if(e===t){return r}})}return n})},Promise.resolve())};t.afterApply=function(e,n,t){r(n)};t.addColumn=t.createAddChangeHandler();t.removeColumn=t.createRemoveChangeHandler();t.moveColumn=t.createMoveChangeHandler();return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ConditionFlex",["sap/base/util/merge","sap/base/Log","sap/ui/mdc/condition/FilterOperatorUtil"],function(e,n,t){"use strict";var i=function(e,n){var t=function(n){if(e._pQueue===n){delete e._pQueue}};e._pQueue=e._pQueue instanceof Promise?e._pQueue.then(n):n();e._pQueue.then(t.bind(null,e._pQueue));return e._pQueue};var r=function(e){return new Promise(function(n,t){sap.ui.require([e],n,t)})};var o=function(e){var n=e&&e.getEngine?e.getEngine().getController(e,"Filter"):null;return n?n.getFilterControl():null};var a=function(a,u,f,d,l){var c=o(f);if(c&&c.applyConditionsAfterChangesApplied){c.applyConditionsAfterChangesApplied(f)}return i(f,function(){var i,o=null,p=d.modifier;return p.getProperty(f,"filterConditions").then(function(g){i=e({},g);if(i){for(var C in i){if(C===u.name){o=i[C];break}}}if(!o){i[u.name]=[];o=i[u.name]}var s=t.indexOfCondition(u.condition,o);if(s<0){o.push(u.condition);p.setProperty(f,"filterConditions",i);if(!l){a.setRevertData({name:u.name,condition:u.condition})}return p.getProperty(f,"delegate").then(function(e){return r(e.name)}).then(function(e){var t=e&&(e.getFilterDelegate?e.getFilterDelegate().addCondition:e.addCondition);if(t){return t(u.name,f,d).catch(function(e){n.error("Error during Delegate.addCondition call: "+e)})}}).finally(function(){if(c&&c.addCondition){return c.addCondition(u.name,u.condition)}})}})})};var u=function(a,u,f,d,l){var c=o(f);if(c&&c.applyConditionsAfterChangesApplied){c.applyConditionsAfterChangesApplied(f)}return i(f,function(){var i,o,p=-1,g=d.modifier;return g.getProperty(f,"filterConditions").then(function(C){i=e({},C);if(i){for(var s in i){if(s===u.name){o=i[s];break}}}if(o&&o.length>0){p=t.indexOfCondition(u.condition,o);if(p>=0){o.splice(p,1);g.setProperty(f,"filterConditions",i);if(!l){a.setRevertData({name:u.name,condition:u.condition})}return g.getProperty(f,"delegate").then(function(e){return r(e.name)}).then(function(e){var t=e&&(e.getFilterDelegate?e.getFilterDelegate().removeCondition:e.removeCondition);if(t){return t(u.name,f,d).catch(function(e){n.error("Error during Delegate.removeCondition call: "+e)})}}).finally(function(){if(c&&c.removeCondition){return c.removeCondition(u.name,u.condition)}})}}})})};var f={};f.addCondition={changeHandler:{applyChange:function(e,n,t){return a(e,e.getContent(),n,t,false)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return u(e,e.getRevertData(),n,t,true).then(function(){e.resetRevertData()})}},layers:{USER:true}};f.removeCondition={changeHandler:{applyChange:function(e,n,t){return u(e,e.getContent(),n,t,false)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return a(e,e.getRevertData(),n,t,true).then(function(){e.resetRevertData()})}},layers:{USER:true}};return f});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/FilterBar.flexibility",["./FilterItemFlex","./ConditionFlex","./PropertyInfoFlex"],function(e,i,r){"use strict";return{addFilter:e.createAddChangeHandler(),removeFilter:e.createRemoveChangeHandler(),moveFilter:e.createMoveChangeHandler(),addCondition:i.addCondition,removeCondition:i.removeCondition,addPropertyInfo:r.addPropertyInfo}},true);
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/FilterItemFlex",["./ItemBaseFlex"],function(e){"use strict";var i=Object.assign({},e);i.findItem=function(e,i,t){return i.find(function(i){var n;if(e.targets==="jsControlTree"){n=i.getFieldPath()}else{n=i.getAttribute("conditions");if(n){var r,a=n.indexOf("/conditions/");if(a>=0){n=n.slice(a+12);r=n.indexOf("}");if(r>=0){n=n.slice(0,r)}}}}return n===t})};i.beforeApply=function(e){if(e.applyConditionsAfterChangesApplied){e.applyConditionsAfterChangesApplied()}};i.addFilter=i.createAddChangeHandler();i.removeFilter=i.createRemoveChangeHandler();i.moveFilter=i.createMoveChangeHandler();return i},true);
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/GroupFlex",["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(e){"use strict";var n=function(n){var r=n&&n.isA&&n.isA("sap.ui.mdc.Table")&&n.isTableBound();var t=n&&n.isA&&n.isA("sap.ui.mdc.Chart");if(r||t){if(!n._bWaitForBindChanges){n._bWaitForBindChanges=true;e.waitForChanges({element:n}).then(function(){if(r){n.rebind()}else if(t){n.rebind()}delete n._bWaitForBindChanges})}}};var r=function(e,r,t,i){if(i){e.resetRevertData()}else{e.setRevertData(t)}n(r)};var t=function(e,n,t,i){return new Promise(function(o,a){var u=t.modifier;var s=i?e.getRevertData():e.getContent();Promise.resolve().then(u.getProperty.bind(u,n,"groupConditions")).then(function(t){var a=t?t.groupLevels:[];var c={name:s.name};a.splice(s.index,0,c);t={groupLevels:a};u.setProperty(n,"groupConditions",t);r(e,n,c,i);o()}).catch(function(e){a(e)})})};var i=function(e,n,t,i){return new Promise(function(o,a){var u=t.modifier;var s=i?e.getRevertData():e.getContent();Promise.resolve().then(u.getProperty.bind(u,n,"groupConditions")).then(function(t){var c=t?t.groupLevels:[];if(!c){a()}var f=c.filter(function(e){return e.name===s.name});var p=c.indexOf(f[0]);c.splice(p,1);t={groupLevels:c};u.setProperty(n,"groupConditions",t);r(e,n,s,i);o()}).catch(function(e){a(e)})})};var o=function(e,n,t,i){return new Promise(function(o,a){var u=t.modifier;var s=i?e.getRevertData():e.getContent();Promise.resolve().then(u.getProperty.bind(u,n,"groupConditions")).then(function(t){var a=t?t.groupLevels:[];var c=a.filter(function(e){return e.name===s.name});var f=a.indexOf(c[0]);a.splice(s.index,0,a.splice(f,1)[0]);t={groupLevels:a};u.setProperty(n,"groupConditions",t);r(e,n,s,i);o()}).catch(function(e){a(e)})})};var a={};a.removeGroup={changeHandler:{applyChange:function(e,n,r){return i(e,n,r,false)},completeChangeContent:function(e,n,r){},revertChange:function(e,n,r){return t(e,n,r,true)}},layers:{USER:true}};a.addGroup={changeHandler:{applyChange:function(e,n,r){return t(e,n,r,false)},completeChangeContent:function(e,n,r){},revertChange:function(e,n,r){return i(e,n,r,true)}},layers:{USER:true}};a.moveGroup={changeHandler:{applyChange:function(e,n,r){return o(e,n,r)},completeChangeContent:function(e,n,r){},revertChange:function(e,n,r){return o(e,n,r,true)}},layers:{USER:true}};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/ItemBaseFlex",["sap/ui/fl/changeHandler/Base","sap/ui/mdc/p13n/Engine","sap/base/Log"],function(e,t,n){"use strict";var i={_bSupressFlickering:true,beforeAddItem:function(e,t,n,i){return e.addItem.call(e,t,n,i)},afterRemoveItem:function(e,t,n,i){return e.removeItem.call(e,t,n,i)},findItem:function(e,t,n){return Promise.resolve()},beforeApply:function(e,t,n){return},afterApply:function(e,t,n){return},determineAggregation:function(e,t){var n;return Promise.resolve().then(e.getControlMetadata.bind(e,t)).then(function(i){n=i.getDefaultAggregation().name;return e.getAggregation(t,n)}).then(function(e){return{name:n,items:e}})},_getExistingAggregationItem:function(e,t,n){var i=t.modifier;return this.determineAggregation(i,n).then(function(t){var n,r=t.items;if(r){n=this.findItem(i,r,e.name)}return n}.bind(this))},_getDelegate:function(e){return new Promise(function(t,n){sap.ui.require([e],t,n)})},_getOperationText:function(e){return e?"reverted ":"applied "},_getChangeTypeText:function(e){return e?"add":"remove"},_delayInvalidate:function(e){if(e&&e.isInvalidateSuppressed&&!e.isInvalidateSuppressed()){e.iSuppressInvalidate=1;t.getInstance().waitForChanges(e).then(function(){e.iSuppressInvalidate=0;e.invalidate()})}},_applyAdd:function(e,t,i,r){this.beforeApply(e.getChangeType(),t,r);if(this._bSupressFlickering){this._delayInvalidate(t)}var a=i.modifier,o=r?e.getRevertData():e.getContent();var g=o.name;var s;var h;var u;var d=this.determineAggregation(a,t).then(function(e){u=e;h=u.items;s=o.index>-1?o.index:h.length;return this._getExistingAggregationItem(o,i,t)}.bind(this)).then(function(e){if(e){return e}else{return a.getProperty(t,"delegate").then(function(e){return this._getDelegate(e.name)}.bind(this)).then(function(e){return this.beforeAddItem(e,g,t,i,o)}.bind(this)).then(function(e){return e})}}.bind(this)).then(function(e){if(!e){throw new Error("No item in"+u.name+"  created. Change to "+this._getChangeTypeText(!r)+"cannot be "+this._getOperationText(r)+"at this moment")}if(h.indexOf(e)<0){a.insertAggregation(t,u.name,e,s)}else{n.warning("The specified change is already existing - change appliance ignored")}return e}.bind(this)).then(function(){if(r){e.resetRevertData()}else{e.setRevertData({name:o.name,index:s})}this.afterApply(e.getChangeType(),t,r)}.bind(this));return d},_applyRemove:function(e,t,i,r){this.beforeApply(e.getChangeType(),t,r);if(this._bSupressFlickering){this._delayInvalidate(t)}var a=i.modifier,o=r?e.getRevertData():e.getContent();var g;var s;var h;var u=this.determineAggregation(a,t).then(function(e){g=e;return this._getExistingAggregationItem(o,i,t)}.bind(this)).then(function(e){h=e;if(!h){if(r){throw new Error("No item found in "+g.name+". Change to "+this._getChangeTypeText(r)+"cannot be "+this._getOperationText(r)+"at this moment")}else{n.warning("The specified change is already existing - change appliance ignored")}return-1}return a.findIndexInParentAggregation(h)}.bind(this)).then(function(e){s=e;return a.removeAggregation(t,g.name,h)}).then(function(){return a.getProperty(t,"delegate").then(function(e){return this._getDelegate(e.name)}.bind(this)).then(function(n){return this.afterRemoveItem(n,h,t,i).then(function(n){if(n&&h){a.destroy(h)}this.afterApply(e.getChangeType(),t,r)}.bind(this))}.bind(this))}.bind(this)).then(function(){if(r){e.resetRevertData()}else{e.setRevertData({name:o.name,index:s})}});return u},_applyMove:function(e,t,n,i){this.beforeApply(e.getChangeType(),t,i);if(this._bSupressFlickering){this._delayInvalidate(t)}var r=n.modifier;var a=i?e.getRevertData():e.getContent();var o;var g;var s;var h=this.determineAggregation(r,t).then(function(e){g=e;return this._getExistingAggregationItem(a,n,t)}.bind(this)).then(function(e){o=e}).then(function(){if(!o){throw new Error("No corresponding item in "+g.name+" found. Change to move item cannot be "+this._getOperationText(i)+"at this moment")}return r.findIndexInParentAggregation(o)}.bind(this)).then(function(e){s=e;if(t.moveColumn){return t.moveColumn(o,a.index)}else{return r.removeAggregation(t,g.name,o).then(function(){return r.insertAggregation(t,g.name,o,a.index)})}}).then(function(){if(i){e.resetRevertData()}else{e.setRevertData({name:a.name,index:s})}this.afterApply(e.getChangeType(),t,i)}.bind(this));return h},_removeIndexFromChange:function(e){delete e.getContent().index},createChangeHandler:function(e,t,n){return{changeHandler:{applyChange:function(t,n,i){return e(t,n,i)},completeChangeContent:function(e,n,i){t(e,n,i)},revertChange:function(e,t,i){return n(e,t,i,true)}},layers:{USER:true}}},createAddChangeHandler:function(){var e=this._applyAdd.bind(this);var t=function(){};var n=this._applyRemove.bind(this);return this.createChangeHandler(e,t,n)},createRemoveChangeHandler:function(){var e=this._applyRemove.bind(this);var t=this._removeIndexFromChange.bind(this);var n=this._applyAdd.bind(this);return this.createChangeHandler(e,t,n)},createMoveChangeHandler:function(){var e=this._applyMove.bind(this);var t=function(){};var n=e;return this.createChangeHandler(e,t,n)}};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/Panel.flexibility",["sap/ui/fl/changeHandler/Base","./ItemBaseFlex"],function(e,t){"use strict";var n=Object.assign({},t);n.findItem=function(e,t,n){return Promise.resolve(sap.ui.getCore().byId(n))};return{createChanges:function(e,t){var n=t.filter(function(e){return!sap.ui.getCore().byId(e.id)});var r={};return n.reduce(function(e,t){if(!r[t.id]){r[t.id]=true;e.push(t)}return e},[]).map(function(t){return{selectorElement:e,changeSpecificData:{changeType:"createItem",content:{selector:t.id}}}})},createItem:{layers:{USER:true},changeHandler:{applyChange:function(e,t,n){var r=e.getContent().selector;return Promise.resolve().then(function(){t.getModel();return n.modifier.getProperty(t,"metadataHelperPath")}).then(function(e){return new Promise(function(t,n){sap.ui.require(["sap/ui/mdc/link/PanelItem",e],function(e,n){t(n)},function(e){n(e)})})}).then(function(e){var i=n.modifier;if(i.bySelector(r,n.appComponent,n.view)){return undefined}var o=e.retrieveAllMetadata(t);var a;var u=function(e,t){var n=-1;t.some(function(t,r){if(t.getId()===e){n=r;return true}});return n};var c=i.getControlIdBySelector(r,n.appComponent);return Promise.resolve().then(i.getAggregation.bind(i,t,"items")).then(function(e){a=-1;var t=null;o.some(function(n){var r=u(n.id,e);if(r>-1){a=r}if(n.id===c){t=n;return true}});if(!t){return undefined}return i.createControl("sap.ui.mdc.link.PanelItem",n.appComponent,n.view,t.id,{text:t.text,description:t.description,href:t.href,target:t.target,icon:t.icon,visible:true})}).then(function(e){return i.insertAggregation(t,"items",e,a+1)})})},revertChange:function(t,n,r){var i=r.modifier;if(t.getContent()&&t.getContent().selector){var o=t.getContent().selector.id;var a=i.bySelector(o,r.appComponent,r.view);if(!a){return e.markAsNotApplicable("revertChange of createItem: the item with id "+o+" is not existing and therefore can not be removed.",true)}return Promise.resolve().then(i.removeAggregation.bind(i,n,"items",a))}},completeChangeContent:function(e,t,n){if(t.content){var r=n.modifier.getSelector(t.content.selector,n.appComponent);var i=e.getDefinition();i.content={selector:r}}}}}}},true);
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/PanelItem.flexibility",["sap/ui/fl/changeHandler/HideControl","sap/ui/fl/changeHandler/UnhideControl"],function(e,i){"use strict";return{createChanges:function(e){return e.map(function(e){var i=sap.ui.getCore().byId(e.id);if(!i){throw new Error("Invalid 'id'. For the id "+e.id+" no existing control could be found")}return{selectorElement:i,changeSpecificData:{changeType:e.visible?"revealItem":"hideItem"}}})},revealItem:{layers:{USER:true},changeHandler:i},hideItem:{layers:{USER:true},changeHandler:e}}},true);
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/PropertyInfoFlex",[],function(){"use strict";var e={};e.addPropertyInfo={changeHandler:{applyChange:function(e,n,t){},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){}},layers:{USER:true}};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/SortFlex",["sap/ui/mdc/p13n/Engine"],function(e){"use strict";var n=function(n){var t=n&&n.isA&&n.isA("sap.ui.mdc.Table")&&n.isTableBound();var r=n&&n.isA&&n.isA("sap.ui.mdc.Chart");if(t||r){if(!n._bWaitForBindChanges){n._bWaitForBindChanges=true;e.getInstance().waitForChanges(n).then(function(){if(t){n.rebind()}else if(r){n.rebind()}delete n._bWaitForBindChanges})}}};var t=function(e,t,r,i){if(i){e.resetRevertData()}else{e.setRevertData(r)}n(t)};var r=function(e,n,r,i){return new Promise(function(o,a){var s=r.modifier;var u=i?e.getRevertData():e.getContent();Promise.resolve().then(s.getProperty.bind(s,n,"sortConditions")).then(function(r){var a=r?r.sorters:[];var c={name:u.name,descending:u.descending};a.splice(u.index,0,c);r={sorters:a};s.setProperty(n,"sortConditions",r);t(e,n,c,i);o()}).catch(function(e){a(e)})})};var i=function(e,n,r,i){return new Promise(function(o,a){var s=r.modifier;var u=i?e.getRevertData():e.getContent();Promise.resolve().then(s.getProperty.bind(s,n,"sortConditions")).then(function(r){var c=r?r.sorters:[];if(!c){a()}var f=c.filter(function(e){return e.name===u.name});var d=c.indexOf(f[0]);c.splice(d,1);r={sorters:c};s.setProperty(n,"sortConditions",r);t(e,n,u,i);o()}).catch(function(e){a(e)})})};var o=function(e,n,r,i){return new Promise(function(o,a){var s=r.modifier;var u=i?e.getRevertData():e.getContent();Promise.resolve().then(s.getProperty.bind(s,n,"sortConditions")).then(function(r){var a=r?r.sorters:[];var c=a.filter(function(e){return e.name===u.name});var f=a.indexOf(c[0]);a.splice(u.index,0,a.splice(f,1)[0]);r={sorters:a};s.setProperty(n,"sortConditions",r);t(e,n,u,i);o()}).catch(function(e){a(e)})})};var a={};a.removeSort={changeHandler:{applyChange:function(e,n,t){return i(e,n,t,false)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return r(e,n,t,true)}},layers:{USER:true}};a.addSort={changeHandler:{applyChange:function(e,n,t){return r(e,n,t,false)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return i(e,n,t,true)}},layers:{USER:true}};a.moveSort={changeHandler:{applyChange:function(e,n,t){return o(e,n,t)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return o(e,n,t,true)}},layers:{USER:true}};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flexibility/Table.flexibility",["./SortFlex","./ColumnFlex","./ConditionFlex","./GroupFlex","./AggregateFlex","./AggregationConfigFlex"],function(e,o,r,t,d,a){"use strict";return{hideControl:"default",unhideControl:"default",addColumn:o.createAddChangeHandler(),removeColumn:o.createRemoveChangeHandler(),moveColumn:o.createMoveChangeHandler(),removeSort:e.removeSort,addSort:e.addSort,moveSort:e.moveSort,addCondition:r.addCondition,removeCondition:r.removeCondition,removeGroup:t.removeGroup,addGroup:t.addGroup,moveGroup:t.moveGroup,removeAggregate:d.removeAggregate,addAggregate:d.addAggregate,setColumnWidth:a.createSetChangeHandler({aggregation:"columns",property:"width"})}});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/flp/FlpLinkDelegate",["sap/ui/mdc/LinkDelegate","sap/ui/mdc/link/LinkItem","sap/ui/mdc/link/Factory","sap/ui/mdc/link/Log","sap/base/Log","sap/base/util/isPlainObject","sap/ui/mdc/link/SemanticObjectMapping","sap/ui/mdc/link/SemanticObjectMappingItem","sap/ui/mdc/link/SemanticObjectUnavailableAction"],function(e,t,n,i,a,r,c,o,u){"use strict";var s=Object.assign({},e);s.fetchLinkItems=function(e,t,n){var a=t?t.getObject(t.getPath()):undefined;var r=[];if(n){n.initialize(s._getSemanticObjects(e));r.forEach(function(e){n.addIntent(i.IntentType.API,{text:e.getText(),intent:e.getHref()})})}var c=s._calculateSemanticAttributes(a,e,n);return s._retrieveNavigationTargets("",c,e,n).then(function(e,t){return Promise.resolve(e)})};s.fetchLinkType=function(e){var t={};var i=null;var r=function(e){return e.filter(function(e){return!t[e]}).length===0};var c=function(e){return e.some(function(e){return t[e]&&t[e].exists===true})};var o=function(){if(!i){i=new Promise(function(e){var r=n.getService("CrossApplicationNavigation");if(!r){a.error("FlpLinkDelegate: Service 'CrossApplicationNavigation' could not be obtained");e({});return}r.getDistinctSemanticObjects().then(function(n){n.forEach(function(e){t[e]={exists:true}});i=null;return e(t)},function(){a.error("FlpLinkDelegate: getDistinctSemanticObjects() of service 'CrossApplicationNavigation' failed");return e({})})})}return i};var u=function(e){if(r(e)){return Promise.resolve(c(e))}return o().then(function(){return c(e)})};if(e&&e.semanticObjects){return u(e.semanticObjects).then(function(e){return Promise.resolve({type:e?2:0,directLink:undefined})})}else{throw new Error("no payload or semanticObjects found")}};s._calculateSemanticAttributes=function(e,t,n){var i=s._getSemanticObjects(t);var c=s._convertSemanticObjectMapping(s._getSemanticObjectMappings(t));if(!i.length){i.push("")}var o={};i.forEach(function(t){if(n){n.addContextObject(t,e)}o[t]={};for(var i in e){var u=null,s=null;if(n){u=n.getSemanticObjectAttribute(t,i);if(!u){u=n.createAttributeStructure();n.addSemanticObjectAttribute(t,i,u)}}if(e[i]===undefined||e[i]===null){if(u){u.transformations.push({value:undefined,description:" Undefined and null values have been removed in FlpLinkDelegate."})}continue}if(r(e[i])){if(u){u.transformations.push({value:undefined,description:" Plain objects has been removed in FlpLinkDelegate."})}continue}var l=c&&c[t]&&c[t][i]?c[t][i]:i;if(u&&i!==l){s={value:undefined,description:" The attribute "+i+" has been renamed to "+l+" in FlpLinkDelegate.",reason:" A com.sap.vocabularies.Common.v1.SemanticObjectMapping annotation is defined for semantic object "+t+" with source attribute "+i+" and target attribute "+l+". You can modify the annotation if the mapping result is not what you expected."}}if(o[t][l]){a.error("FlpLinkDelegate: The attribute "+i+" can not be renamed to the attribute "+l+" due to a clash situation. This can lead to wrong navigation later on.")}o[t][l]=e[i];if(u){if(s){u.transformations.push(s);var f=n.createAttributeStructure();f.transformations.push({value:e[i],description:" The attribute "+l+" with the value "+e[i]+" has been added due to a mapping rule regarding the attribute "+i+" in FlpLinkDelegate."});n.addSemanticObjectAttribute(t,l,f)}}}});return o};s._retrieveNavigationTargets=function(e,i,r,c){if(!r.semanticObjects){return new Promise(function(e){e([])})}var o=r.semanticObjects;var u=r.sourceControl;var l={ownNavigation:undefined,availableActions:[]};return sap.ui.getCore().loadLibrary("sap.ui.fl",{async:true}).then(function(){return new Promise(function(f){sap.ui.require(["sap/ui/fl/Utils"],function(v){var b=n.getService("CrossApplicationNavigation");var p=n.getService("URLParsing");if(!b||!p){a.error("FlpLinkDelegate: Service 'CrossApplicationNavigation' or 'URLParsing' could not be obtained");return f(l.availableActions,l.ownNavigation)}var g=sap.ui.getCore().byId(u);var m=v.getAppComponentForControl(g);var d=o.map(function(t){return[{semanticObject:t,params:i?i[t]:undefined,appStateKey:e,ui5Component:m,sortResultsBy:"text"}]});return new Promise(function(){b.getLinks(d).then(function(e){if(!e||!e.length){return f(l.availableActions,l.ownNavigation)}var n=s._getSemanticObjectUnavailableActions(r);var i=s._convertSemanticObjectUnavailableAction(n);var a=b.hrefForExternal();if(a&&a.indexOf("?")!==-1){a=a.split("?")[0]}if(a){a+="?"}var u=function(e,t){return!!i&&!!i[e]&&i[e].indexOf(t)>-1};var v=function(e){var n=p.parseShellHash(e.intent);if(u(n.semanticObject,n.action)){return}var i=b.hrefForExternal({target:{shellHash:e.intent}},m);if(e.intent&&e.intent.indexOf(a)===0){l.ownNavigation=new t({href:i,text:e.text});return}var r=new t({key:n.semanticObject&&n.action?n.semanticObject+"-"+n.action:undefined,text:e.text,description:undefined,href:i,icon:undefined,initiallyVisible:e.tags&&e.tags.indexOf("superiorAction")>-1});l.availableActions.push(r);if(c){c.addSemanticObjectIntent(n.semanticObject,{intent:r.getHref(),text:r.getText()})}};for(var g=0;g<o.length;g++){e[g][0].forEach(v)}return f(l.availableActions,l.ownNavigation)},function(){a.error("FlpLinkDelegate: '_retrieveNavigationTargets' failed executing getLinks method");return f(l.availableActions,l.ownNavigation)})})})})})};s._getSemanticObjects=function(e){return e.semanticObjects?e.semanticObjects:[]};s._getSemanticObjectUnavailableActions=function(e){var t=[];if(e.semanticObjectUnavailableActions){e.semanticObjectUnavailableActions.forEach(function(e){t.push(new u({semanticObject:e.semanticObject,actions:e.actions}))})}return t};s._getSemanticObjectMappings=function(e){var t=[];var n=[];if(e.semanticObjectMappings){e.semanticObjectMappings.forEach(function(e){n=[];if(e.items){e.items.forEach(function(e){n.push(new o({key:e.key,value:e.value}))})}t.push(new c({semanticObject:e.semanticObject,items:n}))})}return t};s._convertSemanticObjectMapping=function(e){if(!e.length){return undefined}var t={};e.forEach(function(e){if(!e.getSemanticObject()){throw Error("FlpLinkDelegate: 'semanticObject' property with value '"+e.getSemanticObject()+"' is not valid")}t[e.getSemanticObject()]=e.getItems().reduce(function(e,t){e[t.getKey()]=t.getValue();return e},{})});return t};s._convertSemanticObjectUnavailableAction=function(e){if(!e.length){return undefined}var t={};e.forEach(function(e){if(!e.getSemanticObject()){throw Error("FlpLinkDelegate: 'semanticObject' property with value '"+e.getSemanticObject()+"' is not valid")}t[e.getSemanticObject()]=e.getActions()});return t};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/library",["sap/ui/core/Core","sap/ui/core/library","sap/m/library"],function(){"use strict";var e=sap.ui.getCore().initLibrary({version:"1.102.0",name:"sap.ui.mdc",dependencies:["sap.ui.core","sap.m"],designtime:"sap/ui/mdc/designtime/library.designtime",types:["sap.ui.mdc.TableType","sap.ui.mdc.TableP13Mode","sap.ui.mdc.GrowingMode","sap.ui.mdc.RowAction","sap.ui.mdc.RowCountMode","sap.ui.mdc.SelectionMode","sap.ui.mdc.FilterExpression","sap.ui.mdc.MultiSelectMode"],interfaces:["sap.ui.mdc.IFilterSource","sap.ui.mdc.IFilter","sap.ui.mdc.IxState","sap.ui.mdc.valuehelp.ITypeaheadContent","sap.ui.mdc.valuehelp.IDialogContent","sap.ui.mdc.valuehelp.ITypeaheadContainer","sap.ui.mdc.valuehelp.IDialogContainer"],controls:["sap.ui.mdc.Table","sap.ui.mdc.FilterBar","sap.ui.mdc.field.FieldBase","sap.ui.mdc.field.FieldInput","sap.ui.mdc.field.FieldMultiInput","sap.ui.mdc.field.ValueHelpPanel","sap.ui.mdc.field.DefineConditionPanel","sap.ui.mdc.Field","sap.ui.mdc.FilterField","sap.ui.mdc.MultiValueField","sap.ui.mdc.link.Panel","sap.ui.mdc.link.ContactDetails","sap.ui.mdc.Chart","sap.ui.mdc.p13n.PersistenceProvider"],elements:["sap.ui.mdc.table.Column","sap.ui.mdc.table.CreationRow","sap.ui.mdc.table.TableTypeBase","sap.ui.mdc.table.GridTableType","sap.ui.mdc.table.ResponsiveTableType","sap.ui.mdc.table.RowSettings","sap.ui.mdc.chart.Item","sap.ui.mdc.chart.ChartSelectionDetails","sap.ui.mdc.chart.ChartToolbar","sap.ui.mdc.chart.ChartTypeButton","sap.ui.mdc.chart.DrillBreadcrumbs","sap.ui.mdc.chart.SelectionDetailsActions","sap.ui.mdc.field.CustomFieldHelp","sap.ui.mdc.field.CustomFieldInfo","sap.ui.mdc.field.FieldHelpBase","sap.ui.mdc.field.FieldInfoBase","sap.ui.mdc.field.FieldValueHelp","sap.ui.mdc.field.FieldValueHelpContentWrapperBase","sap.ui.mdc.field.FieldValueHelpTableWrapperBase","sap.ui.mdc.field.FieldValueHelpMdcTableWrapper","sap.ui.mdc.field.FieldValueHelpMTableWrapper","sap.ui.mdc.field.FieldValueHelpUITableWrapper","sap.ui.mdc.field.ListFieldHelp","sap.ui.mdc.field.ListFieldHelpItem","sap.ui.mdc.field.BoolFieldHelp","sap.ui.mdc.field.ConditionFieldHelp","sap.ui.mdc.filterbar.aligned.FilterItemLayout","sap.ui.mdc.Link","sap.ui.mdc.link.ContactDetailsAddressItem","sap.ui.mdc.link.ContactDetailsEmailItem","sap.ui.mdc.link.ContactDetailsItem","sap.ui.mdc.link.ContactDetailsPhoneItem","sap.ui.mdc.link.LinkItem","sap.ui.mdc.link.PanelItem","sap.ui.mdc.link.SemanticObjectUnavailableAction","sap.ui.mdc.link.SemanticObjectMapping","sap.ui.mdc.link.SemanticObjectMappingItem","sap.ui.mdc.field.InParameter","sap.ui.mdc.field.OutParameter","sap.ui.mdc.field.MultiValueFieldItem","sap.ui.mdc.ValueHelp","sap.ui.mdc.valuehelp.Popover","sap.ui.mdc.valuehelp.Dialog","sap.ui.mdc.valuehelp.content.Bool","sap.ui.mdc.valuehelp.content.Conditions","sap.ui.mdc.valuehelp.content.FixedList","sap.ui.mdc.valuehelp.content.MDCTable","sap.ui.mdc.valuehelp.content.MTable"],extensions:{flChangeHandlers:{"sap.ui.mdc.Table":"sap/ui/mdc/flexibility/Table","sap.ui.mdc.Chart":"sap/ui/mdc/flexibility/Chart","sap.ui.mdc.FilterBar":"sap/ui/mdc/flexibility/FilterBar","sap.ui.mdc.filterbar.p13n.AdaptationFilterBar":"sap/ui/mdc/flexibility/FilterBar","sap.ui.mdc.filterbar.vh.FilterBar":"sap/ui/mdc/flexibility/FilterBar","sap.ui.mdc.link.PanelItem":"sap/ui/mdc/flexibility/PanelItem","sap.ui.mdc.link.Panel":"sap/ui/mdc/flexibility/Panel","sap.ui.mdc.ActionToolbar":"sap/ui/mdc/flexibility/ActionToolbar","sap.ui.mdc.actiontoolbar.ActionToolbarAction":"sap/ui/mdc/flexibility/ActionToolbarAction","sap.ui.mdc.chart.ChartToolbar":"sap/ui/mdc/flexibility/ActionToolbar"}},noLibraryCSS:false});e.FilterBarP13nMode={Item:"Item",Value:"Value"};e.TableType={Table:"Table",ResponsiveTable:"ResponsiveTable"};e.TableP13nMode={Column:"Column",Sort:"Sort",Filter:"Filter",Group:"Group",Aggregate:"Aggregate"};e.GrowingMode={None:"None",Basic:"Basic",Scroll:"Scroll"};e.RowCountMode={Auto:"Auto",Fixed:"Fixed"};e.ChartToolbarActionType={ZoomInOut:"ZoomInOut",DrillDownUp:"DrillDownUp",Legend:"Legend",FullScreen:"FullScreen"};e.ChartP13nMode={Item:"Item",Sort:"Sort",Type:"Type",Filter:"Filter"};e.SelectionMode={None:"None",Single:"Single",Multi:"Multi"};e.RowAction={Navigation:"Navigation"};e.FilterExpression={Interval:"Interval",Single:"Single",Multi:"Multi"};e.ChartItemType={Dimension:"Dimension",Measure:"Measure"};e.ChartItemRoleType={category:"category",series:"series",category2:"category2",axis1:"axis1",axis2:"axis2",axis3:"axis3"};e.ContactDetailsAddressType={work:"work",home:"home",preferred:"preferred"};e.ContactDetailsEmailType={work:"work",home:"home",preferred:"preferred"};e.ContactDetailsPhoneType={work:"work",home:"home",cell:"cell",fax:"fax",preferred:"preferred"};e.MultiSelectMode={Default:"Default",ClearAll:"ClearAll"};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetails",["sap/ui/core/Control","./ContactDetailsRenderer","sap/ui/core/Title","sap/m/VBox","sap/m/Text","sap/m/Link","sap/m/Label","sap/m/Image","sap/ui/layout/form/SimpleForm"],function(e,t,i,r,n,o,s,a,d){"use strict";var g=e.extend("sap.ui.mdc.link.ContactDetails",{metadata:{library:"sap.ui.mdc",defaultAggregation:"items",aggregations:{items:{type:"sap.ui.mdc.link.ContactDetailsItem",multiple:true,singularName:"item"},_content:{type:"sap.m.VBox",visibility:"hidden",multiple:false}}},renderer:t});var p=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");g.prototype.applySettings=function(){e.prototype.applySettings.apply(this,arguments);this._createContent()};g.prototype._createContent=function(){var e=[];this.getItems().forEach(function(t){var r=new i({text:t.getSectionTitle()});var o=new a({src:t.getPhoto(),visible:!!t.getPhoto(),decorative:false,width:"5rem",height:"5rem"});var g=new s({text:"",labelFor:o,visible:!!t.getPhoto()});var f=new n({text:t.getFormattedName(),visible:!!t.getFormattedName()});var l=new s({text:p.getText("info.POPOVER_CONTACT_SECTION_NAME"),labelFor:f,visible:!!t.getFormattedName()});var u=new n({text:t.getRole(),visible:!!t.getRole()});var T=new s({text:p.getText("info.POPOVER_CONTACT_SECTION_ROLE"),labelFor:u,visible:!!t.getRole()});var c=new n({text:t.getTitle(),visible:!!t.getTitle()});var h=new s({text:p.getText("info.POPOVER_CONTACT_SECTION_JOBTITLE"),labelFor:c,visible:!!t.getTitle()});var O=new n({text:t.getOrg(),visible:!!t.getOrg()});var y=new s({text:p.getText("info.POPOVER_CONTACT_SECTION_DEPARTMENT"),labelFor:O,visible:!!t.getOrg()});var m=new d({editable:false,layout:"ColumnLayout",content:[r,g,o,l,f,T,u,h,c,y,O]});this._addEmailsToSimpleForm(t,m,p);this._addPhonesToSimpleForm(t,m,p);this._addAddressesToSimpleForm(t,m,p);e.push(m)}.bind(this));this.setAggregation("_content",new r({items:e}))};g.prototype._addEmailsToSimpleForm=function(e,t,i){e.getEmails().filter(function(e){return!e.processed&&!!e.getTypes()&&(e.getTypes().indexOf("preferred")>-1||e.getTypes().indexOf("work")>-1)}).sort(function(e,t){if(e.getTypes().indexOf("preferred")>-1&&t.getTypes().indexOf("preferred")<0){return-1}if(t.getTypes().indexOf("preferred")>-1&&e.getTypes().indexOf("preferred")<0){return 1}return 0}).forEach(function(e){this._addLabeledLink("email",i.getText("info.POPOVER_CONTACT_SECTION_EMAIL"),e,t);e.processed=true},this)};g.prototype._addPhonesToSimpleForm=function(e,t,i){e.getPhones().filter(function(e){return!e.processed&&!!e.getTypes()&&e.getTypes().indexOf("work")>-1}).sort(function(e,t){if(e.getTypes().indexOf("preferred")>-1){return-1}if(t.getTypes().indexOf("preferred")>-1){return 1}return 0}).forEach(function(e){this._addLabeledLink("phone",i.getText("info.POPOVER_CONTACT_SECTION_PHONE"),e,t);e.processed=true},this);e.getPhones().filter(function(e){return!e.processed&&!!e.getTypes()&&e.getTypes().indexOf("cell")>-1}).sort(function(e,t){if(e.getTypes().indexOf("preferred")>-1){return-1}if(t.getTypes().indexOf("preferred")>-1){return 1}return 0}).forEach(function(e){this._addLabeledLink("phone",i.getText("info.POPOVER_CONTACT_SECTION_MOBILE"),e,t);e.processed=true},this);e.getPhones().filter(function(e){return!e.processed&&!!e.getTypes()&&e.getTypes().indexOf("fax")>-1}).sort(function(e,t){if(e.getTypes().indexOf("preferred")>-1){return-1}if(t.getTypes().indexOf("preferred")>-1){return 1}return 0}).forEach(function(e){this._addLabeledLink("phone",i.getText("info.POPOVER_CONTACT_SECTION_FAX"),e,t);e.processed=true},this);e.getPhones().filter(function(e){return!e.processed&&!!e.getTypes()&&e.getTypes().indexOf("preferred")>-1}).forEach(function(e){this._addLabeledLink("phone",i.getText("info.POPOVER_CONTACT_SECTION_PHONE"),e,t);e.processed=true},this)};g.prototype._addAddressesToSimpleForm=function(e,t,i){e.getAddresses().filter(function(e){return!e.processed&&!!e.getTypes()&&(e.getTypes().indexOf("preferred")>-1||e.getTypes().indexOf("work")>-1)}).sort(function(e,t){if(e.getTypes().indexOf("preferred")>-1&&t.getTypes().indexOf("preferred")<0){return-1}if(t.getTypes().indexOf("preferred")>-1&&e.getTypes().indexOf("preferred")<0){return 1}return 0}).forEach(function(e){this._addLabeledAddress(e,t,i);e.processed=true},this)};g.prototype._addLabeledAddress=function(e,t,i){var r=function(e,t,i,r,n){var o=[];if(e){o.push(e)}if(t&&i){o.push(t+" "+i)}else{if(t){o.push(t)}if(i){o.push(i)}}if(r){o.push(r)}if(n){o.push(n)}return o.join(", ")};var o=function(e,t,i,r,n){return!!(e||t||i||r||n)};var a;var d;if(e.getBindingPath("street")&&e.getBindingPath("code")&&e.getBindingPath("locality")&&e.getBindingPath("region")&&e.getBindingPath("country")){a=[{path:e.getBindingPath("street")?e.getBindingPath("street"):"$notExisting"},{path:e.getBindingPath("code")?e.getBindingPath("code"):"$notExisting"},{path:e.getBindingPath("locality")?e.getBindingPath("locality"):"$notExisting"},{path:e.getBindingPath("region")?e.getBindingPath("region"):"$notExisting"},{path:e.getBindingPath("country")?e.getBindingPath("country"):"$notExisting"}];d=new n;d.bindProperty("text",{parts:a,formatter:r});d.bindProperty("visible",{parts:a,formatter:o})}else{d=new n({text:r(e.getStreet(),e.getCode(),e.getLocality(),e.getRegion(),e.getCountry()),visible:o(e.getStreet(),e.getCode(),e.getLocality(),e.getRegion(),e.getCountry())})}var g=new s({text:i.getText("info.POPOVER_CONTACT_SECTION_ADR"),labelFor:d.getId()});t.addContent(g);t.addContent(d)};g.prototype._addLabeledLink=function(e,t,i,r){var n;if(i.getBindingPath("uri")){n=new o;n.bindProperty("href",{path:i.getBindingPath("uri"),formatter:function(t){return(e==="email"?"mailto:":"tel:")+t}});n.bindProperty("text",{path:i.getBindingPath("uri")});n.bindProperty("visible",{path:i.getBindingPath("uri"),formatter:function(e){return!!e}})}else{n=new o({href:e==="email"?"mailto:":"tel:"+i.getUri(),text:i.getUri(),visible:!!i.getUri()})}var a=new s({text:t,labelFor:n.getId()});r.addContent(a);r.addContent(n)};return g});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetailsAddressItem",["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.ui.mdc.link.ContactDetailsAddressItem",{metadata:{library:"sap.ui.mdc",properties:{street:{type:"string"},code:{type:"string"},locality:{type:"string"},region:{type:"string"},country:{type:"string"},types:{type:"sap.ui.mdc.ContactDetailsAddressType[]",defaultValue:[]}}}});return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetailsEmailItem",["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.ui.mdc.link.ContactDetailsEmailItem",{metadata:{library:"sap.ui.mdc",properties:{uri:{type:"string"},types:{type:"sap.ui.mdc.ContactDetailsEmailType[]",defaultValue:[]}}}});return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetailsItem",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.ContactDetailsItem",{metadata:{library:"sap.ui.mdc",properties:{sectionTitle:{type:"string",defaultValue:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("info.POPOVER_CONTACT_SECTION_TITLE")},photo:{type:"string"},formattedName:{type:"string"},role:{type:"string"},title:{type:"string"},org:{type:"string"},parameters:{type:"object"}},defaultAggregation:"emails",aggregations:{emails:{type:"sap.ui.mdc.link.ContactDetailsEmailItem",multiple:true,singularName:"email"},phones:{type:"sap.ui.mdc.link.ContactDetailsPhoneItem",multiple:true,singularName:"phone"},addresses:{type:"sap.ui.mdc.link.ContactDetailsAddressItem",multiple:true,singularName:"address"}}}});return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetailsPhoneItem",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.ContactDetailsPhoneItem",{metadata:{library:"sap.ui.mdc",properties:{uri:{type:"string"},types:{type:"sap.ui.mdc.ContactDetailsPhoneType[]",defaultValue:[]}}}});return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/ContactDetailsRenderer",[],function(){"use strict";var e={apiVersion:2};e.render=function(e,n){var r=n.getAggregation("_content");e.openStart("div",n);e.openEnd();e.renderControl(r);e.close("div")};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/Factory",[],function(){"use strict";return{getService:function(e){switch(e){case"CrossApplicationNavigation":return sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");case"URLParsing":return sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("URLParsing");default:return null}}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/FakeFlpConnector",["sap/ui/thirdparty/jquery","sap/ui/mdc/link/Factory"],function(e,r){"use strict";function t(){}t.enableFakeConnector=function(e){if(t.getServiceReal){return}t.getServiceReal=r.getService;r.getService=t._createFakeService(e)};t.enableFakeConnectorForTesting=function(e,n){if(t.getServiceReal){return}t.getServiceReal=r.getService;r.getService=t._createFakeService(e,n)};t._createFakeService=function(r,n){return function(i){switch(i){case"CrossApplicationNavigation":return{hrefForExternal:function(e,r){if(n){n.hrefForExternal=n.hrefForExternal||{calls:[]};n.hrefForExternal.calls.push({target:e,comp:r})}if(!e){return null}return e.target.shellHash},getDistinctSemanticObjects:function(){var t=[];for(var n in r){t.push(n)}var i=e.Deferred();setTimeout(function(){i.resolve(t)},0);return i.promise()},getLinks:function(t){var n=[];if(!Array.isArray(t)){r[t.semanticObject]?n=r[t.semanticObject].links:n=[]}else{t.forEach(function(e){r[e[0].semanticObject]?n.push([r[e[0].semanticObject].links]):n.push([[]])})}var i=e.Deferred();setTimeout(function(){i.resolve(n)},0);return i.promise()}};case"URLParsing":return{parseShellHash:function(e){var t=function(r){var t=r.filter(function(r){return r.intent===e});return t[0]};for(var n in r){var i=t(r[n].links);if(i){return{semanticObject:n,action:i.action}}}return{semanticObject:null,action:null}}};default:return t.getServiceReal(i)}}};t.disableFakeConnector=function(){if(t.getServiceReal){r.getService=t.getServiceReal;t.getServiceReal=undefined}};return t},true);
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/LinkItem",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.LinkItem",{metadata:{library:"sap.ui.mdc",properties:{key:{type:"string"},text:{type:"string"},description:{type:"string"},href:{type:"string"},target:{type:"string",defaultValue:"_self"},icon:{type:"string"},initiallyVisible:{type:"boolean",defaultValue:false}}}});return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/Log",["sap/ui/base/Object","sap/base/util/isEmptyObject"],function(t,e){"use strict";var n=t.extend("sap.ui.mdc.link.Log",{constructor:function(){this.reset()}});n.prototype.reset=function(){this._oLog={semanticObjects:{},intents:{api:[],breakout:[]}};return this};n.prototype.isEmpty=function(){return!(!e(this._oLog.semanticObjects)||this._oLog.intents.breakout.length||this._oLog.intents.api.length)};n.prototype.initialize=function(t){this.reset();t.forEach(function(t){this.createSemanticObjectStructure(t)}.bind(this))};n.prototype.addContextObject=function(t,e){for(var n in e){var i=this.createAttributeStructure();this.addSemanticObjectAttribute(t,n,i);i.transformations.push({value:e[n],description:" The attribute "+n+" with the value "+e[n]+" is initially taken from the binding context."})}};n.prototype.createSemanticObjectStructure=function(t){this._oLog.semanticObjects[t]={attributes:{},intents:[]}};n.prototype.createAttributeStructure=function(){return{transformations:[]}};n.prototype.addSemanticObjectIntent=function(t,e){if(!this._oLog.semanticObjects[t]){this.createSemanticObjectStructure(t)}this._oLog.semanticObjects[t].intents.push(e);return this};n.prototype.addSemanticObjectAttribute=function(t,e,n){if(!this._oLog.semanticObjects[t]){this.createSemanticObjectStructure(t)}this._oLog.semanticObjects[t].attributes[e]=n;return this};n.prototype.getSemanticObjectAttribute=function(t,e){return this._oLog.semanticObjects[t]&&this._oLog.semanticObjects[t].attributes[e]?this._oLog.semanticObjects[t].attributes[e]:undefined};n.prototype.addIntent=function(t,e){switch(t){case n.IntentType.API:this._oLog.intents.api.push(e);break;case n.IntentType.BREAKOUT:this._oLog.intents.breakout.push(e);break;default:throw"Intent type "+t+" is not supported yet."}return this};n.prototype.getFormattedText=function(){var t=function(t){return typeof t==="string"?"'"+t+"'":t};var n=function(e,n){var i={value:" "+n+" : ",description:""};e.forEach(function(e,n){i.value=i.value+(n>0?"    ":"")+t(e["value"]);i.description=i.description+"   "+e["description"]+"\n";if(e["reason"]){i.description=i.description+"   "+e["reason"]+"\n"}});return i};var i=function(t){var e="";t.forEach(function(t){e+=" '"+t.text+"' : "+t.intent+"\n"});return e};var o=function(t){try{var e=sap.ui.getCore().getConfiguration().getLocale().toString();if(typeof window.Intl!=="undefined"){var n=window.Intl.Collator(e,{numeric:true});t.sort(function(t,e){return n.compare(t,e)})}else{t.sort(function(t,n){return t.localeCompare(n,e,{numeric:true})})}}catch(t){}};var r="";for(var a in this._oLog.semanticObjects){r=r+"\n"+" "+a+"\n";if(e(this._oLog.semanticObjects[a].attributes)){r+="   No semantic attributes available for semantic object "+a+". Please be aware "+"that without semantic attributes no URL parameters can be created.\n"}else{var s=Object.keys(this._oLog.semanticObjects[a].attributes);o(s);for(var c=0;c<s.length;c++){var u=s[c];var b=n(this._oLog.semanticObjects[a].attributes[u].transformations,u);r+=b.value+"\n";r+=b.description}}if(this._oLog.semanticObjects[a].intents.length){r+="\nIntents returned by FLP for semantic object "+a+":\n";r+=i(this._oLog.semanticObjects[a].intents)}}if(this._oLog.intents.api.length){r+="\nIntents defined in items aggregation:\n";r+=i(this._oLog.intents.api)}if(this._oLog.intents.breakout.length){r+="\nIntents returned by modifyItemsCallback callback:\n";r+=i(this._oLog.intents.breakout)}return r};n.prototype._getLogFormattedText=function(){return!this.isEmpty()?"---------------------------------------------\nsap.ui.mdc.Link:\nBelow you can see detailed information regarding semantic attributes which have been calculated for one or more semantic objects defined in a Link control. Semantic attributes are used to create the URL parameters. Additionally you can see all links containing the URL parameters.\n"+this.getFormattedText():"No logging data available"};n.IntentType={BREAKOUT:"Breakout",API:"Api"};return n});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/Panel",["sap/ui/core/Control","./PanelRenderer","sap/ui/layout/VerticalLayout","sap/base/Log","sap/ui/layout/HorizontalLayout","sap/m/HBox","sap/m/VBox","sap/m/ImageContent","sap/m/Link","sap/m/Label","sap/m/Text","sap/m/Button","sap/m/FlexItemData","sap/ui/model/json/JSONModel","sap/ui/model/BindingMode","sap/ui/base/ManagedObjectObserver","sap/ui/mdc/p13n/subcontroller/LinkPanelController","sap/ui/mdc/p13n/Engine","sap/ui/mdc/mixin/AdaptationMixin","sap/ui/mdc/link/PanelItem"],function(t,e,n,i,a,r,o,s,l,u,c,p,d,m,g,h,f,I,v,y){"use strict";var P=t.extend("sap.ui.mdc.link.Panel",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/link/Panel.designtime",defaultAggregation:"items",properties:{enablePersonalization:{type:"boolean",defaultValue:true,invalidate:true},metadataHelperPath:{type:"string"},beforeNavigationCallback:{type:"function"}},aggregations:{items:{type:"sap.ui.mdc.link.PanelItem",multiple:true,singularName:"item"},additionalContent:{type:"sap.ui.core.Control",multiple:true},_content:{type:"sap.ui.layout.VerticalLayout",visibility:"hidden",multiple:false}},events:{beforeSelectionDialogOpen:{},afterSelectionDialogClose:{}}},renderer:e});P.prototype.init=function(){t.prototype.init.call(this);I.getInstance().registerAdaptation(this,{controller:{LinkItems:f}});v.call(P.prototype);I.getInstance().defaultProviderRegistry.attach(this,"Global");sap.ui.require([this.getMetadataHelperPath()||"sap/ui/mdc/Link"],function(t){this._oMetadataHelper=t}.bind(this));var e=new m({countAdditionalContent:0,countItemsWithIcon:0,countItemsWithoutIcon:0,showResetEnabled:false,runtimeItems:[],contentTitle:""});e.setDefaultBindingMode(g.TwoWay);e.setSizeLimit(1e3);this.setModel(e,"$sapuimdclinkPanel");this._oObserver=new h(_.bind(this));this._oObserver.observe(this,{properties:["enablePersonalization"],aggregations:["items","additionalContent"]})};var b=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");P.prototype.applySettings=function(){var e=this._getInternalModel();this._createContent();t.prototype.applySettings.apply(this,arguments);e.setProperty("/countAdditionalContent",this.getAdditionalContent().length)};P.prototype.exit=function(t){if(this._oObserver){this._oObserver.disconnect();this._oObserver=null}if(this._oMetadataHelper){this._oMetadataHelper=null}};P.prototype._createContent=function(){var t=new n({content:[this._createAdditionalContentArea(),this._createSeparator(),this._createLinkArea(),this._createFooterArea()]});t.setWidth("calc(100% - 2rem)");this.setAggregation("_content",t)};P.prototype._createAdditionalContentArea=function(){var t=new o({fitContainer:false,items:this.getAdditionalContent()});return t};P.prototype._createSeparator=function(){var t=new o({fitContainer:false,visible:{parts:[{path:"$sapuimdclinkPanel>/countAdditionalContent"},{path:"$sapuimdcLink>/metadata"}],formatter:function(t,e){return t>0&&e.length>0}}});t.addStyleClass("mdcbaseinfoPanelSeparator");t.setModel(this._getInternalModel(),"$sapuimdclinkPanel");t.setModel(this.getModel("$sapuimdcLink"),"$sapuimdcLink");return t};P.prototype._createLinkArea=function(){var t=new o({fitContainer:false,items:{path:"$sapuimdclinkPanel>/runtimeItems",templateShareable:false,factory:this._fnLinkItemFactory.bind(this)}});t.addStyleClass("mdcbaseinfoPanelSectionLinks");t.setModel(this._getInternalModel(),"$sapuimdclinkPanel");return t};P.prototype._fnLinkItemFactory=function(t,e){var n=new s({src:"{$sapuimdclinkPanel>icon}",visible:{path:"$sapuimdclinkPanel>icon",formatter:function(t){return!!t}}});var i=new l({text:"{$sapuimdclinkPanel>text}",href:"{$sapuimdclinkPanel>href}",target:"{$sapuimdclinkPanel>target}",visible:{path:"$sapuimdclinkPanel>href",formatter:function(t){return!!t}},press:this.onPressLink.bind(this),wrapping:true});var p=new u({text:"{$sapuimdclinkPanel>text}",visible:{path:"$sapuimdclinkPanel>href",formatter:function(t){return!t}},wrapping:true});var m=new c({text:"{$sapuimdclinkPanel>description}",visible:{path:"$sapuimdclinkPanel>description",formatter:function(t){return!!t}},wrapping:true});var g=new o({items:[i,p,m]});var h=new r({layoutData:new d({styleClass:e.getProperty("description")?"mdcbaseinfoPanelItemsGroup":"mdcbaseinfoPanelItemsWithoutGroup"}),items:[n,g]});var f=new a({visible:"{$sapuimdclinkPanel>visible}",content:[h]});f.addStyleClass("mdcbaseinfoPanelListItem");return f};P.prototype._createFooterArea=function(){var t=new p(this.getId()+"--idSectionPersonalizationButton",{type:"Transparent",text:b.getText("info.POPOVER_DEFINE_LINKS"),press:this.onPressLinkPersonalization.bind(this)});var e=new r({visible:{path:"$sapuimdcLink>/metadata",formatter:function(t){return t.length>0}},justifyContent:"End",items:[t]});e.addStyleClass("mdcbaseinfoPanelPersonalizationButton");return e};P.prototype.onPressLink=function(t){if(this.getBeforeNavigationCallback()&&t.getSource()&&t.getSource().getTarget()!=="_blank"){var e=t.getSource().getHref();t.preventDefault();this.getBeforeNavigationCallback()(t).then(function(t){if(t){P.navigate(e)}})}};P.oNavigationPromise=undefined;P.navigate=function(t){if(t.indexOf("#")===0&&sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getServiceAsync){if(!P.oNavigationPromise){P.oNavigationPromise=sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{shellHash:t.substring(1)}});P.oNavigationPromise=undefined})}}else{window.location.href=t}};P.prototype.onPressLinkPersonalization=function(){sap.ui.require([this.getMetadataHelperPath()||"sap/ui/mdc/Link"],function(t){var e=this._getInternalModel();var n=t.retrieveBaseline(this);var i=n;var a=function(t){var e=t._oListControl.getItems().filter(function(t){return t.getSelected()});e=e.map(function(e){var n=t._getP13nModel().getProperty(e.getBindingContext(t.P13N_MODEL).sPath);return{id:n.name,description:n.description,href:n.href,target:n.target,text:n.text,visible:n.visible}});var n=P._showResetButtonEnabled(i,e);this._getInternalModel().setProperty("/showResetEnabled",n)};var r=this.getParent();r.setModal(true);I.getInstance().uimanager.show(this,"LinkItems").then(function(t){var n=t.getCustomHeader().getContentRight()[0];var i=t.getContent()[0];n.setModel(e,"$sapuimdclinkPanel");n.bindProperty("enabled",{path:"$sapuimdclinkPanel>/showResetEnabled"});a.call(this,i);i.attachChange(function(t){a.call(this,i)}.bind(this));t.attachAfterClose(function(){r.setModal(false)})}.bind(this))}.bind(this))};P._showResetButtonEnabled=function(t,e){var n=false;var i=P._getVisibleItems(e);var a=P._getVisibleItems(t);if(e.length!==t.length){n=true}else if(a.length&&i.length){var r=P._allItemsIncludedInArray(a,i);var o=P._allItemsIncludedInArray(i,a);n=!r||!o}return n};P._allItemsIncludedInArray=function(t,e){var n=true;t.forEach(function(t){var i=P._getItemsById(t.id,e);if(i.length===0){n=false}});return n};P._getItemsById=function(t,e){return e.filter(function(e){return e.id===t})};P._getItemById=function(t,e){return P._getItemsById(t,e)[0]};P._getVisibleItems=function(t){return t.filter(function(t){return t.id!==undefined&&t.visible})};P.prototype._getInternalModel=function(){return this.getModel("$sapuimdclinkPanel")};P.prototype._propagateDefaultIcon=function(t){if(!t){return}var e=this._getInternalModel();e.getProperty("/runtimeItems").forEach(function(t,n){if(t.icon){return}e.setProperty("/runtimeItems/"+n+"/icon","sap-icon://chain-link")})};function _(t){var e=this._getInternalModel();if(t.object.isA("sap.ui.mdc.link.Panel")){switch(t.name){case"additionalContent":var n=t.child?[t.child]:t.children;n.forEach(function(e){switch(t.mutation){case"insert":this.getAggregation("_content").getContent()[0].addItem(e);break;case"remove":break;default:i.error("Mutation '"+t.mutation+"' is not supported yet.")}}.bind(this));e.setProperty("/countAdditionalContent",n.length);break;case"items":var a=t.child?[t.child]:t.children;a.forEach(function(n){var a=e.getProperty("/runtimeItems/");switch(t.mutation){case"insert":e.setProperty("/countItemsWithIcon",n.getIcon()?e.getProperty("/countItemsWithIcon")+1:e.getProperty("/countItemsWithIcon"));e.setProperty("/countItemsWithoutIcon",n.getIcon()?e.getProperty("/countItemsWithoutIcon"):e.getProperty("/countItemsWithoutIcon")+1);a.splice(this.indexOfItem(n),0,n.getJson());e.setProperty("/runtimeItems",a);this._propagateDefaultIcon(e.getProperty("/countItemsWithIcon")>0&&e.getProperty("/countItemsWithoutIcon")>0);this._oObserver.observe(n,{properties:["visible"]});break;case"remove":e.setProperty("/countItemsWithIcon",n.getIcon()?e.getProperty("/countItemsWithIcon")-1:e.getProperty("/countItemsWithIcon"));e.setProperty("/countItemsWithoutIcon",n.getIcon()?e.getProperty("/countItemsWithoutIcon"):e.getProperty("/countItemsWithoutIcon")-1);var r=a.find(function(t){return t.id===n.getId()});a.splice(a.indexOf(r),1);e.setProperty("/runtimeItems",a);this._propagateDefaultIcon(e.getProperty("/countItemsWithIcon")>0&&e.getProperty("/countItemsWithoutIcon")>0);this._oObserver.unobserve(n);n.destroy();this.invalidate();break;default:i.error("Mutation '"+t.mutation+"' is not supported yet.")}},this);break;case"enablePersonalization":this._getPersonalizationButton().setVisible(t.current);break;default:i.error("The property or aggregation '"+t.name+"' has not been registered.")}}else if(t.object.isA("sap.ui.mdc.link.PanelItem")){switch(t.name){case"visible":var r=t.object;var o=this.indexOfItem(r);if(r.getVisibleChangedByUser()){e.setProperty("/runtimeItems/"+o+"/visible",r.getVisible())}else{e.setProperty("/baselineItems/"+o+"/visible",r.getVisible());e.setProperty("/runtimeItems/"+o+"/visible",r.getVisible())}break;default:i.error("The '"+t.name+"' of PanelItem is not supported yet.")}}this._updateContentTitle()}P.prototype.getContentTitle=function(){var t=this._getInternalModel();return t.getProperty("/contentTitle")};P.prototype.getCurrentState=function(){var t=[],e;this.getItems().forEach(function(n,i){e=n&&n.getId();if(n.getVisible()){t.push({name:e})}});return{items:t}};P.prototype.initPropertyHelper=function(){var t=this._oMetadataHelper.retrieveAllMetadata(this);return Promise.resolve({getProperties:function(){var e=[];t.forEach(function(t){e.push({name:t.id,getName:function(){return t.id},getLabel:function(){return t.text},text:t.text,href:t.href,description:t.description,target:t.target,visible:t.visible})});return e}})};P.prototype._updateContentTitle=function(){var t=this._getInternalModel();var e=this.getAdditionalContent();var n=this._getPersonalizationButton().getId();if(e.length>0){n=e[0]}else{var i=this.getItems();if(i.length>0){n=i[0]}}t.setProperty("/contentTitle",n)};P.prototype._getPersonalizationButton=function(){return this.getAggregation("_content").getContent()[3].getItems()[0]};return P});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/PanelItem",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.PanelItem",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/link/PanelItem.designtime",properties:{text:{type:"string"},description:{type:"string"},href:{type:"string"},target:{type:"string",defaultValue:undefined},icon:{type:"string"},visible:{type:"boolean",defaultValue:true},visibleChangedByUser:{type:"boolean"}}}});t.prototype.getJson=function(){return{id:this.getId(),text:this.getText(),description:this.getDescription(),href:this.getHref(),icon:this.getIcon(),target:this.getTarget(),visible:this.getVisible(),visibleChangedByUser:this.getVisibleChangedByUser()}};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/PanelRenderer",[],function(){"use strict";var e={apiVersion:2};e.render=function(e,n){var r=n.getAggregation("_content");e.openStart("div",n);e.class("mdcbaseinfoPanel");e.openEnd();e.renderControl(r);e.close("div")};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/SemanticObjectMapping",["sap/ui/core/Element"],function(e){"use strict";var i=e.extend("sap.ui.mdc.link.SemanticObjectMapping",{metadata:{library:"sap.ui.mdc",properties:{semanticObject:{type:"string"}},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.mdc.link.SemanticObjectMappingItem",multiple:true,singularName:"item"}}}});return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/SemanticObjectMappingItem",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.SemanticObjectMappingItem",{metadata:{library:"sap.ui.mdc",properties:{key:{type:"string"},value:{type:"any"}}}});return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/link/SemanticObjectUnavailableAction",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.link.SemanticObjectUnavailableAction",{metadata:{library:"sap.ui.mdc",properties:{semanticObject:{type:"string"},actions:{type:"string[]",defaultValue:[]}}}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/mixin/AdaptationMixin",["sap/ui/mdc/p13n/Engine"],function(t){"use strict";var i={};i.getEngine=function(){return t.getInstance()};i._onModifications=function(){};i.retrieveInbuiltFilter=function(){if(!this._oInbuiltFilterPromise){this._oInbuiltFilterPromise=new Promise(function(t,i){sap.ui.require(["sap/ui/mdc/filterbar/p13n/AdaptationFilterBar"],function(e){if(this.bIsDestroyed){i("exit");return}if(!this._oP13nFilter){this._oP13nFilter=new e(this.getId()+"-p13nFilter",{adaptationControl:this,filterConditions:this.getFilterConditions()});if(this._registerInnerFilter){this._registerInnerFilter.call(this,this._oP13nFilter)}this.addDependent(this._oP13nFilter);t(this._oP13nFilter)}else{t(this._oP13nFilter)}}.bind(this))}.bind(this))}return this._oInbuiltFilterPromise};i.validateState=function(t,i){if(this.getControlDelegate().validateState instanceof Function){return this.getControlDelegate().validateState(this,t,i)}};i.getInbuiltFilter=function(){return this._oP13nFilter};i.exit=function(t){return function(){if(this._oP13nFilter){this._oP13nFilter.destroy();this._oP13nFilter=null}if(this._oInbuiltFilterPromise){this._oInbuiltFilterPromise=null}if(t){t.apply(this,arguments)}}};i._getWaitForChangesPromise=function(){var t=this.getEngine&&this.getEngine();if(!t){throw"Engine instance not found."}return t.waitForChanges(this)};return function(){this.retrieveInbuiltFilter=i.retrieveInbuiltFilter;this.getInbuiltFilter=i.getInbuiltFilter;this.validateState=i.validateState;this._onModifications=i._onModifications;this._getWaitForChangesPromise=i._getWaitForChangesPromise;this.getEngine=i.getEngine;this.exit=i.exit(this.exit)}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/mixin/DelegateMixin",["sap/ui/mdc/util/loadModules","sap/base/Log"],function(e,t){"use strict";var i=function(e){if(!e||!e.name){throw new Error("Delegate configuration '"+(e&&JSON.stringify(e))+"' invalid")}};var l=function(e){if(!this.bIsDestroyed){if(e instanceof Error){this.fnRejectDelegate(e)}else{this._oDelegate=e[0];this.fnResolveDelegate(this._oDelegate);this.bDelegateInitialized=true}}this.bDelegateLoading=false;delete this.fnResolveDelegate;delete this.fnRejectDelegate};var a={};a.init=function(e){return function(){this.bDelegateInitialized=false;this.bDelegateLoading=false;this._oDelegateInitialized=new Promise(function(e,t){this.fnResolveDelegate=e;this.fnRejectDelegate=t}.bind(this));if(e){e.apply(this,arguments)}}};a.applySettings=function(e){return function(t){e.apply(this,arguments);this._bDelegateLocked=true;return this}};a.setDelegate=function(e){return function(t){if(this._bDelegateLocked){throw new Error("Runtime delegate configuration is not permitted.")}i(t);e.call(this,t);this._oPayload=t&&t.payload;return this}};a.initControlDelegate=function(a){if(this.bIsDestroyed){t.warning("Delegate module initialization omitted as control is being destroyed.")}else if(!this._oDelegate&&!this.bDelegateLoading){if(a){l.call(this,[a])}else{var n=this.getDelegate();i(n);this.bDelegateLoading=true;e(n.name).then(l.bind(this)).catch(l.bind(this))}}return this._oDelegateInitialized};a.getPayload=function(){if(!this._oPayload){var e=this.getDelegate();this._oPayload=e&&e.payload}return this._oPayload};a.getTypeUtil=function(){if(!this._oTypeUtil){if(!this._oDelegate){throw new Error("A delegate instance providing typeUtil is not (yet) available.")}this._oTypeUtil=this._oDelegate.getTypeUtil&&this._oDelegate.getTypeUtil(this._oPayload)}return this._oTypeUtil};a.getControlDelegate=function(){if(!this._oDelegate){throw new Error("A delegate instance is not (yet) available. You must call initControlDelegate before calling getControlDelegate.")}return this._oDelegate};a.awaitControlDelegate=function(){return this._oDelegateInitialized};a.exit=function(e){return function(){this.fnResolveDelegate=null;this.fnRejectDelegate=null;this.bDelegateInitialized=false;this.bDelegateLoading=false;this._oDelegateInitialized=null;this._oDelegate=null;this._oPayload=null;this._oTypeUtil=null;if(e){e.apply(this,arguments)}}};return function(){this.applySettings=a.applySettings(this.applySettings);this.exit=a.exit(this.exit);this.init=a.init(this.init);this.setDelegate=a.setDelegate(this.setDelegate);this.awaitControlDelegate=a.awaitControlDelegate;this.getControlDelegate=a.getControlDelegate;this.getPayload=a.getPayload;this.getTypeUtil=a.getTypeUtil;this.initControlDelegate=a.initControlDelegate}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/mixin/FilterIntegrationMixin",["sap/ui/core/Core"],function(t){"use strict";var i={};var e="sap.ui.mdc.IFilter";i.setFilter=function(i){var e=typeof i==="object"?i.getId():i;var n=this.getFilter();if(n!==e){this._validateFilter(i);var r=t.byId(this.getFilter());if(r){o(this,r)}this.setAssociation("filter",i,true);var s=t.byId(this.getFilter());if(s){a(this,s)}}return this};function n(t){this._rebind();if(this._onFilterSearch){this._onFilterSearch(t)}}function r(t){if(this._onFiltersChanged){this._onFiltersChanged(t)}}function a(t,i){i.attachSearch(n,t);if(i.attachFiltersChanged instanceof Function){i.attachFiltersChanged(r,t)}if(t._onFilterProvided instanceof Function){t._onFilterProvided(i)}}function o(t,i){i.detachSearch(n,t);if(i.detachFiltersChanged instanceof Function){i.detachFiltersChanged(r,t)}if(t._onFilterRemoved instanceof Function){t._onFilterRemoved(i)}}function s(t){if(!(t&&t.getMetadata()&&t.getMetadata().hasAssociation("filter"))){throw new Error("Please add the 'filter' association to your control metadata"+t)}if(!(t.rebind instanceof Function)){throw new Error("Please implement the method 'rebind' for the control "+t)}if(!(t.isFilteringEnabled instanceof Function)){throw new Error("Please implement the method isFilteringEnabled for the control "+t)}}i._validateFilter=function(i){s(this);var n=typeof i==="object"?i:t.byId(i);if(n&&!n.isA(e)){throw new Error('"'+i+'" is not valid for association "filter".'+' Please use an object that implements the "'+e+'" interface')}};i.rebind=function(){if(this.bIsDestroyed){return}var i;var e;var n=t.byId(this.getFilter()),r=this.isFilteringEnabled();if(r||n){if(n){i=n.validate(true)}if(r){e=this.retrieveInbuiltFilter().then(function(t){return t.validate(true)})}Promise.all([i,e]).then(function(){this._rebind()}.bind(this),function(){})}else{this._rebind()}};return function(){this.setFilter=i.setFilter;this._validateFilter=i._validateFilter;this.rebind=i.rebind}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/mixin/PromiseMixin",["sap/ui/mdc/util/PromiseCache"],function(e){"use strict";var i={};i.addPromise=function(e,i){return this.promiseCache.add(e,i)};i.cancelPromise=function(e,i){return this.promiseCache.cancel(e,i)};i.retrievePromise=function(e,i){return this.promiseCache.retrieve(e,i)};i.retrievePromises=function(){return this.promiseCache.retrieveMany.apply(this.promiseCache,arguments)};i.removePromise=function(e){return this.promiseCache.remove(e)};i.resolvePromise=function(e,i){return this.promiseCache.resolve(e,i)};i.rejectPromise=function(e,i){return this.promiseCache.reject(e,i)};i.exit=function(e){return function(){if(this.promiseCache){this.promiseCache.destroy();this.promiseCache=null}if(e){e.apply(this,arguments)}}};return function(){var r=function(i){return function(){if(this.bIsDestroyed){return undefined}if(!this.promiseCache){this.promiseCache=new e}return i.apply(this,arguments)}};this._addPromise=r(i.addPromise);this._cancelPromise=r(i.cancelPromise);this._removePromise=r(i.removePromise);this._resolvePromise=r(i.resolvePromise);this._rejectPromise=r(i.rejectPromise);this._retrievePromise=r(i.retrievePromise);this._retrievePromises=r(i.retrievePromises);this.exit=i.exit(this.exit)}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/mixin/PropertyHelperMixin",["sap/base/util/Deferred","sap/ui/mdc/util/loadModules","sap/base/Log"],function(e,r,t){"use strict";var i={};i.init=function(r){return function(){this._oPropertyHelper=null;this._oPropertyHelperDeferred=new e;this._oApplySettingsDeferred=new e;this._bPropertyHelperFinal=false;this._bPropertyHelperInitializing=false;this._sPropertyInfoStore=null;if(r){r.apply(this,arguments)}}};i.applySettings=function(e){return function(){if(e){e.apply(this,arguments)}if(this._sPropertyInfoStore&&(!arguments[0]||!arguments[0].hasOwnProperty(this._sPropertyInfoStore))){o.call(this,[],false)}this._oApplySettingsDeferred.resolve(this);return this}};i.initPropertyHelper=function(e,r,t){if(e){this._setPropertyHelperClass(e)}return o.call(this,r,t)};i.updatePropertyHelper=function(e,r){return o.call(this,e,r)};i.finalizePropertyHelper=function(){this._pHelperFinalizationPromise=this._pHelperFinalizationPromise||p(this).then(function(e){return o.call(this,e,true)}.bind(this));return this._pHelperFinalizationPromise};i.isPropertyHelperFinal=function(){return this._bPropertyHelperFinal};i.awaitPropertyHelper=function(){return this._oPropertyHelperDeferred.promise};i.getPropertyHelper=function(){return this._oPropertyHelper};i.exit=function(e){return function(){this._oPropertyHelper=null;this._oPropertyHelperDeferred=null;this._oApplySettingsDeferred=null;this._bPropertyHelperFinal=null;this._bPropertyHelperInitializing=null;this._pHelperFinalizationPromise=null;this._oPropertyHelperClass=null;this._sPropertyInfoStore=null;if(this._oPropertyInfoStoreMutatorOverride){this[this._oPropertyInfoStoreMutatorOverride.key]=this._oPropertyInfoStoreMutatorOverride.mutator;this._oPropertyInfoStoreMutatorOverride=null}if(e){e.apply(this,arguments)}}};i._setupPropertyInfoStore=function(e){var r=this.getMetadata().getAllProperties();var t=r&&r[e];if(!t){throw new Error("PropertyHelperMixin: Property '"+e+"' not found.")}var i=this.getMetadata().getJSONKeys()[e];this._oPropertyInfoStoreMutatorOverride={key:i._sMutator,mutator:this[i._sMutator]};this[i._sMutator]=function(){this._oPropertyInfoStoreMutatorOverride.mutator.apply(this,arguments);if(!this._bPropertyHelperFinal){o.call(this,this[i._sGetter](),false)}return this};this._sPropertyInfoStore=e};i._setPropertyHelperClass=function(e){if(this._oPropertyHelper||this._bPropertyHelperInitializing){throw new Error("PropertyHelper already initializing/ed.")}if(e&&(!e.getMetadata||!e.getMetadata().isA("sap.ui.mdc.util.PropertyHelper"))){throw new Error("The custom property helper class must be sap.ui.mdc.util.PropertyHelper or a subclass of it.")}this._oPropertyHelperClass=e};i._getPropertyByName=function(e){return this._oPropertyHelper&&this._oPropertyHelper.getProperty(e)};i._getPropertyByNameAsync=function(e){var r=this._getPropertyByName(e);if(!r){return this.finalizePropertyHelper().then(function(r){return this._getPropertyByName(e)}.bind(this))}return Promise.resolve(r)};function o(e,r){if(!this.bIsDestroyed){if(this._bPropertyHelperInitializing&&typeof e!=="undefined"){return this._oPropertyHelperDeferred.promise.then(function(){return s.call(this,e,r)}.bind(this))}if(this._oPropertyHelper&&typeof e!=="undefined"){s.call(this,e,r)}if(!this._oPropertyHelper){n.call(this,e,r)}}return this._oPropertyHelperDeferred&&this._oPropertyHelperDeferred.promise}function n(e,r){this._bPropertyHelperInitializing=true;if(r||!e){r=true;this._pHelperFinalizationPromise=this._oPropertyHelperDeferred.promise}var t;return this._oApplySettingsDeferred.promise.then(function(){return this.initControlDelegate()}.bind(this)).then(function(i){t=i;return r?p(this):e}.bind(this)).then(function(e){if(this.bIsDestroyed){return[]}var r=[e];if(t&&typeof t.fetchPropertyExtensions==="function"){return t.fetchPropertyExtensions(this,e).then(function(e){return r.concat(e)})}return r.concat(undefined)}.bind(this)).then(function(e){if(this.bIsDestroyed){return[]}return l(this,t,e[0],e[1]).then(function(r){return e.concat(r)})}.bind(this)).then(function(e){if(this.bIsDestroyed){return undefined}var t=e[0];var i=e[1];var o=e[2];this._oPropertyHelper=new o(t,i,this,undefined,undefined);this._bPropertyHelperInitializing=false;if(r){this._bPropertyHelperFinal=true}return this._oPropertyHelperDeferred.resolve(this._oPropertyHelper)}.bind(this)).catch(function(e){return this._oPropertyHelperDeferred&&this._oPropertyHelperDeferred.reject(e)}.bind(this))}function s(e,r){if(this._bPropertyHelperFinal){throw new Error("This property helper is already final and cannot be updated further.")}this._oPropertyHelper.setProperties(e);this._bPropertyHelperFinal=r||this._bPropertyHelperFinal;return this._oPropertyHelper}function p(e){return e.initControlDelegate().then(function(){return e.getControlDelegate(e).fetchProperties(e)})}function l(e,t,i){if(t&&typeof t.getPropertyHelperClass==="function"){var o=t.getPropertyHelperClass();var n=e._oPropertyHelperClass?e._oPropertyHelperClass.getMetadata().getName():"sap.ui.mdc.util.PropertyHelper";if(!o||!o.getMetadata||!o.getMetadata().isA(n)){throw new Error("The property helper class must be "+n+" or a subclass of it.")}return Promise.resolve(o)}if(e._oPropertyHelperClass){return Promise.resolve(e._oPropertyHelperClass)}return r("sap/ui/mdc/util/PropertyHelper").then(function(e){return e[0]})}return function(){this.init=i.init(this.init);this.exit=i.exit(this.exit);this.applySettings=i.applySettings(this.applySettings);this.initPropertyHelper=i.initPropertyHelper;this.awaitPropertyHelper=i.awaitPropertyHelper;this.getPropertyHelper=i.getPropertyHelper;this.finalizePropertyHelper=i.finalizePropertyHelper;this.isPropertyHelperFinal=i.isPropertyHelperFinal;this._getPropertyByName=i._getPropertyByName;this._getPropertyByNameAsync=i._getPropertyByNameAsync;this._setPropertyHelperClass=i._setPropertyHelperClass;this._setupPropertyInfoStore=i._setupPropertyInfoStore}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/TypeUtil",["sap/ui/mdc/util/TypeUtil","sap/ui/mdc/enum/BaseType","sap/base/util/ObjectPath"],function(e,a,t){"use strict";var d=Object.assign({},e,{getPrimitiveType:function(e){var a={"Edm.Binary":"boolean","Edm.Boolean":"boolean","Edm.Byte":"boolean","Edm.Date":"date","Edm.DateTimeOffset":"dateTime","Edm.Decimal":"int","Edm.Double":"boolean","Edm.Duration":"float","Edm.Guid":"string","Edm.Int16":"int","Edm.Int32":"int","Edm.Int64":"int","Edm.SByte":"boolean","Edm.Single":"float","Edm.String":"string","Edm.TimeOfDay":"time"};return a[e]||"object"},getDataTypeClassName:function(a){var t={"Edm.Boolean":"sap.ui.model.odata.type.Boolean","Edm.Byte":"sap.ui.model.odata.type.Byte","Edm.DateTime":"sap.ui.model.odata.type.DateTime","Edm.DateTimeOffset":"sap.ui.model.odata.type.DateTimeOffset","Edm.Decimal":"sap.ui.model.odata.type.Decimal","Edm.Double":"sap.ui.model.odata.type.Double","Edm.Float":"sap.ui.model.odata.type.Single","Edm.Guid":"sap.ui.model.odata.type.Guid","Edm.Int16":"sap.ui.model.odata.type.Int16","Edm.Int32":"sap.ui.model.odata.type.Int32","Edm.Int64":"sap.ui.model.odata.type.Int64","Edm.SByte":"sap.ui.model.odata.type.SByte","Edm.Single":"sap.ui.model.odata.type.Single","Edm.String":"sap.ui.model.odata.type.String","Edm.Time":"sap.ui.model.odata.type.Time"};if(t[a]){a=t[a]}else if(a&&a.startsWith("Edm.")){throw new Error("Invalid data type "+a)}else{a=e.getDataTypeClassName(a)}return a},getBaseType:function(t,d,i){switch(t){case"sap.ui.model.odata.type.DateTime":if(i&&i.displayFormat==="Date"){return a.Date}else{return a.DateTime}case"sap.ui.model.odata.type.DateTimeOffset":case"sap.ui.model.odata.type.DateTimeWithTimezone":return a.DateTime;case"sap.ui.model.odata.type.Time":return a.Time;case"sap.ui.model.odata.type.Boolean":return a.Boolean;case"sap.ui.model.odata.type.Byte":case"sap.ui.model.odata.type.SByte":case"sap.ui.model.odata.type.Decimal":case"sap.ui.model.odata.type.Int16":case"sap.ui.model.odata.type.Int32":case"sap.ui.model.odata.type.Int64":case"sap.ui.model.odata.type.Single":case"sap.ui.model.odata.type.Double":return a.Numeric;default:return e.getBaseType(t,d,i)}}});return d});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/json/FilterBarDelegate",["sap/ui/mdc/FilterBarDelegate","sap/base/util/merge","sap/ui/mdc/util/IdentifierUtil"],function(e,t,r){"use strict";var i=Object.assign({},e);i._createFilterField=function(e,t,i){var o=i.modifier;var n=e.path||e.name;var a={};if(t.getId){a.id=t.getId()}else{a.id=t.id}var l=o.getControlIdBySelector(a,i.appComponent);var s=l+"--filter--"+r.replace(n);var p;return o.createControl("sap.ui.mdc.FilterField",i.appComponent,i.view,s,{dataType:e.typeConfig.className,conditions:"{$filters>/conditions/"+n+"}",required:e.required,label:e.label,maxConditions:e.maxConditions,delegate:{name:"sap/ui/mdc/field/FieldBaseDelegate",payload:{}}},true).then(function(r){p=r;if(e.fieldHelp){var n=e.fieldHelp;if(i.view.getId){n=i.view.getId()+"--"+e.fieldHelp}else{n=i.viewId+"--"+e.fieldHelp}o.setAssociation(p,"fieldHelp",n)}if(e.filterOperators){if(t.getId){return o.setProperty(p,"operators",e.filterOperators)}else{return o.setProperty(p,"operators",e.filterOperators.join(","))}}}).then(function(){if(e.tooltip){o.setProperty(p,"tooltip",e.tooltip)}if(e.constraints){o.setProperty(p,"dataTypeConstraints",e.constraints)}if(e.formatOptions){o.setProperty(p,"dataTypeFormatOptions",e.formatOptions)}if(e.display){o.setProperty(p,"display",e.display)}return p})};i.addItem=function(e,t,o){return i.fetchProperties().then(function(n){var a=null;n.some(function(t){if(e===r.getPropertyKey(t)){a=t}return a!==null});if(a){return i._createFilterField(a,t,o)}})};i.removeItem=function(e,t,r){return Promise.resolve(true)};i.fetchProperties=function(e){return new Promise(function(e,t){e([])})};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/ChartDelegate",["../../ChartDelegate","../../util/loadModules","../../library","sap/ui/core/Core"],function(e,a,r,t){"use strict";var i=Object.assign({},e);return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/ChartPropertyHelper",["sap/ui/mdc/chart/PropertyHelper","sap/ui/mdc/library"],function(e,t){"use strict";var a=e.extend("sap.ui.mdc.odata.v4.ChartPropertyHelper");a.prototype.prepareProperty=function(t){if(t.groupable){t.availableRoles=this._getLayoutOptionsForType("groupable");t.kind="Groupable"}else if(t.aggregatable){t.availableRoles=this._getLayoutOptionsForType("aggregatable");t.kind="Aggregatable"}if(!t.typeConfig&&t.dataType){var a=t.formatOptions?t.formatOptions:null;var r=t.constraints?t.constraints:{};t.typeConfig=this.getParent().getControlDelegate().getTypeUtil().getTypeConfig(t.dataType,a,r)}e.prototype.prepareProperty.apply(this,arguments)};a.prototype._getLayoutOptionsForType=function(e){var a=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var r={groupable:[{key:t.ChartItemRoleType.category,text:a.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_CATEGORY")},{key:t.ChartItemRoleType.category2,text:a.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_CATEGORY2")},{key:t.ChartItemRoleType.series,text:a.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_SERIES")}],aggregatable:[{key:t.ChartItemRoleType.axis1,text:a.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS1")},{key:t.ChartItemRoleType.axis2,text:a.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS2")},{key:t.ChartItemRoleType.axis3,text:a.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS3")}]};return r[e]};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/FieldBaseDelegate",["sap/ui/mdc/field/FieldBaseDelegate","sap/ui/mdc/odata/v4/TypeUtil"],function(e,t){"use strict";var i=Object.assign({},e);i.getDataTypeClass=function(e,i){return t.getDataTypeClassName(i)};i.getBaseType=function(e,i,a,n){return t.getBaseType(i,a,n)};i.initializeTypeFromBinding=function(e,t,i){var a={};if(t&&(t.isA("sap.ui.model.odata.type.Unit")||t.isA("sap.ui.model.odata.type.Currency"))&&Array.isArray(i)&&i.length>2&&i[2]!==undefined){t.formatValue(i,"string");a.bTypeInitialized=true;a.mCustomUnits=i[2]}return a};i.initializeInternalUnitType=function(e,t,i){if(i&&i.mCustomUnits!==undefined){t.formatValue([null,null,i.mCustomUnits],"string")}};i.enhanceValueForUnit=function(e,t,i){if(i&&i.bTypeInitialized&&t.length===2){t.push(i.mCustomUnits);return t}};i.getDefaultFieldValueHelpDelegate=function(e){return{name:"sap/ui/mdc/odata/v4/FieldValueHelpDelegate",payload:{}}};i.getTypeUtil=function(e){return t};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/FieldValueHelpDelegate",["sap/ui/mdc/field/FieldValueHelpDelegate","sap/ui/model/FilterType","sap/ui/mdc/odata/v4/TypeUtil"],function(e,t,n){"use strict";var r=function(e){return new Promise(function(t){var n=false;var r=function(a){if(a.mParameters.detailedReason){return}if(!n){n=true;e.detachEvent("change",r);t(a)}};e.attachEvent("change",r);e.attachEventOnce("dataReceived",r)})};var a=Object.assign({},e);a.isSearchSupported=function(e,t){return!!t.changeParameters};a.executeSearch=function(e,t,n){if(n){t.changeParameters({$search:n})}else{t.changeParameters({$search:undefined})}return r(t)};a.executeFilter=function(e,n,a,i,u){var c=r(n).then(function e(t){i()});n.initialize();n.filter(a,t.Application);n.getContexts(0,u);return c};a.checkBindingsPending=function(e,t){var n=[];for(var r=0;r<t.length;r++){var a=t[r];if(a&&a.requestValue){n.push(a.requestValue())}}if(n.length>0){return Promise.all(n)}return null};a.checkListBindingPending=function(e,t,n){if(!t||t.isSuspended()){return false}return t.requestContexts(0,n&&n.length).then(function(e){return e.length>0})};a.getTypeUtil=function(e){return n};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/FilterBarDelegate",["./ODataMetaModelUtil","sap/ui/mdc/enum/FieldDisplay","sap/ui/fl/Utils","sap/ui/mdc/FilterBarDelegate","sap/base/util/ObjectPath","sap/base/util/merge","sap/ui/mdc/odata/v4/TypeUtil","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/ui/mdc/util/IdentifierUtil","sap/ui/core/util/reflection/JsControlTreeModifier","sap/base/Log"],function(e,t,r,a,i,n,o,s,l,p,u,f,c){"use strict";var d=Object.assign({},a);var m={"Edm.Boolean":"Bool","Edm.Byte":"Int","Edm.DateTime":"Date","Edm.DateTimeOffset":"DateTimeOffset","Edm.Decimal":"Decimal","Edm.Double":"Float","Edm.Float":"Float","Edm.Guid":"Guid","Edm.Int16":"Int","Edm.Int32":"Int","Edm.Int64":"Int","Edm.SByte":"Int","Edm.Single":"Float","Edm.String":"String","Edm.Time":"TimeOfDay"};var v=new Map;d._fetchPropertiesByMetadata=function(e,t){var r,a,i,n,o;return Promise.resolve().then(function(){if(t){var o=t.modifier;return Promise.resolve().then(o.getProperty.bind(o,e,"delegate")).then(function(e){a=e.payload.modelName===null?undefined:e.payload.modelName;i=e.payload.collectionName;n=t.appComponent.getModel(a)})}r=e.getProperty("delegate");a=r.payload.modelName===null?undefined:r.payload.modelName;i=r.payload.collectionName;n=e.getModel(a)}).then(function(){o=e.getId?e.getId():e.id;var r={getDelegate:function(){return{payload:{modelName:a,collectionName:i}}},getModel:function(e){return n},getId:function(){return o}};return t?this.fetchProperties(r):Promise.resolve(e.getPropertyHelper().getProperties())}.bind(this))};d._ensureSingleRangeEQOperators=function(){var e;if(!s.getOperator("SINGLE_RANGE_EQ")){e=n({},s.getOperator("EQ"));e.name="SINGLE_RANGE_EQ";e.getModelFilter=function(e,t){return new p({filters:[new p(t,l.GE,e.values[0]),new p(t,l.LE,e.values[0])],and:true})};s.addOperator(e)}if(!s.getOperator("SINGLE_RANGE_EQ")){e=n({},s.getOperator("EQ"));e.name="SINGLE_RANGE_EQ";e.getModelFilter=function(e,t){return new p({filters:[new p(t,l.GE,e.values[0]),new p(t,l.LE,e.values[0])],and:true})};s.addOperator(e)}};d._ensureMultiRangeBTEXOperator=function(){if(!s.getOperator("MULTI_RANGE_BTEX")){var e=n({},s.getOperator("BT"));e.name="MULTI_RANGE_BTEX";e.getModelFilter=function(e,t){return new p({filters:[new p(t,l.GT,e.values[0]),new p(t,l.LT,e.values[1])],and:true})};s.addOperator(e)}};d._getFilterOperators=function(e){var t=null,r=null;switch(e){case"SingleValue":case"MultiValue":t="EQ";break;case"SingleRange":t="SINGLE_RANGE_EQ,SINGLE_RANGE_EQ,LE,GE";this._ensureSingleRangeEQOperators();break;case"MultiRange":t="EQ,LE,LT,GE,GT,BT,MULTI_RANGE_BTEX";this._ensureMultiRangeBTEXOperator();break;case"SearchExpression":t="StartsWith,EndsWith,Contains";break;case"MultiRangeOrSearchExpression":t="StartsWith,EndsWith,Contains,EQ,LE,LT,GE,GT,BT,MULTI_RANGE_BTEX";this._ensureMultiRangeBTEXOperator();break;default:break}if(t){r=t.split(",")}return r};d._createFilterField=function(e,t,a){var i=a?a.modifier:f;var n=a?a.appComponent:r.getAppComponentForControl(t);var o=a&&a.view?a.view:r.getViewForControl(t);var s=a?a.viewId:null;var l=e.path||e.name;var p={};if(t.getId){p.id=t.getId()}else{p.id=t.id}var c=i.getControlIdBySelector(p,n);var d=c+"--filter--"+u.replace(l);var m=sap.ui.getCore().byId(d);if(m){return Promise.resolve(m)}return Promise.resolve().then(i.createControl.bind(i,"sap.ui.mdc.FilterField",n,o,d,{dataType:e.typeConfig.className,conditions:"{$filters>/conditions/"+l+"}",required:e.required,label:e.label||e.name,maxConditions:e.maxConditions,delegate:{name:"sap/ui/mdc/odata/v4/FieldBaseDelegate",payload:{}}})).then(function(r){if(e.fieldHelp){var a=e.fieldHelp;if(!s){a=o.createId(e.fieldHelp)}else{a=s+"--"+e.fieldHelp}i.setAssociation(r,"fieldHelp",a)}if(e.filterOperators){if(t.getId){i.setProperty(r,"operators",e.filterOperators)}else{i.setProperty(r,"operators",e.filterOperators.join(","))}}if(e.tooltip){i.setProperty(r,"tooltip",e.tooltip)}if(e.constraints){i.setProperty(r,"dataTypeConstraints",e.constraints)}if(e.formatOptions){i.setProperty(r,"dataTypeFormatOptions",e.formatOptions)}if(e.display){i.setProperty(r,"display",e.display)}return r})};d._createFilter=function(e,t,r){return this._fetchPropertiesByMetadata(t,r).then(function(a){var i=a.find(function(t){return u.getPropertyKey(t)===e});if(!i){return null}return Promise.resolve(this._createFilterField(i,t,r))}.bind(this))};d.addItem=function(e,t,r){return Promise.resolve(this._createFilter(e,t,r))};d._getInstanceCacheEntry=function(e,t){var r=e.getId&&e.getId()||e.id;var a=v.get(r);return a&&a[t]};d._setInstanceCacheEntry=function(e,t,r){var a=e.getId&&e.getId()||e.id;var i=v.get(a)||{};i[t]=r;v.set(a,i)};d._addPropertyInfoEntry=function(e,t,r,a,i){if(a){var n=a.findIndex(function(e){return e.name===t});if(n>=0){r.push({name:t,dataType:a[n].typeConfig.className,maxConditions:a[n].maxConditions,constraints:a[n].constraints,formatOption:a[n].formatOptions,required:a[n].required,caseSensitive:a[n].caseSensitive,display:a[n].display,label:a[n].label,hiddenFilter:a[n].hiddenFilter});i.setProperty(e,"propertyInfo",r)}else{c.error("ConditionFlex-ChangeHandler: no type info for property '"+t+"'")}}};d._updatePropertyInfo=function(e,t,r){if(t.isA&&t.isA("sap.ui.mdc.FilterBar")){return Promise.resolve()}var a=r.modifier;return a.getProperty(t,"propertyInfo").then(function(i){if(!i){return Promise.resolve()}var n=i.findIndex(function(t){return t.name===e});if(n<0){var o=d._getInstanceCacheEntry(t,"fetchedProperties");if(o){d._addPropertyInfoEntry(t,e,i,o,a)}else{return d.fetchProperties(t,r).then(function(r){d._setInstanceCacheEntry(t,"fetchedProperties",r);d._addPropertyInfoEntry(t,e,i,r,a)})}}})};d.addCondition=function(e,t,r){return d._updatePropertyInfo(e,t,r)};d.removeCondition=function(e,t,r){return d._updatePropertyInfo(e,t,r)};d.removeItem=function(e,t,r){return Promise.resolve(true)};d._getFieldGroupsByFilterFacetsAnnotation=function(e,t){};d._getNavigationPropertyForParameter=function(e){var t;for(var r in e){t=e[r];if(t){if(t.$kind==="NavigationProperty"){return r}}}return null};d._fetchPropertyInfo=function(e,r,a,i,n){var s=e.getObject(r+"/"+"@com.sap.vocabularies.UI.v1.TextArrangement");var l=false;if(e.getObject(r+"/"+n+"@com.sap.vocabularies.UI.v1.HiddenFilter")){l=true}var p=false;if(e.getObject(r+"/"+n+"@com.sap.vocabularies.Common.v1.IsDigitSequence")){p=true}var u=null;var f=e.getObject(r+"/"+n+"@com.sap.vocabularies.Common.v1.FilterDefaultValue");if(f){var c=f["$"+m[i.$Type]];switch(i.$Type){case"Edm.DateTimeOffset":u=c;break;default:u=c}}var d=false;if(e.getObject(r+"/"+n+"@com.sap.vocabularies.Common.v1.IsUpperCase")){d=true}var v=e.getObject(r+"/"+n+"@com.sap.vocabularies.Common.v1.Label")||n;var g=e.getObject(r+"/"+n+"@com.sap.vocabularies.Common.v1.QuickInfo")||null;var y={};if(i.$MaxLength||i.$Precision||i.$Scale||p){if(i.$MaxLength){y.maxLength=i.$MaxLength}if(i.$Precision){y.precision=i.$Precision}if(i.$Scale){y.scale=i.$Scale}if(p){y.isDigitSequence=p}}else{y=null}var h,E=e.getObject(r+"/"+n+"@com.sap.vocabularies.Common.v1.Text");if(E){var P=e.getObject(r+"/"+n+"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement")||s;if(P){if(P.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){h=t.Description}else if(P.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"){h=t.ValueDescription}else{h=t.DescriptionValue}}else{h=t.DescriptionValue}}var b={name:n,label:v,tooltip:g,hiddenFilter:l,caseSensitive:!d};if(h){b.display=h}if(y){b.constraints=y}if(u){b.defaultFilterConditions=[{fieldPath:n,operator:"EQ",values:[u]}]}b.name=a?a+"/"+n:n;b.typeConfig=o.getTypeConfig(i.$Type,b.formatOptions,b.constraints);return b};d._fetchEntitySet=function(t,r,a,i,o){return Promise.all([t.requestObject(r+"/"),t.requestObject(r+"@")]).then(function(s){var l=s[0];var p=s[1]||{};if(!l){return Promise.resolve([])}var u,f,m=[],v=[],g=[],y=[],h=[],E={},P={},b=false;var O=t.getObject(r);if(O&&O.$NavigationPropertyBinding){P=O.$NavigationPropertyBinding}var I=p["@Org.OData.Capabilities.V1.FilterRestrictions"];if(I){if(I.NonFilterableProperties){g=I.NonFilterableProperties.map(function(e){return e.$PropertyPath})}if(I.RequiredProperties){y=I.RequiredProperties.map(function(e){return e.$PropertyPath})}if(I.FilterExpressionRestrictions){I.FilterExpressionRestrictions.forEach(function(e){E[e.Property.$PropertyPath]=e.AllowedExpressions})}}I=t.getObject(r+"/"+"@com.sap.vocabularies.UI.v1.SelectionFields");if(I){h=I.map(function(e){return e.$PropertyPath})}var _=t.getObject(r+"/@sapui.name");var C=_;var T=t.getObject(r+"@com.sap.vocabularies.Common.v1.Label");if(!T){T=C.split(".")[1]}a.push(_);I=t.getObject(r+"/"+"@com.sap.vocabularies.Common.v1.ResultContext");if(I){b=true;o.parameterNavigationName=d._getNavigationPropertyForParameter(l)}if(!i){var F=_.split(".");o.parameterEntityType=F[F.length-1]}for(var x in l){u=l[x];if(u){if(b&&x==="$Key"){o.parameters=n([],u)}else if(u.$kind==="Property"){if(g.indexOf(x)>=0){continue}if(t.getObject(r+"/"+x+"@com.sap.vocabularies.UI.v1.Hidden")){continue}if(u.$isCollection){c.warning("Complex property with type "+u.$Type+" has been ignored");continue}f=d._fetchPropertyInfo(t,r,i,u,x,o);if(f){f.group=C;f.groupLabel=T;f.required=y.indexOf(x)>=0;f.visible=h.indexOf(x)>=0;if(E[x]){var N=d._getFilterOperators(E[x]);if(N){f.filterOperators=N}}f.maxConditions=e.isMultiValueFilterExpression(E[x])?-1:1;if(b&&o&&o.parameters.indexOf(x)>-1){f.path=null;f.name=x;f.required=true;o.parameterTypes[x]=u.$Type;m.push(f)}else if(!b){m.push(f)}}}else if(!b&&u.$kind==="NavigationProperty"&&!u.$isCollection){var M=P[x];if(M&&a.indexOf(u.$Type)===-1){v.push(d._fetchEntitySet(t,"/"+M,a,x,o))}}}}return Promise.all(v).then(function(e){e.forEach(function(e){m=m.concat(e)});return m})})};d._waitForMetaModel=function(e,t){return new Promise(function(r,a){var i=function(){var a=t===null?undefined:t;var i=e.getModel(a);if(i){r(i)}return i};var n=function(){if(i()){e.detachModelContextChange(n)}};if(!i()){if(!e.attachModelContextChange){a();return}e.attachModelContextChange(n)}})};d.fetchProperties=function(e,t){if(!(e.isA&&e.isA("sap.ui.mdc.FilterBar"))&&t){return d._fetchPropertiesByMetadata(e,t)}var r=e.getDelegate().payload.modelName;var a=e.getDelegate().payload.collectionName;return new Promise(function(t,i){var n;var o=d._getInstanceCacheEntry(e,"fetchedProperties");if(o){t(o);return}this._waitForMetaModel(e,r).then(function(r){if(!r||!a){i("model or entity set name not available");return}n=r.getMetaModel();if(!n){i("metadata model not available")}else{var o=[];var s={parameterNavigationName:null,parameters:[],parameterTypes:{}};d._fetchEntitySet(n,"/"+a,o,null,s).then(function(r){if(s.parameterNavigationName&&s.parameters.length>0){d._setInstanceCacheEntry(e,a+"-Parameters",s);r.sort(function(e,t){var r=e.path||e.name;var a=t.path||t.name;if(!(s.parameters.indexOf(r)>-1)&&!(s.parameters.indexOf(a)>-1)||s.parameters.indexOf(r)>-1&&s.parameters.indexOf(a)>-1){return 0}if(s.parameters.indexOf(r)>-1&&!(s.parameters.indexOf(a)>-1)){return-1}if(!(s.parameters.indexOf(r)>-1)&&s.parameters.indexOf(a)>-1){return 1}})}var i=r.reduce(function(e,t){e[t.name]=t;return e},{});r=Object.keys(i).map(function(e){return i[e]});d._setInstanceCacheEntry(e,"fetchedProperties",r);t(r)})}},function(){i("model not obtained")})}.bind(this))};d.cleanup=function(e){v.delete(e.getId())};d.getTypeUtil=function(e){return o};return d});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/ODataMetaModelUtil",["sap/ui/mdc/util/TypeUtil"],function(e){"use strict";var r=function(){};r.fetchAllAnnotations=function(e,r){var t=e.getMetaContext(r);return e.requestObject("@",t).then(function(e){return e})};r.getAllCustomAggregates=function(e){var r={},t;for(var a in e){if(a.startsWith("@Org.OData.Aggregation.V1.CustomAggregate")){t=a.replace("@Org.OData.Aggregation.V1.CustomAggregate#","");var i=t.split("@");if(i.length==2){if(i[1]=="Org.OData.Aggregation.V1.ContextDefiningProperties"){r[i[0]].contextDefiningProperties=e[a]}if(i[1]=="com.sap.vocabularies.Common.v1.Label"){r[i[0]].label=e[a]}}else if(i.length==1){r[i[0]]={name:i[0],propertyPath:i[0],label:"Custom Aggregate ("+t+")",sortable:true,sortOrder:"both",custom:true}}}}return r};r.getAllAggregatableProperties=function(e){var r={},t,a;if(e["@com.sap.vocabularies.Analytics.v1.AggregatedProperties"]){t=e["@com.sap.vocabularies.Analytics.v1.AggregatedProperties"];for(var i=0;i<t.length;i++){a=t[i];r[a.Value]={name:a.Value,propertyPath:a.AggregatableProperty.$PropertyPath,aggregationMethod:a.AggregationMethod,label:a["@com.sap.vocabularies.Common.v1.Label"]||"Aggregatable property ("+a.Value+")",sortable:true,sortOrder:"both",custom:false}}}return r};r.getAllDataPoints=function(e){var t={};for(var a in e){if(a.startsWith("@com.sap.vocabularies.UI.v1.DataPoint")){var i=a.replace("@com.sap.vocabularies.UI.v1.DataPoint#","");var n=e[a].Value.$Path;t[n]=t[n]||{};t[n][i]=r.createDataPointProperty(e[a])}}return t};r.createDataPointProperty=function(e){var t={};if(e.TargetValue){t.targetValue=e.TargetValue.$Path}if(e.ForeCastValue){t.foreCastValue=e.ForeCastValue.$Path}var a=null;if(e.Criticality){if(e.Criticality.$Path){a={Calculated:e.Criticality.$Path}}else{a={Static:e.Criticality.$EnumMember.replace("com.sap.vocabularies.UI.v1.CriticalityType/","")}}}else if(e.CriticalityCalculation){var i={};var n=r._buildThresholds(i,e.CriticalityCalculation);if(n){a={ConstantThresholds:i}}else{a={DynamicThresholds:i}}}if(a){t.criticality=a}return t};r._buildThresholds=function(e,r){var t=["AcceptanceRangeLowValue","AcceptanceRangeHighValue","ToleranceRangeLowValue","ToleranceRangeHighValue","DeviationRangeLowValue","DeviationRangeHighValue"];var a=true,i;e.ImprovementDirection=r.ImprovementDirection.$EnumMember.replace("com.sap.vocabularies.UI.v1.ImprovementDirectionType/","");var n={oneSupplied:false,usedMeasures:[]};var l={oneSupplied:false};for(var s=0;s<t.length;s++){i=t[s];n[i]=r[i]?r[i].$Path:undefined;n.oneSupplied=n.oneSupplied||n[i];if(!n.oneSupplied){l[i]=r[i];l.oneSupplied=l.oneSupplied||l[i]}else if(n[i]){n.usedMeasures.push(n[i])}}if(n.oneSupplied){a=false;for(var s=0;s<t.length;s++){if(n[t[s]]){e[t[s]]=n[t[s]]}}e.usedMeasures=n.usedMeasures}else{var o;e.AggregationLevels=[];if(l.oneSupplied){o={VisibleDimensions:null};for(var s=0;s<t.length;s++){if(l[t[s]]){o[t[s]]=l[t[s]]}}e.AggregationLevels.push(o)}if(r.ConstantThresholds&&r.ConstantThresholds.length>0){for(var s=0;s<r.ConstantThresholds.length;s++){var u=r.ConstantThresholds[s];var c=u.AggregationLevel?[]:null;if(u.AggregationLevel&&u.AggregationLevel.length>0){for(var f=0;f<u.AggregationLevel.length;f++){c.push(u.AggregationLevel[f].$PropertyPath)}}o={VisibleDimensions:c};for(var f=0;f<t.length;f++){var g=u[t[f]];if(g){o[t[f]]=g}}e.AggregationLevels.push(o)}}}return a};r.getSortRestrictionsInfo=function(e){var r,t,a={sortable:true,propertyInfo:{}};if(e){a.sortable=e.Sortable!=null?e.Sortable:true;if(e.NonSortableProperties){for(r=0;r<e.NonSortableProperties.length;r++){t=e.NonSortableProperties[r].$PropertyPath;a[t]={sortable:false}}}if(e.AscendingOnlyProperties){for(r=0;r<e.AscendingOnlyProperties;r++){t=e.AscendingOnlyProperties[r].$PropertyPath;a[t]={sortable:true,sortDirection:"asc"}}}if(e.AscendingOnlyProperties){for(r=0;r<e.DescendingOnlyProperties;r++){t=e.DescendingOnlyProperties[r].$PropertyPath;a[t]={sortable:true,sortDirection:"desc"}}}}return a};r.addSortInfoForProperty=function(e,r){var t=r[e.name];e.sortable=r.sortable&&t?t.sortable:true;if(e.sortable){e.sortDirection=t?t.sortDirection:"both"}};r.getFilterRestrictionsInfo=function(e){var r,t,a={filterable:true,propertyInfo:{}};if(e){a.filterable=e.Filterable!=null?e.Filterable:true;a.requiresFilter=e.RequiresFilter!=null?e.RequiresFilter:false;a.requiredProperties=[];if(a.RequiredProperties){for(r=0;r<e.NonFilterableProperties;r++){t=e.NonFilterableProperties[r].$PropertyPath;a.requiredProperties.push(t)}}if(e.NonFilterableProperties){for(r=0;r<e.NonFilterableProperties.length;r++){t=e.NonFilterableProperties[r].$PropertyPath;a[t]={filterable:false}}}if(e.FilterExpressionRestrictions){for(r=0;r<e.FilterExpressionRestrictions;r++){t=e.FilterExpressionRestrictions[r].$PropertyPath;a[t]={filterable:true,allowedExpressions:e.FilterExpressionRestrictions[r].AllowedExpressions}}}}return a};r.isMultiValueFilterExpression=function(e){var r=true;switch(e){case"SearchExpression":case"SingleRange":case"SingleValue":r=false;break;default:break}return r};r.addFilterInfoForProperty=function(e,r){var t=r[e.name];e.filterable=r.filterable&&t?t.filterable:true;if(e.filterable){e.allowedExpressions=t?t.allowedExpressions:null}};r.fetchCalendarTag=function(e,r){var t="@com.sap.vocabularies.Common.v1.";return Promise.all([e.requestObject(t+"IsCalendarYear",r),e.requestObject(t+"IsCalendarHalfyear",r),e.requestObject(t+"IsCalendarQuarter",r),e.requestObject(t+"IsCalendarMonth",r),e.requestObject(t+"IsCalendarWeek",r),e.requestObject(t+"IsDayOfCalendarMonth",r),e.requestObject(t+"IsDayOfCalendarYear",r),e.requestObject(t+"IsCalendarYearHalfyear",r),e.requestObject(t+"IsCalendarYearQuarter",r),e.requestObject(t+"IsCalendarYearMonth",r),e.requestObject(t+"IsCalendarYearWeek",r),e.requestObject(t+"IsCalendarDate",r)]).then(function(e){if(e[0]){return"year"}if(e[1]){return"halfYear"}if(e[2]){return"quarter"}if(e[3]){return"month"}if(e[4]){return"week"}if(e[5]){return"dayOfMonth"}if(e[6]){return"dayOfYear"}if(e[7]){return"yearHalfYear"}if(e[8]){return"yearQuarter"}if(e[9]){return"yearMonth"}if(e[10]){return"yearWeek"}if(e[11]){return"date"}return undefined})};r.fetchFiscalTag=function(e,r){var t="@com.sap.vocabularies.Common.v1.";return Promise.all([e.requestObject(t+"IsFiscalYear",r),e.requestObject(t+"IsFiscalPeriod",r),e.requestObject(t+"IsFiscalYearPeriod",r),e.requestObject(t+"IsFiscalQuarter",r),e.requestObject(t+"IsFiscalYearQuarter",r),e.requestObject(t+"IsFiscalWeek",r),e.requestObject(t+"IsFiscalYearWeek",r),e.requestObject(t+"IsDayOfFiscalYear",r),e.requestObject(t+"IsFiscalYearVariant",r)]).then(function(e){if(e[0]){return"year"}if(e[1]){return"period"}if(e[2]){return"yearPeriod"}if(e[3]){return"quarter"}if(e[4]){return"yearQuarter"}if(e[5]){return"week"}if(e[6]){return"yearWeek"}if(e[7]){return"dayOfYear"}if(e[8]){return"yearVariant"}return undefined})};r.fetchCriticality=function(e,r){var t="@com.sap.vocabularies.UI.v1";return e.requestObject(t+".ValueCriticality",r).then(function(e){var r,t;if(e){r={VeryPositive:[],Positive:[],Critical:[],VeryNegative:[],Negative:[],Neutral:[]};for(var a=0;a<e.length;a++){t=e[a];if(t.Criticality.$EnumMember.endsWith("VeryPositive")){r.VeryPositive.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("Positive")){r.Positive.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("Critical")){r.Critical.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("VeryNegative")){r.VeryNegative.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("Negative")){r.Negative.push(t.Value)}else{r.Neutral.push(t.Value)}}for(var i in r){if(r[i].length==0){delete r[i]}}}return r})};return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/TableDelegate",["../../TableDelegate","../../table/V4AnalyticsPropertyHelper","../../util/loadModules","../../library","sap/m/ColumnPopoverSelectListItem","sap/m/MessageBox","sap/ui/core/Item","sap/ui/core/Core","sap/ui/core/library","sap/ui/core/format/ListFormat","sap/ui/base/ManagedObjectObserver"],function(e,t,r,n,o,a,i,s,u,g,l){"use strict";var f=n.TableType;var p=n.TableP13nMode;var c=new window.WeakMap;var d=Object.assign({},e);d.getPropertyHelperClass=function(){return t};d.fetchPropertyExtensions=function(e,t){return Promise.resolve(null)};d.fetchPropertiesForBinding=function(e){return this.fetchProperties(e)};d.fetchPropertyExtensionsForBinding=function(e,t){return this.fetchPropertyExtensions(e,t)};d.preInit=function(e){if(!c.has(e)){c.set(e,{})}return G(e).then(function(){y(e)})};d.validateState=function(t,r,n){var o=e.validateState.apply(this,arguments);var a;var i=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");if(n=="Sort"&&r.sorters){if(N(t)&&!E(t,r.items,r.sorters)){a={validation:u.MessageType.Information,message:i.getText("table.PERSONALIZATION_DIALOG_SORT_RESTRICTION")}}}else if(n=="Group"&&r.aggregations){var s=Object.keys(r.aggregations);var l=[];var f=g.getInstance();s.forEach(function(e){var r=t.getPropertyHelper().getProperty(e);if(r&&r.groupable){l.push(e)}});if(l.length){a={validation:u.MessageType.Information,message:i.getText("table.PERSONALIZATION_DIALOG_GROUP_RESTRICTION",[f.format(l)])}}}else if(n=="Column"){var p;var s=r.aggregations&&Object.keys(r.aggregations);if(!E(t,r.items,s)){p=i.getText("table.PERSONALIZATION_DIALOG_TOTAL_RESTRICTION")}if(N(t)&&!E(t,r.items,r.sorters)){p=p?p+"\n"+i.getText("table.PERSONALIZATION_DIALOG_SORT_RESTRICTION"):i.getText("table.PERSONALIZATION_DIALOG_SORT_RESTRICTION")}if(p){a={validation:u.MessageType.Information,message:p}}}return O(o,a)};d.updateBinding=function(e,t,r){if(!r||r.getPath()!=t.path){this.rebind(e,t);return}var n=r.getRootBinding();var o=n&&!n.isSuspended();try{if(o){n.suspend()}y(e,t);r.changeParameters(t.parameters);r.filter(t.filters,"Application");r.sort(t.sorter)}catch(a){this.rebind(e,t);if(n==r){o=false}}finally{if(o&&n.isSuspended()){n.resume()}}};d.rebind=function(t,r){y(t,r);e.rebind(t,r)};d.addColumnMenuItems=function(e,t){var r=e.getPropertyHelper();var n=r.getProperty(t.getDataProperty());var o=[];if(!n){return[]}if(e.isGroupingEnabled()){var a=n.getGroupableProperties();if(a.length>0){o.push(T(a,t))}}if(e.isAggregationEnabled()){var i=n.getAggregatableProperties();if(i.length>0){o.push(m(i,t))}}var u=e._oPopover;if(u){u.getItems().forEach(function(e,t,r){var n=e.getLabel();var o=s.getLibraryResourceBundle("sap.ui.mdc");if(n===o.getText("table.SETTINGS_GROUP")||n===o.getText("table.SETTINGS_TOTALS")){r[t].destroy()}if(r.length==0){u.destroy()}})}return o};d.getSupportedP13nModes=function(t){var r=e.getSupportedP13nModes(t);if(t._getStringType()===f.Table){if(!r.includes(p.Group)){r.push(p.Group)}if(!r.includes(p.Aggregate)){r.push(p.Aggregate)}}return r};function T(e,t){var r=e.map(function(e){return new i({text:e.label,key:e.name})});if(r.length>0){return new o({items:r,label:s.getLibraryResourceBundle("sap.ui.mdc").getText("table.SETTINGS_GROUP"),icon:"sap-icon://group-2",action:[{sName:"Group",oMDCColumn:t},v,this]})}}function m(e,t){var r=e.map(function(e){return new i({text:e.label,key:e.name})});if(r.length>0){return new o({items:r,label:s.getLibraryResourceBundle("sap.ui.mdc").getText("table.SETTINGS_TOTALS"),icon:"sap-icon://sum",action:[{sName:"Aggregate",oMDCColumn:t},v,this]})}}function v(e,t){var r=t.sName,n=t.oMDCColumn.getParent(),o=n.getCurrentState().groupLevels||[],i=n.getCurrentState().aggregations||{},u=Object.keys(i),g=false,l=e.getParameter("property"),f=r==="Aggregate"?o:u,p=f.filter(function(e){return r==="Aggregate"?e.name===l:e===l}).length>0;if(p){var c=s.getLibraryResourceBundle("sap.ui.mdc");var d;var T;var m;if(r==="Aggregate"){d=c.getText("table.SETTINGS_WARNING_TITLE_TOTALS");T=c.getText("table.SETTINGS_MESSAGE2");m=c.getText("table.SETTINGS_WARNING_BUTTON_TOTALS")}else{d=c.getText("table.SETTINGS_WARNING_TITLE_GROUPS");T=c.getText("table.SETTINGS_MESSAGE1");m=c.getText("table.SETTINGS_WARNING_BUTTON_GROUP")}g=true;a.warning(T,{id:n.getId()+"-messageBox",title:d,actions:[m,c.getText("table.SETTINGS_WARNING_BUTTON_CANCEL")],onClose:function(e){if(e===m){P(r,n,l)}}})}if(r==="Aggregate"&&!g){b(r,n,l)}else if(r==="Group"&&!g){b(r,n,l)}}function b(e,t,r){if(e==="Group"){t._onCustomGroup(r)}else{t._onCustomAggregate(r)}}function P(e,t,r){if(e==="Aggregate"){t._onCustomGroup(r);t._onCustomAggregate(r)}else if(e==="Group"){t._onCustomAggregate(r);t._onCustomGroup(r)}}function y(e,t){var r=c.get(e).plugin;if(!r||r.isDestroyed()){return}var n=e._getGroupedProperties().map(function(e){return e.name});var o=Object.keys(e._getAggregatedProperties());var a=t?t.parameters["$search"]:undefined;if(a){delete t.parameters["$search"]}var i={visible:I(e),groupLevels:n,grandTotal:o,subtotals:o,columnState:S(e,o),search:a};r.setAggregationInfo(i)}function I(e){var t=new Set;var r=c.get(e).oPropertyHelperForBinding;e.getColumns().forEach(function(e){var n=r.getProperty(e.getDataProperty());if(!n){return}if(n.isComplex()){n.getReferencedProperties().forEach(function(e){t.add(e.name)})}else{t.add(n.name)}});return Array.from(t)}function S(e,t){var r={};e.getColumns().forEach(function(n){var o=n.getId()+"-innerColumn";var a=_(e,n,t);var i=a.length>0;if(o in r){r[o].subtotals=i||r[o].subtotals;r[o].grandTotal=i||r[o].grandTotal;return}r[o]={subtotals:i,grandTotal:i};A(e,a).forEach(function(e){o=e.getId()+"-innerColumn";if(o in r){r[o].subtotals=i||r[o].subtotals;r[o].grandTotal=i||r[o].grandTotal}else{r[o]={subtotals:i,grandTotal:i}}})});return r}function h(e,t){var r=e.getPropertyHelper().getProperty(t.getDataProperty());if(!r){return[]}else if(r.isComplex()){return r.getReferencedProperties()}else{return[r]}}function _(e,t,r){return h(e,t).filter(function(e){return r.includes(e.name)})}function A(e,t){var r=[];t.forEach(function(e){if(e.unitProperty){r.push(e.unitProperty)}});return e.getColumns().filter(function(t){return h(e,t).some(function(e){return r.includes(e)})})}function E(e,t,r){var n,o=[];t&&t.forEach(function(t){n=e.getPropertyHelper().getProperty(t.name);if(!n.isComplex()){o.push(n.name)}else{n.getReferencedProperties().forEach(function(e){o.push(e.name)})}});var a=r?r.every(function(e){return o.find(function(t){return e.name?e.name===t:e===t})}):true;return a}function O(e,t){var r={Error:1,Warning:2,Information:3,None:4};if(!t||r[t.validation]-r[e.validation]>0){return e}else{return t}}function N(e){return(e.isGroupingEnabled()||e.isAggregationEnabled())&&e._isOfType(f.Table)}function G(e){if(e._isOfType(f.Table)){return(N(e)?C(e):R(e)).then(function(){return x(e)})}return Promise.resolve()}function C(e){var t=c.get(e);var n=t.plugin;if(n&&!n.isDestroyed()){n.activate();return Promise.resolve()}return Promise.all([e.awaitPropertyHelper(),r("sap/ui/table/plugins/V4Aggregation")]).then(function(r){var o=r[1][0];var a=e.getControlDelegate();n=new o({groupHeaderFormatter:function(t,r){return a.formatGroupHeader(e,t,r)}});e._oTable.addDependent(n);t.plugin=n;return L(e)}).then(function(e){n.setPropertyInfos(e.getProperties())})}function R(e){var t=c.get(e);if(t.plugin){t.plugin.deactivate()}return Promise.resolve()}function L(e){var t=c.get(e);if(t.oPropertyHelperForBinding){return Promise.resolve(t.oPropertyHelperForBinding)}var r=e.getControlDelegate();var n;var o;return r.fetchPropertiesForBinding(e).then(function(t){n=t;return r.fetchPropertyExtensionsForBinding(e,n)}).then(function(e){o=e;return r.getPropertyHelperClass()}).then(function(r){t.oPropertyHelperForBinding=new r(n,o,e);return t.oPropertyHelperForBinding})}function x(e){var t=c.get(e);if(!t.observer){t.observer=new l(function(r){if(r.type==="destroy"){if(t.oPropertyHelperForBinding){t.oPropertyHelperForBinding.destroy()}}else{G(e)}});t.observer.observe(e,{properties:["p13nMode"],destroy:true})}}return d});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/TypeUtil",["sap/ui/mdc/odata/TypeUtil","sap/ui/mdc/enum/BaseType","sap/base/util/merge"],function(e,a,t){"use strict";var s=Object.assign({},e);s.getBaseType=function(t,s,r){switch(t){case"sap.ui.model.odata.type.Date":return a.Date;case"sap.ui.model.odata.type.TimeOfDay":return a.Time;case"sap.ui.model.odata.type.Unit":case"sap.ui.model.odata.type.Currency":if(!s||(!s.hasOwnProperty("showMeasure")||s.showMeasure)&&(!s.hasOwnProperty("showNumber")||s.showNumber)){return a.Unit}else if(!s.hasOwnProperty("showNumber")||s.showNumber){return a.Numeric}else{return a.String}default:return e.getBaseType(t,s,r)}};s.getDataTypeClassName=function(a){var t={"Edm.Date":"sap.ui.model.odata.type.Date","Edm.TimeOfDay":"sap.ui.model.odata.type.TimeOfDay"};if(t[a]){a=t[a]}else{a=e.getDataTypeClassName(a)}return a};s.getDataTypeInstance=function(e,a,s){switch(e){case"sap.ui.model.odata.type.DateTimeOffset":case"Edm.DateTimeOffset":s=t({},s);s.V4=true;break;default:}var r=this.getDataTypeClass(e);return new r(a,s)};return s});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/ValueHelpDelegate",["../../ValueHelpDelegate","sap/ui/model/FilterType","sap/ui/mdc/odata/v4/TypeUtil","sap/ui/mdc/condition/ConditionConverter"],function(e,t,n,i){"use strict";var r=Object.assign({},e);r.isSearchSupported=function(e,t,n){return!!n.changeParameters};var a=function(e){return new Promise(function(t){var n=false;var i=function(r){if(r.mParameters.detailedReason){return}if(!n){n=true;e.detachEvent("change",i);t(e)}};e.attachEvent("change",i);e.attachEventOnce("dataReceived",i)})};r.executeSearch=function(e,t,n){if(n){t.changeParameters({$search:n})}else{t.changeParameters({$search:undefined})}return a(t)};r.executeFilter=function(e,n,i,r){n.initialize();n.filter(i,t.Application);n.getContexts(0,r);return a(n)};r.checkBindingsPending=function(e,t){var n=[];for(var i=0;i<t.length;i++){var r=t[i];if(r&&r.requestValue){n.push(r.requestValue())}}if(n.length>0){return Promise.all(n)}return null};r.checkListBindingPending=function(e,t,n){if(!t||t.isSuspended()){return false}return t.requestContexts(0,n&&n.length).then(function(e){return e.length===0})};r.getInitialFilterConditions=function(e,t,n){var i={};return i};r.getTypeUtil=function(e){return n};function u(e,t){var n=r.getTypeUtil();var a=n.getTypeConfig(e.type,e.formatOptions,e.constraints);var u=t?i.toString:i.toType;return u(e.condition,a,r.getTypeUtil())}r.externalizeCondition=function(e,t){return u(t,true)};r.internalizeCondition=function(e,t){return u(t,false)};return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/util/DelegateUtil",["sap/ui/mdc/util/FilterUtil","sap/ui/mdc/condition/ConditionConverter","sap/base/Log","sap/base/util/merge","sap/ui/model/FilterOperator","sap/ui/model/odata/v4/ODataUtils"],function(e,t,a,r,i,n){"use strict";var o={_getParameters:function(e){var t=null;if(e&&e.getDelegate()&&e.getDelegate().payload&&e.getDelegate().payload.collectionName){var a=e.getDelegate().payload.collectionName;if(window[e.getId()+"->"+a+"-Parameters"]){t=window[e.getId()+"->"+a+"-Parameters"]}}return t},getParametersInfo:function(e){var t=o._getParameters(e);return o._getParameterPath(e,t)},_getParametersListUrl:function(t,a){var r=[];var o=e.getConditionsMap(t,a);var l=t.getPropertyInfoSet();a.forEach(function(t){var a=e.getPropertyByKey(l,t);if(a&&a.maxConditions===1){o[t].forEach(function(e){if(e.operator===i.EQ){r.push(t+"="+encodeURIComponent(n.formatLiteral(e.values[0],a.typeConfig.className)))}})}});return r},_getParameterPath:function(e,t){if(!e||!e.isA("sap.ui.mdc.FilterBar")){return null}if(!t||t.parameters.length<=0){return null}var a=e.getDelegate().payload.collectionName;var r=o._getParametersListUrl(e,t.parameters);return"/"+a+"("+r.toString()+")/"+t.parameterNavigationName},getParameterNames:function(e){var t=null,a=o._getParameters(e);if(a){t=a.parameters}return t}};return o});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/odata/v4/vizChart/ChartDelegate",["../ChartDelegate","../../../util/loadModules","sap/ui/core/Core","sap/m/library","sap/m/Text","sap/ui/mdc/library","sap/ui/mdc/odata/v4/ODataMetaModelUtil","sap/base/Log","sap/ui/mdc/util/FilterUtil","sap/ui/mdc/odata/v4/util/DelegateUtil","sap/ui/mdc/chart/ChartTypeButton","sap/ui/mdc/chart/Item","sap/ui/model/Sorter","sap/m/VBox","sap/ui/base/ManagedObjectObserver","sap/ui/core/ResizeHandler","sap/ui/mdc/p13n/panels/ChartItemPanel","sap/m/MessageStrip","../TypeUtil","../FilterBarDelegate","sap/ui/model/Filter","sap/ui/mdc/odata/v4/ChartPropertyHelper","sap/ui/thirdparty/jquery"],function(e,t,a,r,i,n,o,s,l,g,u,h,d,c,p,f,m,y,C,_,b,v,I){"use strict";var P=Object.assign({},e);var S=r.FlexJustifyContent;var T=r.FlexAlignItems;var M=new window.WeakMap;var D;var N;var O;var w;P._getState=function(e){if(M.has(e)){return M.get(e)}s.info("Couldn't get state for "+e.getId())};P._setState=function(e,t){M.set(e,t)};P.getTypeUtil=function(){return C};P.getFilterDelegate=function(){return _};P.addCondition=function(e,t,a){return Promise.resolve()};P.removeCondition=function(e,t,a){return Promise.resolve()};P._deleteState=function(e){if(this._getState(e).vizTooltip){this._getState(e).vizTooltip.destroy()}if(this._getState(e).observer){this._getState(e).observer.disconnect();this._getState(e).observer=null}return M.delete(e)};P._getChart=function(e){if(M.has(e)){return M.get(e).innerChart}s.info("Couldn't get state for "+e.getId());return undefined};P._setChart=function(e,t){if(M.has(e)){M.get(e).innerChart=t}else{M.set(e,{innerChart:t})}};P._getInnerStructure=function(e){if(M.has(e)){return M.get(e).innerStructure}s.info("Couldn't get state for "+e.getId());return undefined};P._setInnerStructure=function(e,t){if(M.has(e)){M.get(e).innerStructure=t}else{M.set(e,{innerStructure:t})}};P._getBindingInfoFromState=function(e){if(M.has(e)){return M.get(e).bindingInfo}s.info("Couldn't get state for "+e.getId());return undefined};P._setBindingInfoForState=function(e,t){if(M.has(e)){M.get(e).bindingInfo=t}else{M.set(e,{bindingInfo:t})}};P._setUpChartObserver=function(e){var t=this._getState(e);if(!t.observer){t.observer=new p(function(e){if(e.type==="destroy"){this.exit(e.object)}}.bind(this))}t.observer.observe(e,{destroy:true})};P.exit=function(e){if(this._getInnerStructure(e)){this._getInnerStructure(e).destroy()}this._deleteState(e)};P.zoomIn=function(e,t){this._getChart(e).zoom({direction:"in"})};P.zoomOut=function(e,t){this._getChart(e).zoom({direction:"out"})};P.getZoomState=function(e){if(this._getChart(e)){return this._getChart(e).getZoomInfo(this)}};P.getInnerChartSelectionHandler=function(e){return{eventId:"_selectionDetails",listener:this._getChart(e)}};P.getChartTypeLayoutConfig=function(){if(this._aChartTypeLayout){return this._aChartTypeLayout}var e=[n.ChartItemRoleType.axis1,n.ChartItemRoleType.category,n.ChartItemRoleType.series];var t=[n.ChartItemRoleType.axis1,n.ChartItemRoleType.axis2,n.ChartItemRoleType.category,n.ChartItemRoleType.series];var a=[n.ChartItemRoleType.axis1,n.ChartItemRoleType.category,n.ChartItemRoleType.category2];var r=[n.ChartItemRoleType.axis1,n.ChartItemRoleType.axis2,n.ChartItemRoleType.axis3,n.ChartItemRoleType.category,n.ChartItemRoleType.series];this._aChartTypeLayout=[{key:"column",allowedLayoutOptions:e},{key:"bar",allowedLayoutOptions:e},{key:"line",allowedLayoutOptions:e},{key:"combination",allowedLayoutOptions:e},{key:"pie",allowedLayoutOptions:e},{key:"donut",allowedLayoutOptions:e},{key:"dual_column",allowedLayoutOptions:t},{key:"dual_bar",allowedLayoutOptions:t},{key:"dual_line",allowedLayoutOptions:t},{key:"stacked_bar",allowedLayoutOptions:e},{key:"scatter",allowedLayoutOptions:t},{key:"bubble",allowedLayoutOptions:r},{key:"heatmap",allowedLayoutOptions:a},{key:"bullet",allowedLayoutOptions:e},{key:"vertical_bullet",allowedLayoutOptions:e},{key:"dual_stacked_bar",allowedLayoutOptions:t},{key:"100_stacked_bar",allowedLayoutOptions:e},{key:"stacked_column",allowedLayoutOptions:e},{key:"dual_stacked_column",allowedLayoutOptions:t},{key:"100_stacked_column",allowedLayoutOptions:e},{key:"dual_combination",allowedLayoutOptions:t},{key:"dual_horizontal_combination",allowedLayoutOptions:t},{key:"dual_horizontal_combination",allowedLayoutOptions:t},{key:"dual_stacked_combination",allowedLayoutOptions:t},{key:"dual_horizontal_stacked_combination",allowedLayoutOptions:t},{key:"stacked_combination",allowedLayoutOptions:e},{key:"100_dual_stacked_bar",allowedLayoutOptions:e},{key:"100_dual_stacked_column",allowedLayoutOptions:e},{key:"horizontal_stacked_combination",allowedLayoutOptions:e},{key:"waterfall",allowedLayoutOptions:a},{key:"horizontal_waterfall",allowedLayoutOptions:a}];return this._aChartTypeLayout};P.getAdaptionUI=function(e){return Promise.resolve(this._setupAdaptionUI(e))};P._setupAdaptionUI=function(e){var t=this.getChartTypeLayoutConfig().find(function(t){return t.key===e.getChartType()});if(!t){var a=[n.ChartItemRoleType.axis1,n.ChartItemRoleType.axis2,n.ChartItemRoleType.axis3,n.ChartItemRoleType.category,n.ChartItemRoleType.category2,n.ChartItemRoleType.series];t={key:e.getChartType(),allowedLayoutOptions:a}}var r=[{kind:"Groupable"},{kind:"Aggregatable"}];t.templateConfig=r;var i={panelConfig:t};var o=new m(i);if(e.getChartType()==="heatmap"){var s=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");o.setMessageStrip(new y({text:s.getText("chart.PERSONALIZATION_DIALOG_MEASURE_WARNING"),type:"Warning"}))}return o};P.setLegendVisible=function(e,t){if(this._getChart(e)){this._getChart(e).setVizProperties({legend:{visible:t},sizeLegend:{visible:t}})}else{s.error("Could not set legend visibility since inner chart is not yet initialized!")}};P.getSorterForItem=function(e,t){if(e.getType()==="aggregatable"){return new d(this._getAggregatedMeasureNameForMDCItem(e),t.descending)}else if(e.getType()==="groupable"){return new d(this.getInternalChartNameFromPropertyNameAndKind(t.name,"groupable",e.getParent()),t.descending)}};P.insertItemToInnerChart=function(e,t,a){if(t.getType()==="groupable"){var r=this.getInternalChartNameFromPropertyNameAndKind(t.getName(),"groupable",e);var i=this._getChart(e).getDimensionByName(r);if(!i){this.createInnerDimension(e,t)}else{i.setLabel(t.getLabel());i.setRole(t.getRole()?t.getRole():"category")}var n=this._getChart(e).getVisibleDimensions();n.splice(a,0,r);this._getChart(e).setVisibleDimensions(n)}else if(t.getType()==="aggregatable"){this.createInnerMeasure(e,t);var o=this._getChart(e).getVisibleMeasures();o.splice(a,0,this._getAggregatedMeasureNameForMDCItem(t));this._getChart(e).setVisibleMeasures(o)}this._prepareColoringForItem(t).then(function(){this._updateColoring(e,this._getChart(e).getVisibleDimensions(),this._getChart(e).getVisibleMeasures())}.bind(this));this._updateSemanticalPattern(e)};P.removeItemFromInnerChart=function(e,t){if(t.getType()==="groupable"&&this._getChart(e).getVisibleDimensions().includes(this.getInternalChartNameFromPropertyNameAndKind(t.getName(),"groupable",e))){var a=this.getInternalChartNameFromPropertyNameAndKind(t.getName(),"groupable",e);var r=this._getChart(e).getVisibleDimensions().filter(function(e){return e!==a});if(this._getState(e).inResultDimensions.length>0){this._getChart(e).setInResultDimensions(this._getState(e).inResultDimensions)}this._getChart(e).setVisibleDimensions(r)}else if(t.getType()==="aggregatable"&&this._getChart(e).getVisibleMeasures().includes(this._getAggregatedMeasureNameForMDCItem(t))){var i=[];e.getItems().filter(function(e){return e.getType()==="aggregatable"}).filter(function(e){return e!==t}).forEach(function(e){i.push(this._getAggregatedMeasureNameForMDCItem(e))}.bind(this));this._getChart(e).setVisibleMeasures(i);this._getChart(e).removeMeasure(this._getChart(e).getMeasureByName(this._getAggregatedMeasureNameForMDCItem(t)))}this._updateColoring(e,this._getChart(e).getVisibleDimensions(),this._getChart(e).getVisibleMeasures());this._updateSemanticalPattern(e)};P.addItem=function(e,t,a,r){if(t.getModel){return Promise.resolve(this._createMDCChartItem(e,t,r))}};P.removeItem=function(e,t){return Promise.resolve(true)};P.checkAndUpdateMDCItems=function(e){return new Promise(function(t,a){var r=[];e.getItems().forEach(function(t){var a=t.getName()&&t.getLabel()&&t.getType()&&t.getRole();if(!a){r.push(this._getPropertyInfosByName(t.getName(),e).then(function(e){t.setLabel(e.label);if(e.groupable){t.setType("groupable");t.setRole(t.getRole()?t.getRole():"category")}else if(e.aggregatable){t.setType("aggregatable");t.setRole(t.getRole()?t.getRole():"axis1")}}))}}.bind(this));Promise.all(r).then(function(){t()})}.bind(this))};P._createMDCChartItem=function(e,t,a){return this._getPropertyInfosByName(e,t).then(function(e){if(!e){return null}return this._createMDCItemFromProperty(e,t.getId(),a)}.bind(this))};P._createMDCItemFromProperty=function(e,t,a){if(e.groupable){return new h(t+"--GroupableItem--"+e.name,{name:e.name,label:e.label,type:"groupable",role:a?a:"category"})}if(e.aggregatable){return new h(t+"--AggregatableItem--"+e.name,{name:e.name,label:e.label,type:"aggregatable",role:a?a:"axis1"})}return null};P.initializeInnerChart=function(e){return new Promise(function(t,a){this._loadChart().then(function(a){var r=this._calculateInnerChartHeight(e);this._setInnerStructure(e,new c({justifyContent:"Center",alignItems:"Center",height:r,width:"100%"}));var n=new i;n.setText(e.getNoDataText());this._getInnerStructure(e).addItem(n);this._setUpChartObserver(e);t(this._getInnerStructure(e))}.bind(this))}.bind(this))};P.createInitialChartContent=function(e){};P._createContentFromItems=function(e){return new Promise(function(t,a){var r=[];var i=[];var n=[];var o=[];e.getItems().forEach(function(t,a){i.push(this._getPropertyInfosByName(t.getName(),e).then(function(a){if(!a){s.error("sap.ui.mdc.Chart: Item "+t.getName()+" has no property info representing it in the metadata. Make sure the name is correct and the metadata is defined correctly. Skipping the item!");return}switch(t.getType()){case"groupable":n.push(this.getInternalChartNameFromPropertyNameAndKind(t.getName(),"groupable",e));this._addInnerDimension(e,t,a);break;case"aggregatable":o.push(this._getAggregatedMeasureNameForMDCItem(t));this._addInnerMeasure(e,t,a);break;default:s.error("MDC Chart Item "+t.getId()+" with label "+t.getLabel()+' has no known type. Supported typed are: "groupable" & "aggregatable"')}r.push(this._prepareColoringForItem(t))}.bind(this)))}.bind(this));Promise.all(i).then(function(){this._getState(e).aColMeasures.forEach(function(t){if(this._getState(e).aInSettings.indexOf(t)==-1){r.push(new Promise(function(a,r){e._getPropertyByNameAsync(t).then(function(r){var i=r.aggregationMethod;var n=r.propertyPath;var s=this.getInternalChartNameFromPropertyNameAndKind(t,"aggregatable",e);var l={name:s,label:r.label,role:"axis1"};if(i&&n){l.analyticalInfo={propertyPath:n,with:i}}var g=new O(l);o.push(g);this._getChart(e).addMeasure(g);a()})}))}}.bind(this));Promise.all(r).then(function(){this._getChart(e).setVisibleDimensions(n);this._getChart(e).setVisibleMeasures(o);var a=e.getDelegate().inResultDimensions;if(a&&a instanceof Array&&a.length!=0){var r=[];a.forEach(function(t){r.push(this._getPropertyInfosByName(t,e).then(function(t){var a=this.getInternalChartNameFromPropertyNameAndKind(t.name,"groupable",e);var r=new N({name:a,label:t.label});this._getState(e).inResultDimensions.push(a);this._getChart(e).addDimension(r)}.bind(this)))}.bind(this));Promise.all(r).then(function(){this._getChart(e).setInResultDimensions(this._getState(e).inResultDimensions)}.bind(this))}this._updateColoring(e,n,o);this._updateSemanticalPattern(e);t()}.bind(this))}.bind(this))}.bind(this))};P.getInnerChart=function(e){return this._getChart(e)};P._prepareColoringForItem=function(e){return this._addCriticality(e).then(function(){this._getState(e.getParent()).aInSettings.push(e.getName());if(e.getType==="aggregatable"){this._getPropertyInfosByName(e.getName(),e.getParent()).then(function(t){for(var a=0;a<this._getAdditionalColoringMeasuresForItem(t);a++){if(this._getState(e.getParent()).aColMeasures.indexOf(this._getAdditionalColoringMeasuresForItem(t)[a])==-1){this._getState(e.getParent()).aColMeasures.push(this._getAdditionalColoringMeasuresForItem(t)[a])}}}.bind(this))}}.bind(this))};P._getAdditionalColoringMeasuresForItem=function(e){var t=[];var a=e.datapoint?e.datapoint.criticality:null;if(a&&a.DynamicThresholds){t=a.DynamicThresholds.usedMeasures}return t};P._addCriticality=function(e){return this._getPropertyInfosByName(e.getName(),e.getParent()).then(function(t){if(t.criticality||t.datapoint&&t.datapoint.criticality){var a=this._getState(e.getParent()).oColorings||{Criticality:{DimensionValues:{},MeasureValues:{}}};var r={};if(e.getType()=="groupable"){var i=t.criticality?t.criticality:[];for(var n in i){r[n]={Values:i[n]}}var o=this.getInternalChartNameFromPropertyNameAndKind(e.getName(),"groupable",e.getParent());a.Criticality.DimensionValues[o]=r}else{var i=t.datapoint&&t.datapoint.criticality?t.datapoint.criticality:[];for(var n in i){r[n]=i[n]}var s=this.getInternalChartNameFromPropertyNameAndKind(e.getName(),"aggregatable",e.getParent());a.Criticality.MeasureValues[s]=r}var l=this._getState(e.getParent());l.oColorings=a;this._setState(e.getParent(),l)}}.bind(this))};P._updateColoring=function(e,t,a){var r=I.extend(true,{},this._getState(e).oColorings),i;if(r&&r.Criticality){var n;for(i=0;i<t.length;i++){if(this._getState(e).oColorings.Criticality.DimensionValues[t[i]]){n={coloring:"Criticality",parameters:{dimension:t[i]}};delete r.Criticality.MeasureValues;break}}if(!n){delete r.Criticality.DimensionValues;for(var o in r.Criticality.MeasureValues){if(a.indexOf(o)==-1){delete r.Criticality.MeasureValues[o]}}n={coloring:"Criticality",parameters:{measure:a}}}if(n){this._getChart(e).setColorings(r);this._getChart(e).setActiveColoring(n)}}};P._updateSemanticalPattern=function(e){var t=this._getChart(e).getVisibleMeasures();t.forEach(function(t){var a=this.getPropertyFromNameAndKind(t,"aggregatable",e);if(!a){return}var r=a.datapoint;if(r){if(r.targetValue||r.foreCastValue){var i=this._getChart(e).getMeasureByName(t);i.setSemantics("actual");if(r.targetValue!=null){var n=this._getChart(e).getMeasureByName(r.targetValue);if(n){n.setSemantics("reference")}else{s.error("sap.ui.mdc.Chart: "+r.targetValue+" is not a valid measure")}}if(r.foreCastValue){var o=this._getChart(e).getMeasureByName(r.foreCastValue);if(o){o.setSemantics("projected")}else{s.error("sap.ui.comp.SmartChart: "+r.ForecastValue.Path+" is not a valid measure")}}i.setSemanticallyRelatedMeasures({referenceValueMeasure:r.targetValue,projectedValueMeasure:r.foreCastValue})}}}.bind(this))};P.getChartTypeInfo=function(e){if(!this._getChart(e)){throw"inner chart is not bound"}var t=e.getChartType(),r=a.getLibraryResourceBundle("sap.ui.mdc");var i={icon:u.mMatchingIcon[t],text:r.getText("chart.CHART_TYPE_TOOLTIP",[t])};return i};P.getAvailableChartTypes=function(e){var t=[];if(this._getChart(e)){var r=this._getChart(e).getAvailableChartTypes().available;if(t){var i=a.getLibraryResourceBundle("sap.chart.messages");for(var n=0;n<r.length;n++){var o=r[n].chart;t.push({key:o,icon:u.mMatchingIcon[o],text:i.getText("info/"+o),selected:o==e.getChartType()})}}}return t};P.getDrillStackInfo=function(){};P.getDrillStack=function(e){var t=[];t=Object.assign(t,this._getChart(e).getDrillStack());t.forEach(function(t){t.dimension=t.dimension.map(function(t){var a=this.getPropertyFromNameAndKind(t,"groupable",e);if(a){return a.name}else{s.error("MDC Chart Delegate: Couldn't map chart dimension to groupable property: "+t);return t}}.bind(this))}.bind(this));return t};P.getSortedDimensions=function(e){return new Promise(function(t,a){if(e.isPropertyHelperFinal()){t(this._sortPropertyDimensions(e.getPropertyHelper().getProperties()))}else{e.finalizePropertyHelper().then(function(){t(this._sortPropertyDimensions(e.getPropertyHelper().getProperties()))}.bind(this))}}.bind(this))};P._sortPropertyDimensions=function(e){var t=e.filter(function(e){return e.groupable});if(t){t.sort(function(e,t){if(e.label&&t.label){return e.label.localeCompare(t.label)}})}return t};P.getDrillableItems=function(e){var t=e.getItems().filter(function(e){return e.getType()==="groupable"});return t};P.setChartType=function(e,t){this._getChart(e).setChartType(t)};P.createInnerChartContent=function(e,t){return new Promise(function(a,r){this._setChart(e,new D({id:e.getId()+"--innerChart",chartType:"column",width:"100%",isAnalytical:true}));this._getChart(e).setCustomMessages({NO_DATA:e.getNoDataText()});this._getState(e).inResultDimensions=[];if(e.getHeight()){this._getChart(e).setHeight(this._calculateInnerChartHeight(e))}f.register(e,function(){this.adjustChartHeight(e)}.bind(this));var i=this._getState(e);i.aColMeasures=[];i.aInSettings=[];this._setState(e,i);this._createContentFromItems(e).then(function(){this._getChart(e).attachRenderComplete(function(){if(this._getState(e).toolbarUpdateRequested){e._updateToolbar();this._getState(e).toolbarUpdateRequested=false}}.bind(this));this._getInnerStructure(e).removeAllItems();this._getInnerStructure(e).setJustifyContent(S.Start);this._getInnerStructure(e).setAlignItems(T.Stretch);this._getInnerStructure(e).addItem(this._getChart(e));i.dataLoadedCallback=t;this._setState(e,i);var r=this._getBindingInfo(e);this.updateBindingInfo(e,r);this._performInitialBind(e,r);a()}.bind(this))}.bind(this))};P._performInitialBind=function(e,t){if(e&&t&&this._getChart(e)){this._addBindingListener(t,"dataReceived",this._getState(e).dataLoadedCallback.bind(e));this._getChart(e).bindData(t);this._setBindingInfoForState(e,t);var a=this._getState(e);a.innerChartBound=true}};P._calculateInnerChartHeight=function(e){var t=I(e.getDomRef()).height();var a=0;var r=e.getAggregation("_toolbar");var i=0;var n=e.getAggregation("_breadcrumbs");if(r){a=I(r.getDomRef()).outerHeight(true)}if(n){i=I(n.getDomRef()).outerHeight(true)}var o=i+a;if(!t){return"480px"}return t-o+"px"};P.adjustChartHeight=function(e){if(e.getHeight()&&this._getChart(e)){var t=this._calculateInnerChartHeight(e);this._getInnerStructure(e).setHeight(t);this._getChart(e).setHeight(t)}};P.requestToolbarUpdate=function(e){this._getState(e).toolbarUpdateRequested=true};P.createInnerDimension=function(e,t){this._getPropertyInfosByName(t.getName(),e).then(function(a){this._addInnerDimension(e,t,a)}.bind(this))};P.createInnerMeasure=function(e,t){this._getPropertyInfosByName(t.getName(),e).then(function(a){this._addInnerMeasure(e,t,a)}.bind(this))};P._addInnerDimension=function(e,t,a){var r=new N({name:this.getInternalChartNameFromPropertyNameAndKind(t.getName(),"groupable",e),role:t.getRole()?t.getRole():"category",label:t.getLabel()});if(a.textProperty){r.setTextProperty(a.textProperty);if(a.textFormatter){r.setTextFormatter(this._formatText.bind(a))}r.setDisplayText(true)}this._getChart(e).addDimension(r)};P._addInnerMeasure=function(e,t,a){var r=a.aggregationMethod;var i=a.propertyPath;var n={name:this._getAggregatedMeasureNameForMDCItem(t),label:t.getLabel(),role:t.getRole()?t.getRole():"axis1"};if(r&&i){n.analyticalInfo={propertyPath:i,with:r}}var o=new O(n);this._getChart(e).addMeasure(o)};P._getAggregatedMeasureNameForProperty=function(e){return e.aggregationMethod+e.name};P.rebindChart=function(e,t){this.rebind(e,t)};P.rebind=function(e,t){if(e&&t&&this._getChart(e)){this._addBindingListener(t,"dataReceived",this._getState(e).dataLoadedCallback.bind(e));if(t.binding){t.binding.bHasAnalyticalInfo=true}this._getChart(e).bindData(t);this._setBindingInfoForState(e,t);var a=this._getState(e);a.innerChartBound=true}};P._getBindingInfo=function(e){if(this._getBindingInfoFromState(e)){return this._getBindingInfoFromState(e)}var t=e.getDelegate().payload;var a="/"+t.collectionName;var r={path:a};return r};P.getInnerChartBound=function(e){var t=this._getState(e);if(!t){return false}return t.innerChartBound?true:false};P.updateBindingInfo=function(e,t){var a=A.call(this,e).concat(F.call(this,e));R(e,t);t.filters=new b(a,true);t.sorter=this.getSorters(e)};function A(e){var t=e.getP13nMode().indexOf("Filter")>-1;var a=[];if(t){var r=e.getPropertyHelper().getProperties();var i=l.getFilterInfo(this.getTypeUtil(),e.getConditions(),r);if(i.filters){a.push(i.filters)}}return a}function F(e){var t=a.byId(e.getFilter());var r=[];if(!t){return r}var i=t.getConditions();if(i){var n=t.getPropertyInfoSet?t.getPropertyInfoSet():null;var o=g.getParameterNames(t);var s=l.getFilterInfo(this.getTypeUtil(),i,n,o);if(s.filters){r.push(s.filters)}}return r}function R(e,t){var r=a.byId(e.getFilter());if(!r){return}var i=r.getConditions();var n=r.getSearch instanceof Function?r.getSearch():"";if(i){var o=g.getParametersInfo(r,i);if(o){t.path=o}}if(!t.parameters){t.parameters={}}t.parameters["$search"]=n||undefined}P.getSorters=function(e){var t;var a=e.getSortConditions()?e.getSortConditions().sorters:[];a.forEach(function(a){var r=e.getItems().find(function(e){return e.getName()===a.name});if(!r){return}var i=this.getSorterForItem(r,a);if(t){t.push(i)}else{t=[i]}}.bind(this));return t};P._getAggregatedMeasureNameForMDCItem=function(e){return this.getInternalChartNameFromPropertyNameAndKind(e.getName(),"aggregatable",e.getParent())};P.getInternalChartNameFromPropertyNameAndKind=function(e,t,a){return e};P.getPropertyFromNameAndKind=function(e,t,a){return a.getPropertyHelper().getProperty(e)};P.addInnerItem=function(e,t,a){return Promise.resolve(null)};P.insertInnerItem=function(e,t,a){};P.removeInnerItem=function(e,t,a){return Promise.resolve(true)};P.setChartTooltipVisibility=function(e,t){if(this._getChart(e)){if(t){if(!this._getState(e).vizTooltip){var a=this._getState(e);a.vizTooltip=new w;this._setState(e,a)}this._getState(e).vizTooltip.connect(this._getChart(e).getVizUid())}else if(this._getState(e).vizTooltip){this._getState(e).vizTooltip.destroy()}}else{s.error("Trying to set chart tooltip while inner chart was not yet initialized")}};P._loadChart=function(){return new Promise(function(e){var t=["sap/chart/library","sap/chart/Chart","sap/chart/data/Dimension","sap/chart/data/HierarchyDimension","sap/chart/data/TimeDimension","sap/chart/data/Measure","sap/viz/ui5/controls/VizTooltip"];function a(t,a,r,i,n,o,s){D=a;N=r;O=o;w=s;e()}sap.ui.require(t,a)})};P.getPropertyHelperClass=function(){return v};P._formatText=function(e,t){return e};P.setNoDataText=function(e,t){this._getChart(e).setCustomMessages({NO_DATA:t})};P.fetchProperties=function(e){var t=this._getModel(e);var a;if(!t){a=new Promise(function(t){e.attachModelContextChange({resolver:t},k,this)}.bind(this)).then(function(t){return this._createPropertyInfos(e.getDelegate().payload,t)}.bind(this))}else{a=this._createPropertyInfos(e.getDelegate().payload,t)}return a.then(function(t){if(e.data){e.data("$mdcChartPropertyInfo",t)}return t})};function k(e,t){var a=e.getSource();var r=this._getModel(a);if(r){a.detachModelContextChange(k);t.resolver(r)}}P._createPropertyInfos=function(e,t){var a=[];var r="/"+e.collectionName;var i=t.getMetaModel();return Promise.all([i.requestObject(r+"/"),i.requestObject(r+"@")]).then(function(e){var t=e[0],s=e[1];var l=s["@Org.OData.Capabilities.V1.SortRestrictions"]||{};var g=o.getSortRestrictionsInfo(l);var u=s["@Org.OData.Capabilities.V1.FilterRestrictions"];var h=o.getFilterRestrictionsInfo(u);for(var d in t){var c=t[d];if(c&&c.$kind==="Property"){if(c.$isCollection){continue}var p=i.getObject(r+"/"+d+"@");if(!p["@Org.OData.Aggregation.V1.Aggregatable"]&&!p["@Org.OData.Aggregation.V1.Groupable"]){continue}if(p["@Org.OData.Aggregation.V1.Aggregatable"]){a=a.concat(this._createPropertyInfosForAggregatable(d,p,c,h,g))}if(p["@Org.OData.Aggregation.V1.Groupable"]){a.push({name:d,propertyPath:d,label:p["@com.sap.vocabularies.Common.v1.Label"]||d,sortable:g[d]?g[d].sortable:true,filterable:h[d]?h[d].filterable:true,groupable:true,aggregatable:false,maxConditions:o.isMultiValueFilterExpression(h.propertyInfo[d])?-1:1,sortKey:d,dataType:c.$Type,role:n.ChartItemRoleType.category,criticality:null,textProperty:p["@com.sap.vocabularies.Common.v1.Text"]?p["@com.sap.vocabularies.Common.v1.Text"].$Path:null})}}}return a}.bind(this))};P._createPropertyInfosForAggregatable=function(e,t,a,r,i){var n=[];if(t["@Org.OData.Aggregation.V1.SupportedAggregationMethods"]){t["@Org.OData.Aggregation.V1.SupportedAggregationMethods"].forEach(function(s){n.push({name:s+e,propertyPath:e,label:t["@com.sap.vocabularies.Common.v1.Label"]+" ("+s+")"||e+" ("+s+")",sortable:i[e]?i[e].sortable:true,filterable:r[e]?r[e].filterable:true,groupable:false,aggregatable:t["@Org.OData.Aggregation.V1.Aggregatable"],aggregationMethod:s,maxConditions:o.isMultiValueFilterExpression(r.propertyInfo[e])?-1:1,dataType:a.$Type,datapoint:null})})}return n};P._getPropertyInfosByName=function(e,t){return t._getPropertyByNameAsync(e)};P._getModel=function(e){var t=e.getDelegate().payload;return e.getModel(t.model)};P._addBindingListener=function(e,t,a){if(!e.events){e.events={}}if(!e.events[t]){e.events[t]=a}else{var r=e.events[t];e.events[t]=function(){a.apply(this,arguments);r.apply(this,arguments)}}};return P});
/*
* ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/p13n/AdaptationProvider",["sap/ui/base/Object"],function(e){"use strict";var t=e.extend("sap.ui.mdc.p13n.AdaptationProvider",{metadata:{baseType:"sap.ui.mdc.p13n.AdaptationProvider"}});t.prototype.initAdaptation=function(e,t,n){throw new Error("Please implement 'initAdaptation'")};t.prototype.reset=function(e,t){throw new Error("Please implement 'reset'")};t.prototype.handleP13n=function(e,t){throw new Error("Please implement 'handleP13n'")};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/Engine",["sap/ui/mdc/p13n/AdaptationProvider","sap/base/util/merge","sap/base/Log","sap/ui/mdc/util/PropertyHelper","sap/ui/mdc/p13n/modification/FlexModificationHandler","sap/m/MessageStrip","sap/ui/core/library","sap/ui/core/Element","sap/ui/mdc/p13n/modules/DefaultProviderRegistry","sap/ui/mdc/p13n/UIManager","sap/ui/mdc/p13n/modules/StateHandlerRegistry","sap/ui/mdc/p13n/modules/xConfigAPI"],function(t,e,r,n,i,o,a,s,l,c,u,f){"use strict";var d="Engine: This class is a singleton. Please use the getInstance() method instead.";var p=a.MessageType;var h=new WeakMap;var g;var y=t.extend("sap.ui.mdc.p13n.Engine",{constructor:function(){t.call(this);if(g){throw Error(d)}this._aRegistry=[];this._aStateHandlers=[];this.defaultProviderRegistry=l.getInstance(this);this.uimanager=c.getInstance(this);this.stateHandlerRegistry=u.getInstance()}});y.prototype.registerAdaptation=function(t,e){if(!e.hasOwnProperty("controller")){throw new Error("Please provide atleast a configuration 'controller' containing a map of key-value pairs (key + Controller class) in order to register adaptation.")}if(this._getRegistryEntry(t)){this.deregisterAdaptation(t)}var r=Object.keys(e.controller);r.forEach(function(r){var n=e.controller[r];if(!this.getController(t,r)){if(this._aRegistry.indexOf(t.getId())<0){this._aRegistry.push(t.getId())}var i=new n(t);this.addController(i,r)}}.bind(this))};y.prototype.deregisterAdaptation=function(t){var e=this._getRegistryEntry(t);Object.keys(e.controller).forEach(function(t){var r=e.controller[t];r.destroy();delete e.controller[t]});h.delete(t);var r=this._aRegistry.indexOf(t.getId());this._aRegistry.splice(r,1)};y.prototype._setModificationHandler=function(t,e){if(!e.isA("sap.ui.mdc.p13n.modification.ModificationHandler")){throw new Error("Only sap.ui.mdc.p13n.modification.ModificationHandler derivations are allowed for modification")}var r=this._determineModification(t);r.handler=e;this._getRegistryEntry(t).modification=r};var v=function(t,e){var r=function(e){if(t._pModificationQueue===e){delete t._pModificationQueue}};t._pModificationQueue=t._pModificationQueue instanceof Promise?t._pModificationQueue.then(e):e();t._pModificationQueue.then(r.bind(null,t._pModificationQueue));return t._pModificationQueue};y.prototype.createChanges=function(t){var r=t.key;var n=t.state;var i=!!t.applyAbsolute;var o=!!t.suppressAppliance;var a=!!t.applySequentially;if(!r||!t.control||!n){throw new Error("To create changes via Engine, atleast a 1)Control 2)Key and 3)State needs to be provided.")}var s=y.getControlInstance(t.control);var l=function(){return this.initAdaptation(s,r).then(function(){var a=this.getController(s,r);var l=a.getChangeOperations();var c=this._getRegistryEntry(s);var u=a.getCurrentState();var f=e(u instanceof Array?[]:{},u);var d={existingState:t.stateBefore||f,applyAbsolute:i,changedState:n,control:a.getAdaptationControl(),changeOperations:l,deltaAttributes:["name"],propertyInfo:c.helper.getProperties().map(function(t){return{name:t.name}})};var p=a.getDelta(d);if(!o){return this._processChanges(s,p)}return p||[]}.bind(this))}.bind(this);if(a){return v(s,l)}else{return l.apply(this)}};y.prototype.reset=function(t,e){e=e instanceof Array?e:[e];var r=[];e.forEach(function(e){r=r.concat(this.getController(t,e).getSelectorForReset())}.bind(this));var n={selectors:r,selector:t};var i=this._determineModification(t);return i.handler.reset(n,i.payload).then(function(){this.stateHandlerRegistry.fireChange(t);return this.initAdaptation(t,e).then(function(r){e.forEach(function(e){var n=this.getController(t,e);n.update(r)}.bind(this))}.bind(this))}.bind(this))};y.prototype.waitForChanges=function(t){var e=this._determineModification(t);return e.handler.waitForChanges({element:t},e.payload)};y.prototype.isModificationSupported=function(t){var e=this._determineModification(t);return e.handler.isModificationSupported({element:t},e.payload)};y.prototype._processChanges=function(t,e){if(e instanceof Array&&e.length>0){var r=this._determineModification(t);return r.handler.processChanges(e,r.payload).then(function(e){var r=y.getControlInstance(t);this.stateHandlerRegistry.fireChange(r);return e}.bind(this))}else{return Promise.resolve([])}};y.prototype.getRTASettingsActionHandler=function(t,e,r){var n;var o=y.hasForReference(t,"sap.ui.mdc.p13n.PersistenceProvider");if(o.length>0&&!t.isA("sap.ui.mdc.link.Panel")){return Promise.reject("Please do not use a PeristenceProvider in RTA.")}var a=this.getModificationHandler(t);var s=new i;var l=new Promise(function(t,e){n=t});s.processChanges=function(t){n(t);return Promise.resolve(t)};this._setModificationHandler(t,s);this.uimanager.show(t,r).then(function(t){var r=t.getCustomHeader();if(r){r.getContentRight()[0].setVisible(false)}t.addStyleClass(e.styleClass);if(e.fnAfterClose instanceof Function){t.attachAfterClose(e.fnAfterClose)}});l.then(function(){this._setModificationHandler(t,a);s.destroy()}.bind(this));return l};y.prototype.enhanceXConfig=function(t,e){var r=y.getControlInstance(t);var n=this._getRegistryEntry(t);return Promise.resolve().then(function(){return f.enhanceConfig(r,e).then(function(t){if(n){n.xConfig=t}})})};y.prototype.readXConfig=function(t,e){var r=y.getControlInstance(t);return f.readConfig(r,e)||{}};y.prototype.externalizeKeys=function(t,e){var r={};Object.keys(e).forEach(function(n){var i=this.getController(y.getControlInstance(t),n);if(i){r[i.getStateKey()]=e[n]}}.bind(this));return r};y.prototype.internalizeKeys=function(t,e){var r=this.getRegisteredControllers(t),n={};r.forEach(function(r){var i=this.getController(t,r).getStateKey();if(e.hasOwnProperty(i)){n[r]=e[i]}}.bind(this));return n};y.prototype.applyState=function(t,e,n){return this.retrieveState(t).then(function(i){var o=[],a=[],s={};if(t.validateState instanceof Function){s=t.validateState(this.externalizeKeys(t,e))}if(s.validation===p.Error){r.error(s.message)}Object.keys(e).forEach(function(r){var i=this.getController(t,r);if(!i){return}var a=this.createChanges({control:t,key:r,state:i.sanityCheck(e[r]),suppressAppliance:true,applyAbsolute:n});o.push(a)}.bind(this));return Promise.all(o).then(function(e){e.forEach(function(t){if(t&&t.length>0){a=a.concat(t)}});return this._processChanges(t,a)}.bind(this))}.bind(this))};y.prototype.diffState=function(t,r,n){var i=[],o={};r=e({},r);n=e({},n);this.getRegisteredControllers(t).forEach(function(e){i.push(this.createChanges({control:t,stateBefore:r[e],state:n[e],applyAbsolute:true,key:e,suppressAppliance:true}))}.bind(this));return Promise.all(i).then(function(e){this.getRegisteredControllers(t).forEach(function(i,a){var s=this.getController(t,i).changesToState(e[a],r[i],n[i]);o[i]=s}.bind(this));return o}.bind(this))};y.prototype.retrieveState=function(t){var r=this.checkXStateInterface(t);if(!r){throw new Error("The control needs to implement the interface IxState.")}return t.initialized().then(function(){return y.getInstance().waitForChanges(t).then(function(){var r={};y.getInstance().getRegisteredControllers(t).forEach(function(e){r[e]=y.getInstance().getController(t,e).getCurrentState()});return e({},r)})})};y.prototype.checkXStateInterface=function(t){if(!t){return false}if(!this.isModificationSupported(t)){return false}if(!t.isA("sap.ui.mdc.IxState")){return false}return true};y.prototype.initAdaptation=function(t,e,r){this.verifyController(t,e);return this._retrievePropertyHelper(t,r)};y.prototype.addController=function(t,e,r){var n=this._createRegistryEntry(t.getAdaptationControl(),r);n.controller[e]=t};y.prototype.getController=function(t,e){var r=this._getRegistryEntry(t);if(r&&r.controller.hasOwnProperty(e)){return r.controller[e]}};y.prototype.verifyController=function(t,e){var r=e instanceof Array?e:[e];r.forEach(function(e){if(!this.getController(t,e)){var r=y.getControlInstance(t);throw new Error("No controller registered yet for "+r.getId()+" and key: "+e)}}.bind(this))};y.prototype.getUISettings=function(t,e){var r=Array.isArray(e)?e:[e];this.verifyController(t,r);var n=this._getRegistryEntry(t).helper;var i={};r.forEach(function(e){var r=this.getController(t,e);var o=r.getAdaptationUI(n);if(o instanceof Promise){i[e]={};i[e]={resetEnabled:r.getResetEnabled(),containerSettings:r.getUISettings(),adaptationUI:o}}}.bind(this));return i};y.prototype.isRegisteredForModification=function(t){var e=this._getRegistryEntry(t);return e&&!!e.modification};y.prototype.getRegisteredControllers=function(t){var e=this._getRegistryEntry(t);return Object.keys(e.controller)};y.prototype._getRegistryEntry=function(t){var e=y.getControlInstance(t);return h.get(e)};y.prototype.getModificationHandler=function(t){var e=this._determineModification(t);return e.handler};y.prototype._createRegistryEntry=function(t,e){var r=y.getControlInstance(t);if(!h.has(r)){h.set(r,{modification:e&&e.modification?e.modification:null,controller:{},activeP13n:null,helper:null,xConfig:null})}return h.get(r)};y.prototype._determineModification=function(t){var e=this._getRegistryEntry(t);if(e&&e.modification){return e.modification}var r=y.hasForReference(t,"sap.ui.mdc.p13n.PersistenceProvider");var n=y.hasForReference(t,"sap.ui.fl.variants.VariantManagement");var o=r.length?r:undefined;var a=o?o[0].getMode():"Standard";var s={undefined:i,Global:i,Transient:i,Standard:i,Auto:i};var l=s[a];if(!l){throw new Error("Please provide a valid ModificationHandler! - valid Modification handlers are:"+Object.keys(s))}var c={handler:l.getInstance(),payload:{hasVM:n&&n.length>0,hasPP:r&&r.length>0,mode:a}};if(e&&!e.modification){e.modification=c}return c};y.hasForReference=function(t,e){var r=t&&t.getId?t.getId():t;var n=s.registry.filter(function(t){if(!t.isA(e)){return false}var n=t.getFor();for(var i=0;i<n.length;i++){if(n[i]===r||y.hasControlAncestorWithId(r,n[i])){return true}}return false});return n};y.hasControlAncestorWithId=function(t,e){var r;if(t===e){return true}r=sap.ui.getCore().byId(t);while(r){if(r.getId()===e){return true}if(typeof r.getParent==="function"){r=r.getParent()}else{return false}}return false};y.getControlInstance=function(t){return typeof t=="string"?sap.ui.getCore().byId(t):t};y.prototype.hasActiveP13n=function(t){return!!this._getRegistryEntry(t).activeP13n};y.prototype.setActiveP13n=function(t,e){this._getRegistryEntry(t).activeP13n=e};y.prototype.validateP13n=function(t,e,n){var i=this.getController(t,e);var a=y.getControlInstance(t);var s=this._getRegistryEntry(t).controller;var l={};Object.keys(s).forEach(function(t){l[t]=s[t].getCurrentState()});if(i&&i.model2State instanceof Function){l[e]=i.model2State();var c=a.validateState(this.externalizeKeys(a,l),e);var u;if(c.validation!==p.None){u=new o({type:c.validation,text:c.message})}if(n.setMessageStrip instanceof Function){n.setMessageStrip(u)}else{r.warning("message strip could not be provided - the adaptation UI needs to implement 'setMessageStrip'")}return c}else{return undefined}};y.prototype.handleP13n=function(t,e){var r=[];e.forEach(function(e){var n=this.getController(t,e);var i=this.createChanges({control:t,key:e,state:n.getP13nData(),suppressAppliance:true,applyAbsolute:true}).then(function(t){return n.getBeforeApply().then(function(e){var r=e?e.concat(t):t;return r})});r.push(i)}.bind(this));return Promise.all(r).then(function(e){var r=[];e.forEach(function(t){r=r.concat(t)});if(r.length>0){y.getInstance()._processChanges(t,r)}})};y.prototype._retrievePropertyHelper=function(t,e){var r=this._getRegistryEntry(t);var i=y.getControlInstance(t);if(e){if(r.helper){r.helper.destroy()}r.helper=new n(e);return Promise.resolve(r.helper)}if(r.helper){return Promise.resolve(r.helper)}return i.initPropertyHelper().then(function(t){r.helper=t;return t},function(t){throw new Error(t)})};y.getInstance=function(){if(!g){g=new y}return g};y.prototype._getRegistry=function(){var t={stateHandlerRegistry:this.stateHandlerRegistry,defaultProviderRegistry:this.defaultProviderRegistry,controlRegistry:{}};this._aRegistry.forEach(function(e){var r=sap.ui.getCore().byId(e);t.controlRegistry[e]=h.get(r)});return t};y.prototype.destroy=function(){t.prototype.destroy.apply(this,arguments);g=null;this._aRegistry=null;h.delete(this);this.defaultProviderRegistry.destroy();this.defaultProviderRegistry=null;this.stateHandlerRegistry.destroy();this.stateHandlerRegistry=null;this.uimanager.destroy();this.uimanager=null};return y});
/*
* ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/p13n/FlexUtil",["sap/base/util/merge","sap/base/util/deepEqual","sap/ui/mdc/condition/FilterOperatorUtil","sap/base/Log"],function(e,n,t,r){"use strict";var i={getPropertySetterChanges:function(e){var n=e.control;var t=e.existingState;var r=e.changedState;var i=e.operation;var a=e.deltaAttribute;var o=[];r.forEach(function(e){if(e.hasOwnProperty(a)){var r=t.find(function(n){return n.name==e.name});var u=r&&r.hasOwnProperty(a)&&r[a];var c=e[a];var f=u!==c;if(f){o.push(this.createChange(n,i,{name:e.name,value:e[a]}))}}}.bind(this));return o},_getChangeContent:function(e,n){var t={};if(e.index>=0){t.index=e.index}n.forEach(function(n){if(e.hasOwnProperty(n)){t[n]=e[n]}});return t},getConditionDeltaChanges:function(e){var n=[];var t=e.changedState;var a=e.existingState;var o=e.control;var u=e.hasOwnProperty("applyAbsolute")?e.applyAbsolute:true;var c=e.propertyInfo;for(var f in t){var s=i._hasProperty(c,f);if(!s){r.warning("property '"+f+"' not supported");continue}var p=i._diffConditionPath(f,t[f],a[f],o,u);n=n.concat(p)}return n},_hasProperty:function(e,n){return e.some(function(e){var t=e.name===n||n=="$search";t=t?t:e.path===n;return t})},_diffConditionPath:function(r,a,o,u,c){var f,s=[];var p=e([],a);var l=o?e([],o):[];if(n(a,l)){return s}var h=function(e,n){var r;do{r=false;for(var i=0;i<e.length;i++){var a=e[i];var o=t.indexOfCondition(a,n);if(o>-1){e.splice(i,1);if(c){n.splice(o,1)}r=true;break}}}while(r)};h(a,l);if(a.length>0||l.length>0){l.forEach(function(e){var n=t.indexOfCondition(e,p);var a=n>-1&&p[n].filtered===false;if(c||a){f=i.createConditionChange("removeCondition",u,r,e);s.push(f)}});a.forEach(function(e){if(c||(!e.hasOwnProperty("filtered")||e.filtered!==false)){f=i.createConditionChange("addCondition",u,r,e);s.push(f)}})}return s},createChange:function(e,n,t){var r={selectorElement:e,changeSpecificData:{changeType:n,content:t}};return r},createConditionChange:function(e,n,t,r){delete r.filtered;var i={selectorElement:n,changeSpecificData:{changeType:e,content:{name:t,condition:r}}};return i},handleChanges:function(e,n,t){return new Promise(function(r,i){sap.ui.require(["sap/ui/fl/write/api/ControlPersonalizationWriteAPI"],function(a){a.add({changes:e,ignoreVariantManagement:n,useStaticArea:t}).then(function(e){r(e)},i)})})},saveChanges:function(e,n){return new Promise(function(t,r){sap.ui.require(["sap/ui/fl/write/api/ControlPersonalizationWriteAPI"],function(r){r.save({selector:e,changes:n}).then(t)})})},restore:function(e){return new Promise(function(n,t){sap.ui.require(["sap/ui/fl/write/api/ControlPersonalizationWriteAPI"],function(r){r.restore(e).then(function(){n()},t)})})},reset:function(e){return new Promise(function(n,t){sap.ui.require(["sap/ui/fl/write/api/ControlPersonalizationWriteAPI"],function(r){r.reset(e).then(function(){n()},t)})})}};return i});
/*
* ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/p13n/P13nBuilder",["./PropertyHelper","sap/m/Button","sap/m/Bar","sap/m/Title","sap/base/util/merge","sap/m/MessageBox","sap/ui/Device"],function(e,t,n,r,i,o,a){"use strict";var s=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var c={createP13nPopover:function(e,t){return new Promise(function(n,r){sap.ui.require(["sap/m/ResponsivePopover"],function(i){c["_checkSettings"](e,t,r);var o=new i({title:t.title,horizontalScrolling:t.hasOwnProperty("horizontalScrolling")?t.horizontalScrolling:false,verticalScrolling:t.hasOwnProperty("verticalScrolling")?t.verticalScrolling:false,contentWidth:t.contentWidth?t.contentWidth:"24rem",resizable:t.hasOwnProperty("resizable")?t.resizable:true,contentHeight:t.contentHeight?t.contentHeight:"35rem",placement:t.placement?t.placement:"Bottom",content:e,afterClose:t.afterClose?t.afterClose:function(){}});if(t.reset){var a=c._createResetHeader({title:t.title,reset:t.reset.onExecute,idResetButton:t.reset.idButton,warningText:t.reset.warningText});o.setCustomHeader(a)}n(o)},r)})},createP13nDialog:function(e,t){return new Promise(function(n,r){c["_checkSettings"](e,t,r);var i=t.id;sap.ui.require(["sap/m/Dialog","sap/m/Button"],function(o,s){var u=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var l=new o(i,{title:t.title,horizontalScrolling:t.hasOwnProperty("horizontalScrolling")?t.horizontalScrolling:false,verticalScrolling:t.hasOwnProperty("verticalScrolling")?t.verticalScrolling:true,contentWidth:t.contentWidth?t.contentWidth:"40rem",contentHeight:t.contentHeight?t.contentHeight:"55rem",draggable:true,resizable:true,stretch:a.system.phone,content:e,afterClose:t.afterClose?t.afterClose:function(){},buttons:[new s(i?i+"-confirmBtn":undefined,{text:t.confirm&&t.confirm.text?t.confirm.text:u.getText("p13nDialog.OK"),type:"Emphasized",press:function(){if(t.confirm&&t.confirm.handler){t.confirm.handler.apply(l,arguments)}}}),new s(i?i+"-cancelBtn":undefined,{text:u.getText("p13nDialog.CANCEL"),press:function(){t.cancel.apply(l,arguments)}})]});if(t.reset){var p=c._createResetHeader({title:t.title,idResetButton:t.reset.idButton,reset:t.reset.onExecute,warningText:t.reset.warningText});l.setCustomHeader(p)}var g=t.additionalButtons;if(g instanceof Array){g.forEach(function(e){if(!e.isA("sap.m.Button")){r("Please only provide sap.m.Button instances as 'additionalButtons'")}l.addButton(e)})}n(l)},r)})},_createResetHeader:function(e){var i=new n({contentLeft:[new r({text:e.title})]});if(e.reset){var a=e.idResetButton;i.addContentRight(new t(a,{text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.RESET"),press:function(t){var n=t.getSource().getParent().getParent();var r=n.getParent();var i=e.warningText?e.warningText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("filterbar.ADAPT_RESET_WARNING");o.warning(i,{actions:[o.Action.OK,o.Action.CANCEL],emphasizedAction:o.Action.OK,onClose:function(t){if(t===o.Action.OK){n.getButtons()[0].focus();e.reset(r)}}})}}))}return i},prepareAdaptationData:function(t,n,r){var i=t&&t.getProperties instanceof Function?t:new e(t);var o=[];var a=r?{}:null;var s=n instanceof Function;i.getProperties().forEach(function(e){var t={};if(s){var r=n(t,e);if(!r){return}}t.name=e.name;t.label=e.label||e.name;t.tooltip=e.tooltip;if(a){t.group=e.group?e.group:"BASIC";t.groupLabel=e.groupLabel;a[t.group]=a[t.group]?a[t.group]:[];a[t.group].push(t)}o.push(t)});var c={items:o};if(a){c.itemsGrouped=this._buildGroupStructure(a)}return c},sortP13nData:function(e,t){var n=e;var r=n.position;var i=n.visible;var o=sap.ui.getCore().getConfiguration().getLocale().toString();var a=window.Intl.Collator(o,{});t.sort(function(e,t){if(e[i]&&t[i]){return(e[r]||0)-(t[r]||0)}else if(e[i]){return-1}else if(t[i]){return 1}else if(!e[i]&&!t[i]){return a.compare(e.label,t.label)}})},_buildGroupStructure:function(e){var t=[];Object.keys(e).forEach(function(n){this.sortP13nData("generic",e[n]);t.push({group:n,groupLabel:e[n][0].groupLabel||s.getText("p13nDialog.FILTER_DEFAULT_GROUP"),groupVisible:true,items:e[n]})}.bind(this));return t},_isExcludeProperty:function(e,t){return t.some(function(t){var n=t.ignoreKey;var r=t.ignoreValue;return e[n]===r})},_checkSettings:function(e,t,n){if(!t){n("Please provide a settings object for p13n creation")}if(!t.title&&!t.customHeader){n("Please provide a title or customHeader in the settings object for p13n creation")}},arrayToMap:function(e){return e.reduce(function(e,t,n){e[t.name]=t;e[t.name].position=n;return e},{})}};return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/PersistenceProvider",["sap/ui/core/Control","sap/ui/fl/variants/VariantManagement","sap/ui/fl/Utils","sap/ui/mdc/enum/PersistenceMode","sap/ui/layout/VerticalLayout"],function(e,t,i,o,r){"use strict";var s=e.extend("sap.ui.mdc.p13n.PersistenceProvider",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/p13n/PersistenceProvider.designtime",properties:{mode:{type:"sap.ui.mdc.enum.PersistenceMode",group:"Data",defaultValue:o.Auto}},associations:{for:{type:"sap.ui.core.Control",multiple:true}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.openEnd();e.close("div")}}});s.prototype.init=function(){e.prototype.init.apply(this,arguments);this.attachModelContextChange(this._setModel,this);this._oModelPromise=new Promise(function(e,t){this._fnResolveModel=e}.bind(this))};s.prototype._setModel=function(){var e=this.getModel(i.VARIANT_MODEL_NAME);if(e){this._fnResolveModel(e)}};s.prototype.applySettings=function(){e.prototype.applySettings.apply(this,arguments);this._bmodeLocked=true;if(this.getMode()===o.Transient){var s=new t(this.getId()+"--vm",{for:this.getAssociation("for")});this._oModelPromise.then(function(e){s.setModel(e,i.VARIANT_MODEL_NAME)});this._oWrapper=new r(this.getId()+"--accWrapper",{content:[s]});this._oWrapper.onAfterRendering=function(){r.prototype.onAfterRendering.apply(this,arguments);this.getDomRef().setAttribute("aria-hidden",true)};var n=sap.ui.getCore().getUIArea(sap.ui.getCore().getStaticAreaRef());n.addContent(this._oWrapper)}return this};s.prototype.setMode=function(e){if(this._bmodeLocked&&e!==this.getMode()){throw new Error("mode is a final property.")}this.setProperty("mode",e);return this};s.prototype.exit=function(){if(this._oWrapper){var t=sap.ui.getCore().getUIArea(sap.ui.getCore().getStaticAreaRef());t.removeContent(this._oWrapper);this._oWrapper.destroy();this._oWrapper=null}this._oModelPromise=null;this._fnResolveModel=null;this._bmodeLocked=null;e.prototype.exit.apply(this,arguments)};return s});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/PropertyHelper",["../util/PropertyHelper"],function(e){"use strict";var r=e.extend("sap.ui.mdc.p13n.PropertyHelper",{constructor:function(r,t,p,o){var a=["filterable","sortable"];e.call(this,r,t,p,a,o)}});r.prototype.validateProperties=function(){};r.prototype.prepareProperty=function(r){e.prototype.prepareProperty.apply(this,arguments);r.label=r.label||r.name};return r});
/*
* ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/p13n/StateUtil",["sap/ui/mdc/p13n/Engine"],function(e){"use strict";var t={applyExternalState:function(t,n){var a=e.getInstance().internalizeKeys(t,n);return e.getInstance().applyState(t,a)},retrieveExternalState:function(t){return e.getInstance().retrieveState(t).then(function(n){return e.getInstance().externalizeKeys(t,n)})},diffState:function(t,n,a){return sap.ui.mdc.p13n.Engine.getInstance().diffState(t,e.getInstance().internalizeKeys(t,n),e.getInstance().internalizeKeys(t,a)).then(function(n){return e.getInstance().externalizeKeys(t,n)})},attachStateChange:function(t){e.getInstance().stateHandlerRegistry.attachChange(t)},detachStateChange:function(t){e.getInstance().stateHandlerRegistry.detachChange(t)}};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/UIManager",["sap/ui/base/Object","sap/ui/mdc/p13n/P13nBuilder","sap/m/p13n/Container","sap/m/p13n/AbstractContainerItem","sap/base/util/UriParameters","sap/base/Log","sap/ui/thirdparty/jquery"],function(t,e,n,i,r,o,a){"use strict";var s="UIManager: This class is a singleton and should not be used without an AdaptationProvider. Please use 'sap.ui.mdc.p13n.Engine.getInstance().uimanager' instead";var c;var u=r.fromQuery(window.location.search);var d=t.extend("sap.ui.mdc.p13n.UIManager",{constructor:function(e){if(c){throw Error(s)}this.oAdaptationProvider=e;t.call(this)}});d.prototype.show=function(t,e,n){this.bLiveMode=false;if(u.get("sap-ui-xx-p13nLiveMode")==="true"){this.bLiveMode=true;o.warning("Please note that the p13n liveMode is experimental")}if(!this.hasActiveP13n(t)){this.setActiveP13n(t,e);return this.create(t,e).then(function(i){this._openP13nControl(t,e,i,n);return i}.bind(this),function(e){this.setActiveP13n(t,null);o.error("Engine UI failure:"+e.stack)}.bind(this))}else{return Promise.resolve()}};d.prototype.create=function(t,e,n){var i=e instanceof Array?e:[e];var r=typeof t=="string"?sap.ui.getCore().byId(t):t;return this.oAdaptationProvider.initAdaptation(t,i,n).then(function(){return this._retrieveP13nContainer(r,i).then(function(t){r.addDependent(t);return t})}.bind(this))};d.prototype._openP13nControl=function(t,e,n,i){var r=e instanceof Array?e:[e];if(this.bLiveMode){n.openBy(i);delete this.bLiveMode}else{n.open()}if(this.oAdaptationProvider&&this.oAdaptationProvider.validateP13n instanceof Function){r.forEach(function(e){var i=r.length>1;var o;var a=n.getContent()[0];if(i&&a.isA("sap.m.p13n.Container")&&a.getView(e)){o=a.getView(e).getContent()}else{o=a}this.oAdaptationProvider.validateP13n(t,e,o)}.bind(this))}};d.prototype._retrieveP13nContainer=function(t,e){var r=[];var o=e instanceof Array&&e.length>1;var a=this.oAdaptationProvider.getUISettings(t,e);e.forEach(function(t){if(!a[t]){e.splice(e.indexOf(t),1);return}});e.forEach(function(n){var i=a[n].adaptationUI;i._key=n;var s=i.then(function(n){if(this.bLiveMode&&n&&n.attachChange){n.attachChange(function(){this.oAdaptationProvider.handleP13n(t,e)}.bind(this))}if(n&&n.attachChange){n.attachChange(function(i){var r=o?i.getSource().getParent().getParent().getCurrentViewKey():e[0];this.oAdaptationProvider.validateP13n(t,r,n)}.bind(this))}var r=a[i._key];return{key:i._key,tab:r.containerSettings&&r.containerSettings.tabText?r.containerSettings.tabText:i._key,panel:n}}.bind(this));r.push(s)}.bind(this));return Promise.all(r).then(function(r){var s=o?new n({afterViewSwitch:function(e){this.oAdaptationProvider.validateP13n(t,e.getParameter("target"),e.getSource().getCurrentViewContent())}.bind(this)}):r[0].panel;if(o){r.forEach(function(t){if(t.panel){s.addView(new i({key:t.key,text:t.tab,content:t.panel}))}});s.switchView(r[0].key)}return this._createUIContainer(t,e,s,a).then(function(t){return t})}.bind(this))};d.prototype._createUIContainer=function(t,e,n,i){var r;var o=e.length>1?this._getDefaultContainerConfig(i):i[e[0]];if(this.bLiveMode){r=this._createPopover(t,e,n,o)}else{r=this._createModalDialog(t,e,n,o)}return r.then(function(n){n.addStyleClass("sapUiMdcPersonalizationDialog");n.isPopupAdaptationAllowed=function(){return false};if(this.bLiveMode===false){n.setEscapeHandler(function(r){this.setActiveP13n(t,null);e.forEach(function(t){if(i[t].containerSettings&&i[t].containerSettings.afterClose instanceof Function){i[t].containerSettings.afterClose({getSource:function(){return n}})}});n.close();n.destroy();r.resolve()}.bind(this))}n.toggleStyleClass("sapUiSizeCompact",!!a(t).closest(".sapUiSizeCompact").length);return n}.bind(this))};d.prototype._createPopover=function(t,n,i,r){var o=function(e){var n=e.getSource();this.setActiveP13n(t,null);n.destroy()}.bind(this);var a=Object.assign({verticalScrolling:true,reset:r.reset,afterClose:o},r.containerSettings);if(r.resetEnabled){a.reset={onExecute:function(){n.forEach(function(e){this.oAdaptationProvider.reset(t,e)}.bind(this))}}}return e.createP13nPopover(i,a)};d.prototype._createModalDialog=function(t,n,i,r){var o=function(e){var r=e.getSource().getParent();var o=this._confirmContainer(t,n,i);o.then(function(){this.setActiveP13n(t,null);r.close()}.bind(this))}.bind(this);var a=function(e){var n=e.getSource().getParent();this.setActiveP13n(t,null);n.close()}.bind(this);var s=Object.assign({verticalScrolling:true,reset:r.reset||{},afterClose:function(t){var e=t.getSource();if(e){e.destroy()}},cancel:a},r.containerSettings);if(r.resetEnabled){s.reset.onExecute=function(){this.oAdaptationProvider.reset(t,n)}.bind(this)}s.confirm={handler:function(t){o(t)}};return e.createP13nDialog(i,s)};d.prototype.setActiveP13n=function(t,e){if(this.oAdaptationProvider.setActiveP13n instanceof Function){this.oAdaptationProvider.setActiveP13n(t,e)}};d.prototype.hasActiveP13n=function(t){var e=false;if(this.oAdaptationProvider.hasActiveP13n instanceof Function){e=this.oAdaptationProvider.hasActiveP13n(t)}return e};d.prototype._getDefaultContainerConfig=function(t){var e=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var n=Object.keys(t);var i={containerSettings:{title:e.getText("p13nDialog.VIEW_SETTINGS"),verticalScrolling:false,contentHeight:t.contentHeight,contentWidth:t.contentWidth,afterClose:function(e){n.forEach(function(n){if(t[n]&&t[n].containerSettings&&t[n].containerSettings.afterClose instanceof Function){t[n].containerSettings.afterClose(e)}});e.getSource().destroy()}}};if(t.resetEnabled!==false){i.reset={onExecute:function(t){this.oAdaptationProvider.reset(t,n)}.bind(this),warningText:e.getText("p13nDialog.RESET_WARNING_TEXT")}}return i};d.prototype._confirmContainer=function(t,e){return this.oAdaptationProvider.handleP13n(t,e)};d._checkValidInterface=function(t){if(!t||!t.isA("sap.ui.mdc.p13n.AdaptationProvider")){throw Error("The UIManager singleton must not be accessed without an AdaptationProvider interface!")}};d.getInstance=function(t){if(!c){this._checkValidInterface(t);c=new d(t)}return c};d.prototype.destroy=function(){t.prototype.destroy.apply(this,arguments);c=null};return d});
/*
* ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/p13n/modification/FlexModificationHandler",["./ModificationHandler","sap/ui/mdc/p13n/FlexUtil","sap/ui/fl/apply/api/FlexRuntimeInfoAPI","sap/ui/mdc/enum/PersistenceMode"],function(e,t,n,a){"use strict";var i;var r=e.extend("sap.ui.mdc.p13n.modification.FlexModificationHandler");r.prototype.processChanges=function(e,n){var i=e&&e[0]?e[0].selectorElement:undefined;var r=n.mode;var o=r===a.Auto;if(o){r=n.hasVM?"Standard":a.Global}var s=r===a.Global;var l=r===a.Transient;var p=t.handleChanges.call(this,e,s,l);return s?p.then(function(e){return t.saveChanges.call(this,i,e)}):p};r.prototype.waitForChanges=function(e,t){return n.waitForChanges.apply(this,arguments)};r.prototype.reset=function(e,n){var i=n.mode;var r=i===a.Global;var o=!n.hasVM&&n.hasPP&&i===a.Auto;return r||o?t.reset.call(this,e):t.restore.call(this,e)};r.prototype.isModificationSupported=function(e,t){return n.isFlexSupported.apply(this,arguments)};r.getInstance=function(){if(!i){i=new r}return i};return r});
/*
* ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/mdc/p13n/modification/ModificationHandler",["sap/ui/base/Object","sap/base/util/merge","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,i,o){"use strict";var r;var t=e.extend("sap.ui.mdc.p13n.modification.ModificationHandler");t.prototype.processChanges=function(e,i){return Promise.resolve()};t.prototype.waitForChanges=function(e,i){return Promise.resolve()};t.prototype.reset=function(e,i){return Promise.resolve()};t.prototype.isModificationSupported=function(e,i){return false};t.getInstance=function(){if(!r){r=new t}return r};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/modules/DefaultProviderRegistry",["sap/ui/base/Object","sap/ui/mdc/p13n/PersistenceProvider"],function(e,t){"use strict";var r="DefaultProviderRegistry: This class is a singleton and should not be used without an AdaptationProvider. Please use 'sap.ui.mdc.p13n.Engine.getInstance().defaultProviderRegistry' instead";var i;var o=e.extend("sap.ui.mdc.p13n.modules.DefaultProviderRegistry",{constructor:function(t){if(i){throw Error(r)}e.call(this);this._mDefaultProviders={};this._oEngine=t}});o.prototype.destroy=function(){Object.keys(this._mDefaultProviders).forEach(function(e){this._mDefaultProviders[e].destroy();delete this._mDefaultProviders[e]}.bind(this));this._oEngine=null;e.prototype.destroy.apply(this,arguments);i=null};o.prototype.attach=function(e,t){if(this._oEngine.isRegisteredForModification(e)){throw new Error("DefaultProviderRegistry: You must not change the modificationSettings for an already registered element")}var r=this._retrieveDefaultProvider(t);var i=typeof e==="string"?e:e.getId();if(r.getFor().indexOf(i)===-1){r.addFor(e)}return r};o.prototype.detach=function(e){Object.keys(this._mDefaultProviders).forEach(function(t){var r=this._mDefaultProviders[t];r.removeFor(e)}.bind(this))};o.prototype._retrieveDefaultProvider=function(e){this._mDefaultProviders[e]=this._mDefaultProviders[e]||new t({mode:e});return this._mDefaultProviders[e]};o.getInstance=function(e){if(!i){i=new o(e)}return i};return o});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/modules/StateHandlerRegistry",["sap/ui/base/EventProvider"],function(t){"use strict";var e="StateHandlerRegistry: This class is a singleton and should not be used without an AdaptationProvider. Please use 'sap.ui.mdc.p13n.Engine.getInstance().stateHandlerRegistry' instead";var n;var a=t.extend("sap.ui.mdc.p13n.modules.StateHandlerRegistry",{constructor:function(){if(n){throw Error(e)}t.call(this)}});a.prototype.attachChange=function(e){return t.prototype.attachEvent.call(this,"stateChange",e)};a.prototype.detachChange=function(e){return t.prototype.detachEvent.call(this,"stateChange",e)};a.prototype.fireChange=function(e){return t.prototype.fireEvent.call(this,"stateChange",{control:e})};a.getInstance=function(){if(!n){n=new a}return n};return a});
/*
* ! {copyright}
*/
sap.ui.predefine("sap/ui/mdc/p13n/modules/xConfigAPI",["sap/base/util/merge","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,t){"use strict";var r={};r.enhanceConfig=function(n,a){var i=a.propertyBag;var o=i?i.modifier:t;var g;var u;return o.getControlMetadata(n).then(function(e){g=e;a.controlMetadata=g;return o.getAggregation(n,"customData")}).then(function(e){return Promise.all(e.map(function(e){return o.getProperty(e,"key")})).then(function(t){return e.reduce(function(e,r,n){return t[n]==="xConfig"?r:e},undefined)})}).then(function(t){u=t;if(u){return o.getProperty(u,"value").then(function(t){return e({},JSON.parse(t.replace(/\\/g,"")))})}return{aggregations:{}}}).then(function(t){var g=r.createConfigObject(n,a,t);var f=i?i.appComponent:undefined;var c=Promise.resolve();if(u&&n.isA){c=o.removeAggregation(n,"customData",u).then(function(){return o.destroy(u)})}return c.then(function(){return o.createAndAddCustomData(n,"xConfig",JSON.stringify(g),f).then(function(){return e({},g)})})})};r.readConfig=function(r,n){var a,i;if(n){var o=n.propertyBag?n.propertyBag.modifier:t;return o.getAggregation(r,"customData").then(function(e){return Promise.all(e.map(function(e){return o.getProperty(e,"key")})).then(function(t){return e.reduce(function(e,r,n){return t[n]==="xConfig"?r:e},undefined)})}).then(function(t){if(t){return o.getProperty(t,"value").then(function(t){return e({},JSON.parse(t.replace(/\\/g,"")))})}return null})}var g=function(e,t){var r=function(e,t){if(e){if(e.getMetadata){var r=e.getMetadata();var n=r.getAllAggregations();if(n){return n[t]}}}return undefined};var n=r(e,t);if(n){return e[n._sGetter]()}return undefined};var u=function(e,t){var r=e.getMetadata().getPropertyLikeSetting(t);if(r){var n=r._sGetter;return e[n]()}return undefined};i=g(r,"customData").find(function(e){return u(e,"key")=="xConfig"});a=i?e({},JSON.parse(u(i,"value").replace(/\\/g,""))):null;return a};r.createConfigObject=function(e,t,r){var n=t.name;var a=t.controlMeta;var i=a.property;var o=t.value;var g=t.controlMetadata||e.getMetadata();var u=a.aggregation;var f=u?u:g.getDefaultAggregation().name;var c=r||{aggregations:{}};if(!c.aggregations.hasOwnProperty(f)){if(g.hasAggregation(f)){c.aggregations[f]={}}else{throw new Error("The aggregation "+f+" does not exist for"+e)}}if(!c.aggregations.hasOwnProperty(n)){c.aggregations[f][n]={}}if(o!==null){c.aggregations[f][n][i]=o}else{delete c.aggregations[f][n][i];if(Object.keys(c.aggregations[f][n]).length===0){delete c.aggregations[f][n];if(Object.keys(c.aggregations[f]).length===0){delete c.aggregations[f]}}}return c};return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/panels/ActionToolbarPanel",["sap/m/p13n/SelectionPanel","sap/ui/model/Sorter"],function(e,t){"use strict";var a=e.extend("sap.ui.mdc.p13n.panels.ActionToolbarPanel",{metadata:{library:"sap.ui.mdc"},renderer:{apiVersion:2}});a.prototype._bindListItems=function(e){var a=this.getAggregation("_template");if(a){var n=function(e){return e.getProperty("alignment")};var i=new t({path:"alignment",descending:false,group:n});this._oListControl.bindItems(Object.assign({path:this.P13N_MODEL+">/items",sorter:i,key:"name",templateShareable:false,template:this.getAggregation("_template").clone()},e))}};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/panels/AdaptFiltersPanel",["sap/m/p13n/AbstractContainer","sap/m/p13n/AbstractContainerItem","sap/m/p13n/SelectionPanel","./GroupView","sap/ui/model/Filter","sap/m/Button","sap/m/Bar","sap/m/ToolbarSpacer","sap/m/Select","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/SearchField","sap/m/OverflowToolbarLayoutData","sap/ui/core/Item","sap/m/library","sap/ui/model/json/JSONModel"],function(e,t,i,s,n,r,o,a,h,c,u,l,p,g,d,_){"use strict";var w=d.BarDesign;var y=e.extend("sap.ui.mdc.p13n.panels.AdaptFiltersPanel",{metadata:{library:"sap.ui.mdc",properties:{itemFactory:{type:"function"},enableReorder:{type:"boolean",defaultValue:true}}},renderer:{apiVersion:2}});y.prototype.GROUP_KEY="group";y.prototype.LIST_KEY="list";y.prototype.P13N_MODEL="$p13n";y.prototype.applySettings=function(n){this.addView(new t({key:this.LIST_KEY,content:new i(this.getId()+"-listView",{activeColumn:this._getResourceText("p13nDialog.LIST_VIEW_ACTIVE"),change:function(e){this.getP13nModel().setProperty("/items",e.getSource().getP13nData())}.bind(this)})}));this.addView(new t({key:this.GROUP_KEY,content:new s(this.getId()+"-groupView",{change:function(e){this.getP13nModel().setProperty("/itemsGrouped",e.getSource().getP13nData())}.bind(this)})}));e.prototype.applySettings.apply(this,arguments);this.getView(this.LIST_KEY).getContent().setEnableReorder(this.getEnableReorder());var r=this._getQuickFilter();var h=this._getViewSwitch();var c=this._getShowHideBtn();var u=new o({contentMiddle:[r,new a,c,h]});u.setDesign(w.SubHeader);this.setHeader(u);var l=new o({contentMiddle:[this._getSearchField()]});l.addStyleClass("sapUiMDCAdaptFiltersSearchBar");l.setDesign(w.SubHeader);this.setSubHeader(l);this.addStyleClass("sapUiMDCAdaptFiltersPanel")};y.prototype.setItemFactory=function(e){this.setProperty("itemFactory",e);this.getViews().forEach(function(t){var i=t.getContent();i.setItemFactory(e)});return this};y.prototype.switchView=function(t){var i=t;e.prototype.switchView.call(this,i);this._getShowHideBtn().setVisible(!this._isCustomView());this._getViewSwitch().setSelectedKey(this.getCurrentViewKey());if(!this._isCustomView(t)){this.showFactory(this.getCurrentViewContent()._getShowFactory())}this._filterByModeAndSearch()};y.prototype.addCustomView=function(e){var i=e.item;var s=i.getKey();var n=e.content;var r=e.search;var o=e.selectionChange;var a=e.filterSelect;if(!s){throw new Error("Please provide an item of type sap.m.SegmentedButtonItem with a key")}if(this._oViewSwitch){this._oViewSwitch.attachSelectionChange(function(e){if(o){o(e.getParameter("item").getKey())}if(this._isCustomView()){if(r instanceof Function){r(this._getSearchField().getValue())}if(a instanceof Function){a(this._getQuickFilter().getSelectedKey())}}}.bind(this))}if(r instanceof Function){this._getSearchField().attachLiveChange(function(e){if(this._isCustomView()){r(this._getSearchField().getValue())}}.bind(this))}if(a instanceof Function){this._getQuickFilter().attachChange(function(e){if(this._isCustomView()){a(this._getQuickFilter().getSelectedKey())}}.bind(this))}this.addView(new t({key:s,content:n.addStyleClass("sapUiMDCPanelPadding")}));var h=this._getViewSwitch();h.addItem(i)};y.prototype.showFactory=function(e){if(this.getCurrentViewContent().showFactory){this.getCurrentViewContent().showFactory(e)}};y.prototype.getSelectedFields=function(){return this.getCurrentViewContent().getSelectedFields()};y.prototype.setGroupExpanded=function(e,t){this.getView(this.GROUP_KEY).getContent().setGroupExpanded(e,t)};y.prototype.setP13nModel=function(e){this.setModel(e,this.P13N_MODEL);this.getView(this.LIST_KEY).getContent().setP13nData(e.getProperty("/items"));this.getView(this.GROUP_KEY).getContent().setP13nData(e.getProperty("/itemsGrouped"));this._filterByModeAndSearch()};y.prototype.setP13nData=function(e){var t=this.getP13nModel();if(!t){this.setP13nModel(new _(e))}else{this.getView(this.LIST_KEY).getContent().setP13nData(t.getProperty("/items"));this.getView(this.GROUP_KEY).getContent().setP13nData(t.getProperty("/itemsGrouped"))}};y.prototype.restoreDefaults=function(){this._getSearchField().setValue("");this._filterByModeAndSearch()};y.prototype.getP13nModel=function(){return this.getModel(this.P13N_MODEL)};y.prototype._getShowHideBtn=function(){var e=this._getResourceText("filterbar.ADAPT_SHOW_VALUE");var t=this._getResourceText("filterbar.ADAPT_HIDE_VALUE");if(!this._oShowHideBtn){this._oShowHideBtn=new r({press:function(i){this.showFactory(!this.getCurrentViewContent()._getShowFactory());var s=i.oSource;var n=s.getText()===e?t:e;s.setText(n)}.bind(this)})}this._oShowHideBtn.setText(!this._isCustomView()&&this.getCurrentViewContent()._getShowFactory()?t:e);return this._oShowHideBtn};y.prototype._getQuickFilter=function(){if(!this._oGroupModeSelect){this._oGroupModeSelect=new h({items:[new g({key:"all",text:this._getResourceText("p13nDialog.GROUPMODE_ALL")}),new g({key:"visible",text:this._getResourceText("p13nDialog.GROUPMODE_VISIBLE")}),new g({key:"active",text:this._getResourceText("p13nDialog.GROUPMODE_ACTIVE")}),new g({key:"visibleactive",text:this._getResourceText("p13nDialog.GROUPMODE_VISIBLE_ACTIVE")}),new g({key:"mandatory",text:this._getResourceText("p13nDialog.GROUPMODE_MANDATORY")})],tooltip:this._getResourceText("p13nDialog.QUICK_FILTER"),change:this._onGroupModeChange.bind(this)})}return this._oGroupModeSelect};y.prototype._getSearchField=function(){if(!this._oSearchField){this._oSearchField=new l(this.getId()+"-searchField",{liveChange:[this._filterByModeAndSearch,this],width:"100%",layoutData:new p({shrinkable:true,moveToOverflow:true,priority:"High",maxWidth:"16rem"})});this._oSearchField.setPlaceholder(this._getResourceText("p13nDialog.ADAPT_FILTER_SEARCH"))}return this._oSearchField};y.prototype._onGroupModeChange=function(e){this._sModeKey=e.getParameters().selectedItem.getKey();this._filterByModeAndSearch()};y.prototype._getViewSwitch=function(){if(!this._oViewSwitch){this._oViewSwitch=new c({items:[new u({tooltip:this._getResourceText("filterbar.ADAPT_LIST_VIEW"),icon:"sap-icon://list",key:this.LIST_KEY}),new u({tooltip:this._getResourceText("filterbar.ADAPT_GROUP_VIEW"),icon:"sap-icon://group-2",key:this.GROUP_KEY})],selectionChange:function(e){if(this.getCurrentViewKey()===this.LIST_KEY){this.getCurrentViewContent()._removeMoveButtons()}var t=e.getParameter("item").getKey();this.switchView(t)}.bind(this)})}return this._oViewSwitch};y.prototype._isCustomView=function(){return this._sCurrentView!=this.GROUP_KEY&&this._sCurrentView!=this.LIST_KEY};y.prototype._filterByModeAndSearch=function(){if(this._isCustomView(this.getCurrentViewKey())){return}this._sSearchString=this._getSearchField().getValue();var e=this._createFilterQuery();this._getSearchField().setValue(this._sSearchString);this.getCurrentViewContent().filterContent(e);return e};y.prototype._getResourceText=function(e){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText(e)};y.prototype._createFilterQuery=function(){var e=[],t=[],i=[];if(this._sSearchString){e=[new n("label","Contains",this._sSearchString),new n("tooltip","Contains",this._sSearchString)];i=new n(e,false)}switch(this._sModeKey){case"visible":t=new n("visible","EQ",true);break;case"active":t=new n("active","EQ",true);break;case"mandatory":t=new n("required","EQ",true);break;case"visibleactive":t=new n([new n("active","EQ",true),new n("visible","EQ",true)],true);break;default:}var s=new n("visibleInDialog","EQ",true);return new n([].concat(i,t,s),true)};y.prototype.exit=function(){e.prototype.exit.apply(this,arguments);this._sModeKey=null;this._sSearchString=null};return y});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/panels/ChartItemPanel",["sap/m/p13n/BasePanel","sap/m/Label","sap/m/ColumnListItem","sap/m/Select","sap/m/Text","sap/ui/core/Item","sap/ui/mdc/library","sap/m/Button","sap/m/Column","sap/m/Table","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/VBox","sap/m/HBox","sap/m/ComboBox","sap/ui/model/Sorter","sap/base/Log","sap/m/library","sap/ui/Device","sap/ui/core/ResizeHandler","sap/ui/core/CustomData","sap/ui/thirdparty/jquery","sap/ui/core/ValueState"],function(e,t,i,n,o,r,s,a,l,h,p,g,u,m,d,_,f,c,v,I,y,M,b){"use strict";var P=c.FlexJustifyContent;var C=sap.ui.getCore();var O=e.extend("sap.ui.mdc.p13n.panels.ChartItemPanel",{metadata:{library:"sap.ui.mdc",properties:{panelConfig:{type:"object"}},events:{changeItems:{}}},init:function(){this._bMobileMode=v.system.phone;e.prototype.init.apply(this,arguments);this._bindListItems()},renderer:{}});O.prototype._setInnerLayout=function(){this._oInnerControl=new u({items:[this._oListControl]});this.setAggregation("_content",this._oInnerControl);this._fnHandleResize=function(){if(this.getParent){var e=null;var t=this.getParent();if(t&&t.$){e=t.$("cont");if(e.children().length>0){var i=this._oInnerControl.$()[0].clientWidth;var n=570;if(!this._bMobileMode&&i<=n){this._switchMobileMode(true)}else if(this._bMobileMode&&i>n){this._switchMobileMode(false)}}}}};if(v.system.desktop){this._sContainerResizeListener=I.register(this._oInnerControl,this._fnHandleResize.bind(this))}};O.prototype._switchMobileMode=function(e){if(this._bMobileMode==e){return}this._bMobileMode=e;if(this._sContainerResizeListener){I.deregister(this._sContainerResizeListener);this._sContainerResizeListener=null}this._oListControl.destroy();this._oDragDropInfo=null;this._oListControl=this._createInnerListControl();this._oListControl.setMultiSelectMode("ClearAll");this._setInnerLayout();this._bindListItems()};O.prototype._createInnerListControl=function(){var e=this._bMobileMode?this.getId()+"-innerP13nListMobile":this.getId()+"-innerP13nList";var t=new h(e,Object.assign(this._getListControlConfig(),{}));this.setEnableReorder(true);t.addEventDelegate({onAfterRendering:this._onAfterTableRender.bind(this)});return t};O.prototype._onAfterTableRender=function(){if(this._oFocusInfo&&this._oFocusInfo.tableItem){this._oFocusInfo.tableItem.focus()}this._mInvalidMap.forEach(function(e,t){if(this._mNamesMap.has(t)){this._mNamesMap.get(t).setValueState(b.Error);this._mNamesMap.get(t).setValue(e)}}.bind(this));this._oFocusInfo=null};O.prototype._bindListItems=function(e){var t;var i=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");if(this.getPanelConfig()&&this.getPanelConfig().sorter){t=this.getPanelConfig().sorter}else{var n={text:i.getText("chart.PERSONALIZATION_DIALOG_MEASURE_GROUP_HEADER")};var o={text:i.getText("chart.PERSONALIZATION_DIALOG_DIMENSION_GROUP_HEADER")};var r={Aggregatable:n,Groupable:o,Measure:n,Dimension:o};var s=function(e){var t=e.getProperty("kind");return{key:t,text:r[t].text}};var a=function(e,t){if(e===t){return 0}if(e==="MEASURE"||e==="AGGREGATABLE"){return 1}return-1};t=new _("kind",false,s,a)}var l;this._mTemplatesMap=new Map;this._mNamesMap=new Map;this._mInvalidMap=new Map;if(this._bMobileMode){l=this._createListItemMobile}else{l=this._createListItem}this._oListControl.bindItems(Object.assign({path:this.P13N_MODEL+">/items",key:"name",filters:[new p({filters:[new p("visible",g.EQ,true),new p("template",g.EQ,true)],and:false})],factory:l.bind(this),sorter:t},e))};O.prototype._getTemplateComboBox=function(e){var t=new p("visible",g.EQ,false);var i=new d({id:"p13nPanel-templateComboBox-"+e,width:"100%",placeholder:this._getPlaceholderTextForTemplate(e),items:{path:this.P13N_MODEL+">/items",template:new r({key:"{"+this.P13N_MODEL+">name}",text:"{"+this.P13N_MODEL+">label}"}),templateShareable:false,filters:[t,new p("kind",g.EQ,e)]},change:[this.onChangeOfTemplateName,this]});this._mTemplatesMap.set(e,i);return i};O.prototype._getPlaceholderTextForTemplate=function(e){var t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");return t.getText("chart.PERSONALIZATION_DIALOG_TEMPLATE_PLACEHOLDER")};O.prototype._getRoleSelect=function(){return new n({width:"100%",selectedKey:"{"+this.P13N_MODEL+">role}",change:[this.onChangeOfRole,this],forceSelection:false,items:{path:this.P13N_MODEL+">availableRoles",templateShareable:false,template:new r({key:"{"+this.P13N_MODEL+">key}",text:"{"+this.P13N_MODEL+">text}"})},visible:{path:this.P13N_MODEL+">availableRoles",formatter:function(e){if(!e){return false}return e.length>1}}})};O.prototype._getNameComboBox=function(e,t){var i=new p({filters:[new p("visible",g.EQ,false),new p("name",g.EQ,t)],and:false});return new d({width:"100%",items:{path:this.P13N_MODEL+">/items",template:new r({key:"{"+this.P13N_MODEL+">name}",text:"{"+this.P13N_MODEL+">label}"}),templateShareable:false,filters:[i,new p("kind",g.EQ,e)]},change:[this.onChangeOfItemName,this],selectedKey:"{"+this.P13N_MODEL+">tempName}",customData:[new y({key:"prevName",value:t}),new y({key:"prevKind",value:e})]})};O.prototype._createListItem=function(e,t){var n,o=[];if(t.getObject()&&t.getObject().template){o.push(this._getTemplateComboBox(t.getObject().kind))}else{var r;if(t.getObject().name!=t.getObject().tempName){t.getObject().tempName=t.getObject().name}r=this._getNameComboBox(t.getObject().kind,t.getObject().name);o.push(r);o.push(this._getRoleSelect());n=this.getId()+t.getObject().kind+"-RemoveBtn-"+t.getObject().name;o.push(new m({justifyContent:P.End,items:[new a({id:n,press:[this._onPressHide,this],type:"Transparent",icon:"sap-icon://decline",tooltip:this._getResourceTextMDC("chart.PERSONALIZATION_DIALOG_REMOVE_ENTRY"),customData:[new y({key:"propertyName",value:"{"+this.P13N_MODEL+">name}"}),new y({key:"propertyKind",value:"{"+this.P13N_MODEL+">kind}"})]})]}));this._mNamesMap.set(t.getObject().name,r)}var s;if(t.getObject()&&t.getObject().template){var l=t.getObject().kind;s=new i({cells:o,visible:{path:this.P13N_MODEL+">/items",formatter:function(e){e=e.filter(function(e){return e.visible===false&&e.template===false&&e.kind===l});return e.length!=0}}})}else{s=new i({cells:o})}s.addEventDelegate({onmouseover:this._hoverHandler.bind(this),onfocusin:this._focusHandler.bind(this),onkeydown:this._handleOnKeyDown.bind(this)});return s};O.prototype._createListItemMobile=function(e,t){var n,o=[];if(t.getObject()&&t.getObject().template){o.push(this._getTemplateComboBox(t.getObject().kind))}else{var r=new u({items:[this._getNameComboBox(t.getObject().kind,t.getObject().name),this._getRoleSelect()]});n=t.getObject().kind+"-RemoveBtn-"+t.getObject().name;o.push(r)}var s=new m({justifyContent:P.End,items:[new a({id:n,press:[this._onPressHide,this],type:"Transparent",icon:"sap-icon://decline",visible:{path:this.P13N_MODEL+">template",formatter:function(e){return!e}},customData:[new y({key:"propertyName",value:"{"+this.P13N_MODEL+">name}"}),new y({key:"propertyKind",value:"{"+this.P13N_MODEL+">kind}"})]})]});o.push(s);var l;if(t.getObject()&&t.getObject().template){var h=t.getObject().kind;l=new i({cells:o,visible:{path:this.P13N_MODEL+">/items",formatter:function(e){e=e.filter(function(e){return e.visible===false&&e.template===false&&e.kind===h});return e.length!=0}}})}else{l=new i({cells:o})}l.addEventDelegate({onmouseover:this._hoverHandler.bind(this),onfocusin:this._focusHandler.bind(this),onkeydown:this._handleOnKeyDown.bind(this)});return l};O.prototype._handleOnKeyDown=function(e){if(e.keyCode===38&&e.ctrlKey){}else if(e.keyCode===40&&e.ctrlKey){}else if(e.keyCode===68&&e.ctrlKey){var t,i=C.byId(e.currentTarget.id);if(this._bMobileMode){t=i.getCells()[1].getItems()[i.getCells()[1].getItems().length-1]}else{t=i.getCells()[2].getItems()[i.getCells()[2].getItems().length-1]}if(t){this._onPressHide(e,t);e.preventDefault()}}};O.prototype._focusHandler=function(t){var i=C.byId(t.target.id);if(i instanceof a){return}e.prototype._focusHandler.apply(this,arguments)};O.prototype._handleActivated=function(e){var t=this._getModelItemByTableItem(e);if(t&&t.template){this.removeMoveButtons()}this._oHoveredItem=e;this._updateEnableOfMoveButtons(e,false);this._addMoveButtons(e);this._setMoveButtonVisibility(true)};O.prototype.onChangeOfItemName=function(e){var t=e.getSource().data().prevName;var i=e.getSource().data().prevKind;var n=e.getSource().getSelectedKey();var o=this._getP13nModel().getProperty("/items").find(function(e){return e.name===t&&e.kind===i});var r=this._getP13nModel().getProperty("/items").find(function(e){return e.name===n&&e.kind===i});this.removeMoveButtons();if(o&&r){o.visible=false;r.visible=true;o.tempName=o.name;r.role=o.role;this._moveItemsByIndex(this._getItemIndex(r),this._getItemIndex(o));this._refreshP13nModel();this._fireChangeItems();this._updateVisibleIndexes();this._mInvalidMap.delete(t);this._mInvalidMap.delete(n)}else if(e.getSource()&&e.getSource()instanceof d){this._mInvalidMap.set(e.getSource().data("prevName"),e.getSource().getValue());e.getSource().setValueState(b.Error)}};O.prototype._getItemIndexByNameAndKind=function(e,t){var i=this._getP13nModel().getProperty("/items");var n=i.find(function(i){return i.name===e&&i.kind===t&&!i.template});return this._getItemIndex(n)};O.prototype._getItemIndex=function(e){return this._getP13nModel().getProperty("/items").indexOf(e)};O.prototype.removeMoveButtons=function(){var e=this._getMoveButtonContainer();if(e){e.removeItem(this._getMoveBottomButton());e.removeItem(this._getMoveDownButton());e.removeItem(this._getMoveUpButton());e.removeItem(this._getMoveTopButton())}};O.prototype.getP13nData=function(){var e=this._getCleanP13nItems();this._getP13nModel().setProperty("/items",e);return e};O.prototype._getMoveButtonContainer=function(){if(this._oMoveUpButton&&this._oMoveUpButton.getParent()&&this._oMoveUpButton.getParent().isA("sap.m.FlexBox")){return this._oMoveUpButton.getParent()}return undefined};O.prototype._addMoveButtons=function(e){var t=e;if(!t){return}var i=this._getP13nModel().getProperty(t.getBindingContextPath())?this._getP13nModel().getProperty(t.getBindingContextPath()).template:true;if(t.getCells()&&(t.getCells().length===2||t.getCells().length===3)&&!i){if(this._bMobileMode){t.getCells()[1].insertItem(this._getMoveDownButton(),0);t.getCells()[1].insertItem(this._getMoveUpButton(),0)}else{t.getCells()[2].insertItem(this._getMoveBottomButton(),0);t.getCells()[2].insertItem(this._getMoveDownButton(),0);t.getCells()[2].insertItem(this._getMoveUpButton(),0);t.getCells()[2].insertItem(this._getMoveTopButton(),0)}}};O.prototype._moveSelectedItem=function(){this._oSelectedItem=this._getMoveButtonContainer().getParent();e.prototype._moveSelectedItem.apply(this,arguments)};O.prototype._updateAvailableRolesForItems=function(){var e=this._getP13nModel().getProperty("/items");var t=[];if(this.getPanelConfig()&&this.getPanelConfig().allowedLayoutOptions){t=this.getPanelConfig().allowedLayoutOptions}else{f.warning("No allowedLayoutOptions configured for chart type. This will not show any p13n options!")}e.forEach(function(e){if(!e.availableRoles){return}e.availableRoles=e.availableRoles.filter(function(e){return t.indexOf(e.key)!=-1})});this._getP13nModel().setProperty("/items",e);this._refreshP13nModel()};O.prototype._onPressHide=function(e,t){var i;if(t){i=t.data().propertyName}else{i=e.getSource().data().propertyName}var n=M.extend([],this._getP13nModel().getProperty("/items"),true);n.filter(function(e){return e.name===i}).forEach(function(e){e.visible=false;if(this._mTemplatesMap.has(e.kind)&&this._mTemplatesMap.get(e.kind).getVisible()){this._mTemplatesMap.get(e.kind).focus()}}.bind(this));this._getP13nModel().setProperty("/items",n);this._refreshP13nModel();this._fireChangeItems();this._updateVisibleIndexes()};O.prototype.setP13nData=function(t){t=t.filter(function(e){return!e.template});e.prototype.setP13nData.apply(this,arguments);var i=[];var n=[];this.getP13nData().forEach(function(e,t){if(!e.availableRoles){e.availableRoles=this._getChartItemTextByKey(e.kind)}if(this.getPanelConfig()&&this.getPanelConfig().allowedLayoutOptions){var o=this.getPanelConfig().allowedLayoutOptions;if(o&&o.length>=1){e.availableRoles=e.availableRoles.filter(function(e){return o.indexOf(e.key)!=-1});if(o.indexOf(e.role)===-1){e.role=o[0]}}}e.template=false;e.tempName=e.name;if(!e.visible){n.push(e)}if(!e.index){e.index=t}i.push(e)}.bind(this));i=i.concat(this._getTemplateItems());this._getP13nModel().setProperty("/items",i);this._updateVisibleIndexes()};O.prototype._updateVisibleIndexes=function(){this._mVisibleIndexes=new Map;this._getP13nModel().getProperty("/items").forEach(function(e,t){if(e.template||!e.visible){return}if(this._mVisibleIndexes.has(e.kind)){this._mVisibleIndexes.get(e.kind).push(t)}else{var i=[t];this._mVisibleIndexes.set(e.kind,i)}}.bind(this))};O.prototype.onChangeOfTemplateName=function(e){var t=e.getSource().getSelectedKey();var i=this._getCleanP13nItems().find(function(e){return e.name===t});if(i){i.visible=true;e.getSource().setSelectedKey(undefined);this._refreshP13nModel();var n=this._mVisibleIndexes.has(i.kind)?this._mVisibleIndexes.get(i.kind):[];var o=this._getItemIndexByNameAndKind(i.name,i.kind);var r=n[n.length-1];if(o>r){r+=1}if(r&&o!=r){this._moveItemsByIndex(o,r,true)}else{this._fireChangeItems()}this._mInvalidMap.delete(e.getSource().getValue());this._updateVisibleIndexes()}else if(e.getSource()&&e.getSource()instanceof d){if(e.getSource().getValue()!=""){e.getSource().setValueState(b.Error)}else{e.getSource().setValueState(b.None)}}};O.prototype._refreshP13nModel=function(){this._getP13nModel().refresh(true)};O.prototype._getTemplateItems=function(){var e=[];if(!this.getPanelConfig()||!this.getPanelConfig().templateConfig){return[]}this.getPanelConfig().templateConfig.forEach(function(t){var i={template:true,kind:t.kind};e.push(i)});return e};O.prototype._getListControlConfig=function(){var t=e.prototype._getListControlConfig.apply(this,arguments);if(this._bMobileMode){t.columns=[new l({header:new o({text:this._getResourceTextMDC("chart.PERSONALIZATION_DIALOG_COLUMN_DESCRIPTION")+" / "+this._getResourceTextMDC("chart.PERSONALIZATION_DIALOG_COLUMN_ROLE")})}),new l]}else{var i=new l({header:new o({text:this._getResourceTextMDC("chart.PERSONALIZATION_DIALOG_COLUMN_DESCRIPTION")})});var n=new l({header:new o({text:this._getResourceTextMDC("chart.PERSONALIZATION_DIALOG_COLUMN_ROLE")})});t.columns=[i,n,new l]}t.mode="None";return t};O.prototype._getCleanP13nItems=function(){return this._getP13nModel().getProperty("/items").filter(function(e){return!e.template})};O.prototype._fireChangeItems=function(){this.fireChangeItems({items:this._getCleanP13nItems().map(function(e){return{columnKey:e.name,visible:e.visible,index:e.index,role:e.role}})})};O.prototype.onChangeOfRole=function(e){var t=e.getParameter("selectedItem");if(t){var i;if(this._bMobileMode){i=e.getSource().getParent().getParent()}else{i=e.getSource().getParent()}this.fireChange();this._updateEnableOfMoveButtons(i)}this._fireChangeItems()};O.prototype._updateEnableOfMoveButtons=function(e,t){if(!e){return}var i,n=this._getModelItemByTableItem(e);var o=this._getP13nModel().getProperty("/items").indexOf(n);var r=true,s=true;if(!n||n.template){return}i=this._mVisibleIndexes.has(n.kind)?this._mVisibleIndexes.get(n.kind):[];if(o==0||i.indexOf(o)===0){r=false}if(i.indexOf(o)===i.length-1){s=false}this._getMoveTopButton().setEnabled(r);this._getMoveUpButton().setEnabled(r);this._getMoveDownButton().setEnabled(s);this._getMoveBottomButton().setEnabled(s);if(t){this._oFocusInfo={tableItem:e}}};O.prototype._getListItemFromMoveButton=function(e){if(e&&e.getParent()&&e.getParent().getParent()){return e.getParent().getParent()}return undefined};O.prototype._onPressButtonMoveToTop=function(e){var t=this._getListItemFromMoveButton(e.getSource());if(!t){return}var i=this._getP13nModel().getProperty(t.getBindingContextPath());var n=this._mVisibleIndexes.get(i.kind)[0];this._oSelectedItem=t;this._moveSelectedItem(n)};O.prototype._onPressButtonMoveUp=function(e,t){if(!t){t=this._getListItemFromMoveButton(e.getSource())}if(!t){return}var i=this._getP13nModel().getProperty(t.getBindingContextPath());var n=this._mVisibleIndexes.get(i.kind);var o=this._getP13nModel().getProperty("/items").indexOf(i);this._oSelectedItem=t;var r=n[n.indexOf(o)-1];this._moveSelectedItem(r)};O.prototype._onPressButtonMoveDown=function(e,t){if(!t){t=this._getListItemFromMoveButton(e.getSource())}if(!t){return}var i=this._getP13nModel().getProperty(t.getBindingContextPath());var n=this._mVisibleIndexes.get(i.kind);var o=this._getP13nModel().getProperty("/items").indexOf(i);this._oSelectedItem=t;var r=n[n.indexOf(o)+1];this._moveSelectedItem(r)};O.prototype._onPressButtonMoveToBottom=function(e){var t=this._getListItemFromMoveButton(e.getSource());if(!t){return}var i=this._getP13nModel().getProperty(t.getBindingContextPath());var n=this._mVisibleIndexes.get(i.kind)[this._mVisibleIndexes.get(i.kind).length-1];this._oSelectedItem=t;this._moveSelectedItem(n)};O.prototype._moveTableItem=function(e,t){var i=this._getP13nModel().getProperty("/items");var n=i.indexOf(e.getBindingContext(this.P13N_MODEL).getObject());this._moveItemsByIndex(n,t)};O.prototype._moveItemsByIndex=function(e,t,i){var n=this._getP13nModel().getProperty("/items");t=t<=0?0:Math.min(t,n.length-1);if(t==e){return}n.splice(t,0,n.splice(e,1)[0]);n.forEach(function(e,t){if(!e.template){e.index=t}});this._getP13nModel().setProperty("/items",n);if(!i){this._oSelectedItem=this._oListControl.getItems().find(function(e){var i=this._getModelItemByTableItem(e);return i&&i===n[t]}.bind(this));this._updateEnableOfMoveButtons(this._oSelectedItem,!i);this._handleActivated(this._oSelectedItem)}this._fireChangeItems()};O.prototype._getModelItemByTableItem=function(e){return this._getP13nModel().getProperty(e.getBindingContextPath())};O.prototype._getMoveConfigForTableItem=function(e){var t=this._getModelItemByTableItem(e);if(!t){return undefined}return{currentIndex:this._getP13nModel().getProperty("/items").indexOf(t),aggregationRole:t.kind,template:t.template}};O.prototype._getDragDropConfig=function(){if(!this._oDragDropInfo){var t=e.prototype._getDragDropConfig.apply(this,arguments);t.attachDragStart(this._checkDragStart.bind(this));t.attachDragEnter(this._checkDrag.bind(this));t.attachDragEnd(function(){this._oDraggedItem=null}.bind(this));return t}return this._oDragDropInfo};O.prototype._checkDrag=function(e){var t=e.getParameter("target");var i=this._getMoveConfigForTableItem(t);var n=this._getMoveConfigForTableItem(this._oDraggedItem);if(!i||i.template||n.aggregationRole!=i.aggregationRole){e.preventDefault();return}};O.prototype._checkDragStart=function(e){this._oDraggedItem=e.getParameter("target");this._checkDrag(e)};O.prototype._onRearrange=function(e){var t=e.getParameter("draggedControl");var i=e.getParameter("droppedControl");var n=e.getParameter("dropPosition");var o=this._getMoveConfigForTableItem(t);var r=this._getMoveConfigForTableItem(i);if(!o||o.template||!r){e.preventDefault();return}var s=o.currentIndex;var a=r.currentIndex;if(r.template&&n=="After"){e.preventDefault();return}if(!r.template&&(o.aggregationRole!=undefined&&o.aggregationRole!=r.aggregationRole)){e.preventDefault();return}if(s<a){if(n=="Before"&&a!=0){a-=1}}else if(n=="After"){a+=1}this._moveItemsByIndex(s,a);this._refreshP13nModel();this._updateVisibleIndexes()};O.prototype._getMoveTopButton=function(){if(this._oMoveTopBtn&&this._oMoveTopBtn.isDestroyed()){this._oMoveTopBtn=null}return e.prototype._getMoveTopButton.apply(this,arguments)};O.prototype._getMoveUpButton=function(){if(this._oMoveUpButton&&this._oMoveUpButton.isDestroyed()){this._oMoveUpButton=null}return e.prototype._getMoveUpButton.apply(this,arguments)};O.prototype._getMoveDownButton=function(){if(this._oMoveDownButton&&this._oMoveDownButton.isDestroyed()){this._oMoveDownButton=null}return e.prototype._getMoveDownButton.apply(this,arguments)};O.prototype._getMoveBottomButton=function(){if(this._oMoveBottomButton&&this._oMoveBottomButton.isDestroyed()){this._oMoveBottomButton=null}return e.prototype._getMoveBottomButton.apply(this,arguments)};O.prototype._getChartItemTextByKey=function(e){var t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var i={Dimension:[{key:s.ChartItemRoleType.category,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_CATEGORY")},{key:s.ChartItemRoleType.category2,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_CATEGORY2")},{key:s.ChartItemRoleType.series,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_SERIES")}],Measure:[{key:s.ChartItemRoleType.axis1,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS1")},{key:s.ChartItemRoleType.axis2,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS2")},{key:s.ChartItemRoleType.axis3,text:t.getText("chart.PERSONALIZATION_DIALOG_CHARTROLE_AXIS3")}]};return i[e]};O.prototype._getResourceTextMDC=function(e,t){this.oResourceBundleMDC=this.oResourceBundleMDC?this.oResourceBundleMDC:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");return e?this.oResourceBundleMDC.getText(e,t):this.oResourceBundleMDC};return O});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/panels/FilterPanel",["sap/m/p13n/QueryPanel","sap/m/VBox","sap/m/Text","sap/ui/layout/Grid","sap/ui/layout/GridData","sap/m/Button","sap/m/ComboBox","sap/ui/core/library"],function(e,t,a,n,o,r,i,s){"use strict";var p=s.ValueState;var l=e.extend("sap.ui.mdc.p13n.panels.FilterPanel",{metadata:{properties:{itemFactory:{type:"function"}}},renderer:{}});l.prototype.PRESENCE_ATTRIBUTE="active";l.prototype._createQueryRowGrid=function(e){var i=e.name?new t({items:[new a({text:e.label}).addStyleClass("sapUiTinyMarginTop").addStyleClass("sapUiTinyMarginBegin")]}):this._createKeySelect(e.name);var s;if(!e.name){s=new r({text:"Add",press:this._addPressed.bind(this),enabled:false});s.setLayoutData(new o({indent:"XL7 L7 M7 S7",span:"XL1 L1 M1 S1"}))}return new n({containerQuery:true,defaultSpan:"XL4 L4 M4 S4",content:[i,e.name?this._createFactoryControl(e):s]}).addStyleClass("sapUiTinyMargin")};l.prototype._getPlaceholderText=function(){return this._getResourceText("p13n.FILTER_PLACEHOLDER")};l.prototype._getRemoveButtonTooltipText=function(){return this._getResourceText("p13n.FILTER_REMOVEICONTOOLTIP")};l.prototype._createKeySelect=function(e){var t=new i({width:"100%",items:this._getAvailableItems(),placeholder:this._getPlaceholderText(),selectionChange:function(e){var t=e.getSource();this._selectKey(t)}.bind(this),change:function(e){var t=e.getSource();var a=e.getParameter("newValue");t.setValueState(a&&!t.getSelectedItem()?p.Error:p.None)}});t.onsapenter=function(e){this._selectKey()}.bind(this);return t};l.prototype._getAvailableItems=function(t){var a=e.prototype._getAvailableItems.apply(this,arguments);a.shift();return a};l.prototype._createRemoveButton=function(t){var a=e.prototype._createRemoveButton.apply(this,arguments);a.setLayoutData(new o({span:"XL1 L1 M1 S1"}));return a};l.prototype._addPressed=function(e){this._selectKey()};l.prototype._selectKey=function(n){var o,r;if(n){this._oComboBox=n;o=n.getParent();r=n.getSelectedKey();o.getContent()[1].setEnabled(!!r)}else if(this._oComboBox){n=this._oComboBox;o=n.getParent();r=n.getSelectedKey();if(r){e.prototype._selectKey.call(this,n);var i=r?n.getSelectedItem().getText():"";var s=o.getContent()[0];o.removeContent(s);var p=o.getContent()[0];o.removeContent(p);var l=new t({items:[new a({text:i}).addStyleClass("sapUiTinyMarginTop").addStyleClass("sapUiTinyMarginBegin")]});l._key=r;o.insertContent(l,0);var c=this._createFactoryControl({name:r});o.insertContent(c,1)}delete this._oComboBox}};l.prototype._createFactoryControl=function(e){var t=this.getItemFactory().call(this,e);t.setLayoutData(new o({span:"XL7 L7 M7 S7"}));return t};return l});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/panels/GroupView",["sap/m/p13n/BasePanel","sap/m/Label","sap/base/util/deepEqual","sap/m/CustomListItem","sap/m/List","sap/m/Panel","sap/m/Toolbar","sap/m/Text","sap/ui/core/Icon","sap/ui/core/library","sap/m/HBox","sap/m/library","sap/base/util/merge"],function(t,e,i,n,o,s,r,a,l,p,h,d,u){"use strict";var g=p.IconColor;var c=d.FlexJustifyContent;var _=d.ListKeyboardMode;var f=t.extend("sap.ui.mdc.p13n.panels.GroupView",{metadata:{library:"sap.ui.mdc",properties:{itemFactory:{type:"function"}}},renderer:{apiVersion:2}});f.prototype.init=function(){t.prototype.init.apply(this,arguments);this.addStyleClass("sapUiMDCGroupView");var e=new n({visible:"{"+this.P13N_MODEL+">groupVisible}",accDescription:{path:this.P13N_MODEL+">groupLabel",formatter:function(t){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.FILTER_GROUP_DESCRIPTION",t)}},content:[this._createGroupPanelTemplate()]});this._bShowFactory=true;this.displayColumns();this._aInitializedLists=[];this._setTemplate(e);e.setType("Inactive");this._setMoveButtonVisibility(true)};f.prototype._getShowFactory=function(){return this._bShowFactory};f.prototype.getPanels=function(){var t=[];this._oListControl.getItems().forEach(function(e){t.push(e.getContent()[0])});return t};f.prototype._createGroupPanelTemplate=function(){var t=this.P13N_MODEL;return new s({expandable:true,expanded:{path:this.P13N_MODEL+">group",formatter:function(){if(this.getBindingContext(t)){var e=this.getBindingContext(t).sPath.split("/")[2]==="0";return e}else{return false}}},expand:function(t){var e=t.getSource();var i=e.getContent()[0];this._addInitializedList(i);if(this._getShowFactory()){this._addFactoryControl(i);this.filterContent(this._aCurrentFilters)}}.bind(this),width:"100%",headerToolbar:[new r({content:[new e({wrapping:true,text:"{"+this.P13N_MODEL+">groupLabel}",design:"Bold"})]})],content:[this._createGroupListTemplate()]})};f.prototype._createGroupListTemplate=function(){var t=new o({keyboardMode:_.Navigation,selectionChange:function(t){var e=t.getParameter("listItem").getBindingContext(this.P13N_MODEL).sPath;var i=this._getP13nModel().getProperty(e);var n=this.getModel(this.P13N_MODEL);if(n&&i){n.setProperty(e+"/selected",i.visible)}var o=this._checkSpecialChangeReason(t.getParameter("selectAll"),t.getParameter("listItems"));this.fireChange({reason:o||(i.visible?this.CHANGE_REASON_ADD:this.CHANGE_REASON_REMOVE),item:i})}.bind(this),showSeparators:"None",mode:"MultiSelect"});t.bindItems(this._getItemsBinding());return t};f.prototype._addFactoryControl=function(t){if(t.getItems().length==0||t.getItems()[0].getContent().length<2){t.getItems().forEach(function(t){var e=t.getBindingContext(this.P13N_MODEL);var i=this.getItemFactory().call(this,e);if(i){t.addContent(i);t.getContent()[0].getItems()[0].setLabelFor(i.getId())}if(t.getContent()[0].getItems().length>1){t.getContent()[0].removeItem(1)}}.bind(this))}this.addStyleClass("sapUiMDCAFLabelMarking")};f.prototype._createInnerListControl=function(){var t=new o(this.getId()+"-innerGroupViewList",Object.assign(this._getListControlConfig(),{mode:"None",infoToolbar:new r,updateStarted:function(t){this._checkAllPanels()}.bind(this)}));return t};f.prototype._getItemsBinding=function(){var t=function(){var t=[new h({width:"100%",justifyContent:c.SpaceBetween,items:[new e({required:"{"+this.P13N_MODEL+">required}",text:"{"+this.P13N_MODEL+">label}"})]})];return new n({selected:"{"+this.P13N_MODEL+">visible}",tooltip:"{"+this.P13N_MODEL+">tooltip}",accDescription:"{"+this.P13N_MODEL+">label}",content:t})}.bind(this);return{path:this.P13N_MODEL+">items",templateShareable:false,template:t()}};f.prototype._getIconTemplate=function(){return new h({width:"18.5%",justifyContent:c.Center,items:[new l({src:"sap-icon://circle-task-2",size:"0.5rem",color:g.Neutral,visible:{path:this.P13N_MODEL+">active",formatter:function(t){if(t){return true}else{return false}}}})]})};f.prototype._loopGroupList=function(t){this._oListControl.getItems().forEach(function(e){var i=e.getContent()[0];var n=i.getContent()[0];this._loopItems(n,function(e,i){t(e,i)})}.bind(this))};f.prototype._loopItems=function(t,e){t.getItems().forEach(function(t){var i=t.getBindingContextPath();var n=this._getP13nModel().getProperty(i).name;e.call(this,t,n)}.bind(this))};f.prototype._removeFactoryControl=function(){this._loopGroupList(function(t,e){if(t.getContent()[1]){t.removeContent(t.getContent()[1]);var i=t.getParent();this._addInitializedList(i);var n=this._getIconTemplate();t.getContent()[0].addItem(n)}}.bind(this));this.removeStyleClass("sapUiMDCAFLabelMarking");return this._aInitializedLists||[]};f.prototype._addInitializedList=function(t){var e=t.getId();if(this._aInitializedLists.indexOf(e)<0){this._aInitializedLists.push(e)}};f.prototype._getInitializedLists=function(){var t=[];this._aInitializedLists.forEach(function(e){var i=sap.ui.getCore().byId(e);if(i){t.push(i)}});return t};f.prototype.getSelectedFields=function(){var t=[];this._oListControl.getItems().forEach(function(e){var i=e.getContent()[0];var n=i.getContent()[0];this._loopItems(n,function(e,i){if(e.getSelected()){t.push(i)}})}.bind(this));return t};f.prototype.filterContent=function(t){if(!this._bInitialized||i(t,this._aCurrentFilters)){return}var e=this._removeFactoryControl();this._oListControl.getItems().forEach(function(i){var n=i.getContent()[0];var o=n.getContent()[0];if(o.getBinding("items")){o.getBinding("items").filter(t,true);this._togglePanelVisibility(n)}if(this._getShowFactory()&&e.indexOf(o.getId())>-1){this._addFactoryControl(o)}}.bind(this));this._aCurrentFilters=t};f.prototype.showFactory=function(t){this._bShowFactory=t;this.displayColumns();if(t){this._getInitializedLists().forEach(function(t){this._addFactoryControl(t)}.bind(this))}else{this._removeFactoryControl()}};f.prototype._checkAllPanels=function(){this._oListControl.getItems().forEach(function(t){var e=t.getContent()[0];this._togglePanelVisibility(e)}.bind(this))};f.prototype.setGroupExpanded=function(t,e){this._oListControl.getItems().forEach(function(i){var n=i.getContent()[0];var o=n.getBindingContext(this.P13N_MODEL).sPath;var s=this._getP13nModel().getProperty(o);if(s.group===t){n.setExpanded(e)}},this)};f.prototype._togglePanelVisibility=function(t){var e=t.getContent()[0];var i=t.getBindingContext(this.P13N_MODEL);if(i){var n=i.sPath;var o=this._getP13nModel().getProperty(n);o.groupVisible=e.getVisibleItems().length<1?false:true;this._getP13nModel().setProperty(n,o)}};f.prototype.getItems=function(){return this._oListControl.getItems()};f.prototype._checkFirstGroup=function(){if(!this._bInitialized&&this._oListControl&&this._oListControl.getItems().length>0){this._bInitialized=true;var t=this._oListControl.getItems()[0].getContent()[0].getContent()[0];this._addFactoryControl(t);this._addInitializedList(t)}};f.prototype.displayColumns=function(){var t=this._oListControl.getInfoToolbar().removeAllContent();t.forEach(function(t){t.destroy()});this._oListControl.getInfoToolbar().addContent(new a({width:"75%",text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.LIST_VIEW_COLUMN")}).addStyleClass("firstColumnPadding"));if(!this._bShowFactory){this._oListControl.getInfoToolbar().addContent(new a({textAlign:"Center",width:"25%",text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.LIST_VIEW_ACTIVE")}).addStyleClass("firstColumnPadding"))}};f.prototype.setP13nData=function(t){this._getP13nModel().setProperty("/itemsGrouped",t);if(!this._bInitialized){this._bindListItems()}this._checkFirstGroup();this._checkAllPanels()};f.prototype.getP13nData=function(t){var e=this._getP13nModel().getProperty("/itemsGrouped");if(t){e=e.filter(function(t){return t[this.PRESENCE_ATTRIBUTE]}.bind(this))}return e};f.prototype._bindListItems=function(){this._oListControl.bindItems(Object.assign({path:this.P13N_MODEL+">/itemsGrouped",templateShareable:false,key:"group",template:this.getAggregation("_template").clone()}))};f.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._aInitializedLists=null;this._bShowFactory=false;this._bInitialized=false};return f});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/panels/LinkSelectionPanel",["sap/m/p13n/SelectionPanel","sap/m/ColumnListItem","sap/m/HBox","sap/m/VBox","sap/m/Link","sap/m/Text","sap/ui/core/Icon","sap/m/library","sap/m/OverflowToolbar","sap/ui/model/Filter"],function(e,t,i,s,n,o,r,a,p,l){"use strict";var c=a.ListType;var d=e.extend("sap.ui.mdc.p13n.panels.LinkSelectionPanel",{metadata:{library:"sap.ui.mdc",events:{linkPressed:{}}},renderer:{apiVersion:2}});d.prototype._getListTemplate=function(){return new t({selected:"{"+this.P13N_MODEL+">"+this.PRESENCE_ATTRIBUTE+"}",type:c.Active,cells:[new i({items:[new s({items:[new n({tooltip:"{"+this.P13N_MODEL+">tooltip}",text:"{"+this.P13N_MODEL+">text}",href:"{"+this.P13N_MODEL+">href}",target:"{"+this.P13N_MODEL+">target}",press:this._onLinkPressed.bind(this)}),new o({text:"{"+this.P13N_MODEL+">description}",visible:"{= ${"+this.P13N_MODEL+">description} ? true:false}"})]})]})]})};d.prototype.setShowHeader=function(e){if(e){this._oListControl.setHeaderToolbar(new p({content:[this._getSearchField()]}))}this.setProperty("showHeader",e);return this};d.prototype._getSearchField=function(){var t=e.prototype._getSearchField.apply(this,arguments);t.getLayoutData().setMaxWidth(undefined);return t};d.prototype._onLinkPressed=function(e){this.fireLinkPressed(e)};d.prototype.setMultiSelectMode=function(e){this._oListControl.setMultiSelectMode(e)};d.prototype._filterList=function(e,t){var i=[],s=[];if(e){s=new l(this.PRESENCE_ATTRIBUTE,"EQ",true)}if(t){i=new l("text","Contains",t)}this._oListControl.getBinding("items").filter(new l([].concat(s,i),true))};return d});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/ActionToolbarController",["./BaseController","sap/ui/mdc/p13n/panels/ActionToolbarPanel","sap/m/Column","sap/ui/mdc/p13n/P13nBuilder"],function(e,t,o,n){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var i=e.extend("saps.ui.mdc.p13n.subcontroller.ActionToolbarController");i.prototype.getUISettings=function(){return{title:r.getText("actiontoolbar.RTA_TITLE")}};i.prototype.getAdaptationUI=function(e){var o=new t({showHeader:true});o.setEnableReorder(false);o.setFieldColumn(r.getText("actiontoolbar.RTA_COLUMN_HEADER"));var n=this.mixInfoAndState(e);o.setP13nData(n.items);this._oPanel=o;return Promise.resolve(o)};i.prototype.getDelta=function(t){var o=e.prototype.getDelta.apply(this,arguments);o.forEach(function(e){var t=e.changeSpecificData.changeType;if(t==="hideControl"||t==="unhideControl"){e.selectorElement=sap.ui.getCore().byId(e.changeSpecificData.content.name);delete e.changeSpecificData.content}});return o};i.prototype.mixInfoAndState=function(e){var t=this.getCurrentState();var o=n.arrayToMap(t);var r=n.prepareAdaptationData(e,function(e,t){var n=o[t.name];e.visible=!!n;e.position=n?n.position:-1;e.alignment=t.alignment;return t.visible});n.sortP13nData({visible:"visible",position:"position"},r.items);r.items.forEach(function(e){delete e.position});return r};i.prototype.getChangeOperations=function(){return{add:"unhideControl",remove:"hideControl",move:"moveAction"}};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/AdaptFiltersController",["./BaseController","sap/ui/mdc/p13n/P13nBuilder","sap/base/util/merge"],function(t,e,r){"use strict";var i=t.extend("sap.ui.mdc.p13n.subcontroller.AdaptFiltersController",{constructor:function(){t.apply(this,arguments);this._bResetEnabled=true}});i.prototype.getUISettings=function(){return{verticalScrolling:false,title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("filterbar.ADAPT_TITLE"),afterClose:function(t){var e=t.getSource();if(e){e.getContent()[0].executeRemoves();e.removeAllContent();e.destroy()}}}};i.prototype.getBeforeApply=function(){var t=this.getAdaptationControl().getInbuiltFilter();var e=t?t.createConditionChanges():Promise.resolve([]);return e};i.prototype.getFilterControl=function(){return this.getAdaptationControl()};i.prototype.getChangeOperations=function(){return{add:"addFilter",remove:"removeFilter",move:"moveFilter"}};i.prototype.getAdaptationUI=function(t){return this.getAdaptationControl().retrieveInbuiltFilter().then(function(e){var r=this._getP13nModel(t);e.setP13nData(r.oData);e.setLiveMode(false);return e.createFilterFields().then(function(){return e})}.bind(this))};i.prototype.update=function(){t.prototype.update.apply(this,arguments);this.getAdaptationControl().getInbuiltFilter().createFilterFields()};i.prototype.mixInfoAndState=function(t){var r=this.getAdaptationControl().getCurrentState().filter||{};var i=this.getCurrentState();var n=e.arrayToMap(i);var o=e.prepareAdaptationData(t,function(t,e){var i=n[e.name];var o=r[e.name];t.visible=i?true:false;t.visibleInDialog=true;t.position=i?i.position:-1;t.isFiltered=o&&o.length>0?true:false;t.required=e.required;return!(e.hiddenFilter===true||e.name=="$search")},true);e.sortP13nData({visible:"visible",position:"position"},o.items);return o};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/AggregateController",["./BaseController","sap/ui/mdc/p13n/P13nBuilder","sap/base/util/merge"],function(t,e,r){"use strict";var a=t.extend("sap.ui.mdc.p13n.subcontroller.AggregateController");a.prototype.getStateKey=function(){return"aggregations"};a.prototype.sanityCheck=function(t){var e=[];Object.keys(t).forEach(function(r){var a={name:r};if(t[r].hasOwnProperty("aggregated")){a["aggregated"]=t[r].aggregated}e.push(a)});return e};a.prototype.getDelta=function(e){e.existingState=this.sanityCheck(e.existingState);return t.prototype.getDelta.apply(this,arguments)};a.prototype.getAdaptationUI=function(t){return null};a.prototype.getChangeOperations=function(){return{add:"addAggregate",remove:"removeAggregate"}};a.prototype._getPresenceAttribute=function(){return"aggregated"};a.prototype.mixInfoAndState=function(t){var r=this.getCurrentState();var a=e.prepareAdaptationData(t,function(t,e){var a=r[e.name];t.aggregated=!!a;return e.aggregatable});return a};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/BaseController",["sap/base/util/array/diff","sap/ui/base/Object","sap/ui/mdc/p13n/FlexUtil","sap/ui/mdc/p13n/P13nBuilder","sap/base/util/merge","sap/base/util/deepEqual","sap/ui/model/json/JSONModel","sap/m/p13n/SelectionPanel"],function(e,t,n,i,o,a,r,s){"use strict";var p=t.extend("sap.ui.mdc.p13n.subcontroller.BaseController",{constructor:function(e){t.call(this);this._oAdaptationControl=e;this._oP13nData=null;this._bLiveMode=false;this._bResetEnabled=false}});p.prototype.getUISettings=function(){return{title:"Adaptation Dialog"}};p.prototype.getAdaptationControl=function(){return this._oAdaptationControl};p.prototype.getLiveMode=function(){return this._bLiveMode};p.prototype.getChangeOperations=function(){return{add:null,remove:null,move:null}};p.prototype.getResetEnabled=function(){return this._bResetEnabled};p.prototype.getSelectorForReset=function(){return this._oAdaptationControl};p.prototype.sanityCheck=function(e){return e};p.prototype.getAdaptationUI=function(e){var t=new s;var n=this.mixInfoAndState(e);t.setP13nData(n.items);this._oPanel=t;return Promise.resolve(t)};p.prototype.getCurrentState=function(){return this._oAdaptationControl.getCurrentState()[this.getStateKey()]};p.prototype.getStateKey=function(){return"items"};p.prototype.getDelta=function(e){var t=this._getPresenceAttribute(e.externalAppliance);var n;var i=function(e){return e.hasOwnProperty(t)&&e[t]===false?false:true};n=e.applyAbsolute?e.changedState.filter(i):this._getFilledArray(e.existingState,e.changedState,t).filter(i);e.changedState=n;if(a(e.existingState,n)){return[]}else{return this.getArrayDeltaChanges(e)}};p.prototype.getArrayDeltaChanges=function(t){var i=t.existingState;var o=t.changedState;var a=t.control;var r=t.changeOperations.add;var s=t.changeOperations.remove;var p=t.changeOperations.move;var l=t.generator;var c=t.deltaAttributes||[];var d=function(e){var t="";c.forEach(function(n){t=t+e[n]});return t};var u=e(i,o,d);var h=function(e,t){return t.filter(function(t){return t&&t.name===e.name})[0]};var f=[];var g=i.slice(0);u.forEach(function(e){if(e.type==="delete"&&g[e.index]===undefined){g.splice(e.index,1);return}var t,i,d;if(e.type==="insert"){i=h(o[e.index],g);if(i){i.index=g.indexOf(i);g.splice(i.index,1,undefined);f=f.concat(this._createAddRemoveChange(a,s,n._getChangeContent(i,c),l))}}t=e.type==="delete"?g[e.index]:o[e.index];t.index=e.index;if(e.type==="delete"){g.splice(t.index,1)}else{g.splice(t.index,0,t)}if(p){d=f.length;if(d){i=f[d-1];i=i?i.changeSpecificData.content:undefined}if(i&&i.name===t.name&&e.index!=i.index){f.pop();f=f.concat(this._createMoveChange(i.id,i.name,e.index,p,a,p!=="moveSort",l));return}}f=f.concat(this._createAddRemoveChange(a,e.type==="delete"?s:r,n._getChangeContent(t,c),l))}.bind(this));return f};p.prototype._createAddRemoveChange=function(e,t,n){var i={selectorElement:e,changeSpecificData:{changeType:t,content:n}};return i};p.prototype._createMoveChange=function(e,t,n,i,o,a){var r={selectorElement:o,changeSpecificData:{changeType:i,content:{id:e,name:t,index:n}}};if(!a){delete r.changeSpecificData.content.id}return r};p.prototype._getPresenceAttribute=function(e){return"visible"};p.prototype.getBeforeApply=function(){return Promise.resolve()};p.prototype.mixInfoAndState=function(e){var t=this.getCurrentState();var n=i.arrayToMap(t);var o=i.prepareAdaptationData(e,function(e,t){var i=n[t.name];e.visible=!!i;e.position=i?i.position:-1;return t.visible});i.sortP13nData({visible:"visible",position:"position"},o.items);o.items.forEach(function(e){delete e.position});return o};p.prototype.getP13nData=function(){return this._oPanel?this._oPanel.getP13nData():this._oAdaptationModel.getProperty("/items")};p.prototype.model2State=false;p.prototype.update=function(e){if(this._oPanel){var t=this.mixInfoAndState(e);this._oPanel.setP13nData(t.items)}else if(this._oAdaptationModel){var n=this.mixInfoAndState(e);this._oAdaptationModel.setProperty("/items",n.items);this._oAdaptationModel.setProperty("/itemsGrouped",n.itemsGrouped)}};p.prototype._getFilledArray=function(e,t,n){var a=o([],e);var r=o([],t);var s=i.arrayToMap(e);r.forEach(function(e){var t=s[e.name];if(!e.hasOwnProperty(n)||e[n]){var i=e.position;if(t){i=i>-1?i:t.position;var o=t.position;a.splice(i,0,a.splice(o,1)[0])}else{i=i>-1?i:a.length;a.splice(i,0,e)}a[i]=e}else if(t){a[t.position][n]=false}});return a};p.prototype._getP13nModel=function(e){if(!this._oAdaptationModel){this._oAdaptationModel=new r(this.mixInfoAndState(e));this._oP13nData=this._oAdaptationModel.getData();this._oAdaptationModel.setSizeLimit(1e4)}else{this.update(e)}return this._oAdaptationModel};p.prototype.changesToState=function(e){var t=[];e.forEach(function(e){var n=o({},e.changeSpecificData.content);var i=n.index;delete n.index;if(e.changeSpecificData.changeType===this.getChangeOperations()["move"]){n.position=i}if(e.changeSpecificData.changeType===this.getChangeOperations()["remove"]){n[this._getPresenceAttribute()]=false}t.push(n)}.bind(this));return t};p.prototype.destroy=function(){t.prototype.destroy.apply(this,arguments);this._oAdaptationControl=null;this._bLiveMode=null;this._oPanel=null;this._bResetEnabled=null;this._oAdaptationModel=null};return p});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/ChartItemController",["./BaseController","sap/ui/mdc/p13n/P13nBuilder"],function(t,e){"use strict";var o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var i=t.extend("sap.ui.mdc.p13n.subcontroller.ChartItemController");i.prototype.getAdaptationUI=function(t){var e;this._oAdaptationControl.getAdaptationUI().then(function(o){this._oPanel=o;this._oPropHelper=t;var i=this.mixInfoAndState(t);o.setP13nData(i.items);e(o)}.bind(this));return new Promise(function(t,o){e=t})};i.prototype.update=function(){t.prototype.update.apply(this,arguments);this._oPanel.setP13nData(this.mixInfoAndState(this._oPropHelper).items)};i.prototype.getDelta=function(e){e.deltaAttributes.push("role");return t.prototype.getDelta.apply(this,arguments)};i.prototype.getUISettings=function(){return{title:o.getText("chart.PERSONALIZATION_DIALOG_TITLE"),tabText:o.getText("p13nDialog.TAB_Chart")}};i.prototype.mixInfoAndState=function(t){var o=this.getCurrentState();var i=e.arrayToMap(o);var n=e.prepareAdaptationData(t,function(t,e){var o=i[e.name];t.visible=!!o;t.position=o?o.position:-1;t.role=o?o.role:e.role;t.kind=e.kind;if(e.availableRoles){t.availableRoles=e.availableRoles}return e.visible});e.sortP13nData({visible:"visible",position:"position"},n.items);n.items.forEach(function(t){delete t.position});return n};i.prototype.getChangeOperations=function(){return{add:"addItem",remove:"removeItem",move:"moveItem"}};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/ChartTypeController",["./BaseController"],function(t){"use strict";var e=t.extend("sap.ui.mdc.p13n.subcontroller.ChartTypeController",{constructor:function(){t.apply(this,arguments);this._bResetEnabled=true}});e.prototype.getCurrentState=function(){return{properties:{chartType:this.getAdaptationControl().getChartType()}}};e.prototype.getStateKey=function(){return"supplementaryConfig"};e.prototype.getDelta=function(t){var e=t.changedState.type?t.changedState.type:t.changedState.properties.chartType;var r={selectorElement:t.control,changeSpecificData:{changeType:"setChartType",content:{chartType:e}}};return[r]};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/ColumnController",["./BaseController","sap/m/p13n/SelectionPanel"],function(e,t){"use strict";var n=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var o=e.extend("sap.ui.mdc.p13n.subcontroller.ColumnController",{constructor:function(){e.apply(this,arguments);this._bResetEnabled=true}});o.prototype.getUISettings=function(){return{title:n.getText("table.SETTINGS_COLUMN"),tabText:n.getText("p13nDialog.TAB_Column")}};o.prototype.model2State=function(){var e=[];this._oPanel.getP13nData(true).forEach(function(t){if(t.visible){e.push({name:t.name})}});return e};o.prototype.getAdaptationUI=function(e){var o=new t({enableReorder:true,showHeader:true,enableCount:true,fieldColumn:n.getText("fieldsui.COLUMNS")});var r=this.mixInfoAndState(e);o.setP13nData(r.items);this._oPanel=o;return Promise.resolve(o)};o.prototype.getChangeOperations=function(){return{add:"addColumn",remove:"removeColumn",move:"moveColumn"}};return o});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/ColumnWidthController",["./BaseController","sap/ui/mdc/p13n/FlexUtil","sap/ui/mdc/p13n/modules/xConfigAPI","sap/base/util/merge"],function(t,e,n,r){"use strict";var a=t.extend("sap.ui.mdc.p13n.subcontroller.ColumnWidthController",{constructor:function(){t.apply(this,arguments);this._bXConfigEnabled=true;this._bResetEnabled=true}});a.prototype.sanityCheck=function(t){var e=[];if(t&&t.hasOwnProperty("aggregations")&&t.aggregations.hasOwnProperty("columns")){Object.keys(t.aggregations.columns).forEach(function(n){var r={name:n,width:t.aggregations.columns[n].width};e.push(r)})}return e};a.prototype.getCurrentState=function(){return this.getAdaptationControl().getCurrentState().xConfig};a.prototype.getStateKey=function(){return"supplementaryConfig"};a.prototype.changesToState=function(t){var e;var a=t.length&&t[0].selectorElement;t.forEach(function(t){var o=r({},t.changeSpecificData.content);var i={name:o.name,controlMeta:{aggregation:"columns",property:"width"},value:o.value};e=n.createConfigObject(a,i,e)});return e||{}};a.prototype.getDelta=function(t){t.deltaAttribute="width";t.operation="setColumnWidth";t.changedState=t.changedState instanceof Array?t.changedState:this.sanityCheck(t.changedState);t.existingState=this.sanityCheck(t.existingState);return e.getPropertySetterChanges(t)};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/FilterController",["sap/ui/mdc/condition/FilterOperatorUtil","./BaseController","sap/ui/mdc/p13n/P13nBuilder","sap/ui/mdc/p13n/FlexUtil","sap/base/Log","sap/base/util/merge"],function(t,e,n,r,o,i){"use strict";var a=e.extend("sap.ui.mdc.p13n.subcontroller.FilterController",{constructor:function(){e.apply(this,arguments);this._bResetEnabled=true}});a.prototype.getStateKey=function(){return"filter"};a.prototype.getUISettings=function(){return{title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("filter.PERSONALIZATION_DIALOG_TITLE"),tabText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.TAB_Filter"),afterClose:function(t){var e=t.getSource();if(e){var n=e.getContent()[0];if(n.isA("sap.m.p13n.Container")){n.removeView("Filter")}else{e.removeAllContent()}}e.destroy()}}};a.prototype.getChangeOperations=function(){return{add:"addCondition",remove:"removeCondition"}};a.prototype.getBeforeApply=function(){var t=this.getAdaptationControl().getInbuiltFilter();var e=t?t.createConditionChanges():Promise.resolve([]);return e};a.prototype.getFilterControl=function(){return this.getAdaptationControl().isA("sap.ui.mdc.IFilter")?this.getAdaptationControl():this.getAdaptationControl()._oP13nFilter};a.prototype.sanityCheck=function(t){a.checkConditionOperatorSanity(t);return t};a.checkConditionOperatorSanity=function(e){for(var n in e){var r=e[n];for(var i=0;i<r.length;i++){var a=r[i];var p=a.operator;if(!t.getOperator(p)){r.splice(i,1);if(e[n].length==0){delete e[n]}o.warning("The provided conditions for field '"+n+"' contain unsupported operators - these conditions will be neglected.")}}}};a.prototype._getPresenceAttribute=function(t){return"isFiltered"};a.prototype.getAdaptationUI=function(t,e){var n=this._getP13nModel(t);return this.getAdaptationControl().retrieveInbuiltFilter().then(function(t){t.setP13nData(n.oData);t.setLiveMode(false);this._oAdaptationFB=t;return t.createFilterFields().then(function(){return t})}.bind(this))};a.prototype.update=function(){e.prototype.update.apply(this,arguments);var t=this.getAdaptationControl();var n=t&&t.getInbuiltFilter();if(n){n.createFilterFields()}};a.prototype.getDelta=function(t){t.applyAbsolute=true;return r.getConditionDeltaChanges(t)};a.prototype.model2State=function(){var t={},e=this.getCurrentState();this._oAdaptationModel.getProperty("/items").forEach(function(n){if(n.active&&Object.keys(e).includes(n.name)){t[n.name]=e[n.name]}});return t};a.prototype.mixInfoAndState=function(t){var e=this.getCurrentState()||{};var r=n.prepareAdaptationData(t,function(t,n){var r=n.name;var o=e[r];t.active=o&&o.length>0?true:false;return!(n.filterable===false)});n.sortP13nData({visible:undefined,position:undefined},r.items);return r};a.prototype.changesToState=function(t,e,n){var r={};t.forEach(function(t){var e=i({},t.changeSpecificData.content);var o=e.name;r[o]=n[o]});return r};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/GroupController",["./BaseController","sap/ui/mdc/p13n/P13nBuilder","sap/m/p13n/GroupPanel"],function(t,e,r){"use strict";var o=t.extend("sap.ui.mdc.p13n.subcontroller.GroupController");o.prototype.getStateKey=function(){return"groupLevels"};o.prototype.getUISettings=function(){return{tabText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.TAB_Group"),title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("group.PERSONALIZATION_DIALOG_TITLE")}};o.prototype.getDelta=function(e){return t.prototype.getDelta.apply(this,arguments)};o.prototype.getAdaptationUI=function(t){var e=new r;var o=this.mixInfoAndState(t);var n=this.getAdaptationControl();if(n.isA("sap.ui.mdc.Table")&&n._getStringType()==="ResponsiveTable"){e.setQueryLimit(1)}e.setP13nData(o.items);this._oPanel=e;return Promise.resolve(e)};o.prototype.model2State=function(){var t=[];this._oPanel.getP13nData(true).forEach(function(e){if(e.grouped){t.push({name:e.name})}});return t};o.prototype.getChangeOperations=function(){return{add:"addGroup",remove:"removeGroup",move:"moveGroup"}};o.prototype._getPresenceAttribute=function(){return"grouped"};o.prototype.mixInfoAndState=function(t){var r=this.getCurrentState();var o=e.arrayToMap(r);var n=this.getAdaptationControl();var i=n.getAggregateConditions?n.getAggregateConditions()||{}:{};var a=e.prepareAdaptationData(t,function(t,e){var r=o[e.name];t.grouped=!!r;t.position=r?r.position:-1;return!(e.groupable===false||i[e.name])});e.sortP13nData({visible:"grouped",position:"position"},a.items);a.presenceAttribute=this._getPresenceAttribute();a.items.forEach(function(t){delete t.position});return a};return o});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/LinkPanelController",["sap/ui/mdc/p13n/P13nBuilder","./BaseController","sap/ui/mdc/p13n/panels/LinkSelectionPanel","sap/m/library","sap/m/MessageBox"],function(e,t,n,r,i){"use strict";var o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var a=r.MultiSelectMode;var s=t.extend("sap.ui.mdc.p13n.subcontroller.LinkPanelController",{constructor:function(){t.apply(this,arguments);this._bResetEnabled=true}});s.prototype.getUISettings=function(){return{contentWidth:"28rem",contentHeight:"35rem",reset:{warningText:o.getText("info.SELECTION_DIALOG_RESET_WARNING")},title:o.getText("info.SELECTION_DIALOG_ALIGNEDTITLE")}};s.prototype.getSelectorForReset=function(){return this.getAdaptationControl().getItems().concat(this.getAdaptationControl())};s.prototype.getAdaptationUI=function(e){var t=new n({showHeader:true,fieldColumn:o.getText("info.SELECTION_DIALOG_COLUMNHEADER_WITHOUT_COUNT"),enableCount:true,linkPressed:this._onLinkPressed.bind(this)});var r=this.mixInfoAndState(e);t.setP13nData(r.items);t.setEnableReorder(false);t.setMultiSelectMode(a.Default);this._oPanel=t;return Promise.resolve(t)};s.prototype._onLinkPressed=function(e){var t=e.getParameter("oSource");var n=t.getTarget();if(n!=="_blank"){e.preventDefault();var r=this.getAdaptationControl();var o=t.getHref();if(r.getBeforeNavigationCallback){r.getBeforeNavigationCallback()(e).then(function(e){if(e){r.navigate(o)}})}else{i.show(sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("info.SELECTION_DIALOG_LINK_VALIDATION_QUESTION"),{icon:i.Icon.WARNING,title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("info.SELECTION_DIALOG_LINK_VALIDATION_TITLE"),actions:[i.Action.YES,i.Action.NO],onClose:function(e){if(e===i.Action.YES){r.navigate(o)}},styleClass:this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":""})}}};s.prototype._createAddRemoveChange=function(e,t,n){var r=n.name;var i=sap.ui.getCore().byId(r);var o=[];if(!i){o.push({selectorElement:e,changeSpecificData:{changeType:"createItem",content:{selector:r}}})}else{o.push({selectorElement:i,changeSpecificData:{changeType:t==="hideItem"?"hideItem":"revealItem",content:{}}})}return o};s.prototype.mixInfoAndState=function(t){var n=this.getCurrentState();var r=e.arrayToMap(n);var i=e.prepareAdaptationData(t,function(e,t){var n=r[t.name];e.visible=n?true:false;e.position=n?n.position:-1;e.href=t.href;e.description=t.description;e.target=t.target;e.text=t.text;return true});e.sortP13nData({visible:"visible",position:"position"},i.items);i.presenceAttribute=this._getPresenceAttribute();i.items.forEach(function(e){delete e.position});return i};s.prototype._createMoveChange=function(e,t,n,r,i,o){return{selectorElement:i,changeSpecificData:{changeType:r,content:{index:n,name:t}}}};s.prototype.getChangeOperations=function(){return{add:["createItem","revealItem"],remove:"hideItem",move:"moveItem"}};return s});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/p13n/subcontroller/SortController",["./BaseController","sap/ui/mdc/p13n/P13nBuilder","sap/m/p13n/SortPanel"],function(t,e,r){"use strict";var o=t.extend("sap.ui.mdc.p13n.subcontroller.SortController",{constructor:function(){t.apply(this,arguments);this._bResetEnabled=true}});o.prototype.getStateKey=function(){return"sorters"};o.prototype.getUISettings=function(){return{tabText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.TAB_Sort"),title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("sort.PERSONALIZATION_DIALOG_TITLE")}};o.prototype.getDelta=function(e){e.deltaAttributes.push("descending");return t.prototype.getDelta.apply(this,arguments)};o.prototype.getAdaptationUI=function(t){var e;e=new r;var o=this.mixInfoAndState(t);e.setP13nData(o.items);this._oPanel=e;return Promise.resolve(e)};o.prototype.model2State=function(){var t=[];if(this._oPanel){this._oPanel.getP13nData(true).forEach(function(e){if(e.sorted){t.push({name:e.name})}});return t}};o.prototype.getChangeOperations=function(){return{add:"addSort",remove:"removeSort",move:"moveSort"}};o.prototype._getPresenceAttribute=function(t){return"sorted"};o.prototype.mixInfoAndState=function(t){var r=this.getCurrentState();var o=e.arrayToMap(r);var n=e.prepareAdaptationData(t,function(t,e){var r=o[e.name];t.sorted=r?true:false;t.sortPosition=r?r.position:-1;t.descending=r?!!r.descending:false;return!(e.sortable===false)});e.sortP13nData({visible:"sorted",position:"sortPosition"},n.items);n.presenceAttribute=this._getPresenceAttribute();n.items.forEach(function(t){delete t.sortPosition});return n};return o});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/Column",["./GridTableType","./ResponsiveTableType","sap/m/library","sap/m/Label","sap/ui/model/json/JSONModel","sap/ui/model/base/ManagedObjectModel","sap/ui/core/Control","sap/ui/core/Core"],function(e,t,i,n,a,o,l,r){"use strict";var s=l.extend("sap.ui.mdc.table.Column",{metadata:{library:"sap.ui.mdc",defaultAggregation:"template",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},minWidth:{type:"float",group:"Behavior",defaultValue:8},header:{type:"string"},headerVisible:{type:"boolean",group:"Misc",defaultValue:true},hAlign:{type:"sap.ui.core.HorizontalAlign",defaultValue:"Begin"},importance:{type:"sap.ui.core.Priority",group:"Behavior",defaultValue:"None"},initialIndex:{type:"int",defaultValue:-1},dataProperty:{type:"string"}},aggregations:{template:{type:"sap.ui.core.Control",multiple:false},creationTemplate:{type:"sap.ui.core.Control",multiple:false}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.openEnd();if(t._oColumnHeaderLabel){e.renderControl(t._oColumnHeaderLabel.getLabel())}e.close("div")}}});s.prototype.init=function(){this.mSkipPropagation={template:true,creationTemplate:true};this._oManagedObjectModel=new o(this);this._oSettingsModel=new a({width:this.getWidth(),calculatedWidth:null,p13nWidth:null,resizable:false})};s.prototype.getInnerColumn=function(){var e=this.getTable();if(e&&(!this._oInnerColumn||this._oInnerColumn.isDestroyed())){this._oInnerColumn=this._createInnerColumn()}return this._oInnerColumn};s.prototype._createInnerColumn=function(){var n=this.getTable();var a;var o={parts:[{path:"$this>/width"},{path:"$columnSettings>/calculatedWidth"},{path:"$columnSettings>/p13nWidth"}],formatter:function(e,t,i){return i||t||e}};this._readP13nValues();if(n._bMobileTable){a=t.createColumn(this.getId()+"-innerColumn",{width:o,autoPopinWidth:"{$this>/minWidth}",hAlign:"{$this>/hAlign}",header:this._getColumnHeaderLabel(),importance:"{$this>/importance}",popinDisplay:"Inline"})}else{a=e.createColumn(this.getId()+"-innerColumn",{width:o,minWidth:{path:"$this>/minWidth",formatter:function(e){return Math.round(e*parseFloat(i.BaseFontSize))}},hAlign:"{$this>/hAlign}",label:this._getColumnHeaderLabel(),resizable:"{$columnSettings>/resizable}",autoResizable:"{$columnSettings>/resizable}",template:this.getTemplateClone()});a.setCreationTemplate(this.getCreationTemplateClone())}a.setModel(this._oManagedObjectModel,"$this");a.setModel(this._oSettingsModel,"$columnSettings");return a};var p=l.extend("sap.ui.mdc.table.ColumnHeaderLabel",{metadata:{final:true,aggregations:{label:{type:"sap.m.Label",multiple:false}},associations:{column:{type:"sap.ui.mdc.table.Column"}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.style("width","100%");e.openEnd();e.renderControl(r.byId(t.getColumn()));e.close("div")}},getText:function(){return this.getLabel().getText()},clone:function(){return this.getLabel().clone()}});s.prototype._getColumnHeaderLabel=function(){var e=this.getTable();if(e&&(!this._oColumnHeaderLabel||this._oColumnHeaderLabel.isDestroyed())){this._oColumnHeaderLabel=new p({column:this,label:new n({width:"{= ${$this>/headerVisible} ? null : '0px' }",text:"{$this>/header}",textAlign:"{$this>/hAlign}",wrapping:{parts:[{path:"$this>/headerVisible"},{path:"$columnSettings>/resizable"}],formatter:function(t,i){return e._bMobileTable&&t&&!i}},wrappingType:e._bMobileTable?"Hyphenated":null})})}return this._oColumnHeaderLabel};s.prototype.getTemplateClone=function(){var e=this.getTable();var t=this.getTemplate();if(e&&t&&(!this._oTemplateClone||this._oTemplateClone.isDestroyed())){this._oTemplateClone=t.clone();if(!e._bMobileTable){if(this._oTemplateClone.setWrapping){this._oTemplateClone.setWrapping(false)}if(this._oTemplateClone.setRenderWhitespace){this._oTemplateClone.setRenderWhitespace(false)}}}return this._oTemplateClone};s.prototype.getCreationTemplateClone=function(){var e=this.getTable();var t=this.getCreationTemplate();if(e&&t&&(!this._oCreationTemplateClone||this._oCreationTemplateClone.isDestroyed())){this._oCreationTemplateClone=t.clone();if(!e._bMobileTable){if(this._oCreationTemplateClone.setWrapping){this._oCreationTemplateClone.setWrapping(false)}if(this._oCreationTemplateClone.setRenderWhitespace){this._oCreationTemplateClone.setRenderWhitespace(false)}}}return this._oCreationTemplateClone};s.prototype.setHeader=function(e){this.setProperty("header",e,true);var t=this.getDomRef();if(t){t.textContent=this.getHeader()}return this};s.prototype._onTableChange=function(e){if(e.getParameter("name")==="enableColumnResize"){this._readTableSettings()}};s.prototype._readTableSettings=function(){var e=this.getTable();this._oSettingsModel.setProperty("/resizable",e.getEnableColumnResize())};s.prototype.setParent=function(e){var t=this.getTable();l.prototype.setParent.apply(this,arguments);if(this._bIsBeingMoved){return}this._disconnectFromTable(t);this._connectToTable()};s.prototype._connectToTable=function(){var e=this.getTable();if(!e){return}this._calculateColumnWidth();this._readP13nValues();this._readTableSettings();e.attachEvent("_change",this._onTableChange,this)};s.prototype._disconnectFromTable=function(e){e=e||this.getTable();if(!e){return}if(this._oInnerColumn){this._oInnerColumn.destroy("KeepDom");e.invalidate()}};s.prototype._onModifications=function(){this._readP13nValues()};s.prototype._calculateColumnWidth=function(){var e=this.getTable();if(!e||!e.getEnableAutoColumnWidth()||!this.isPropertyInitial("width")){return}var t=e.getPropertyHelper();if(t){this._oSettingsModel.setProperty("/calculatedWidth",t.calculateColumnWidth(this))}else{e.awaitPropertyHelper().then(this._calculateColumnWidth.bind(this))}};s.prototype._readP13nValues=function(){var e=this.getTable();var t=e.getCurrentState().xConfig;var i=this.getDataProperty();if(t instanceof Promise){t.then(this._readP13nValues.bind(this));return}var n=t&&t.aggregations&&t.aggregations.columns&&t.aggregations.columns[i]&&t.aggregations.columns[i].width;this._oSettingsModel.setProperty("/p13nWidth",n)};s.prototype.getTable=function(){var e=this.getParent();return e&&e.isA("sap.ui.mdc.Table")?e:null};s.prototype.exit=function(){this._disconnectFromTable();["_oManagedObjectModel","_oSettingsModel","_oInnerColumn","_oTemplateClone","_oCreationTemplateClone","_oColumnHeaderLabel"].forEach(function(e){if(this[e]){this[e].destroy();delete this[e]}},this)};return s});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/CreationRow",["../library","sap/ui/core/Element"],function(e,t){"use strict";var n=e.TableType;var o=t.extend("sap.ui.mdc.table.CreationRow",{metadata:{library:"sap.ui.mdc",properties:{applyEnabled:{type:"boolean",group:"Behavior",defaultValue:true},busy:{type:"boolean",group:"Behavior",defaultValue:false},visible:{type:"boolean",group:"Appearance",defaultValue:true}},events:{apply:{allowPreventDefault:true}}}});o.prototype.init=function(){this._sTableType="";this._oInnerCreationRow=null;this._mBindingContexts={}};o.prototype.exit=function(){if(this._oInnerCreationRow){this._oInnerCreationRow.destroy();this._oInnerCreationRow=null}this._mBindingContexts=null};o.prototype.setBusy=function(e){this.setProperty("busy",e,true);if(this._oInnerCreationRow){this._oInnerCreationRow.setBusy(e)}return this};o.prototype.setBindingContext=function(e,n){t.prototype.setBindingContext.call(this,e,n);this._mBindingContexts[n]={context:e,modelName:n};if(this._oInnerCreationRow){this._oInnerCreationRow.setBindingContext(e,n)}return this};o.prototype.setApplyEnabled=function(e){this.setProperty("applyEnabled",e,true);if(this._oInnerCreationRow){this._oInnerCreationRow.setApplyEnabled(e)}return this};o.prototype.setVisible=function(e){this.setProperty("visible",e,true);if(this._oInnerCreationRow){this._oInnerCreationRow.setVisible(e);this._getTable()._oTable.getRowMode().setHideEmptyRows(e)}return this};o.prototype._onInnerApply=function(e){if(!this.fireApply()){e.preventDefault()}};o.prototype.update=function(){return this._updateInnerCreationRow()};o.prototype._updateInnerCreationRow=function(){var e=this._getTable();var t=e?e._getStringType():"";var o;if(this._sTableType===t||!e||!e._oTable){return Promise.resolve()}this._sTableType=t;if(t===n.Table){o=this._createGridTableCreationRow();e._oTable.getRowMode().setHideEmptyRows(this.getVisible())}else{o=this._createResponsiveTableCreationRow()}return o.then(function(t){r(e,t)})};function i(e){return new Promise(function(t,n){sap.ui.require([e],function(e){t(e)},function(e){n(e)})})}o.prototype._createGridTableCreationRow=function(){return i("sap/ui/table/CreationRow").then(function(e){s(this);this._oInnerCreationRow=new e(this.getId()+"-inner",{visible:this.getVisible(),applyEnabled:this.getApplyEnabled(),apply:[this._onInnerApply,this]});for(var t in this._mBindingContexts){var n=this._mBindingContexts[t];this._oInnerCreationRow.setBindingContext(n.context,n.modelName)}return this._oInnerCreationRow}.bind(this))};o.prototype._createResponsiveTableCreationRow=function(){s(this);return Promise.resolve()};function r(e,t){if(e&&e._oTable&&t){e._oTable.setCreationRow(t)}}function s(e){if(e&&e._oInnerCreationRow){e._oInnerCreationRow.destroy();e._oInnerCreationRow=null}}o.prototype._getTable=function(){var e=this.getParent();return e&&e.isA("sap.ui.mdc.Table")?e:null};return o});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/GridTableType",["./TableTypeBase","../library"],function(e,t){"use strict";var o,i,n,s,a,l,u,r;var d=t.RowCountMode;var c=e.extend("sap.ui.mdc.table.GridTableType",{metadata:{library:"sap.ui.mdc",properties:{rowCountMode:{type:"sap.ui.mdc.RowCountMode",defaultValue:d.Auto},rowCount:{type:"int",defaultValue:10},selectionLimit:{type:"int",defaultValue:200},showHeaderSelector:{type:"boolean",defaultValue:true}}}});c.prototype.updateRelevantTableProperty=function(e,t,o){if(!e||!e.isA("sap.ui.table.Table")){return}if(t==="rowCountMode"){var i=e.getRowMode();var n=false;if(i&&(o===d.Fixed&&!i.isA("sap.ui.table.rowmodes.FixedRowMode")||o===d.Auto&&!i.isA("sap.ui.table.rowmodes.AutoRowMode"))){n=i.getHideEmptyRows();i.destroy();i=null}if(!i){var s=o===d.Fixed?l:u;e.setRowMode(new s({hideEmptyRows:n}))}this._updateTableRowCount(e,o,this.getRowCount())}else if(t==="rowCount"){this._updateTableRowCount(e,this.getRowCountMode(),o)}else if(t==="selectionLimit"){e.getPlugins()[0].setLimit(o).setEnableNotification(o>0)}else if(t==="showHeaderSelector"){e.getPlugins()[0].setShowHeaderSelector(o)}};c.prototype._updateTableRowCount=function(e,t,o){if(t===d.Fixed){e.getRowMode().setRowCount(o)}else{e.getRowMode().setMinRowCount(o)}};c.updateDefault=function(e){if(e){e.setRowMode(new u({minRowCount:10}))}};c.loadGridTableLib=function(){if(!this._oGridTableLibLoaded){this._oGridTableLibLoaded=sap.ui.getCore().loadLibrary("sap.ui.table",true)}return this._oGridTableLibLoaded};c.loadTableModules=function(){if(!o){return new Promise(function(e,t){this.loadGridTableLib().then(function(){sap.ui.require(["sap/ui/table/Table","sap/ui/table/Column","sap/ui/table/RowAction","sap/ui/table/RowActionItem","sap/ui/table/plugins/MultiSelectionPlugin","sap/ui/table/rowmodes/FixedRowMode","sap/ui/table/rowmodes/AutoRowMode","sap/ui/table/RowSettings"],function(t,d,c,w,p,m,g,R){o=t;i=d;n=c;s=w;a=p;l=m;u=g;r=R;e()},function(){t("Failed to load some modules")})})}.bind(this))}else{return Promise.resolve()}};c.createTable=function(e,t){return new o(e,t)};c.createColumn=function(e,t){var o=new i(e,t);o.attachColumnMenuOpen(function(e){e.preventDefault()});o._menuHasItems=function(){return true};return o};c.createMultiSelectionPlugin=function(t,o){return new a(t.getId()+"--multiSelectPlugin",{selectionMode:e.getSelectionMode(t),selectionChange:o})};c.enableColumnResizer=function(e,t){t.getColumns().forEach(function(e){e.setResizable(true);e.setAutoResizable(true)});t.detachColumnResize(e._onColumnResize,e);t.attachColumnResize(e._onColumnResize,e)};c.disableColumnResizer=function(e,t){t.getColumns().forEach(function(e){e.setResizable(false);e.setAutoResizable(false)});t.detachColumnResize(e._onColumnResize,e)};c.updateSelection=function(t){var o=e.getSelectionMode(t);t._oTable.getPlugins()[0].setSelectionMode(o)};c.removeRowActions=function(e){var t=e._oTable.getRowActionTemplate();if(t){t.destroy()}e._oTable.setRowActionTemplate();e._oTable.setRowActionCount()};c.updateRowSettings=function(e,t,o){var i=new r(undefined,t.getAllSettings());this.updateRowActions(e.getParent(),t,o);e.getRowSettingsTemplate().destroy();e.setRowSettingsTemplate(i)};c.updateRowActions=function(e,t){this.removeRowActions(e);if(!t){return}if(!t.isBound("rowActions")&&(!t.getRowActions()||t.getRowActions().length==0)){return}var o=t.getAllActions();if("templateInfo"in o){var i=o.templateInfo;o.items.template=new s({type:i.type,visible:i.visible,icon:i.icon,text:i.text,press:[this._onRowActionPress,e]});delete o.templateInfo}else{o.items=o.items.map(function(t){var o=new s({type:t.isBound("type")?t.getBindingInfo("type"):t.getType(),visible:t.isBound("visible")?t.getBindingInfo("visible"):t.getVisible(),icon:t.isBound("icon")?t.getBindingInfo("icon"):t._getIcon(),text:t.isBound("text")?t.getBindingInfo("text"):t._getText(),press:[this._onRowActionPress,e]});o.data("rowAction",t);return o},this)}var a=new n(e.getId()+"--rowAction",o);e._oTable.setRowActionTemplate(a);e._oTable.setRowActionCount(t.getRowActionCount())};c._onRowActionPress=function(e){var t=e.getParameter("item");var o=this.getRowSettings().getAllActions();if(this.getRowSettings().isBound("rowActions")){var i=o.items.model;var n=t.getBindingContext(i);if(!this._oRowActionItem){this._oRowActionItem=o.items.template.clone()}this._oRowActionItem.setBindingContext(n,o.items.model);this._oRowActionItem.setModel(this.getModel(i),i);this.getRowSettings().addDependent(this._oRowActionItem)}else{this._oRowActionItem=t.data("rowAction")}var s=e.getParameter("row");this._oRowActionItem.firePress({bindingContext:s.getBindingContext()})};return c});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/PropertyHelper",["../util/PropertyHelper","sap/m/table/Util"],function(t,e){"use strict";var r=t.extend("sap.ui.mdc.table.PropertyHelper",{constructor:function(e,r,n,i){var a=["filterable","sortable","groupable","key","unit","text","exportSettings","propertyInfos","visualSettings"];t.call(this,e,r,n,a,i)}});function n(t){return!!(t&&t.isA&&t.isA("sap.ui.mdc.table.Column"))}function i(t){if(t.indexOf("em")>0){return Math.round(parseFloat(t))}if(t.indexOf("px")>0){return Math.round(parseInt(t)/16)}return""}r.prototype.prepareProperty=function(e){t.prototype.prepareProperty.apply(this,arguments);e.aggregatable=false};r.prototype.getColumnExportSettings=function(t){var e=[];if(!n(t)){return e}var r=this.getProperty(t.getDataProperty());if(!r){return e}var i=r.exportSettings;if(i===null){return e}var l=[];var p;var u;if(!r.isComplex()){p=a(t,r,i);p.property=r.path;e.push(p);return e}u=r.getReferencedProperties();if(Object.keys(i).length){p=a(t,r,i);u.forEach(function(t){l.push(t.path)});p.property=l;e.push(p)}else{u.forEach(function(r,n){var i=r.exportSettings,l=a(t,r,i);l.property=r.path;if(n>0){l.columnId=t.getId()+"-additionalProperty"+n}if(i||l.property){e.push(l)}})}return e};function a(t,e,r){var n=Object.assign({columnId:t.getId(),label:e.label,width:i(t.getWidth()),textAlign:t.getHAlign(),type:"String"},r);return n}r.prototype.calculateColumnWidth=function(t){var e=t.getDataProperty();var r=this.getProperty(e);if(!r){return null}var n=r.visualSettings;if(n&&n.widthCalculation===null){return null}return this._calcColumnWidth(r)};r.prototype._calcColumnWidth=function(t){var r=Object.assign({gap:0,includeLabel:true,excludeProperties:[]},t.visualSettings&&t.visualSettings.widthCalculation);var n=[];if(t.isComplex()){n=t.getReferencedProperties().flatMap(function(t){var e=t.visualSettings?t.visualSettings.widthCalculation:undefined;return e===null||r.excludeProperties.includes(t.name)?[]:[[t.typeConfig.typeInstance,e]]})}else{n.push(t.typeConfig.typeInstance)}if(t.unit){r.gap+=2.5}var i=r.includeLabel?t.label:"";return e.calcColumnWidth(n,i,r)};return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/ResponsiveTableType",["sap/ui/core/Core","./TableTypeBase","../library","sap/m/Button","sap/ui/Device","sap/m/plugins/ColumnResizer","sap/m/SegmentedButton","sap/m/SegmentedButtonItem"],function(e,t,i,o,n,s,a,l){"use strict";var r,u,p;var d=i.GrowingMode;var g=i.RowAction;var h=t.extend("sap.ui.mdc.table.ResponsiveTableType",{metadata:{library:"sap.ui.mdc",properties:{growingMode:{type:"sap.ui.mdc.GrowingMode",defaultValue:d.Basic},showDetailsButton:{type:"boolean",group:"Misc",defaultValue:false},detailsButtonSetting:{type:"sap.ui.core.Priority[]",group:"Behavior"},popinLayout:{type:"sap.m.PopinLayout",group:"Appearance",defaultValue:"Block"}}}});h.prototype.setDetailsButtonSetting=function(e){this.setProperty("detailsButtonSetting",e,true);return this};h.prototype.updateRelevantTableProperty=function(e,t,i){if(e&&e.isA("sap.m.Table")){if(t==="growingMode"){e.setGrowingScrollToLoad(i===d.Scroll);e.setGrowing(i!==d.None)}else if(t==="showDetailsButton"){this.updateShowDetailsButton(e,i)}else if(t==="popinLayout"){e.setPopinLayout(i)}}};h.updateDefault=function(e){if(e){e.setGrowing(true);e.setGrowingScrollToLoad(false)}};h.prototype.updateShowDetailsButton=function(e,t){if(t&&!this._oShowDetailsButton){e.getHeaderToolbar().insertEnd(this._getShowDetailsButton(),0);e.attachEvent("popinChanged",this._onPopinChanged,this);e.setHiddenInPopin(this._getImportanceToHide())}else if(!t&&this._oShowDetailsButton){e.detachEvent("popinChanged",this._onPopinChanged,this);e.getHeaderToolbar().removeEnd(this._oShowDetailsButton);e.setHiddenInPopin([]);this._oShowDetailsButton.destroy();delete this._oShowDetailsButton}};h.loadTableModules=function(){if(!r){return new Promise(function(e,t){sap.ui.require(["sap/m/Table","sap/m/Column","sap/m/ColumnListItem"],function(t,i,o){r=t;u=i;p=o;e()},function(){t("Failed to load some modules")})})}else{return Promise.resolve()}};h.createTable=function(e,t){return new r(e,t)};h.createColumn=function(e,t){return new u(e,t)};h.createTemplate=function(e,t){return new p(e,t)};h.updateSelection=function(e){e._oTable.setMode(t.getSelectionMode(e))};h.updateMultiSelectMode=function(e){e._oTable.setMultiSelectMode(e.getMultiSelectMode())};h.updateRowSettings=function(e,t,i){var o=e._oTemplate;o.unbindProperty("navigated");o.unbindProperty("highlight");o.unbindProperty("highlightText");this.updateRowActions(e,t,i);var n=t.getAllSettings();o.applySettings(n)};h.updateRowActions=function(e,t){e._oTemplate.unbindProperty("type");var i=e.hasListeners("rowPress")?"Active":"Inactive";if(!t){e._oTemplate.setType(i);return}var o,n,s,a=t.getAllActions();if("templateInfo"in a){var l=a.templateInfo;s=l.visible.formatter;n=typeof l.visible=="object";o=l.visible}else if(a&&a.items){var r;if(a.items.length==0){e._oTemplate.setType(i);return}r=a.items.find(function(e){return e.getType()=="Navigation"});if(!r&&a.items.length>0){throw new Error("No RowAction of type 'Navigation' found. sap.m.Table only accepts RowAction of type 'Navigation'.")}e._oTemplate.data("rowAction",r);n=r.isBound("visible");o=n?r.getBindingInfo("visible"):r.getVisible();s=o.formatter}if(s){o.formatter=function(e){var t=s(e);return t?g.Navigation:i}}else{o=o?g.Navigation:i}if(n){e._oTemplate.bindProperty("type",o)}else{e._oTemplate.setProperty("type",o)}};h.disableColumnResizer=function(e,t){var i=s.getPlugin(t);if(i){i.setEnabled(false);i.detachColumnResize(e._onColumnResize,e)}};h.enableColumnResizer=function(e,t){t.setFixedLayout("Strict");var i=s.getPlugin(t);if(!i){var o=new s;t.addDependent(o);o.attachColumnResize(e._onColumnResize,e)}else{i.setEnabled(true);i.detachColumnResize(e._onColumnResize,e);i.attachColumnResize(e._onColumnResize,e)}};h.startColumnResize=function(e,t,i){var o=s.getPlugin(e);if(!o){return}if(i&&i.isA("sap.m.table.columnmenu.Menu")){return o.getColumnResizeQuickAction(t,i)}else{return o.getColumnResizeButton(t)}};h.prototype._toggleShowDetails=function(e){if(!this._oShowDetailsButton||e===this.bHideDetails){return}var t=this.getRelevantTable();this.bHideDetails=e;if(this.bHideDetails){t.setHiddenInPopin(this._getImportanceToHide())}else{t.setHiddenInPopin([])}};h.prototype._getShowDetailsButton=function(){if(!this._oShowDetailsButton){var t=e.getLibraryResourceBundle("sap.ui.mdc");this.bHideDetails=true;this._oShowDetailsButton=new a(this.getId()+"-showHideDetails",{visible:false,selectedKey:"hideDetails",items:[new l({icon:"sap-icon://detail-more",key:"showDetails",tooltip:t.getText("table.SHOWDETAILS_TEXT"),press:[function(){this._toggleShowDetails(false)},this]}),new l({icon:"sap-icon://detail-less",key:"hideDetails",tooltip:t.getText("table.HIDEDETAILS_TEXT"),press:[function(){this._toggleShowDetails(true)},this]})]})}return this._oShowDetailsButton};h.prototype._getImportanceToHide=function(){var e=this.getDetailsButtonSetting()||[];if(e.length){return e}else{return n.system.phone?["Low","Medium"]:["Low"]}};h.prototype._onPopinChanged=function(e){var t=e.getParameter("hasPopin");var i=e.getParameter("hiddenInPopin");var o=e.getSource().getVisibleItems().length;if(o&&(i.length||t&&!this.bHideDetails)){this._oShowDetailsButton.setVisible(true)}else{this._oShowDetailsButton.setVisible(false)}};h._onRowActionPress=function(e){var t=e.getParameter("listItem");var i=t.getBindingContext();if(t.getType()!=="Navigation"){return}var o=this.getRowSettings();var n=o.getAllActions();if(this.getRowSettings().isBound("rowActions")){var s=n.items.model;if(!this._oRowActionItem){this._oRowActionItem=n.items.template.clone()}this._oRowActionItem.setModel(this.getModel(s),s);this.getRowSettings().addDependent(this._oRowActionItem)}else{this._oRowActionItem=t.data("rowAction")}this._oRowActionItem.setType("Navigation");this._oRowActionItem.firePress({bindingContext:i})};return h});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/RowActionItem",["sap/ui/core/Element","../library","sap/ui/core/IconPool","sap/ui/core/Core"],function(e,t,i,o){"use strict";var a=t.RowAction;var n=e.extend("sap.ui.mdc.table.RowActionItem",{metadata:{library:"sap.ui.mdc",properties:{type:{type:"sap.ui.mdc.RowAction"},text:{type:"string"},icon:{type:"sap.ui.core.URI"},visible:{type:"boolean",defaultValue:true}},events:{press:{parameters:{bindingContext:{type:"sap.ui.model.Context"}}}}}});var r={navigationIcon:"navigation-right-arrow"};n.prototype._getText=function(){var e;if(this.getText()){e=this.getText()}else{var t=o.getLibraryResourceBundle("sap.ui.mdc");if(this.getType()===a.Navigation){e=t.getText("table.ROW_ACTION_ITEM_NAVIGATE")}}return e};n.prototype._getIcon=function(){var e;if(this.getIcon()){e=this.getIcon()}else if(this.getType()===a.Navigation){e=i.getIconURI(r["navigationIcon"])}return e};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/RowSettings",["sap/ui/core/Element"],function(t){"use strict";var i=t.extend("sap.ui.mdc.table.RowSettings",{metadata:{library:"sap.ui.mdc",properties:{highlight:{type:"string",group:"Appearance",defaultValue:"None"},highlightText:{type:"string",group:"Misc",defaultValue:""},navigated:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{rowActions:{type:"sap.ui.mdc.table.RowActionItem",multiple:true}}}});i.prototype.getAllSettings=function(){var t={},i=this.clone();if(this.isBound("navigated")){t.navigated=i.getBindingInfo("navigated")}else{t.navigated=this.getNavigated()}if(this.isBound("highlight")){t.highlight=i.getBindingInfo("highlight")}else{t.highlight=this.getHighlight()}if(this.isBound("highlightText")){t.highlightText=i.getBindingInfo("highlightText")}else{t.highlightText=this.getHighlightText()}return t};i.prototype.getAllActions=function(){var t={},i=this.clone();if(this.isBound("rowActions")){t.items=i.getBindingInfo("rowActions");var e=t.items.template;t.templateInfo={type:e.isBound("type")?e.getBindingInfo("type"):e.getType(),text:e.isBound("text")?e.getBindingInfo("text"):e.getText(),icon:e.isBound("icon")?e.getBindingInfo("icon"):e.getIcon(),visible:e.isBound("visible")?e.getBindingInfo("visible"):e.getVisible()}}else{t.items=this.getRowActions()}return t};i.prototype.getRowActionCount=function(){var t=0;if(this.isBound("rowActions")){t=1}else{t=this.getRowActions().length}return t};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/TableSettings",["sap/m/OverflowToolbarButton","sap/m/library","sap/m/MenuButton","sap/ui/core/library","sap/ui/Device","sap/ui/core/ShortcutHintsMixin"],function(e,t,n,a,o,r){"use strict";var i=a.aria.HasPopup;var s;var u={createSettingsButton:function(e,t){if(!s){this._loadResourceBundle()}var n=this._createButton(e+"-settings",{icon:"sap-icon://action-settings",text:s.getText("table.SETTINGS"),press:t,tooltip:s.getText("table.SETTINGS"),ariaHasPopup:i.Dialog});r.addConfig(n,{addAccessibilityLabel:true,messageBundleKey:o.os.macintosh?"mdc.PERSONALIZATION_SHORTCUT_MAC":"mdc.PERSONALIZATION_SHORTCUT"},t[1]);return n},createPasteButton:function(e){var t=this._createButton(e+"-paste");sap.ui.require(["sap/m/plugins/PasteProvider"],function(n){t.addDependent(new n({pasteFor:e+"-innerTable"}))});return t},createExportButton:function(e,a){if(!s){this._loadResourceBundle()}var i=new n(e+"-export",{icon:"sap-icon://excel-attachment",tooltip:s.getText("table.EXPORT_BUTTON_TEXT"),type:t.ButtonType.Ghost,buttonMode:t.MenuButtonMode.Split,useDefaultActionOnly:true,defaultAction:a.default});sap.ui.getCore().loadLibrary("sap.ui.unified",{async:true}).then(function(){sap.ui.require(["sap/m/Menu","sap/m/MenuItem"],function(e,t){var n=new e({items:[new t({text:s.getText("table.QUICK_EXPORT"),press:a.default}),new t({text:s.getText("table.EXPORT_WITH_SETTINGS"),press:a.exportAs})]});i.setMenu(n)})});r.addConfig(i._getButtonControl(),{addAccessibilityLabel:true,messageBundleKey:o.os.macintosh?"table.SHORTCUT_EXPORT_TO_EXCEL_MAC":"table.SHORTCUT_EXPORT_TO_EXCEL"},a.exportAs[1]);return i},_createButton:function(t,n){return new e(t,n)},_loadResourceBundle:function(){s=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")},showPanel:function(e,t,n,a){u["showUI"+t](e,n)},showUIColumns:function(e,t){e.getEngine().uimanager.show(e,e.getActiveP13nModes(),t)},showUIFilter:function(e,t){e.getEngine().uimanager.show(e,"Filter",t)},createSort:function(e,t,n,o){e.getEngine().createChanges({control:e,key:"Sort",state:[{selected:true,name:t,descending:n===a.SortOrder.Descending,sorted:n!==a.SortOrder.None}],applyAbsolute:o})},createGroup:function(e,t){var n={grouped:true,name:t};var a=[n];e.getCurrentState().groupLevels.some(function(e){if(e.name==t){a[0].grouped=false}});e.getEngine().createChanges({control:e,key:"Group",state:a,applyAbsolute:e._bMobileTable})},createAggregation:function(e,t){var n={name:t,aggregated:true};var a=[n];if(e.getCurrentState().aggregations[t]){n.aggregated=false}e.getEngine().createChanges({control:e,key:"Aggregate",state:a,applyAbsolute:false})},createColumnWidth:function(e,t,n){var a={name:t,width:n};var o=[a];e.getEngine().createChanges({control:e,key:"ColumnWidth",state:o,applyAbsolute:false})},moveColumn:function(e,t,n){if(t!=n){this._moveItem(e,t,n,"moveColumn")}},_moveItem:function(e,t,n,a){var o=e.getCurrentState(e).items||[];var r=o[t];e.getEngine().createChanges({control:e,key:"Column",state:[{name:r.name,position:n}]})}};return u});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/TableTypeBase",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.ui.mdc.table.TableTypeBase",{metadata:{library:"sap.ui.mdc",properties:{}}});t.prototype.setProperty=function(t,a,i){e.prototype.setProperty.call(this,t,a,true);var r=this.getRelevantTable();if(r){this.updateRelevantTableProperty(r,t,a)}return this};t.prototype.updateRelevantTableProperty=function(e,t,a){};t.prototype.getRelevantTable=function(){var e=this.getParent();if(e&&e.isA("sap.ui.mdc.Table")){e=e._oTable}else{e=null}return e};t.prototype.updateTableSettings=function(e){var t=Object.assign({},e,this.getMetadata().getProperties()),a,i=this.getRelevantTable();if(i){for(a in t){this.updateRelevantTableProperty(i,a,this.getProperty(a))}}};t.getSelectionMode=function(e){var t=e.getSelectionMode();switch(t){case"Single":t=e._bMobileTable?"SingleSelectLeft":"Single";break;case"Multi":t=e._bMobileTable?"MultiSelect":"MultiToggle";break;default:t="None"}return t};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/V4AnalyticsPropertyHelper",["./PropertyHelper"],function(e){"use strict";var t=e.extend("sap.ui.mdc.table.V4AnalyticsPropertyHelper",{constructor:function(t,r,p){e.call(this,t,r,p,{defaultAggregate:{type:{contextDefiningProperties:{type:"PropertyReference[]"}}}})}});t.prototype.prepareProperty=function(t){e.prototype.prepareProperty.apply(this,arguments);t.aggregatable=t.extension.defaultAggregate!=null;t.getAggregatableProperties=function(){var e=t.isComplex()?t.getReferencedProperties():[t];return e.filter(function(e){return e.aggregatable})}};t.prototype.getAggregatableProperties=function(){return this.getProperties().filter(function(e){return e.aggregatable})};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/menu/Item",["sap/ui/core/Core","sap/m/table/columnmenu/Item"],function(e,t){"use strict";var n=t.extend("sap.ui.mdc.table.menu.Item",{metadata:{library:"sap.ui.mdc",properties:{key:{type:"string"}}}});n.prototype.initializeContent=function(){var e=this.getTable();var t=e.getEngine();var n=this.getKey();var i=t.getController(e,n);return e.getEngine().uimanager.create(e,[n]).then(function(r){var o=r.removeContent(0);r.destroy();this.setContent(o);this.setLabel(i.getUISettings().title);i.update(e.getPropertyHelper());t.validateP13n(e,n,this.getContent());this.changeButtonSettings({reset:{visible:i.getResetEnabled()}})}.bind(this))};n.prototype.onPress=function(){var e=this.getTable();e.getEngine().getController(e,this.getKey()).update(e.getPropertyHelper())};n.prototype.onConfirm=function(){var e=this.getTable();e.getEngine().handleP13n(e,[this.getKey()])};n.prototype.onReset=function(){var e=this.getTable();e.getEngine().reset(e,[this.getKey()]).then(function(){e._oQuickActionContainer.initializeQuickActions();e._oColumnHeaderMenu._oPopover.invalidate()})};n.prototype.destroyContent=function(){if(this.getKey()!=="Filter"){return this}return this.destroyAggregation("content")};n.prototype.getTable=function(){return this.getParent().getTable()};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/menu/ItemContainer",["sap/m/table/columnmenu/ItemContainer","sap/ui/mdc/table/menu/Item","sap/ui/core/Core"],function(e,t,i){"use strict";var n=e.extend("sap.ui.mdc.table.menu.ItemContainer",{metadata:{library:"sap.ui.mdc",associations:{table:{type:"sap.ui.mdc.Table"}}}});n.prototype.initializeItems=function(){var e=this.getTable();this.removeAllItems();if(e.isSortingEnabled()){this.addItem(new t({key:"Sort",icon:"sap-icon://sort"}))}if(e.isFilteringEnabled()){this.addItem(new t({key:"Filter",icon:"sap-icon://filter"}))}if(e.isGroupingEnabled()){this.addItem(new t({key:"Group",icon:"sap-icon://group-2"}))}if(e.getActiveP13nModes().includes("Column")){this.addItem(new t({key:"Column",icon:"sap-icon://table-column"}))}return Promise.all(this.getItems().map(function(e){return e.initializeContent()}))};n.prototype.hasItems=function(){return this.getEffectiveItems().length>0};n.prototype.getTable=function(){return i.byId(this.getAssociation("table"))};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/table/menu/QuickActionContainer",["../TableSettings","../ResponsiveTableType","sap/m/table/columnmenu/QuickActionContainer","sap/m/table/columnmenu/QuickAction","sap/m/table/columnmenu/QuickSort","sap/m/table/columnmenu/QuickSortItem","sap/m/table/columnmenu/QuickGroup","sap/m/table/columnmenu/QuickGroupItem","sap/m/table/columnmenu/QuickTotal","sap/m/table/columnmenu/QuickTotalItem","sap/m/Button","sap/ui/core/Core","sap/ui/core/library"],function(e,t,n,r,a,i,o,u,c,l,s,m,g){"use strict";var p=n.extend("sap.ui.mdc.table.menu.QuickActionContainer",{metadata:{library:"sap.ui.mdc",associations:{table:{type:"sap.ui.mdc.Table"},column:{type:"sap.ui.mdc.table.Column"}}}});p.prototype.initializeQuickActions=function(){var n=this.getTable();var r=this.getColumn();var s=n.getPropertyHelper();var m=Promise.resolve();this.destroyQuickActions();if(n.isSortingEnabled()){var p=s.getProperty(r.getDataProperty()).getSortableProperties();var b=n._getSortedProperties();if(p.length>0){this.addQuickAction(new a({items:p.map(function(e){var t=g.SortOrder.None;var n=b.find(function(t){return t.name===e.name});if(n){t=n.descending?g.SortOrder.Descending:g.SortOrder.Ascending}return new i({key:e.name,label:e.label,sortOrder:t})}),change:function(t){var r=t.getParameter("item");e.createSort(n,r.getKey(),r.getSortOrder(),true)}}))}}if(n.isGroupingEnabled()){var d=s.getProperty(r.getDataProperty()).getGroupableProperties();var f=n._getGroupedProperties();if(d.length>0){this.addQuickAction(new o({items:d.map(function(e){var t=f.some(function(t){return t.name===e.name});return new u({key:e.name,label:e.label,grouped:t})}),change:function(t){var r=t.getParameter("item");e.createGroup(n,r.getKey())}}))}}if(n.isAggregationEnabled()){var y=s.getProperty(r.getDataProperty()).getAggregatableProperties();var k=n._getAggregatedProperties();if(y.length>0){this.addQuickAction(new c({items:y.map(function(e){return new l({key:e.name,label:e.label,totaled:k.hasOwnProperty(e.name)})}),change:function(t){var r=t.getParameter("item");e.createAggregation(n,r.getKey())}}))}}if(n._bMobileTable&&n.getEnableColumnResize()){var v=t.startColumnResize(n._oTable,n._oTable.getColumns()[n.indexOfColumn(r)],this.getMenu());this.addQuickAction(v)}return m};p.prototype.hasQuickActions=function(){return this.getEffectiveQuickActions().length>0};p.prototype.getTable=function(){return m.byId(this.getAssociation("table"))};p.prototype.getColumn=function(){return m.byId(this.getAssociation("column"))};return p});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/Common",[],function(){"use strict";var n={cleanup:function(n,e){e.forEach(function(e){var i=n[e];if(i){if(i.destroy&&!i.bIsDestroyed){i.destroy()}n[e]=null}})}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/DateUtil",["sap/ui/core/library","sap/ui/core/date/UniversalDate","sap/ui/mdc/enum/BaseType","sap/base/util/merge"],function(e,t,r,a){"use strict";var n=e.CalendarType;var i={typeToUniversalDate:function(e,a,n){var i;if(n&&n===r.DateTime){i="yyyyMMdd-HHmmssSSS"}else{i="yyyyMMdd"}var s=this.typeToString(e,a,i);var o=parseInt(s.slice(0,4));var T=parseInt(s.slice(4,6))-1;var u=parseInt(s.slice(6,8));var l=n===r.DateTime?parseInt(s.slice(9,11)):0;var g=n===r.DateTime?parseInt(s.slice(11,13)):0;var c=n===r.DateTime?parseInt(s.slice(13,15)):0;var p=n===r.DateTime?parseInt(s.slice(15,18)):0;var v=new t(t.UTC(o,T,u,l,g,c,p));return v},universalDateToType:function(e,t,a){var n=e.getUTCFullYear();var i=e.getUTCMonth()+1;var s=e.getUTCDate();var o=n.toString()+(i<10?"0":"")+i.toString()+(s<10?"0":"")+s.toString();var T;if(a&&a===r.DateTime){T="yyyyMMdd-HHmmssSSS";var u=e.getUTCHours();var l=e.getUTCMinutes();var g=e.getUTCSeconds();var c=e.getUTCMilliseconds();o=o+"-"+(u<10?"0":"")+u.toString()+(l<10?"0":"")+l.toString()+(g<10?"0":"")+g.toString()+(c<100?"0":"")+(c<10?"0":"")+c.toString()}else{T="yyyyMMdd"}var p=this.stringToType(o,t,T);return p},createInternalType:function(e,t){var r=sap.ui.require(e.getMetadata().getName().replace(/\./g,"/"));var i=a({},e.getConstraints());var s=a({},e.getFormatOptions());if(s.style){delete s.style}s.pattern=t;s.calendarType=n.Gregorian;if(this.showTimezone(e)){s.showTimezone=false}return new r(s,i)},showTimezone:function(e){var t=e.getFormatOptions();var r=function(e,t){return!e.hasOwnProperty(t)||e[t]};return e.isA("sap.ui.model.odata.type.DateTimeWithTimezone")&&r(t,"showTimezone")&&(r(t,"showDate")||r(t,"showTime"))},typeToString:function(e,t,r){var a=this.createInternalType(t,r);var n=a.formatValue(e,"string");return n},stringToType:function(e,t,r){var a=this.createInternalType(t,r);var n=a.parseValue(e,"string");return n},localToUtc:function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},utcToLocal:function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())}};return i});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/FilterUtil",["sap/ui/mdc/util/IdentifierUtil","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/condition/ConditionConverter","sap/ui/mdc/condition/FilterConverter","sap/base/Log","sap/base/util/merge"],function(e,t,i,r,n,a){"use strict";var o={getPropertyByKey:function(t,i){var r=null;t.some(function(t){if(e.getPropertyPath(t)===i){r=t}return r!=null});if(!r){t.some(function(t){if(e.getPropertyKey(t)===i){r=t}return r!=null})}return r},getConditionsMap:function(e,i){var r,a,o={};if(!e||!e.isA("sap.ui.mdc.FilterBar")){n.error("instance of sap.ui.mdc.FilterBar expected");return o}var s=e.getInternalConditions();for(var u in s){if(i.indexOf(u)>=0){r=[];if(s[u]){for(var l=0;l<s[u].length;l++){a={};a.operator=s[u][l].operator;if(a.operator==="EQ"&&s[u][l].validated===t.Validated){a.values=[s[u][l].values[0]]}else{a.values=s[u][l].values}r.push(a)}o[u]=r}}}return o},getFilterInfo:function(e,t,s,u){var l={};u=u?u:[];var p,f,c={},d;var y={};if(s&&s.length>0){for(f in t){if(u.indexOf(f)<0){var v=o.getPropertyByKey(s,f);if(v){y[f]={type:v.typeConfig.typeInstance,caseSensitive:v.caseSensitive,baseType:v.typeConfig.baseType};c[f]=[];for(p=0;p<t[f].length;p++){d=a({},t[f][p]);c[f].push(i.toType(d,v.typeConfig,e.getTypeUtil?e.getTypeUtil():e))}}else{n.error("no such property: "+f)}}}if(Object.keys(c).length>0){l.filters=r.createFilters(c,y)}}return l}};return o});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/FormatUtil",[],function(){"use strict";var e={getWidth:function(e,i,t){var f=e.precision||e.maxLength,a;if(!i){i=20}if(!t){t=3}if(e.type==="Edm.DateTime"&&e.type==="Edm.Date"){f="9em"}else if(f){if(f==="Max"){f=i+""}a=parseInt(f);if(!isNaN(a)){a+=.75;if(a>i){a=i}else if(a<t){a=t}f=a+"em"}else{f=null}}if(!f){if(e.type==="Edm.Boolean"){f=t+"em"}else{f=i+"em"}}return f}};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/IdentifierUtil",["sap/ui/base/DataType"],function(e){"use strict";var t={replace:function(t){var r=e.getType("sap.ui.core.ID");if(!r.isValid(t)){t=t.replace(/[^A-Za-z0-9_.:]+/g,"__mdc__");if(!r.isValid(t)){t="__mdc__"+t}}return t},getFilterFieldId:function(e,r){return e.getId()+"--filter--"+t.replace(r)},getPropertyKey:function(e){return e.name},getPropertyPath:function(e){return e.path},getView:function(e){var t=null;if(e){var r=e.getParent();while(r){if(r.isA("sap.ui.core.mvc.View")){t=r;break}r=r.getParent()}}return t}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/PromiseCache",["sap/ui/base/Object"],function(e){"use strict";var t=function(e){if(!e){throw new Error("PromiseCache: Please provide an identifier!")}if(this._oCache&&this._oCache[e]){this.remove.call(this,e)}};var i=function(e){if(typeof e==="object"&&this._oCache){for(var t in this._oCache){if(this._oCache[t].promise===e){return t}}}};var r=function(e,t){var r=typeof e==="string"?e:i.call(this,e);var n=r&&this._oCache&&this._oCache[r];if(t&&!n){throw new Error("PromiseCache: Promise not found!")}return n};var n=e.extend("sap.ui.mdc.util.PromiseCache",{constructor:function(){this._oCache={}},add:function(e,i){t.call(this,e);var r={};this._oCache[e]=r;r.promise=new Promise(function(e,t){r.resolve=function(t){if(!r._isCanceled){r._isSettled=true;e(t)}};r.reject=function(e){if(!r._isCanceled){r._isSettled=true;t(e)}}});r.promise.isSettled=function(){return!!r._isSettled};r.promise.isPending=function(){return!r._isSettled&&!r._isCanceled};r.promise.isCanceled=function(){return!!r._isCanceled};r.promise.getInternalPromise=function(){return r._promise};if(i){var n=typeof i==="function";var o=!n&&typeof i.then==="function";if(!n&&!o){throw new Error("PromiseCache: fnCreate must be a promise or function")}var s=n?i():i;var c=s&&typeof s.then==="function";if(c){r._promise=s;r._promise.then(function(e){if(!r._isCanceled){r._isSettled=true;r.resolve(e)}return e},function(e){if(!r._isCanceled){r._isSettled=true;r.reject(e)}})}else{r.resolve(s)}}return this._oCache[e].promise},cancel:function(e){var t=r.call(this,e,true);if(!t._isSettled){t._isCanceled=true}return t.promise},retrieve:function(e,t){var i=this._oCache&&this._oCache[e];if(!i&&t){return this.add.apply(this,[e,t])}return i&&i.promise},retrieveMany:function(){var e=[];var t=arguments.length?[].slice.call(arguments):Object.keys(this._oCache);for(var i=0;i<t.length;i++){e.push(this.retrieve(t[i].toString()))}return e},remove:function(e){var t=typeof e==="string"?e:i.call(this,e);var r=t&&this._oCache&&this._oCache[t];if(r){r._isCanceled=true;delete this._oCache[t]}},resolve:function(e,t){var i=r.call(this,e,true);i.resolve(t);return i.promise},reject:function(e,t){var i=r.call(this,e,true);i.reject(t);return i.promise},clear:function(){Object.keys(this._oCache).forEach(function(e){this.remove(e)}.bind(this))},destroy:function(){this.clear();this._oCache=null}});return n});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/PropertyHelper",["sap/ui/base/Object","sap/ui/base/DataType","sap/base/util/merge","sap/base/util/isPlainObject","sap/base/Log"],function(e,t,r,o,n){"use strict";var i={name:{type:"string",mandatory:true,allowedForComplexProperty:true},label:{type:"string",mandatory:true,allowedForComplexProperty:true},visible:{type:"boolean",default:{value:true},allowedForComplexProperty:true},path:{type:"string",valueForComplexProperty:null},typeConfig:{type:{className:{type:"string"},baseType:{type:"string"},typeInstance:{type:"object"}},valueForComplexProperty:null},maxConditions:{type:"int",default:{value:-1},valueForComplexProperty:null},caseSensitive:{type:"boolean",default:{value:true}},group:{type:"string",allowedForComplexProperty:true},groupLabel:{type:"string",allowedForComplexProperty:true},filterable:{type:"boolean",default:{value:true},valueForComplexProperty:false},sortable:{type:"boolean",default:{value:true},valueForComplexProperty:false},key:{type:"boolean",valueForComplexProperty:false},groupable:{type:"boolean",valueForComplexProperty:false},propertyInfos:{type:"PropertyReference[]",allowedForComplexProperty:true},unit:{type:"PropertyReference"},text:{type:"PropertyReference"},exportSettings:{type:"object",default:{value:{},ignoreIfNull:true},allowedForComplexProperty:true},visualSettings:{type:{widthCalculation:{type:{minWidth:{type:"int",default:{value:2}},maxWidth:{type:"int",default:{value:19}},defaultWidth:{type:"int",default:{value:8}},gap:{type:"float",default:{value:0}},includeLabel:{type:"boolean",default:{value:true}},verticalArrangement:{type:"boolean",default:{value:false}},excludeProperties:{type:"PropertyReference[]"}},default:{value:{},ignoreIfNull:true}}},default:{value:{}},allowedForComplexProperty:true},required:{type:"boolean"},hiddenFilter:{type:"boolean"}};var a={isComplex:function(){return F.isPropertyComplex(this)},getReferencedProperties:function(){return this.propertyInfosProperties||[]},getSortableProperties:function(){return C(this,function(e){return e.sortable})},getFilterableProperties:function(){return C(this,function(e){return e.filterable})},getGroupableProperties:function(){return C(this,function(e){return e.groupable})},getVisibleProperties:function(){return C(this,function(e){return e.visible})}};var p=["name","label","visible","path","typeConfig","maxConditions","group","groupLabel","caseSensitive"];var l=new WeakMap;function u(e){return JSON.stringify(e,function(e,t){return t===undefined?null:t})||""}function s(e,t){var r=u(t);n.warning("Invalid property definition: "+e+(r?"\n"+r:""))}function f(e,t){var r=t?u(t):null;throw new Error("Invalid property definition: "+e+(r?"\n"+r:""))}function y(e,t){t.map(function(e){Object.keys(a).forEach(function(t){Object.defineProperty(e,t,{value:function(){return a[t].call(this)},writable:true})})})}function c(e){var t=Object.getOwnPropertyNames(e);Object.freeze(e);for(var r=0;r<t.length;r++){var n=e[t[r]];if(typeof n==="function"){Object.freeze(n)}else if(o(n)&&!Object.isFrozen(n)){c(n)}else if(Array.isArray(n)){c(n)}}}function d(e,t){if(!t){return e}return t.split(".").reduce(function(e,t){return e&&e[t]?e[t]:null},e)}function b(e){var r;if(typeof e==="object"){r="object"}else{r=e.replace("PropertyReference","string")}return t.getType(r)}function v(e){var t=b(e);if(t.isArrayType()){return t.getBaseType().getDefaultValue()}else{return t.getDefaultValue()}}function P(e,t){t.forEach(function(t){e.prepareProperty(t)});c(t)}function g(e,t,r,o,n,i){var a=o==null;var p=[];var u=F.isPropertyComplex(t);if(a){i=l.get(e).mAttributeMetadata;n=t}if(!n){return[]}for(var s in i){var f=i[s];var y=a?s:o+"."+s;var c=n[s];if(u&&!f.allowedForComplexProperty){if("valueForComplexProperty"in f){n[s]=f.valueForComplexProperty}continue}if(c!=null&&typeof f.type==="string"&&f.type.startsWith("PropertyReference")||y==="propertyInfos"){if(u||y!=="propertyInfos"){m(n,s,r)}continue}if(c==null){h(n,f,o,s,p,c)}if(typeof f.type==="object"){p=p.concat(g(e,t,r,y,n[s],f.type))}}return p}function m(e,t,r){var o=e[t];var n;var i=t;if(Array.isArray(o)){n=o.map(function(e){return r[e]});i+="Properties"}else{n=r[o];i+="Property"}Object.defineProperty(e,i,{value:n})}function h(e,t,o,n,i,a){if("default"in t){var p=t.default;if(a===null&&p.ignoreIfNull&&p.value!==undefined){return}if(p.value===undefined){e[n]=v(t.type)}else if(typeof p.value==="string"&&p.value.startsWith("attribute:")){i.push({source:p.value.substring(p.value.indexOf(":")+1),targetPath:o,targetAttribute:n,targetType:t.type})}else if(typeof p.value==="object"){e[n]=r({},p.value)}else{e[n]=p.value}}else{e[n]=v(t.type)}}function x(e){return Object.freeze(e.reduce(function(e,t){e[t.name]=t;return e},{}))}function C(e,t){if(e.isComplex()){return e.getReferencedProperties().filter(t)}else if(t(e)){return[e]}else{return[]}}function w(e,t,r){for(var o in e){var n=e[o];var i=t==null?o:t+"."+o;if(t==="extension"){w(n.type,i);continue}if(r&&n.allowedForComplexProperty!==false){n.allowedForComplexProperty=true}if(typeof n.type==="object"){w(n.type,i,n.allowedForComplexProperty)}}}function A(e,t){var r=0;t=t||{};for(var o=0;o<e.length;o++){if("extension"in e[o]){f("Property contains invalid attribute 'extension'.",e[o])}if(e[o].name in t){e[o].extension=t[e[o].name];r++}else{e[o].extension={}}}if(r!==Object.keys(t).length){throw new Error("At least one property extension does not point to an existing property.")}}function j(e,t,o,n,a,u){var s={};var f=p.concat(a||[]).reduce(function(e,t){if(t in i){e[t]=i[t]}return e},Object.assign({},e._mExperimentalAdditionalAttributes));if(u){s.mAttributeMetadata=Object.assign({extension:{type:u,mandatory:true,allowedForComplexProperty:true}},f);s.aMandatoryExtensionAttributes=Object.keys(u).filter(function(e){return u[e].mandatory})}else{s.mAttributeMetadata=f;s.aMandatoryExtensionAttributes=[]}w(s.mAttributeMetadata);s.aMandatoryAttributes=Object.keys(s.mAttributeMetadata).filter(function(e){return s.mAttributeMetadata[e].mandatory});var c=r([],o);var d=x(c);if(u){A(c,r({},n))}var b=l.get(e);var v=b&&b.aRawProperties;l.set(e,s);e.validateProperties(c,v);s.oParent=t||null;s.aRawProperties=o;s.aProperties=c;s.mProperties=d;s._={mExtensions:n,aAllowedAttributes:a,mExtensionAttributeMetadata:u};y(e,c);P(e,c)}var F=e.extend("sap.ui.mdc.util.PropertyHelper",{constructor:function(t,r,n,a,p){e.call(this);if(!Array.isArray(t)){f("Property infos must be an array.")}if(r){if(!p){throw new Error("Property extensions are not supported.")}else if(!o(r)){throw new Error("Property extensions must be a plain object.")}}if(n&&!e.isA(n,"sap.ui.base.ManagedObject")){throw new Error("The type of the parent is invalid.")}if(this._mExperimentalAdditionalAttributes){Object.keys(i).concat("extension").forEach(function(e){if(e in this._mExperimentalAdditionalAttributes){throw new Error("The attribute '"+e+"' is reserved and cannot be overridden by additional attributes.")}}.bind(this))}j(this,n,t,r,a,p)}});F.prototype.validateProperties=function(e,t){var r=new Set;for(var o=0;o<e.length;o++){this.validateProperty(e[o],e,t);r.add(e[o].name)}if(r.size!==e.length){f("Properties do not have unique names.")}};F.prototype.validateProperty=function(e,t,r){if(!o(e)){f("Property info must be a plain object.",e)}E(this,e,t);if(F.isPropertyComplex(e)){if(e.propertyInfos.length===0){f("Complex property does not reference existing properties.",e)}}l.get(this).aMandatoryAttributes.forEach(function(t){if(!(t in e)){s("Property does not contain mandatory attribute '"+t+"'.",e)}else if(e[t]==null){f("Property does not contain mandatory attribute '"+t+"'.",e)}});l.get(this).aMandatoryExtensionAttributes.forEach(function(t){if(!(t in e.extension)){s("Property does not contain mandatory attribute 'extension."+t+"'.",e)}else if(e.extension[t]==null){f("Property does not contain mandatory attribute 'extension."+t+"'.",e)}})};function E(e,t,r,o,n,i){var a=o==null;if(a){i=l.get(e).mAttributeMetadata;n=t}for(var p in n){var u=i[p];var y=a?p:o+"."+p;var c=n[p];if(!u){s("Property contains invalid attribute '"+y+"'.",t)}else if(F.isPropertyComplex(t)&&!u.allowedForComplexProperty){s("Complex property contains invalid attribute '"+y+"'.",t)}else if(typeof u.type==="object"&&c&&typeof c==="object"){E(e,t,r,y,c,u.type)}else if(c!=null&&!b(u.type).isValid(c)){f("The value of '"+y+"' is invalid.",t)}else if(c&&typeof u.type==="string"&&u.type.startsWith("PropertyReference")){O(e,t,r,y,c,u)}}}function O(e,t,r,o,n,i){var a=i.type.endsWith("[]")?n:[n];var p=new Set(a);if(a.indexOf(t.name)>-1){f("Property references itself in the '"+o+"' attribute",t)}if(p.size!==a.length){f("Property contains duplicate names in the '"+o+"' attribute.",t)}for(var l=0;l<r.length;l++){if(p.has(r[l].name)){if(F.isPropertyComplex(r[l])){f("Property references complex properties in the '"+o+"' attribute.",t)}p.delete(r[l].name)}}if(p.size>0){f("Property references non-existing properties in the '"+o+"' attribute.",t)}}F.prototype.prepareProperty=function(e){var t=this.getPropertyMap();var r=g(this,e,t);r.forEach(function(r){var o=d(e,r.targetPath);if(o){var n=d(e,r.source);if(n==null){n=v(r.targetType)}o[r.targetAttribute]=n;if(typeof r.targetType==="string"&&r.targetType.startsWith("PropertyReference")){m(o,r.targetAttribute,t)}}})};F.prototype.getParent=function(){var e=l.get(this);return e?e.oParent:null};F.prototype.setProperties=function(e){var t=l.get(this);j(this,t.oParent,e,t._.mExtensions,t._.aAllowedAttributes,t._.mExtensionAttributeMetadata);return this};F.prototype.getProperties=function(){var e=l.get(this);return e?e.aProperties:[]};F.prototype.getPropertyMap=function(){var e=l.get(this);return e?e.mProperties:{}};F.prototype.getProperty=function(e){return this.getPropertyMap()[e]||null};F.prototype.hasProperty=function(e){return e in this.getPropertyMap()};F.isPropertyComplex=function(e){return e!=null&&typeof e==="object"?"propertyInfos"in e:false};F.prototype.getSortableProperties=function(){return this.getProperties().filter(function(e){return e.sortable})};F.prototype.getFilterableProperties=function(){return this.getProperties().filter(function(e){return e.filterable})};F.prototype.getGroupableProperties=function(){return this.getProperties().filter(function(e){return e.groupable})};F.prototype.getKeyProperties=function(){return this.getProperties().filter(function(e){return e.key})};F.prototype.getVisibleProperties=function(){return this.getProperties().filter(function(e){return e.visible})};F.prototype.destroy=function(){e.prototype.destroy.apply(this,arguments);l.delete(this)};return F});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/TypeUtil",["sap/ui/mdc/enum/BaseType","sap/base/util/ObjectPath","sap/ui/model/SimpleType"],function(e,t,a){"use strict";var s={getDataTypeClassName:function(e){var t={Boolean:"sap.ui.model.type.Boolean",Currency:"sap.ui.model.type.Currency",Date:"sap.ui.model.type.Date",DateTime:"sap.ui.model.type.DateTime",Float:"sap.ui.model.type.Float",Integer:"sap.ui.model.type.Integer",String:"sap.ui.model.type.String",Time:"sap.ui.model.type.Time",Unit:"sap.ui.model.type.Unit"};if(t[e]){e=t[e]}return e},getBaseType:function(t,a,s){switch(t){case"sap.ui.model.type.Date":return e.Date;case"sap.ui.model.type.DateTime":return e.DateTime;case"sap.ui.model.type.Time":return e.Time;case"sap.ui.model.type.Boolean":return e.Boolean;case"sap.ui.model.type.Unit":case"sap.ui.model.type.Currency":if(!a||(!a.hasOwnProperty("showMeasure")||a.showMeasure)&&(!a.hasOwnProperty("showNumber")||a.showNumber)){return e.Unit}else if(!a.hasOwnProperty("showNumber")||a.showNumber){return e.Numeric}else{return e.String}case"sap.ui.model.type.Integer":case"sap.ui.model.type.Float":return e.Numeric;default:return e.String}},getBaseTypeForType:function(e){return this.getBaseType(e.getMetadata&&e.getMetadata().getName(),e.getFormatOptions(),e.getConstraints())},getDataTypeClass:function(e){var a=t.get(this.getDataTypeClassName(e)||"");if(!a){throw new Error("DataType '"+e+"' cannot be determined")}return a},getDataTypeInstance:function(e,t,a){var s=this.getDataTypeClass(e);return new s(t,a)},getTypeConfig:function(e,t,s){var r,n;if(e instanceof a){r=e}else{var i=this.getDataTypeClassName(e);n=i?e:undefined;r=this.getDataTypeInstance(i||e,t,s)}return{className:n,typeInstance:r,baseType:this.getBaseTypeForType(r)}}};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/util/loadModules",["sap/ui/base/SyncPromise","sap/base/assert"],function(r,e){"use strict";return function a(i){e(typeof i==="string"||Array.isArray(i),"vModulePaths"+" param either must be a single string or an array of strings. - sap.ui.mdc.util.loadModules");var n;if(typeof i==="string"){n=[i]}else{n=i}var s=new Map;n.forEach(function(r){var e=sap.ui.require(r);s.set(r,e)});var t=n.filter(function(r){return s.get(r)===undefined});if(t.length===0){var u=Array.from(s.values());return r.resolve(u)}return new r(function(r,e){function a(){var e=Array.from(arguments);t.forEach(function(r,a){s.set(r,e[a])});var a=Array.from(s.values());r(a)}sap.ui.require(t,a,e)})}});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/Dialog",["sap/ui/mdc/valuehelp/base/Container","sap/ui/mdc/valuehelp/base/DialogTab","sap/ui/mdc/util/loadModules","sap/ui/Device","sap/m/VBox","sap/m/FlexItemData","sap/ui/model/resource/ResourceModel","sap/ui/mdc/util/Common","sap/ui/mdc/enum/SelectType","sap/base/strings/formatMessage"],function(e,t,n,i,o,r,a,s,l,u){"use strict";var d,p,c,h,g,f;var v,y,C,_;var m=e.extend("sap.ui.mdc.valuehelp.Dialog",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.IDialogContainer"],properties:{_selectedContentKey:{type:"string",visibility:"hidden"},_quickSelectEnabled:{type:"boolean",visibility:"hidden",defaultValue:false},_selectableContents:{type:"object[]",visibility:"hidden",defaultValue:[]},groupConfig:{type:"object",defaultValue:{}}},defaultAggregation:"content"}});function b(){if(i.system.desktop){return"700px"}if(i.system.tablet){return i.orientation.landscape?"600px":"600px"}}function S(){if(i.system.desktop){return"1080px"}if(i.system.tablet){return i.orientation.landscape?"920px":"600px"}}function T(e){var t=this.getContent();return t.filter(function(t){return!!t.getVisible()&&t.getGroup&&t.getGroup()===e}).length>1}m.prototype._handleContentSelectionChange=function(e){this.fireRequestDelegateContent({container:this.getId(),contentId:e});this._getRetrieveDelegateContentPromise().then(function(){var t=this.getProperty("_selectedContentKey");var n=this.getContent();var i=t&&n&&n.find(function(e){return e.getId()===t});if(i){i.onHide()}this._renderSelectedContent(e)}.bind(this))};m.prototype._onTabBarSelect=function(e){var t=e&&e.getParameter("key");this._handleContentSelectionChange(t)};m.prototype.invalidate=function(t){if(t){var n=this.getContent();var i=n.indexOf(t);if(this._oIconTabBar&&i!==-1&&!this._bIsBeingDestroyed){var o=this._oIconTabBar.getItems();if(o[i]){o[i].invalidate(t)}}else{e.prototype.invalidate.apply(this,arguments)}}};m.prototype._getUIAreaForContent=function(){var t=this.getAggregation("_container");if(t){return t.getUIArea()}return e.prototype._getUIAreaForContent.apply(this,arguments)};m.prototype._handleConfirmed=function(e){this.fireConfirm({close:true})};m.prototype._handleClosed=function(t){var n=this.getSelectedContent();if(n){n.onHide()}this.setProperty("_selectedContentKey",this._sInitialContentKey);e.prototype._handleClosed.apply(this,arguments)};m.prototype._getContainer=function(){if(!this.getModel("$i18n")){this.setModel(new a({bundleName:"sap/ui/mdc/messagebundle",async:false}),"$i18n")}var e=this.getAggregation("_container");if(!e){return this._retrievePromise("dialog",function(){return n(["sap/m/Dialog","sap/m/Button","sap/ui/model/base/ManagedObjectModel","sap/m/library"]).then(function(e){d=e[0];c=e[1];h=e[2];p=e[3];var t=p.ButtonType;if(!this._oResourceBundle){this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")}this.oButtonOK=new c(this.getId()+"-ok",{text:this._oResourceBundle.getText("valuehelp.OK"),enabled:"{$valueHelp>/_valid}",type:t.Emphasized,press:this._handleConfirmed.bind(this),visible:{parts:["$valueHelp>/_config/maxConditions","$help>/_quickSelectEnabled"],formatter:function(e,t){return e!==1||!t}}});this.oButtonCancel=new c(this.getId()+"-cancel",{text:this._oResourceBundle.getText("valuehelp.CANCEL"),press:this._handleCanceled.bind(this)});this._oManagedObjectModel=new h(this);var n=new d(this.getId()+"-dialog",{contentHeight:b(),contentWidth:S(),horizontalScrolling:false,verticalScrolling:false,title:{parts:["$help>/title","$help>/_selectableContents"],formatter:function(e,t){if(t&&t.length==1){var n=t[0];var i=n.getFormattedShortTitle()?n.getFormattedShortTitle():n.getTitle();if(i){e=this._oResourceBundle.getText("valuehelp.DIALOGSHORTTITLECOLONTITLE",[i,e])}}return e}.bind(this)},stretch:i.system.phone,resizable:true,draggable:true,afterOpen:this._handleOpened.bind(this),afterClose:this._handleClosed.bind(this),buttons:[this.oButtonOK,this.oButtonCancel]});n.setModel(this._oManagedObjectModel,"$help");this.setAggregation("_container",n,true);n.isPopupAdaptationAllowed=function(){return false};n.addStyleClass("sapMdcValueHelp");n.addStyleClass("sapMdcValueHelpTitle");n.addStyleClass("sapMdcValueHelpTitleShadow");var r=new o(this.getId()+"-Content",{fitContainer:true});r.addStyleClass("sapMdcValueHelpPanel");n.addContent(r);var a=[];a.push(this._getIconTabBar(n));if(I(this.getMaxConditions(),this.getContent())){a.push(this._getTokenizerPanel())}return Promise.all(a).then(function(e){e.forEach(function(e){r.addItem(e)});return n})}.bind(this))}.bind(this))}return e};m.prototype._handleSelect=function(t){e.prototype._handleSelect.apply(this,arguments);if(this.getProperty("_quickSelectEnabled")&&this._isSingleSelect()){this.fireConfirm({close:true})}};m.prototype._observeChanges=function(t){if(t.name==="content"){var n=this.getContent();this.setProperty("_quickSelectEnabled",n&&n.every(function(e){return e.isQuickSelectSupported()}));this._updateInitialContentKey();if(t.mutation==="insert"&&!this.getProperty("_selectedContentKey")){this.setProperty("_selectedContentKey",this._sInitialContentKey)}this.setProperty("_selectableContents",this._getSelectableContents());if(I(this.getMaxConditions(),this.getContent())){var i=this.getAggregation("_container");if(i&&i.getContent()[0].getItems().length===1){Promise.all([this._getTokenizerPanel()]).then(function(e){e.forEach(function(e){i.getContent()[0].addItem(e)})})}}}e.prototype._observeChanges.apply(this,arguments)};m.prototype._updateInitialContentKey=function(){var e=this.getContent().find(function(e){return!!e.getVisible()});this._sInitialContentKey=e&&e.getId()};m.prototype.getSelectedContent=function(){var e=this.getProperty("_selectedContentKey");return this.getContent().find(function(t){return t.getId()===e})};m.prototype._getSelectableContents=function(){var e=this.getSelectedContent();var t=e&&e.getGroup&&e.getGroup();var n=e?t:"";var i=[n];return this.getContent().filter(function(t){if(!t.getVisible()){return false}var n=t.getGroup&&t.getGroup();var o=n&&T.call(this,n);if(o&&t!==e){if(i.indexOf(n)>=0){return false}else{i.push(n)}}return true}.bind(this))};m.prototype._updateGroupSelectModel=function(){if(this._oGroupSelectModel){var e=this.getSelectedContent();var t=e&&e.getGroup&&e.getGroup();var n=t?this.getContent().filter(function(e){return!!e.getVisible()&&e.getGroup&&e.getGroup()===t}):[];this._oGroupSelectModel.setData(n.reduce(function(e,t){e.entries.push({key:t.getId(),text:t.getFormattedTitle()});return e},{entries:[]}));if(this._oGroupSelect){var i=this._oGroupSelect.getSelectedItemKey();var o=n.map(function(e){return e.getId()});var r=this.getProperty("_selectedContentKey");if(o.indexOf(i)==-1||i!==r){this._oGroupSelect.setSelectedItemKey(n[0].getId())}}}};m.prototype._retrieveGroupSelect=function(){return this._retrievePromise("collectiveSearchSelect",function(){return n(["sap/ui/mdc/filterbar/vh/CollectiveSearchSelect","sap/ui/core/Item","sap/ui/model/json/JSONModel"]).then(function(e){var t=e[0];var n=e[1];var i=e[2];if(!this._oGroupSelectModel){this._oGroupSelectModel=new i}if(!this._oGroupSelect){var o=new n(this.getId()+"-collSearchItem",{key:"{$select>key}",text:"{$select>text}",enabled:true});this._oGroupSelect=new t(this.getId()+"--Select",{title:"{$i18n>COL_SEARCH_SEL_TITLE}",items:{path:"$select>/entries",template:o},select:function(e){this._handleContentSelectionChange(e.getParameter("key"))}.bind(this),selectedItemKey:this.getSelectedContent().getId()});this._oGroupSelect.setModel(this._oGroupSelectModel,"$select")}return this._oGroupSelect}.bind(this))}.bind(this))};m.prototype._getIconTabBar=function(e){if(!this._oIconTabBar){return n(["sap/m/IconTabBar","sap/m/IconTabFilter"]).then(function(n){g=n[0];f=n[1];var i=p.IconTabHeaderMode;this._oIconTabBar=new g(this.getId()+"-ITB",{expandable:false,upperCase:false,stretchContentHeight:true,headerMode:i.Inline,select:this._onTabBarSelect.bind(this),layoutData:new r({growFactor:1}),selectedKey:"{path: '$help>/_selectedContentKey', mode: 'OneWay'}",visible:{parts:["$help>/_selectableContents"],formatter:function(t){if(t&&t.length==1){this.addStyleClass("sapMdcNoHeader");e.removeStyleClass("sapMdcValueHelpTitleShadow")}else{this.removeStyleClass("sapMdcNoHeader");e.addStyleClass("sapMdcValueHelpTitleShadow")}return true}}});this._oIconTabBar.addStyleClass("sapUiNoContentPadding");var o=new f(this.getId()+"-ITF",{key:{path:"$help>id"},content:new t(this.getId()+"-DT",{content:{path:"$help>displayContent"}}),text:{parts:["$help>","$valueHelp>/conditions"],formatter:function(e,t){var n="none";if(e){var i=e.getGroup&&e.getGroup();var o=e.getCount(t,i);n=i?this._getFormattedContentGroupLabel(i,o):e.getFormattedTitle(o)}return n}.bind(this)}});this._oIconTabBar.bindAggregation("items",{path:"/_selectableContents",model:"$help",templateShareable:false,template:o});return this._oIconTabBar}.bind(this))}return this._oIconTabBar};m.prototype._getFormattedContentGroupLabel=function(e,t){var n=this.getGroupConfig();var i=n&&n[e];var o=i&&(t?i.label:i.nnLabel);o=o&&u(o,t?t:"");o=o||this._oResourceBundle.getText(t?"valuehelp.SELECTFROMLIST":"valuehelp.SELECTFROMLISTNONUMBER",t);return o};m.prototype._getTokenizerPanel=function(e){if(!this.oTokenizerPanel){return n(["sap/m/Panel","sap/m/HBox","sap/m/VBox","sap/m/Tokenizer","sap/m/Token","sap/ui/model/Filter","sap/ui/mdc/field/ConditionType"]).then(function(e){v=e[0];y=e[1];o=e[2];C=e[3];_=e[4];var t=e[5];var n=e[6];var i=p.BackgroundDesign;var a=p.ButtonType;this.oTokenizerPanel=new v(this.getId()+"-TokenPanel",{backgroundDesign:i.Transparent,expanded:true,visible:{parts:["$valueHelp>/_config/maxConditions","$help>/content"],formatter:I},headerText:{parts:["$i18n>valuehelp.TOKENIZERTITLE","$valueHelp>/conditions"],formatter:function(e,t){var n=0;for(var i=0;i<t.length;i++){var o=t[i];if(o.isEmpty!==true){n++}}if(n===0){e=this._oResourceBundle.getText("valuehelp.TOKENIZERTITLENONUMBER")}return u(e,n)}.bind(this)}});this.oTokenizerPanel.addStyleClass("sapMdcTokenizerPanel");var s=new y(this.getId()+"-TokenBox",{fitContainer:true,width:"100%"});var d=new t({path:"isEmpty",operator:"NE",value1:true});var h=this.getModel("$valueHelp");var g=h?h.getProperty("/_config"):{};var f=this.getParent();var m={maxConditions:-1,valueType:g.dataType,operators:g.operators,display:g.display,fieldHelpID:f&&f.getId()};var b=new _(this.getId()+"-Token",{text:{path:"$valueHelp>",type:new n(m)}});this.oTokenizer=new C(this.getId()+"-Tokenizer",{width:"100%",tokenDelete:function(e){if(e.getParameter("tokens")){var t=e.getParameter("tokens");var n=this.getModel("$valueHelp").getObject("/conditions");var i=[];t.forEach(function(e,t){var o=e.getBindingContext("$valueHelp").sPath;var r=parseInt(o.slice(o.lastIndexOf("/")+1));i.push(n[r])});this.fireSelect({type:l.Remove,conditions:i})}}.bind(this),tokens:{path:"/conditions",model:"$valueHelp",templateShareable:false,template:b,filters:d},layoutData:new r({growFactor:1,maxWidth:"calc(100% - 2rem)"})});this.oTokenizer.addAriaDescribedBy(this.oTokenizer.getTokensInfoId());this.oTokenizer.addStyleClass("sapMdcTokenizer");this.oRemoveAllBtn=new c(this.getId()+"-TokenRemoveAll",{press:function(e){this.fireSelect({type:l.Set,conditions:[]})}.bind(this),type:a.Transparent,icon:"sap-icon://decline",tooltip:"{$i18n>valuehelp.REMOVEALLTOKEN}",layoutData:new r({growFactor:0,baseSize:"2rem"})});this.oRemoveAllBtn.addStyleClass("sapUiTinyMarginBegin");s.addItem(this.oTokenizer);s.addItem(this.oRemoveAllBtn);this.oTokenizerPanel.addContent(s);return this.oTokenizerPanel}.bind(this))}return this.oTokenizerPanel};function I(e,t){var n=e!==1;if(n&&t&&t.every(function(e){return!e.getRequiresTokenizer()})){n=false}return n}m.prototype._open=function(e){if(e){this._updateInitialContentKey();if(I(this.getMaxConditions(),this.getContent())&&e.getContent()[0].getItems().length===1){Promise.all([this._getTokenizerPanel()]).then(function(t){t.forEach(function(t){e.getContent()[0].addItem(t)});this._renderSelectedContent(this._sInitialContentKey,function(){e.open()})})}else{this._renderSelectedContent(this._sInitialContentKey,function(){e.open()})}}};m.prototype._renderSelectedContent=function(e,t){var n=this.getContent().find(function(t){return t.getId()===e});if(!n){throw new Error("sap.ui.mdc.ValueHelp: No content found.")}var i=[n.getContent(),n.onBeforeShow()];var o=n.getGroup&&n.getGroup();var r;if(o&&T.call(this,o)){r=this._retrieveGroupSelect();i.push(r)}return Promise.all(i).then(function(i){this.setProperty("_selectedContentKey",e);this.setProperty("_selectableContents",this._getSelectableContents());this._oManagedObjectModel.checkUpdate(true,true);if(r){this._updateGroupSelectModel()}if(n.setCollectiveSearchSelect){n.setCollectiveSearchSelect(r?this._oGroupSelect:undefined)}if(t){t()}return this._retrievePromise("open").then(function(){n.onShow();return n})}.bind(this))};m.prototype._close=function(){var e=this.getAggregation("_container");if(e){e.close()}};m.prototype.getValueHelpIcon=function(){return"sap-icon://value-help"};m.prototype.getAriaAttributes=function(e){return{contentId:null,ariaHasPopup:"dialog",role:null,roleDescription:null}};m.prototype.isMultiSelect=function(){return this.getMaxConditions()!==1};m.prototype.exit=function(){s.cleanup(this,["_oManagedObjectModel","_oResourceBundle","oButtonOK","oButtonCancel","oTokenizerPanel","oTokenizer","_oIconTabBar","_oGroupSelect","_oGroupSelectModel","_sInitialContentKey"])};return m});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/Popover",["sap/ui/mdc/valuehelp/base/Container","sap/ui/mdc/util/loadModules","sap/ui/dom/units/Rem","sap/ui/thirdparty/jquery"],function(t,e,n,o){"use strict";var i,r,a,s;var p=t.extend("sap.ui.mdc.valuehelp.Popover",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.ITypeaheadContainer","sap.ui.mdc.valuehelp.IDialogContainer"],properties:{},defaultAggregation:"content"}});p.prototype.invalidate=function(e){if(e){var n=this.getAggregation("_container");var o=this._oCurrentContent;if(n&&o&&e===o&&!this._bIsBeingDestroyed){n.invalidate(e)}else{t.prototype.invalidate.apply(this,arguments)}}};p.prototype._getUIAreaForContent=function(){var e=this.getAggregation("_container");if(e){return e.getUIArea()}return t.prototype._getUIAreaForContent.apply(this,arguments)};p.prototype._getContent=function(){var t=this.getContent();return t&&t[0]};p.prototype._getContainer=function(){var t=this.getAggregation("_container");if(!t){return e(["sap/m/Popover","sap/m/library","sap/m/Toolbar","sap/m/ToolbarSpacer"]).then(function(e){i=e[0];r=e[1];a=e[2];s=e[3];t=new i(this.getId()+"-pop",{contentHeight:"auto",placement:r.PlacementType.VerticalPreferredBottom,showHeader:false,showArrow:false,title:this.getTitle(),titleAlignment:r.TitleAlignment.Center,afterOpen:this._handleOpened.bind(this),afterClose:this._handleClosed.bind(this)}).addStyleClass("sapMdcValueHelpPopover").addStyleClass("sapMComboBoxBasePicker").addStyleClass("sapMComboBoxBasePicker-CTX");t.addStyleClass(this._isSingleSelect()?"sapMdcValueHelpSingleSelect":"sapMdcValueHelpMultiSelect");t.addDelegate({onsapshow:this._handleRequestSwitchToDialog.bind(this)});t._getAllContent=function(){var t=this.getParent();var e=[];if(t){if(this._oCurrentContent){e.push(this._oCurrentContent)}}return e}.bind(this);var n=this._getContent();var o=this._getContainerConfig(n);if(o){t.setShowArrow(!!o.showArrow);t.setShowHeader(!!o.showHeader);t.setResizable(!!o.resizable);if(o.getContentWidth){t.setContentWidth(o.getContentWidth())}}this.setAggregation("_container",t,true);return t}.bind(this))}return t};var l=function(){var t=this.getAggregation("_container");var e=this._getContent();var o=e&&this._getContainerConfig(e);if(t&&o&&o.getContentHeight){var i=o.getContentHeight();var r=t.$().find(".sapMPopoverCont").height();var a=r<n.toPx("30rem");t.setContentHeight(!i||a||r>=i?"auto":"30rem");t.invalidate()}};p.prototype.providesScrolling=function(){return true};p.prototype._observeChanges=function(e){if(e.name==="content"){var n=e.child;if(e.mutation==="remove"){n.detachEvent("contentUpdated",l,this);n.detachNavigated(this._handleNavigated,this)}else{n.attachEvent("contentUpdated",l,this)}}t.prototype._observeChanges.apply(this,arguments)};p.prototype._placeContent=function(t){var e=this._getContent();var n=e&&e.getContent();var o=e&&e.onBeforeShow();var i=this._getContainerConfig(e);var r=i&&i.getFooter&&i.getFooter();return Promise.all([n,r,o]).then(function(e){this._oCurrentContent=e[0];var n=e[1];if(n&&t.getFooter()!=n&&n.isA&&n.isA("sap.m.Toolbar")){t.setFooter(n);return t}if(n){if(!t.getFooter()){var o=[new s(this.getId()+"-Spacer")].concat(n);var i=new a(this.getId()+"-TB",{content:o}).setModel(this._oManagedObjectModel,"$help");t.setFooter(i)}else{}}else if(t.getFooter()){t.setFooter()}return t}.bind(this))};p.prototype._open=function(t){if(t.isOpen()){return}var e=this._getControl();var n=e&&e.getFocusElementForValueHelp?e.getFocusElementForValueHelp(this.isTypeahead()):e;if(n&&n.getDomRef()){t.setContentMinWidth(o(n.getDomRef()).outerWidth()+"px");if(!this.isFocusInHelp()){t.setInitialFocus(n)}t.openBy(n)}};p.prototype._close=function(){var t=this.getAggregation("_container");if(t){t.close()}};p.prototype._handleOpened=function(){l.call(this);t.prototype._handleOpened.apply(this,arguments);var e=this._getContent();if(e){e.onShow()}};p.prototype._handleConfirmed=function(t){this.fireConfirm({close:t.getParameter("close")||this._isSingleSelect()})};p.prototype._handleClosed=function(e){var n=this._getContent();if(n){n.onHide()}var o=this.getAggregation("_container");if(o){o._oPreviousFocus=null}t.prototype._handleClosed.apply(this,arguments)};p.prototype.removeFocus=function(){var t=this._getContent();if(t){t.removeFocus()}};p.prototype._navigate=function(t){var e=this._getContent();if(e){return e.navigate(t)}};p.prototype.getItemForValue=function(t){var e=this._getContent();if(e){return e.getItemForValue(t)}};p.prototype.isValidationSupported=function(t){var e=this._getContent();if(e){return e.isValidationSupported()}};p.prototype.getUseAsValueHelp=function(){var t=this._getContent();return t&&t.getUseAsValueHelp&&t.getUseAsValueHelp()};p.prototype.getValueHelpIcon=function(){var t=this._getContent();return t&&t.getValueHelpIcon()};p.prototype.getAriaAttributes=function(e){var n=this._getContent();var o=n&&n.getAriaAttributes(e);if(o){return{contentId:o.contentId,ariaHasPopup:o.ariaHasPopup,role:this.getUseAsValueHelp()?"combobox":null,roleDescription:o.roleDescription}}return t.prototype.getAriaAttributes.apply(this,arguments)};p.prototype.shouldOpenOnClick=function(){var t=this._getContent();return!!t&&t.shouldOpenOnClick()};p.prototype.shouldOpenOnNavigate=function(){var t=this._getContent();return!!t&&t.shouldOpenOnNavigate()};p.prototype.isFocusInHelp=function(){var t=this._getContent();return!!t&&t.isFocusInHelp()};p.prototype.isMultiSelect=function(){var t=this._getContent();return!!t&&t.isMultiSelect()};p.prototype.isTypeaheadSupported=function(){var t=this._getContent();return t&&t.isSearchSupported()};p.prototype.exit=function(){if(this._oCurrentContent){if(!this._oCurrentContent.bIsDestroyed){this._oCurrentContent.destroy()}this._oCurrentContent=null}};return p});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/base/Container",["sap/ui/core/Element","sap/ui/mdc/mixin/PromiseMixin","sap/ui/model/BindingMode","sap/ui/base/ManagedObjectObserver"],function(e,t,n,i){"use strict";var o=e.extend("sap.ui.mdc.valuehelp.base.Container",{metadata:{library:"sap.ui.mdc",properties:{title:{type:"string",group:"Appearance",defaultValue:""}},aggregations:{_container:{type:"sap.ui.core.Element",multiple:false,visibility:"hidden"},content:{type:"sap.ui.mdc.valuehelp.base.Content",multiple:true}},events:{select:{parameters:{type:{type:"sap.ui.mdc.enum.SelectType"},conditions:{type:"object[]"}}},confirm:{parameters:{close:{type:"boolean"}}},opened:{},closed:{},cancel:{},requestDelegateContent:{parameters:{contentId:{type:"string"}}},requestSwitchToDialog:{},navigated:{parameters:{leaveFocus:{type:"boolean"},condition:{type:"object"},itemId:{type:"string"}}}}}});o.prototype.init=function(){this._oObserver=new i(this._observeChanges.bind(this));this._oObserver.observe(this,{aggregations:["content"]})};o.prototype._observeChanges=function(e){if(e.name==="content"){var t=e.child;if(e.mutation==="remove"){this._unbindContent(t)}else{this._bindContent(t)}}};o.prototype._bindContent=function(e){e.bindProperty("filterValue",{path:"/filterValue",model:"$valueHelp",mode:n.OneWay});var t={path:"/conditions",model:"$valueHelp",mode:n.OneWay};if(e._formatConditions){t.formatter=e._formatConditions.bind(e)}e.bindProperty("conditions",t);e.bindProperty("config",{path:"/_config",model:"$valueHelp",mode:n.OneWay});e.attachConfirm(this._handleConfirmed,this);e.attachCancel(this._handleCanceled,this);e.attachSelect(this._handleSelect,this);if(e.attachNavigated){e.attachNavigated(this._handleNavigated,this)}if(e.attachRequestSwitchToDialog){e.attachRequestSwitchToDialog(this._handleRequestSwitchToDialog,this)}};o.prototype._unbindContent=function(e){e.unbindProperty("filterValue");e.unbindProperty("conditions");e.unbindProperty("config");e.detachConfirm(this._handleConfirmed,this);e.detachCancel(this._handleCanceled,this);e.detachSelect(this._handleSelect,this);if(e.detachNavigated){e.detachNavigated(this._handleNavigated,this)}if(e.detachRequestSwitchToDialog){e.detachRequestSwitchToDialog(this._handleRequestSwitchToDialog,this)}};o.prototype._handleNavigated=function(e){this.fireNavigated(e.mParameters)};o.prototype._handleRequestSwitchToDialog=function(e){this.fireRequestSwitchToDialog({container:this})};o.prototype._getContainer=function(){};o.prototype._getControl=function(){var e=this.getParent();return e&&e.getControl()};o.prototype.getMaxConditions=function(){var e=this.getModel("$valueHelp");return e&&e.getObject("/_config/maxConditions")};o.prototype._isSingleSelect=function(){return this.getMaxConditions()===1};o.prototype.getDomRef=function(){var e=this.getAggregation("_container");return e&&e.getDomRef()};o.prototype.getUIArea=function(){return null};o.prototype._getUIAreaForContent=function(){return this.getUIArea()};o.prototype.open=function(e){if(!this.isOpening()){var t=this._addPromise("open");return Promise.all([this._getContainer(),e]).then(function(e){return this._placeContent(e[0])}.bind(this)).then(function(e){if(!t.isCanceled()){this._open(e)}return t}.bind(this))}return this._retrievePromise("open")};o.prototype.close=function(){var e=this._retrievePromise("open");if(e){if(e.isSettled()){this._close()}else{this._cancelPromise(e)}}};o.prototype._placeContent=function(e){return e};o.prototype._open=function(e){};o.prototype._close=function(){};o.prototype._handleOpened=function(){this._resolvePromise("open");this.fireOpened()};o.prototype._handleClosed=function(e){this._removePromise("open");this.fireClosed()};o.prototype._handleConfirmed=function(e){this.fireConfirm()};o.prototype._handleCanceled=function(e){this.fireCancel()};o.prototype._handleSelect=function(e){this.fireSelect({type:e.getParameter("type"),conditions:e.getParameter("conditions")})};o.prototype.isOpen=function(){var e=this._retrievePromise("open");return e&&e.isSettled()};o.prototype.isOpening=function(){var e=this._retrievePromise("open");return e&&!e.isCanceled()&&!e.isSettled()};o.prototype.getItemForValue=function(e){};o.prototype.isValidationSupported=function(){return false};o.prototype.navigate=function(e){return Promise.all([this._getContainer()]).then(function(e){return this._placeContent(e[0])}.bind(this)).then(function(t){this._navigate(e)}.bind(this))};o.prototype._navigate=function(e){};o.prototype.removeFocus=function(){};o.prototype.isTypeahead=function(){var e=this.getParent();return e&&e.getTypeahead()===this};o.prototype.isTypeaheadSupported=function(){return false};o.prototype.providesScrolling=function(){return false};o.prototype.getValueHelpDelegate=function(){var e=this.getParent();return e&&e.getControlDelegate()};o.prototype.getValueHelpDelegatePayload=function(){var e=this.getParent();return e&&e.getPayload()};o.prototype.awaitValueHelpDelegate=function(){var e=this.getParent();return e&&e.awaitControlDelegate()};o.prototype.isValueHelpDelegateInitialized=function(){var e=this.getParent();return e&&e.bDelegateInitialized};o.prototype.getUseAsValueHelp=function(){return false};o.prototype.getValueHelpIcon=function(){};o.prototype.getAriaAttributes=function(e){return{contentId:null,ariaHasPopup:"listbox",role:"combobox",roleDescription:null}};o.prototype.getScrollDelegate=function(e){var t=this.getAggregation("_container");return t&&t.getScrollDelegate&&t.getScrollDelegate()};o.prototype.shouldOpenOnClick=function(){return false};o.prototype.shouldOpenOnNavigate=function(){return false};o.prototype.isFocusInHelp=function(){return!this.isTypeahead()};o.prototype.isMultiSelect=function(){return false};o.prototype._getContainerConfig=function(e){var t=e&&e.getContainerConfig();var n=t&&t[this.getMetadata().getName()];if(!n&&t){var i=Object.keys(t);var o=i.find(function(e){return this.isA(e)}.bind(this));if(o){n=t[o]}}return n};o.prototype._getRetrieveDelegateContentPromise=function(){var e=this.getParent();return e&&e._retrievePromise("delegateContent")};o.prototype.getSelectedContent=function(){var e=this.getContent();return e&&e[0]};o.prototype.exit=function(){this._oObserver.disconnect();this._oObserver=undefined};t.call(o.prototype);return o});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/base/Content",["sap/ui/core/Element","sap/ui/mdc/mixin/PromiseMixin","sap/ui/base/ManagedObjectObserver","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/enum/ConditionValidated","sap/base/strings/formatMessage"],function(e,t,n,o,i,r,a,p){"use strict";var u=e.extend("sap.ui.mdc.valuehelp.base.Content",{metadata:{library:"sap.ui.mdc",properties:{title:{type:"string",group:"Appearance",defaultValue:""},shortTitle:{type:"string",group:"Appearance",defaultValue:""},conditions:{type:"object[]",defaultValue:[],byValue:true},filterValue:{type:"string",defaultValue:""},config:{type:"object",defaultValue:{}},visible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{displayContent:{type:"sap.ui.core.Control",multiple:false}},events:{select:{parameters:{type:{type:"sap.ui.mdc.enum.SelectType"},conditions:{type:"object[]"}}},confirm:{parameters:{close:{type:"boolean"}}},cancel:{},requestSwitchToDialog:{},navigated:{parameters:{leaveFocus:{type:"boolean"},condition:{type:"object"},itemId:{type:"string"}}}}}});u.prototype.init=function(){this._oObserver=new n(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["filterValue","conditions","config"]});this._oOperator=i.getEQOperator()};u.prototype.exit=function(){this._oObserver.disconnect();this._oObserver=undefined};u.prototype.setProperty=function(t,n,o){if(t==="conditions"||t==="filterValue"||t==="config"){o=true}return e.prototype.setProperty.apply(this,[t,n,o])};u.prototype.getContent=function(){};u.prototype.getContainerConfig=function(){};u.prototype.onBeforeShow=function(){};u.prototype.onShow=function(){this._bVisible=true;this._handleConditionsUpdate()};u.prototype.onHide=function(){this._bVisible=false};u.prototype.getItemForValue=function(e){};u.prototype.isValidationSupported=function(){return false};u.prototype.getScrollDelegate=function(){var e=this.getParent();return e&&e.getScrollDelegate()};u.prototype._observeChanges=function(e){if(e.name==="conditions"){this._handleConditionsUpdate(e)}if(e.name==="filterValue"){this._handleFilterValueUpdate(e)}if(e.name==="config"){l.call(this,e.current)}};u.prototype._handleFilterValueUpdate=function(e){};u.prototype._handleConditionsUpdate=function(e){};u.prototype._createCondition=function(e,t,n){var i=c.call(this);var p=[e];if(i.valueTypes.length>1&&i.valueTypes[1]!==r.ValueType.Static&&t!==null&&t!==undefined){p.push(t)}return o.createCondition(i.name,p,undefined,undefined,a.Validated,n)};u.prototype.removeFocus=function(){};u.prototype.navigate=function(e){};u.prototype.getUIArea=function(){var t=this.getParent();if(t&&t._getUIAreaForContent){return t._getUIAreaForContent()}return e.prototype.getUIArea.apply(this,arguments)};u.prototype.isTypeahead=function(){var e=this.getParent();return e&&e.isTypeahead()};u.prototype.isSearchSupported=function(){return false};u.prototype.provideScrolling=function(){var e=this.getParent();return!e||!e.providesScrolling()};u.prototype.isContainerOpen=function(){var e=this.getParent();return e&&e.isOpen()};u.prototype.isContainerOpening=function(){var e=this.getParent();return e&&e.isOpening()};u.prototype._getValueHelpDelegate=function(){var e=this.getParent();return e&&e.getValueHelpDelegate()};u.prototype._getValueHelpDelegatePayload=function(){var e=this.getParent();return e&&e.getValueHelpDelegatePayload()};u.prototype._awaitValueHelpDelegate=function(){var e=this.getParent();return e&&e.awaitValueHelpDelegate()};u.prototype._isValueHelpDelegateInitialized=function(){var e=this.getParent();return e&&e.isValueHelpDelegateInitialized()};u.prototype._getControl=function(){var e=this.getParent();return e&&e._getControl()};u.prototype.getCount=function(e){return 0};u.prototype.getValueHelpIcon=function(){};u.prototype.getAriaAttributes=function(e){return{contentId:null,ariaHasPopup:"listbox",roleDescription:null}};u.prototype._isSingleSelect=function(e){return this._getMaxConditions()===1};u.prototype.shouldOpenOnClick=function(){return false};u.prototype.shouldOpenOnNavigate=function(){return!this._isSingleSelect()};u.prototype.isFocusInHelp=function(){return!this.isTypeahead()};u.prototype.isMultiSelect=function(){return!this._isSingleSelect()};u.prototype.isQuickSelectSupported=function(){return false};u.prototype.getRequiresTokenizer=function(){return true};function l(e){s.call(this,e.operators)}function s(e){this._oOperator=i.getEQOperator(e)}function c(){return this._oOperator}u.prototype.getFormattedTitle=function(e){var t=this.getTitle();if(t){t=p(t,e?e:"")}return t};u.prototype.getFormattedShortTitle=function(){return this.getShortTitle()};u.prototype._getMaxConditions=function(){var e=this.getConfig();return e&&e.maxConditions};t.call(u.prototype);return u});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/base/DialogTab",["sap/ui/core/Control"],function(e){"use strict";var t=e.extend("sap.ui.mdc.valuehelp.base.DialogTab",{metadata:{library:"sap.ui.mdc",properties:{content:{type:"object"}},events:{select:{parameters:{type:{type:"sap.ui.mdc.enum.SelectType"},conditions:{type:"object[]"}}},confirm:{parameters:{close:{type:"boolean"}}},cancel:{}}},renderer:{apiVersion:2,render:function(e,t){var n=t.getContent();if(n){e.renderControl(n)}}}});t.prototype.init=function(){e.prototype.init.apply(this,arguments)};t.prototype.exit=function(){if(this._displayContent){this._displayContent=null}return e.prototype.exit.apply(this,arguments)};return t});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/base/FilterableListContent",["sap/ui/mdc/util/loadModules","sap/ui/mdc/valuehelp/base/ListContent","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/util/Common","sap/ui/mdc/enum/PersistenceMode","sap/ui/mdc/p13n/Engine","sap/base/util/merge"],function(e,t,i,r,a,l,o,n){"use strict";var s=t.extend("sap.ui.mdc.valuehelp.base.FilterableListContent",{metadata:{library:"sap.ui.mdc",properties:{filterFields:{type:"string",defaultValue:""},keyPath:{type:"string",defaultValue:""},descriptionPath:{type:"string",defaultValue:""},group:{type:"string",defaultValue:""}},aggregations:{collectiveSearchItems:{type:"sap.ui.core.Item",multiple:true,singularName:"collectiveSearchItem"},filterBar:{type:"sap.ui.mdc.filterbar.vh.FilterBar",multiple:false},_defaultFilterBar:{type:"sap.ui.mdc.filterbar.vh.FilterBar",multiple:false,visibility:"hidden"}},associations:{filters:{type:"sap.ui.mdc.IFilter",multiple:true}},events:{}}});s.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._oObserver.observe(this,{properties:["filterFields"],aggregations:["_defaultFilterBar","filterBar"]});o.getInstance().defaultProviderRegistry.attach(this,l.Transient)};s.prototype._handleFilterValueUpdate=function(e){p.call(this,this._getPriorityFilterBar(),e.current);if(this.isContainerOpen()){this.applyFilters(e.current)}};s.prototype._reduceIFilterConditions=function(e){var t=this._getValueHelpDelegate();var i=this._getValueHelpDelegatePayload();return t?t.reduceIFilterConditions(i,this,e):e};s.prototype.applyFilters=function(e){this.applyFilterConditions()};s.prototype._prettyPrintFilters=function(e){var t;if(!e){return""}if(Array.isArray(e)){t="";e.forEach(function(e,i,r){t+=this._prettyPrintFilters(e);if(r.length-1!=i){t+=" or "}},this);return"("+t+")"}else if(e._bMultiFilter){t="";var i=e.bAnd;e.aFilters.forEach(function(e,r,a){t+=this._prettyPrintFilters(e);if(a.length-1!=r){t+=i?" and ":" or "}},this);return"("+t+")"}else{t=e.sPath+" "+e.sOperator+" '"+e.oValue1+"'";if(e.sOperator==="BT"){t+="...'"+e.oValue2+"'"}return t}};s.prototype._getItemFromContext=function(e,t){var i=t&&t.keyPath||this.getKeyPath();var r=t&&t.descriptionPath||this.getDescriptionPath();var a;var l;if(!i){throw new Error("KeyPath missing")}if(e){a=i?e.getProperty(i):undefined;l=r?e.getProperty(r):undefined}if(a===null||a===undefined){return false}var o=this._createConditionPayload([a,l],e);return{key:a,description:l,payload:o}};s.prototype._createConditionPayload=function(e,t){var i;var r=this._getValueHelpDelegate();if(r){var a=this._getValueHelpDelegatePayload();i={};i=r.createConditionPayload(a,this,e,t)}return i};s.prototype._isItemSelected=function(e,t){var i=this._isValueHelpDelegateInitialized()&&this._getValueHelpDelegate();return i?i.isFilterableListItemSelected(this._getValueHelpDelegatePayload(),this,e,t):false};s.prototype._createDefaultFilterBar=function(){return e(["sap/ui/mdc/filterbar/vh/FilterBar"]).then(function(e){var t=e[0];var i=new t(this.getId()+"-FB",{liveMode:false,showGoButton:false});h.call(this,i);this.setAggregation("_defaultFilterBar",i,true);return i}.bind(this))};s.prototype._handleSearch=function(e){};function h(t){var i=t.getBasicSearchField();var r=this.getFilterFields();if(!i&&r){if(!this._oSearchField){return e(["sap/ui/mdc/FilterField"]).then(function(e){if(!t.bIsDestroyed){var i=e[0];this._oSearchField=new i(this.getId()+"-search",{conditions:"{$filters>/conditions/"+r+"}",placeholder:"{$i18n>filterbar.SEARCH}",label:"{$i18n>filterbar.SEARCH}",maxConditions:1,width:"50%"});this._oSearchField._bCreatedByValueHelp=true;h.call(this,t)}}.bind(this))}t.setBasicSearchField(this._oSearchField)}else if(i){if(r){i.setConditions([])}else if(i._bCreatedByValueHelp){t.setBasicSearchField()}}}s.prototype.onShow=function(){t.prototype.onShow.apply(this,arguments);var e=this.getListBinding();var i=this._getListBindingInfo();var r=e&&e.isSuspended();var a=!e&&i&&i.suspended;this._applyInitialConditions(this._getPriorityFilterBar());if((r||a)&&!this.isTypeahead()){return}this.applyFilters(this.getFilterValue())};s.prototype.onHide=function(){t.prototype.onHide.apply(this,arguments)};s.prototype._getPriorityFilterBar=function(){return this.getFilterBar()||this.getAggregation("_defaultFilterBar")};s.prototype._observeChanges=function(e){if(e.object==this){var i;if(["_defaultFilterBar","filterBar"].indexOf(e.name)!==-1){i=e.child;var r;if(e.mutation==="insert"){h.call(this,i);this._assignCollectiveSearchSelect();if(e.name!=="_defaultFilterBar"||!this.getFilterBar()){i.attachSearch(this._handleSearch,this)}if(e.name==="filterBar"){r=this.getAggregation("_defaultFilterBar");if(r){r.detachSearch(this._handleSearch,this)}}}else{var a=i.getBasicSearchField();if(a&&a._bCreatedByValueHelp){i.setBasicSearchField()}i.detachSearch(this._handleSearch,this);if(e.name==="filterBar"){r=this.getAggregation("_defaultFilterBar");if(r){r.attachSearch(this._handleSearch,this)}else{this._createDefaultFilterBar()}}}p.call(this,this._getPriorityFilterBar(),this.getFilterValue())}else if(e.name==="filterFields"){i=this._getPriorityFilterBar();if(i){h.call(this,i)}}}t.prototype._observeChanges.apply(this,arguments)};s.prototype.getCollectiveSearchKey=function(){return this._oCollectiveSearchSelect&&this._oCollectiveSearchSelect.getSelectedItemKey()};s.prototype.getListBinding=function(){throw new Error("FilterableListContent: Every filterable listcontent must implement this method.")};s.prototype._getListBindingInfo=function(){throw new Error("FilterableListContent: Every filterable listcontent must implement this method.")};s.prototype._getTypesForConditions=function(e){var t=this._getValueHelpDelegate();var i=this._getValueHelpDelegatePayload();return t?t.getTypesForConditions(i,this,e):{}};function p(e,t){var a=this.getFilterFields();if(e&&a){var l=e.getInternalConditions();if(!l[a]||l[a].length!==1||l[a][0].values[0]!==t){var o=i.createCondition("Contains",[t],undefined,undefined,r.NotValidated);l[a]=[o];e.setInternalConditions(l)}}}s.prototype.getFormattedTitle=function(e){var i=t.prototype.getFormattedTitle.apply(this,arguments);if(!i){i=this._oResourceBundle.getText(e?"valuehelp.SELECTFROMLIST":"valuehelp.SELECTFROMLISTNONUMBER",e)}return i};s.prototype.getFormattedShortTitle=function(){var e=this.getShortTitle();if(!e){e=this._oResourceBundle.getText("valuehelp.SELECTFROMLIST.Shorttitle")}return e};s.prototype.isSearchSupported=function(){var e=this.getFilterFields();var t=!!e;if(e==="$search"){var i=this.getListBinding();var r=this._getValueHelpDelegate();var a=this._getValueHelpDelegatePayload();t=r&&r.isSearchSupported(a,this,i)}return t};s.prototype.setCollectiveSearchSelect=function(e){this._oCollectiveSearchSelect=e;this._assignCollectiveSearchSelect()};s.prototype._assignCollectiveSearchSelect=function(){var e=this._getPriorityFilterBar();if(e.setCollectiveSearch&&this._oCollectiveSearchSelect){e.setCollectiveSearch(this._oCollectiveSearchSelect)}};s.prototype.onBeforeShow=function(){var e=this._getValueHelpDelegate();return Promise.resolve(e&&e.getInitialFilterConditions(this._getValueHelpDelegatePayload(),this,this._getControl())).then(function(e){this._oInitialFilterConditions=e}.bind(this))};s.prototype._applyInitialConditions=function(e){if(e){var t=this.getFilterFields();var i=n({},this._oInitialFilterConditions);if(!i[t]){var r=e.getInternalConditions();if(r[t]){i[t]=r[t]}}e.setInternalConditions(i)}};s.prototype._fireSelect=function(e){var t=this._getValueHelpDelegate();var i=this._getValueHelpDelegatePayload();var r=t&&t.modifySelectionBehaviour?t.modifySelectionBehaviour(i,this,e):e;if(r){this.fireSelect(r)}};s.prototype.exit=function(){o.getInstance().defaultProviderRegistry.detach(this);a.cleanup(this,["_oCollectiveSearchSelect","_oInitialFilterConditions"]);if(this._oSearchField&&!this._oSearchField.getParent()){this._oSearchField.destroy();delete this._oSearchField}t.prototype.exit.apply(this,arguments)};s.prototype.getCount=function(e,i){var r=this._isValueHelpDelegateInitialized()&&this._getValueHelpDelegate();var a=r&&this._getValueHelpDelegatePayload();return r&&r.getCount?r.getCount(a,this,e,i):t.prototype.getCount.apply(this,arguments)};return s});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/base/ListContent",["sap/ui/mdc/valuehelp/base/Content","sap/ui/mdc/enum/ConditionValidated"],function(e,t){"use strict";var a=e.extend("sap.ui.mdc.valuehelp.base.ListContent",{metadata:{library:"sap.ui.mdc",properties:{caseSensitive:{type:"boolean",defaultValue:false},useFirstMatch:{type:"boolean",group:"Behavior",defaultValue:true},useAsValueHelp:{type:"boolean",group:"Behavior",defaultValue:true}},aggregations:{inParameters:{type:"sap.ui.mdc.field.InParameter",group:"Data",multiple:true},outParameters:{type:"sap.ui.mdc.field.OutParameter",group:"Data",multiple:true}},events:{}}});a.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["caseSensitive"]})};a.prototype._observeChanges=function(t){if(t.name==="caseSensitive"){this._handleFilterValueUpdate(t)}e.prototype._observeChanges.apply(this,arguments)};a.prototype.getCount=function(e){var a=0;for(var i=0;i<e.length;i++){var r=e[i];if(r.isEmpty!==true&&r.validated===t.Validated){a++}}return a};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/content/Bool",["sap/ui/mdc/valuehelp/content/FixedList","sap/ui/mdc/util/loadModules","sap/ui/model/ParseException"],function(e,t,i){"use strict";var o=e.extend("sap.ui.mdc.valuehelp.content.Bool",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.ITypeaheadContent"]}});o.prototype.init=function(){e.prototype.init.apply(this,arguments);this.setUseFirstMatch(true);this.setUseAsValueHelp(true);this.setFilterList(false);this.setCaseSensitive(false);this._oObserver.observe(this,{properties:["config"]})};o.prototype.exit=function(){if(this._oModel){this._oModel.destroy();this._oModel=undefined}e.prototype.exit.apply(this,arguments)};o.prototype.getContent=function(){return this._retrievePromise("boolContent",function(){return t(["sap/ui/mdc/field/ListFieldHelpItem","sap/ui/model/json/JSONModel"]).then(function(t){var i=t[0];var o=t[1];this._oModel=new o({type:"",items:[{key:true,text:"true"},{key:false,text:"false"}]});s.call(this,this.getConfig());var r=new i(this.getId()+"-Item",{key:{path:"$Bool>key"},text:{path:"$Bool>text"}});this.bindAggregation("items",{path:"$Bool>/items",template:r});this.setModel(this._oModel,"$Bool");return e.prototype.getContent.apply(this,arguments)}.bind(this))}.bind(this))};o.prototype.getItemForValue=function(e){return Promise.resolve().then(function(){var t=this.getConfig();var o=t&&t.dataType;if(o){if(e.checkKey){if(e.parsedValue===true||e.parsedValue===false){return{key:e.parsedValue,description:o.formatValue(e.parsedValue,"string")}}else{e.checkDescription=true}}if(e.checkDescription&&e.value){var s=o.formatValue(true,"string");if(s.toLowerCase().startsWith(e.value.toLowerCase())){return{key:true,description:s}}var r=o.formatValue(false,"string");if(r.toLowerCase().startsWith(e.value.toLowerCase())){return{key:false,description:r}}}var a=this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[e.value]);var n=e.exception||i;throw new n(a)}else{throw new Error("Type missing")}}.bind(this))};o.prototype.shouldOpenOnClick=function(){return false};o.prototype._observeChanges=function(t){if(t.type==="property"&&t.name==="config"){s.call(this,t.current)}e.prototype._observeChanges.apply(this,arguments)};function s(e){if(this._oModel&&e){var t=e.dataType;var i=this._oModel.getData();if(t&&i["type"]!==t.getMetadata().getName()){i["type"]=t.getMetadata().getName();var o=i["items"];for(var s=0;s<o.length;s++){var r=o[s];r["text"]=t.formatValue(r["key"],"string")}this._oModel.checkUpdate(true)}}}return o});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/content/Conditions",["sap/ui/mdc/valuehelp/base/Content","sap/ui/mdc/util/loadModules","sap/ui/mdc/enum/SelectType","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/util/Common"],function(e,t,i,n,o){"use strict";var r=e.extend("sap.ui.mdc.valuehelp.content.Conditions",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.ITypeaheadContent","sap.ui.mdc.valuehelp.IDialogContent"],properties:{label:{type:"string"}},aggregations:{},events:{}}});r.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")};r.prototype.exit=function(){o.cleanup(this,["_oScrollContainer","_oDefineConditionPanel"]);e.prototype.exit.apply(this,arguments)};r.prototype.getContent=function(){return this._retrievePromise("content",function(){var e=["sap/ui/mdc/field/DefineConditionPanel","sap/ui/model/base/ManagedObjectModel"];if(this.provideScrolling()){e.push("sap/m/ScrollContainer")}return t(e).then(function(e){var t=e[0];var i=e[1];var n=e.length>2&&e[2];this._oManagedObjectModel=new i(this);this._oDefineConditionPanel=new t(this.getId()+"-DCP",{label:"{$help>/label}",conditions:"{$help>/conditions}",inputOK:"{$valueHelp>/_valid}",formatOptions:{path:"$help>/config",formatter:s},conditionProcessed:l.bind(this)}).setModel(this._oManagedObjectModel,"$help");if(n){this._oScrollContainer=new n(this.getId()+"-SC",{height:"100%",width:"100%",vertical:true,content:[this._oDefineConditionPanel]});this.setAggregation("displayContent",this._oScrollContainer);return this._oScrollContainer}else{this.setAggregation("displayContent",this._oDefineConditionPanel);return this._oDefineConditionPanel}}.bind(this))}.bind(this))};r.prototype.getCount=function(e){var t=0;for(var i=0;i<e.length;i++){var o=e[i];if(o.isEmpty!==true&&o.validated===n.NotValidated){t++}}return t};r.prototype.getUseAsValueHelp=function(){return false};r.prototype.getValueHelpIcon=function(){return"sap-icon://value-help"};r.prototype.isFocusInHelp=function(){return true};r.prototype.getRequiresTokenizer=function(){return false};r.prototype.getFormattedTitle=function(t){var i=e.prototype.getFormattedTitle.apply(this,arguments);if(!i){i=this._oResourceBundle.getText(t?"valuehelp.DEFINECONDITIONS":"valuehelp.DEFINECONDITIONSNONUMBER",t)}return i};r.prototype.getFormattedShortTitle=function(){var e=this.getShortTitle();if(!e){e=this._oResourceBundle.getText("valuehelp.DEFINECONDITIONS.Shorttitle")}return e};r.prototype.getAriaAttributes=function(e){return{contentId:this.getId()+"-DCP",ariaHasPopup:"dialog",roleDescription:null}};r.prototype.getContainerConfig=function(){return{"sap.ui.mdc.valuehelp.Popover":{showArrow:true,showHeader:true,getContentWidth:function(){return"500px"},getFooter:function(){return this._retrievePromise("footer",function(){return t(["sap/m/library","sap/m/Button"]).then(function(e){var t=e[0];var i=t.ButtonType;var n=e[1];var o=new n(this.getId()+"-ok",{text:this._oResourceBundle.getText("valuehelp.OK"),enabled:"{$valueHelp>/_valid}",type:i.Emphasized,press:a.bind(this)});var r=new n(this.getId()+"-cancel",{text:this._oResourceBundle.getText("valuehelp.CANCEL"),press:this.fireCancel.bind(this)});return[o,r]}.bind(this))}.bind(this))}.bind(this)}}};function a(e){this.fireConfirm({close:true})}function l(e){var t=this.getConditions();if(this._getMaxConditions()===1){t=t.filter(function(e){return e.validated==="NotValidated"})}this.fireSelect({type:i.Set,conditions:t})}function s(e){var t={};if(e){t.valueType=e.dataType;t.maxConditions=e.maxConditions;t.delegate=e.delegate;t.delegateName=e.delegateName;t.payload=e.payload;t.operators=e.operators;t.display=e.display;t.defaultOperatorName=e.defaultOperatorName}return t}return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/content/FixedList",["sap/ui/mdc/valuehelp/base/ListContent","sap/ui/mdc/util/loadModules","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/enum/SelectType","sap/ui/model/ParseException"],function(e,t,i,a,r){"use strict";var s=e.extend("sap.ui.mdc.valuehelp.content.FixedList",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.ITypeaheadContent","sap.ui.mdc.valuehelp.IDialogContent"],properties:{groupable:{type:"boolean",group:"Appearance",defaultValue:false},filterList:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{items:{type:"sap.ui.mdc.field.ListFieldHelpItem",multiple:true,singularName:"item"}},defaultAggregation:"items",events:{}}});s.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")};s.prototype.exit=function(){if(this._oManagedObjectModel){this._oManagedObjectModel.destroy();delete this._oManagedObjectModel}e.prototype.exit.apply(this,arguments)};s.prototype.getContent=function(){return this._retrievePromise("content",function(){return t(["sap/m/List","sap/m/DisplayListItem","sap/m/library","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/model/base/ManagedObjectModel","sap/base/strings/whitespaceReplacer"]).then(function(e){var t=e[0];var i=e[1];var a=e[2];var r=e[3];var s=e[4];var n=e[5];var o=e[6];this._oManagedObjectModel=new n(this);var p=new i(this.getId()+"-item",{type:a.ListType.Active,label:{path:"$help>text",formatter:o},value:{path:"$help>additionalText",formatter:o},valueTextDirection:"{$help>textDirection}"}).addStyleClass("sapMComboBoxNonInteractiveItem");var c=new r({path:"text",test:u.bind(this),caseSensitive:true});var h;if(this.getGroupable()){h=new s("groupKey",false,d.bind(this))}var f=new t(this.getId()+"-List",{width:"100%",showNoData:false,mode:a.ListMode.SingleSelectMaster,rememberSelections:false,items:{path:"$help>/items",template:p,filters:c,sorter:h,templateShareable:false},itemPress:l.bind(this)}).addStyleClass("sapMComboBoxBaseList").addStyleClass("sapMComboBoxList");f.setModel(this._oManagedObjectModel,"$help");this.setAggregation("displayContent",f,true);return f}.bind(this))}.bind(this))};function n(){return this.getAggregation("displayContent")}function l(e){var t=e.getParameter("listItem");var i=t.getSelected();if(i){var r=f.call(this,t);var s=g.call(this,r);o.call(this,s,t.getLabel());this.fireSelect({type:a.Set,conditions:this.getConditions()});this.fireConfirm()}}function o(e,t){var i=this._createCondition(e,t);this.setProperty("conditions",[i],true);return i}function u(e){var t=this.getFilterList();return!t||p.call(this,e,this.getFilterValue())}function p(e,t){return!t||typeof t==="string"&&(this.getCaseSensitive()?e.startsWith(t):e.toLowerCase().startsWith(t.toLowerCase()))}function c(){var e=n.call(this);if(e){var t=e.getBinding("items");t.update();e.updateItems();e.invalidate();h.call(this)}}function d(e){var t=e.getProperty("groupKey");var i=e.getProperty("groupText");return{key:t,text:i}}function h(){var e=n.call(this);if(e){var t=this.getConditions();var a;var r=this.getFilterValue();var s=this.getUseFirstMatch();var l=false;if(t.length>0&&(t[0].validated===i.Validated||t[0].operator==="EQ")){a=t[0].values[0]}var o=e.getItems();for(var u=0;u<o.length;u++){var c=o[u];if(c.isA("sap.m.DisplayListItem")){var d=f.call(this,c);if(t.length>0&&g.call(this,d)===a){c.setSelected(true)}else if(t.length===0&&s&&r&&!l&&p.call(this,c.getLabel(),r)){c.setSelected(true);l=true}else if(this.hasOwnProperty("_iNavigateIndex")&&u===this._iNavigateIndex){c.setSelected(true)}else{c.setSelected(false)}}}}}function f(e){var t=e.getBindingContextPath();return this._oManagedObjectModel.getProperty(t)}function g(e){var t=e.getBinding("key");if(t){return t.getInternalValue()}else{return e.getKey()}}s.prototype.getItemForValue=function(e){return Promise.resolve().then(function(){if(e.value===null||e.value===undefined){return null}else if(!e.value&&e.checkDescription){return null}var t=this.getItems();var i;var a=0;var s;var n;for(a=0;a<t.length;a++){i=t[a];s=g.call(this,i);n=i.getText();if(e.checkKey&&s===e.parsedValue||e.checkDescription&&(n===e.value||s==e.value)){return{key:s,description:i.getText()}}}if(e.checkKey&&e.value===""){return null}if(this.getUseFirstMatch()){for(a=0;a<t.length;a++){i=t[a];n=e.checkDescription?i.getText():i.getKey();if(p.call(this,n,e.value)){s=g.call(this,i);return{key:s,description:i.getText()}}}}var l=this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[e.value]);var o=e.exception||r;throw new o(l)}.bind(this))};s.prototype.isValidationSupported=function(e){return true};s.prototype.isSearchSupported=function(){return true};s.prototype._handleConditionsUpdate=function(e){h.call(this)};s.prototype._handleFilterValueUpdate=function(e){c.call(this)};s.prototype.removeFocus=function(){var e=n.call(this);if(e){e.removeStyleClass("sapMListFocus")}};s.prototype.navigate=function(e){var t=n.call(this);if(!t){return}t.addStyleClass("sapMListFocus");var i=t.getSelectedItem();var a=t.getItems();var r=a.length;var s=0;var l=this.getFilterList();var u=this.getFilterValue();var c=false;if(!l&&!i){var d=0;if(e>=0){for(d=0;d<a.length;d++){if(!a[d].isA("sap.m.GroupHeaderListItem")&&p.call(this,a[d].getLabel(),u)){s=d;break}}}else{for(d=a.length-1;d>=0;d--){if(!a[d].isA("sap.m.GroupHeaderListItem")&&p.call(this,a[d].getLabel(),u)){s=d;break}}}}else if(i){s=t.indexOfItem(i);s=s+e}else if(e>=0){s=e-1}else{s=r+e}var h;if(s<0){s=0;h=true;c=true}else if(s>=r-1){s=r-1;h=false}else{h=e>=0}while(a[s]&&a[s].isA("sap.m.GroupHeaderListItem")){if(h){s++}else{s--}}if(s<0||s>r-1){h=!h;c=s<0;s=s<0?0:r-1;while(a[s]&&a[s].isA("sap.m.GroupHeaderListItem")){if(h){s++}else{s--}}}var v=a[s];if(v){var m=this.getUseFirstMatch();if(v!==i||m&&!c){var y=f.call(this,v);var I=g.call(this,y);var b=y.getText();if(this.getParent().isOpen()){t.scrollToIndex(s)}else{this._iNavigateIndex=s}v.setSelected(true);var x=o.call(this,I,b);this.fireNavigated({condition:x,itemId:v.getId(),leaveFocus:false})}else if(c){this.fireNavigated({condition:undefined,itemId:undefined,leaveFocus:c})}}};s.prototype.onShow=function(){e.prototype.onShow.apply(this,arguments);var t=n.call(this);if(!t){return}var i=t.getSelectedItem();if(i){var a=t.indexOfItem(i);t.scrollToIndex(a)}if(this.hasOwnProperty("_iNavigateIndex")){delete this._iNavigateIndex}};s.prototype.onHide=function(){this.removeFocus()};s.prototype.getValueHelpIcon=function(){if(this.getUseAsValueHelp()){return"sap-icon://slim-arrow-down"}else{return null}};s.prototype.getAriaAttributes=function(e){return{contentId:this.getId()+"-List",ariaHasPopup:"listbox",roleDescription:null}};s.prototype.shouldOpenOnClick=function(){return!this.getFilterList()};s.prototype.isFocusInHelp=function(){return false};s.prototype._isSingleSelect=function(e){return true};s.prototype.shouldOpenOnNavigate=function(){return!e.prototype._isSingleSelect.apply(this)};return s});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/content/MDCTable",["sap/ui/mdc/valuehelp/base/FilterableListContent","sap/ui/mdc/util/loadModules","sap/base/util/deepEqual","sap/ui/mdc/enum/SelectType","sap/ui/mdc/library","sap/m/library","sap/ui/table/library","sap/ui/thirdparty/jquery","sap/ui/mdc/condition/FilterConverter","sap/base/util/restricted/_throttle"],function(e,t,i,n,a,s,l,o,r,h){"use strict";var c=s.ListMode;var d=s.Sticky;var u=a.SelectionMode;var g=l.VisibleRowCountMode;var p=l.SelectionMode;var f=l.SelectionBehavior;var _=function(e){var t,i=t=e&&e.getType();if(!i){t="Table"}else if(typeof i==="object"){if(i.isA("sap.ui.mdc.table.ResponsiveTableType")){t="ResponsiveTable"}else{t="Table"}}return t};var v=function(){var e=this._getTable();var t=e&&e._oTable;var i=e.getRowBinding();var a=function(){return this._oUITableSelectionPlugin||t}.bind(this);var s=function(e,t){var i=t?n.Add:n.Remove;if(!t&&this._isSingleSelect()){i=n.Add}this._fireSelect({type:i,conditions:e})};var l={ResponsiveTable:{getListBindingInfo:function(){return t&&t.getBindingInfo("items")},getItems:function(){return t.getItems()},getSelectedItems:function(){return t.getSelectedItems()},modifySelection:function(e,t){if(e.getSelected()!==t){e.setSelected(t)}},handleItemPress:function(e){var t=e.getParameter("listItem");if(!this.isTypeahead()||!this._isSingleSelect()){t.setSelected(!t.getSelected())}var i=this._getListBindingInfo().model;var n=t.getBindingContext(i);var a=this._getItemFromContext(n);var l=a&&this._createCondition(a.key,a.description,a.payload);s.call(this,[l],t.getSelected())},handleSelectionChange:function(e){if(!this.isTypeahead()||!this._isSingleSelect()){var t=e.getParameters();var i=t.listItems||t.listItem&&[t.listItem];var n=this._getListBindingInfo().model;var a=i.map(function(e){var t=e.getBindingContext(n);var i=this._getItemFromContext(t);return i&&this._createCondition(i.key,i.description,i.payload)}.bind(this));s.call(this,a,t.selected)}},adjustTable:function(){var e=t.getSticky();if(!e||e.length===0){t.setSticky([d.ColumnHeaders])}if(this._isSingleSelect()){t.setMode(c.SingleSelectLeft)}else{t.setMode(c.MultiSelect)}},handleScrolling:function(e){var i=this.getScrollDelegate();if(i){t.scrollToIndex(e).catch(function(e){});return true}},handleListBinding:function(){}},Table:{getListBindingInfo:function(){return t&&t.getBindingInfo("rows")},getItems:function(){return t.getRows().filter(function(e){var t=e.getBindingContext();return t&&t.getObject()})},getSelectedItems:function(){var e=a().getSelectedIndices();var i=e.reduce(function(e,i){var n=t.getContextByIndex(i);return n?e.concat(n):e},[]);return l["Table"].getItems().filter(function(e){return i.indexOf(e.getBindingContext())>=0})},modifySelection:function(e,t){var i=e.getBindingContext();var n=l["Table"].getContexts().indexOf(i);var s=a().getSelectedIndices().indexOf(n)>=0;if(t&&!s){return this._isSingleSelect()?a().setSelectedIndex(n):a().addSelectionInterval(n,n)}else if(!t&&s){return a().removeSelectionInterval(n,n)}},handleItemPress:function(e){},handleSelectionChange:function(e){if(this._bScrolling||this._bBusy){return}var t=e.getParameter("rowIndices");var i=l["Table"].getContexts().filter(function(e,i){return t.indexOf(i)>=0});var n=l["Table"].getItems().filter(function(e,t){return i.indexOf(e.getBindingContext())>=0});var a=[],o=[];var r=l["Table"].getSelectedItems();var h=this.getConditions();n.forEach(function(e,t){var i=this._isItemSelected(e,h);var n=r.indexOf(e)!==-1;if(i!==n){var s=r.indexOf(e)!==-1?a:o;var l=this._getItemFromContext(e.getBindingContext());var c=l&&this._createCondition(l.key,l.description,l.payload);s.push(c)}}.bind(this));var c=this._isSingleSelect();if(a.length){s.call(this,a,true);if(c){return}}if(o.length){s.call(this,o,false)}},adjustTable:function(){var e=t.getRowMode();if(!e){t.setVisibleRowCountMode(g.Auto);t.setMinAutoRowCount(3)}else if(e.isA("sap.ui.table.rowmodes.AutoRowMode")){e.setMinRowCount(3)}var i=this._isSingleSelect()?p.Single:p.MultiToggle;t.setSelectionBehavior(f.Row);a().setSelectionMode(i)},handleScrolling:function(e){var i=t.getFirstVisibleRow();if(typeof e==="undefined"||e<0){e=i-1}if(e>=0&&e!=i){t.setFirstVisibleRow(e);return Promise.resolve()}return false},getContexts:function(){return i&&i.getAllCurrentContexts()},handleListBinding:function(){i.attachEvent("change",this._handleUpdateFinished.bind(this))}}};return l[this._sTableType]};function b(){if(this._oTableHelper&&!this._bSelectionIsUpdating){this._bSelectionIsUpdating=true;var e=this._oTableHelper.getItems();var t=this.getConditions();var i=[];for(var n in e){var a=e[n];var s=this._isItemSelected(a,t);i.push(this._oTableHelper.modifySelection.call(this,a,s))}Promise.all(i).then(function(){this._bSelectionIsUpdating=false}.bind(this))}}var S=h(b,100,{leading:true});var T=e.extend("sap.ui.mdc.valuehelp.content.MDCTable",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.IDialogContent"],properties:{},aggregations:{table:{type:"sap.ui.mdc.Table",multiple:false}},events:{},defaultAggregation:"table"}});T.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver.observe(this,{aggregations:["table"]});this._addPromise("listBinding")};var y=function(){var e=this._getTable().getRowBinding();if(e){this._oTableHelper=v.call(this);this._oTableHelper.handleListBinding.call(this);I.call(this);this._resolvePromise("listBinding",e)}};var m=function(){if(this._oTable&&!this._oTable.getHeader()){this._oTable.setHeader(this._oResourceBundle.getText("valuehelp.TABLETITLENONUMBER"))}};T.prototype._handleConditionsUpdate=function(){S.call(this)};T.prototype._handleUpdateFinished=function(e){this._bScrolling=false;this._bSearchTriggered=false;S.call(this)};T.prototype._handleFirstVisibleRowChanged=function(e){this._bScrolling=true;S.call(this)};T.prototype._handleBusyStateChanged=function(e){this._bBusy=e.getParameter("busy")};var C=function(e,t){if(!e){return}if(t==="remove"){if(this._sTableType==="Table"){e.detachEvent("cellClick",this._handleItemPress,this);e.detachEvent("rowSelectionChange",this._handleSelectionChange,this);e.detachEvent("rowsUpdated",this._handleUpdateFinished,this);e.detachEvent("firstVisibleRowChanged",this._handleFirstVisibleRowChanged,this);e.detachEvent("busyStateChanged",this._handleBusyStateChanged,this);if(this._oUITableSelectionPlugin){this._oUITableSelectionPlugin.detachEvent("selectionChange",this._handleSelectionChange,this)}this._oUITableSelectionPlugin=undefined}else if(this._sTableType==="ResponsiveTable"){e.detachEvent("itemPress",this._handleItemPress,this);e.detachEvent("selectionChange",this._handleSelectionChange,this);e.detachEvent("updateFinished",this._handleUpdateFinished,this)}this._oObserver.unobserve(e)}else{if(this._sTableType==="Table"){this._oObserver.observe(e,{bindings:["rows"],aggregations:["plugins"]});e.attachEvent("cellClick",this._handleItemPress,this);e.attachEvent("rowSelectionChange",this._handleSelectionChange,this);e.attachEvent("rowsUpdated",this._handleUpdateFinished,this);e.attachEvent("firstVisibleRowChanged",this._handleFirstVisibleRowChanged,this);e.attachEvent("busyStateChanged",this._handleBusyStateChanged,this);this._oUITableSelectionPlugin=e.getPlugins().find(function(e){return e.isA("sap.ui.table.plugins.SelectionPlugin")});if(this._oUITableSelectionPlugin){this._oUITableSelectionPlugin.attachEvent("selectionChange",this._handleSelectionChange,this)}}else if(this._sTableType==="ResponsiveTable"){this._oObserver.observe(e,{bindings:["items"]});e.attachEvent("itemPress",this._handleItemPress,this);e.attachEvent("selectionChange",this._handleSelectionChange,this);e.attachEvent("updateFinished",this._handleUpdateFinished,this)}}};T.prototype._handleSearch=function(e){var t=this.getFilterFields();var i=e.getSource();var n=i.getInternalConditions();var a=t&&n[t]&&n[t][0];var s=a&&a.values[0];this.setFilterValue(s)};T.prototype._observeChanges=function(t){if(["_defaultFilterBar","filterBar"].indexOf(t.name)!==-1){B.call(this)}if(t.name==="table"){var i=t.child;if(t.mutation==="remove"){this._oObserver.unobserve(i);this._oTable=null;this._oTableHelper=null;this._addPromise("listBinding")}else{this._oTable=i;this._oObserver.observe(i,{aggregations:["_content"]});this._sTableType=_(i);i.addDelegate({onmouseover:function(e){var t=o(e.target).control(0);if(t&&t.isA("sap.m.ColumnListItem")){t.setType("Active")}}});C.call(this,this._oTable._oTable,"insert");y.call(this);m.call(this);B.call(this)}return}if(t.name==="_content"){C.call(this,t.child,t.mutation);return}if(["rows","items"].indexOf(t.name)!==-1&&t.mutation==="ready"){y.call(this);return}if(t.name==="config"){I.call(this)}if(t.name==="plugins"){this._oUITableSelectionPlugin=t.mutation==="remove"||!t.child.isA("sap.ui.table.plugins.SelectionPlugin")?undefined:t.child;if(this._oUITableSelectionPlugin){this._oUITableSelectionPlugin.attachEvent("selectionChange",this._handleSelectionChange,this)}}e.prototype._observeChanges.apply(this,arguments)};T.prototype._getTable=function(){return this._oTable};function B(){var e=this._getPriorityFilterBar();if(this._oTable&&e&&this._oTable.getFilter()!==e.getId()){this._oTable.setFilter(e)}}function I(){if(this._oTableHelper){this._oTableHelper.adjustTable.call(this)}}T.prototype.getContent=function(){return this._retrievePromise("wrappedContent",function(){return t(["sap/ui/layout/FixFlex","sap/m/VBox","sap/m/ScrollContainer"]).then(function(e){var t=e[0];var i=e[1];var n=e[2];if(!this._oContentLayout){this._oFilterBarVBox=new i(this.getId()+"-FilterBarBox",{visible:"{$this>/_filterBarVisible}"});this._oFilterBarVBox.addStyleClass("sapMdcValueHelpPanelFilterbar");this._oFilterBarVBox._oWrapper=this;this._oFilterBarVBox.getItems=function(){var e=this._oWrapper._getPriorityFilterBar.call(this._oWrapper);var t=e?[e]:[];return t};this._oTableBox=new i(this.getId()+"-TB",{height:"100%"});this._oTableBox.addStyleClass("sapMdcValueHelpPanelTableBox");this._oTableBox._oWrapper=this;this._oTableBox.getItems=function(){var e=this._oWrapper._sTableType==="ResponsiveTable"?this._oWrapper._oScrollContainer:this._oWrapper._oTable;var t=e?[e]:[];return t};this._oContentLayout=new t(this.getId()+"-FF",{minFlexSize:200,fixContent:this._oFilterBarVBox,flexContent:this._oTableBox});this._oScrollContainer=new n(this.getId()+"-SC",{height:"calc(100% - 0.5rem)",width:"100%",vertical:true});this._oScrollContainer._oWrapper=this;this._oScrollContainer.getContent=function(){var e=[];var t=this._oWrapper&&this._oWrapper._oTable;if(t){e.push(t)}return e}}this.setAggregation("displayContent",this._oContentLayout);if(!this._getPriorityFilterBar()){return this._createDefaultFilterBar().then(function(){this._oFilterBarVBox.invalidate();return this._oContentLayout}.bind(this))}return this._oContentLayout}.bind(this))}.bind(this))};T.prototype.getListBinding=function(){var e=this.getTable();return e&&e.getRowBinding()};T.prototype._getListBindingInfo=function(){return this._oTableHelper&&this._oTableHelper.getListBindingInfo()};T.prototype.onShow=function(){if(this._oTable){var t=e.prototype._isSingleSelect.apply(this)?u.Single:u.Multi;if(this._oTable.getSelectionMode()===u.None){this._oTable.setSelectionMode(t)}if(this._oTable.getSelectionMode()!==t){throw new Error("Table selectionMode needs to be "+t)}}e.prototype.onShow.apply(this,arguments)};T.prototype.onHide=function(){this._bSearchTriggered=false;e.prototype.onHide.apply(this,arguments)};T.prototype._createFiltersFromBarConditions=function(e){var t=this._getTypesForConditions(e);var i=e&&t&&r.createFilters(e,t,undefined,this.getCaseSensitive());return i&&[].concat(i)};T.prototype.applyFilters=function(e){var t=this.getTable();var n=this._getPriorityFilterBar();if(t&&n){var a=this.getListBinding();var s=a&&a.isSuspended();if(a&&!s&&!this._bSearchTriggered){var l=n.getSearch()||"";var o=a.mParameters.$search||"";var r=this._createFiltersFromBarConditions(n.getConditions());var h=a.aApplicationFilters.reduce(function(e,t){return e.concat(t._bMultiFilter?t.aFilters:t)},[]);var c=!i(r,h);var d=l!==o;var u=t._oTable&&t._oTable.getShowOverlay&&t._oTable.getShowOverlay();if(c||d||u){this._handleScrolling();n.triggerSearch();this._bSearchTriggered=true}}if(s){a.resume()}if(!a&&t.getAutoBindOnInit()){this._retrievePromise("listBinding").then(function(){this.applyFilters(e)}.bind(this))}}};T.prototype._handleScrolling=function(e){return this._oTableHelper&&this._oTableHelper.handleScrolling.call(this,e)};T.prototype.getScrollDelegate=function(){if(!this.isTypeahead()&&this._oScrollContainer){return this._oScrollContainer.getScrollDelegate()}return e.prototype.getScrollDelegate.apply(this,arguments)};T.prototype._handleItemPress=function(e){this._oTableHelper.handleItemPress.call(this,e)};T.prototype._handleSelectionChange=function(e){if(!this._bSelectionIsUpdating){this._oTableHelper.handleSelectionChange.call(this,e)}};T.prototype.isQuickSelectSupported=function(){return true};T.prototype.setParent=function(t){e.prototype.setParent.apply(this,arguments);I.call(this)};T.prototype._isSingleSelect=function(){if(this._oTable){if(this._oTable.getSelectionMode()===u.Multi){return false}else{return true}}else{return e.prototype._isSingleSelect.apply(this,arguments)}};return T});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/mdc/valuehelp/content/MTable",["sap/ui/mdc/valuehelp/base/FilterableListContent","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterConverter","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/util/loadModules","sap/m/library","sap/ui/model/FilterType","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterProcessor","sap/ui/mdc/util/Common","sap/base/strings/formatMessage","sap/base/util/merge","sap/ui/mdc/enum/SelectType","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,i,a,r,n,s,o,l,h,u,p,d,c,g,f){"use strict";var v=n.ListMode;var _=n.Sticky;var m=e.extend("sap.ui.mdc.valuehelp.content.MTable",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.ITypeaheadContent","sap.ui.mdc.valuehelp.IDialogContent"],properties:{},aggregations:{table:{type:"sap.m.Table",multiple:false}},events:{contentUpdated:{}},defaultAggregation:"table"}});m.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oObserver.observe(this,{aggregations:["table"]});this._addPromise("listBinding");this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._oMResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.m")};m.prototype.getValueHelpIcon=function(){if(this.getUseAsValueHelp()){return"sap-icon://slim-arrow-down"}else{return null}};function y(){if(this._oTable){var t=this._oTable.getItems();var i=this.getConditions();var a=this._isSingleSelect()&&!e.prototype._isSingleSelect.apply(this);for(var r in t){var n=t[r];var s=a?false:this._isItemSelected(n,i);n.setSelected(s)}}}m.prototype.applyFilters=function(e){var r=this.getListBinding();var n=this._isValueHelpDelegateInitialized();if(!r||!n){Promise.all([this._retrievePromise("listBinding"),this._awaitValueHelpDelegate()]).then(function(){if(!this.bIsDestroyed){this.applyFilters(e)}}.bind(this));return}if(!n||!this.isTypeahead()&&!this.isContainerOpen()&&r.isSuspended()){return}var o=this._getValueHelpDelegate();var l=this._getValueHelpDelegatePayload();var h=this.getFilterFields();var u=this._getPriorityFilterBar();var p=u?u.getInternalConditions():this._oInitialFilterConditions||{};if(!u&&e&&h&&h!=="$search"){var d=t.createCondition("Contains",[e],undefined,undefined,a.NotValidated);p[h]=[d]}var c=p&&this._getTypesForConditions(p);var f=p&&i.createFilters(p,c,undefined,this.getCaseSensitive());var v=f&&[f];var _=this.isTypeahead()?e:u&&u.getSearch();var m=true;var y;try{y=r.getFilterInfo()}catch(e){g.info("ValueHelp-Filter: getFilterInfo threw error")}if(!v){v=[]}if(v.length===0&&!y){m=false}if(h==="$search"&&o&&o.isSearchSupported(l,this,r)){if(!r.isSuspended()&&m){r.suspend()}_=o.adjustSearch(l,this.isTypeahead(),_);o.executeSearch(l,r,_);g.info("ValueHelp-Search: "+_)}if(m){r.filter(v,s.Application);g.info("ValueHelp-Filter: "+this._prettyPrintFilters.call(this,v))}if(r.isSuspended()){r.resume()}};m.prototype._handleSelectionChange=function(e){var t=e.getSource().getBindingInfo("items").model;var i=this.isTypeahead();if(!i||!this._isSingleSelect()){var a=e.getParameters();var r=a.listItems||a.listItem&&[a.listItem];var n=r.map(function(e){var i=e.getBindingContext(t);var a=this._getItemFromContext(i);return a&&this._createCondition(a.key,a.description,a.payload)}.bind(this));this._fireSelect({type:a.selected?c.Add:c.Remove,conditions:n});if(i){this.fireConfirm()}}};m.prototype._handleItemPress=function(e){var t=e.getSource().getBindingInfo("items").model;var i=e.getParameter("listItem");var a=i.getBindingContext(t);var r=this._getItemFromContext(a);var n=this._isSingleSelect();var s=n?true:!i.getSelected();var o=c.Set;if(!n){i.setSelected(s);o=s?c.Add:c.Remove}var l=this._createCondition(r.key,r.description,r.payload);this._fireSelect({type:o,conditions:[l]});if(this.isTypeahead()){this.fireConfirm({close:true})}};m.prototype._handleUpdateFinished=function(){y.apply(this);this.fireContentUpdated()};m.prototype._getTable=function(){return this._oTable};m.prototype.onShow=function(){var t=this._getTable();if(t){if(!t.hasStyleClass("sapMComboBoxList")){t.addStyleClass("sapMComboBoxList")}var i=this.isTypeahead()?v.SingleSelectMaster:v.SingleSelectLeft;if(!e.prototype._isSingleSelect.apply(this)&&t.getMode()!==i){i=v.MultiSelect}if(t.getMode()===v.None){t.setMode(i)}if(t.getMode()!==i){throw new Error("Table selection mode needs to be "+i)}}e.prototype.onShow.apply(this,arguments)};m.prototype.onHide=function(){e.prototype.onHide.apply(this,arguments);var t=this.getTable();if(t){this.removeFocus();if(t.hasStyleClass("sapMComboBoxList")){t.removeStyleClass("sapMComboBoxList")}}};m.prototype._handleConditionsUpdate=function(e){y.call(this)};m.prototype.getContent=function(){if(!this.isTypeahead()){return this._retrievePromise("wrappedContent",function(){return r(["sap/ui/layout/FixFlex","sap/m/VBox","sap/m/Panel","sap/m/ScrollContainer","sap/ui/model/resource/ResourceModel"]).then(function(e){var t=e[0];var i=e[1];var a=e[2];var r=e[3];var n=e[4];if(!this._oContentLayout){this._oFilterBarVBox=new i(this.getId()+"-FilterBarBox");this._oFilterBarVBox.addStyleClass("sapMdcValueHelpPanelFilterbar");this._oFilterBarVBox._oWrapper=this;this._oFilterBarVBox.getItems=function(){return[this._oWrapper._getPriorityFilterBar.call(this._oWrapper)]};this.setModel(new n({bundleName:"sap/ui/mdc/messagebundle",async:false}),"$i18n");var s=function(e){var t=0;if(t===0){e=this.getModel("$i18n").getResourceBundle().getText("valuehelp.TABLETITLENONUMBER")}return p(e,t)};this._oTablePanel=new a(this.getId()+"-TablePanel",{expanded:true,height:"100%",headerText:{parts:["$i18n>valuehelp.TABLETITLE"],formatter:s}});this._oTablePanel.addStyleClass("sapMdcTablePanel");this._oContentLayout=new t(this.getId()+"-FF",{minFlexSize:200,fixContent:this._oFilterBarVBox,flexContent:this._oTablePanel});this._oScrollContainer=new r(this.getId()+"-SC",{height:"100%",width:"100%",vertical:true});this._oScrollContainer._oWrapper=this;this._oScrollContainer.getContent=function(){var e=[];var t=this._oWrapper&&this._oWrapper._oTable;if(t){e.push(t)}return e};this._oTablePanel.addContent(this._oScrollContainer)}this.setAggregation("displayContent",this._oContentLayout);var o=this._getPriorityFilterBar();if(!o){return this._createDefaultFilterBar().then(function(){return this._oContentLayout}.bind(this))}return this._oContentLayout}.bind(this))}.bind(this))}return this._oTable};m.prototype.getItemForValue=function(e){if(!e.checkKey&&e.parsedValue&&!e.checkDescription){return null}if(e.checkKey&&!this.getKeyPath()){throw new Error("MTable: KeyPath missing! "+this.getId())}if(e.checkDescription&&!this.getDescriptionPath()){throw new Error("MTable: DescriptionPath missing! "+this.getId())}e.caseSensitive=e.caseSensitive||this.getCaseSensitive();var t=C.call(this);var i=this._getValueHelpDelegate();var a=this._getValueHelpDelegatePayload();var r=i&&i.getInitialFilterConditions(a,this,e.control);return Promise.all([t,r]).then(function(t){var i=t[0];var a=t[1];var r;if(!i){var n=this.getTable();r=b.call(this,e,n.getItems(),a)}if(!r){r=this._loadItemForValue(e,a)}return r}.bind(this))};function b(e,t,i){if(t.length===0){return}var a=this._getListBindingInfo();var r=a.model;var n=function(e,t){var i=e.isA("sap.ui.model.Context")?e:e.getBindingContext(r);return i.getProperty(t)};var s;var o;var l=S.call(this,e,i);var u=h.apply(t,l,n);if(u.length===1){var p=u[0].getBindingContext(r);var c=this._getItemFromContext(p,{inParameters:s,outParameters:o});return{key:c.key,description:c.description,payload:c.payload}}else if(u.length>1){if(!e.caseSensitive){var g=d({},e);g.caseSensitive=true;return b.call(this,g,t,i)}throw T.call(this,e.exception,true,e.parsedValue||e.value)}}function S(e,t){var a=e.caseSensitive;var r=this.getKeyPath();var n=this.getDescriptionPath();var s=[];if(e.checkKey&&e.hasOwnProperty("parsedValue")){s.push(new o({path:r,operator:l.EQ,value1:e.parsedValue,caseSensitive:a}))}if(e.checkDescription&&e.value){s.push(new o({path:n,operator:l.EQ,value1:e.value,caseSensitive:a}))}var h=s.length>1?new o({filters:s,and:false}):s[0];if(t){var u=this._getTypesForConditions(t);var p=i.createFilters(t,u,undefined,this.getCaseSensitive());if(p){h=new o({filters:[h,p],and:true})}}return h}function C(){return this._retrievePromise("listBinding").then(function(e){var t=this._getValueHelpDelegate();var i=this._getValueHelpDelegatePayload();var a=this._getListBindingInfo();if(e&&t){return t.checkListBindingPending(i,e,a)}else{return true}}.bind(this))}m.prototype.getListBinding=function(){var e=this._getTable();return e&&e.getBinding("items")};m.prototype._getListBindingInfo=function(){var e=this._getTable();return e&&e.getBindingInfo("items")};m.prototype._loadItemForValue=function(e,t){if(!e.checkKey&&e.parsedValue&&!e.checkDescription){return null}var i=this.getKeyPath();var a=this.getDescriptionPath();var r=this.getUseFirstMatch();var n=this._getTable();var s=n&&n.getBinding("items");var o=s&&s.getContext();var l=s&&s.getModel();var h=s&&s.getPath();var u=this._getValueHelpDelegate();var p=this._getValueHelpDelegatePayload();var d=["loadItemForValue",h,i,e.parsedValue||e.value].join("_");return this._retrievePromise(d,function(){var n=S.call(this,e,t);var s=l.bindList(h,o);return u.executeFilter(p,s,n,2).then(function(t){var n=t.getContexts();setTimeout(function(){s.destroy()},0);if(n.length&&(n.length<2||r)){return this._getItemFromContext(n[0],{keyPath:i,descriptionPath:a,inParameters:undefined})}else if(e.checkKey&&e.parsedValue===""&&n.length===0){return null}else{var o=T.call(this,e.exception,n.length>1,e.value);throw o}}.bind(this))}.bind(this))};function T(e,t,i){var a;if(t){a=this._oResourceBundle.getText("valuehelp.VALUE_NOT_UNIQUE",[i])}else{a=this._oResourceBundle.getText("valuehelp.VALUE_NOT_EXIST",[i])}var r=new e(a);r._bNotUnique=t;return r}m.prototype.isValidationSupported=function(e){return true};m.prototype.navigate=function(e){var t=this.getListBinding();if(!t||!t.getLength()){return C.call(this).then(function(i){if(!i&&t.getLength()!==0){return this.navigate(e)}return false}.bind(this))}var i=this._getTable();i.addStyleClass("sapMListFocus");var a=this._oTable.getItems();var r=i.getSelectedItem();var n=a.length;var s=0;var o=false;if(r){s=a.indexOf(r);s=s+e}else if(e>=0){s=e-1}else{s=n+e}if(this._getMaxConditions()!==1){if(this.getParent().isOpen()){i.focus();return}}var l;if(s<0){s=0;l=true;o=true}else if(s>=n-1){s=n-1;l=false}else{l=e>=0}while(a[s]&&a[s].isA("sap.m.GroupHeaderListItem")){if(l){s++}else{s--}}if(s<0||s>n-1){l=!l;o=s<0;s=s<0?0:n-1;while(a[s]&&a[s].isA("sap.m.GroupHeaderListItem")){if(l){s++}else{s--}}}var h=a[s];if(h){var u;if(h!==r){h.setSelected(true);var p=this._getListBindingInfo();var d=p.model;var c=h.getBindingContext(d);var g=this._getItemFromContext(c);u=g&&this._createCondition(g.key,g.description,g.payload);this.setProperty("conditions",[u],true);if(this._bVisible){this._handleScrolling(h)}this.fireNavigated({condition:u,itemId:h.getId(),leaveFocus:false})}else if(o){this.fireNavigated({condition:undefined,itemId:undefined,leaveFocus:o})}}};m.prototype._handleScrolling=function(e){var t=this.getScrollDelegate();if(t){var i=this._getTable();var a=!isNaN(e)?e:i.indexOfItem(e);i.scrollToIndex(a).catch(function(e){});return true}return false};m.prototype.getScrollDelegate=function(){if(this._oScrollContainer){return this._oScrollContainer.getScrollDelegate()}return e.prototype.getScrollDelegate.apply(this,arguments)};m.prototype.removeFocus=function(){var e=this.getTable();if(e){e.removeStyleClass("sapMListFocus")}};m.prototype.getAriaAttributes=function(e){var t=this.getTable();return{contentId:t&&t.getId(),ariaHasPopup:"listbox",roleDescription:null}};m.prototype.getContainerConfig=function(){return{"sap.ui.mdc.valuehelp.Popover":{getContentHeight:function(){var e=this._getTable();var t=e&&e.getDomRef();return t&&Math.round(t.getBoundingClientRect().height)}.bind(this),getFooter:function(){return this._retrievePromise("footer",function(){return this._retrievePromise("listBinding").then(function(e){var t=this._getListBindingInfo();if(t&&t.length){return r(["sap/m/Button","sap/m/Toolbar","sap/m/ToolbarSpacer"]).then(function(e){var t=e[0];var i=e[1];var a=e[2];var r=new t(this.getId()+"-showAllItems",{text:this._oMResourceBundle.getText("INPUT_SUGGESTIONS_SHOW_ALL"),press:function(){this.fireRequestSwitchToDialog()}.bind(this)});var n=[new a(this.getId()+"-Spacer")].concat(r);var s=new i(this.getId()+"-TB",{content:n});return s}.bind(this))}}.bind(this))}.bind(this))}.bind(this)}}};function I(){if(this._oTable&&this.getParent()){var e=this._oTable.getSticky();if(!e||e.length===0){this._oTable.setSticky([_.ColumnHeaders])}}}m.prototype.setParent=function(t){e.prototype.setParent.apply(this,arguments);I.call(this)};m.prototype._handleSearch=function(e){return this.applyFilters(this.getFilterValue())};m.prototype._observeChanges=function(t){if(t.name==="config"){I.call(this)}if(t.name==="items"&&t.mutation==="ready"){this._resolvePromise("listBinding",t.bindingInfo.binding)}if(t.name==="table"){var i=t.child;if(t.mutation==="remove"){this._oObserver.unobserve(i);i.removeDelegate(this._oTableDelegate);this._oTable.detachItemPress(this._handleItemPress,this);this._oTable.detachSelectionChange(this._handleSelectionChange,this);this._oTable.detachUpdateFinished(this._handleUpdateFinished,this);this._oTable=null;this._removePromise("footer");this._addPromise("listBinding")}else{this._oTable=i;I.call(this);this._oTable.attachItemPress(this._handleItemPress,this);this._oTable.attachSelectionChange(this._handleSelectionChange,this);this._oTable.attachUpdateFinished(this._handleUpdateFinished,this);this._oTableDelegate=this._oTableDelegate||{onsapprevious:this._handleTableEvent,onsapnext:this._handleTableEvent,cellClick:this._handleTableEvent};i.addDelegate(this._oTableDelegate,true,this);var a=i.getBinding("items");if(a){this._resolvePromise("listBinding",a)}else{this._oObserver.observe(t.child,{bindings:["items"]})}}}e.prototype._observeChanges.apply(this,arguments)};m.prototype._handleTableEvent=function(e){if(!this.isTypeahead()){return}var t=this._getTable();var i=f(e.target).control(0);switch(e.type){case"sapprevious":if(i.isA("sap.m.ListItemBase")){if(t.indexOfItem(i)===0){this.fireNavigated({condition:undefined,itemId:undefined,leaveFocus:true});e.preventDefault();e.stopPropagation();e.stopImmediatePropagation(true)}}break;default:break}};m.prototype.isQuickSelectSupported=function(){return true};m.prototype.shouldOpenOnNavigate=function(){return true};m.prototype._isSingleSelect=function(){var t=this._getTable();if(t){if(t.getMode()===v.MultiSelect){return false}else{return true}}else{return e.prototype._isSingleSelect.apply(this,arguments)}};m.prototype.exit=function(){u.cleanup(this,["_sTableWidth","_oTable","_oScrollContainer","_oContentLayout","_oTablePanel","_oFilterBarVBox","_oMResourceBundle","_oResourceBundle"]);e.prototype.exit.apply(this,arguments)};return m});
sap.ui.require.preload({
	"sap/ui/mdc/field/ValueHelpPanel.control.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:fl="sap.ui.fl.variants"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:mdc="sap.ui.mdc"\n\txmlns:l="sap.ui.layout"><VBox id="rootVBox" fitContainer= "true" class="sapMdcValueHelpPanel"><IconTabBar id="iconTabBar" expandable="false" upperCase="false" stretchContentHeight="true" class="sapUiNoContentPadding" select="iconTabSelect"><layoutData><FlexItemData growFactor= "1" shrinkFactor= "1"/></layoutData><items><IconTabFilter id="fromList" text="{parts: [\'$i18n>valuehelp.SELECTFROMLIST\', \'$this>/conditions\'], formatter: \'._formatListTabTitle\'}" key="selectFromList" visible="false"><l:FixFlex minFlexSize="200px"><l:fixContent><VBox id="filterbarVBox" visible="{$this>/_filterBarVisible}" class="sapMdcValueHelpPanelFilterbar"></VBox></l:fixContent><l:flexContent><Panel id="tablePanel" headerText="{parts: [\'$i18n>valuehelp.TABLETITLE\'], formatter: \'._formatTableTitle\'}" class="sapMdcTablePanel" expanded="true" height="100%"><layoutData><FlexItemData growFactor="1" shrinkFactor="1"/></layoutData></Panel></l:flexContent></l:FixFlex></IconTabFilter><IconTabFilter id="defineCondition" text="{parts: [\'$i18n>valuehelp.DEFINECONDITIONS\', \'$this>/conditions\'], formatter: \'._formatDefineTabTitle\'}" key="defineCondition" visible="false"><ScrollContainer id="defineConditionPanel" height="100%" horizontal="false" vertical="true"></ScrollContainer></IconTabFilter></items></IconTabBar><Panel id="VHPTokenizerPanel" class="sapMdcTokenizerPanel" backgroundDesign="Transparent"\n\t\t\texpanded="true"\n\t\t\theaderText="{parts: [\'$i18n>valuehelp.TOKENIZERTITLE\', \'$this>/conditions\'], formatter: \'._formatTokenizerTitle\'}"><HBox fitContainer="true" width="100%"><items><Tokenizer id="VHPTokenizer" class="sapMdcTokenizer" width="100%"\n\t\t\t\t\t\tvisible="{path: \'$this>/showTokenizer\'}"\n\t\t\t\t\t\ttokenDelete="_handleTokenDelete"\n\t\t\t\t\t\ttokens="{path: \'$this>/conditions\', filters:[{path:\'isEmpty\', operator:\'NE\', value1:true}], templateShareable: false}"><Token id="VHPToken" text="{path: \'$this>\', type: \'sap.ui.mdc.field.ConditionType\'}"/><layoutData><FlexItemData growFactor="1" maxWidth="calc(100% - 2rem)"/></layoutData></Tokenizer><Button id="removeAllBtn" press="_onRemoveAllConditions" type="Transparent" icon="sap-icon://decline" tooltip="{$i18n>valuehelp.REMOVEALLTOKEN}" class="sapUiTinyMarginBegin"><layoutData><FlexItemData growFactor="0" baseSize="2rem"/></layoutData></Button></items></HBox></Panel></VBox></core:FragmentDefinition>\n',
	"sap/ui/mdc/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ui.mdc","type":"library","embeds":[],"applicationVersion":{"version":"1.102.0"},"title":"UI5 library: sap.ui.mdc","description":"UI5 library: sap.ui.mdc","ach":"CA-UI5-MDC","resources":"resources.json","offline":true,"openSourceComponents":[{"name":"BooleanExpressionEvaluator","packagedWithMySelf":true,"version":"master-18530acbf3"}]},"sap.ui":{"technology":"UI5","supportedThemes":["base"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.102","libs":{"sap.ui.core":{"minVersion":"1.102.0"},"sap.m":{"minVersion":"1.102.0"},"sap.ui.layout":{"minVersion":"1.102.0","lazy":true}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.ui.mdc.Table","sap.ui.mdc.FilterBar","sap.ui.mdc.field.FieldBase","sap.ui.mdc.field.FieldInput","sap.ui.mdc.field.FieldMultiInput","sap.ui.mdc.field.ValueHelpPanel","sap.ui.mdc.field.DefineConditionPanel","sap.ui.mdc.Field","sap.ui.mdc.FilterField","sap.ui.mdc.MultiValueField","sap.ui.mdc.link.Panel","sap.ui.mdc.link.ContactDetails","sap.ui.mdc.Chart","sap.ui.mdc.p13n.PersistenceProvider"],"elements":["sap.ui.mdc.table.Column","sap.ui.mdc.table.CreationRow","sap.ui.mdc.table.TableTypeBase","sap.ui.mdc.table.GridTableType","sap.ui.mdc.table.ResponsiveTableType","sap.ui.mdc.table.RowSettings","sap.ui.mdc.chart.Item","sap.ui.mdc.chart.ChartSelectionDetails","sap.ui.mdc.chart.ChartToolbar","sap.ui.mdc.chart.ChartTypeButton","sap.ui.mdc.chart.DrillBreadcrumbs","sap.ui.mdc.chart.SelectionDetailsActions","sap.ui.mdc.field.CustomFieldHelp","sap.ui.mdc.field.CustomFieldInfo","sap.ui.mdc.field.FieldHelpBase","sap.ui.mdc.field.FieldInfoBase","sap.ui.mdc.field.FieldValueHelp","sap.ui.mdc.field.FieldValueHelpContentWrapperBase","sap.ui.mdc.field.FieldValueHelpTableWrapperBase","sap.ui.mdc.field.FieldValueHelpMdcTableWrapper","sap.ui.mdc.field.FieldValueHelpMTableWrapper","sap.ui.mdc.field.FieldValueHelpUITableWrapper","sap.ui.mdc.field.ListFieldHelp","sap.ui.mdc.field.ListFieldHelpItem","sap.ui.mdc.field.BoolFieldHelp","sap.ui.mdc.field.ConditionFieldHelp","sap.ui.mdc.filterbar.aligned.FilterItemLayout","sap.ui.mdc.Link","sap.ui.mdc.link.ContactDetailsAddressItem","sap.ui.mdc.link.ContactDetailsEmailItem","sap.ui.mdc.link.ContactDetailsItem","sap.ui.mdc.link.ContactDetailsPhoneItem","sap.ui.mdc.link.LinkItem","sap.ui.mdc.link.PanelItem","sap.ui.mdc.link.SemanticObjectUnavailableAction","sap.ui.mdc.link.SemanticObjectMapping","sap.ui.mdc.link.SemanticObjectMappingItem","sap.ui.mdc.field.InParameter","sap.ui.mdc.field.OutParameter","sap.ui.mdc.field.MultiValueFieldItem","sap.ui.mdc.ValueHelp","sap.ui.mdc.valuehelp.Popover","sap.ui.mdc.valuehelp.Dialog","sap.ui.mdc.valuehelp.content.Bool","sap.ui.mdc.valuehelp.content.Conditions","sap.ui.mdc.valuehelp.content.FixedList","sap.ui.mdc.valuehelp.content.MDCTable","sap.ui.mdc.valuehelp.content.MTable"],"types":["sap.ui.mdc.TableType","sap.ui.mdc.TableP13Mode","sap.ui.mdc.GrowingMode","sap.ui.mdc.RowAction","sap.ui.mdc.RowCountMode","sap.ui.mdc.SelectionMode","sap.ui.mdc.FilterExpression","sap.ui.mdc.MultiSelectMode"],"interfaces":["sap.ui.mdc.IFilterSource","sap.ui.mdc.IFilter","sap.ui.mdc.IxState","sap.ui.mdc.valuehelp.ITypeaheadContent","sap.ui.mdc.valuehelp.IDialogContent","sap.ui.mdc.valuehelp.ITypeaheadContainer","sap.ui.mdc.valuehelp.IDialogContainer"]}}}}',
	"sap/ui/mdc/ui/Container.js":function(){
}
});
