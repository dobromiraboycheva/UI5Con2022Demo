/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/base/util/isEmptyObject"],function(t,e){"use strict";var n=t.extend("sap.ui.mdc.link.Log",{constructor:function(){this.reset()}});n.prototype.reset=function(){this._oLog={semanticObjects:{},intents:{api:[],breakout:[]}};return this};n.prototype.isEmpty=function(){return!(!e(this._oLog.semanticObjects)||this._oLog.intents.breakout.length||this._oLog.intents.api.length)};n.prototype.initialize=function(t){this.reset();t.forEach(function(t){this.createSemanticObjectStructure(t)}.bind(this))};n.prototype.addContextObject=function(t,e){for(var n in e){var i=this.createAttributeStructure();this.addSemanticObjectAttribute(t,n,i);i.transformations.push({value:e[n],description:"â„¹ The attribute "+n+" with the value "+e[n]+" is initially taken from the binding context."})}};n.prototype.createSemanticObjectStructure=function(t){this._oLog.semanticObjects[t]={attributes:{},intents:[]}};n.prototype.createAttributeStructure=function(){return{transformations:[]}};n.prototype.addSemanticObjectIntent=function(t,e){if(!this._oLog.semanticObjects[t]){this.createSemanticObjectStructure(t)}this._oLog.semanticObjects[t].intents.push(e);return this};n.prototype.addSemanticObjectAttribute=function(t,e,n){if(!this._oLog.semanticObjects[t]){this.createSemanticObjectStructure(t)}this._oLog.semanticObjects[t].attributes[e]=n;return this};n.prototype.getSemanticObjectAttribute=function(t,e){return this._oLog.semanticObjects[t]&&this._oLog.semanticObjects[t].attributes[e]?this._oLog.semanticObjects[t].attributes[e]:undefined};n.prototype.addIntent=function(t,e){switch(t){case n.IntentType.API:this._oLog.intents.api.push(e);break;case n.IntentType.BREAKOUT:this._oLog.intents.breakout.push(e);break;default:throw"Intent type "+t+" is not supported yet."}return this};n.prototype.getFormattedText=function(){var t=function(t){return typeof t==="string"?"'"+t+"'":t};var n=function(e,n){var i={value:"â€¢ "+n+" : ",description:""};e.forEach(function(e,n){i.value=i.value+(n>0?"  âžœ  ":"")+t(e["value"]);i.description=i.description+"â€¦   "+e["description"]+"\n";if(e["reason"]){i.description=i.description+"â€¦   "+e["reason"]+"\n"}});return i};var i=function(t){var e="";t.forEach(function(t){e+="â€¢ '"+t.text+"' : "+t.intent+"\n"});return e};var o=function(t){try{var e=sap.ui.getCore().getConfiguration().getLocale().toString();if(typeof window.Intl!=="undefined"){var n=window.Intl.Collator(e,{numeric:true});t.sort(function(t,e){return n.compare(t,e)})}else{t.sort(function(t,n){return t.localeCompare(n,e,{numeric:true})})}}catch(t){}};var r="";for(var a in this._oLog.semanticObjects){r=r+"\nâ¬¤"+" "+a+"\n";if(e(this._oLog.semanticObjects[a].attributes)){r+="â€¦â€¦  ðŸ”´ No semantic attributes available for semantic object "+a+". Please be aware "+"that without semantic attributes no URL parameters can be created.\n"}else{var s=Object.keys(this._oLog.semanticObjects[a].attributes);o(s);for(var c=0;c<s.length;c++){var u=s[c];var b=n(this._oLog.semanticObjects[a].attributes[u].transformations,u);r+=b.value+"\n";r+=b.description}}if(this._oLog.semanticObjects[a].intents.length){r+="\nIntents returned by FLP for semantic object "+a+":\n";r+=i(this._oLog.semanticObjects[a].intents)}}if(this._oLog.intents.api.length){r+="\nIntents defined in items aggregation:\n";r+=i(this._oLog.intents.api)}if(this._oLog.intents.breakout.length){r+="\nIntents returned by modifyItemsCallback callback:\n";r+=i(this._oLog.intents.breakout)}return r};n.prototype._getLogFormattedText=function(){return!this.isEmpty()?"---------------------------------------------\nsap.ui.mdc.Link:\nBelow you can see detailed information regarding semantic attributes which have been calculated for one or more semantic objects defined in a Link control. Semantic attributes are used to create the URL parameters. Additionally you can see all links containing the URL parameters.\n"+this.getFormattedText():"No logging data available"};n.IntentType={BREAKOUT:"Breakout",API:"Api"};return n});