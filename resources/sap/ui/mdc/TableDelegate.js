/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./AggregationBaseDelegate","./library","sap/ui/model/Sorter","sap/ui/core/library","sap/ui/core/Core"],function(e,r,t,i,n){"use strict";var o=r.TableP13nMode;var a=r.TableType;var s=Object.assign({},e);s.updateBindingInfo=function(e,r){r.parameters={};r.filters=[];r.sorter=[];if(e._oMessageFilter){r.filters=[e._oMessageFilter]}if(e._bMobileTable){var i=e._getGroupedProperties()[0];if(i){var n=e._getSortedProperties().find(function(e){return e.name===i.name});var o=e.getPropertyHelper().getProperty(i.name).path;var a=n?n.descending:false;r.sorter.push(new t(o,a,function(r){return this.formatGroupHeader(e,r,i.name)}.bind(this)))}}r.sorter=r.sorter.concat(r.sorter.length===1?e._getSorters().filter(function(e){return e.sPath!==r.sorter[0].sPath}):e._getSorters())};s.updateBinding=function(e,r,t){this.rebind(e,r)};s.formatGroupHeader=function(e,r,t){var i=e.getPropertyHelper().getProperty(t);var o=i.textProperty;var a=n.getLibraryResourceBundle("sap.ui.mdc");var s="table.ROW_GROUP_TITLE";var u=[i.label,r.getProperty(i.path,true)];if(o){s="table.ROW_GROUP_TITLE_FULL";u.push(r.getProperty(o.path,true))}return a.getText(s,u)};s.validateState=function(r,t,o){if(o=="Filter"&&r._oMessageFilter){var a=n.getLibraryResourceBundle("sap.ui.mdc");return{validation:i.MessageType.Information,message:a.getText("table.PERSONALIZATION_DIALOG_FILTER_MESSAGESTRIP")}}return e.validateState.apply(this,arguments)};s.rebind=function(e,r){if(e._oTable){e._oTable.bindRows(r)}};s.getFilterDelegate=function(){return{addItem:function(e,r){return Promise.resolve(null)},addCondition:function(e,r,t){return Promise.resolve()},removeCondition:function(e,r,t){return Promise.resolve()}}};s.fetchExportCapabilities=function(e){return Promise.resolve({XLSX:{}})};s.getSupportedP13nModes=function(e){var r=[o.Column,o.Sort,o.Filter];if(e._getStringType()===a.ResponsiveTable){r.push(o.Group)}return r};return s});