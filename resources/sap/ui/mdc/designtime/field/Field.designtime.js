/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/Utils","sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(e,n){"use strict";var t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");return{properties:{value:{ignore:true},additionalValue:{ignore:true}},getStableElements:function(t){if(!t.getFieldInfo()){return[]}var r=t.getFieldInfo();var o=typeof r.getSourceControl()==="string"?sap.ui.getCore().byId(r.getSourceControl()):r.getSourceControl();if(!o){o=t}var i=e.getAppComponentForControl(o)||e.getAppComponentForControl(t);var a=r._createPanelId(e,n);return[{id:a,appComponent:i}]},actions:{settings:function(r){if(!r.getFieldInfo()){return{}}return{name:t.getText("info.POPOVER_DEFINE_LINKS"),handler:function(t,o){var i=t.getFieldInfo();return i.getContent().then(function(a){i.addDependent(a);return n.waitForChanges({element:a}).then(function(){var i=sap.ui.mdc.p13n.Engine.getInstance();o.fnAfterClose=function(){a.destroy()};var u=function(){return i.getRTASettingsActionHandler(a,o,"LinkItems").then(function(n){n.forEach(function(n){var o=n.selectorElement;delete n.selectorElement;var i=e.getAppComponentForControl(t)||e.getAppComponentForControl(r);n.selectorControl={id:o.getId(),controlType:o===a?"sap.ui.mdc.link.Panel":"sap.ui.mdc.link.PanelItem",appComponent:i}});return n})};var l=a.getItems();if(l.length>0){return n.waitForChanges({selectors:l}).then(function(){return u()})}else{return u()}})})},CAUTION_variantIndependent:true}}}}});