/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(e){"use strict";var n=function(n){var t=n&&n.isA&&n.isA("sap.ui.mdc.Table")&&n.isTableBound();var r=n&&n.isA&&n.isA("sap.ui.mdc.Chart");if(t||r){if(!n._bWaitForBindChanges){n._bWaitForBindChanges=true;e.waitForChanges({element:n}).then(function(){if(t){n.rebind()}else if(r){n.rebind()}delete n._bWaitForBindChanges})}}};var t=function(e,t,r,i){if(i){e.resetRevertData()}else{e.setRevertData(r)}n(t)};var r=function(e,n,r,i){return new Promise(function(o,a){var u=r.modifier;var s=i?e.getRevertData():e.getContent();Promise.resolve().then(u.getProperty.bind(u,n,"groupConditions")).then(function(r){var a=r?r.groupLevels:[];var c={name:s.name};a.splice(s.index,0,c);r={groupLevels:a};u.setProperty(n,"groupConditions",r);t(e,n,c,i);o()}).catch(function(e){a(e)})})};var i=function(e,n,r,i){return new Promise(function(o,a){var u=r.modifier;var s=i?e.getRevertData():e.getContent();Promise.resolve().then(u.getProperty.bind(u,n,"groupConditions")).then(function(r){var c=r?r.groupLevels:[];if(!c){a()}var f=c.filter(function(e){return e.name===s.name});var p=c.indexOf(f[0]);c.splice(p,1);r={groupLevels:c};u.setProperty(n,"groupConditions",r);t(e,n,s,i);o()}).catch(function(e){a(e)})})};var o=function(e,n,r,i){return new Promise(function(o,a){var u=r.modifier;var s=i?e.getRevertData():e.getContent();Promise.resolve().then(u.getProperty.bind(u,n,"groupConditions")).then(function(r){var a=r?r.groupLevels:[];var c=a.filter(function(e){return e.name===s.name});var f=a.indexOf(c[0]);a.splice(s.index,0,a.splice(f,1)[0]);r={groupLevels:a};u.setProperty(n,"groupConditions",r);t(e,n,s,i);o()}).catch(function(e){a(e)})})};var a={};a.removeGroup={changeHandler:{applyChange:function(e,n,t){return i(e,n,t,false)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return r(e,n,t,true)}},layers:{USER:true}};a.addGroup={changeHandler:{applyChange:function(e,n,t){return r(e,n,t,false)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return i(e,n,t,true)}},layers:{USER:true}};a.moveGroup={changeHandler:{applyChange:function(e,n,t){return o(e,n,t)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return o(e,n,t,true)}},layers:{USER:true}};return a});