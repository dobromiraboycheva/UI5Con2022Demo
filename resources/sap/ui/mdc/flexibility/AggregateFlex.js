/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(e){"use strict";var n=function(n){var t=n&&n.isA&&n.isA("sap.ui.mdc.Table")&&n.isTableBound();var r=n&&n.isA&&n.isA("sap.ui.mdc.Chart");if(t||r){if(!n._bWaitForBindChanges){n._bWaitForBindChanges=true;e.waitForChanges({element:n}).then(function(){if(t){n.rebind()}else if(r){n.rebind()}delete n._bWaitForBindChanges})}}};var t=function(e,t,r,a){if(a){e.resetRevertData()}else{e.setRevertData(r)}n(t)};var r=function(e,n,r,a){return new Promise(function(i,o){var u=r.modifier;var g=a?e.getRevertData():e.getContent();Promise.resolve().then(u.getProperty.bind(u,n,"aggregateConditions")).then(function(r){var o=r?r:{};o[g.name]={};var s={name:g.name};u.setProperty(n,"aggregateConditions",o);t(e,n,s,a);i()}).catch(function(e){o(e)})})};var a=function(e,n,r,a){return new Promise(function(i,o){var u=r.modifier;var g=a?e.getRevertData():e.getContent();Promise.resolve().then(u.getProperty.bind(u,n,"aggregateConditions")).then(function(r){var s=r?r:{};if(!s){o()}delete s[g.name];u.setProperty(n,"aggregateConditions",s);t(e,n,g,a);i()}).catch(function(e){o(e)})})};var i={};i.removeAggregate={changeHandler:{applyChange:function(e,n,t){return a(e,n,t,false)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return r(e,n,t,true)}},layers:{USER:true}};i.addAggregate={changeHandler:{applyChange:function(e,n,t){return r(e,n,t,false)},completeChangeContent:function(e,n,t){},revertChange:function(e,n,t){return a(e,n,t,true)}},layers:{USER:true}};return i});