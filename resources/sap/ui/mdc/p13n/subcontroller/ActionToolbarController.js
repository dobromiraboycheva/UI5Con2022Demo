/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseController","sap/ui/mdc/p13n/panels/ActionToolbarPanel","sap/m/Column","sap/ui/mdc/p13n/P13nBuilder"],function(e,t,n,o){"use strict";var i=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var a=e.extend("saps.ui.mdc.p13n.subcontroller.ActionToolbarController");a.prototype.getUISettings=function(){return{title:i.getText("actiontoolbar.RTA_TITLE")}};a.prototype.getAdaptationUI=function(e){var n=new t({showHeader:true});n.setEnableReorder(false);n.setFieldColumn(i.getText("actiontoolbar.RTA_COLUMN_HEADER"));var o=this.mixInfoAndState(e);n.setP13nData(o.items);this._oPanel=n;return Promise.resolve(n)};a.prototype.getDelta=function(t){var n=e.prototype.getDelta.apply(this,arguments);n.forEach(function(e){var t=e.changeSpecificData.changeType;if(t==="hideControl"||t==="unhideControl"){e.selectorElement=sap.ui.getCore().byId(e.changeSpecificData.content.name);delete e.changeSpecificData.content}});return n};a.prototype.mixInfoAndState=function(e){var t=this.getCurrentState();var n=o.arrayToMap(t);var i=o.prepareAdaptationData(e,function(e,t){var o=n[t.name];e.visible=!!o;e.position=o?o.position:-1;e.alignment=t.alignment;return t.visible});o.sortP13nData({visible:"visible",position:"position"},i.items);i.items.forEach(function(e){delete e.position});return i};a.prototype.getChangeOperations=function(){return{add:"unhideControl",remove:"hideControl",move:"moveAction"}};return a});