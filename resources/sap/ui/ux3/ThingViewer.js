/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/core/Control","./ThingViewerRenderer","./library","./NavigationBar","sap/ui/core/ResizeHandler"],function(e,t,r,i,n,a){"use strict";var s=i.ThingViewerHeaderType;var o=t.extend("sap.ui.ux3.ThingViewer",{metadata:{deprecated:true,library:"sap.ui.ux3",properties:{title:{type:"string",group:"Misc",defaultValue:null},type:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},headerType:{type:"sap.ui.ux3.ThingViewerHeaderType",group:"Misc",defaultValue:s.Standard}},aggregations:{headerContent:{type:"sap.ui.ux3.ThingGroup",multiple:true,singularName:"headerContent"},facets:{type:"sap.ui.ux3.NavigationItem",multiple:true,singularName:"facet"},facetContent:{type:"sap.ui.ux3.ThingGroup",multiple:true,singularName:"facetContent"},actionBar:{type:"sap.ui.ux3.ActionBar",multiple:false},navBar:{type:"sap.ui.ux3.NavigationBar",multiple:false,visibility:"hidden"}},associations:{selectedFacet:{type:"sap.ui.ux3.NavigationItem",multiple:false}},events:{facetSelected:{allowPreventDefault:true,parameters:{id:{type:"string"},item:{type:"sap.ui.ux3.NavigationItem"},key:{type:"string"}}}}}});o.prototype.init=function(){var e=this;this._oNavBar=new n;this.setAggregation("navBar",this._oNavBar);this._oNavBar.attachSelect(function(t){var r=t.getParameters().item;if(e.fireFacetSelected({id:r.getId(),key:r.getKey(),item:r})){e.setSelectedFacet(r)}else{t.preventDefault()}})};o.prototype.onAfterRendering=function(){this._resize=false;if(this.getActionBar()){this._adjustStyles()}if(this.$().find(".sapUiUx3TVFacetContent").length<=0){return}this._resizeListenerId=a.register(this.$().find(".sapUiUx3TVFacetContent")[0],e.proxy(this._onresize,this));this._setTriggerValue();this._setHeaderPosition();this._onresize()};o.prototype.onBeforeRendering=function(){if(this._resizeListenerId){a.deregister(this._resizeListenerId);this._resizeListenerId=null}};o.prototype._setHeaderPosition=function(){if(this.getHeaderType()===s.Standard){var e=this.$().find(".sapUiUx3TVHeaderContainerIdentifier"),t=this.$().find(".sapUiUx3TVHeaderGroupScrollContainer");t.css("top",e.outerHeight())}};o.prototype._onresize=function(t){var r;if(t){r=e(t.target).width()}if(!r){r=e(this.$().find(".sapUiUx3TVFacetContent")[0]).width()}if(r<this._triggerValue&&this._resize==false){var i=this.$().find(".sapUiUx3TVFacetThingGroup");for(var n=0;n<i.length;n++){e(i[n]).animate({width:"100%"},"fast")}this._resize=true}else if(r>this._triggerValue&&this._resize==true){var i=this.$().find(".sapUiUx3TVFacetThingGroup");for(var n=0;n<i.length;n++){e(i[n]).animate({width:"50%"},"fast")}this._resize=false}if(this.getActionBar()){var a=this.getActionBar().getActionBarMinWidth(),s=a;if(this._bShell){a+=36;s=a+60}this.$().find(".sapUiUx3TV").css("min-width",s+"px");this.$().find(".sapUiUx3TVContent").css("min-width",a+"px")}};o.prototype.exit=function(){this._oNavBar.destroy();if(this._resizeListenerId){a.deregister(this._resizeListenerId);this._resizeListenerId=null}};o.prototype._getNavBar=function(){return this._oNavBar};o.prototype._selectDefault=function(){var e=this._oNavBar.getItems();if(e.length&&!this._oNavBar.getSelectedItem()){if(!this.getSelectedFacet()){this.setSelectedFacet(e[0])}var t=this._oNavBar.getSelectedItem(),r=sap.ui.getCore().byId(t);this.fireFacetSelected({id:r.getId(),key:r.getKey(),item:r})}};o.prototype._equalColumns=function(){var e=this.$().find(".sapUiUx3TVHeader"),t=this.$().find(".sapUiUx3TVFacets"),r=this.$().find(".sapUiUx3TVContentScrollContainer"),i=r.get(0).scrollHeight;t.height(i);e.height(i)};o.prototype._rerenderHeader=function(){var e=this.$("header");if(e.length>0){var t=sap.ui.getCore().createRenderManager();r.renderHeader(t,this);t.flush(e[0]);t.destroy()}};o.prototype._rerenderHeaderContent=function(){var e=this.$("headerContent");if(e.length>0){var t=sap.ui.getCore().createRenderManager();r.renderHeaderContent(t,this);t.flush(e[0]);t.destroy()}};o.prototype._rerenderToolbar=function(){var e=this.$("toolbar");if(e.length>0){var t=sap.ui.getCore().createRenderManager();r.renderToolbar(t,this);t.flush(e[0]);t.destroy()}};o.prototype._rerenderFacetContent=function(){var e=this.$("facetContent");if(e.length>0){var t=sap.ui.getCore().createRenderManager();r.renderFacetContent(t,this);t.flush(e[0]);t.destroy();this._resize=false;this._setTriggerValue();this._onresize()}};o.prototype._setTriggerValue=function(){var t,r,i=this.$("facetContent");if(i.length>0){t=this.$().find(".sapUiUx3TVFacetThingGroup");r=e(t[0]).css("min-width");if(r){this._triggerValue=parseInt(r)*2}}};o.prototype.getFacets=function(){return this._oNavBar.getItems()};o.prototype.insertFacet=function(e,t){this._oNavBar.insertItem(e,t);return this};o.prototype.addFacet=function(e){this._oNavBar.addItem(e);return this};o.prototype.removeFacet=function(e){return this._oNavBar.removeItem(e)};o.prototype.removeAllFacets=function(){return this._oNavBar.removeAllItems()};o.prototype.destroyFacets=function(){this._oNavBar.destroyItems();return this};o.prototype.setIcon=function(e){this.setProperty("icon",e);if(this.getActionBar()){this.getActionBar().setThingIconURI(e)}this._rerenderHeader();return this};o.prototype.insertFacetContent=function(e,t){this.insertAggregation("facetContent",e,t,true);this._rerenderFacetContent();return this};o.prototype.addFacetContent=function(e){this.addAggregation("facetContent",e,true);this._rerenderFacetContent();return this};o.prototype.removeFacetContent=function(e){var t=this.removeAggregation("facetContent",e,true);this._rerenderFacetContent();return t};o.prototype.removeAllFacetContent=function(){var e=this.removeAllAggregation("facetContent",true);this._rerenderFacetContent();return e};o.prototype.destroyFacetContent=function(){this.destroyAggregation("facetContent",true);this._rerenderFacetContent();return this};o.prototype.insertHeaderContent=function(e,t){this.insertAggregation("headerContent",e,t,true);this._rerenderHeaderContent();return this};o.prototype.addHeaderContent=function(e){this.addAggregation("headerContent",e,true);this._rerenderHeaderContent();return this};o.prototype.removeHeaderContent=function(e){var t=this.removeAggregation("headerContent",e,true);this._rerenderHeaderContent();return t};o.prototype.removeAllHeaderContent=function(){var e=this.removeAllAggregation("headerContent",true);this._rerenderHeaderContent();return e};o.prototype.destroyHeaderContent=function(){this.destroyAggregation("headerContent",true);this._rerenderHeaderContent();return this};o.prototype.setSelectedFacet=function(e){var t=this.getSelectedFacet();this.setAssociation("selectedFacet",e,true);var r=this.getSelectedFacet();if(t!=r){this._oNavBar.setSelectedItem(r)}return this};o.prototype.setTitle=function(e){this.setProperty("title",e,true);this._rerenderHeader();return this};o.prototype.setSubtitle=function(e){this.setProperty("subtitle",e,true);this._rerenderHeader();return this};o.prototype.setActionBar=function(e){this.setAggregation("actionBar",e,true);if(this.getIcon()&&this.getActionBar()){this.getActionBar().setThingIconURI(this.getIcon())}this._rerenderToolbar();this._adjustStyles();return this};o.prototype._adjustStyles=function(){var e=this.$().find(".sapUiUx3TVHeader"),t=this.$().find(".sapUiUx3TVFacets");if(e.length>0){e.addClass("sapUiUx3TVActionBar");e.removeClass("sapUiUx3TVNoActionBar")}if(t.length>0){t.addClass("sapUiUx3TVActionBar");t.removeClass("sapUiUx3TVNoActionBar")}};return o});