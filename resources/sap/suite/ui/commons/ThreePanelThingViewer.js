/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/ui/ux3/library","sap/ui/commons/library","./VerticalNavigationBar","sap/ui/ux3/ThingViewer","sap/ui/commons/Button","sap/suite/ui/commons/ThreePanelThingViewerRenderer","sap/ui/events/ControlEvents","sap/ui/dom/containsOrEquals"],function(e,t,n,i,o,r,s,u,a,p){"use strict";var d=r.extend("sap.suite.ui.commons.ThreePanelThingViewer",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{logo:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:null},sidebarWidth:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"244px"}},aggregations:{menuContent:{type:"sap.ui.commons.Link",multiple:true,singularName:"menuContent"}}}});d.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oNavBar=new o;this.setAggregation("navBar",this._oNavBar);this._oNavBar.attachSelect(function(e){var t=e.getParameters().item;if(this.fireFacetSelected({id:t.getId(),key:t.getKey(),item:t})){this.setSelectedFacet(t)}else{e.preventDefault()}},this);this._iSelectedMenuItem=0;this._oMenuButton=new s({id:this.getId()+"-menu-button",tooltip:this._rb.getText("THREEPANELTHINGVIEWER_BUTTON_MENU_TOOLTIP"),lite:true,press:[this._toggleMenuPopup,this]});this._oMenuButton.addStyleClass("sapSuiteTvTitleMb");this.fAnyEventHandlerProxy=e.proxy(this.onAnyEvent,this)};d.prototype.exit=function(){this._oMenuButton.destroy();a.unbindAnyEvent(this.fAnyEventHandlerProxy)};d.prototype.onAfterRendering=function(){this._bMenuOpened=false;this._updateMenuPopup();this._toggleHeaderContent()};d.prototype.selectDefaultFacet=function(){this._selectDefault();return this};d.prototype._toggleMenuPopup=function(){e(document.getElementById(this.getId()+"-menu-popup")).toggle();this._bMenuOpened=!this._bMenuOpened;if(this._bMenuOpened){a.bindAnyEvent(this.fAnyEventHandlerProxy);this.getMenuContent()[0].focus();this._iSelectedMenuItem=0}else{a.unbindAnyEvent(this.fAnyEventHandlerProxy)}};d.prototype._updateMenuPopup=function(){var t=e(document.getElementById(this.getId()+"-header")).width();var n=e(document.getElementById(this.getId()+"-menu-popup"));var i=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";var o=this.getMenuContent().length;n.css(i,t-22+"px");n.children().each(function(t){var n=e(this);n.attr("tabindex","-1");n.attr("role","menuitem");n.attr("aria-posinset",t+1);n.attr("aria-setsize",o)})};d.prototype._rerenderFacetContent=function(){var t=e(document.getElementById(this.getId()+"-facetContent"));if(t.length>0){var n=sap.ui.getCore().createRenderManager();u.renderFacetContent(n,this);n.flush(t[0]);n.destroy();this._resize=false;this._setTriggerValue();this._onresize()}};d.prototype._rerenderHeader=function(){var t=e(document.getElementById(this.getId()+"-header"));if(t.length>0){var n=sap.ui.getCore().createRenderManager();u.renderHeader(n,this);n.flush(t[0]);n.destroy()}};d.prototype._rerenderHeaderContent=function(){var t=e(document.getElementById(this.getId()+"-headerContent"));if(t.length>0){var n=sap.ui.getCore().createRenderManager();u.renderHeaderContent(n,this);n.flush(t[0]);n.destroy()}};d.prototype._toggleHeaderContent=function(){var t=e(document.getElementById(this.getId()+"-headerContent"));if(this.getShowHeader()){t.show()}else{t.hide()}};d.prototype.onAnyEvent=function(e){if(this._bMenuOpened&&(e.type==="mousedown"||e.type==="focusin")){var t=e.target;var n=this.getId()+"-menu-popup"?window.document.getElementById(this.getId()+"-menu-popup"):null;if(!p(n,t)||t.tagName==="BODY"){this._toggleMenuPopup()}}};d.prototype.onsapescape=function(){if(this._bMenuOpened){this._toggleMenuPopup();this._oMenuButton.focus()}};d.prototype.onsapnext=function(e){if(this._bMenuOpened){var t=this.getMenuContent();this._iSelectedMenuItem++;if(this._iSelectedMenuItem>=t.length){this._iSelectedMenuItem=0}t[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation()}};d.prototype.onsapprevious=function(e){if(this._bMenuOpened){var t=this.getMenuContent();this._iSelectedMenuItem--;if(this._iSelectedMenuItem<0){this._iSelectedMenuItem=t.length-1}t[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation()}};d.prototype.setShowHeader=function(e){this.setProperty("showHeader",e,true);this._toggleHeaderContent();return this};return d});