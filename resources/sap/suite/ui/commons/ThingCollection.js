/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/commons/Link","sap/ui/commons/library","sap/ui/events/jquery/EventSimulation","./ThingCollectionRenderer"],function(e,t,i,r,n,o,s){"use strict";var a=i.extend("sap.suite.ui.commons.ThingCollection",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},minWidth:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},minHeight:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null}},aggregations:{content:{type:"sap.ui.ux3.ThingViewer",multiple:true,singularName:"content"}}}});a.prototype.init=function(){this._iCenterNum=0;this._bScrollDisabled=false;this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oRemoveButton=new r({id:this.getId()+"-remove-button",tooltip:this._rb.getText("THINGCOLLECTION_BUTTON_REMOVE_TOOLTIP"),press:[this._removeCenterContent,this]});this._oRemoveButton.addStyleClass("sapUiUx3OverlayCloseButton");this._initTouchEvents()};a.prototype.exit=function(){this._oRemoveButton.destroy()};a.prototype.onBeforeRendering=function(){this._oCenterControl=this.getContent()[this._iCenterNum]||null};a.prototype.onAfterRendering=function(){var t=this;e(document.getElementById(this.getId()+"-nav-prev")).on("click",function(){t.shiftPrev()});e(document.getElementById(this.getId()+"-nav-next")).on("click",function(){t.shiftNext()});this._updateArrows();if(this.getContent().length<=1){this._hideRemoveButton()}e(document.getElementById(this._oRemoveButton.getId())).attr("role","button");e(document.getElementById(this._oRemoveButton.getId())).attr("aria-disabled","false")};a.prototype.addContent=function(e){this.addAggregation("content",e,true);this._updateArrows();this._showRemoveButton();return this};a.prototype.addNextContent=function(e){this.insertAggregation("content",e,this._iCenterNum+1,true);this._updateArrows();this._showRemoveButton();return this};a.prototype.shiftPrev=function(){if(this._isShiftPrevForbidden()){return}var t=this;this._hideRemoveButton();this._bScrollDisabled=true;var i="#"+this.getId()+"-container";var r=e(i+">.sapSuiteTcPrev");var n=e(i+">.sapSuiteTcCenter");var o=e(i+">.sapSuiteTcNext");var s=sap.ui.getCore().createRenderManager();var a=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";this._iCenterNum--;var u={};u[a]="+=110%";this._renderPrevPanel(s,this.getContent()[this._iCenterNum]);n.animate(u,800);r.animate(u,800,function(){o.css(a,"-110%");t._renderNextPanel(s);s.destroy();t._bScrollDisabled=false;t._updateArrows();t._showRemoveButton();e(i).focus();n.show()});r.removeClass("sapSuiteTcPrev").addClass("sapSuiteTcCenter").attr("aria-hidden","false");n.removeClass("sapSuiteTcCenter").addClass("sapSuiteTcNext").attr("aria-hidden","true");o.removeClass("sapSuiteTcNext").addClass("sapSuiteTcPrev")};a.prototype.shiftNext=function(){if(this._isShiftNextForbidden()){return}var t=this;this._hideRemoveButton();this._bScrollDisabled=true;var i="#"+this.getId()+"-container";var r=e(i+">.sapSuiteTcPrev");var n=e(i+">.sapSuiteTcCenter");var o=e(i+">.sapSuiteTcNext");var s=sap.ui.getCore().createRenderManager();var a=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";this._iCenterNum++;var u={};u[a]="-=110%";this._renderNextPanel(s,this.getContent()[this._iCenterNum]);n.animate(u,800);o.animate(u,800,function(){r.css(a,"110%");t._renderPrevPanel(s);s.destroy();t._bScrollDisabled=false;t._updateArrows();t._showRemoveButton();e(i).focus();n.show()});r.removeClass("sapSuiteTcPrev").addClass("sapSuiteTcNext");n.removeClass("sapSuiteTcCenter").addClass("sapSuiteTcPrev").attr("aria-hidden","true");o.removeClass("sapSuiteTcNext").addClass("sapSuiteTcCenter").attr("aria-hidden","false")};a.prototype.onsapprevious=function(e){this.shiftPrev();e.preventDefault()};a.prototype.onsapnext=function(e){this.shiftNext();e.preventDefault()};a.prototype._initTouchEvents=function(){if(o.touchEventMode!=="OFF"){var e=this;this.onswipeleft=function(t){t.preventDefault();e.shiftNext()};this.onswiperight=function(t){t.preventDefault();e.shiftPrev()}}};a.prototype._removeCenterContent=function(){this._hideRemoveButton();this.removeAggregation("content",this.getContent()[this._iCenterNum],true);var t=this;var i=this.getContent().length;var r=e("#"+this.getId()+"-container>.sapSuiteTcCenter");r.hide(600);if(t._iCenterNum>=i){t._iCenterNum=i;t.shiftPrev()}else{t._iCenterNum-=1;t.shiftNext()}};a.prototype._showRemoveButton=function(){if(this.getContent().length>1){e(document.getElementById(this.getId()+"-remove-button")).show()}};a.prototype._hideRemoveButton=function(){e(document.getElementById(this.getId()+"-remove-button")).hide()};a.prototype._updateArrows=function(){var t=e(document.getElementById(this.getId()+"-nav-prev"));var i=e(document.getElementById(this.getId()+"-nav-next"));var r="";var n="";if(this._isShiftPrevForbidden()){t.removeClass("sapSuiteTcNavPrevArrow")}else{t.addClass("sapSuiteTcNavPrevArrow");r=this._rb.getText("THINGCOLLECTION_BUTTON_PREVIOUS_TOOLTIP")}t.attr("title",r);if(this._isShiftNextForbidden()){i.removeClass("sapSuiteTcNavNextArrow")}else{i.addClass("sapSuiteTcNavNextArrow");n=this._rb.getText("THINGCOLLECTION_BUTTON_NEXT_TOOLTIP")}i.attr("title",n)};a.prototype._isShiftPrevForbidden=function(){return this._bScrollDisabled||this._iCenterNum<=0};a.prototype._isShiftNextForbidden=function(){return this._bScrollDisabled||this._iCenterNum>=this.getContent().length-1};a.prototype._renderPrevPanel=function(e,t){this._renderPanel(e,t,true)};a.prototype._renderNextPanel=function(e,t){this._renderPanel(e,t,false)};a.prototype._renderPanel=function(t,i,r){var n="#"+this.getId()+"-container>"+(r?".sapSuiteTcPrev":".sapSuiteTcNext");var o=e(n);if(o.length>0){if(i){t.renderControl(i)}else{t.write("")}t.flush(o[0])}};return a});