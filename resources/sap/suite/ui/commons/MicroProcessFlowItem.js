sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/ui/core/library","sap/ui/core/Control","sap/suite/ui/commons/MicroProcessFlow"],function(e,t,i,s,r){"use strict";var o=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),a={Error:"sap-icon://message-error",None:null,Success:"sap-icon://message-success",Warning:"sap-icon://message-warning",Information:"sap-icon://message-information"},n=i.ValueState;var c=s.extend("sap.suite.ui.commons.MicroProcessFlowItem",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Appearance",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:n.Standard},showIntermediary:{type:"boolean",group:"Appearance",defaultValue:false},stepWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:null},showSeparator:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{customControl:{type:"sap.ui.core.Control",multiple:false,singularName:"customControl"},intermediary:{type:"sap.ui.core.Control",multiple:false,singularName:"intermediary"}},events:{press:{allowPreventDefault:true,parameters:{item:"object"}}}},onAfterRendering:function(){this._setupEvents();this._setAccessibility()},renderer:function(e,t){var i=function(){e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-separator");e.addClass("sapSuiteUiCommonsMicroProcessFlowItemSeparatorWrapper");e.writeClasses();e.addStyle("width",t._getStepWidth());e.writeStyles();e.write(">");e.write("<div ");e.addClass("sapSuiteUiCommonsMicroProcessFlowItemSeparator");if(!t.getShowSeparator()||o){e.addClass("sapSuiteUiCommonsMicroProcessFlowItemHiddenSeparator")}e.writeClasses();e.write(">");e.write("</div>");if(n){s()}e.write("</div>")};var s=function(){var i=t.getIntermediary();e.write('<div class="sapSuiteUiCommonsMicroProcessFlowItemIntermediary" >');if(i){e.renderControl(i)}else{e.write('<div class="sapSuiteUiCommonsMicroProcessFlowItemOnHoldElement" >');e.write("</div>")}e.write("</div>")};var r=t.getIcon()||t._getIconByState(),o=t.getParent()._isLastItem(t),a=t.getId(),n=t.getShowIntermediary(),c=t.getCustomControl(),l=t.getTitle();e.write("<div ");e.addClass("sapSuiteUiCommonsMicroProcessFlowItemWrapper");e.writeClasses(t);e.writeControlData(t);e.write(">");e.write("<div");if(l){e.writeAttributeEscaped("title",l)}e.writeAttributeEscaped("id",a+"-item");e.writeAttribute("class","sapSuiteUiCommonsMicroProcessFlowItemContent");e.write(">");if(c){e.renderControl(c)}else{e.write('<div tabindex="0" id="'+a+'-itemContent" class="sapSuiteUiCommonsMicroProcessFlowItem sapSuiteUiCommonsMicroProcessFlowItem'+t.getState()+'"');e.writeAttributeEscaped("aria-label",t._getAriaText());e.writeAttributeEscaped("role","option");e.writeAttributeEscaped("aria-selected","false");e.write(">");if(r){e.renderControl(new sap.ui.core.Icon({tooltip:t.getTitle(),src:r}).addStyleClass("sapSuiteUiCommonsMicroProcessFlowItemIcon"))}e.write("</div>")}e.write("</div>");if(!o||n){i()}e.write("</div>")}});c.prototype.getFocusDomRef=function(){var e=this.getCustomControl();return e?e.getFocusDomRef():this.getDomRef("itemContent")};c.prototype._setAccessibility=function(){var e=this._getAccessibleItem(),t=this._getAriaText();if(e.attr("tabindex")!=="0"){e.attr("tabindex",0)}e.attr("aria-label",t);e.attr("role","option");e.attr("aria-posinset",this._iIndex);e.attr("aria-setsize",this._iItemsCount)};c.prototype._getAccessibleItem=function(){var t=e(this.getFocusDomRef());return t.attr("tabindex")==="0"?t:this.$("item")};c.prototype._setupEvents=function(){var t=this.$("item"),i=this.hasListeners("press");t.on("touchstart click",this._click.bind(this));if(i){t.on("mousedown",function(t){e(this).addClass("sapSuiteUiCommonsMicroProcessFlowItemPressed")});t.on("mouseup",function(t){e(this).removeClass("sapSuiteUiCommonsMicroProcessFlowItemPressed")})}if(i){t.css("cursor","pointer");t.attr("role","button");t.attr("aria-hidden","true")}};c.prototype._getAriaText=function(){var e=o.getText("MICRO_PROCESS_FLOW_ITEM");switch(this.getState()){case n.Error:e+=" - "+o.getText("MICRO_PROCESS_FLOW_ERROR");break;case n.Warning:e+=" - "+o.getText("MICRO_PROCESS_FLOW_WARNING");break;case n.Success:e+=" - "+o.getText("MICRO_PROCESS_FLOW_SUCCESS");break;case n.Information:e+=" - "+o.getText("MICRO_PROCESS_FLOW_INFORMATION");break}if(this.getTitle()){e+=" - "+this.getTitle()}return e};c.prototype._isCompact=function(){return e("body").hasClass("sapUiSizeCompact")||this.$().is(".sapUiSizeCompact")||this.$().closest(".sapUiSizeCompact").length>0};c.prototype._getStepWidth=function(){var e=this.getStepWidth();if(!e){e=this._isCompact()?"1rem":"1.5rem"}return e};c.prototype._setAccessibilityData=function(e,t){this._iIndex=e;this._iItemsCount=t};c.prototype._click=function(e){var t=this.getParent();if(t){t._bKeyBoard=false}this._firePress(e)};c.prototype._firePress=function(e){if(this.hasListeners("press")){this.firePress({item:this.getFocusDomRef()});if(e.preventDefault){e.preventDefault()}if(e.stopPropagation){e.stopPropagation()}}var t=document.getElementsByClassName("sapSuiteMicroProcessFlowItemSelected")[0];var i=this._getAccessibleItem()[0];if(t){t.setAttribute("aria-selected",false);t.classList.remove("sapSuiteMicroProcessFlowItemSelected")}if(i.tabIndex=="0"){i.setAttribute("aria-selected",true);i.classList.add("sapSuiteMicroProcessFlowItemSelected")}};c.prototype._getIconByState=function(){return a[this.getState()]};return c});