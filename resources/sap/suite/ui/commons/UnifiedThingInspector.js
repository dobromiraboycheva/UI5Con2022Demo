/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/m/library","sap/ui/core/Control","sap/m/NavContainer","sap/ui/core/IconPool","sap/ui/layout/Grid","sap/ui/layout/GridData","sap/m/ActionSheet","sap/suite/ui/commons/LinkActionSheet","sap/m/ScrollContainer","sap/m/Page","sap/m/Bar","sap/m/Button","sap/ui/Device","sap/ui/core/ResizeHandler","sap/ui/base/ManagedObject","sap/m/ObjectHeader","sap/m/ObjectAttribute","sap/m/Image","sap/ui/core/Icon","sap/base/Log","sap/ui/events/KeyCodes","sap/base/util/deepEqual","./UnifiedThingInspectorRenderer"],function(t,e,i,o,a,n,r,s,c,l,u,p,d,g,h,f,_,y,v,I,T,m,b,C,O){"use strict";var S=o.extend("sap.suite.ui.commons.UnifiedThingInspector",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},title:{type:"string",group:"Misc",defaultValue:null},name:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},transactionsVisible:{type:"boolean",group:"Misc",defaultValue:false},actionsVisible:{type:"boolean",group:"Misc",defaultValue:false},destroyPageOnBack:{type:"boolean",group:"Misc",defaultValue:true},configurationVisible:{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{facets:{type:"sap.suite.ui.commons.FacetOverview",multiple:true,singularName:"facet"},facetContent:{type:"sap.ui.core.Control",multiple:true,singularName:"facetContent"},navContainer:{type:"sap.m.NavContainer",multiple:false,visibility:"hidden"},kpis:{type:"sap.suite.ui.commons.KpiTile",multiple:true,singularName:"kpi"},transactions:{type:"sap.ui.core.Control",multiple:true,singularName:"transaction",deprecated:true},actions:{type:"sap.m.Button",multiple:true,singularName:"action",deprecated:true},pages:{type:"sap.ui.core.Control",multiple:true,singularName:"page"},objectHeader:{type:"sap.m.ObjectHeader",multiple:false,visibility:"hidden"}},events:{backAction:{},transactionsButtonPress:{allowPreventDefault:true,parameters:{caller:{type:"object"}}},actionsButtonPress:{allowPreventDefault:true,parameters:{caller:{type:"object"}}},configurationButtonPress:{parameters:{caller:{type:"object"}}},navigate:{allowPreventDefault:true,parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}},afterNavigate:{parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}}}}});S.prototype.init=function(){this._altKey=false;var e=this;this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._bDetailPageIsTransitioning=false;this._oNavContainer=new a(this.getId()+"-nav-container",{navigate:function(t){e._bDetailPageIsTransitioning=true;e.fireNavigate(t)},afterNavigate:function(t){e._bDetailPageIsTransitioning=false;if(e.getDestroyPageOnBack()){var i=t.getParameter("from");var o=e._oNavContainer.indexOfPage(i);if(o>1&&t.getParameter("isBack")){i.destroy(true)}}e.fireAfterNavigate(t)}});this.setAggregation("navContainer",this._oNavContainer);this._oActionSheet=new c(this.getId()+"-action-sheet",{showCancelButton:true,placement:i.PlacementType.Top});this._oTransactionSheet=new l(this.getId()+"-transaction-sheet",{showCancelButton:true,placement:i.PlacementType.Top,itemPress:function(t){var i=t.getParameter("item");if(i.getMetadata().getName()==="sap.m.Link"&&i._bEnterWasPressed){e._bDontOpenTransactions=true}}});this._oKpiScrollCont=new u(this.getId()+"-kpi-scroll-container",{width:"100%",horizontal:this.isPhone()});this._oKpiScrollCont.addStyleClass("sapSuiteUtiKpiBox");this._oFacetsGrid=new r(this.getId()+"-facets-grid",{defaultSpan:"L6 M12 S12",hSpacing:1,vSpacing:1,width:"auto"});this._oFacetsGrid.addStyleClass("sapSuiteUtiFacetGrid");this._oFacetsGrid.addDelegate({onAfterRendering:function(e){var i=e.srcControl.$();i.attr("role","group");var o=i.find("[role='note']");var a=1;o.each(function(){t(this).attr("aria-setsize",o.length).attr("aria-posinset",a++)})}});this._oHeader=this._createHeaderObject(this.getId()+"-header");this._oHeader.getObjectHeader()._titleText.setMaxLines(2);this._oHeaderGrid=new r(this.getId()+"-header-grid",{hSpacing:0,vSpacing:0,content:[this._oHeader,this._oKpiScrollCont]});this._oMasterPage=new p(this.getId()+"-master-page",{content:[this._oHeaderGrid,this._oFacetsGrid],showNavButton:true,footer:new d(this.getId()+"-master-footer",{contentRight:[new g(this.getId()+"-master-action-button",{icon:"sap-icon://action",tooltip:e._rb.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_ACTIONS"),press:function(){var t={};t.caller=this;if(e.fireActionsButtonPress(t)){if(e._oActionSheet.getButtons().length){e._oActionSheet.openBy(this)}else{m.info("The are no actions for displaying")}}}})]}),navButtonPress:function(){e.fireBackAction()}});this._oMasterPage.getFooter().insertContentRight(new g(this.getId()+"-master-transaction-button",{text:e._rb.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_OPENWITH")+"...",tooltip:e._rb.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_TRANSACTIONS_TOOLTIP"),press:function(){if(!e._bDontOpenTransactions){var t={};t.caller=this;if(e.fireTransactionsButtonPress(t)){if(e._oTransactionSheet.getItems().length){e._oTransactionSheet.openBy(this)}else{m.info("The are no transactions for displaying")}}}else{e._bDontOpenTransactions=false}}}),0);this._oDetailPage=new p(this.getId()+"-detail-page",{showNavButton:true,footer:new d(this.getId()+"-detail-footer",{contentRight:[new g(this.getId()+"-detail-action-button",{icon:"sap-icon://action",tooltip:e._rb.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_ACTIONS"),press:function(){var t={};t.caller=this;if(e.fireActionsButtonPress(t)){if(e._oActionSheet.getButtons().length){e._oActionSheet.openBy(this)}else{m.info("The are no actions for displaying")}}}})]}),navButtonPress:function(){e._navigateToMaster()}});this._oDetailPage.getFooter().insertContentRight(new g(this.getId()+"-detail-transaction-button",{text:e._rb.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_OPENWITH")+"...",tooltip:e._rb.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_TRANSACTIONS_TOOLTIP"),press:function(){var t={};t.caller=this;if(e.fireTransactionsButtonPress(t)){if(e._oTransactionSheet.getItems().length){e._oTransactionSheet.openBy(this)}else{m.info("The are no transactions for displaying")}}}}),0);this._oNavContainer.addPage(this._oMasterPage);this._oNavContainer.addPage(this._oDetailPage);if(!h.system.desktop){h.orientation.attachHandler(function(t){e._updateHeaderLayoutData(t);e._adjustFacetLayout()})}this.setModel=function(t,e){S.prototype.setModel.apply(this,arguments);this._oActionSheet.setModel(t,e);this._oTransactionSheet.setModel(t,e);return this};this._bindedAdjustFacetLayout=this._adjustFacetLayout.bind(this);this._oDelegate={onclick:function(i){e.$().find(".sapSuiteFov").removeAttr("tabindex");var o=t(i.currentTarget);o.attr("tabindex",0);if(o){o.focus()}},onAfterRendering:function(t){e._adjustFacetLayout();if(e._sCurrentFoId==t.srcControl.getId()){t.srcControl.$().attr("tabindex",0)}},onkeydown:function(t){var i=t.srcControl.$();var o=function(t){if(t.length){t.attr("tabindex",0);if(t.get(0)){t.get(0).focus()}i.removeAttr("tabindex");e._sCurrentFoId=t.attr("id")}};var a=function(t){var i=e.$().find((t.row!=undefined?"[data-row="+t.row+"]":"")+(t.col!=undefined?"[data-col="+t.col+"]":"")+(t.f!=undefined?"[data-f="+t.f+"]":""));o(i)};var n=i.attr("data-row");var r=i.attr("data-col");var s=i.attr("data-f");var c=sap.ui.getCore().getConfiguration().getRTL();var l=c?b.ARROW_RIGHT:b.ARROW_LEFT;var u=c?b.ARROW_LEFT:b.ARROW_RIGHT;switch(t.which){case b.ARROW_UP:a({row:parseInt(n)-1,col:r});t.preventDefault();break;case b.ARROW_DOWN:a({row:parseInt(n)+1,col:r});t.preventDefault();break;case l:if(u==e._prevKey&&!i.is(e._prevFo)){o(e._prevFo)}else{a({col:parseInt(r)-1,f:s})}t.preventDefault();break;case u:if(l==e._prevKey&&!i.is(e._prevFo)){o(e._prevFo)}else{a({col:parseInt(r)+1,f:s})}t.preventDefault();break;case b.HOME:o(e.$().find("[data-home]"));t.preventDefault();break;case b.END:o(e.$().find("[data-end]"));t.preventDefault();break;default:break}e._prevKey=t.which;e._prevFo=i}}};S.prototype.exit=function(){var t=this;this._oActionSheet.destroy();this._oTransactionSheet.destroy();h.orientation.detachHandler(function(){t._updateHeaderLayoutData()});f.deregister(this._sTitleResizeHandlerId)};S.prototype._updateHeaderLayoutData=function(e){var i="";var o=t(document.getElementById(this.getId()+"-kpi-scroll-container-scroll"));var a=this.getScrollClass();if(h.system.tablet&&!e.landscape){i="100%";o.addClass(a)}else{o.removeClass(a)}o.css("width",i)};S.prototype._adjustFacetLayout=function(){var t=this.getFacets().length;if(t>0){this.getFacets()[0].$().attr("data-home",true);this.getFacets()[t-1].$().attr("data-end",true)}if(this.$().outerWidth(true)>=1024||this._oFacetsGrid.$().hasClass("sapUiRespGridMedia-Std-Desktop")){this._adjustTwoColumnFacetLayout()}else{this._adjustOneColumnFacetLayout()}};S.prototype._adjustOneColumnFacetLayout=function(){var t=this.getFacets().length;for(var e=0;e<t;e++){this.getFacets()[e].$().attr("data-row",e).attr("data-col",0).parent().css("margin-top","").removeClass("sapSuiteUtiFacetLeft")}};S.prototype._adjustTwoColumnFacetLayout=function(){this._adjustOneColumnFacetLayout();var t=this.getFacets();var e=0;var i=0,o=0,a=-1;var n=t.length;for(var r=0;r<n;r++){var s=parseFloat(t[r].$().css("height"));if(e>0){e-=s+parseFloat(t[r].$().parent().css("margin-bottom"));t[r].$().attr("data-row",o).attr("data-col",1).attr("data-f",a);o+=1}else{if(e<0){t[r].$().parent().css("margin-top",e+"px")}else{t[r].$().parent().addClass("sapSuiteUtiFacetLeft")}e+=s+parseFloat(t[r].$().parent().css("margin-bottom"));a+=1;t[r].$().attr("data-row",i).attr("data-col",0).attr("data-f",a);i+=1}}};S.prototype.onAfterRendering=function(){if(this._sTitleResizeHandlerId){f.deregister(this._sTitleResizeHandlerId)}var e=this.getId()+"-header"?window.document.getElementById(this.getId()+"-header"):null;if(e){this._sTitleResizeHandlerId=f.register(e,t.proxy(this._handleResize,this));this._handleResize()}if(h.system.tablet&&h.orientation.portrait){t(document.getElementById(this.getId()+"-kpi-scroll-container-scroll")).css("width","100%").addClass(this.getScrollClass())}var i=this.getFacets().length;for(var o=0;o<i;o++){this.getFacets()[o].addDelegate(this._oDelegate)}var a=t(document.getElementById(this._sCurrentFoId));if(a.length===0){a=this.$().find("[data-home]");this._sCurrentFoId=a.attr("id")}a.attr("tabindex",0)};S.prototype._handleResize=function(){this._adjustFacetLayout()};S.prototype._getFontSize=function(t,e){var i=e/(t*.5);if(i>28){return 28}else if(i<20){return 20}else{return i}};S.prototype.onBeforeRendering=function(){var t=this;if(this.getConfigurationVisible()){if(this._oMasterPage.getFooter().getContentLeft().length==0){this._oMasterPage.getFooter().addContentLeft(new g(this.getId()+"-master-settings-button",{icon:"sap-icon://action-settings",tooltip:t._rb.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_SETTINGS_TOOLTIP"),press:function(){var e={};e.caller=this;t.fireConfigurationButtonPress(e)}}),true)}if(this._oDetailPage.getFooter().getContentLeft().length==0){this._oDetailPage.getFooter().addContentLeft(new g(this.getId()+"-detail-settings-button",{icon:"sap-icon://action-settings",tooltip:t._rb.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_SETTINGS_TOOLTIP"),press:function(){var e={};e.caller=this;t.fireConfigurationButtonPress(e)}}),true)}}else{this._oMasterPage.getFooter().removeAllContentLeft(true);this._oDetailPage.getFooter().removeAllContentLeft(true)}sap.ui.getCore().byId(this.getId()+"-master-action-button").setVisible(this.getActionsVisible());sap.ui.getCore().byId(this.getId()+"-detail-action-button").setVisible(this.getActionsVisible());sap.ui.getCore().byId(this.getId()+"-master-transaction-button").setVisible(this.getTransactionsVisible());sap.ui.getCore().byId(this.getId()+"-detail-transaction-button").setVisible(this.getTransactionsVisible());this._oKpiScrollCont.setVisible(!!this.getKpis().length);if(this.getKpis().length<3){this._oKpiScrollCont.addStyleClass("sapSuiteUtiKpiLT3")}this._fitKpiTiles()};S.prototype._fitKpiTiles=function(){var t;var e;var i=this.getKpis().length;switch(i){case 0:t="L12 M12 S12";e="L12 M12 S12";break;case 1:t="L9 M12 S12";e="L3 M12 S12";break;case 2:t="L7 M12 S12";e="L5 M12 S12";break;default:t="L6 M12 S12";e="L6 M12 S12"}this._oHeader.setLayoutData(new s({span:t}));this._oKpiScrollCont.setLayoutData(new s({span:e}))};S.prototype.isPhone=function(){return h.system.phone||h.os.ios&&h.system.phone};S.prototype.setTitle=function(t){this.setProperty("title",t,true);this._oMasterPage.setTitle(t);this._oDetailPage.setTitle(t);return this};S.prototype.setName=function(t){this._oHeader.setName(t);return this};S.prototype.setDescription=function(t){this._oHeader.setDescription(t);return this};S.prototype.getName=function(){return this._oHeader.getName()};S.prototype.getDescription=function(){return this._oHeader.getDescription()};S.prototype.setIcon=function(t){this._oHeader.setIcon(t);this.setProperty("icon",t,true);return this};S.prototype.getScrollClass=function(){var t=this.getKpis().length;var e="";if(t==1){e="sapSuiteUtiScOne"}else if(t==2){e="sapSuiteUtiScTwo"}else if(t>2){e="sapSuiteUtiScThree"}return e};S.prototype._navigateToMaster=function(){this._oNavContainer.back()};S.prototype.navigateToDetailWithContent=function(t){if(!this._bDetailPageIsTransitioning){this.removeAllFacetContent();if(Array.isArray(t)){for(var e=0;e<t.length;e++){this.addFacetContent(t[e])}}else{this.addFacetContent(t)}this._oNavContainer.to(this._oDetailPage.getId());this._oDetailPage.scrollTo(0)}return this};S.prototype.navigateToDetail=function(){this._oNavContainer.to(this._oDetailPage.getId());return this};S.prototype.navigateToPage=function(t,e){var i=this;t.attachNavButtonPress(function(t){i._oNavContainer.back()});if(e==undefined||e){var o=this._oMasterPage.getFooter().clone();t.setFooter(o)}this._oNavContainer.addPage(t);this._oNavContainer.to(t.getId());return this};S.prototype.navigateToPageById=function(t){this._oNavContainer.to(t);return this};S.prototype.removeFacet=function(t,e){t.removeDelegate(this._oDelegate);return this.removeAggregation("facets",t,e)};S.prototype.removeAllFacets=function(t){for(var e=0;e<this.getFacets().length;e++){this.getFacets()[e].removeDelegate(this._oDelegate)}return this.removeAllAggregation("facets",t)};S.prototype.getActions=function(){return this._oActionSheet.getButtons()};S.prototype.insertAction=function(t,e){this._oActionSheet.insertButton(t,e);return this};S.prototype.addAction=function(t){this._oActionSheet.addButton(t);return this};S.prototype.removeAction=function(t){return this._oActionSheet.removeButton(t)};S.prototype.removeAllActions=function(){return this._oActionSheet.removeAllButtons()};S.prototype.indexOfAction=function(t){return this._oActionSheet.indexOfButton(t)};S.prototype.destroyActions=function(){this._oActionSheet.destroyButtons();return this};S.prototype.getTransactions=function(){return this._oTransactionSheet.getItems()};S.prototype.addTransaction=function(t){this._oTransactionSheet.addItem(t);return this};S.prototype.insertTransaction=function(t,e){this._oTransactionSheet.insertItem(t,e);return this};S.prototype.removeTransaction=function(t){return this._oTransactionSheet.removeItem(t)};S.prototype.removeAllTransactions=function(){return this._oTransactionSheet.removeAllItems()};S.prototype.indexOfTransaction=function(t){return this._oTransactionSheet.indexOfItem(t)};S.prototype.destroyTransactions=function(){this._oTransactionSheet.destroyItems();return this};S.prototype._callMethodInManagedObject=function(t,e){var i=Array.prototype.slice.call(arguments);if(e==="facets"){i[1]="content";return this._oFacetsGrid[t].apply(this._oFacetsGrid,i.slice(1))}else if(e==="kpis"){i[1]="content";return this._oKpiScrollCont[t].apply(this._oKpiScrollCont,i.slice(1))}else if(e==="facetContent"){i[1]="content";return this._oDetailPage[t].apply(this._oDetailPage,i.slice(1))}else{return _.prototype[t].apply(this,i.slice(1))}};S.prototype.validateAggregation=function(t,e,i){return this._callMethodInManagedObject("validateAggregation",t,e,i)};S.prototype.setAggregation=function(t,e,i){this._callMethodInManagedObject("setAggregation",t,e,i);return this};S.prototype.getAggregation=function(t,e){return this._callMethodInManagedObject("getAggregation",t,e)};S.prototype.indexOfAggregation=function(t,e){return this._callMethodInManagedObject("indexOfAggregation",t,e)};S.prototype.insertAggregation=function(t,e,i,o){this._callMethodInManagedObject("insertAggregation",t,e,i,o);return this};S.prototype.addAggregation=function(t,e,i){this._callMethodInManagedObject("addAggregation",t,e,i);return this};S.prototype.removeAggregation=function(t,e,i){return this._callMethodInManagedObject("removeAggregation",t,e,i)};S.prototype.removeAllAggregation=function(t,e){return this._callMethodInManagedObject("removeAllAggregation",t,e)};S.prototype.destroyAggregation=function(t,e){this._callMethodInManagedObject("destroyAggregation",t,e);return this};S.prototype.getPages=function(){return this._oNavContainer.getPages().slice(2)};S.prototype.insertPage=function(t,e,i){this._oNavContainer.insertPage(t,e+2,i);return this};S.prototype.addPage=function(t,e){this._oNavContainer.addPage(t,e);return this};S.prototype.removePage=function(t,e){return this._oNavContainer.removePage(t,e)};S.prototype.removeAllPages=function(t){var e=this.getPages();for(var i=e.length-1;i>=0;i--){this._oNavContainer.removePage(e[i],t)}return e};S.prototype.indexOfPage=function(t){var e=this._oNavContainer.indexOfPage(t);return e>1?e-2:-1};S.prototype.destroyPages=function(t){var e=this.getPages();for(var i=e.length-1;i>=0;i--){e[i].destroy(t)}return this};S.prototype._createHeaderObject=function(t){o.extend("sap.suite.ui.commons.UnifiedThingInspector.Header",{metadata:{properties:{name:"string",description:"string",icon:"sap.ui.core.URI"},aggregations:{objectHeader:{type:"sap.m.ObjectHeader",multiple:false}}},init:function(){this._oObjectHeader=new y(this.getId()+"-object-header",{condensed:true,backgroundDesign:i.BackgroundDesign.Transparent});this.setAggregation("objectHeader",this._oObjectHeader)},setDescription:function(t){this._oObjectHeader.removeAllAttributes();this._oObjectHeader.addAttribute(new v({text:t}))},setName:function(t){this._oObjectHeader.setTitle(t)},getDescription:function(){if(this._oObjectHeader.getAttributes().length==1){return this._oObjectHeader.getAttributes()[0].getText()}else{return""}},getName:function(){return this._oObjectHeader.getTitle()},setIcon:function(t){var e=!C(this.getIcon(),t);if(e){if(this._oIcon){this._oIcon.destroy();this._oIcon=undefined}if(t){this._oIcon=n.createControlByURI({id:this.getId()+"-icon-image",src:t},I);this._oIcon.addStyleClass("sapSuiteUtiHeaderIconImage");if(this._oIcon instanceof T){this._oIcon.setSize("64px")}}}return this.setProperty("icon",t)},exit:function(){if(this._oIcon){this._oIcon.destroy()}},renderer:function(t,e){t.write("<div");t.writeControlData(e);t.addClass("sapSuiteUtiHeader");t.writeClasses();t.write(">");if(e._oIcon){t.write("<div");t.writeAttribute("id",e.getId()+"-icon");t.addClass("sapSuiteUtiHeaderIcon");t.writeClasses();t.write(">");t.renderControl(e._oIcon);t.write("</div>")}t.write("<div");t.writeAttribute("id",e.getId()+"-content");if(e._oIcon){t.addClass("sapSuiteUtiHeaderContentWithIcon")}else{t.addClass("sapSuiteUtiHeaderContent")}t.writeClasses();t.write(">");t.renderControl(e.getObjectHeader());t.write("</div>");t.write("</div>")}});return new S.Header(t)};S.prototype._isMasterPage=function(){return this._oNavContainer.getCurrentPage().getId().indexOf("-master-page")!=-1};S.prototype.onkeydown=function(t){switch(t.keyCode){case b.S:if((this._altKey||t.altKey)&&this.getConfigurationVisible()){this.$().find("button[id*='-settings-button']:visible").focus();t.stopPropagation()}break;case b.O:if((this._altKey||t.altKey)&&this.getTransactionsVisible()){this.$().find("button[id*='-transaction-button']:visible").focus();t.stopPropagation()}break;case b.K:if((this._altKey||t.altKey)&&this.getActionsVisible()){this.$().find("button[id*='-action-button']:visible").focus();t.stopPropagation()}break;case b.ALT:this._altKey=true;break;default:break}};S.prototype.onkeyup=function(t){if(b.ALT==t.keyCode){this._altKey=false}};return S});