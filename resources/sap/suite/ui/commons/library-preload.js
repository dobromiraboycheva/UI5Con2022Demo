//@ui5-bundle sap/suite/ui/commons/library-preload.js
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/AriaProperties",["./library","sap/ui/core/Element"],function(e,a){"use strict";var r=a.extend("sap.suite.ui.commons.AriaProperties",{metadata:{library:"sap.suite.ui.commons",properties:{label:{type:"string",defaultValue:null},labelledBy:{type:"string",defaultValue:null},describedBy:{type:"string",defaultValue:null},role:{type:"string",defaultValue:null},hasPopup:{type:"string",defaultValue:null}}}});r.writeAriaProperties=function(e,a,r){var t=r&&r.getLabel()||a.label;if(t){e.attr("aria-label",t)}var l=r&&r.getLabelledBy()||a.labelledBy;if(l){e.attr("aria-labelledby",l)}var i=r&&r.getDescribedBy()||a.describedBy;if(i){e.attr("aria-describedby",i)}var u=r&&r.getRole()||a.role;if(u){e.attr("role",u)}var s=r&&r.getHasPopup()||a.hasPopup;if(s){e.attr("aria-haspopup",s)}};return r});
sap.ui.predefine("sap/suite/ui/commons/CalculationBuilder",["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","./CalculationBuilderItem","./CalculationBuilderExpression","./CalculationBuilderInput","./CalculationBuilderFunction","sap/m/OverflowToolbar","sap/m/OverflowToolbarToggleButton","sap/m/OverflowToolbarButton","sap/m/ToolbarSpacer","sap/m/Title","sap/m/MessageBox","sap/base/Log","sap/base/util/uid","sap/ui/core/library","sap/m/library","sap/suite/ui/commons/util/FullScreenUtil"],function(t,e,i,r,o,n,s,a,l,u,p,d,c,_,h,f,g,y){"use strict";var E=g.ButtonType;var T=f.TitleLevel;var b=Object.freeze({SHOW_EXPRESSION:"sap-icon://notification-2",EXPAND_VARIABLE:"sap-icon://disconnected",FULL_SCREEN:"sap-icon://full-screen",EXIT_FULL_SCREEN:"sap-icon://exit-full-screen"});var m=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var I=e.CalculationBuilderOperatorType,x=e.CalculationBuilderLogicalOperatorType,C=e.CalculationBuilderComparisonOperatorType,B=e.CalculationBuilderItemType,S=e.CalculationBuilderFunctionType,L=e.CalculationBuilderLayoutType,w=e.CalculationBuilderValidationMode;var A=new RegExp(String.fromCharCode(160),"g");var O={abs:{key:"ABS",title:"ABS - Absolute Value",allowed:true},round:{key:"Round",title:"Round",template:["",",",""],allowed:true},roundup:{key:"RoundUp",title:"Round Up",template:["",",",""],allowed:true},rounddown:{key:"RoundDown",title:"Round Down",template:["",",",""],allowed:true},sqrt:{key:"SQRT",title:"SQRT",allowed:true},case:{key:"Case",title:"Case",description:'CASE ( "When" Expression "Then" Expression "Else" Expression )',template:["",",","",",",""]},ndiv0:{key:"NDIV0",title:"NDIV0"},nodim:{key:"NODIM",title:"NODIM",description:"NODIM ( Variable )"},sumct:{key:"SUMCT",title:"SUMCT",description:"SUMGT ( Variable )"},sumgt:{key:"SUMGT",title:"SUMGT",description:"SUMGT ( Variable )"},sumrt:{key:"SUMRT",title:"SUMRT",description:"SUMRT ( Variable )"}};var V=i.extend("sap.suite.ui.commons.CalculationBuilder",{metadata:{library:"sap.suite.ui.commons",properties:{expression:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},showToolbar:{type:"boolean",group:"Misc",defaultValue:true},wrapItemsInExpression:{type:"boolean",group:"Misc",defaultValue:true},layoutType:{type:"string",group:"Misc",defaultValue:"Default"},showInputToolbar:{type:"boolean",group:"Misc",defaultValue:false},readOnly:{type:"boolean",group:"Misc",defaultValue:false},allowComparisonOperators:{type:"boolean",group:"Misc",defaultValue:true},allowLogicalOperators:{type:"boolean",group:"Misc",defaultValue:true},allowSuggestions:{type:"boolean",group:"Misc",defaultValue:true},allowStringConstants:{type:"boolean",group:"Misc",defaultValue:false},allowStringLiterals:{type:"boolean",group:"Misc",defaultValue:false},validationMode:{type:"sap.suite.ui.commons.CalculationBuilderValidationMode",group:"Misc",defaultValue:w.LiveChange},disabledDefaultTokens:{type:"string",group:"Misc",defaultValue:""}},defaultAggregation:"items",aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"item",bindable:"bindable",forwarding:{idSuffix:"-expression",aggregation:"items",forwardBinding:true}},variables:{type:"sap.suite.ui.commons.CalculationBuilderVariable",multiple:true,singularName:"Variable",forwarding:{idSuffix:"-expression",aggregation:"variables",forwardBinding:true}},functions:{type:"sap.suite.ui.commons.CalculationBuilderFunction",multiple:true,singularName:"Function",forwarding:{idSuffix:"-expression",aggregation:"functions",forwardBinding:true}},operators:{type:"sap.ui.core.Item",multiple:true,singularName:"Operator",forwarding:{idSuffix:"-expression",aggregation:"operators",forwardBinding:true}},groups:{type:"sap.suite.ui.commons.CalculationBuilderGroup",multiple:true,singularName:"Group",forwarding:{idSuffix:"-expression",aggregation:"groups",forwardBinding:true}}},events:{validateFunction:{parameters:{definition:"object",customFunction:"object",result:"sap.suite.ui.commons.CalculationBuilderValidationResult"}},change:{},afterValidation:{}}},renderer:function(t,e){var i=e.getWrapItemsInExpression()?" sapCalculationBuilderWrapItems ":"",r=e.getLayoutType()===L.TextualOnly,o=e._bShowInput||r,n=e._isExpressionVisible(),s=e._isInputVisible(),a=e.getReadOnly();t.write("<div");t.writeControlData(e);t.addClass("sapCalculationBuilder");if(e.getReadOnly()){t.addClass("sapCalculationBuilderReadOnly")}t.writeClasses(e);t.write(">");if(e.getShowToolbar()&&!r){t.renderControl(e.getToolbar())}if(n){e._oExpressionBuilder._bReadOnly=a;t.write('<div class="sapCalculationBuilderInsideWrapper'+i+'">');t.renderControl(e._oExpressionBuilder);t.write("</div>")}if(n&&s){t.write('<div class="sapCalculationBuilderDelimiterLine"></div>')}if(s){e._oInput._bReadOnly=a||e.getLayoutType()===L.VisualTextualReadOnly;t.write("<div");t.addClass("sapCalculationBuilderInputOuterWrapper");if(e._oInput._bReadOnly){t.addClass("sapCalculationBuilderReadOnly")}if(e.getLayoutType()===L.Default||e.getLayoutType()===L.VisualTextualReadOnly){t.addClass("sapCalculationBuilderInputOuterWrapperMargin")}if(!o){t.addClass("sapCalculationBuilderDisplayNone")}t.writeClasses();t.write(">");t.renderControl(e._oInput);t.write("</div>")}t.write("</div>")}});V.prototype.init=function(){this._mDisabledTokens={};this._bShowInput=true;this._oFullScreenContainer=null;this._bIsFullScreen=false;this._oExpressionBuilder=new o(this.getId()+"-expression",{change:function(){this._expressionChanged();this.fireChange()}.bind(this)});this.addDependent(this._oExpressionBuilder);this._oInput=new n(this.getId()+"-input",{change:function(t){var e=t.getParameter("value"),i=this._oInput._stringToItems(e),r=t.getParameter("position");this._oExpressionBuilder._smartRender(i);this._setExpression(this._oInput._convertEmptyHashes(e));if(this.getValidationMode()!==w.FocusOut){this._validateInput(e,r)}else{this._oInput._recreateText({text:e,position:r,errors:this._oExpressionBuilder._aErrors})}this._enableOrDisableExpandAllButton();this.fireChange()}.bind(this)});this.addDependent(this._oInput)};V.prototype._expressionChanged=function(){var t="";this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax();t=this._oInput._itemsToString({items:this._oExpressionBuilder.getItems(),errors:this._oExpressionBuilder._aErrors});this._setExpression(t);this.fireAfterValidation();this._oInput._displayError(this._oExpressionBuilder._aErrors.length!==0);this._oExpressionBuilder._printErrors();this._enableOrDisableExpandAllButton()};V.prototype.clone=function(t){var e=i.prototype.clone.apply(this,[t,undefined,{cloneChildren:false,cloneBindings:true}]);return e};V.prototype.onBeforeRendering=function(){this._resetItems();this._createToolbar();this._oExpressionBuilder._createVariablesMap();this._oInput._aVariables=this.getVariables();if(this._bExpressionSet){this._oExpressionBuilder._setItems(this._oInput._stringToItems(this._sExpressionDirectValue))}this._bExpressionSet=false;this._sExpressionDirectValue="";if(!this._isExpressionVisible()){this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax()}this._bRendered=false};V.prototype.onAfterRendering=function(){this._setExpression(this._oInput._itemsToString({items:this._oExpressionBuilder.getItems(),errors:this._oExpressionBuilder._aErrors}));this._bRendered=true;this._oInput._displayError(this._oExpressionBuilder._aErrors.length>0)};V.prototype.exit=function(){if(this._oFullScreenUtil){this._oFullScreenUtil.cleanUpFullScreen(this)}};V.prototype.getToolbar=function(){return this._oToolbar};V.prototype.getInputToolbar=function(){return this._oInput&&this._oInput._oInputToolbar};V.prototype.validateParts=function(t){t=t||{};return this._oExpressionBuilder._validateSyntax({items:t.items,from:t.from,to:t.to})};V.prototype.appendError=function(t){this._oExpressionBuilder._aErrors.push(t)};V.prototype.getErrors=function(){return this._oExpressionBuilder._aErrors};V.prototype.validate=function(){this._resetItems();this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax();this.updateErrorsDisplay()};V.prototype.updateErrorsDisplay=function(){var t=this._oExpressionBuilder._aErrors;if(this._isInputVisible()){this._oInput._recreateText({errors:t});this._oInput._displayError(t.length>0)}if(this._isExpressionVisible()){this._oExpressionBuilder._printErrors()}};V.prototype.allowFunction=function(t,e){if(!t){return}var i=O[t.toLowerCase()];if(i){i.allowed=e}};V.prototype.updateOrCreateItem=function(t){this._oExpressionBuilder._updateOrCreateItem({key:t})};V.prototype.getErrors=function(){return this._oExpressionBuilder&&this._oExpressionBuilder._aErrors};V.prototype.getAllowStringConstants=function(){_.warning("This function is deprecated, please use getAllowStringLiterals instead");return this.getAllowStringLiterals()};V.prototype.setAllowStringConstants=function(t){_.warning("This function is deprecated, please use setAllowStringLiterals instead");return this.setAllowStringLiterals(t)};V.prototype._resetItems=function(){this.getItems().forEach(function(t){t._reset()})};V.prototype._validateInput=function(t,e){this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax();this.fireAfterValidation();this._oInput._recreateText({text:t,position:e,errors:this._oExpressionBuilder._aErrors});this._oExpressionBuilder._printErrors();this._oInput._displayError(this._oExpressionBuilder._aErrors.length>0)};V.prototype._findInArray=function(t,e,i){return e.some(function(e){var r=i?e["get"+i]():e;return r.toLowerCase()===t})};V.prototype._findInItems=function(t,e){t=(t||"").toLowerCase();return e.some(function(e){return e.getKey().toLowerCase()===t})};V.prototype._createErrorText=function(e,i){e=e||this.getErrors();var r="",o=0,n=5;for(var s=0;s<e.length&&o<n;s++){if(e[s].index<0||!t.isNumeric(e[s].index)||!i){o++;r+=e[s].title+"\n"}}return r};V.prototype._getFunctionMap=function(){return O};V.prototype._getFunctionDefinition=function(e){e=(e||"").toLowerCase();return O[e]||t.grep(this.getFunctions(),function(t){return t.getKey().toLowerCase()===e})[0]};V.prototype._getFunctionDescription=function(t){var e;if(t.description){return t.description}e=m.getText("CALCULATION_BUILDER_EXPRESSION_TITLE");if(t.template){var i=(t.key||"")+" ( ";t.template.forEach(function(t){i+=(t?t:e)+" "});return i+")"}return(t.key||"")+" ( "+e+" )"};V.prototype._getFunctionTemplateItems=function(t){if(!t){return[]}var e=t instanceof s?B.CustomFunction:B.Function;return e===B.Function?t.template||[]:this._convertToTemplate(t.getItems())};V.prototype._getFunctionAllowParametersCount=function(t){var e=this._getFunctionTemplateItems(this._getFunctionDefinition(t)),i=e.join("");return(i.match(/,/g)||[]).length+1};V.prototype._convertToTemplate=function(t){return t.map(function(t){return t.getKey()})};V.prototype._isOperator=function(t,e){e=e!==false;t=(t||"").toLowerCase();if(!this._isTokenAllowed(t)){return false}return this._findInArray(t,Object.keys(I))||e&&this.getAllowLogicalOperators()&&this._findInArray(t,Object.keys(x))||this.getAllowComparisonOperators()&&this._findInArray(t,Object.keys(C))};V.prototype._isFunction=function(t){return this._isTokenAllowed(t)&&this._findInArray(t,Object.keys(S))};V.prototype._isCustomOperator=function(t){return this._findInItems(t,this.getOperators())};V.prototype._isStringLiteral=function(t){return t&&t.length>=2&&t[0]==='"'&&t[t.length-1]==='"'};V.prototype._getType=function(t){t=(t||"").toLowerCase();if(!t){return B.Empty}if(this._isOperator(t)){return B.Operator}if(this._isCustomOperator(t)){return B.CustomOperator}if(this._findInArray(t,this.getVariables(),"Key")){return B.Variable}if(this._isFunction(t)){return B.Function}if(this._findInArray(t,this.getFunctions(),"Key")){return B.CustomFunction}if(this.getAllowStringLiterals()&&this._isStringLiteral(t)){return B.Literal}if(!isNaN(t)){return B.Literal}return B.Error};V.prototype._createToolbar=function(){if(this._oToolbar){this._oShowInputButton&&this._oShowInputButton.setVisible(this._isInputVisible());this._oToolbarTitle.setText(this.getTitle());this._oToolbarTitle.setVisible(!!this.getTitle());return}this._oToolbarTitle=new d({titleStyle:T.H4,text:this.getTitle(),visible:!!this.getTitle()});this._oToolbar=new a(this.getId()+"-toolbar",{content:[this._oToolbarTitle,new p]}).addStyleClass("sapCalculationBuilderToolbar");this._oShowInputButton=new l({type:E.Transparent,icon:b.SHOW_EXPRESSION,tooltip:m.getText("CALCULATION_BUILDER_TOGGLE_EXPRESSION_BUTTON"),pressed:true,press:function(){this.$().find(".sapCalculationBuilderInputOuterWrapper").toggle();this._bShowInput=!this._bShowInput}.bind(this)});this._oToolbar.addContent(this._oShowInputButton);this._oToolbar.addContent(this._getExpandAllVariablesButton());this._oToolbar.addContent(new l({type:E.Transparent,icon:b.FULL_SCREEN,tooltip:m.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"),press:function(t){var e=t.getSource();this._toggleFullScreen(e);e.setTooltip(this._bIsFullScreen?m.getText("CALCULATION_BUILDER_EXIT_FULL_SCREEN_BUTTON"):m.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"));e.setIcon(this._bIsFullScreen?b.EXIT_FULL_SCREEN:b.FULL_SCREEN)}.bind(this)}));this.addDependent(this._oToolbar)};V.prototype._getExpandAllVariablesButton=function(){if(!this._oExpandAllVariablesButton){this._oExpandAllVariablesButton=new u({type:E.Transparent,icon:b.EXPAND_VARIABLE,tooltip:m.getText("CALCULATION_BUILDER_EXPAND_ALL_BUTTON"),press:function(t){c.show(m.getText("CALCULATION_BUILDER_EXPAND_ALL_MESSAGE_TEXT"),{icon:c.Icon.WARNING,title:m.getText("CALCULATION_BUILDER_EXPAND_ALL_MESSAGE_TITLE"),actions:[c.Action.OK,c.Action.CANCEL],onClose:function(t){if(t===c.Action.OK){this._oExpressionBuilder._expandAllVariables()}}.bind(this)})}.bind(this)})}return this._oExpandAllVariablesButton};V.prototype._enableOrDisableExpandAllButton=function(){var t=this.getReadOnly()||this.getLayoutType()===L.VisualTextualReadOnly,e=this._getExpandAllVariablesButton().$();if(e[0]){this._getExpandAllVariablesButton().setEnabled(!t&&this.getItems().some(function(t){return t._isVariable()&&t.isExpandable()}))}};V.prototype.setExpression=function(t){this.setProperty("expression",t);this._sExpressionDirectValue=t;if(this._bRendered||this._sExpressionDirectValue){this._bExpressionSet=true}this._oInput._setupAriaLabel();return this};V.prototype.getExpression=function(){if(this._bExpressionSet){return this._sExpressionDirectValue}return this._oInput._itemsToString({createInputText:false,items:this.getItems()})};V.prototype._setExpression=function(t){if(t){t=t.replace(A," ")}this.setProperty("expression",t,true);this._oInput._setupAriaLabel()};V.prototype._toggleFullScreen=function(t){this._oFullScreenButton=t;this._bIsFullScreen=!this._bIsFullScreen;if(!this._oFullScreenUtil){this._oFullScreenUtil=y}this._oFullScreenUtil.toggleFullScreen(this,this._bIsFullScreen,this._oFullScreenButton,this._toggleFullScreen)};V.prototype._getGroupMap=function(){return this._oExpressionBuilder._mGroups};V.prototype._isExpressionVisible=function(){return this.getLayoutType()!==L.TextualOnly};V.prototype._isInputVisible=function(){return this.getLayoutType()!==L.VisualOnly};V.prototype._createFunctionObject=function(t){if(!t){return null}return t instanceof s?{key:t.getKey(),title:t._getLabel(),description:this._getFunctionDescription({key:t.getKey(),description:t.getDescription(),template:this._convertToTemplate(t.getItems())}),type:B.CustomFunction,functionObject:t}:{key:t.key,title:t.title,description:this._getFunctionDescription(t),type:B.Function,functionObject:t}};V.prototype._getAllFunctions=function(){var t=[];Object.keys(O).forEach(function(e){if(O[e].allowed&&this._isTokenAllowed(e)){t.push(this._createFunctionObject(O[e]))}}.bind(this));this.getFunctions().forEach(function(e){t.push(this._createFunctionObject(e))}.bind(this));return t.sort(function(t,e){if(t.title<e.title){return-1}else{return 1}})};V.prototype._isTokenAllowed=function(t){return!this._mDisabledTokens[(t||"").toLowerCase()]};V.prototype.setDisabledDefaultTokens=function(t){this._mDisabledTokens={};this.setProperty("disabledDefaultTokens",t);if(t){var e=t.split(";");e.forEach(function(t){if(t){this._mDisabledTokens[t.toLowerCase()]=1}}.bind(this))}return this};return V});
sap.ui.predefine("sap/suite/ui/commons/CalculationBuilderExpression",["sap/ui/thirdparty/jquery","./library","./CalculationBuilderItem","sap/ui/core/Control","sap/ui/core/Popup","sap/ui/core/delegate/ItemNavigation","sap/m/MessageBox","sap/m/OverflowToolbar","sap/m/OverflowToolbarToggleButton","sap/m/OverflowToolbarButton","sap/m/ToolbarSpacer","sap/m/Title","sap/m/Button","sap/m/FlexBox","sap/m/HBox","sap/m/VBox","sap/m/library","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/StepInput","sap/m/Input","sap/m/Page","sap/m/List","sap/m/StandardListItem","sap/m/NavContainer","sap/m/SearchField","sap/m/Label","sap/m/Panel","sap/m/ResponsivePopover","sap/m/Toolbar","sap/m/MessageStrip","./CalculationBuilderValidationResult","sap/suite/ui/commons/ControlProxy","sap/ui/core/Icon","sap/ui/core/library","sap/ui/thirdparty/jqueryui/jquery-ui-core","sap/ui/thirdparty/jqueryui/jquery-ui-widget","sap/ui/thirdparty/jqueryui/jquery-ui-mouse","sap/ui/thirdparty/jqueryui/jquery-ui-draggable","sap/ui/thirdparty/jqueryui/jquery-ui-droppable","sap/ui/thirdparty/jqueryui/jquery-ui-selectable"],function(e,t,i,r,n,s,a,o,l,u,p,c,d,_,h,g,f,I,m,C,E,T,v,A,L,y,B,R,b,O,S,N,x,P,D){"use strict";var U=f.PlacementType;var w=f.ListType;var F=f.ListMode;var K=f.InputType;var V=f.FlexAlignItems;var G=f.FlexRendertype;var M=f.ButtonType;var k=D.TextAlign;var j=D.ValueState;var Y=t.CalculationBuilderItemType,$=t.CalculationBuilderOperatorType,X=t.CalculationBuilderComparisonOperatorType,q=t.CalculationBuilderLogicalOperatorType,H=t.CalculationBuilderLayoutType,z=f.FlexDirection;var W=Object.freeze({PAGE_MAIN:"-pagemain",PAGE_OPERATORS:"-pageoperators",PAGE_VARIABLE:"-pagevariable",PAGE_FUNCTIONS:"-pagefunctions",LABEL_LITERALS:"-literalInput-label",INPUT_LITERALS:"-literalInput-field"});var Q=Object.freeze({OPERATORS_CATEGORY:"sap-icon://attachment-html",LITERALS_CATEGORY:"sap-icon://grid",VARIABLES_CATEGORY:"sap-icon://notes",FUNCTIONS_CATEGORY:"sap-icon://chalkboard",DELETE:"sap-icon://delete"});var J=Object.freeze({KEY_PREVIOUS:"previous",KEY_NEXT:"next",MOUSE:"mouse"});var Z="##DEFAULT##";var ee=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var te=r.extend("sap.suite.ui.commons.CalculationBuilderExpression",{metadata:{library:"sap.suite.ui.commons",defaultAggregation:"items",aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"item",bindable:"bindable"},variables:{type:"sap.suite.ui.commons.CalculationBuilderVariable",multiple:true,singularName:"Variable"},functions:{type:"sap.suite.ui.commons.CalculationBuilderFunction",multiple:true,singularName:"Function"},operators:{type:"sap.ui.core.Item",multiple:true,singularName:"operator"},groups:{type:"sap.suite.ui.commons.CalculationBuilderGroup",multiple:true,singularName:"Group"}},events:{change:{}}},renderer:function(e,t){e.write("<div");e.writeControlData(t);e.addClass("sapCalculationBuilderInner");e.writeClasses(t);e.write(">");e.write(t._renderDelimiter(0));t.getItems().forEach(function(i,r){i._iIndex=r;i._bReadOnly=t._bReadOnly;e.renderControl(i);e.write(t._renderDelimiter(r+1))},this);if(!t._bReadOnly){e.renderControl(t._getNewItem())}e.write('<div class="sapCalculationBuilderSelected"></div>');e.write("</div>");e.write('<div id="'+t.getId()+'-erroricon"  class="sapCalculationBuilderExpressionErrorIcon">');e.renderControl(t._getErrorIcon());e.write("</div>")}});te.prototype.init=function(){this._aErrors=[];this._bAreSelectedItemsDeleting=false;this._bDragging=false;this._bIsCalculationBuilderRendering=false};te.prototype._renderDelimiter=function(e){var t="";t+='<div class="sapCalculationBuilderDelimiter sapCalculationBuilderDroppable" index="'+e+'">';t+='<div class="sapCalculationBuilderDroppableLine"></div>';t+='<div class="sapCalculationBuilderDroppableCircle"></div>';t+='<div class="sapCalculationBuilderDelimiterNewButton">';t+='<span role="presentation" aria-hidden="true" data-sap-ui-icon-content=""'+'class="sapUiIcon sapUiIconMirrorInRTL sapCalculationBuilderDelimiterNewButtonIcon sapCalculationBuilderExpressionSAPFont"></span>';t+="</div>";t+="</div>";return t};te.prototype.onBeforeRendering=function(){this._reset();this._createPopup();this.getParent()._enableOrDisableExpandAllButton();this._aErrors=this._validateSyntax();this._fireAfterValidation();this._bIsCalculationBuilderRendering=true;this._bRendered=false};te.prototype.onAfterRendering=function(){this._bIsCalculationBuilderRendering=false;if(!this._bReadOnly){this._setupDroppable();this._setupSelectable();this._setupNewButtonEvents()}this._setupKeyboard();this._bRendered=true;var e=this.getParent();if(e._bRendered){e._setExpression(e._oInput._itemsToString({items:this.getItems(),errors:this._aErrors}));e._oInput._displayError(this._aErrors.length!==0)}};te.prototype.onsapfocusleave=function(){if(!this._bAreSelectedItemsDeleting){this._deselect()}};te.prototype.onsapenter=function(e){this._handleEnter(e)};te.prototype.onsapspace=function(t){if(e(t.target).hasClass("sapCalculationBuilderItem")){this._handleSpace(t)}};te.prototype.onsappreviousmodifiers=function(e){if(e.ctrlKey){this._handleCtrlPrevious(e)}};te.prototype.onsapnextmodifiers=function(e){if(e.ctrlKey){this._handleCtrlNext(e)}};te.prototype.onsapdelete=function(e){this._handleDelete(e)};te.prototype.exit=function(){if(this._oPopover){this._oPopover.destroy()}if(this._oItemNavigation){this.removeDelegate(this._oItemNavigation);this._oItemNavigation.destroy()}if(this._oErrorIcon){this._oErrorIcon.destroy();this._oErrorIcon=null}};te.prototype._getErrorIcon=function(){if(!this._oErrorIcon){this._oErrorIcon=new P({src:"sap-icon://message-error",useIconTooltip:false,size:"20px"})}return this._oErrorIcon};te.prototype._createPopup=function(){var e={footerButtons:[]};this._createPopoverLayout(e);this._createPopoverFunctionsItems(e);this._createPopoverOperatorsItems(e);this._createPopoverNavContainer(e);this._createPopover(e)};te.prototype._reset=function(){this.getItems().forEach(function(e){e._reset()});if(this._oPopover){this._oPopover.destroy();this._oPopover=null}};te.prototype._createPopoverLayout=function(e){var t=function(e){return new d({text:e,press:this._updateOrCreateItem.bind(this,{type:Y.Operator,key:e})}).addStyleClass("sapUiTinyMarginEnd")}.bind(this);var i=new h({renderType:G.Div,width:"100%"});i.addStyleClass("sapCalculationBuilderItemPopupOperators");i.addStyleClass("sapCalculationBuilderItemPopupOptionItem");Object.keys($).forEach(function(e){if(this.getParent()._isTokenAllowed(e)){var r=t($[e]);if(e===$[","]){this._attachAriaLabelToButton(r,ee.getText("CALCULATION_BUILDER_COMMA_ARIA_LABEL"))}else if(e===$["-"]){this._attachAriaLabelToButton(r,ee.getText("CALCULATION_BUILDER_MINUS_ARIA_LABEL"))}i.addItem(r)}}.bind(this));var r=this._createPopoverLiteralLabelAndInput(e);var n=new g({items:[i,r],alignItems:"Start"});n.addStyleClass("sapCalculationBuilderItemPopupOperatorsAndInputWrapper");e.layout=n.getItems().length>0?n:null};te.prototype._createPopoverLiteralLabelAndInput=function(e){var t=new B({id:this.getId()+W.LABEL_LITERALS,text:ee.getText("CALCULATION_BUILDER_LITERAL_INPUT_LABEL")});var i;if(this.getParent().getAllowStringLiterals()){i=new E({id:this.getId()+W.INPUT_LITERALS,width:"100%",placeholder:ee.getText("CALCULATION_BUILDER_ADD_LITERAL_FIELD_PLACEHOLDER_ANY_STRING"),valueStateText:ee.getText("CALCULATION_BUILDER_ADD_LITERAL_FIELD_PLACEHOLDER_ERROR"),liveChange:function(t){var i=t.getSource(),r=t.getParameter("value"),n=r.indexOf('"')===-1;i.setValueState(n?j.None:j.Error);e.footerButtons.okButton.setEnabled(n)},submit:function(e){this._submitLiteralInput(i)}.bind(this)})}else{i=new C({width:"100%",placeholder:ee.getText("CALCULATION_BUILDER_ADD_LITERAL_FIELD_PLACEHOLDER"),textAlign:k.Right,valueStateText:ee.getText("CALCULATION_BUILDER_ADD_LITERAL_FIELD_ERROR_TEXT"),displayValuePrecision:3,change:function(){e.footerButtons.okButton.setEnabled(true)}});if(i._getInput){var r=i._getInput();if(r){r.attachSubmit(function(e){this._submitLiteralInput(i)},this)}}}i.addAriaLabelledBy(t);e.literalInput=i;var n=new g({renderType:G.Div,items:[t,i],width:"100%"});n.addStyleClass("sapCalculationBuilderItemPopupOptionItem");n.addStyleClass("sapCalculationBuilderItemPopupLiteralLabelAndInput");return n};te.prototype._createPopoverVariablesItems=function(e){if(!e){return[]}var t=[];e.forEach(function(e){var i=new A({title:e._getLabel()});i._calculationBuilderKey=e.getKey();t.push(i)},this);t=t.sort(function(e,t){return e.getTitle().localeCompare(t.getTitle())});var i=new v({mode:F.SingleSelectMaster,selectionChange:function(e){this._updateOrCreateItem({type:Y.Variable,key:e.getParameter("listItem")._calculationBuilderKey})}.bind(this),items:t});this._oSearchField=new y({placeholder:ee.getText("CALCULATION_BUILDER_SEARCH_VARIABLE"),liveChange:function(e){var r=e.getSource().getValue();if(r||r===""){i.removeAllItems();t.forEach(function(e){if(e.getTitle().toLowerCase().indexOf(r.toLowerCase())!==-1){i.addItem(e)}})}}});this._aVariableLists.push(i);return[this._oSearchField,i]};te.prototype._createPopoverFunctionsItems=function(e){var t=this,i=this.getParent();var r=function(e){return new A({title:e.title,description:e.description,type:w.Active,customData:[{key:"functionKey",value:e.key}],press:e.press})};e.functionList=new v({mode:F.SingleSelectMaster,itemPress:function(){this.getSelectedItem().firePress()}});i._getAllFunctions().forEach(function(i){e.functionList.addItem(r({key:i.key,title:i.title,description:i.description,press:t._updateOrCreateItem.bind(t,{key:i.key,type:i.type,functionObject:i.functionObject})}))})};te.prototype._createPopoverOperatorsItems=function(e){var t=this.getParent();var i=function(e,i){var r=[];Object.keys(e).forEach(function(n){var s,a,o=e[n];if(t._isTokenAllowed(n)){if(typeof o==="object"){a=o.getText();s=o.getKey()}else{s=a=o}var l=new d({text:a,press:this._updateOrCreateItem.bind(this,{type:i,key:s})}).addStyleClass("sapCalculationBuilderPopoverOperatorsButton").addStyleClass("sapUiTinyMarginEnd");if(n===X["!="]){this._attachAriaLabelToButton(l,ee.getText("CALCULATION_BUILDER_NOT_EQUAL_ARIA_LABEL"))}r.push(l)}}.bind(this));return r}.bind(this);var r=function(e,t,r){var n=i(t,r);if(n.length>0){return new R({content:[new B({width:"100%",text:e}).addStyleClass("sapUiTinyMarginBottom"),n]})}return null};e.operatorsItems=[];if(this.getParent().getAllowComparisonOperators()){var n=r(ee.getText("CALCULATION_BUILDER_COMPARISON_TITLE_SELECT"),X,Y.Operator);n&&e.operatorsItems.push(n)}if(this.getParent().getAllowLogicalOperators()){var s=r(ee.getText("CALCULATION_BUILDER_LOGICAL_TITLE_SELECT"),q,Y.Operator);s&&e.operatorsItems.push(s)}var a=this.getParent().getOperators();if(a.length>0){e.operatorsItems.push(r(ee.getText("CALCULATION_BUILDER_OPERATORS_TITLE"),a,Y.CustomOperator))}};te.prototype._createPopoverNavContainer=function(e){var t=function(e){var t=o.getPage(e);o.to(t)};var i=function(){var e=new S({type:"Error",showIcon:true}).addStyleClass("sapUiTinyMarginBegin sapUiTinyMarginEnd sapUiTinyMarginTop");this._aStrips.push(e);return e}.bind(this);this._aStrips=[];var r=[];var n=this._createPopoverVariablesItems(this._mGroups[Z]);if(n.length>0){r.push(new A({title:ee.getText("CALCULATION_BUILDER_VARIABLES_TITLE"),description:ee.getText("CALCULATION_BUILDER_VARIABLES_CATEGORY_DESCRIPTION"),wrapping:true,icon:Q.VARIABLES_CATEGORY,press:t.bind(this,this.getId()+W.PAGE_VARIABLE),type:w.Active}))}var s=e.functionList.getItems();if(s.length>0){r.push(new A({title:ee.getText("CALCULATION_BUILDER_FUNCTIONS_TITLE"),type:w.Active,description:ee.getText("CALCULATION_BUILDER_FUNCTIONS_CATEGORY_DESCRIPTION"),wrapping:true,icon:Q.FUNCTIONS_CATEGORY,press:t.bind(this,this.getId()+W.PAGE_FUNCTIONS)}))}if(e.operatorsItems.length>0){r.unshift(new A({title:ee.getText("CALCULATION_BUILDER_OPERATORS_TITLE"),type:w.Active,description:ee.getText("CALCULATION_BUILDER_OPERATORS_CATEGORY_DESCRIPTION"),wrapping:true,icon:Q.OPERATORS_CATEGORY,press:t.bind(this,this.getId()+W.PAGE_OPERATORS)}))}this.getGroups().forEach(function(e){r.push(new A({title:e._getTitle(),type:w.Active,description:e.getDescription(),icon:e.getIcon(),press:t.bind(this,this.getId()+e.getKey())}))}.bind(this));var a=new T({id:this.getId()+W.PAGE_MAIN,title:ee.getText("CALCULATION_BUILDER_DIALOG_TITLE"),content:[i(),e.layout,new _({direction:z.Column,items:[new v({items:r})]}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop").addStyleClass("sapCalculationBuilderNavMainPage")]});a.setFooter(this._getPageFooter(a.getId(),e));var o=new L({defaultTransitionName:"show",navigate:function(t){var i=t.getParameters().to;i.setFooter(this._getPageFooter(i.getId(),e))}.bind(this),pages:[a]});if(e.operatorsItems.length>0){o.addPage(new T({id:this.getId()+W.PAGE_OPERATORS,content:[i(),new _({direction:z.Column,items:[e.operatorsItems]}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop")],showNavButton:true,title:ee.getText("CALCULATION_BUILDER_OPERATORS_PAGE_TITLE"),navButtonPress:t.bind(this,this.getId()+W.PAGE_MAIN)}))}if(n.length>0){o.addPage(new T({id:this.getId()+W.PAGE_VARIABLE,content:[i(),new _({direction:z.Column,items:n}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop")],showNavButton:true,title:ee.getText("CALCULATION_BUILDER_VARIABLES_PAGE_TITLE"),navButtonPress:t.bind(this,this.getId()+W.PAGE_MAIN)}))}if(s.length>0){o.addPage(new T({id:this.getId()+W.PAGE_FUNCTIONS,content:[i(),new _({direction:z.Column,items:[e.functionList]}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop")],showNavButton:true,title:ee.getText("CALCULATION_BUILDER_FUNCTIONS_PAGE_TITLE"),navButtonPress:t.bind(this,this.getId()+W.PAGE_MAIN)}))}this.getGroups().forEach(function(e){var r=new T({id:this.getId()+e.getKey(),showNavButton:true,title:e._getTitle(),navButtonPress:t.bind(this,this.getId()+W.PAGE_MAIN),content:i()});var n=e.getCustomView();if(n){var s=new x;s.setAssociation("control",n);r.addContent(s)}else{r.addContent(new _({direction:z.Column,items:this._createPopoverVariablesItems(this._mGroups[e.getKey()])}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop"))}o.addPage(r)}.bind(this));e.navContainer=o};te.prototype._callFunctionFireSelection=function(e){this.getGroups().forEach(function(t){if(t.getCustomView()){t.fireSetSelection({key:e})}})};te.prototype._clearVariableLists=function(){this._aVariableLists.forEach(function(e){var t=e.getSelectedItem();if(t){e.setSelectedItem(t,false)}});this._callFunctionFireSelection()};te.prototype._setVariableListSelection=function(e){for(var t=0;t<this._aVariableLists.length;t++){var i=this._aVariableLists[t],r=this._aVariableLists[t].getItems();for(var n=0;n<r.length;n++){if(r[n]._calculationBuilderKey===e){i.setSelectedItem(r[n],true);return}}}this._callFunctionFireSelection(e)};te.prototype._sanitizeStringLiteral=function(e){if(this.getParent()._isStringLiteral(e)){e=e.substring(1,e.length-1)}return e};te.prototype._clearSearchField=function(){if(this._oSearchField){this._oSearchField.setValue("");this._oSearchField.fireLiveChange()}};te.prototype._createPopover=function(e){var t=function(){var t=this._oCurrentItem,i=e.navContainer.getCurrentPage().getId(),r=e.functionList.getSelectedItem(),n,s,a;var o=this.getParent().getAllowStringLiterals()?"":0;e.literalInput.setValue(o);this._clearVariableLists();this._clearSearchField();if(r){e.functionList.setSelectedItem(r,false)}if(!t){n=this.getId()+W.PAGE_MAIN}else{if(t._isFunction()){a=t.getKey();n=this.getId()+W.PAGE_FUNCTIONS;s=e.functionList.getItems();for(var l=0;l<s.length;l++){var u=s[l].data("functionKey");if((u&&u.toLowerCase())===a.toLowerCase()){e.functionList.setSelectedItem(s[l],true);break}}}else if(t._isLiteral()){var p=this._sanitizeStringLiteral(t.getKey());e.literalInput.setValue(p);e.literalInput.setValueState(j.None);n=this.getId()+W.PAGE_MAIN}else if(t._isVariable()){this._setVariableListSelection(t.getKey());var c=t._oVariable||t.getVariable(),d=c&&c.getGroup()||W.PAGE_VARIABLE;n=this.getId()+d}else if(t._isSecondaryOperator()){n=this.getId()+W.PAGE_OPERATORS}else{n=this.getId()+W.PAGE_MAIN}}if(n!==i){if(n!==this.getId()+W.PAGE_MAIN){e.navContainer.backToPage(this.getId()+W.PAGE_MAIN)}e.navContainer.to(e.navContainer.getPage(n),"show")}else{e.navContainer.getCurrentPage().setFooter(this._getPageFooter(i,e))}var _=this._oCurrentItem&&this._oCurrentItem._getItemError(),h=_&&" "+_.title;this._aStrips.forEach(function(e){e.setVisible(!!_);e.setText(h?ee.getText("CALCULATION_BUILDER_INCORRECT_SYNTAX")+h:"")})}.bind(this);this._oPopover=new b({showHeader:false,resizable:true,placement:U.PreferredBottomOrFlip,contentWidth:"400px",contentHeight:"450px",content:[e.navContainer],beforeOpen:t,afterClose:function(){this._bDragging=false;this._clearNewButtonPositions()}.bind(this)})};te.prototype._submitLiteralInput=function(t){var i=t.getValue();if(this.getParent()&&this.getParent().getAllowStringLiterals()&&!e.isNumeric(i)){i='"'+i+'"'}this._updateOrCreateItem({type:Y.Literal,key:i});t.setValueState(j.None)};te.prototype._getPageFooter=function(e,t){var i=false,r=false,n=false;if(this._oCurrentItem&&!this._oCurrentItem._bIsNew){r=true;n=this._oCurrentItem._isLiteral()}i=t.literalInput.getValueState()===j.None&&e===this.getId()+W.PAGE_MAIN&&n;t.footerButtons.okButton=new d({enabled:i,text:ee.getText("CALCULATION_BUILDER_CONFIRM_BUTTON"),press:function(e){this._submitLiteralInput(t.literalInput)}.bind(this)});t.footerButtons.deleteButton=new d({enabled:r,text:ee.getText("CALCULATION_BUILDER_DELETE_BUTTON"),press:this._deleteItem.bind(this)});t.footerButtons.closeButton=new d({text:ee.getText("CALCULATION_BUILDER_CLOSE_BUTTON"),press:this._instantClose.bind(this)});return new O({content:[new p,t.footerButtons.okButton,t.footerButtons.deleteButton,t.footerButtons.closeButton]})};te.prototype._insertFunctionItems=function(e,t){var i=function(t){e.push(t)};if(t&&t.length>0){t.forEach(function(e){i(e)})}else{i("")}i(")")};te.prototype._updateOrCreateItem=function(e){var t=!this._oCurrentItem||this._oCurrentItem._bIsNew,i=this._oCurrentItem&&!this._oCurrentItem.getKey(),r=this.getParent(),n=e.functionObject,s=this.getItems();var a=function(){var t=e.type===Y.Function?n.template:r._convertToTemplate(n.getItems());this._insertFunctionItems(u,t)}.bind(this);var o=function(){var e=isNaN(this._iCurrentIndex)?this.getItems().length:this._iCurrentIndex,t=this._getKeys();this._smartRender(t.slice(0,e).concat(u,t.slice(e)))}.bind(this);var l=function(){for(var e=0;e<s.length;e++){if(s[e]===this._oCurrentItem){return e+1}}return null}.bind(this);if(t){var u=[e.key];if(n){a()}o()}else{this._oCurrentItem.setKey(e.key);if(e.type){this._oCurrentItem._sType=e.type}if(i&&n){var u=[];this._iCurrentIndex=l();a();o()}}this._instantClose();this._fireChange()};te.prototype._expandAllVariables=function(){this.getItems().forEach(function(e){if(e.isExpandable()){e._expandVariable(false)}});this._fireChange()};te.prototype._handleDelete=function(e){if(this._isEmptySelected()){return}this._bAreSelectedItemsDeleting=true;a.show(ee.getText("CALCULATION_BUILDER_DELETE_MESSAGE_TEXT"),{icon:a.Icon.WARNING,title:ee.getText("CALCULATION_BUILDER_DELETE_MESSAGE_TITLE"),actions:[a.Action.YES,a.Action.CANCEL],onClose:function(e){if(e===a.Action.YES){var t=this.$().find(".sapCalculationBuilderSelected .sapCalculationBuilderItem"),i=t.length,r=t.first(),n=sap.ui.getCore().byId(r.attr("id"));if(n){var s=this._getKeys();s.splice(n._iIndex,i);this._smartRender(s);this._fireChange()}}this._bAreSelectedItemsDeleting=false}.bind(this)})};te.prototype._handleEnter=function(t){var i=e(t.target),r;if(this._oItemNavigation&&!this._bReadOnly){if(i.hasClass("sapCalculationBuilderNewItem")){r=this._getNewItem();if(r){r._buttonPress(t)}}else if(i.hasClass("sapCalculationBuilderItem")){r=this._getItemById(i[0].id);if(r){r._buttonPress(t)}}else if(i.hasClass("sapCalculationBuilderItemExpandButton")){r=this._getItemById(i.closest(".sapCalculationBuilderItem")[0].id);if(r){r._expandButtonPress(t)}}}};te.prototype._createVariablesMap=function(){this._mGroups={};this._aVariableLists=[];this.getVariables().forEach(function(e){var t=e.getGroup()||Z;if(!this._mGroups[t]){this._mGroups[t]=[]}this._mGroups[t].push(e)}.bind(this))};te.prototype._handleSpace=function(e){this._selectItem(e.target)};te.prototype._handleCtrlNext=function(e){this._moveItems(J.KEY_NEXT)};te.prototype._handleCtrlPrevious=function(e){this._moveItems(J.KEY_PREVIOUS)};te.prototype._getVariableByKey=function(e){var t=this.getVariables();if(!e){return null}e=e.toLowerCase();for(var i=0;i<t.length;i++){if(t[i].getKey().toLowerCase()===e){return t[i]}}return null};te.prototype.setTitle=function(e){var t=this._oToolbarTitle;if(t){t.setText(e);t.setVisible(!!e)}this.setProperty("title",e)};te.prototype._getKeys=function(){return this.getItems().map(function(e){return e.getKey()})};te.prototype._deleteItem=function(){var e=this._getKeys();e.splice(this._oCurrentItem._iIndex,1);this._smartRender(e);this._instantClose();this._fireChange()};te.prototype._openDialog=function(e){this._oCurrentItem=e.currentItem;this._iCurrentIndex=e.index;this._oPopover.openBy(e.opener)};te.prototype._setupDroppable=function(t){var i=this;t=t||this.$().find(".sapCalculationBuilderDroppable");t.droppable({scope:i.getId()+"-scope",tolerance:"pointer",activeClass:"sapCalculationBuilderDroppableActive",hoverClass:"sapCalculationBuilderDroppableActive",drop:function(t,r){if(!r.draggable.hasClass("sapCalculationBuilderSelected")){i._selectItem(r.draggable[0])}i._moveItems(J.MOUSE,parseInt(e(this).attr("index"),10));i._bDragging=false},over:function(e,t){i._bDragging=true}})};te.prototype._clearNewButtonPositions=function(){var e=this.$();e.find(".sapCalculationBuilderDelimiterNewButton").hide(200);e.find(".sapCalculationBuilderItem").animate({left:0},300)};te.prototype._setupNewButtonEvents=function(){var t=13,i=300;var r=this.$().find(".sapCalculationBuilderDelimiter[data-events!='bound']"),n=this.$().find(".sapCalculationBuilderDelimiterNewButton[data-events!='bound']"),s=this,a,o;var l=function(e,t){e.prev().animate({left:-t},i);e.next().animate({left:t},i)};n.on("click",function(t){var i=e(this),r=parseInt(i.parent().attr("index"),10);i.css("opacity",1);s._oCurrentItem=null;s._iCurrentIndex=r;s._openDialog({opener:this,index:r})});n.attr("data-events","bound");r.on("mouseover",function(i){var r=e(this);if(!s._bDragging&&!s._oPopover.isOpen()){a=true;o=setTimeout(function(){if(a){a=false;l(r,t);r.find(".sapCalculationBuilderDelimiterNewButton").show(200)}},400)}});r.on("mouseout",function(t){var i=e(this).find(".sapCalculationBuilderDelimiterNewButton"),r=e(this);if(t.target===i[0]&&t.relatedTarget===r[0]){return}a=false;clearTimeout(o);if(s._bDragging||s._oPopover.isOpen()){return}if(!i.is(":hover")){l(r,0);i.hide(200)}});r.attr("data-events","bound")};te.prototype._setupSelectable=function(){this.$().selectable({cancel:".sapCalculationBuilderCancelSelectable",distance:5,start:function(){this._deselect();this._instantClose()}.bind(this),stop:function(){this._selectItems(this.$().find(".sapCalculationBuilderItem.ui-selected"))}.bind(this)})};te.prototype._selectItemsTo=function(t){var i=e(t.next(".sapCalculationBuilderDelimiter")[0]),r=i.attr("index")-1,n=this.$(),s,a,o,l,u;if(t.parent().hasClass("sapCalculationBuilderSelected")||this._isEmptySelected()){this._selectItem(t);return}if(r>this._iLastSelectedIndex){s=this._iFirstSelectedIndex;a=r+1}else{s=r;a=this._iLastSelectedIndex+1}this._deselect();l=n.find('.sapCalculationBuilderDelimiter[index="'+s+'"]');u=n.find('.sapCalculationBuilderDelimiter[index="'+a+'"]');o=l.nextUntil(u,".sapCalculationBuilderItem");this._selectItems(o)};te.prototype._selectItems=function(e){for(var t=0;t<e.length;t++){this._selectItem(e[t])}};te.prototype._selectItem=function(t){var i=this.$().find(".sapCalculationBuilderSelected"),r=e(t),n=e(r.next(".sapCalculationBuilderDelimiter")[0]),s=i[0].children.length,a=n.attr("index")-1,o=true;if(!this._oItemNavigation||!this._getItemById(r[0].id)||this._bReadOnly){return}if(s===0){this._iFirstSelectedIndex=a;this._iLastSelectedIndex=a}else{if(r.parent().hasClass("sapCalculationBuilderSelected")){if(this._iFirstSelectedIndex===a){this._iFirstSelectedIndex++;this._deselectItem(r,false)}else if(this._iLastSelectedIndex===a){this._iLastSelectedIndex--;this._deselectItem(r,true)}else{this._deselect()}this._setCorrectFocus();return}if(this._iFirstSelectedIndex-a===1){this._iFirstSelectedIndex=a;o=false}else if(a-this._iLastSelectedIndex===1){this._iLastSelectedIndex=a;o=true}else{this._iFirstSelectedIndex=a;this._iLastSelectedIndex=a;this._deselect()}}var l=this.$();if(this._isEmptySelected()){i.detach().insertBefore(r);i.draggable({revert:"invalid",cursor:"move",axis:"x",scope:this.getId()+"-scope",helper:function(e){var t=i.clone();t.removeClass("sapCalculationBuilderSelected");t.addClass("sapCalculationBuilderDraggingSelectedClone");return t},start:function(){i.addClass("sapCalculationBuilderDragging");l.find(".sapCalculationBuilderItemContent").css("cursor","move")},stop:function(){i.removeClass("sapCalculationBuilderDragging");l.find(".sapCalculationBuilderItemContent").css("cursor","pointer")}})}if(o){r.detach().appendTo(i);n.detach().appendTo(i)}else{n.detach().prependTo(i);r.detach().prependTo(i)}if(r.hasClass("sapCalculationBuilderItem")){r.draggable("disable");r.addClass("ui-selected")}this._setCorrectFocus()};te.prototype._isEmptySelected=function(){var e=this.$().find(".sapCalculationBuilderSelected");if(e){return e.is(":empty")}return true};te.prototype._deselectItem=function(t,i){var r=this.$().find(".sapCalculationBuilderSelected"),n=e(t.next(".sapCalculationBuilderDelimiter")[0]);if(!t.hasClass("ui-selected")){return}if(i){n.detach().insertAfter(r);t.detach().insertAfter(r)}else{t.detach().insertBefore(r);n.detach().insertBefore(r)}t.draggable("enable");t.removeClass("ui-selected")};te.prototype._deselect=function(){var t=this.$().find(".sapCalculationBuilderSelected");if(this._isEmptySelected()){return}this.$().find(".sapCalculationBuilderSelected .ui-selected").removeClass("ui-selected");t.children().each(function(){var i=e(this);if(i.hasClass("sapCalculationBuilderItem")){i.draggable("enable")}i.detach().insertBefore(t)})};te.prototype._setupKeyboard=function(){var e=this.getDomRef(),t=[];this.getItems().forEach(function(e){t.push(e.getFocusDomRef());if(e.isExpandable()){t.push(e.$("expandbutton"))}});t.push(this._getNewItem().getFocusDomRef());if(!this._oItemNavigation){this._oItemNavigation=new s;this.addDelegate(this._oItemNavigation)}this._oItemNavigation.setRootDomRef(e);this._oItemNavigation.setItemDomRefs(t);this._oItemNavigation.setCycling(true);this._oItemNavigation.setPageSize(250)};te.prototype._setCorrectFocus=function(){e(this._oItemNavigation.getFocusedDomRef()).focus()};te.prototype._getItemById=function(e){return this.getItems().filter(function(t){return t.getId()===e})[0]};te.prototype._getNewItem=function(){if(!this._oNewItem){this._oNewItem=new i;this._oNewItem._bIsNew=true;this._oNewItem.setParent(this,null,true)}return this._oNewItem};te.prototype._instantClose=function(){var e=this._oPopover.getAggregation("_popup");if(e&&e.oPopup&&e.oPopup.close){e.oPopup.close(0);this._setCorrectFocus()}};te.prototype._attachAriaLabelToButton=function(e,t){e.addEventDelegate({onAfterRendering:function(e){e.srcControl.$("content").attr("aria-label",t)}})};te.prototype._printErrors=function(){this.getItems().forEach(function(e){var t=e._getItemError(),i=e.$(),r=!!t?"addClass":"removeClass";i[r]("sapCalculationBuilderItemErrorSyntax")});if(this.getParent().getLayoutType()===H.VisualOnly){this._showErrorIcon()}};te.prototype._validateSyntax=function(t){var i=function(){var e=this.getItems()[I],t=e.getKey();return!e._isOperator()||t==="("||t==="+"||t==="-"||t.toLowerCase()==="not"}.bind(this);var r=function(){var e=this.getItems(),t=e[m-1];return!t._isOperator()||t.getKey()===")"}.bind(this);var n=function(e){var t=e.getKey().toLowerCase();if(e._isOperator()){return t==="not"||t==="("||t===")"?t:"#op#"}return e._isFunction()?"#fun#":"#col#"};var s=function(e){return{index:v,item:e,items:[],text:e.getKey()+(e._isFunction()?"(":"")}};var a=function(e){var t=1,i=v;v++;for(;v<c.length;v++){var r=c[v],n=r.getKey(),o=s(r);e.items.push(o);switch(n){case")":t--;break;case"(":t++;break;case",":t=1;break}if(r._isFunction()){a(o);e.text+=o.text}else{e.text+=n}if(t===0){return e}}T.push({index:i,title:ee.getText("CALCULATION_BUILDER_CLOSING_BRACKET_ERROR_TEXT")});return e};var o=function(t){var i=this.getParent()._getFunctionAllowParametersCount(t.item.getKey()),r=[],n=[];t.items.forEach(function(e){if(e.item._isComma()){r.push(n);n=[]}else{n.push(e)}});if(n.length>0&&n[n.length-1].text===")"){n.pop()}r.push(n);if(r.length!==i){T.push({index:t.index,title:ee.getText(r.length<i?"CALCULATION_BUILDER_TOO_LITTLE_PARAMETERS":"CALCULATION_BUILDER_TOO_MANY_PARAMETERS")})}if(r.length>0){r.forEach(function(i){if(i.length>0){e.merge(T,this._validateSyntax({from:i[0].index,to:i[i.length-1].index+1}))}else{T.push({index:t.index,title:ee.getText("CALCULATION_BUILDER_EMPTY_PARAMETER")})}}.bind(this))}}.bind(this);var l=0;var u=function(){var e=h.getKey()==="+"||h.getKey()==="-";if(e){l++;if(l>2){T.push({index:v,title:ee.getText("CALCULATION_BUILDER_SYNTAX_ERROR_TEXT")})}}else{l=0}};var p={"#op#":["(","#col#","#fun#","not","+","-"],"(":["(","+","-","#col#","#fun#","not"],")":["#op#",")"],"#col#":["#op#",")"],"#fun#":["(","+","-","#col#","#fun#"],not:["#col#","#fun#","not","("]};t=t||{};var c=t.items||this.getItems(),d,_,h,g,f,I=t.from||0,m=t.to||c.length,C=I===0&&m===c.length,E=[],T=[];if(c.length>0){if(!i()){T.push({index:I,title:ee.getText("CALCULATION_BUILDER_FIRST_CHAR_ERROR_TEXT")})}if(!r()){T.push({index:m-1,title:ee.getText("CALCULATION_BUILDER_LAST_CHAR_ERROR_TEXT")})}}for(var v=I;v<m;v++){h=c[v];if(h._getType()===Y.Error){T.push({index:v,title:ee.getText("CALCULATION_BUILDER_SYNTAX_ERROR_TEXT")});continue}u();if(!t.skipCustomValidation&&h._isFunction()){var A=h._getCustomFunction(),L=a(s(h));if(A&&!A.getUseDefaultValidation()){var y=new N;this.getParent().fireValidateFunction({definition:L,customFunction:A,result:y});e.merge(T,y.getErrors())}else{o(L)}}if(v<m-1){g=c[v+1];d=n(c[v]);_=n(g);f=g?g.getKey().toLowerCase():"";var B=g._isCustomOperator()||h._isCustomOperator();if(p[d].indexOf(_)===-1&&p[d].indexOf(f)===-1&&!B){var R={index:v+1};if(h._isOperator()&&g._isOperator()){R.title=ee.getText("CALCULATION_BUILDER_BEFORE_OPERATOR_ERROR_TEXT",g.getKey())}else if(!h._isOperator()&&!g._isOperator()){R.title=ee.getText("CALCULATION_BUILDER_BETWEEN_NOT_OPERATORS_ERROR_TEXT",[h.getKey(),g.getKey()])}else if(h.getKey()===")"&&!g._isOperator()){R.title=ee.getText("CALCULATION_BUILDER_AFTER_CLOSING_BRACKET_ERROR_TEXT")}else if(!h._isOperator()&&g.getKey()==="("){R.title=ee.getText("CALCULATION_BUILDER_BEFORE_OPENING_BRACKET_ERROR_TEXT")}else{R.title=ee.getText("CALCULATION_BUILDER_CHAR_ERROR_TEXT")}T.push(R)}}if(h._isFunction()){continue}if(C&&h.getKey()===","){T.push({index:v,title:ee.getText("CALCULATION_BUILDER_WRONG_PARAMETER_MARK")})}if(h._isOperator()&&h.getKey()==="("||h._isFunction()){E.push(v)}if(h._isOperator()&&h.getKey()===")"){if(E.length===0){T.push({index:v,title:ee.getText("CALCULATION_BUILDER_OPENING_BRACKET_ERROR_TEXT")})}else{E.pop()}}}for(v=0;v<E.length;v++){T.push({index:E[v],title:ee.getText("CALCULATION_BUILDER_CLOSING_BRACKET_ERROR_TEXT")})}return T};te.prototype._getType=function(e){return this.getParent()&&this.getParent()._getType(e)};te.prototype._moveItems=function(t,i){var r=[],n=this.$(),s=this.getItems(),a=n.find(".sapCalculationBuilderSelected"),o,l,u,p;if(this._isEmptySelected()){return}p=a.length>1?e(a[0]).children():a.children();if(t===J.KEY_PREVIOUS){l=this._iFirstSelectedIndex-1}else if(t===J.KEY_NEXT){l=this._iLastSelectedIndex+2}else if(t===J.MOUSE){l=i}if(l<0||l===s.length+1){return}o=this.$().find('.sapCalculationBuilderDelimiter[index="'+l+'"]');for(var c=0;c<s.length+1;c++){u=s[c];if(l===c){p.each(function(){var t=e(this),i;if(t.hasClass("sapCalculationBuilderItem")){i=sap.ui.getCore().byId(e(this)[0].id);r.push(i);i._bMovingItem=true;t.draggable("enable")}t.css("left",0+"px");t.detach().insertAfter(o).removeClass("");o=t})}if(u&&!u.$().parent().hasClass("sapCalculationBuilderSelected")&&!u._bMovingItem){r.push(u)}}a.css("left","");n.find(".sapCalculationBuilderDelimiter").each(function(t){e(this).attr("index",t)});this.removeAllAggregation("items",true);r.forEach(function(e,t){e._bMovingItem=false;e._iIndex=t;this.addAggregation("items",e,true)}.bind(this));this._setupKeyboard();this._selectItems(p.filter(function(t,i){return e(i).hasClass("sapCalculationBuilderItem")}));this._fireChange()};te.prototype._fireAfterValidation=function(){this.getParent().fireAfterValidation()};te.prototype._setItems=function(e){this.removeAllAggregation("items",true);(e||[]).forEach(function(e){this.addAggregation("items",this._convertFromNewItem(e),true)}.bind(this))};te.prototype._getKeyFromCreatedItem=function(e){return typeof e==="object"?e.getKey():e};te.prototype._convertFromNewItem=function(e){return typeof e==="object"?e:new i({key:e})};te.prototype._showErrorIcon=function(){var e=this.$("erroricon"),t=this.getParent(),i=t._createErrorText(null,true);if(i){e.show();e.attr("title",t._createErrorText(null,true))}else{e.hide()}};te.prototype._smartRender=function(t){var i="",r=this.$(),n=[],s=this.getItems(),a=s.length;var o=function(e){e=this._convertFromNewItem(e);this.addAggregation("items",e,true);e._iIndex=l;if(r[0]){i+=e._render();i+=this._renderDelimiter(l+1)}e.bOutput=true;n.push(e)}.bind(this);if(!this.getParent()._isExpressionVisible()){this._setItems(t);return}this._bRendered=false;this._bIsCalculationBuilderRendering=true;this._deselect();for(var l=0;l<t.length;l++){var u=s[l],p=t[l],c=typeof p==="object"&&p.getKey?p.getKey():p,d=p._sType?p._sType:"";if(!u){o(t[l])}else if(u.getKey()!==c||u._sType!==d){u.setKey(c,true);u._sType=d;var _=u.$();_[0].innerHTML=u._innerRender();_.attr("class",u._getClass());_.attr("title",u._getTooltip());u._setEvents()}}if(t.length<a){for(var l=t.length;l<s.length;l++){var _=s[l].$();_.next().remove();_.remove();this.removeAggregation("items",s[l],true)}}if(r[0]&&n.length>0){r.find(".sapCalculationBuilderDelimiter").last().after(i);n.forEach(function(e){e._afterRendering()});this._setupDroppable(r.find(".sapCalculationBuilderDroppable").filter(function(){return parseInt(e(this).attr("index"),10)>a}))}this._bRendered=true;this._setupKeyboard();this._setupNewButtonEvents();this._bIsCalculationBuilderRendering=false};te.prototype._fireChange=function(){this.fireEvent("change")};return te});
sap.ui.predefine("sap/suite/ui/commons/CalculationBuilderFunction",["./library","sap/ui/core/Control"],function(e,t){"use strict";var i=t.extend("sap.suite.ui.commons.CalculationBuilderFunction",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},useDefaultValidation:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"item"}}}});i.prototype._getLabel=function(){return this.getLabel()||this.getKey()};return i});
sap.ui.predefine("sap/suite/ui/commons/CalculationBuilderGroup",["./library","sap/ui/core/Control"],function(e,t){"use strict";var i=t.extend("sap.suite.ui.commons.CalculationBuilderGroup",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Misc",defaultValue:null}},events:{setSelection:{parameters:{key:"string"}}},aggregations:{customView:{type:"sap.ui.core.Control",multiple:false}}}});i.prototype._getTitle=function(){return this.getTitle()||this.getKey()};return i});
sap.ui.predefine("sap/suite/ui/commons/CalculationBuilderInput",["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","./CalculationBuilderItem","sap/m/List","sap/m/StandardListItem","sap/m/Popover","sap/m/Button","sap/m/Menu","sap/m/MenuButton","sap/m/MenuItem","sap/m/OverflowToolbar","sap/m/ToolbarSeparator","sap/m/ToolbarSpacer","sap/m/Title","sap/m/OverflowToolbarToggleButton","sap/ui/core/CustomData","sap/ui/model/Sorter","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ui/dom/containsOrEquals","sap/m/library"],function(t,e,i,n,o,r,s,a,u,p,l,h,g,f,c,d,_,C,y,T,m,S){"use strict";var I=S.ButtonType;var v=S.PlacementType;var b=S.ListMode;var L="&nbsp;&nbsp;";var x="┘┘";var w=e.CalculationBuilderItemType,E=e.CalculationBuilderValidationMode;var O=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var P=function(t){if(typeof t.which==="undefined"){return true}else if(typeof t.which==="number"&&t.which>0){return!t.ctrlKey&&!t.metaKey&&!t.altKey&&t.which!==8}return false};var A=function(e,i){var n,o="",r=0;if(e instanceof t){e=e[0]}var s=e.nodeType;if(!s){while(n=e[r++]){o+=A(n,i)}}else if(s===1||s===9||s===11){for(e=e.firstChild;e;e=e.nextSibling){o+=A(e,i)}}else if(s===3||s===4){o+=i&&t(e).parent().hasClass("sapCalculationBuilderItemTextEmpty")&&e.nodeValue==="  "?"┘┘":e.nodeValue}return o};var B=i.extend("sap.suite.ui.commons.CalculationBuilderInput",{metadata:{library:"sap.suite.ui.commons",events:{change:{parameters:{value:"String",position:"integer",validate:"boolean"}}}},renderer:function(t,e){var i='contenteditable="true"';if(e.getParent().getShowInputToolbar()&&!e._bReadOnly){t.write('<div class="sapCalculationBuilderInputToolbarWrapper">');t.renderControl(e._oInputToolbar);t.write("</div>")}t.write("<div");t.writeControlData(e);t.addClass("sapCalculationBuilderInputWrapper");if(e._bReadOnly){i=""}t.writeClasses(e);t.write(' aria-label="" >');t.write('<div aria-label="" aria-describedby="'+e.getId()+'-error" spellcheck="false"'+i+' id="'+e.getId()+'-input" class="sapCalculationBuilderInput"></div>');t.write('<div id="'+e.getId()+'-error" class="sapCalculationBuilderInputErrorArea"></div>');t.write("</div>")}});B.prototype.init=function(){this._setupSuggestionList();this._iCarretPosition=0;this._sSuggestionText="";this._aVariables=[];this._oInputToolbar=new h(this.getId()+"-toolbar").addStyleClass("sapCalculationBuilderInputToolbar");this.addDependent(this._oInputToolbar)};B.prototype.exit=function(){if(this._oPopup){this._oPopup.destroy()}if(this._oInputToolbar){this._oInputToolbar.destroy()}};B.prototype.onAfterRendering=function(){this._setupKeyPress();this._setupEvents();this._setupAriaLabel()};B.prototype.onBeforeRendering=function(){this._aFunctions=this.getParent()._getAllFunctions();this._fillInputToolbar()};B.prototype.getFocusDomRef=function(){return this.getDomRef("input")};B.prototype._setupEvents=function(){var t=this.$("input");t.blur(function(){this._lastRangeSelection=this._getSelectionRange()}.bind(this));t.on("mouseup",function(t){this._iCarretPosition=this._getCaretPosition()}.bind(this))};B.prototype._validate=function(t){var e=this.getParent();if(e&&e.getValidationMode()===E.FocusOut){this.getParent()._validateInput(A(this.$("input")),t?this._iCarretPosition:0)}};B.prototype._setupKeyPress=function(){var e=this,i=this.getParent(),n=i&&i.getAllowSuggestions()&&T.system.desktop,o="paste input";this.$("input").on("focus",function(){var e=t(this);e.data("before",A(e[0]))}).on(o,function(i){var o=t(this),r=o.data("before"),s=i.key,a=A(o[0]);if(e._oPopup.isOpen()&&s==="Enter"){return}if(r!==a){var u=e._iCarretPosition=e._getCaretPosition();e._storeCurrent();e.fireChange({position:Math.max(0,u),value:A(o[0],true)});if(n){e._checkSuggestions(u,a,P(i));if(e._sSuggestionText.length>0){e._filterSuggestionList(e._sSuggestionText);if(e._oSuggestionList.getItems().length===0){e._oPopup.close()}else{e._findCurrentSpan();if(!e._oPopup.isOpen()){var p=sap.ui.getCore().getConfiguration().getRTL(),l=t(e._oCurrentSpan),h=p?-(o.width()-l.position().left-l.width()):l.position().left;var g=parseInt(h,10),f=e.$("input").outerHeight()-(parseInt(t(e._oCurrentSpan).position().top,10)+t(e._oCurrentSpan).height())-10;e._iSuggestionSelectedIndex=-1;e._oPopup.setOffsetX(g);e._oPopup.setOffsetY(-f);e._oPopup.openBy(e.getDomRef("input"))}}}}}})};B.prototype._createItemSpan=function(e,i){var n=function(){if(!e){return"sapCalculationBuilderItemTextEmpty"}if(i){return"sapCalculationBuilderItemTextError"}if(this._isOperator(e)){return"sapCalculationBuilderItemTextOperator"}return"sapCalculationBuilderItemTextDefault"}.bind(this);var o=e?"text":"html";var r=t("<span></span>",{title:i?i.title:"",class:n()})[o](e||L);return r};B.prototype._findCurrentSpan=function(){var e;if(window.getSelection&&window.getSelection().getRangeAt){e=window.getSelection();this._oCurrentSpan=e.anchorNode.parentNode;if(!t(this._oCurrentSpan).is("span")){this._oCurrentSpan=this.$("input").children().first()[0]}}return this._oCurrentSpan};B.prototype._setupSuggestionList=function(){var e=new C({path:"grouptitle",descending:false,group:function(t){return t.getProperty("grouptitle")}});var i=function(e){var i=this._createItemSpan(e);t(this._oCurrentSpan).after(i);return i}.bind(this);var n=function(t){var e=t.innerText,i=this._sSuggestionText.toLowerCase(),n=i.length,o=e.toLowerCase(),r="",s=(" "+o).indexOf(" "+i),a;if(s>-1){r+=e.substring(0,s);a=e.substring(s,s+n);r+='<span class="sapMInputHighlight">'+a+"</span>";r+=e.substring(s+n)}else{r=e}return r}.bind(this);this._oSuggestionList=new o({mode:b.SingleSelectMaster,showNoData:false,enableBusyIndicator:false,rememberSelections:false,items:{path:"/data",factory:function(t,e){var i=e.getProperty(e.oModel.sPath),n=new r({title:i.title,customData:[new _({key:"key",value:i.key})]});n.addStyleClass("sapCalculationBuilderSuggestionItem");return n},sorter:e},selectionChange:function(e){var n=e.getParameter("listItem"),o,r,s,a,u;if(n){a=n.getCustomData()[0].getValue();s=this._getFunction(a);t(this._oCurrentSpan).text(s?a+"(":a+"");t(this._oCurrentSpan).removeClass("sapCalculationBuilderItemTextError").addClass("sapCalculationBuilderItemTextDefault");this._iCarretPosition+=(a||"").length+1;if(s){u=this._getFunctionTemplateItems(s);o=u.length;if(o>0){u.forEach(function(t,e){this._oCurrentSpan=i(t)[0];if(!t&&!r){r=this._oCurrentSpan}if(!r&&t){this._iCarretPosition+=t.length}if(t&&e!==o-1){this._oCurrentSpan=i(" ")}}.bind(this))}else{r=this._oCurrentSpan=i("")[0]}var p=i(")");if(!r){this._oCurrentSpan=p[0]}}this._storeCurrent();var l=r||this._oCurrentSpan,h=l&&l.textContent&&l.textContent.length||0;this.fireChange({position:this._getCaretPosition(l,s?1:h),value:A(this.$("input")[0],true)})}this._oPopup.close()}.bind(this)});this._oSuggestionList.addEventDelegate({onAfterRendering:function(){this._oSuggestionList.$().find(".sapMDLILabel, .sapMSLITitleOnly, .sapMDLIValue").each(function(){this.innerHTML=n(this)});this._oSuggestionList.$().find(".sapMGHLI").addClass("sapCalculationBuilderSuggestionListHeader")}.bind(this)});this._oPopup=new s(this.getId()+"-popup",{contentWidth:"300px",showArrow:false,showHeader:false,placement:v.Vertical,horizontalScrolling:true,content:this._oSuggestionList,initialFocus:this}).attachAfterClose(function(t){this._clearSuggestion()}.bind(this))};B.prototype._checkSuggestions=function(t,e,i){var n=e[Math.max(t-1,0)];var o=function(t){return this._isOperator(t)||this._isEmptySpace(t)}.bind(this);if(!n||o(n)){this._clearSuggestion();return}var r=i?n:"",s=i?2:1;t=Math.max(t,0);for(var a=t-s;a>=0;a--){if(o(e[a])){break}r=e[a]+r}for(a=t;a<e.length;a++){if(o(e[a])){break}r=r+e[a]}if(!r){this._clearSuggestion()}this._sSuggestionText=r||""};B.prototype._clearSuggestion=function(){this._sSuggestionText="";this._oCurrentSpan={};this._oPopup.close()};B.prototype._filterSuggestionList=function(t){var e=[];var i=function(i,n,o,r){var s=(n||i).toLowerCase(),a=t.toLowerCase();if((" "+s).indexOf(" "+a)!==-1){e.push({title:n||i,key:i,type:o,grouptitle:r})}};var n=this.getParent();n.getOperators().forEach(function(t){i(t.getKey(),t.getText(),w.CustomOperator,O.getText("CALCULATION_BUILDER_OPERATORS_TITLE"))});this._aVariables.forEach(function(t){var e=t.getGroup(),o,r=O.getText("CALCULATION_BUILDER_VARIABLES_TITLE");if(e){o=n.getGroups().filter(function(t){return t.getKey()===e})[0];r=o?o.getTitle():r}i(t.getKey(),t.getLabel(),w.Variable,r)});this._aFunctions.forEach(function(t){i(t.key,t.title,w.Function,O.getText("CALCULATION_BUILDER_FUNCTIONS_TITLE"))});e.sort(function(t,e){return t.title.toUpperCase()<e.title.toUpperCase()?-1:1});this._oSuggestionList.setModel(new y({data:e}))};B.prototype._getCaretPosition=function(t,e){var i,n,o,r=0;var s=function(e){return t&&e===t||!t&&(e===n.anchorNode||e===n.anchorNode.parentNode)};var a=function(t){var e;if(s(t)){return false}if(t.nodeType===3){r+=t.textContent.length}else{for(var i=0;i<t.childNodes.length;i++){e=t.childNodes[i];if(s(e)){return false}r+=e.textContent.length}}return true};try{if(window.getSelection&&window.getSelection().getRangeAt){i=window.getSelection().getRangeAt(0);n=window.getSelection();o=this.$("input")[0].childNodes;for(var u=0;u<o.length;u++){if(!a(o[u])){break}}return(e||i.startOffset)+r}}catch(t){return this._iCarretPosition}return 0};B.prototype._getSelectionRange=function(){var t,e=0,i=this.$("input")[0];if(typeof window.getSelection!=="undefined"){try{var n=window.getSelection().getRangeAt(0),o=n.cloneRange();if(!m(i,n.startContainer)){return this._lastRangeSelection}o.selectNodeContents(i);o.setEnd(n.startContainer,n.startOffset);t=o.toString().length;e=t+n.toString().length}catch(i){e=t=this._iCarretPosition||0}}return{start:t,length:e-t}};B.prototype._setCaretPosition=function(t){var e=window.getSelection(),i=this.$("input"),n,o,r,s,a;var u=function(t){var e=i.children(),n,o,r=0;for(var s=0;s<e.length;s++){n=e[s];o=n.innerText||"";if(r+o.length>t){return{spanIndex:s,position:r+o.length-t}}r+=o.length}return{spanIndex:Math.max(s-1,0),position:100}};if(typeof t==="number"){t=u(t)}r=t&&t.span;if(t){n=i[0];if(!r){r=n&&n.children&&n.children.length>t.spanIndex?n.childNodes[t.spanIndex]:null}if(r){o=document.createRange();s=r.firstChild?r.firstChild:r;a=Math.min(s.length,t.position);o.setStart(s,a);o.collapse(true);e.removeAllRanges();e.addRange(o)}}};B.prototype._recreateText=function(e){var i=function(i){var n;if(i){if(!this._isEmptySpace(i)){n=t.grep(e.errors,function(t){return t.index===a})[0]}if(i==="┘"){i=""}r+=this._createItemSpan(i,n)[0].outerHTML;if(!this._isEmptySpace(i)){a++}l++}}.bind(this);var n=function(){for(;c<s.length;c++){o();if(!this._isEmptySpace(s[c])&&s[c]!=="("){c--;break}g+=s[c];if(s[c]==="("){break}}i(g);g=""}.bind(this);var o=function(t){if(!h&&e.position===c){h={spanIndex:l-(t||0),position:t||g.length}}};var r="",s,a=0,u=this.getParent().getAllowStringLiterals(),p=false,l=0,h=null,g="",f;s=e.text||A(this.$("input")[0],true);for(var c=0;c<s.length;c++){f=s[c];o();if(f==='"'&&u){p=!p}if(p){g+=f;continue}if(f==="┘"||this._isEmptySpace(f)||this._isOperator(f)){if(this._isFunction(g)){n()}else{i(g);i(f);g=""}if(f==="┘"){c++;o(1)}}else{g+=f}}i(g);var d=this.$("input");d.html(r);if(d.is(":focus")){this._showErrorText(true,e.errors)}if(e.position>0){this._setCaretPosition(h||{spanIndex:l-1,position:Number.MAX_SAFE_INTEGER})}};B.prototype._setupAriaLabel=function(){var t,e,i;t=this.getParent();e=t._oExpressionBuilder._aErrors;i=O.getText("CALCULATION_BUILDER_EXPRESSION_TITLE")+": "+t.getExpression();if(e.length>0){i+=". "+O.getText("CALCULATION_BUILDER_ERROR_TITLE")+": ";e.forEach(function(t){i+=t.title+" "})}this.$().attr("aria-label",i)};B.prototype._showErrorText=function(t,e){var i=this.$("error"),n=this.getParent();e=e||n.getErrors();if(e&&e.length>0&&t){i.show();i.text(n._createErrorText())}else{i.hide()}};B.prototype._stringToItems=function(t){var e=[],i="",o="",r=0,s=false;var a=function(){var i,s="";if(o){i=this._getFunction(o);if(i){if(t[r]!=="("){s=w.Error;for(;r<t.length;r++){if(t[r]==="("){s="";break}if(!this._isEmptySpace(t[r])){r--;break}}}}var a=new n({key:o});a._sType=s;e.push(a)}o="";return!!i||!!s}.bind(this);if(typeof t==="undefined"){var u=this.$("input")[0];t=u?A(this.$("input")[0],true):""}for(;r<t.length;r++){i=t[r];if(i==='"'&&this.getParent().getAllowStringLiterals()){o+='"';if(s){e.push(new n({key:o}));o=""}s=!s;continue}if(s){o+=i;continue}if(i==="┘"){e.push(new n);r++;continue}if(this._isEmptySpace(i)){if(o){a()}continue}var p=t[r+1];if(p&&this._isOperator(i+p,false)){i+=p;r++}var l=this._isOperator(i,false);if(l){if(a()){continue}e.push(new n({key:i}))}else{o+=i}}a();return e};B.prototype._itemsToString=function(e){var i=e.items,n="",o="",r=e.createInputText!==false,s,a;for(var u=0;u<i.length;u++){var p=i[u],l=p.getKey(),h=this._isFunction(l);if(r){s=t.grep(e.errors,function(t){return t.index===u})[0]}var g=l!==","&&l!==")"&&a!=="("&&a;if(r){g?o+=this._createItemSpan(" ",s)[0].outerHTML:"";o+=this._createItemSpan(l+(h?"(":""),s)[0].outerHTML}n+=(g?" ":"")+l+(h?"(":"");a=h?"(":l}if(r){this.$("input").html(o)}return n};B.prototype.onfocusin=function(t){if(this._bSetCaretOnFocus){this._setCaretPosition(this._iCarretPosition)}this._bSetCaretOnFocus=false;this._showErrorText(true)};B.prototype.onsapfocusleave=function(t){if(t.relatedControlId&&m(this._oPopup.getDomRef(),sap.ui.getCore().byId(t.relatedControlId).getFocusDomRef())){if(sap.ui.getCore().isMobile()||T.browser.safari){this._bSetCaretOnFocus=true}this.focus()}else{this._showErrorText(false);this._validate(false)}};B.prototype.onsappageup=function(t){this._suggestionListKeyHandling({event:t,add:true,toEnd:true});if(!this._oPopup.isOpen()){this._iCarretPosition=A(this.$("input")).length-1}};B.prototype.onsapnext=function(t){if(this._iCarretPosition<A(this.$("input")).length-1){this._iCarretPosition++}};B.prototype.onsapprev=function(t){if(this._iCarretPosition>0){this._iCarretPosition--}};B.prototype.onsappagedown=function(t){this._suggestionListKeyHandling({event:t,add:false,toEnd:true});if(!this._oPopup.isOpen()){this._iCarretPosition=0}};B.prototype.onsapdown=function(t){this._suggestionListKeyHandling({event:t,add:true})};B.prototype.onsapescape=function(t){if(this._oPopup.isOpen()){this._oPopup.close()}};B.prototype.onsapup=function(t){this._suggestionListKeyHandling({event:t,add:false})};B.prototype.onsapenter=function(t){if(this._oPopup.isOpen()){this._oSuggestionList.fireSelectionChange({listItem:this._oSuggestionList.getSelectedItem()})}else{this._validate(true)}t.preventDefault();t.stopPropagation()};B.prototype._suggestionListKeyHandling=function(t){var e=t.event,i=t.add,n=t.toEnd,o,r;if(!this._oPopup.isOpen()||!e){return}i?this._iSuggestionSelectedIndex++:this._iSuggestionSelectedIndex--;o=this._oSuggestionList.$().find(".sapCalculationBuilderSuggestionItem");r=o.length;if(this._iSuggestionSelectedIndex<0||!i&&n){this._iSuggestionSelectedIndex=r-1}else if(this._iSuggestionSelectedIndex>=r||i&&n){this._iSuggestionSelectedIndex=0}this._oSuggestionList.removeSelections(true);sap.ui.getCore().byId(o[this._iSuggestionSelectedIndex].id).setSelected(true).focus();e.preventDefault();e.stopPropagation()};B.prototype._displayError=function(t){this.$("input")[t?"addClass":"removeClass"]("sapCalculationBuilderInputError")};B.prototype._insertItemFromToolbar=function(t){var e=this.$("input"),i,n,o;var r=" "+t+" ",s=this._getFunction(t),a=r.length,u;var p=function(){return{start:e.text().length,length:0}};o=this._getSelectionRange()||p();e.focus();this._lastRangeSelection={};i=A(e[0],true);if(i[o.start]==="┘"&&i[o.start-1]==="┘"&&o.length===0){o.start--;o.length+=2}if(s){r=" "+t+"(";u=this._getFunctionTemplateItems(s);if(u.length>0){u.forEach(function(t){r+=t?t:x})}else{r+=x}r+=") ";a=r.indexOf(x)+1}n=[i.slice(0,o.start),r,i.slice(o.start+o.length)].join("");this.fireChange({value:n,position:o.start+a});this._storeCurrent()};B.prototype._convertEmptyHashes=function(t){return t?t.replace(new RegExp(x,"g"),"  "):""};B.prototype._fillInputToolbar=function(){var t=function(t,e){return new a({type:I.Transparent,text:t,press:this._insertItemFromToolbar.bind(this,t)}).addStyleClass("sapCalculationBuilderInputToolbarButtons "+e)}.bind(this);var i=function(t){if(t){return t.map(function(t){return new l({key:t.getKey(),text:t._getLabel()})}).sort(function(t,e){return t.getText().localeCompare(e.getText())})}return[]};var n=function(t){return t.map(function(t){return new l({key:t.getKey(),text:t.getText()?t.getText():t.getKey()})}).sort(function(t,e){return t.getText().localeCompare(e.getText())})};var o=function(t){return t.map(function(t){return new l({key:t,text:t})})};var r=function(){var t=this.getParent(),e=t.getAllowComparisonOperators(),i=t.getAllowLogicalOperators(),r=t.getOperators(),s=r.length>0,a,u,p,h=[];if(e){a=o(Object.keys(d));h.push(new l({text:O.getText("CALCULATION_BUILDER_COMPARISON_TITLE"),items:a}))}if(i){u=o(Object.keys(_));h.push(new l({text:O.getText("CALCULATION_BUILDER_LOGICAL_TITLE"),items:o(Object.keys(_))}))}if(s){p=n(r);h.push(new l({text:O.getText("CALCULATION_BUILDER_ADDITIONAL_OPERATOR"),items:p}))}if(h.length>1){return h}if(e){return a}if(i){return u}if(s){return p}return[]}.bind(this);var s=function(t){return new p({text:t,menu:new u({itemSelected:function(t){this._insertItemFromToolbar(t.getParameters().item.getKey())}.bind(this)})}).addStyleClass("sapCalculationBuilderInputToolbarFunctionMenu").addStyleClass("sapCalculationBuilderInputToolbarMenuButtons")}.bind(this);var h=e.CalculationBuilderOperatorType,d=e.CalculationBuilderComparisonOperatorType,_=e.CalculationBuilderLogicalOperatorType,C=r(),y=this.getParent(),T=!!y.getTitle()&&y.getLayoutType()===e.CalculationBuilderLayoutType.TextualOnly,m;this._oInputToolbar.removeAllContent();this._oInputToolbar.addContent(new c({text:y.getTitle(),visible:T}));this._oInputToolbar.addContent(new f);Object.keys(h).forEach(function(e){this._oInputToolbar.addContent(t(h[e],""))}.bind(this));this._oInputToolbar.addContent((new g).addStyleClass("sapUiSmallMarginBeginEnd"));if(C.length>0){this._oInputToolbar.addContent(new p({text:O.getText("CALCULATION_BUILDER_OPERATORS_TITLE"),menu:new u({itemSelected:function(t){this._insertItemFromToolbar(t.getParameters().item.getKey())}.bind(this),items:C})}).addStyleClass("sapCalculationBuilderInputToolbarMenuButtons"))}m=this._aFunctions.map(function(t){return new l({key:t.key,text:t.title})});var S=s(O.getText("CALCULATION_BUILDER_FUNCTIONS_AND_VARIABLES_TITLE"));if(m.length>0){S.getMenu().addItem(new l({text:O.getText("CALCULATION_BUILDER_FUNCTIONS_TITLE"),items:[m]}))}var v=y._getGroupMap(),b=y.getGroups(),L=v["##DEFAULT##"];if(L&&L.length>0){S.getMenu().addItem(new l({text:O.getText("CALCULATION_BUILDER_VARIABLES_TITLE"),items:i(L)}))}b.forEach(function(t){var e=v[t.getKey()];if(e&&e.length>0){S.getMenu().addItem(new l({text:t._getTitle(),items:i(e)}))}});this._oInputToolbar.addContent(S)};B.prototype._isOperator=function(t,e){return this.getParent()&&this.getParent()._isOperator(t,e)};B.prototype._getFunctionTemplateItems=function(t){return this.getParent()._getFunctionTemplateItems(t)};B.prototype._isEmptySpace=function(t){return t===String.fromCharCode(160)||t===" "};B.prototype._isEmptyItem=function(t){return t===L};B.prototype._getText=function(){return this.$("input").text()};B.prototype._isFunction=function(t){return!!this._getFunction(t)};B.prototype._getFunction=function(t){var e=this.getParent();return e&&e._isTokenAllowed(t)&&e._getFunctionDefinition(t)};B.prototype._storeCurrent=function(t){var e=this.$("input");e.data("before",e.text())};return B});
sap.ui.predefine("sap/suite/ui/commons/CalculationBuilderItem",["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/m/MessageBox","sap/base/security/encodeXML","./Utils","sap/ui/thirdparty/jqueryui/jquery-ui-core","sap/ui/thirdparty/jqueryui/jquery-ui-widget","sap/ui/thirdparty/jqueryui/jquery-ui-mouse","sap/ui/thirdparty/jqueryui/jquery-ui-draggable"],function(t,e,i,r,n,s){"use strict";var a=e.CalculationBuilderItemType,o=e.CalculationBuilderOperatorType,u=e.CalculationBuilderLogicalOperatorType;var l=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var p=i.extend("sap.suite.ui.commons.CalculationBuilderItem",{constructor:function(t,e){if(typeof t!=="string"&&t!==undefined){e=t}if(e&&e.key){e.key=this._sanitizeKey(e.key)}i.apply(this,arguments)},metadata:{library:"sap/suite/ui/commons",properties:{key:{type:"string",group:"Misc",defaultValue:null}}},renderer:function(t,e){t.write(e._render())}});p.prototype._innerRender=function(){var t="",e="",i=this._getLabel(),r={"!=":"NOT_EQUAL","-":"MINUS",",":"COMMA"};var s=function(){t+='<div class="sapCalculationBuilderItemFocusWrapper">';t+='<div class="sapCalculationBuilderItemFocus"></div>';t+="</div>"};var a=function(){t+='<div class="sapCalculationBuilderItemExpandButtonWrapper" title="'+l.getText("CALCULATION_BUILDER_EXPAND_BUTTON_TITLE")+'">';t+='<div id="'+this.getId()+'-expandbutton" class="sapCalculationBuilderItemExpandButton '+(this._bReadOnly?"sapMBtnDisabled":"")+'" tabindex="-1">';if(!this._bReadOnly){t+='<div class="sapCalculationBuilderItemExpandButtonFocus"></div>'}o("");t+="</div></div>"}.bind(this);var o=function(e){t+='<span aria-hidden="true" data-sap-ui-icon-content="'+e+'" class="sapCalculationBuilderEmptyItemIcon sapUiIcon sapUiIconMirrorInRTL sapCalculationBuilderExpressionSAPFont"></span>'};var u=function(t){return' aria-label="'+l.getText(t)+'" '};if(this._bIsNew||this._isEmpty()){e=' title="'+l.getText("CALCULATION_BUILDER_NEW_ITEM_TITLE")+'" '}else if(r[i]){e=u("CALCULATION_BUILDER_"+r[i]+"_ARIA_LABEL")}t+='<div class="sapCalculationBuilderItemContentWrapper">';t+='<div id="'+this.getId()+'-content" class="sapCalculationBuilderItemContent"'+e+'" aria-haspopup="dialog">';s();if(this._isEmpty()){o("");t+="</div>"}else if(this._bIsNew){o("");t+="</div>"}else if(this._isFunction()){var p=this._getFunction();t+='<span class="sapCalculationBuilderItemLabel sapCalculationBuilderItemFunctionLabel">';t+=n(p.title||this.getKey());t+="</span>";t+='<span class="sapCalculationBuilderItemLabel sapCalculationBuilderItemFunctionBracket">';t+="&nbsp;(";t+="</span>";t+="</div>"}else{t+='<span class="sapCalculationBuilderItemLabel">';t+=n(i);t+="</span>";t+="</div>"}t+="</div>";if(this._isVariable()&&this.isExpandable()){a()}return t};p.prototype._getClass=function(t){var e="",i=this._isEmpty();e+=this._bIsNew?"sapCalculationBuilderNewItem  sapCalculationBuilderCancelSelectable":"sapCalculationBuilderItem";if(i){e+=" sapCalculationBuilderNewItem "}if(this._isBracket()){e+=" sapCalculationBuilderItemBracket "}else if(this._isOperator()){e+=" sapCalculationBuilderItemOperator sapCalculationBuilderItemOperatorLength-"+this._getLabel().length+" ";if(this._isLogicalOperator()){e+=" sapCalculationBuilderItemLogicalOperator "}}else if(this._isCustomOperator()){e+=" sapCalculationBuilderItemOperator sapCalculationBuilderItemCustomOperator "}else if(this._isFunction()){e+=" sapCalculationBuilderItemFunction "}else if(this._isLiteral()){e+=" sapCalculationBuilderItemLiteral "}else if(this._isVariable()){e+=" sapCalculationBuilderItemVariable ";if(this.isExpandable()){e+=" sapCalculationBuilderItemVariableSeparator "}}else{e+=" sapCalculationBuilderUnknownItem "}if(t){e+=" sapCalculationBuilderItemErrorSyntax "}return e};p.prototype._render=function(){if(!this.getParent()){return}var t=this._hasCorrectParent(),e=this._getItemError(),i=this._getTooltip(),r=i?'title="'+i+'"':"",n=this._bIsNew?'role="button"':"",s="";s+='<div class="'+this._getClass(!!e)+'" id="'+this.getId()+'" tabindex="'+(t?"-1":"0")+'"'+r+n+">";s+=this._innerRender();s+="</div>";return s};p.prototype.init=function(){this._bIsNew=false};p.prototype.onBeforeRendering=function(){this._oVariable=this.getVariable()};p.prototype.onAfterRendering=function(){this._afterRendering()};p.prototype._afterRendering=function(){var t=this.getParent();if(!t){return}this._setEvents();if(!this._bIsNew&&!this._bReadOnly){this._setupDraggable()}if(this._hasCorrectParent(t)){if(!t._bIsCalculationBuilderRendering){t._setupKeyboard();t.getParent()._enableOrDisableExpandAllButton()}}};p.prototype._setEvents=function(){if(this.isExpandable()){this.$("expandbutton").on("click",this._expandButtonPress.bind(this));this.$("expandbutton").on("mousedown",function(t){t.stopPropagation()})}if(!this._bReadOnly){this.$("content").on("click",this._buttonPress.bind(this))}if(this._isBracket()||this._isFunction()){this._setBracketHover()}};p.prototype._buttonPress=function(t){var e=this.getParent();if(this._hasCorrectParent(e)&&!e._bDragging){if(t.ctrlKey){e._selectItem(this.$())}else if(t.shiftKey){e._selectItemsTo(this.$())}else{e._deselect();e._openDialog({opener:this,currentItem:this})}}};p.prototype._expandButtonPress=function(t){if(!this._bReadOnly){this._openExpandConfirmMessageBox()}};p.prototype.isExpandable=function(){var t=this._oVariable?this._oVariable:this.getVariable();return t&&t.getItems().length>0};p.prototype.getVariable=function(){var t=this.getParent();return this._hasCorrectParent(t)&&t._getVariableByKey(this.getKey())};p.prototype.getType=function(){return this._getType()};p.prototype._setupDraggable=function(){var e=this.getParent(),i=e.$(),r=this.$();r.draggable({revert:"invalid",axis:"x",delay:100,cursor:"move",helper:function(t){var e=r.clone();e.addClass("sapCalculationBuilderDragging");e.css("pointer-events","none");return e},scope:e.getId()+"-scope",start:function(){i.find(".sapCalculationBuilderBracket").removeClass("sapCalculationBuilderBracket");i.find(".sapCalculationBuilderItemContent").css("cursor","move");t(this).addClass("sapCalculationBuilderDragging");e._bDragging=true;if(!t(this).hasClass("ui-selected")){e._deselect()}},stop:function(){t(this).removeClass("sapCalculationBuilderDragging");i.find(".sapCalculationBuilderItemContent").css("cursor","pointer");e._bDragging=false}});s._setupMobileDraggable(r)};p.prototype._setBracketHover=function(){var t=this.$("content"),e=this._isFunction()?o["("]:this.getKey(),i=e===o[")"],r=i?o["("]:o[")"],n;t.mouseenter(function(t){var s,a,o=0,u=this._hasCorrectParent()&&this.getParent().getItems()||[],l=i?u.length:0;for(;i?l>=0:l<u.length;i?l--:l++){s=u[l];if(s===this){a=true}if(a){if(s.getKey()===r||s._isFunction()&&i){o--;if(o===0){n=s;break}}else if(s.getKey()===e||s._isFunction()&&!i){o++}}}if(n){this.$().addClass("sapCalculationBuilderBracket");n.$().addClass("sapCalculationBuilderBracket")}}.bind(this));t.on("mouseleave",function(t){this.$().removeClass("sapCalculationBuilderBracket");if(n){n.$().removeClass("sapCalculationBuilderBracket")}}.bind(this))};p.prototype._expandVariable=function(t){var e=this.getParent(),i,r;if(e){i=e.getItems().indexOf(this);r=e._getVariableByKey(this.getKey());e.insertItem(new p({key:"("}),i++);r.getItems().forEach(function(t){e.insertItem(t._cloneItem(),i++)});e.insertItem(new p({key:")"}),i++);e.removeItem(this);if(t){e._aErrors=e._validateSyntax();e._fireChange()}}};p.prototype._cloneItem=function(){return new p({key:this.getKey()})};p.prototype._openExpandConfirmMessageBox=function(){r.show(l.getText("CALCULATION_BUILDER_EXPAND_MESSAGE_TEXT",this._getLabel()),{icon:r.Icon.WARNING,title:l.getText("CALCULATION_BUILDER_EXPAND_MESSAGE_TITLE"),actions:[r.Action.OK,r.Action.CANCEL],onClose:function(t){var e;if(t===r.Action.OK){this._expandVariable(true)}else{e=this.getParent();if(e){e._setCorrectFocus()}}}.bind(this)})};p.prototype._getItemError=function(){var e=this.getParent(),i;if(this._hasCorrectParent(e)){i=t.grep(e._aErrors,function(t){return t.index===this._iIndex}.bind(this))[0]}return i};p.prototype._getLabel=function(){var t=function(){var t=this._getItem();if(!t){return this.getKey()}if(t.title){return t.title}if(t._getLabel){return t._getLabel()}return t.getText()||t.getKey()}.bind(this);if(!this._sLabel){this._sLabel=t();if(this._isFunction()){this._sLabel+=" ("}}return this._sLabel};p.prototype._sanitizeKey=function(t){if(!t||typeof t!=="string"){return t}t=t.replace(/{/g,"&#125;");t=t.replace(/}/g,"&#123;");return t};p.prototype._reset=function(){this._sType="";this._sLabel="";this._oVariable=""};p.prototype.setKey=function(t,e){this._reset();this.setProperty("key",this._sanitizeKey(t),e);var i=this.getParent();if(i&&i._bRendered){i.getParent()&&i.getParent()._expressionChanged()}return this};p.prototype.getKey=function(){var t=this.getProperty("key");t=t.replace(/&#125;/g,"{");t=t.replace(/&#123;/g,"}");return t};p.prototype._getType=function(){var t=this.getParent();if(!this._sType&&t){this._sType=t._getType(this.getKey())}return this._sType};p.prototype._isEmpty=function(){return!this._bIsNew&&!this.getKey()};p.prototype._isOperator=function(){return this._getType()===a.Operator};p.prototype._isSecondaryOperator=function(){var t=this._getType();if(this._getType()===a.Operator){return["+","-","/","*","(",")",","].indexOf(this.getKey())===-1}return t===a.CustomOperator};p.prototype._isCustomOperator=function(){return this._getType()===a.CustomOperator};p.prototype._isVariable=function(){return this._getType()===a.Variable};p.prototype._isLiteral=function(){return this._getType()===a.Literal};p.prototype._isFunction=function(){var t=this._getType();return t===a.Function||t===a.CustomFunction};p.prototype._getFunction=function(){var t=this._getType();if(t===a.Function||t===a.CustomFunction){var e=this.getParent().getParent();return e._createFunctionObject(e._getFunctionDefinition(this.getKey()))}return null};p.prototype._getItemInstance=function(e,i){if(this._getType()===e){var r=this.getKey(),n=this.getParent()[i]();return t.grep(n,function(t){return t.getKey().toLowerCase()===r.toLowerCase()})[0]}return null};p.prototype._getItem=function(){var t=this._getType();switch(t){case a.Variable:return this._getVariable();case a.CustomFunction:return this._getCustomFunction();case a.CustomOperator:return this._getCustomOperator()}return null};p.prototype._getTooltip=function(){var t=this._getItem();return t&&t.getTooltip_AsString?t.getTooltip_AsString():""};p.prototype._getVariable=function(){return this._getItemInstance(a.Variable,"getVariables")};p.prototype._getCustomFunction=function(){return this._getItemInstance(a.CustomFunction,"getFunctions")};p.prototype._getCustomOperator=function(){return this._getItemInstance(a.CustomOperator,"getOperators")};p.prototype._isBracket=function(){return this._isOperator()&&(this.getKey()==="("||this.getKey()===")")};p.prototype._isAddition=function(){return this._isOperator()&&this.getKey()==="+"};p.prototype._isSubtraction=function(){return this._isOperator()&&this.getKey()==="-"};p.prototype._isDivision=function(){return this._isOperator()&&this.getKey()==="/"};p.prototype._isMultiplication=function(){return this._isOperator()&&this.getKey()==="*"};p.prototype._isComma=function(){return this._isOperator()&&this.getKey()===","};p.prototype._isLogicalOperator=function(){return this._isOperator()&&!!u[this.getKey()]};p.prototype._hasCorrectParent=function(t){t=t||this.getParent();return t instanceof sap.suite.ui.commons.CalculationBuilderExpression};return p});
sap.ui.predefine("sap/suite/ui/commons/CalculationBuilderValidationResult",["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/base/ManagedObject"],function(r,t,o,i){"use strict";var s=i.extend("sap.suite.ui.commons.CalculationBuilderValidationResult",{constructor:function(){i.prototype.constructor.apply(this,arguments);this._aErrors=[]}});s.prototype.addError=function(r){this._aErrors.push(r)};s.prototype.addErrors=function(t){r.merge(this._aErrors,t)};s.prototype.getErrors=function(){return this._aErrors};return s});
sap.ui.predefine("sap/suite/ui/commons/CalculationBuilderVariable",["./library","sap/ui/core/Control"],function(e,t){"use strict";var i=t.extend("sap.suite.ui.commons.CalculationBuilderVariable",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null},group:{type:"string",group:"Misc"}},aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"Item"}}}});i.prototype._getLabel=function(){return this.getLabel()||this.getKey()};return i});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ChartContainer",["sap/ui/thirdparty/jquery","./library","sap/m/library","sap/viz/library","sap/ui/base/ManagedObject","sap/m/Button","sap/m/OverflowToolbar","sap/m/OverflowToolbarButton","sap/m/SegmentedButton","sap/m/Title","sap/m/ToolbarSpacer","sap/ui/Device","sap/ui/core/Control","sap/ui/core/CustomData","sap/ui/core/ResizeHandler","sap/ui/core/delegate/ScrollEnablement","sap/m/ToggleButton","sap/m/OverflowToolbarToggleButton","sap/base/util/uid","sap/base/Log","./ChartContainerRenderer","sap/suite/ui/commons/util/FullScreenUtil"],function(t,e,o,i,n,s,r,a,l,h,u,g,c,d,p,_,f,m,S,C,b,y){"use strict";var B=o.ButtonType;var T=c.extend("sap.suite.ui.commons.ChartContainer",{metadata:{library:"sap.suite.ui.commons",properties:{showPersonalization:{type:"boolean",group:"Misc",defaultValue:false},showFullScreen:{type:"boolean",group:"Misc",defaultValue:false},fullScreen:{type:"boolean",group:"Misc",defaultValue:false},showLegend:{type:"boolean",group:"Misc",defaultValue:true},title:{type:"string",group:"Misc",defaultValue:""},selectorGroupLabel:{type:"string",group:"Misc",defaultValue:null,deprecated:true},autoAdjustHeight:{type:"boolean",group:"Misc",defaultValue:false},showZoom:{type:"boolean",group:"Misc",defaultValue:true},showLegendButton:{type:"boolean",group:"Misc",defaultValue:true},showSelectionDetails:{type:"boolean",group:"Behavior",defaultValue:false},wrapLabels:{type:"boolean",group:"Misc",defaultValue:false},enableScroll:{type:"boolean",group:"Misc",defaultValue:true},width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"}},defaultAggregation:"content",aggregations:{dimensionSelectors:{type:"sap.ui.core.Control",multiple:true,singularName:"dimensionSelector"},content:{type:"sap.suite.ui.commons.ChartContainerContent",multiple:true,singularName:"content"},toolbar:{type:"sap.m.OverflowToolbar",multiple:false},customIcons:{type:"sap.ui.core.Icon",multiple:true,singularName:"customIcon"}},events:{personalizationPress:{},contentChange:{parameters:{selectedItemId:{type:"string"}}},customZoomInPress:{},customZoomOutPress:{}}}});T.prototype.init=function(){this._aUsedContentIcons=[];this._aCustomIcons=[];this._oToolBar=null;this._aDimensionSelectors=[];this._bChartContentHasChanged=false;this._bControlNotRendered=true;this._bSegmentedButtonSaveSelectState=false;this._mOriginalVizFrameHeights={};this._oActiveChartButton=null;this._oSelectedContent=null;this._sResizeListenerId=null;this._bHasApplicationToolbar=false;this._iPlaceholderPosition=0;this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oFullScreenButton=new m({icon:"sap-icon://full-screen",type:B.Transparent,text:this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"),tooltip:this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"),press:this._onFullScreenButtonPress.bind(this)});this._oShowLegendButton=new f({icon:"sap-icon://legend",type:B.Transparent,tooltip:this._oResBundle.getText("CHARTCONTAINER_LEGEND"),press:this._onShowLegendButtonPress.bind(this)});this._oPersonalizationButton=new a({icon:"sap-icon://action-settings",type:B.Transparent,text:this._oResBundle.getText("CHARTCONTAINER_PERSONALIZE"),tooltip:this._oResBundle.getText("CHARTCONTAINER_PERSONALIZE"),press:this._onPersonalizationButtonPress.bind(this)});this._oZoomInButton=new a({icon:"sap-icon://zoom-in",type:B.Transparent,text:this._oResBundle.getText("CHARTCONTAINER_ZOOMIN"),tooltip:this._oResBundle.getText("CHARTCONTAINER_ZOOMIN"),press:this._zoom.bind(this,true)});this._oZoomOutButton=new a({icon:"sap-icon://zoom-out",type:B.Transparent,text:this._oResBundle.getText("CHARTCONTAINER_ZOOMOUT"),tooltip:this._oResBundle.getText("CHARTCONTAINER_ZOOMOUT"),press:this._zoom.bind(this,false)});this._oChartSegmentedButton=new l({select:this._onChartSegmentButtonSelect.bind(this),width:"auto"});this._oChartTitle=new h};T.prototype.onAfterRendering=function(){this._sResizeListenerId=p.register(this,this._performHeightChanges.bind(this));if(!g.system.desktop){g.resize.attachHandler(this._performHeightChanges,this)}if(this.getAutoAdjustHeight()||this.getFullScreen()){setTimeout(function(){var t=this._performHeightChanges.bind(this);if(typeof t==="string"||t instanceof String){t=this[t]}t.apply(this,[])}.bind(this),500)}var t=this.getSelectedContent(),e=false,o;if(t){o=t.getContent();e=o&&o.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame"}if(this.getEnableScroll()){this._oScrollEnablement=new _(this,this.getId()+"-wrapper",{horizontal:!e,vertical:!e})}this._bControlNotRendered=false;if(this.getTitle()&&(this.getToolbar().getContent().length===2&&this.getToolbar().getContent()[0]instanceof sap.m.Title)){this.getToolbar().setActive(true)}};T.prototype.onBeforeRendering=function(){if(this._sResizeListenerId){p.deregister(this._sResizeListenerId);this._sResizeListenerId=null}if(!g.system.desktop){g.resize.detachHandler(this._performHeightChanges,this)}if(this._bChartContentHasChanged||this._bControlNotRendered){this._chartChange()}var t=this._aCustomIcons;this._aCustomIcons=[];var e=this.getAggregation("customIcons");if(e&&e.length>0){for(var o=0;o<e.length;o++){this._addButtonToCustomIcons(e[o])}}if(this._bControlNotRendered){if(!this.getToolbar()){this.setAggregation("toolbar",new r({design:"Transparent"}))}}this._adjustDisplay();this._destroyButtons(t);var i=this.getSelectedContent();if(i){var n=i.getContent();if(n&&n.attachRenderComplete){n.detachRenderComplete(this._checkZoomIcons,this);n.attachRenderComplete(this._checkZoomIcons,this)}}this._oShowLegendButton.setPressed(this.getShowLegend())};T.prototype.exit=function(){if(this._oFullScreenButton){this._oFullScreenButton.destroy();this._oFullScreenButton=undefined}if(this._oFullScreenUtil){this._oFullScreenUtil.cleanUpFullScreen(this)}if(this._oShowLegendButton){this._oShowLegendButton.destroy();this._oShowLegendButton=undefined}if(this._oPersonalizationButton){this._oPersonalizationButton.destroy();this._oPersonalizationButton=undefined}if(this._oActiveChartButton){this._oActiveChartButton.destroy();this._oActiveChartButton=undefined}if(this._oChartSegmentedButton){this._oChartSegmentedButton.destroy();this._oChartSegmentedButton=undefined}if(this._oSelectedContent){this._oSelectedContent.destroy();this._oSelectedContent=undefined}if(this._oToolBar){this._oToolBar.destroy();this._oToolBar=undefined}if(this._oToolbarSpacer){this._oToolbarSpacer.destroy();this._oToolbarSpacer=undefined}if(this._aDimensionSelectors){for(var t=0;t<this._aDimensionSelectors.length;t++){if(this._aDimensionSelectors[t]){this._aDimensionSelectors[t].destroy()}}this._aDimensionSelectors=undefined}if(this._oScrollEnablement){this._oScrollEnablement.destroy();this._oScrollEnablement=undefined}if(this._sResizeListenerId){p.deregister(this._sResizeListenerId);this._sResizeListenerId=null}if(!g.system.desktop){g.resize.detachHandler(this._performHeightChanges,this)}if(this._oZoomInButton){this._oZoomInButton.destroy();this._oZoomInButton=undefined}if(this._oZoomOutButton){this._oZoomOutButton.destroy();this._oZoomOutButton=undefined}};T.prototype._onButtonIconPress=function(t){var e=t.getSource().getCustomData()[0].getValue();this._switchChart(e)};T.prototype._onFullScreenButtonPress=function(t){if(t.getParameter("pressed")===true){this._oFullScreenButton.setTooltip(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN_CLOSE"));this._oFullScreenButton.setText(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN_CLOSE"));this._oFullScreenButton.setIcon("sap-icon://exit-full-screen")}else{this._oFullScreenButton.setTooltip(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"));this._oFullScreenButton.setText(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"));this._oFullScreenButton.setIcon("sap-icon://full-screen")}this._bSegmentedButtonSaveSelectState=true;this._toggleFullScreen();this._oFullScreenButton.focus()};T.prototype._onShowLegendButtonPress=function(t){this._bSegmentedButtonSaveSelectState=true;this._onLegendButtonPress()};T.prototype._onChartSegmentButtonSelect=function(t){var e=t.getParameter("button").getCustomData()[0].getValue();this._bSegmentedButtonSaveSelectState=true;this._switchChart(e)};T.prototype._onOverflowToolbarButtonPress=function(t,e){e.icon.firePress({controlReference:t.getSource()})};T.prototype._onLegendButtonPress=function(){var e=this.getSelectedContent();if(e){var o=e.getContent();if(t.isFunction(o.getLegendVisible)){var i=o.getLegendVisible();o.setLegendVisible(!i);this.setShowLegend(!i)}else{this.setShowLegend(!this.getShowLegend())}}else{this.setShowLegend(!this.getShowLegend())}};T.prototype._checkZoomIcons=function(t){if(t.getSource()._getZoomInfo){var e=t.getSource()._getZoomInfo();if(e){this._manageZoomIcons(e.currentZoomLevel)}}};T.prototype._onPersonalizationButtonPress=function(){this.firePersonalizationPress()};T.prototype._setSelectedContent=function(e){var o;if(this.getSelectedContent()===e){return this}if(e===null){this._oShowLegendButton.setVisible(false);return this}var i=e.getContent();this._toggleShowLegendButtons(i);o=i&&i.getMetadata&&i.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame";var n=o||t.isFunction(i.setLegendVisible);if(this.getShowLegendButton()){this._oShowLegendButton.setVisible(n)}var s=this.getShowZoom()&&g.system.desktop&&o;this._oZoomInButton.setVisible(s);this._oZoomOutButton.setVisible(s);this._oSelectedContent=e;return this};T.prototype._getSelectionDetails=function(){var t=this.getSelectedContent();return t&&t._getSelectionDetails()};T.prototype._toggleShowLegendButtons=function(t){var e=t.getId();var o=null;for(var i=0;!o&&i<this._aUsedContentIcons.length;i++){if(this._aUsedContentIcons[i].getCustomData()[0].getValue()===e&&t.getVisible()===true){o=this._aUsedContentIcons[i];this._oChartSegmentedButton.setSelectedButton(o);break}}};T.prototype._setDefaultOnSegmentedButton=function(){if(!this._bSegmentedButtonSaveSelectState){this._oChartSegmentedButton.setSelectedButton(null)}this._bSegmentedButtonSaveSelectState=false};T.prototype._toggleFullScreen=function(){var t=this.getProperty("fullScreen");var e=function(t,e,o){this._oFullScreenButton.setIcon(t);this._oFullScreenButton.setText(e);this._oFullScreenButton.setTooltip(e);this._oFullScreenButton.setPressed(o)}.bind(this);var o;var i=this.getAggregation("content");if(t){this.setProperty("fullScreen",false,true);e("sap-icon://full-screen",this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"),false);for(var n=0;n<i.length;n++){o=i[n].getContent();o.setWidth("100%");if(typeof o.getHeight!=="undefined"){o.setHeight(this._sChartOriginalHeight)}}this.invalidate()}else{this.setProperty("fullScreen",true,true);e("sap-icon://exit-full-screen",this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN_CLOSE"),true);for(var n=0;n<i.length;n++){o=i[n].getContent();o.setWidth("100%");if(typeof o.getHeight!=="undefined"){this._sChartOriginalHeight=o.getHeight()}}}t=!t;if(!this._oFullScreenUtil){this._oFullScreenUtil=y}this._oFullScreenUtil.toggleFullScreen(this,t,this._oFullScreenButton,this._toggleFullScreen)};T.prototype._performHeightChanges=function(){var t,e;if(this.getAutoAdjustHeight()||this.getFullScreen()){var o=this.$(),i,n,s;t=o.find(".sapSuiteUiCommonsChartContainerToolBarArea :first");e=o.find(".sapSuiteUiCommonsChartContainerChartArea :first");i=this.getSelectedContent();if(t[0]&&e[0]&&i){var r=o.height();var a=t.height();var l=Math.round(parseFloat(t.css("borderBottomWidth")));var h=r-a-l;var u=e.height();n=i.getContent();if(n){s=n.getMetadata().getName();if(s==="sap.viz.ui5.controls.VizFrame"||s==="sap.chart.Chart"){if(h>0&&h!==u){this._rememberOriginalHeight(n);n.setHeight(h+"px")}}else if(this.$("chartArea").innerWidth()&&n.$().innerWidth()!==this.$("chartArea").innerWidth()){this.rerender()}}}}};T.prototype._rememberOriginalHeight=function(e){var o;if(t.isFunction(e.getHeight)){o=e.getHeight()}else{o=0}this._mOriginalVizFrameHeights[e.getId()]=o};T.prototype._switchChart=function(t){var e=this._findChartById(t);this._setSelectedContent(e);this.fireContentChange({selectedItemId:t});this.rerender()};T.prototype._chartChange=function(){var e=this.getContent();this._destroyButtons(this._aUsedContentIcons);this._aUsedContentIcons=[];if(this.getContent().length===0){this._oChartSegmentedButton.removeAllButtons();this._setDefaultOnSegmentedButton();this.switchChart(null)}if(e){var o=this.getShowLegend();var i;var n;for(var r=0;r<e.length;r++){if(!e[r].getVisible()){continue}i=e[r].getContent();if(t.isFunction(i.setVizProperties)){i.setVizProperties({legend:{visible:o},sizeLegend:{visible:o}})}if(t.isFunction(i.setWidth)){i.setWidth("100%")}if(t.isFunction(i.setHeight)&&this._mOriginalVizFrameHeights[i.getId()]){i.setHeight(this._mOriginalVizFrameHeights[i.getId()])}n=new s({icon:e[r].getIcon(),type:B.Transparent,tooltip:e[r].getTitle(),customData:[new d({key:"chartId",value:i.getId()})],press:this._onButtonIconPress.bind(this)});this._aUsedContentIcons.push(n);if(r===0){this._setSelectedContent(e[r]);this._oActiveChartButton=n}}}this._bChartContentHasChanged=false};T.prototype._findChartById=function(t){var e=this.getAggregation("content");if(e){for(var o=0;o<e.length;o++){if(e[o].getContent().getId()===t){return e[o]}}}return null};T.prototype._getToolbarPlaceHolderPosition=function(t){var e;for(var o=0;o<t.getContent().length;o++){e=t.getContent()[o];if(e.getMetadata&&e.getMetadata().getName()==="sap.suite.ui.commons.ChartContainerToolbarPlaceholder"){return o}}return-1};T.prototype._addContentToolbar=function(t,e){if(!this._bHasApplicationToolbar){if(!e){this._oToolBar.addContent(t)}else{this._oToolBar.insertContent(t,e)}}else{if(t instanceof u){this._iPlaceholderPosition=this._getToolbarPlaceHolderPosition(this._oToolBar);return}if(e){this._iPlaceholderPosition=this._iPlaceholderPosition+e}this._oToolBar.insertContent(t,this._iPlaceholderPosition);this._iPlaceholderPosition=this._iPlaceholderPosition+1}};T.prototype._rearrangeToolbar=function(){var t=this._aToolbarContent.length;for(var e=0;e<t;e++){this._oToolBar.insertContent(this._aToolbarContent[e],e)}};T.prototype._adjustIconsDisplay=function(){if(this.getShowSelectionDetails()){this._addContentToolbar(this._getSelectionDetails())}if(this.getShowLegendButton()){this._addContentToolbar(this._oShowLegendButton)}if(this.getShowZoom()&&g.system.desktop){this._addContentToolbar(this._oZoomInButton);this._addContentToolbar(this._oZoomOutButton)}if(this.getShowPersonalization()){this._addContentToolbar(this._oPersonalizationButton)}if(this.getShowFullScreen()){this._addContentToolbar(this._oFullScreenButton)}var t=0;for(t;t<this._aCustomIcons.length;t++){this._addContentToolbar(this._aCustomIcons[t])}if(!this._bControlNotRendered){this._oChartSegmentedButton.removeAllButtons()}var e=this._aUsedContentIcons.length;if(e>1){for(t=0;t<e;t++){this._oChartSegmentedButton.addButton(this._aUsedContentIcons[t])}this._addContentToolbar(this._oChartSegmentedButton)}};T.prototype._adjustSelectorDisplay=function(){if(this._aDimensionSelectors.length===0){this._oChartTitle.setVisible(true);this._addContentToolbar(this._oChartTitle);return}for(var e=0;e<this._aDimensionSelectors.length;e++){if(t.isFunction(this._aDimensionSelectors[e].setAutoAdjustWidth)){this._aDimensionSelectors[e].setAutoAdjustWidth(true)}this._addContentToolbar(this._aDimensionSelectors[e])}};T.prototype._adjustDisplay=function(){this._oToolBar=this.getToolbar();if(this._oToolbarSpacer){this._oToolBar.removeContent(this._oToolbarSpacer);this._oToolbarSpacer.destroy()}this._oToolBar.removeAllContent();this._oToolBar.setProperty("height","3rem",true);if(this._bHasApplicationToolbar){this._rearrangeToolbar();this._iPlaceholderPosition=0}this._adjustSelectorDisplay();this._oToolbarSpacer=new u;this._addContentToolbar(this._oToolbarSpacer);this._adjustIconsDisplay()};T.prototype._addButtonToCustomIcons=function(t){var e=t;var o=e.getTooltip();var i=new a({icon:e.getSrc(),text:o,tooltip:o,type:B.Transparent,visible:e.getVisible(),press:[{icon:e},this._onOverflowToolbarButtonPress.bind(this)]});this._aCustomIcons.push(i)};T.prototype._zoom=function(t){var e=this.getSelectedContent().getContent();if(e.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame"){if(t){e.zoom({direction:"in"})}else{e.zoom({direction:"out"})}}if(t){this.fireCustomZoomInPress()}else{this.fireCustomZoomOutPress()}this._manageZoomIcons(e._getZoomInfo().currentZoomLevel)};T.prototype._manageZoomIcons=function(t){if(t===undefined){return}else if(t===null){this._oZoomOutButton.setEnabled(false);this._oZoomInButton.setEnabled(false)}else if(t===0){this._oZoomOutButton.setEnabled(false);this._oZoomInButton.setEnabled(true)}else if(t===1){this._oZoomInButton.setEnabled(false);this._oZoomOutButton.setEnabled(true)}else{if(this._oZoomOutButton.getEnabled()==false){this._oZoomOutButton.setEnabled(true)}if(this._oZoomInButton.getEnabled()==false){this._oZoomInButton.setEnabled(true)}}};T.prototype._destroyButtons=function(t){for(var e=0;e<t.length;e++){t[e].destroy()}};T.prototype._setShowLegendForAllCharts=function(e){var o=this.getContent();var i;for(var n=0;n<o.length;n++){i=o[n].getContent();if(t.isFunction(i.setLegendVisible)){i.setLegendVisible(e)}else{C.info("ChartContainer: chart with id "+i.getId()+" is missing the setVizProperties property")}}};T.prototype.setFullScreen=function(t){if(this._bControlNotRendered){return this}if(this.getFullScreen()===t){return this}if(this.getProperty("fullScreen")!==t){this._toggleFullScreen()}return this};T.prototype.setTitle=function(t){if(this.getTitle()===t){return this}this._oChartTitle.setText(t);this.setProperty("title",t,true);return this};T.prototype.setShowLegendButton=function(t){if(this.getShowLegendButton()===t){return this}this.setProperty("showLegendButton",t,true);if(!this.getShowLegendButton()){this.setShowLegend(false)}return this};T.prototype.setSelectorGroupLabel=function(t){if(this.getSelectorGroupLabel()===t){return this}this.setProperty("selectorGroupLabel",t,true);return this};T.prototype.setShowLegend=function(t){if(this.getShowLegend()===t){return this}this.setProperty("showLegend",t,true);this._setShowLegendForAllCharts(t);return this};T.prototype.setWrapLabels=function(t){var e;if(this.getWrapLabels()!==t){this.setProperty("wrapLabels",t);e=this._getSelectionDetails();if(e){e.setWrapLabels(t)}}return this};T.prototype.setToolbar=function(t){if(!t||this._getToolbarPlaceHolderPosition(t)===-1){C.info("A placeholder of type 'sap.suite.ui.commons.ChartContainerToolbarPlaceholder' needs to be provided. Otherwise, the toolbar will be ignored");return this}if(this.getToolbar()!==t){this.setAggregation("toolbar",t)}if(this.getToolbar()){this._aToolbarContent=this.getToolbar().getContent();this._bHasApplicationToolbar=true}else{this._aToolbarContent=null;this._bHasApplicationToolbar=false}this.invalidate();return this};T.prototype.getDimensionSelectors=function(){return this._aDimensionSelectors};T.prototype.indexOfDimensionSelector=function(t){for(var e=0;e<this._aDimensionSelectors.length;e++){if(this._aDimensionSelectors[e]===t){return e}}return-1};T.prototype.addDimensionSelector=function(t){this._aDimensionSelectors.push(t);return this};T.prototype.insertDimensionSelector=function(t,e){if(!t){return this}var o;if(e<0){o=0}else if(e>this._aDimensionSelectors.length){o=this._aDimensionSelectors.length}else{o=e}if(o!==e){C.warning("ManagedObject.insertAggregation: index '"+e+"' out of range [0,"+this._aDimensionSelectors.length+"], forced to "+o)}this._aDimensionSelectors.splice(o,0,t);return this};T.prototype.destroyDimensionSelectors=function(){if(this._oToolBar){for(var t=0;t<this._aDimensionSelectors.length;t++){if(this._aDimensionSelectors[t]){this._oToolBar.removeContent(this._aDimensionSelectors[t]);this._aDimensionSelectors[t].destroy()}}}this._aDimensionSelectors=[];return this};T.prototype.removeDimensionSelector=function(t){if(!t){return null}if(this._oToolBar){this._oToolBar.removeContent(t)}var e=this.indexOfDimensionSelector(t);if(e===-1){return null}else{return this._aDimensionSelectors.splice(e,1)[0]}};T.prototype.removeAllDimensionSelectors=function(){var t=this._aDimensionSelectors.slice();if(this._oToolBar){for(var e=0;e<this._aDimensionSelectors.length;e++){if(this._aDimensionSelectors[e]){this._oToolBar.removeContent(this._aDimensionSelectors[e])}}}this._aDimensionSelectors=[];return t};T.prototype.addContent=function(t){this.addAggregation("content",t);this._bChartContentHasChanged=true;return this};T.prototype.insertContent=function(t,e){this.insertAggregation("content",t,e);this._bChartContentHasChanged=true;return this};T.prototype.updateContent=function(){this.updateAggregation("content");this._bChartContentHasChanged=true};T.prototype.addAggregation=function(t,e,o){if(t==="dimensionSelectors"){return this.addDimensionSelector(e)}else{return n.prototype.addAggregation.apply(this,arguments)}};T.prototype.getAggregation=function(t,e){if(t==="dimensionSelectors"){return this.getDimensionSelectors()}else{return n.prototype.getAggregation.apply(this,arguments)}};T.prototype.indexOfAggregation=function(t,e){if(t==="dimensionSelectors"){return this.indexOfDimensionSelector(e)}else{return n.prototype.indexOfAggregation.apply(this,arguments)}};T.prototype.insertAggregation=function(t,e,o,i){if(t==="dimensionSelectors"){return this.insertDimensionSelector(e,o)}else{return n.prototype.insertAggregation.apply(this,arguments)}};T.prototype.destroyAggregation=function(t,e){if(t==="dimensionSelectors"){return this.destroyDimensionSelectors()}else{return n.prototype.destroyAggregation.apply(this,arguments)}};T.prototype.removeAggregation=function(t,e,o){if(t==="dimensionSelectors"){return this.removeDimensionSelector(e)}else{return n.prototype.removeAggregation.apply(this,arguments)}};T.prototype.removeAllAggregation=function(t,e){if(t==="dimensionSelectors"){return this.removeAllDimensionSelectors()}else{return n.prototype.removeAllAggregation.apply(this,arguments)}};T.prototype.getSelectedContent=function(){return this._oSelectedContent};T.prototype.getScrollDelegate=function(){return this._oScrollEnablement};T.prototype.switchChart=function(t){this._setSelectedContent(t);this.rerender()};T.prototype.updateChartContainer=function(){this._bChartContentHasChanged=true;this.rerender();return this};T.prototype.setWidth=function(t){this.setProperty("width",t,true);this.$().css("width",this.getWidth());return this};return T});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ChartContainerContent",["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/base/Event","sap/m/SelectionDetails","sap/m/SelectionDetailsItem","sap/m/SelectionDetailsItemLine","sap/suite/ui/commons/ChartContainer","./ChartContainerContentRenderer"],function(e,t,i,a,n,o,s,r){"use strict";var l=t.extend("sap.suite.ui.commons.ChartContainerContent",{metadata:{library:"sap.suite.ui.commons",properties:{icon:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false}}}});l.prototype.init=function(){this._oSelectionDetails=new a;this._oSelectionDetails.registerSelectionDetailsItemFactory(l._selectionDetailsItemFactory)};l.prototype.onBeforeRendering=function(){var e=this.getParent(),t;this._oSelectionDetails.detachSelectionHandler("_selectionDetails");t=this.getContent();if(t&&t.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame"){this._oSelectionDetails.attachSelectionHandler("_selectionDetails",t)}if(e instanceof s){this._oSelectionDetails.setWrapLabels(e.getWrapLabels())}};l.prototype.exit=function(){if(this._oSelectionDetails){this._oSelectionDetails.destroy();this._oSelectionDetails=null}};l.prototype.getSelectionDetails=function(){l._addEventMapping(this._oSelectionDetails);return this._oSelectionDetails.getFacade()};l.prototype._getSelectionDetails=function(){var e=this.getContent();if(e&&e.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame"){return this._oSelectionDetails}};l._selectionDetailsItemFactory=function(e,t,i,a,s){s=s||"";var r=[],l,c=typeof s==="string";for(var u=0;u<e.length;u++){l=new o({label:e[u].label,value:e[u].value,unit:e[u].unit});if(!c){l.setLineMarker(s[e[u].id])}else if(u===0){l.setLineMarker(s)}r.push(l)}return new n({lines:r})};l._aProxyEvent=["beforeOpen","beforeClose","navigate","actionPress"];l._addEventMapping=function(t){var a=t.attachEvent;t.attachEvent=function(n,o,s,r){if(l._aProxyEvent.indexOf(n)===-1){a.apply(this,arguments);return}else if(e.type(o)==="function"){r=s;s=o;o=null}a.apply(t,[n,o,c,r||t.getFacade()]);function c(e){var a=new i(n,e.oSource,e.mParameters);a.getSource=t.getFacade;if(n==="actionPress"){e.getParameters().items=u(e)}else if(n==="navigate"){e.getParameters().item=e.getParameter("item").getFacade()}s.call(r||t.getFacade(),a,o)}function u(e){var t=e.getParameter("items"),i=[];for(var a=0;a<t.length;a++){i.push(t[a].getFacade())}return i}}};return l});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ChartContainerContentRenderer",function(){"use strict";var e={apiVersion:2};e.render=function(e,n){e.renderControl(n.getContent())};return e},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ChartContainerRenderer",function(){"use strict";var e={apiVersion:2};e.render=function(e,t){var n=t.getSelectedContent();e.openStart("div",t);e.class("sapSuiteUiCommonsChartContainer");e.style("width",t.getWidth());e.openEnd();e.openStart("div",t.getId()+"-wrapper");e.class("sapSuiteUiCommonsChartContainerWrapper");e.openEnd();e.openStart("div");e.class("sapSuiteUiCommonsChartContainerToolBarArea");e.openEnd();e.renderControl(t.getToolbar());e.close("div");e.openStart("div",t.getId()+"-chartArea");e.class("sapSuiteUiCommonsChartContainerChartArea");e.openEnd();if(n!==null){e.renderControl(n)}else if(t.getContent().length>0){n=t.getContent()[0];e.renderControl(n)}e.close("div");e.close("div");e.close("div")};return e},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ChartContainerToolbarPlaceholder",["sap/ui/core/Control","./ChartContainerToolbarPlaceholderRenderer"],function(e,r){"use strict";var a=e.extend("sap.suite.ui.commons.ChartContainerToolbarPlaceholder",{metadata:{library:"sap.suite.ui.commons"}});return a});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ChartContainerToolbarPlaceholderRenderer",function(){"use strict";var e={apiVersion:2};e.render=function(e,r){};return e},true);
sap.ui.predefine("sap/suite/ui/commons/CloudFileInfo",["sap/ui/base/ManagedObject"],function(e){"use strict";var t=e.extend("sap.suite.ui.commons.CloudFileInfo",{metadata:{library:"sap.suite.ui.commons",properties:{fileShareId:{type:"string",group:"Data"},fileShareItemId:{type:"string",group:"Data"},isFolder:{type:"boolean",group:"Data"},parentFileShareItemId:{type:"string",group:"Data"},fileShareItemName:{type:"string",group:"Data"},createdByUser:{type:"string",group:"Data"},creationDateTime:{type:"string",group:"Data"},lastChangedByUser:{type:"string",group:"Data"},lastChangeDateTime:{type:"string",group:"Data"},fileShareItemContent:{type:"string",group:"Data"},fileShareItemContentType:{type:"string",group:"Data"},fileShareItemContentSize:{type:"string",group:"Data"},fileShareItemContentLink:{type:"string",group:"Data"}}}});return t});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/CloudFilePicker",["sap/m/Button","sap/m/Dialog","sap/m/DialogRenderer","sap/m/List","sap/m/StandardListItem","sap/ui/model/odata/v4/ODataModel","sap/m/Select","sap/m/Label","sap/m/Input","sap/ui/layout/form/SimpleForm","sap/ui/core/IconPool","sap/m/Page","sap/m/Breadcrumbs","sap/m/Link","sap/m/Text","./CloudFileInfo","./library","sap/m/library","sap/ui/core/library","sap/ui/layout/FixFlex"],function(e,t,i,a,n,r,s,o,l,d,c,u,h,p,g,m,f,F,C,S){"use strict";var y=F.DialogType;var I=F.ButtonType;var b=C.ValueState;var v=f.FilePickerModes;var _,T,L,x,B,D,w;var k=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var O=t.extend("sap.suite.ui.commons.CloudFilePicker",{metadata:{library:"sap.suite.ui.commons",properties:{serviceUrl:{type:"sap.ui.core.URI",group:"Data",defaultValue:""},confirmButtonText:{type:"string",group:"Data",defaultValue:k.getText("CFP_BUTTON_SELECT")},filePickerMode:{type:"sap.suite.ui.commons.FilePickerModes",group:"Data",defaultValue:"All"},title:{type:"string",group:"Data",defaultValue:k.getText("CFP_TITLE")},enableDuplicateCheck:{type:"boolean",group:"Data",defaultValue:false},duplicateMessage:{type:"string",group:"Data"},suggestedFileName:{type:"string",group:"Data"},fileNameMandatory:{type:"boolean",group:"Data",defaultValue:false}},events:{select:{parameters:{replaceExistingFile:"boolean",selectedFileName:"string",selectedFiles:{type:"sap.suite.ui.commons.CloudFileInfo[]"},selectedFolder:{type:"sap.suite.ui.commons.CloudFileInfo"}}},cancel:{}}},constructor:function(){t.prototype.constructor.apply(this,arguments);this.setResizable(true);this._createDialogContent();this._createButton();this.setContentWidth("40%");this.setContentHeight("50%");this.setHorizontalScrolling(false);this.setVerticalScrolling(false);this.setTitle(this.getTitle())},renderer:i});O.prototype._createDialogContent=function(){var e=this.getServiceUrl();if(e){var t=new r({serviceUrl:e,synchronizationMode:"None"});this.setModel(t);var i=this._createCloudDropdownAndFileNameField();L=this._createBreadcrumbLinks();var a=this._createListContent();var n=new S({fixContent:[i,L],flexContent:a});this.addContent(n)}};O.prototype._createCloudDropdownAndFileNameField=function(){var e=new o({text:k.getText("CFP_LOCATION"),showColon:true,labelFor:this.getId()+"-cloudSpaceSelect"}).addStyleClass("sapUiTinyMarginTop");T=new s({selectedKey:"{FileShare}",id:this.getId()+"-cloudSpaceSelect",forceSelection:false,change:function(e){x.setValue(this.getSuggestedFileName());this._setConfirmationButtonEnabled(false);L.destroyLinks();this._initializeVisibleLinks();var t=e.getParameters().selectedItem;this._loadFileShareRootFolder(t.getKey())}.bind(this)}).bindItems({path:"/FileShares",template:new sap.ui.core.Item({key:"{FileShare}",text:{parts:["FileShare","FileShareDescription"],formatter:function(e,t){return t?t:e}}})});var t=new d({layout:"ResponsiveGridLayout",singleContainerFullSize:false});t.addContent(e);t.addContent(T);var i=new o({text:k.getText("CFP_FILENAME"),showColon:true,labelFor:this.getId()+"-fileName"}).addStyleClass("sapUiTinyMarginTop");x=new l({id:this.getId()+"-fileName",liveChange:function(e){_.removeSelections();this._setConfirmationButtonEnabled()}.bind(this)});t.addContent(i);t.addContent(x);if(this.getFilePickerMode()===v.FileOnly){x.setVisible(false)}else{x.setValue(this.getSuggestedFileName())}return t};O.prototype._createBreadcrumbLinks=function(){L=new h(this.getId()+"-breadcrumbs").addStyleClass("sapUiSmallMarginBegin sapUiSmallMarginEnd");D=new Map;this._initializeVisibleLinks();return L};O.prototype._initializeVisibleLinks=function(){var e={fileShareItemId:"Root",title:k.getText("CFP_FOLDER_ROOT")};B=[e];L.setCurrentLocationText(e.title);D.clear()};O.prototype._createListContent=function(){_=new a({mode:F.ListMode.SingleSelectMaster,select:function(e){var t=e.getParameters().listItem;var i=t.getBindingContext();var a=i.getObject("FileShareItemKind")==="folder";if(a){var n=this._createSelectionParameter(t);var r=n.getFileShareItemId();n.path=i.getCanonicalPath()+"/_Children";D.set(r,n);var s=i.getModel().createBindingContext(n.path);B.push({fileShareItemId:r,title:t.getTitle()});this._updateBreadcrumbLinks();_.setBindingContext(s)}else{var o=i.getProperty("FileShareItemName");x.setValue(o);this._setConfirmationButtonEnabled(true)}}.bind(this)});_.bindItems({path:"",template:new n({title:"{FileShareItemName}",icon:{parts:["FileShareItemKind","FileShareItemContentType"],formatter:function(e,t){if(e==="folder"){return"sap-icon://folder"}else{return c.getIconForMimeType(t)}}},type:"{= ${FileShareItemKind} === 'folder' ? 'Navigation' : 'Active'}"})});var e=new u({content:[_],enableScrolling:true,title:k.getText("CFP_LIST_HEADER")});return e};O.prototype._updateBreadcrumbLinks=function(){if(B&&B.length>1){var e=B.slice().reverse();var t=[];e.forEach(function(e,i,a){if(i==0){L.setCurrentLocationText(e.title)}else{var n=new p({text:e.title,press:function(e){var t=L.indexOfLink(e.getSource());var i=B.splice(t+1);var a,n;this._updateBreadcrumbLinks();if(B.length>1){a=D.get(B[B.length-1].fileShareItemId);for(var r in i){D.delete(i[r].fileShareItemId)}n=this.getModel().createBindingContext(a.path);_.setBindingContext(n)}else{this._loadFileShareRootFolder(T.getSelectedKey())}}.bind(this)});t.push(n)}}.bind(this));t.reverse();if(L.getLinks()){L.removeAllLinks()}for(var i=0;i<t.length;i++){L.addLink(t[i])}}else{L.destroyLinks();this._initializeVisibleLinks()}this._setConfirmationButtonEnabled(false)};O.prototype._loadFileShareRootFolder=function(e){D.clear();var t="/FileShares("+"'"+e+"'"+")/_Root/_Children";var i=this.getModel().createBindingContext(t);_.setBindingContext(i)};O.prototype._createButton=function(){w=new e({text:this.getConfirmButtonText(),type:I.Emphasized,press:function(){var e=x.getValue();if(this.getFilePickerMode()===v.FileOnly||e){if(this.getEnableDuplicateCheck()&&this._checkForDuplicate(_,e.toLowerCase())){this._showOverwriteMessage(e)}else{this._closeDialog()}}else{this._closeDialog()}}.bind(this)});this.addButton(w);this.addButton(new e({text:k.getText("CFP_BUTTON_CANCEL"),press:function(){this.fireCancel();this.close();setTimeout(function(){this.destroy()}.bind(this))}.bind(this)}));this._setConfirmationButtonEnabled(false)};O.prototype._setConfirmationButtonEnabled=function(e){if(this.getFilePickerMode()===v.FileOnly){w.setEnabled(e)}else if(this.getFileNameMandatory()){var e=x.getValue()!=="";w.setEnabled(e)}};O.prototype._checkForDuplicate=function(e,t){var i=e.getItems().find(function(i){if(i.getTitle().toLowerCase()===t){e.setSelectedItem(i);return true}return false});return!!i};O.prototype._showOverwriteMessage=function(i){var a=this.getDuplicateMessage();if(!a){a=k.getText("CFP_MESSAGE_DUPLICATE",i)}var n=new t({type:y.Message,title:k.getText("CFP_TITLE_WARNING"),state:b.Warning,content:new g({text:a}),beginButton:new e({type:I.Emphasized,text:k.getText("CFP_BUTTON_YES"),press:function(){n.close();this._closeDialog(true)}.bind(this)}),endButton:new e({text:k.getText("CFP_BUTTON_NO"),press:function(){n.close()}})});n.open()};O.prototype._closeDialog=function(e){var t={};if(B.length>1){t.selectedFolder=D.get(B[B.length-1].fileShareItemId)}else{t.selectedFolder=new m;t.selectedFolder.setFileShareId(T.getSelectedKey())}t.selectedFileName=x.getValue();t.replaceExistingFile=!!e;t.selectedFiles=[];var i=_.getSelectedItem();if(i){t.selectedFiles.push(this._createSelectionParameter(i))}this.fireEvent("select",t);this.close();setTimeout(function(){this.destroy()}.bind(this))};O.prototype._createSelectionParameter=function(e){var t=new m;var i=e.getBindingContext();t.setFileShareId(i.getObject("FileShare"));t.setFileShareItemId(i.getObject("FileShareItem"));t.setParentFileShareItemId(i.getObject("ParentFileShareItem"));t.setIsFolder(i.getObject("FileShareItemKind")==="folder");t.setFileShareItemName(i.getObject("FileShareItemName"));t.setCreatedByUser(i.getObject("CreatedByUser"));t.setCreationDateTime(i.getObject("CreationDateTime"));t.setLastChangedByUser(i.getObject("LastChangedByUser"));t.setLastChangeDateTime(i.getObject("LastChangeDateTime"));t.setFileShareItemContent(i.getObject("FileShareItemContent"));t.setFileShareItemContentType(i.getObject("FileShareItemContentType"));t.setFileShareItemContentSize(i.getObject("FileShareItemContentSize"));t.setFileShareItemContentLink(i.getObject("FileShareItemContentLink"));return t};return O});
sap.ui.predefine("sap/suite/ui/commons/ControlProxy",["./library","sap/ui/core/Control"],function(t,o){"use strict";var s=o.extend("sap.suite.ui.commons.ControlProxy",{metadata:{library:"sap.suite.ui.commons",association:{control:{type:"sap.ui.core.Control",multiple:false}}},renderer:function(t,o){var s=o.getAssociation("control"),e=sap.ui.getCore().byId(s);t.renderControl(e)}});s.prototype.setAssociation=function(t,s){o.prototype.setAssociation.apply(this,arguments);var e=this.getAssociation("control"),a=sap.ui.getCore().byId(e);if(a&&Array.isArray(this.aCustomStyleClasses)){this.aCustomStyleClasses.forEach(function(t){a.addStyleClass(t)})}};s.prototype.addStyleClass=function(t){o.prototype.addStyleClass.apply(this,arguments);var s=this.getAssociation("control"),e=sap.ui.getCore().byId(s);if(e){e.addStyleClass(t)}};return s});
sap.ui.predefine("sap/suite/ui/commons/MicroProcessFlow",["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/base/ManagedObject","sap/ui/core/delegate/ItemNavigation","sap/ui/core/ResizeHandler"],function(t,e,i,s,o,r,n){"use strict";var l=e.MicroProcessFlowRenderType;var a=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var c=function(t){return t[t.length-1]};var h=i.extend("sap.suite.ui.commons.MicroProcessFlow",{metadata:{library:"sap.suite.ui.commons",interfaces:["sap.ui.core.IFormContent"],properties:{ariaLabel:{type:"string",defaultValue:null},renderType:{type:"sap.suite.ui.commons.MicroProcessFlowRenderType",defaultValue:sap.suite.ui.commons.MicroProcessFlowRenderType.Wrap},width:{type:"sap.ui.core.CSSSize",defaultValue:""}},aggregations:{content:{type:"sap.suite.ui.commons.MicroProcessFlowItem",multiple:true,singularName:"content"}}},renderer:function(t,e){var i=e.getContent(),s=e.getWidth(),o=i.length,r=e.getAriaLabel();if(!e._bThemeApplied){return}t.write("<div ");t.writeAttributeEscaped("role","listbox");t.writeAttributeEscaped("aria-roledescription",a.getText("ACC_CTR_TYPE_MICRO_PROCESS_FLOW"));t.writeControlData(e);t.writeAttribute("aria-label",r);if(s){t.addStyle("width",s)}t.writeStyles();t.addClass("sapSuiteUiCommonsMicroProcessFlow");t.writeClasses(e);t.write(">");if(e._hasScrolling()){t.write('<div tabindex="0" id="'+e.getId()+'-leftscroller" class="sapSuiteUiCommonsMicroProcessFlowScroller sapSuiteUiCommonsMicroProcessFlowLeftScroller">');t.renderControl(e._getLeftScroller());t.write('<span id="'+e.getId()+'-leftlabel" class="sapSuiteUiCommonsMicroProcessFlowLeftLabel"></span>');t.write("</div>")}t.write('<div id="'+e.getId()+'-content" class="sapSuiteUiCommonsMicroProcessFlowContent">');t.write('<div id="'+e.getId()+'-scrolling" class="sapSuiteUiCommonsMicroProcessFlowScrolling sapSuiteUiCommonsMicroProcessFlowScrollingTransition"');if(e.getRenderType()===l.Wrap){t.addStyle("flex-wrap","wrap");t.writeStyles()}t.write(">");i.forEach(function(e,i){e._setAccessibilityData(i+1,o);t.renderControl(e)});t.write("</div>");t.write("</div>");if(e._hasScrolling()){t.write('<div tabindex="0" id="'+e.getId()+'-rightscroller" class="sapSuiteUiCommonsMicroProcessFlowScroller sapSuiteUiCommonsMicroProcessFlowRightScroller">');t.write('<span id="'+e.getId()+'-rightlabel" class="sapSuiteUiCommonsMicroProcessFlowRightLabel"></span>');t.renderControl(e._getRightScroller());t.write("</div>")}t.write("</div>")}});h.prototype.exit=function(){if(this._oLeftScroller){this._oLeftScroller.destroy()}if(this._oRightScroller){this._oRightScroller.destroy()}};h.prototype.init=function(){sap.ui.getCore().attachThemeChanged(function(){this._bThemeApplied=true;this.invalidate()},this);this._bThemeApplied=sap.ui.getCore().isThemeApplied();this._iScrollingIndex=0;this._iLastVisibleIndex=0;this._aEdges=[];this._aWidths=[]};h.prototype.onAfterRendering=function(){this._correctSeparatorWidth();this._setupKeyboard();if(this._hasScrolling()){this._setupScrolling();this._collectEdgesAndWidths();this._updateScrollingElements();if(this.getRenderType()===l.ScrollingWithResizer){this._oResizer=n.register(this,t.proxy(this._performResizeChanges,this))}}};h.prototype._performResizeChanges=function(){this._collectEdgesAndWidths();this._updateScrollingElements()};h.prototype._isLastItem=function(t){return t===this.getContent()[this.getContent().length-1]};h.prototype._getMaxHeight=function(e){return Math.max.apply(null,this.$().find(".sapSuiteUiCommonsMicroProcessFlowItemWrapper").map(function(){return t(this).height()}).get())};h.prototype._correctSeparatorWidth=function(){var t=this._getMaxHeight();if(t){this.getContent().forEach(function(e){var i=e.getStepWidth(),s;if(i.indexOf("%")!==-1){s=parseInt(i,10);if(!isNaN(s)){e.$("separator").width(t/s*100)}}},this)}};h.prototype._firePress=function(){if(this._oItemNavigation){var t=this._oItemNavigation.getFocusedIndex(),e=this.getContent()[t];if(e){e._firePress()}}};h.prototype._setupKeyboard=function(){var t=this.getDomRef(),e=this.getContent(),i=[];e.forEach(function(t,e){var s=t._getAccessibleItem();i.push(s[0])});if(!this._oItemNavigation){this._oItemNavigation=new r;this.addDelegate(this._oItemNavigation)}this._oItemNavigation.setRootDomRef(t);this._oItemNavigation.setItemDomRefs(i);this._oItemNavigation.setCycling(false);this._oItemNavigation.attachEvent(r.Events.AfterFocus,function(t){if(this._bKeyBoard===true){this._findEdgeItems(t.getParameter("index"));this._updateScrollingElements()}this._bKeyBoard=false}.bind(this))};h.prototype._hasScrolling=function(){var t=this.getRenderType();return t===l.Scrolling||t===l.ScrollingWithResizer};h.prototype._setupScrolling=function(){var t=this.$("leftscroller"),e=this.$("rightscroller");this._iScrollingIndex=0;this._iLastVisibleIndex=0;t.on("click",this._scroll.bind(this,-1));e.on("click",this._scroll.bind(this,1));this._iScrollingIndex<=0?t.hide():t.show()};h.prototype._updateScrollingElements=function(t){var e=this.getContent(),i=this.$("leftscroller"),s=this.$("rightscroller");i[this._iScrollingIndex<=0?"hide":"show"]();this._iLastVisibleIndex=this._findLastVisibleItemIndex(t);s[this._iLastVisibleIndex>=e.length-1?"hide":"show"]();this.$("leftlabel").text(this._iScrollingIndex);this.$("rightlabel").text(e.length-1-this._iLastVisibleIndex)};h.prototype._scroll=function(t,e){e.stopPropagation();var i=this.getContent(),s=this.$("rightscroller"),o=this.$("leftscroller"),r=sap.ui.getCore().getConfiguration().getRTL(),n,l,a;var h=function(){if(t>0){var e=this.$("content").width()-(o.is(":visible")?0:o.width()),i=c(this._aEdges)+c(this._aWidths);if(n+e>i){n-=n+e-i+s.width();for(var r=0;r<this._aEdges;r++){if(this._aEdges[r]+this._aWidths[r]>n){this._iScrollingIndex=r;break}}}}}.bind(this);var p=function(){if(!r&&g[0].scrollLeft!=0){this._clearScroll(g)}if(r){a=g.scrollRightRTL();if(a){this._clearScroll(g)}}}.bind(this);var d=this.$("scrolling"),g=d.parent();this._bKeyBoard=false;if(t<0&&this._iScrollingIndex<=0){return}p();t<0?s.show():o.show();this._iScrollingIndex+=t;n=this._aEdges[this._iScrollingIndex];h();l="translateX("+(r?1:-1)*n+"px)";this.$("scrolling").css("transform",l);if(!d.hasClass("sapSuiteUiCommonsMicroProcessFlowScrollingTransition")){setTimeout(function(){d.addClass("sapSuiteUiCommonsMicroProcessFlowScrollingTransition")},0)}this._updateScrollingElements(t);p()};h.prototype._clearScroll=function(t){var e=sap.ui.getCore().getConfiguration().getRTL();if(t&&t[0]){e?t.scrollLeftRTL(t[0].scrollWidth-t[0].clientWidth):t[0].scrollLeft=0}};h.prototype._findLastVisibleItemIndex=function(t){var e=this._aEdges[this._iScrollingIndex],i=this.$("content").width(),s=i+this.$("rightscroller").width(),o,r=0,n;for(var l=0;l<this._aEdges.length;l++){o=this._aEdges[l];if(o+this._aWidths[l]-10<e+i){r=l}else{if(o+this._aWidths[l]<e+s){n=true}else{n=false;break}}}return n&&t!==-1?this.getContent().length-1:r};h.prototype._collectEdgesAndWidths=function(){var t=0,e=0,i=this.$("content").width();this._aEdges=[];this._aWidths=[];this.getContent().forEach(function(e,i){var s=e.$().width();this._aEdges.push(t);this._aWidths.push(s);t+=s},this)};h.prototype._getLeftScroller=function(){if(!this._oLeftScroller){this._oLeftScroller=new s(this.getId()+"leftscroller",{src:"sap-icon://nav-back"});this._oLeftScroller.addStyleClass("sapSuiteUiCommonsMicroProcessFlowArrow")}return this._oLeftScroller};h.prototype._getRightScroller=function(){if(!this._oRightScroller){this._oRightScroller=new s(this.getId()+"rightscroller",{src:"sap-icon://navigation-right-arrow"});this._oRightScroller.addStyleClass("sapSuiteUiCommonsMicroProcessFlowArrow")}return this._oRightScroller};h.prototype._findEdgeItems=function(t){var e=this.$("scrolling"),i=e.parent(),s=this.$("leftscroller"),o=this.$("rightscroller"),r=this.getContent(),n=Math.abs(e.position().left),l,a,c=-1,h=-1;if(n<10||t===0){c=0;this._clearScroll(i)}if(t===r.length-1){h=r.length-1}l=e.width();for(var p=0;p<this._aEdges.length;p++){a=this._aEdges[p];if(c===-1&&a>=n){c=p}if(h===-1&&a+this._aWidths[p]>n+l+5){h=p-1;break}}this._iScrollingIndex=c;this._iLastVisibleIndex=h!==-1?h:r.length-2};h.prototype._processKeyPress=function(){if(this._hasScrolling()){var t=this.$("scrolling");this._bKeyBoard=true;t.removeClass("sapSuiteUiCommonsMicroProcessFlowScrollingTransition");t.css("transform","")}};h.prototype.onsapspace=function(){this._firePress()};h.prototype.onsapenter=function(){this._firePress()};h.prototype.onsapnext=function(t){this._processKeyPress()};h.prototype.onsapprevious=function(){this._processKeyPress()};h.prototype.onsaphome=function(t){this._processKeyPress()};h.prototype.onsapend=function(){this._processKeyPress()};h.prototype.getAccessibilityInfo=function(){var t="";this.getAggregation("content").forEach(function(e){t=t.concat(e._getAriaText())});return{type:a.getText("ACC_CTR_TYPE_MICRO_PROCESS_FLOW"),description:t}};h.prototype.getFormDoNotAdjustWidth=function(){return true};return h});
sap.ui.predefine("sap/suite/ui/commons/MicroProcessFlowItem",["sap/ui/thirdparty/jquery","./library","sap/ui/core/library","sap/ui/core/Control","sap/suite/ui/commons/MicroProcessFlow"],function(e,t,i,s,r){"use strict";var o=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),a={Error:"sap-icon://message-error",None:null,Success:"sap-icon://message-success",Warning:"sap-icon://message-warning",Information:"sap-icon://message-information"},n=i.ValueState;var c=s.extend("sap.suite.ui.commons.MicroProcessFlowItem",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Appearance",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:n.Standard},showIntermediary:{type:"boolean",group:"Appearance",defaultValue:false},stepWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:null},showSeparator:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{customControl:{type:"sap.ui.core.Control",multiple:false,singularName:"customControl"},intermediary:{type:"sap.ui.core.Control",multiple:false,singularName:"intermediary"}},events:{press:{allowPreventDefault:true,parameters:{item:"object"}}}},onAfterRendering:function(){this._setupEvents();this._setAccessibility()},renderer:function(e,t){var i=function(){e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-separator");e.addClass("sapSuiteUiCommonsMicroProcessFlowItemSeparatorWrapper");e.writeClasses();e.addStyle("width",t._getStepWidth());e.writeStyles();e.write(">");e.write("<div ");e.addClass("sapSuiteUiCommonsMicroProcessFlowItemSeparator");if(!t.getShowSeparator()||o){e.addClass("sapSuiteUiCommonsMicroProcessFlowItemHiddenSeparator")}e.writeClasses();e.write(">");e.write("</div>");if(n){s()}e.write("</div>")};var s=function(){var i=t.getIntermediary();e.write('<div class="sapSuiteUiCommonsMicroProcessFlowItemIntermediary" >');if(i){e.renderControl(i)}else{e.write('<div class="sapSuiteUiCommonsMicroProcessFlowItemOnHoldElement" >');e.write("</div>")}e.write("</div>")};var r=t.getIcon()||t._getIconByState(),o=t.getParent()._isLastItem(t),a=t.getId(),n=t.getShowIntermediary(),c=t.getCustomControl(),l=t.getTitle();e.write("<div ");e.addClass("sapSuiteUiCommonsMicroProcessFlowItemWrapper");e.writeClasses(t);e.writeControlData(t);e.write(">");e.write("<div");if(l){e.writeAttributeEscaped("title",l)}e.writeAttributeEscaped("id",a+"-item");e.writeAttribute("class","sapSuiteUiCommonsMicroProcessFlowItemContent");e.write(">");if(c){e.renderControl(c)}else{e.write('<div tabindex="0" id="'+a+'-itemContent" class="sapSuiteUiCommonsMicroProcessFlowItem sapSuiteUiCommonsMicroProcessFlowItem'+t.getState()+'"');e.writeAttributeEscaped("aria-label",t._getAriaText());e.writeAttributeEscaped("role","option");e.writeAttributeEscaped("aria-selected","false");e.write(">");if(r){e.renderControl(new sap.ui.core.Icon({tooltip:t.getTitle(),src:r}).addStyleClass("sapSuiteUiCommonsMicroProcessFlowItemIcon"))}e.write("</div>")}e.write("</div>");if(!o||n){i()}e.write("</div>")}});c.prototype.getFocusDomRef=function(){var e=this.getCustomControl();return e?e.getFocusDomRef():this.getDomRef("itemContent")};c.prototype._setAccessibility=function(){var e=this._getAccessibleItem(),t=this._getAriaText();if(e.attr("tabindex")!=="0"){e.attr("tabindex",0)}e.attr("aria-label",t);e.attr("role","option");e.attr("aria-posinset",this._iIndex);e.attr("aria-setsize",this._iItemsCount)};c.prototype._getAccessibleItem=function(){var t=e(this.getFocusDomRef());return t.attr("tabindex")==="0"?t:this.$("item")};c.prototype._setupEvents=function(){var t=this.$("item"),i=this.hasListeners("press");t.on("touchstart click",this._click.bind(this));if(i){t.on("mousedown",function(t){e(this).addClass("sapSuiteUiCommonsMicroProcessFlowItemPressed")});t.on("mouseup",function(t){e(this).removeClass("sapSuiteUiCommonsMicroProcessFlowItemPressed")})}if(i){t.css("cursor","pointer");t.attr("role","button");t.attr("aria-hidden","true")}};c.prototype._getAriaText=function(){var e=o.getText("MICRO_PROCESS_FLOW_ITEM");switch(this.getState()){case n.Error:e+=" - "+o.getText("MICRO_PROCESS_FLOW_ERROR");break;case n.Warning:e+=" - "+o.getText("MICRO_PROCESS_FLOW_WARNING");break;case n.Success:e+=" - "+o.getText("MICRO_PROCESS_FLOW_SUCCESS");break;case n.Information:e+=" - "+o.getText("MICRO_PROCESS_FLOW_INFORMATION");break}if(this.getTitle()){e+=" - "+this.getTitle()}return e};c.prototype._isCompact=function(){return e("body").hasClass("sapUiSizeCompact")||this.$().is(".sapUiSizeCompact")||this.$().closest(".sapUiSizeCompact").length>0};c.prototype._getStepWidth=function(){var e=this.getStepWidth();if(!e){e=this._isCompact()?"1rem":"1.5rem"}return e};c.prototype._setAccessibilityData=function(e,t){this._iIndex=e;this._iItemsCount=t};c.prototype._click=function(e){var t=this.getParent();if(t){t._bKeyBoard=false}this._firePress(e)};c.prototype._firePress=function(e){if(this.hasListeners("press")){this.firePress({item:this.getFocusDomRef()});if(e.preventDefault){e.preventDefault()}if(e.stopPropagation){e.stopPropagation()}}var t=document.getElementsByClassName("sapSuiteMicroProcessFlowItemSelected")[0];var i=this._getAccessibleItem()[0];if(t){t.setAttribute("aria-selected",false);t.classList.remove("sapSuiteMicroProcessFlowItemSelected")}if(i.tabIndex=="0"){i.setAttribute("aria-selected",true);i.classList.add("sapSuiteMicroProcessFlowItemSelected")}};c.prototype._getIconByState=function(){return a[this.getState()]};return c});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ProcessFlow",["sap/ui/thirdparty/jquery","./library","sap/m/library","sap/ui/core/Control","sap/suite/ui/commons/ProcessFlowConnection","sap/suite/ui/commons/ProcessFlowLaneHeader","sap/ui/Device","sap/ui/core/ResizeHandler","sap/base/Log","sap/ui/events/KeyCodes","./ProcessFlowRenderer"],function(e,t,i,o,s,a,n,r,l,c,h){"use strict";var u=o.extend("sap.suite.ui.commons.ProcessFlow",{metadata:{library:"sap.suite.ui.commons",properties:{foldedCorners:{type:"boolean",group:"Misc",defaultValue:false},scrollable:{type:"boolean",group:"Misc",defaultValue:true},wheelZoomable:{type:"boolean",group:"Behavior",defaultValue:true},showLabels:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"lanes",aggregations:{_connections:{type:"sap.suite.ui.commons.ProcessFlowConnection",multiple:true,singularName:"_connection",visibility:"hidden"},nodes:{type:"sap.suite.ui.commons.ProcessFlowNode",multiple:true,singularName:"node"},lanes:{type:"sap.suite.ui.commons.ProcessFlowLaneHeader",multiple:true,singularName:"lane"},ariaProperties:{type:"sap.suite.ui.commons.AriaProperties",multiple:false,group:"Misc"}},events:{nodeTitlePress:{deprecated:true,parameters:{oEvent:{type:"object"}}},nodePress:{parameters:{oEvent:{type:"object"}}},labelPress:{parameters:{oEvent:{type:"object"}}},headerPress:{parameters:{oEvent:{type:"object"}}},onError:{parameters:{oEvent:{type:"object"}}}},dnd:{draggable:false,droppable:true}}});u.prototype._resBundle=null;u._cellEdgeConstants={LU:"tl",LD:"lb",DU:"tb",LR:"rl",DR:"rt",UR:"rb"};u._constants={scrollContainer:"scrollContainer",counterLeft:"counterLeft",counterRight:"counterRight",arrowScrollRight:"arrowScrollRight",arrowScrollRightMinus:"-arrowScrollRight",arrowScrollLeft:"arrowScrollLeft",arrowScrollLeftMinus:"-arrowScrollLeft",top:"top",px:"px",parents:"parents",left:"left",right:"right"};u._mouseEvents={mouseMove:"mousemove",mouseDown:"mousedown",mouseUp:"mouseup",mouseLeave:"mouseleave",mouseEnter:"mouseenter",touchStart:"touchstart",sapTouchStart:"saptouchstart",touchEnd:"touchend",sapTouchCancel:"saptouchcancel"};u._enumMoveDirection={LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down"};u.prototype._zoomLevel=t.ProcessFlowZoomLevel.Two;u.prototype._wheelTimeout=null;u.prototype._isFocusChanged=false;u.prototype._wheelTimestamp=null;u.prototype._wheelCalled=false;u.prototype._internalCalcMatrix=false;u.prototype._internalConnectionMap=null;u.prototype._internalLanes=false;u.prototype._jumpOverElements=5;u.prototype._lastNavigationFocusElement=null;u.prototype._bHighlightedMode=false;u.prototype._isLayoutOptimized=false;u.prototype._defaultCursorClass="sapSuiteUiDefaultCursorPF";if(n.browser.edge){u.prototype._grabCursorClass="sapSuiteUiGrabCursorIEPF";u.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorIEPF"}else{u.prototype._grabCursorClass="sapSuiteUiGrabCursorPF";u.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorPF"}u.prototype._mousePreventEvents="contextmenu dblclick";u.prototype._mouseEvents="contextmenu mousemove mouseleave mousedown mouseup mouseenter";u.prototype._mouseWheelEvent=n.browser.mozilla?"DOMMouseScroll MozMousePixelScroll":"mousewheel wheel";u.prototype._headerHasFocus=false;u.prototype._isInitialZoomLevelNeeded=true;u.prototype._bDoScroll=!n.system.desktop||n.os.windows&&n.os.version>=8;u.prototype._scrollStep=192;u.prototype._bPreviousScrollForward=false;u.prototype._bPreviousScrollBack=false;u.prototype._iInitialArrowTop=undefined;u.prototype._iInitialCounterTop=undefined;u.prototype._bRtl=false;u.prototype._arrowScrollable=null;u.prototype._iTouchStartScrollTop=undefined;u.prototype._iTouchStartScrollLeft=undefined;u.prototype._bSetFocusOnce=true;u.prototype.init=function(){this._bRtl=sap.ui.getCore().getConfiguration().getRTL();if(!this._resBundle){this._resBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons")}this._internalLanes=[];if(this._getScrollContainer()){this._getScrollContainer().on("keydown",e.proxy(this.onkeydown,this))}};u.prototype.exit=function(){var t=this.getNodes(),i;if(t){for(i=0;i<t.length;i++){if(t[i]){t[i].destroy()}}t=null}if(this._internalLanes){for(i=0;i<this._internalLanes.length;i++){this._internalLanes[i].destroy()}this._internalLanes=null}var o=this.getAggregation("_connections");if(o){for(i=0;i<o.length;i++){o[i].destroy()}o=null}if(this._oArrowLeft){this._oArrowLeft.destroy()}if(this._oArrowRight){this._oArrowRight.destroy()}if(this._resizeRegId){r.deregister(this._resizeRegId)}if(this._internalCalcMatrix){delete this._internalCalcMatrix;this._internalCalcMatrix=null}if(this._getScrollContainer()){this._getScrollContainer().off(this._mousePreventEvents,this._handlePrevent);this._getScrollContainer().off(this._mouseEvents,e.proxy(this._registerMouseEvents,this));this._getScrollContainer().off(this._mouseWheelEvent,e.proxy(this._registerMouseWheel,this));this._getScrollContainer().off("keydown",e.proxy(this.onkeydown,this));this._getScrollContainer().off("scroll",e.proxy(this._onScroll,this))}};u.prototype.onBeforeRendering=function(){if(this._getScrollContainer()){this._getScrollContainer().off(this._mousePreventEvents,this._handlePrevent);this._getScrollContainer().off(this._mouseEvents,e.proxy(this._registerMouseEvents,this));this._getScrollContainer().off(this._mouseWheelEvent,e.proxy(this._registerMouseWheel,this));this._getScrollContainer().off("keydown",e.proxy(this.onkeydown,this));this._getScrollContainer().off("scroll",e.proxy(this._onScroll,this))}};u.prototype.onAfterRendering=function(){var t=false,i=this.$("scroll-content"),o,s,a,l;this._checkOverflow(this._getScrollContainer().get(0),this.$());this.iCursorPositionX=0;this.iCursorPositionY=0;if(i&&i.length){this._getScrollContainer().find(".sapSuiteUiCommonsProcessFlowNode .sapUiIcon").css("cursor","inherit");if(this.getScrollable()){o=parseInt(this._getScrollContainer().css("height").slice(0,-2),10);s=parseInt(this._getScrollContainer().css("width").slice(0,-2),10);l=i[0].scrollHeight;a=i[0].scrollWidth;if(l<=o&&a<=s){this._clearHandlers(this._getScrollContainer());this._switchCursors(this._getScrollContainer(),this._grabCursorClass,this._defaultCursorClass)}else{this._switchCursors(this._getScrollContainer(),this._defaultCursorClass,this._grabCursorClass);t=true}}else{this._clearHandlers(this._getScrollContainer());this._switchCursors(this._getScrollContainer(),this._grabCursorClass,this._defaultCursorClass);i.css("position","static")}if(t){if(!this._iInitialArrowTop||!this._iInitialCounterTop){this._iInitialArrowTop=parseInt(this.$(u._constants.arrowScrollRight).css(u._constants.top),10);this._iInitialCounterTop=parseInt(this.$(u._constants.counterRight).css(u._constants.top),10)}if(n.os.windows&&n.system.combi&&n.browser.chrome){this._getScrollContainer().bind(this._mouseEvents,e.proxy(this._registerMouseEvents,this));this._getScrollContainer().css("overflow","auto")}else if(n.os.windows&&n.browser.edge){this._getScrollContainer().bind(this._mouseEvents,e.proxy(this._registerMouseEvents,this));this._getScrollContainer().css("overflow","auto");this._getScrollContainer().css("-ms-overflow-style","none")}else if(!n.support.touch){this._getScrollContainer().bind(this._mouseEvents,e.proxy(this._registerMouseEvents,this))}else{this._clearHandlers(this._getScrollContainer());this._getScrollContainer().css("overflow","auto")}}else if(this._bDoScroll){this._getScrollContainer().css("overflow","auto")}else{this._getScrollContainer().css("overflow","hidden")}if(n.browser.mozilla){this._getScrollContainer().css("scrollbar-width","none")}if(this.getWheelZoomable()&&n.system.desktop&&!this._isHeaderMode()){this._getScrollContainer().bind(this._mouseWheelEvent,e.proxy(this._registerMouseWheel,this))}if(this._bDoScroll){this._getScrollContainer().on("scroll",e.proxy(this._onScroll,this))}this._resizeRegId=r.register(this,e.proxy(u.prototype._onResize,this));if(this._isInitialZoomLevelNeeded){this._initZoomLevel()}if(this._headerHasFocus){var c=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();if(c[0]){var h=sap.ui.getCore().byId(c[0].id);this._changeNavigationFocus(null,h);this._headerHasFocus=false}}}};u.prototype.ontouchend=function(e){if(e.target&&e.target.id.indexOf("arrowScroll")!==-1){this._onArrowClick(e)}else{if(!n.support.touch){this.onAfterRendering()}else{this._adjustAndShowArrow()}if(e===null||e.oSource===undefined){return}e.preventDefault();if(this._isHeaderMode()){this._internalLanes=[];this.fireHeaderPress(this)}}};u.prototype._handlePrevent=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault()}if(e&&!e.isPropagationStopped()){e.stopPropagation()}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation()}};u.prototype._onResize=function(){var e=(new Date).getTime();if(!this._iLastResizeEventTime||e-this._iLastResizeEventTime<50){if(!this._iLastResizeHandlingTime||e-this._iLastResizeHandlingTime>500){this.onAfterRendering();this._iLastResizeHandlingTime=(new Date).getTime()}}else{this._iLastResizeHandlingTime=null}this._iLastResizeEventTime=(new Date).getTime()};u.prototype._registerMouseEvents=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault()}switch(e.type){case u._mouseEvents.mouseMove:if(this._getScrollContainer().hasClass(this._grabbingCursorClass)){if(sap.ui.getCore().getConfiguration().getRTL()){this._getScrollContainer().scrollLeftRTL(this.iCursorPositionX-e.pageX)}else{this._getScrollContainer().scrollLeft(this.iCursorPositionX-e.pageX)}this._getScrollContainer().scrollTop(this.iCursorPositionY-e.pageY);this._adjustAndShowArrow()}break;case u._mouseEvents.mouseDown:this._switchCursors(this._getScrollContainer(),this._defaultCursorClass,this._grabbingCursorClass);if(sap.ui.getCore().getConfiguration().getRTL()){this.iCursorPositionX=this._getScrollContainer().scrollLeftRTL()+e.pageX}else{this.iCursorPositionX=this._getScrollContainer().scrollLeft()+e.pageX}this.iCursorPositionY=this._getScrollContainer().scrollTop()+e.pageY;if(n.system.combi){this._iTouchStartScrollLeft=this._getScrollContainer().scrollLeft();if(this.getScrollable()){this._iTouchStartScrollTop=this._getScrollContainer().scrollTop()}}break;case u._mouseEvents.mouseUp:this._switchCursors(this._getScrollContainer(),this._grabbingCursorClass,this._grabCursorClass);break;case u._mouseEvents.mouseLeave:this._getScrollContainer().removeClass(this._grabbingCursorClass);this._getScrollContainer().removeClass(this._grabCursorClass);this._getScrollContainer().addClass(this._defaultCursorClass);break;case u._mouseEvents.mouseEnter:this._getScrollContainer().removeClass(this._defaultCursorClass);if(e.buttons===null){if(e.which===1){this._getScrollContainer().addClass(this._grabbingCursorClass)}else{this._getScrollContainer().addClass(this._grabCursorClass)}}else if(e.buttons===0){this._getScrollContainer().addClass(this._grabCursorClass)}else if(e.buttons===1){this._getScrollContainer().addClass(this._grabbingCursorClass)}break;default:}if(e.target&&e.target.parentElement&&e.target.parentElement.parentElement&&e.target.parentElement.parentElement.getMetadata&&e.target.parentElement.parentElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){if(e&&!e.isPropagationStopped()){e.stopPropagation()}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation()}}};u.prototype.onfocusin=function(e){var t;if(e&&e.target&&e.target.id){t=sap.ui.getCore().byId(e.target.id)}if(this._isHeaderMode()||this._checkNodesVisibility()){this._setFocusOnHeader(true)}else if(this._bSetFocusOnce&&!(t&&e.target.id.indexOf("arrowScroll"))){this._bSetFocusOnce=false;if(t&&t.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){this._changeNavigationFocus(null,t)}else if(!this._lastNavigationFocusElement){var i=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var o=sap.ui.getCore().byId(i[0].id);this._changeNavigationFocus(null,o)}else if(this._lastNavigationFocusElement){this._changeNavigationFocus(null,this._lastNavigationFocusElement)}}};u.prototype._checkNodesVisibility=function(){var e=true;this.getNodes().forEach(function(t){if(t.getVisible()){e=false}});return e};u.prototype.onfocusout=function(){this._bSetFocusOnce=true;if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement._getNavigationFocus()){this._lastNavigationFocusElement._setNavigationFocus(false);if(this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._lastNavigationFocusElement.rerender()}}};u.prototype.onsapplus=function(){this._isFocusChanged=true;this.zoomIn()};u.prototype.onsapminus=function(){this._isFocusChanged=true;this.zoomOut()};u.prototype.onsaptabnext=function(t){var i=true;var o=t.target;var s=sap.ui.getCore().byId(o.id);if(!s&&o&&o.childElementCount>0){o=o.childNodes[0];s=sap.ui.getCore().byId(o.id)}if(!s||s.getMetadata().getName()!=="sap.suite.ui.commons.ProcessFlowNode"&&s.getMetadata().getName()!=="sap.suite.ui.commons.ProcessFlowConnectionLabel"){if(!this._isHeaderMode()&&!this._lastNavigationFocusElement&&!this._checkNodesVisibility()){var a=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var n=sap.ui.getCore().byId(a[0].id);this._changeNavigationFocus(null,n);i=false}else if(this._lastNavigationFocusElement){this._changeNavigationFocus(null,this._lastNavigationFocusElement);i=false}}if((this._isHeaderMode()||this._checkNodesVisibility())&&i){if(!this._headerHasFocus){this._setFocusOnHeader(true)}else{this._setFocusOnHeader(false)}}else if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._lastNavigationFocusElement.rerender()}var r;if(i){r=this.$().nextAll(":focusable").first();if(r.length===0){r=this.$().nextAll().find(":focusable").first();if(r.length===0){c.apply(this)}}r.focus();l.debug("saptabnext: Keyboard focus has been changed to element:  id='"+r.id+"' outerHTML='"+r.outerHTML+"'");r=null}t.preventDefault();function c(){var t=this.$().parent();do{r=t.next(":focusable");if(r.length===0){r=t.nextAll().find(":focusable").first()}t=t.parent()}while(t.length!==0&&r.length===0);if(r.length===0){r=e(":focusable")[0]}}};u.prototype.onsaptabprevious=function(t){var i=null;var o=t.target;if((!this._lastNavigationFocusElement||!this._lastNavigationFocusElement._getNavigationFocus())&&t.target&&t.target.childElementCount>0){o=t.target.childNodes[0]}var s=sap.ui.getCore().byId(o.id);if(s&&(s.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"||s.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode")){if(!this._isHeaderMode()&&!this._lastNavigationFocusElement){var a=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var n=sap.ui.getCore().byId(a[0].id);this._changeNavigationFocus(null,n)}else if(this._lastNavigationFocusElement){this._changeNavigationFocus(null,this._lastNavigationFocusElement);t.preventDefault();return}}if(this._isHeaderMode()){if(!this._headerHasFocus){this._setFocusOnHeader(true)}else{this._setFocusOnHeader(false);i=this.$().prevAll().find(":focusable").last()}}else{i=this.$().prev(":focusable");if(i.length===0){i=this.$().prevAll().find(":focusable").last()}if(this._lastNavigationFocusElement){this._lastNavigationFocusElement._setNavigationFocus(false)}if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._lastNavigationFocusElement.rerender()}}if(i){if(i.length===0){r.apply(this)}else if(i.first().length!==0){i=e(i.first())}i.focus();l.debug("saptabnext: Keyboard focus has been set on element:  id='"+i.id+"' outerHTML='"+i.outerHTML+"'");i=null}t.preventDefault();function r(){var e=this.$();do{i=e.prev(":focusable");if(i.length===0){i=e.prevAll().find(":focusable").last()}e=e.parent()}while(e.length!==0&&i.length===0)}};u.prototype._handleKeySelect=function(e){if(this._isHeaderMode()){this._internalLanes=[];this.fireHeaderPress(this);var t=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var i=sap.ui.getCore().byId(t[0].id);this._changeNavigationFocus(null,i)}else if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._lastNavigationFocusElement._getNavigationFocus()){var o=this._lastNavigationFocusElement;o._handleEvents(e)}};u.prototype.onkeyup=function(e){var t=e.keyCode?e.keyCode:e.which;switch(t){case c.ENTER:case c.SPACE:var i=this._lastNavigationFocusElement;if(i){this.fireNodePress(this._lastNavigationFocusElement);i._handleEvents(e)}break;default:break}};u.prototype.onkeydown=function(e){var t=e.keyCode?e.keyCode:e.which;l.debug("ProcessFlow::keyboard input has been catched and action going to start: keycode="+t);var i=false;var o=e.ctrlKey;var s=e.altKey;var a=this._lastNavigationFocusElement;switch(t){case c.ARROW_RIGHT:i=this._moveToNextElement(u._enumMoveDirection.RIGHT);break;case c.ARROW_LEFT:i=this._moveToNextElement(u._enumMoveDirection.LEFT);break;case c.ARROW_DOWN:i=this._moveToNextElement(u._enumMoveDirection.DOWN);break;case c.ARROW_UP:i=this._moveToNextElement(u._enumMoveDirection.UP);break;case c.PAGE_UP:i=this._moveOnePage(u._enumMoveDirection.UP,s);break;case c.PAGE_DOWN:i=this._moveOnePage(u._enumMoveDirection.DOWN,s);break;case c.HOME:i=this._moveHomeEnd(u._enumMoveDirection.LEFT,o);break;case c.END:i=this._moveHomeEnd(u._enumMoveDirection.RIGHT,o);break;case c.NUMPAD_0:case c.DIGIT_0:this._initZoomLevel();break;case c.ENTER:case c.SPACE:this._handleKeySelect(e);e.preventDefault();return;default:return}e.preventDefault();if(i){this._changeNavigationFocus(a,this._lastNavigationFocusElement)}};u.prototype._onArrowClick=function(e){var t=e.target.id;if(t){var i=this.getId();e.preventDefault();if(t===i+u._constants.arrowScrollLeftMinus&&n.system.desktop){this._scroll(-this._scrollStep,500)}else if(t===i+u._constants.arrowScrollRightMinus&&n.system.desktop){this._scroll(this._scrollStep,500)}}};u.prototype._onScroll=function(){var e=this._getScrollContainer().scrollLeft();var t=Math.abs(e-this._iTouchStartScrollLeft);if(t>this._scrollStep/4&&!this._isFocusChanged){this._adjustAndShowArrow();this._iTouchStartScrollLeft=e}else if(this.getScrollable()){var i=this._getScrollContainer().scrollTop();var o=Math.abs(i-this._iTouchStartScrollTop);if(o>10){this._moveArrowAndCounterVertical();this._iTouchStartScrollTop=i}}};u.prototype.ontouchstart=function(){this._iTouchStartScrollLeft=this._getScrollContainer().scrollLeft();if(this.getScrollable()){this._iTouchStartScrollTop=this._getScrollContainer().scrollTop()}};u.prototype.ontouchmove=function(e){e.setMarked()};u.prototype._handleLabelClick=function(e){if(e){var t=e.getSource();if(t&&t.getMetadata().getName()==="sap.ui.core.Icon"){t=t.getParent()}if(t&&t.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){var i=this._getConnectionMapEntries(t);var o=this._createLabelPressEventArgs(t,i);this.fireLabelPress(o)}}};u.prototype._onFocusChanged=function(){var t=this._lastNavigationFocusElement,i=t?t.$():null,o,s,a,n,r,c,h,u,g,d,_,f,p,m,v,C,N=500;if(t&&this.getScrollable()){l.debug("The actually focused element is "+t.getId());if(t.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){u=i.parent().parent().parent().outerWidth();g=i.parent().parent().parent().outerHeight();d=i.parent().parent().parent().position()}else{u=i.outerWidth();g=i.outerHeight();d=i.position()}l.debug("Element outer width x height ["+u+" x "+g+"]");l.debug("Position of element in the content is ["+d.left+", "+d.top+"]");r=this.$("scroll-content");o=this._getScrollContainer().innerWidth();s=this._getScrollContainer().innerHeight();l.debug("Scroll container inner width x height ["+o+" x "+s+"]");a=this._getScrollContainer().scrollLeft();n=this._getScrollContainer().scrollTop();l.debug("Current scroll offset is ["+a+", "+n+"]");c=r.innerWidth();h=r.innerHeight();l.debug("Scroll content inner width x height ["+c+" x "+h+"]");_=-a+d.left;p=_+u;f=-n+d.top;m=f+g;if(p>o||_<0||m>s||f<0){v=Math.round((o-u)/2);v=Math.max(o-c+d.left,v);v=Math.min(d.left,v);C=Math.round((s-g)/2);C=Math.max(s-h+d.top,C);C=Math.min(d.top,C);l.debug("Element lies outside the scroll container, scrolling from ["+_+","+f+"] to ["+v+","+C+"]");this._isFocusChanged=true;this._getScrollContainer().animate({scrollTop:d.top-C,scrollLeft:d.left-v},N,"swing",e.proxy(this._adjustAndShowArrow,this))}else{l.debug("Element lies inside the scroll container, no scrolling happens.");this._setFocusToNode(t)}}else{this._setFocusToNode(t);this._adjustAndShowArrow()}};u.prototype._setScrollWidth=function(){switch(this.getZoomLevel()){case t.ProcessFlowZoomLevel.One:this._scrollStep=240;break;case t.ProcessFlowZoomLevel.Two:this._scrollStep=192;break;case t.ProcessFlowZoomLevel.Three:this._scrollStep=168;break;case t.ProcessFlowZoomLevel.Four:this._scrollStep=128;break;default:this._scrollStep=192}};u.prototype._getLastNavigationFocusElement=function(){return this._lastNavigationFocusElement};u.prototype._getNode=function(e,t){for(var i=0;i<t.length;i++){if(t[i].getNodeId()===e.toString()){return t[i]}}};u.prototype._getLane=function(e){for(var t=0;t<this._internalLanes.length;t++){if(this._internalLanes[t].getLaneId()===e){return this._internalLanes[t]}}};u.prototype.destroyLanes=function(){this.removeAllAggregation("lanes");this._internalLanes=[];return this};u._getChildIdByElement=function(e){if(typeof e==="object"){return e.nodeId}else{return e}};u.prototype._isHeaderMode=function(){var e=this.getNodes();return!e||e.length===0};u.prototype._getScrollContainer=function(){return this.$(u._constants.scrollContainer)};u.prototype._handleException=function(e){var t=this._resBundle.getText("PF_ERROR_INPUT_DATA");this.fireOnError({text:t});l.error("Error loading data for the process flow with id : "+this.getId());if(e instanceof Array){for(var i=0;i<e.length;i++){l.error("Detailed description ("+i+") :"+e[i])}}else{l.error("Detailed description  :"+e)}};u.prototype._getAriaText=function(){return this._resBundle.getText("PF_ARIA_PROCESS_FLOW")};u.prototype._updateLanesFromNodes=function(){u.NodeElement._createNodeElementsFromProcessFlowNodes(this.getNodes(),this.getLanes());var e=this._arrangeNodesByParentChildRelation(this.getNodes());this._internalLanes=u.NodeElement._updateLanesFromNodes(this.getLanes(),e).lanes};u.prototype._getOrCreateLaneMap=function(){if(!this._internalLanes||this._internalLanes.length<=0){this._updateLanesFromNodes()}return u.NodeElement._createMapFromLanes(this._internalLanes,e.proxy(this.ontouchend,this),this._isHeaderMode()).positionMap};u.prototype._arrangeNodesByParentChildRelation=function(e){var t=e?e.length:0;var i=[];var o,s;if(t>0){this._setParentForNodes(e);for(o=0;o<t;o++){i=e[o].getChildren();if(i){var a=i.length;for(s=0;s<a;s++){i[s]=u._getChildIdByElement(i[s]).toString()}}for(s=0;s<o;s++){if(i&&Array.prototype.indexOf.call(i,e[s].getNodeId())>-1&&e[s].getLaneId()===e[o].getLaneId()){e.splice(s,0,e[o]);e.splice(o+1,1);e=this._arrangeNodesByParentChildRelation(e);break}}}}return e};u.prototype._getOrCreateProcessFlow=function(){if(!this._internalLanes||this._internalLanes.length<=0||this._isLanesUpdated()){this._resetLanesFromModel();this._updateLanesFromNodes()}this.applyNodeDisplayState();var e=this.getNodes();var t=u.NodeElement._createNodeElementsFromProcessFlowNodes(e,this._internalLanes);var i=t.elementById;var o=t.elementsByLane;var s=this._calculateMatrix(i);s=this._addFirstAndLastColumn(s);u.NodeElement._calculateLaneStatePieChart(o,this._internalLanes,e,this);for(var a=0;a<s.length;a++){for(var n=0;n<s[a].length;n++){if(s[a][n]instanceof u.NodeElement){s[a][n]=i[s[a][n].nodeId].oNode}}}this._internalCalcMatrix=s;return s};u.prototype._isLanesUpdated=function(){var e=this.getLanes();if(e.length!=this._internalLanes.length){return true}var t;for(var i=0;i<e.length;i++){var o=e[i];t=false;for(var s=0;s<this._internalLanes.length;s++){var a=this._internalLanes[s];if(a.getLaneId()===o.getLaneId()){t=true;break}}if(!t){return true}}return false};u.prototype._resetLanesFromModel=function(){var e=this.getNodes();e.forEach(function(e){e._mergedLaneId=false});var t=this.getLanes();t.forEach(function(e){e._mergedLanePosition=false});this._internalLanes=[];if(this._isHeaderMode()){var i=this.getBindingInfo("lanes");if(i&&i.model){this.getModel(i.model).refresh()}}else{var o=this.getBindingInfo("nodes");if(o&&o.model){this.getModel(o.model).refresh()}}};u.prototype._addFirstAndLastColumn=function(e){if(!e||e.length<=0){return[]}var t=e.length;for(var i=0;i<t;i++){e[i].unshift(null);e[i].push(null)}return e};u.prototype._calculateMatrix=function(e){var t,i,o,s,a;if(!e||e.length===0){return[]}t=new u.InternalMatrixCalculation(this);t.checkInputNodeConsistency(e);i=t._retrieveInfoFromInputArray(e);t._resetPositions();o=i.highestLanePosition+1;s=Math.max(Object.keys(e).length,2);a=t._createMatrix(s,o);for(var n=0;n<i.rootElements.length;n++){t.iPositionY=i.rootElements[n].lane;a=t.processCurrentElement(i.rootElements[n],e,a)}if(this._isLayoutOptimized){t._optimizeMatrix(a,e)}a=t._doubleColumnsInMatrix(a);a=t._calculatePathInMatrix(a);a=t._removeEmptyLines(a);return a};u.NodeElement=function(e,t,i,o){this.nodeId=e;this.lane=t;this.state=i.getState();this.displayState=i._getDisplayState();this.isProcessed=false;if(Array.isArray(o)){this.aParent=o}else{this.oParent=o}this.oNode=i};u.NodeElement._initNodeElement=function(e,t,i,o){return new u.NodeElement(e,t,i,o)};u.NodeElement.prototype={toString:function(){return this.nodeId},containsChildren:function(e){if(!e){return false}if(!(e instanceof u.NodeElement)){return false}if(this.oNode.getChildren()&&e.oNode.getChildren()&&this.oNode.getChildren().length&&e.oNode.getChildren().length){for(var t=0;t<this.oNode.getChildren().length;t++){if(e.oNode.getChildren().indexOf(this.oNode.getChildren()[t])>=0){return true}}}return false}};u.NodeElement._calculateLaneStatePieChart=function(e,i,o,s){if(!e||!i||!o){return}var a;for(a=0;a<o.length;a++){s._bHighlightedMode=o[a].getHighlighted();if(s._bHighlightedMode){break}}var n,r,l,c,h;for(a=0;a<i.length;a++){var u=i[a];var g=e[u.getLaneId()];if(!g){continue}n=0;r=0;l=0;c=0;h=0;for(var d=0;d<g.length;d++){if(!s._bHighlightedMode||(g[d].oNode._getDisplayState()===t.ProcessFlowDisplayState.Highlighted||g[d].oNode._getDisplayState()===t.ProcessFlowDisplayState.HighlightedFocused||g[d].oNode._getDisplayState()===t.ProcessFlowDisplayState.SelectedHighlighted||g[d].oNode._getDisplayState()===t.ProcessFlowDisplayState.SelectedHighlightedFocused)){switch(g[d].oNode.getState()){case t.ProcessFlowNodeState.Positive:n++;break;case t.ProcessFlowNodeState.Negative:case t.ProcessFlowNodeState.PlannedNegative:r++;break;case t.ProcessFlowNodeState.Planned:c++;break;case t.ProcessFlowNodeState.Critical:h++;break;case t.ProcessFlowNodeState.Neutral:default:l++}}}var _=[{state:t.ProcessFlowNodeState.Positive,value:n},{state:t.ProcessFlowNodeState.Negative,value:r},{state:t.ProcessFlowNodeState.Neutral,value:l},{state:t.ProcessFlowNodeState.Planned,value:c},{state:t.ProcessFlowNodeState.Critical,value:h}];u.setState(_)}};u.NodeElement._updateLanesFromNodes=function(e,t){var i=u.NodeElement._createMapFromLanes(e,null,false);var o=i.positionMap;var s=i.idMap;var a={};var n=e.slice();var r;var l={};var c=0;var h;for(h=0;h<t.length;h++){a[t[h].getNodeId()]=t[h]}for(h=0;h<t.length;h++){var g=t[h];var d=g.getChildren()||[];var _=1;var f=null;var p=null;for(var m=0;m<d.length;m++){var v=u._getChildIdByElement(d[m]);var C=a[v];if(C){if(g.getLaneId()===C.getLaneId()){f=C.getLaneId()+_;p=s[f];if(!p){var N=s[g.getLaneId()];p=u.NodeElement._createNewProcessFlowElement(N,f,N.getPosition()+_);s[p.getLaneId()]=p;n.splice(p.getPosition(),0,p)}C._setMergedLaneId(p.getLaneId())}u.NodeElement._changeLaneOfChildren(g.getLaneId(),C,a)}}if(p){l={};r=false;for(var M in o){if(p.getLaneId()===o[M].getLaneId()){r=true;break}if(parseInt(M,10)>=p.getPosition()){var F=o[M];l[F.getPosition()+_]=F}}if(!r){for(var b in l){c=parseInt(b,10);l[c]._setMergedPosition(c)}l[p.getPosition()]=p;for(var w=0;w<p.getPosition();w++){l[w]=o[w]}o=l}}}return{lanes:n,nodes:t}};u.NodeElement._changeLaneOfChildren=function(e,t,i){var o=t.getChildren();if(o){for(var s=0;s<o.length;s++){var a=u._getChildIdByElement(o[s]);var n=i[a];if(n&&n.getLaneId()===e){n._setMergedLaneId(t.getLaneId());u.NodeElement._changeLaneOfChildren(e,n,i)}}}};u.NodeElement._createNewProcessFlowElement=function(e,t,i){return new a({laneId:t,iconSrc:e.getIconSrc(),text:e.getText(),state:e.getState(),position:i,zoomLevel:e.getZoomLevel()})};u.NodeElement._createMapFromLanes=function(e,t,i){var o,s={},a={},n=e?e.length:0,r=0;if(!n){return{}}else{while(r<n){o=e[r];if(o&&o.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowLaneHeader"){s[o.getPosition()]=o;a[o.getLaneId()]=o;if(t){o.attachPress(t)}o._setHeaderMode(i)}r++}return{positionMap:s,idMap:a}}};u.NodeElement._createNodeElementsFromProcessFlowNodes=function(t,i){var o={},s={},a={},n,r=t?t.length:0,l,c,h=i?i.length:0,g,d=[],_,f,p,m,v,C,N={};if(r===0){return{elementById:{},elementsByLane:{}}}if(h===0){throw["No lane definition although there is a node definition."]}v=0;while(v<h){c=i[v];g=c.getLaneId();_=c.getPosition();if(o[g]){throw["The lane with id: "+g+" is defined at least twice. (Lane error)"]}o[g]=_;if(d&&Array.prototype.indexOf.call(d,_)>-1){throw["The position "+_+" is defined at least twice. (Lane error)."]}else{d.push(_)}s[g]=[];v++}v=0;while(v<r){n=t[v];if(n&&n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){l=n.getNodeId();g=n.getLaneId();f=n.getChildren()||[];m=f.length;C=0;while(C<m){p=u._getChildIdByElement(f[C]);a[p]=a[p]||[];a[p].push(l);C++}}v++}v=0;while(v<r){n=t[v];if(n&&n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){l=n.getNodeId();if(!l){throw["There is a node which has no node id defined. (Title="+n.getTitle()+") and array position: "+v]}g=n.getLaneId();_=o[g];if(e.type(_)!=="number"){throw["For the node "+l+" position (lane) is not defined."]}if(!N[l]){N[l]=u.NodeElement._initNodeElement(l,_,n,a[l]);s[g].push(N[l])}else{throw["The node id "+l+" is used second time."]}}v++}return{elementById:N,elementsByLane:s}};u.InternalMatrixCalculation=function(){this.iPositionX=0;this.iPositionY=0;this.nodePositions={};this.mapChildToNode={}};u.InternalMatrixCalculation.prototype._optimizeMatrix=function(e,t){var i;do{i=false;for(var o=0;o<e[0].length;o++){for(var s=0;s<e.length-1;s++){if(!e[s][o]){var a=false;for(var n=s+1;n<e.length;n++){if(e[n][o]){a=true;break}}if(!a){break}if(this._optimizeLane(e,s,o,t)){i=true}}}}}while(i)};u.InternalMatrixCalculation.prototype._optimizeLane=function(e,t,i,o){for(var s=t+1;s<e.length;s++){if(e[s][i]){var a=e[s][i];if(this._verifyOptimizeLane(e,t,s,i,o)){e[t][i]=a;this.nodePositions[a.nodeId].x=t;e[s][i]=null;return true}else{return false}}}return false};u.InternalMatrixCalculation.prototype._verifyOptimizeLane=function(e,t,i,o,s){var a=e[i][o].oNode;var n,r,l,c;if(a&&a.getChildren()){l=e[i][o].oNode.getChildren();for(n=0;n<l.length;n++){c=u._getChildIdByElement(l[n]);var h=s[c].lane;for(r=o+1;r<h;r++){if(e[t][r]){return false}}}}var g=e[i][o].nodeId;var d=this.nodePositions[g];var _=e[i][o].aParent;if(_){for(n=0;n<_.length;n++){c=u._getChildIdByElement(_[n]);if(o-1!==s[c].lane){return false}var f=this.nodePositions[c];if(f.x>=d.x){return false}}}for(n=0;n<o;n++){for(r=0;r<e.length;r++){if(e[r][n]&&e[r][n].oNode){c=e[r][n].nodeId;var p=this.nodePositions[c];l=e[r][n].oNode.getChildren();if(l){for(var m=0;m<l.length;m++){var v=u._getChildIdByElement(l[m]);var C=this.nodePositions[v];if(s[v].lane>o&&!(p.x<t&&C.x<t||p.x>t&&C.x>t)){return false}}}}}}if(a._hasChildren()){for(n=0;n<t;n++){if(e[n][o]){l=e[n][o].oNode.getChildren();if(l){for(r=0;r<l.length;r++){c=u._getChildIdByElement(l[r]);var N=s[c];var M=this.nodePositions[c];if(N.lane>o&&M.x>=t&&!a._hasChildrenWithNodeId(c)){return false}}}}}}return true};u.InternalMatrixCalculation.prototype._resetPositions=function(){this.iPositionX=0;this.iPositionY=0;delete this.nodePositions;delete this.mapChildToNode;this.nodePositions={};this.mapChildToNode={}};u.InternalMatrixCalculation.prototype._createMatrix=function(e){e=parseInt(e,10);var t=new Array(e||0);var i=e;if(arguments.length>1){var o=Array.prototype.slice.call(arguments,1);while(i--){t[e-1-i]=this._createMatrix.apply(this,o)}}return t};u.InternalMatrixCalculation.prototype._retrieveInfoFromInputArray=function(e){var t=0,i=[],o;Object.keys(e).forEach(function(s){o=e[s];if(!o.oParent&&!o.aParent){i.push(o)}if(t<o.lane){t=o.lane}});return{highestLanePosition:t,rootElements:i}};u.InternalMatrixCalculation.prototype._doubleColumnsInMatrix=function(e){var t=0,i;for(i=0;i<e.length;i++){t=t>e[i].length?t:e[i].length}var o=new Array(e.length||0);for(i=0;i<o.length;i++){o[i]=new Array(t*2-1);for(var s=0;s<t;s++){if(e[i][s]){o[i][2*s]=e[i][s]}}}return o};u.InternalMatrixCalculation.prototype._removeEmptyLines=function(e){var t=0,i,o;for(i=0;i<e.length;i++){for(o=0;o<e[i].length;o++){if(e[i][o]){t++;break}}}var s=this._createMatrix(t,e[0].length);for(i=0;i<t;i++){for(o=0;o<e[i].length;o++){s[i][o]=null;if(e[i][o]){s[i][o]=e[i][o]}}}return s};u.InternalMatrixCalculation.prototype._sortBasedOnChildren=function(e,t){var i={},o,s=null,a,n,r,l=[],c,h,g;if(e){e.forEach(function(e){var s=u._getChildIdByElement(e);o=i[t[s].lane];if(!o){i[t[s].lane]=o=[]}o.push(t[s])})}else{return[]}var d=function(e,t){n=(e.oNode.getChildren()||[]).length;r=(t.oNode.getChildren()||[]).length;return r-n};a=[];for(s in i){a.push(s);i[s].sort(d)}a=a.sort(function(e,t){return t-e});var _=function(e){if(g.containsChildren(e)){h.push(e)}};a.forEach(function(e){c=i[e];if(c.length>1){h=[];g=c.shift();while(g){if(h.indexOf(g)<0){h.push(g)}c.forEach(_);g=c.shift()}l=l.concat(h)}else{l=l.concat(c)}});return l};u.InternalMatrixCalculation.prototype._calculatePathInMatrix=function(e){var t=null;for(var i in this.nodePositions){if(this.nodePositions.hasOwnProperty(i)){t=this.nodePositions[i];var o=t.c.oNode.getChildren();for(var s=0;o&&s<o.length;s++){var a=u._getChildIdByElement(o[s]);var n=this.nodePositions[a];e=this._calculateSingleNodeConnection(t,n,t.x,t.y,n.x,n.y,e)}}}return e};u.InternalMatrixCalculation.prototype._calculateSingleNodeConnection=function(e,t,i,o,s,a,n){var r=a-o;var l=s-i;if(r<0){throw["Problem with negative horizontal movement","Parent node is "+e.c.toString(),"Children node is "+t.c.toString(),"Coordinates : '"+i+"','"+o+"','"+s+"','"+a+"'"]}else if(l<=-1){var c=this._checkIfHorizontalLinePossible(n,s,o+2,a);var h=a-1;if(c){h=o+1}var g=i;if(c){g=s}n[i][h]=this._createConnectionElement(n[i][h],u._cellEdgeConstants.LU,e,t,false);n=this._writeVerticalLine(n,i,s,h,e,t);n[s][h]=this._createConnectionElement(n[s][h],u._cellEdgeConstants.UR,e,t,h===a-1);var d=o+2;var _=a;if(!c){d=o+1;_=h+1}n=this._writeHorizontalLine(n,g,d,_,e,t)}else if(l===0){n=this._writeHorizontalLine(n,i,o+1,a,e,t)}else if(l===1){n[i][o+1]=this._createConnectionElement(n[i][o+1],u._cellEdgeConstants.LD,e,t,false);n[s][o+1]=this._createConnectionElement(n[s][o+1],u._cellEdgeConstants.DR,e,t,o+1===a-1);n=this._writeHorizontalLine(n,s,o+2,a,e,t)}else{n[i][o+1]=this._createConnectionElement(n[i][o+1],u._cellEdgeConstants.LD,e,t,false);n=this._writeVerticalLine(n,s,i,o+1,e,t);n[s][o+1]=this._createConnectionElement(n[s][o+1],u._cellEdgeConstants.DR,e,t,o+1===a-1);n=this._writeHorizontalLine(n,s,o+2,a,e,t)}return n};u.InternalMatrixCalculation.prototype._writeVerticalLine=function(e,t,i,o,s,a){for(var n=t-1;n>i;n--){e[n][o]=this._createConnectionElement(e[n][o],u._cellEdgeConstants.DU,s,a,false)}return e};u.InternalMatrixCalculation.prototype._checkIfHorizontalLinePossible=function(e,t,i,o){var s=true;for(var a=i;a<o;a++){if(e[t][a]instanceof u.NodeElement){s=false;break}}return s};u.InternalMatrixCalculation.prototype._writeHorizontalLine=function(e,t,i,o,s,a){var n=t===a.x;if(!n){o--}for(var r=i;r<o;r++){e[t][r]=this._createConnectionElement(e[t][r],u._cellEdgeConstants.LR,s,a,r===o-1&&n)}return e};u.InternalMatrixCalculation.prototype._createConnectionElement=function(e,t,i,o,a){var n=e;if(!n){n=new s}if(n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){var r=this._calculateConnectionDisplayStateBySourceAndTargetNode(i.c.oNode,o.c.oNode);var l={flowLine:t,targetNodeState:o.c.state,displayState:r,hasArrow:a};n.addConnectionData(l)}return n};u.InternalMatrixCalculation.prototype._calculateConnectionDisplayStateBySourceAndTargetNode=function(e,i){var o=e.getHighlighted();var s=e.getSelected();var a=e._getDimmed();var n=i.getHighlighted();var r=i.getSelected();var l=i._getDimmed();var c=t.ProcessFlowDisplayState.Regular;if(s&&r){c=t.ProcessFlowDisplayState.Selected}else if(o&&n){c=t.ProcessFlowDisplayState.Highlighted}else if(a||l||o&&r||s&&n){c=t.ProcessFlowDisplayState.Dimmed}return c};u.prototype.addNode=function(e){return this.addAggregation("nodes",e,false)};u.prototype._switchCursors=function(e,t,i){if(e.hasClass(t)){e.removeClass(t)}if(!e.hasClass(i)){e.addClass(i)}};u.prototype._clearHandlers=function(t){t.bind(this._mousePreventEvents,e.proxy(this._handlePrevent,this))};u.prototype._initZoomLevel=function(){if(this.$()){var e=this.$().width();if(e){if(e<i.ScreenSizes.tablet){this.setZoomLevel(t.ProcessFlowZoomLevel.Four)}else if(e<i.ScreenSizes.desktop){this.setZoomLevel(t.ProcessFlowZoomLevel.Three)}else{this.setZoomLevel(t.ProcessFlowZoomLevel.Two)}}}};u.prototype._registerMouseWheel=function(e){var t=e.originalEvent.wheelDelta||-e.originalEvent.detail;if(t===0){t=-e.originalEvent.deltaY}if(e&&!e.isDefaultPrevented()){e.preventDefault();e.originalEvent.returnValue=false}var i=300;var o=function(){var e=new Date-this._wheelTimestamp;if(e<i){this._wheelTimeout=setTimeout(function(){var e=o.bind(this);if(typeof e==="string"||e instanceof String){e=this[e]}e.apply(this,[])}.bind(this),i-e)}else{this._wheelTimeout=null;this._wheelCalled=false}};if(!this._wheelCalled){this._wheelCalled=true;if(t<0){this._isFocusChanged=true;this.zoomOut()}else{this._isFocusChanged=true;this.zoomIn()}}if(!this._wheelTimeout){this._wheelTimestamp=new Date;this._wheelTimeout=setTimeout(function(){var e=o.bind(this);if(typeof e==="string"||e instanceof String){e=this[e]}e.apply(this,[])}.bind(this),i)}if(e&&!e.isPropagationStopped()){e.stopPropagation()}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation()}};u.prototype._setFocusToNode=function(t){if(t){if(t.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){e(document.getElementById(t.sId)).parent().focus();t._setNavigationFocus(true);t.rerender()}else if(t.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){t.$().focus();t._setNavigationFocus(true)}}else if(this._lastNavigationFocusElement){if(this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){e(document.getElementById(this._lastNavigationFocusElement.sId)).parent().focus();this._lastNavigationFocusElement._setNavigationFocus(true);this._lastNavigationFocusElement.rerender()}else if(this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){this._lastNavigationFocusElement.$().focus();this._lastNavigationFocusElement._setNavigationFocus(true)}}};u.prototype._changeNavigationFocus=function(e,t){if(e&&t&&e.getId()!==t.getId()){l.debug("Rerendering PREVIOUS node with id '"+e.getId()+"' navigation focus : "+e._getNavigationFocus());e._setNavigationFocus(false);if(e.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){e.invalidate()}}if(t){l.debug("Rerendering CURRENT node with id '"+t.getId()+"' navigation focus : "+t._getNavigationFocus());t._setNavigationFocus(true);if(t.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){t.rerender()}this._lastNavigationFocusElement=t;this._onFocusChanged()}};u.prototype._moveOnePage=function(e,t){e=e||u._enumMoveDirection.UP;t=t||false;var i=0,o=0;var s=0,a=0;var n=0;var r=false,l,c,h;for(l=0;l<this._internalCalcMatrix.length;l++){for(c=0;c<this._internalCalcMatrix[l].length;c++){if(this._internalCalcMatrix[l][c]&&this._internalCalcMatrix[l][c].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._internalCalcMatrix[l][c]._getNavigationFocus()){i=l;o=c;break}else if(this._internalCalcMatrix[l][c]&&this._internalCalcMatrix[l][c].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){h=this._internalCalcMatrix[l][c]._getVisibleLabel();if(h&&h._getNavigationFocus()){i=l;o=c;break}}}}if(t){if(e===u._enumMoveDirection.UP){for(c=o-1;c>=0&&n<this._jumpOverElements;c--){if(this._internalCalcMatrix[i][c]&&this._internalCalcMatrix[i][c].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][c].getHighlighted())){n++;s=i;a=c;r=true}else if(this._internalCalcMatrix[i][c]&&this._internalCalcMatrix[i][c].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){h=this._internalCalcMatrix[i][c]._getVisibleLabel();if(this._labelCanGetFocus(h)){n++;s=i;a=c;r=true}}}}else if(e===u._enumMoveDirection.DOWN){for(c=o+1;c<this._internalCalcMatrix[i].length&&n<this._jumpOverElements;c++){if(this._internalCalcMatrix[i][c]&&this._internalCalcMatrix[i][c].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][c].getHighlighted())){n++;s=i;a=c;r=true}else if(this._internalCalcMatrix[i][c]&&this._internalCalcMatrix[i][c].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){h=this._internalCalcMatrix[i][c]._getVisibleLabel();if(this._labelCanGetFocus(h)){n++;s=i;a=c;r=true}}}}}else if(e===u._enumMoveDirection.UP){for(l=i-1;l>=0&&n<this._jumpOverElements;l--){if(this._internalCalcMatrix[l][o]&&this._internalCalcMatrix[l][o].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[l][o].getHighlighted())){n++;s=l;a=o;r=true}else if(this._internalCalcMatrix[l][o]&&this._internalCalcMatrix[l][o].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){h=this._internalCalcMatrix[l][o]._getVisibleLabel();if(this._labelCanGetFocus(h)){n++;s=l;a=o;r=true}}}}else if(e===u._enumMoveDirection.DOWN){for(l=i+1;l<this._internalCalcMatrix.length&&n<this._jumpOverElements;l++){if(this._internalCalcMatrix[l][o]&&this._internalCalcMatrix[l][o].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[l][o].getHighlighted())){n++;s=l;a=o;r=true}else if(this._internalCalcMatrix[l][o]&&this._internalCalcMatrix[l][o].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){h=this._internalCalcMatrix[l][o]._getVisibleLabel();if(this._labelCanGetFocus(h)){n++;s=l;a=o;r=true}}}}if(r){if(this._internalCalcMatrix[i][o]&&this._internalCalcMatrix[i][o].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){this._internalCalcMatrix[i][o]._getVisibleLabel()._setNavigationFocus(false)}else{this._internalCalcMatrix[i][o]._setNavigationFocus(false)}if(this._internalCalcMatrix[s][a]&&this._internalCalcMatrix[s][a].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){h=this._internalCalcMatrix[s][a]._getVisibleLabel();h._setNavigationFocus(true);this._lastNavigationFocusElement=h}else{this._internalCalcMatrix[s][a]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[s][a]}}return r};u.prototype._moveHomeEnd=function(e,t){e=e||u._enumMoveDirection.RIGHT;t=t||false;var i=0,o=0;var s=0,a=0;var n=false,r,l,c;for(r=0;r<this._internalCalcMatrix.length;r++){for(l=0;l<this._internalCalcMatrix[r].length;l++){if(this._internalCalcMatrix[r][l]&&this._internalCalcMatrix[r][l].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._internalCalcMatrix[r][l]._getNavigationFocus()){i=r;o=l;break}else if(this._internalCalcMatrix[r][l]&&this._internalCalcMatrix[r][l].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){c=this._internalCalcMatrix[r][l]._getVisibleLabel();if(c&&c._getNavigationFocus()){i=r;o=l;break}}}}if(t){if(e===u._enumMoveDirection.LEFT){for(r=0;r<i;r++){if(this._internalCalcMatrix[r][o]&&this._internalCalcMatrix[r][o].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[r][o].getHighlighted())){s=r;a=o;n=true;break}else if(this._internalCalcMatrix[r][o]&&this._internalCalcMatrix[r][o].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){c=this._internalCalcMatrix[r][o]._getVisibleLabel();if(this._labelCanGetFocus(c)){s=r;a=o;n=true;break}}}}else if(e===u._enumMoveDirection.RIGHT){for(r=this._internalCalcMatrix.length-1;r>i;r--){if(this._internalCalcMatrix[r][o]&&this._internalCalcMatrix[r][o].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[r][o].getHighlighted())){s=r;a=o;n=true;break}else if(this._internalCalcMatrix[r][o]&&this._internalCalcMatrix[r][o].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){c=this._internalCalcMatrix[r][o]._getVisibleLabel();if(this._labelCanGetFocus(c)){s=r;a=o;n=true;break}}}}}else if(e===u._enumMoveDirection.LEFT){for(l=0;l<o;l++){if(this._internalCalcMatrix[i][l]&&this._internalCalcMatrix[i][l].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][l].getHighlighted())){s=i;a=l;n=true;break}else if(this._internalCalcMatrix[i][l]&&this._internalCalcMatrix[i][l].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){c=this._internalCalcMatrix[i][l]._getVisibleLabel();if(this._labelCanGetFocus(c)){s=i;a=l;n=true;break}}}}else if(e===u._enumMoveDirection.RIGHT){for(l=this._internalCalcMatrix[i].length-1;l>o;l--){if(this._internalCalcMatrix[i][l]&&this._internalCalcMatrix[i][l].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][l].getHighlighted())){s=i;a=l;n=true;break}else if(this._internalCalcMatrix[i][l]&&this._internalCalcMatrix[i][l].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){c=this._internalCalcMatrix[i][l]._getVisibleLabel();if(this._labelCanGetFocus(c)){s=i;a=l;n=true;break}}}}if(n){if(this._internalCalcMatrix[i][o]&&this._internalCalcMatrix[i][o].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){this._internalCalcMatrix[i][o]._getVisibleLabel()._setNavigationFocus(false)}else{this._internalCalcMatrix[i][o]._setNavigationFocus(false)}if(this._internalCalcMatrix[s][a]&&this._internalCalcMatrix[s][a].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){c=this._internalCalcMatrix[s][a]._getVisibleLabel();c._setNavigationFocus(true);this._lastNavigationFocusElement=c}else{this._internalCalcMatrix[s][a]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[s][a]}}return n};u.prototype._moveToNextElement=function(e,t){e=e||u._enumMoveDirection.RIGHT;if(sap.ui.getCore().getConfiguration().getRTL()){if(e===u._enumMoveDirection.RIGHT){e=u._enumMoveDirection.LEFT}else if(e===u._enumMoveDirection.LEFT){e=u._enumMoveDirection.RIGHT}}t=t||1;var i=false;var o=false;var s=0,a=1,n,r,l;if(!this._internalCalcMatrix){return false}var c=0,h=0;for(n=0;n<this._internalCalcMatrix.length;n++){for(r=0;r<this._internalCalcMatrix[n].length;r++){if(this._internalCalcMatrix[n][r]){if(this._internalCalcMatrix[n][r]&&this._internalCalcMatrix[n][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._internalCalcMatrix[n][r]._getNavigationFocus()){s=c=n;a=h=r;i=true;break}else if(this._internalCalcMatrix[n][r]&&this._internalCalcMatrix[n][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){l=this._internalCalcMatrix[n][r]._getVisibleLabel();if(l&&l._getNavigationFocus()&&l.getEnabled()){s=c=n;a=h=r;i=true;break}}}}if(i){break}}if(e===u._enumMoveDirection.RIGHT){for(n=c;n<this._internalCalcMatrix.length;n++){for(r=h+1;r<this._internalCalcMatrix[n].length;r++){if(this._internalCalcMatrix[n][r]&&this._internalCalcMatrix[n][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(i&&(!this._bHighlightedMode||this._internalCalcMatrix[n][r].getHighlighted())){this._internalCalcMatrix[n][r]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[n][r];o=true;break}}else if(this._internalCalcMatrix[n][r]&&this._internalCalcMatrix[n][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){l=this._internalCalcMatrix[n][r]._getVisibleLabel();if(i&&this._labelCanGetFocus(l)){l._setNavigationFocus(true);this._lastNavigationFocusElement=l;o=true;break}}}h=0;if(o){break}}}if(e===u._enumMoveDirection.LEFT){for(n=c;n>=0;n--){for(r=h-1;r>=0;r--){if(this._internalCalcMatrix[n][r]&&this._internalCalcMatrix[n][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(i&&(!this._bHighlightedMode||this._internalCalcMatrix[n][r].getHighlighted())){this._lastNavigationFocusElement=this._internalCalcMatrix[n][r]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[n][r];o=true;break}}else if(this._internalCalcMatrix[n][r]&&this._internalCalcMatrix[n][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){l=this._internalCalcMatrix[n][r]._getVisibleLabel();if(i&&this._labelCanGetFocus(l)){l._setNavigationFocus(true);this._lastNavigationFocusElement=l;o=true;break}}}if(n>0){h=this._internalCalcMatrix[n-1].length}if(o){break}}}var g,d,_;if(e===u._enumMoveDirection.UP){for(n=c-1;n>=0;n--){g=0;while(!o){d=h-g;_=h+g;if(d>=0&&this._internalCalcMatrix[n][d]&&this._internalCalcMatrix[n][d].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(i&&(!this._bHighlightedMode||this._internalCalcMatrix[n][d].getHighlighted())){this._internalCalcMatrix[n][d]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[n][d];o=true;break}}else if(d>=0&&this._internalCalcMatrix[n][d]&&this._internalCalcMatrix[n][d].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){l=this._internalCalcMatrix[n][d]._getVisibleLabel();if(i&&this._labelCanGetFocus(l)){l._setNavigationFocus(true);this._lastNavigationFocusElement=l;o=true;break}}if(_<this._internalCalcMatrix[n].length&&this._internalCalcMatrix[n][_]&&this._internalCalcMatrix[n][_].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(i&&(!this._bHighlightedMode||this._internalCalcMatrix[n][_].getHighlighted())){this._internalCalcMatrix[n][_]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[n][_];o=true;break}}else if(_>=0&&this._internalCalcMatrix[n][_]&&this._internalCalcMatrix[n][_].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){l=this._internalCalcMatrix[n][_]._getVisibleLabel();if(i&&this._labelCanGetFocus(l)){l._setNavigationFocus(true);this._lastNavigationFocusElement=l;o=true;break}}if(d<0&&_>this._internalCalcMatrix[n].length){break}g++}}}if(e===u._enumMoveDirection.DOWN){for(n=c+1;n<this._internalCalcMatrix.length;n++){g=0;while(!o){d=h-g;_=h+g;if(d>=0&&this._internalCalcMatrix[n][d]&&this._internalCalcMatrix[n][d].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(i&&(!this._bHighlightedMode||this._internalCalcMatrix[n][d].getHighlighted())){this._lastNavigationFocusElement=this._internalCalcMatrix[n][d]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[n][d];o=true;break}}else if(d>=0&&this._internalCalcMatrix[n][d]&&this._internalCalcMatrix[n][d].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){l=this._internalCalcMatrix[n][d]._getVisibleLabel();if(i&&this._labelCanGetFocus(l)){l._setNavigationFocus(true);this._lastNavigationFocusElement=l;o=true;break}}if(_<this._internalCalcMatrix[n].length&&this._internalCalcMatrix[n][_]&&this._internalCalcMatrix[n][_].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(i&&(!this._bHighlightedMode||this._internalCalcMatrix[n][_].getHighlighted())){this._lastNavigationFocusElement=this._internalCalcMatrix[n][_]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[n][_];o=true;break}}else if(_>=0&&this._internalCalcMatrix[n][_]&&this._internalCalcMatrix[n][_].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){l=this._internalCalcMatrix[n][_]._getVisibleLabel();if(i&&this._labelCanGetFocus(l)){l._setNavigationFocus(true);this._lastNavigationFocusElement=l;o=true;break}}if(d<0&&_>this._internalCalcMatrix[n].length){break}g++}}}if(o){if(this._internalCalcMatrix[s][a]&&this._internalCalcMatrix[s][a].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._internalCalcMatrix[s][a]._setNavigationFocus(false)}else{this._internalCalcMatrix[s][a]._getVisibleLabel()._setNavigationFocus(false)}}return o};u.prototype._getScrollContainerOnZoomChanged=function(e,t){e.scrollLeft=Math.round(t.get()[0].scrollWidth/e.scrollWidth*e.scrollLeft);e.scrollTop=Math.round(t.get()[0].scrollHeight/e.scrollHeight*e.scrollTop);e.scrollWidth=t.get()[0].scrollWidth;e.scrollHeight=t.get()[0].scrollHeight;return e};u.prototype._mergeLaneIdNodeStates=function(e){var i=0;var o=0;var s=0;var a=0;var n=0;for(var r=0;r<5;r++){for(var l=0;l<e.length;l++){switch(e[l][r].state){case t.ProcessFlowNodeState.Positive:i=i+e[l][r].value;break;case t.ProcessFlowNodeState.Negative:o=o+e[l][r].value;break;case t.ProcessFlowNodeState.Neutral:s=s+e[l][r].value;break;case t.ProcessFlowNodeState.Planned:a=a+e[l][r].value;break;case t.ProcessFlowNodeState.PlannedNegative:o=o+e[l][r].value;break;case t.ProcessFlowNodeState.Critical:n=n+e[l][r].value;break;default:break}}}return[{state:t.ProcessFlowNodeState.Positive,value:i},{state:t.ProcessFlowNodeState.Negative,value:o},{state:t.ProcessFlowNodeState.Neutral,value:s},{state:t.ProcessFlowNodeState.Planned,value:a},{state:t.ProcessFlowNodeState.Critical,value:n}]};u.prototype._setFocusOnHeader=function(e){var t=this.$("thead");if(e){t.focus();t.addClass("sapSuiteUiCommonsPFHeaderFocused");this._headerHasFocus=true}else{t.removeClass("sapSuiteUiCommonsPFHeaderFocused");this._headerHasFocus=false}};u.prototype._scroll=function(t,i){var o=this._getScrollContainer().get(0);var s=o.scrollLeft;if(!n.browser.edge&&this._bRtl){t=-t}var a=s+t;e(o).stop(true,true).animate({scrollLeft:a},i,e.proxy(this._adjustAndShowArrow,this))};u.prototype._adjustAndShowArrow=function(){this._checkOverflow(this._getScrollContainer().get(0),this.$());if(this.getScrollable()){this._moveArrowAndCounterVertical()}if(this._isFocusChanged){this._setFocusToNode(this._lastNavigationFocusElement);this._isFocusChanged=false}};u.prototype._getScrollingArrow=function(e){var t;if(n.system.desktop){t="sap-icon://navigation-"+e+"-arrow"}else{t="sap-icon://slim-arrow-"+e}var o={src:t};var s="sapPFHArrowScrollLeft";var a="sapPFHArrowScrollRight";var r=["sapPFHArrowScroll",s];var l=["sapPFHArrowScroll",a];if(e===u._constants.left){if(!this._oArrowLeft){this._oArrowLeft=i.ImageHelper.getImageControl(this.getId()+u._constants.arrowScrollLeftMinus,null,this,o,r)}return this._oArrowLeft}if(e===u._constants.right){if(!this._oArrowRight){this._oArrowRight=i.ImageHelper.getImageControl(this.getId()+u._constants.arrowScrollRightMinus,null,this,o,l)}return this._oArrowRight}};u.prototype._checkScrolling=function(e,t){var i=false;if(e){if(e.scrollWidth>e.clientWidth){i=true}}if(this._arrowScrollable!==i){t.toggleClass("sapPFHScrollable",i);t.toggleClass("sapPFHNotScrollable",!i);this._arrowScrollable=i}return i};u.prototype._updateLeftCounter=function(){var e;if(!this._bRtl){e=this._getScrollContainer().scrollLeft()}else{e=this._getScrollContainer().scrollRightRTL()}var t=Math.round(e/this._scrollStep);this.$(u._constants.counterLeft).text(t.toString());return t};u.prototype._updateRightCounter=function(e,t){var i;var o;if(!this._bRtl){i=this._getScrollContainer().scrollLeft();o=Math.round((t-i-e)/this._scrollStep)}else{i=this._getScrollContainer().scrollLeftRTL();o=Math.round(i/this._scrollStep)}this.$(u._constants.counterRight).text(o.toString());return o};u.prototype._moveArrowAndCounterVertical=function(){var e=this._getScrollContainer().scrollTop();if(e>0){var t=this._iInitialArrowTop-e;var i=this._iInitialCounterTop-e;var o=this._iInitialCounterTop-this._iInitialArrowTop;if(t>0){this.$(u._constants.arrowScrollRight).css(u._constants.top,t+u._constants.px);this.$(u._constants.arrowScrollLeft).css(u._constants.top,t+u._constants.px)}else{this.$(u._constants.arrowScrollRight).css(u._constants.top,"0px");this.$(u._constants.arrowScrollLeft).css(u._constants.top,"0px")}if(i>o){this.$(u._constants.counterRight).css(u._constants.top,i+u._constants.px);this.$(u._constants.counterLeft).css(u._constants.top,i+u._constants.px)}else{this.$(u._constants.counterRight).css(u._constants.top,o+u._constants.px);this.$(u._constants.counterLeft).css(u._constants.top,o+u._constants.px)}}else{this.$(u._constants.arrowScrollRight).css(u._constants.top,this._iInitialArrowTop+u._constants.px);this.$(u._constants.arrowScrollLeft).css(u._constants.top,this._iInitialArrowTop+u._constants.px);this.$(u._constants.counterRight).css(u._constants.top,this._iInitialCounterTop+u._constants.px);this.$(u._constants.counterLeft).css(u._constants.top,this._iInitialCounterTop+u._constants.px)}};u.prototype._checkOverflow=function(t,i){if(this._checkScrolling(t,i)&&t){this._setScrollWidth();var o=false;var s=false;var a=20;var n=this._getScrollContainer().scrollLeft();var r=t.scrollWidth;var l=t.clientWidth;if(Math.abs(r-l)===1){r=l}if(!this._bRtl){if(n>a){o=true}if(r>l&&n+l+a<r){s=true}}else{var c=e(t);if(c.scrollLeftRTL()>a){s=true}if(c.scrollRightRTL()>a){o=true}}this._updateLeftCounter();this._updateRightCounter(l,r);if(s!==this._bPreviousScrollForward||o!==this._bPreviousScrollBack){this._bPreviousScrollForward=s;this._bPreviousScrollBack=o;i.toggleClass("sapPFHScrollBack",o);i.toggleClass("sapPFHNoScrollBack",!o);i.toggleClass("sapPFHScrollForward",s);i.toggleClass("sapPFHNoScrollForward",!s)}}else{this._bPreviousScrollForward=false;this._bPreviousScrollBack=false}};u.prototype._setParentForNodes=function(e){var t=e?e.length:0;var i;var o,s;for(var a in e){e[a].removeAllAssociation(u._constants.parents,true)}for(o=0;o<t;o++){i=e[o].getChildren();if(i){for(s=0;s<i.length;s++){var n=this._getNode(u._getChildIdByElement(i[s]),e);if(n){n.addAssociation(u._constants.parents,e[o],true)}}}}};u.prototype._getConnectionsMap=function(){var e=[];var t=this.getNodes();for(var i=0;i<t.length;i++){var o=this._getPositionOfNodeInMatrix(this._internalCalcMatrix,t[i]);var s=t[i].getChildren();if(s){for(var a=0;a<s.length;a++){var n={};n.sourceNode=t[i];var r=u._getChildIdByElement(s[a]);var l=this._getNode(r,t);if(l){if(typeof s[a]==="object"){n.label=s[a].connectionLabel}n.targetNode=l;var c=this._getPositionOfNodeInMatrix(this._internalCalcMatrix,n.targetNode);n.connectionParts=this._calculateConnectionParts(o,c);e.push(n)}}}}this._internalConnectionMap=e;return e};u.prototype._getPositionOfNodeInMatrix=function(e,t){var i={};for(var o=0;o<e.length;o++){var s=e[o];for(var a=0;a<s.length;a++){var n=s[a];if(n&&n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&n.getNodeId()===t.getNodeId()){i.y=o;i.x=a;return i}}}return i};u.prototype._calculateConnectionParts=function(e,t){var i=[];var o=e.y;var s=e.x;s++;i.push({x:s,y:o});if(t.y>=e.y){while(o<t.y){o++;i.push({x:s,y:o})}}else{while(o>t.y){o--;i.push({x:s,y:o})}}while(s<t.x-1){s++;i.push({x:s,y:o})}return i};u.prototype._getConnectionMapEntries=function(e){var t=[];var i=null;var o=null;if(this._internalConnectionMap){for(var s=0;s<this._internalConnectionMap.length;s++){o=this._internalConnectionMap[s];if(o.label&&o.label.getId()===e.getId()){i=o;break}}o=null;for(var a=0;a<this._internalConnectionMap.length;a++){o=this._internalConnectionMap[a];if(o.targetNode&&o.targetNode.getNodeId()===i.targetNode.getNodeId()){t.push(o)}}}return t};u.prototype._createLabelPressEventArgs=function(e,t){var i={};var o=[];if(t){for(var s=0;s<t.length;s++){var a={sourceNode:t[s].sourceNode,targetNode:t[s].targetNode,label:t[s].label};o.push(a)}}i.selectedLabel=e;i.connections=o;return i};u.prototype.applyNodeDisplayState=function(){var e=this.getNodes(),t=e?e.length:0,i=0;if(t!==0){while(i<t){e[i]._setRegularState();i++}i=0;while(i<t&&!e[i].getHighlighted()&&!e[i].getSelected()){i++}if(i<t){i=0;while(i<t){if(!e[i].getHighlighted()&&!e[i].getSelected()){e[i]._setDimmedState()}i++}}}};u.InternalMatrixCalculation.prototype.checkInputNodeConsistency=function(e){var t=[],i,o,s,a,n,r=0;Object.keys(e).forEach(function(l){n=e[l];a=n.oNode.getChildren();s=a?a.length:0;if(n.oNode.getFocused()){r++}i=0;while(i<s){o=u._getChildIdByElement(a[i]);if(!e[o]){t.push("Node identificator "+o+" used in children definition is not presented as the node itself. Element : "+n.nodeId)}i++}});if(t.length>0){throw t}return r>1};u.InternalMatrixCalculation.prototype.processCurrentElement=function(e,t,i){var o,s,a=true,n=true;if(e.isProcessed){return i}this.nodePositions[e.nodeId]={c:e,x:this.iPositionX,y:this.iPositionY*2};i[this.iPositionX][this.iPositionY++]=e;o=e.oNode.getChildren();e.isProcessed=true;s=this._sortBasedOnChildren(o,t);if(s){s.forEach(function(e){if(!e.isProcessed){n=false;while(this.iPositionY<e.lane){i[this.iPositionX][this.iPositionY++]=null}i=this.processCurrentElement(e,t,i)}else if(a&&n){this.iPositionX++;a=false}}.bind(this))}if(!o||n){if(a){this.iPositionX++}this.iPositionY=0}return i};u.prototype.getZoomLevel=function(){return this._zoomLevel};u.prototype.setZoomLevel=function(e){if(!this._getScrollContainer()){return}var i=this._getScrollContainer();var o=null;var s;if(i.get().length){o={scrollWidth:i.get()[0].scrollWidth,scrollHeight:i.get()[0].scrollHeight,scrollLeft:i.get()[0].scrollLeft,scrollTop:i.get()[0].scrollTop};s=o;if(this._zoomLevel===e){this._isInitialZoomLevelNeeded=false;return}}if(!(e in t.ProcessFlowZoomLevel)){this._handleException('"'+e+'" is not a valid entry of the enumeration for property zoom level of ProcessFlow');return}this._zoomLevel=e;if(this._isInitialZoomLevelNeeded){this._isInitialZoomLevelNeeded=false;this.invalidate()}else{this.rerender()}if(o){if(n.support.touch){var a=parseInt(this._getScrollContainer().css("height").slice(0,-2),10);var r=parseInt(this._getScrollContainer().css("width").slice(0,-2),10);var l=this._getScrollContainer()[0].scrollHeight;var c=this._getScrollContainer()[0].scrollWidth;if(this.getScrollable()&&(l>a||c>r)){this._switchCursors(this._getScrollContainer(),this._defaultCursorClass,this._grabCursorClass);this._getScrollContainer().css("overflow","auto")}}i=this._getScrollContainer();s=this._getScrollContainerOnZoomChanged(o,i);i.scrollLeft(s.scrollLeft);i.scrollTop(s.scrollTop);this._adjustAndShowArrow();if(this._isFocusChanged){this._setFocusToNode();this._isFocusChanged=false}}};u.prototype.zoomOut=function(){var e=this.getZoomLevel();var i=e;switch(e){case t.ProcessFlowZoomLevel.One:i=t.ProcessFlowZoomLevel.Two;break;case t.ProcessFlowZoomLevel.Two:i=t.ProcessFlowZoomLevel.Three;break;case t.ProcessFlowZoomLevel.Three:i=t.ProcessFlowZoomLevel.Four;break;default:break}this.setZoomLevel(i);return this.getZoomLevel()};u.prototype.zoomIn=function(){var e=this.getZoomLevel();var i=e;switch(e){case t.ProcessFlowZoomLevel.Four:i=t.ProcessFlowZoomLevel.Three;break;case t.ProcessFlowZoomLevel.Three:i=t.ProcessFlowZoomLevel.Two;break;case t.ProcessFlowZoomLevel.Two:i=t.ProcessFlowZoomLevel.One;break;default:break}this.setZoomLevel(i);return this.getZoomLevel()};u.prototype.updateModel=function(){this._lastNavigationFocusElement=null;var e=this.getNodes();e.forEach(function(e){e._mergedLaneId=false});var t=this.getLanes();t.forEach(function(e){e._mergedLanePosition=false});this._internalLanes=[];if(this._isHeaderMode()){var i=this.getBindingInfo("lanes");this.getModel(i.model).refresh()}else{var o=this.getBindingInfo("nodes");this.getModel(o.model).refresh()}this.rerender()};u.prototype.optimizeLayout=function(e){if(e===undefined){e=true}if(this._isLayoutOptimized!==e){this._isLayoutOptimized=e;this.updateModel()}return this};u.prototype.getFocusedNode=function(){return this._lastNavigationFocusElement&&this._lastNavigationFocusElement.sId};u.prototype.updateNodesOnly=function(){var e=this.getBindingInfo("nodes");this.getModel(e.model).refresh();this.rerender()};u.prototype.setSelectedPath=function(e,t){var i=this.getNodes(),o;if(i){if(e&&t){var s=0;for(o=0;o<i.length;o++){if(i[o].getNodeId()===e||i[o].getNodeId()===t){i[o].setSelected(true);s++}else{i[o].setSelected(false)}}if(s===2){this.rerender()}}else if(!e&&!t){for(o=0;o<i.length;o++){i[o].setSelected(false)}this.rerender()}}};u.prototype.setShowLabels=function(e){var t=this.getShowLabels();if(t&&!e){this.setProperty("showLabels",e,true);if(!this.getShowLabels()){this.setSelectedPath(null,null)}}else{this.setProperty("showLabels",e)}return this};u.prototype.setFocusToLabel=function(e){this._changeNavigationFocus(this._lastNavigationFocusElement,e)};u.prototype._labelCanGetFocus=function(e){return e&&e.getEnabled()&&(!this._bHighlightedMode||e._bHighlighted)};u.prototype.getNode=function(e){var t=this.getNodes();for(var i=0;i<t.length;i++){if(t[i].getProperty("nodeId")===e){return t[i]}}};u.prototype.getFocusInfo=function(){var e=document.activeElement;if(e&&e.nodeName){return{sFocusId:e.id,oFocusedElement:e,oFocusInfo:{}}}else{return{}}};u.prototype.applyFocusInfo=function(e){if(e.sFocusId){var t=this._lastNavigationFocusElement;this._changeNavigationFocus(null,t)}};u.prototype.getLane=function(e){var t=this.getLanes();for(var i=0;i<t.length;i++){if(t[i].getProperty("laneId")===e){return t[i]}}};u.prototype.removeAllLanes=function(){this.removeAllAggregation("lanes");this._internalLanes=[]};return u});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ProcessFlowConnection",["./library","sap/ui/core/Control","./ProcessFlowConnectionRenderer"],function(e,t,o){"use strict";var a=t.extend("sap.suite.ui.commons.ProcessFlowConnection",{metadata:{library:"sap.suite.ui.commons",properties:{drawData:{type:"object[]",group:"Misc",defaultValue:null},zoomLevel:{type:"sap.suite.ui.commons.ProcessFlowZoomLevel",group:"Misc",defaultValue:"Two"},type:{type:"sap.suite.ui.commons.ProcessFlowConnectionType",group:"Appearance",defaultValue:"Normal",deprecated:true},state:{type:"sap.suite.ui.commons.ProcessFlowConnectionState",group:"Appearance",defaultValue:"Regular",deprecated:true}},defaultAggregation:"_labels",aggregations:{_labels:{type:"sap.suite.ui.commons.ProcessFlowConnectionLabel",multiple:true,singularName:"_label",visibility:"hidden"}}}});a.prototype._oResBundle=null;a.prototype._showLabels=false;a.prototype._oStateOrderMapping=null;a.prototype.init=function(){if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons")}this._oStateOrderMapping={};this._oStateOrderMapping[e.ProcessFlowConnectionLabelState.Neutral]=1;this._oStateOrderMapping[e.ProcessFlowConnectionLabelState.Positive]=2;this._oStateOrderMapping[e.ProcessFlowConnectionLabelState.Critical]=3;this._oStateOrderMapping[e.ProcessFlowConnectionLabelState.Negative]=4};a.prototype._getAriaText=function(e){var t="";var o=" "+this._oResBundle.getText("PF_CONNECTION_ENDS");if(this._isHorizontalLine(e)){t=this._oResBundle.getText("PF_CONNECTION_HORIZONTAL_LINE");if(e.arrow){t+=o}}else if(this._isVerticalLine(e)){t=this._oResBundle.getText("PF_CONNECTION_VERTICAL_LINE");if(e.arrow){t+=o}}else{t=this._oResBundle.getText("PF_CONNECTION_BRANCH");if(e.arrow){t+=o}}return t};a.prototype._getVisibleLabel=function(){var e=null;if(this.getAggregation("_labels")){var t=this.getAggregation("_labels");for(var o=0;o<t.length;o++){var a=t[o];if(a&&a.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){if(e){if(this._oStateOrderMapping[e.getState()]<this._oStateOrderMapping[a.getState()]){e=a}else if(this._oStateOrderMapping[e.getState()]===this._oStateOrderMapping[a.getState()]){if(e.getPriority()<a.getPriority()){e=a}}}else{e=a}}}}return e};a.prototype._getShowLabels=function(){return a.prototype._showLabels};a.prototype._setShowLabels=function(e){a.prototype._showLabels=e};a.prototype._traverseConnectionData=function(){var e=this.getDrawData();if(!e){return{}}var t=this._createConnection(e);if(this.getAggregation("_labels")){t.labels=this.getAggregation("_labels")}return t};a.prototype._isVerticalLine=function(e){return e.hasOwnProperty("left")&&!e.left.draw&&e.hasOwnProperty("right")&&!e.right.draw&&e.hasOwnProperty("top")&&e.top.draw&&e.hasOwnProperty("bottom")&&e.bottom.draw};a.prototype._isHorizontalLine=function(e){return e.hasOwnProperty("left")&&e.left.draw&&e.hasOwnProperty("right")&&e.right.draw&&e.hasOwnProperty("top")&&!e.top.draw&&e.hasOwnProperty("bottom")&&!e.bottom.draw};a.prototype._createConnection=function(e){var t={draw:false,type:"",state:""};var o={right:t,top:t,left:t,bottom:t,arrow:false};for(var a=0;a<e.length;a++){o.right=this._createLine(e[a],"r",o.right);o.top=this._createLine(e[a],"t",o.top);o.left=this._createLine(e[a],"l",o.left);o.bottom=this._createLine(e[a],"b",o.bottom);if(e[a].flowLine.indexOf("r")>=0){if(e[a].hasArrow){o.arrow=true}}}return o};a.prototype._createLine=function(t,o,a){var r={draw:a.draw,type:a.type,state:a.state};if(t.flowLine.indexOf(o)>=0){r.draw=true;if(t.targetNodeState===e.ProcessFlowNodeState.Neutral||t.targetNodeState===e.ProcessFlowNodeState.Positive||t.targetNodeState===e.ProcessFlowNodeState.Negative||t.targetNodeState===e.ProcessFlowNodeState.Critical){r.type=e.ProcessFlowConnectionType.Normal}else if(t.targetNodeState===e.ProcessFlowNodeState.Planned||t.targetNodeState===e.ProcessFlowNodeState.PlannedNegative){if(r.type!==e.ProcessFlowConnectionType.Normal){r.type=e.ProcessFlowConnectionType.Planned}}if(t.displayState===e.ProcessFlowDisplayState.Selected||t.displayState===e.ProcessFlowDisplayState.SelectedHighlighted||t.displayState===e.ProcessFlowDisplayState.SelectedHighlightedFocused||t.displayState===e.ProcessFlowDisplayState.SelectedFocused){r.state=e.ProcessFlowConnectionState.Selected}else if(t.displayState===e.ProcessFlowDisplayState.Highlighted||t.displayState===e.ProcessFlowDisplayState.HighlightedFocused){if(r.state!==e.ProcessFlowConnectionState.Selected){r.state=e.ProcessFlowConnectionState.Highlighted}}else if(t.displayState===e.ProcessFlowDisplayState.Regular||t.displayState===e.ProcessFlowDisplayState.RegularFocused){if(r.state!==e.ProcessFlowConnectionState.Highlighted&&r.state!==e.ProcessFlowConnectionState.Selected){r.state=e.ProcessFlowConnectionState.Regular}}else if(t.displayState===e.ProcessFlowDisplayState.Dimmed||t.displayState===e.ProcessFlowDisplayState.DimmedFocused){if(r.state!==e.ProcessFlowConnectionState.Highlighted&&r.state!==e.ProcessFlowConnectionState.Regular&&r.state!==e.ProcessFlowConnectionState.Selected){r.state=e.ProcessFlowConnectionState.Dimmed}}}return r};a.prototype.addConnectionData=function(e){var t=this.getDrawData();if(!t){t=[]}t.push(e);this.setDrawData(t);return t};a.prototype.destroyAggregation=function(e,t){this.removeAllAggregation("_labels",true)};return a});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ProcessFlowConnectionLabel",["sap/m/Button","./library","sap/ui/core/InvisibleText","./ProcessFlowConnectionLabelRenderer"],function(e,t,s,i){"use strict";var o=e.extend("sap.suite.ui.commons.ProcessFlowConnectionLabel",{metadata:{library:"sap.suite.ui.commons",properties:{priority:{type:"int",group:"Misc",defaultValue:0},state:{type:"sap.suite.ui.commons.ProcessFlowConnectionLabelState",group:"Appearance",defaultValue:"Neutral"}}}});o.prototype._bNavigationFocus=false;o.prototype._bSelected=false;o.prototype._bHighlighted=false;o.prototype.ACTIVE_CSS_CLASS="sapSuiteUiCommonsProcessFlowLabelActive";o.prototype.HOVER_CSS_CLASS="sapSuiteUiCommonsProcessFlowLabelHover";o.prototype.MOUSE_EVENTS="mouseenter mousedown mouseup mouseleave";o.prototype._oResBundle=null;o.prototype._bDimmed=false;o.prototype.init=function(){if(e.prototype.init){e.prototype.init.apply(this,arguments)}this.addStyleClass("sapSuiteUiCommonsProcessFlowConnectionLabel");if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons")}};o.prototype.exit=function(){this.$().off(this.MOUSE_EVENTS,this._handleEvents)};o.prototype.onBeforeRendering=function(){this.$().off(this.MOUSE_EVENTS,this._handleEvents);this._configureStateClasses();this._setLabelWidth();this._setAriaDetails()};o.prototype.onAfterRendering=function(){if(!this.getText()){if(this.$().children().hasClass("sapMBtnIconFirst")){this.$().children().removeClass("sapMBtnIconFirst")}}this.$().bind(this.MOUSE_EVENTS,this._handleEvents.bind(this));document.getElementById(this.getId()).setAttribute("aria-haspopup","dialog")};o.prototype._handleEvents=function(e){var t=sap.ui.require("sap/suite/ui/commons/ProcessFlow");if(!t){return}switch(e.type){case t._mouseEvents.mouseEnter:this.$().find("*").addClass(this.HOVER_CSS_CLASS);break;case t._mouseEvents.mouseDown:this.$().find("*").removeClass(this.HOVER_CSS_CLASS);this.$().find("*").addClass(this.ACTIVE_CSS_CLASS);break;case t._mouseEvents.mouseUp:this.$().find("*").removeClass(this.ACTIVE_CSS_CLASS);this.$().find("*").addClass(this.HOVER_CSS_CLASS);break;case t._mouseEvents.mouseLeave:this.$().find("*").removeClass(this.ACTIVE_CSS_CLASS);this.$().find("*").removeClass(this.HOVER_CSS_CLASS);break;default:}};o.prototype._getNavigationFocus=function(){return this._bNavigationFocus};o.prototype._setNavigationFocus=function(e){this._bNavigationFocus=e};o.prototype._setSelected=function(e){this._bSelected=e};o.prototype._getSelected=function(){return this._bSelected};o.prototype._setHighlighted=function(e){this._bHighlighted=e};o.prototype._getHighlighted=function(){return this._bHighlighted};o.prototype._setDimmed=function(e){this._bDimmed=e};o.prototype._getDimmed=function(){return this._bDimmed};o.prototype.setWidth=function(){return this};o.prototype.setIconFirst=function(){return this};o.prototype._setLabelWidth=function(){if(this.getIcon()){if(this.getText()){this.setProperty("width","4.5rem",false)}else{this.setProperty("width","2rem",false)}}else if(this.getText()&&this.getText().length>2){this.setProperty("width","4.5rem",false)}else{this.setProperty("width","2rem",false)}};o.prototype._configureStateClasses=function(){switch(this.getState()){case t.ProcessFlowConnectionLabelState.Positive:this.addStyleClass("sapSuiteUiCommonsLabelStatePositive");break;case t.ProcessFlowConnectionLabelState.Critical:this.addStyleClass("sapSuiteUiCommonsLabelStateCritical");break;case t.ProcessFlowConnectionLabelState.Negative:this.addStyleClass("sapSuiteUiCommonsLabelStateNegative");break;default:this.addStyleClass("sapSuiteUiCommonsLabelStateNeutral")}if(this._getDimmed()&&this.getEnabled()){this.addStyleClass("sapSuiteUiCommonsLabelDimmed")}else{this.removeStyleClass("sapSuiteUiCommonsLabelDimmed")}if(this._getSelected()){this.addStyleClass("sapSuiteUiCommonsLabelSelected")}else{this.removeStyleClass("sapSuiteUiCommonsLabelSelected")}if(this._getHighlighted()){this.addStyleClass("sapSuiteUiCommonsLabelHighlighted")}else{this.removeStyleClass("sapSuiteUiCommonsLabelHighlighted")}};o.prototype._setAriaDetails=function(){var e=new s;e.setText(this._oResBundle.getText("PF_CONNECTIONLABEL"));e.toStatic();var t=new s;t.setText(this.getText());t.toStatic();if(this.getAriaLabelledBy().length===0){this.addAriaLabelledBy(e);this.addAriaLabelledBy(t)}};return o});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ProcessFlowConnectionLabelRenderer",["sap/m/ButtonRenderer","sap/ui/core/Renderer"],function(e,r){"use strict";var n=r.extend(e);n.apiVersion=2;return n},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ProcessFlowConnectionRenderer",["./library"],function(e){"use strict";var o={apiVersion:2};o.render=function(e,o){var s=o._traverseConnectionData();var t=o.getZoomLevel();e.openStart("div");e.attr("id",o.getId());e.attr("role","presentation");e.attr("aria-label",o._getAriaText(s));e.openEnd();if(o._isHorizontalLine(s)){this._writeHorizontalLine(e,s,t,o)}else if(o._isVerticalLine(s)){this._writeVerticalLine(e,s,t,o._getShowLabels())}else{this._writeSpecialLine(e,s,t,o)}e.close("div")};o._writeVerticalLine=function(s,t,i,a){s.openStart("div");s.class("sapSuiteUiCommonsFloatLeft");if(a){s.class("sapSuiteUiCommonsPFWithLabel")}switch(i){case e.ProcessFlowZoomLevel.One:s.class("sapSuiteUiCommonsBoxZoom1Width");s.class("sapSuiteUiCommonsBoxWideZoom1Height");break;case e.ProcessFlowZoomLevel.Three:s.class("sapSuiteUiCommonsBoxZoom3Width");s.class("sapSuiteUiCommonsBoxWideZoom3Height");break;case e.ProcessFlowZoomLevel.Four:s.class("sapSuiteUiCommonsBoxZoom4Width");s.class("sapSuiteUiCommonsBoxWideZoom4Height");break;default:s.class("sapSuiteUiCommonsBoxZoom2Width");s.class("sapSuiteUiCommonsBoxWideZoom2Height")}s.openEnd();s.close("div");s.openStart("div");s.class("sapSuiteUiCommonsFloatLeft");s.class("sapSuiteUiCommonsBoxMiddleBorderWidth");switch(i){case e.ProcessFlowZoomLevel.One:s.class("sapSuiteUiCommonsBoxWideZoom1Height");break;case e.ProcessFlowZoomLevel.Three:s.class("sapSuiteUiCommonsBoxWideZoom3Height");break;case e.ProcessFlowZoomLevel.Four:s.class("sapSuiteUiCommonsBoxWideZoom4Height");break;default:s.class("sapSuiteUiCommonsBoxWideZoom2Height")}s.class("sapSuiteUiCommonsBorderLeft");if(t.top.type===e.ProcessFlowConnectionType.Planned){s.class("sapSuiteUiCommonsBorderLeftTypePlanned")}else{s.class("sapSuiteUiCommonsBorderLeftTypeNormal")}if(t.top.state===e.ProcessFlowConnectionState.Highlighted){s.class("sapSuiteUiCommonsBorderLeftStateHighlighted");s.class("sapSuiteUiCommonsStateHighlighted")}else if(t.top.state===e.ProcessFlowConnectionState.Dimmed){s.class("sapSuiteUiCommonsBorderLeftStateDimmed")}else if(t.top.state===e.ProcessFlowConnectionState.Selected){s.class("sapSuiteUiCommonsBorderLeftStateSelected");s.class("sapSuiteUiCommonsStateSelected")}else{s.class("sapSuiteUiCommonsBorderLeftStateRegular");s.class("sapSuiteUiCommonsStateRegular")}s.openEnd();s.close("div");o._resetFloat(s)};o._writeHorizontalLine=function(s,t,i,a){s.openStart("div");s.class("sapSuiteUiCommonsBoxWideWidth");switch(i){case e.ProcessFlowZoomLevel.One:s.class("sapSuiteUiCommonsBoxTopZoom1Height");break;case e.ProcessFlowZoomLevel.Three:s.class("sapSuiteUiCommonsBoxTopZoom3Height");break;case e.ProcessFlowZoomLevel.Four:s.class("sapSuiteUiCommonsBoxTopZoom4Height");break;default:s.class("sapSuiteUiCommonsBoxTopZoom2Height")}s.openEnd();s.close("div");s.openStart("div");if(t.arrow){s.class("sapSuiteUiCommonsParentPosition");if(a._getShowLabels()){s.class("sapSuiteUiCommonsPFWithLabel")}switch(i){case e.ProcessFlowZoomLevel.One:s.class("sapSuiteUiCommonsBoxWideArrowZoom1Width");break;case e.ProcessFlowZoomLevel.Three:s.class("sapSuiteUiCommonsBoxWideArrowZoom3Width");break;case e.ProcessFlowZoomLevel.Four:s.class("sapSuiteUiCommonsBoxWideArrowZoom4Width");break;default:s.class("sapSuiteUiCommonsBoxWideArrowZoom2Width")}}else{s.class("sapSuiteUiCommonsBoxWideWidth")}s.class("sapSuiteUiCommonsBoxMiddleBorderHeight");s.class("sapSuiteUiCommonsBorderBottom");if(t.right.type===e.ProcessFlowConnectionType.Planned){s.class("sapSuiteUiCommonsBorderBottomTypePlanned")}else{s.class("sapSuiteUiCommonsBorderBottomTypeNormal")}if(t.right.state===e.ProcessFlowConnectionState.Highlighted){s.class("sapSuiteUiCommonsBorderBottomStateHighlighted");s.class("sapSuiteUiCommonsStateHighlighted")}else if(t.right.state===e.ProcessFlowConnectionState.Dimmed){s.class("sapSuiteUiCommonsBorderBottomStateDimmed")}else if(t.right.state===e.ProcessFlowConnectionState.Selected){s.class("sapSuiteUiCommonsBorderBottomStateSelected");s.class("sapSuiteUiCommonsStateSelected")}else{s.class("sapSuiteUiCommonsBorderBottomStateRegular");s.class("sapSuiteUiCommonsStateRegular")}s.openEnd();if(t.labels&&a._showLabels){o._renderLabel(s,a,t)}if(t.arrow){s.openStart("div");s.class("sapSuiteUiCommonsArrowRight");if(t.right.state===e.ProcessFlowConnectionState.Highlighted){s.class("sapSuiteUiCommonsBorderLeftStateHighlighted")}else if(t.right.state===e.ProcessFlowConnectionState.Dimmed){s.class("sapSuiteUiCommonsBorderLeftStateDimmed")}else if(t.right.state===e.ProcessFlowConnectionState.Selected){s.class("sapSuiteUiCommonsBorderLeftStateSelected")}else{s.class("sapSuiteUiCommonsBorderLeftStateRegular")}s.openEnd();s.close("div")}s.close("div")};o._writeSpecialLine=function(e,s,t,i){o._writeFirstRowOfSpecialLine(e,s,t,i);o._writeSecondRowOfSpecialLine(e,s,t,i);o._writeThirdRowOfSpecialLine(e,s,t,i);o._resetFloat(e)};o._writeFirstRowOfSpecialLine=function(o,s,t,i){o.openStart("div");o.class("sapSuiteUiCommonsFloatLeft");if(i._getShowLabels()){o.class("sapSuiteUiCommonsPFWithLabel")}switch(t){case e.ProcessFlowZoomLevel.One:o.class("sapSuiteUiCommonsBoxZoom1Width");o.class("sapSuiteUiCommonsBoxTopZoom1Height");break;case e.ProcessFlowZoomLevel.Three:o.class("sapSuiteUiCommonsBoxZoom3Width");o.class("sapSuiteUiCommonsBoxTopZoom3Height");break;case e.ProcessFlowZoomLevel.Four:o.class("sapSuiteUiCommonsBoxZoom4Width");o.class("sapSuiteUiCommonsBoxTopZoom4Height");break;default:o.class("sapSuiteUiCommonsBoxZoom2Width");o.class("sapSuiteUiCommonsBoxTopZoom2Height")}o.openEnd();o.close("div");o.openStart("div");if(i._getShowLabels()){o.class("sapSuiteUiCommonsPFWithLabel")}o.class("sapSuiteUiCommonsFloatLeft");switch(t){case e.ProcessFlowZoomLevel.One:o.class("sapSuiteUiCommonsBoxTopZoom1Height");break;case e.ProcessFlowZoomLevel.Three:o.class("sapSuiteUiCommonsBoxTopZoom3Height");break;case e.ProcessFlowZoomLevel.Four:o.class("sapSuiteUiCommonsBoxTopZoom4Height");break;default:o.class("sapSuiteUiCommonsBoxTopZoom2Height")}if(s.hasOwnProperty("top")&&s.top.draw){o.class("sapSuiteUiCommonsBoxMiddleBorderWidth");o.class("sapSuiteUiCommonsBorderLeft");if(s.top.type===e.ProcessFlowConnectionType.Planned){o.class("sapSuiteUiCommonsBorderLeftTypePlanned")}else{o.class("sapSuiteUiCommonsBorderLeftTypeNormal")}if(s.top.state===e.ProcessFlowConnectionState.Highlighted){o.class("sapSuiteUiCommonsBorderLeftStateHighlighted");o.class("sapSuiteUiCommonsStateHighlighted")}else if(s.top.state===e.ProcessFlowConnectionState.Dimmed){o.class("sapSuiteUiCommonsBorderLeftStateDimmed")}else if(s.top.state===e.ProcessFlowConnectionState.Selected){o.class("sapSuiteUiCommonsBorderLeftStateSelected");o.class("sapSuiteUiCommonsStateSelected")}else{o.class("sapSuiteUiCommonsBorderLeftStateRegular");o.class("sapSuiteUiCommonsStateRegular")}}else{o.class("sapSuiteUiCommonsBoxMiddleWidth")}o.openEnd();o.close("div")};o._writeSecondRowOfSpecialLine=function(s,t,i,a){o._resetFloat(s);s.openStart("div");s.class("sapSuiteUiCommonsFloatLeft");if(a._getShowLabels()){s.class("sapSuiteUiCommonsPFWithLabel")}switch(i){case e.ProcessFlowZoomLevel.One:s.class("sapSuiteUiCommonsBoxZoom1Width");break;case e.ProcessFlowZoomLevel.Three:s.class("sapSuiteUiCommonsBoxZoom3Width");break;case e.ProcessFlowZoomLevel.Four:s.class("sapSuiteUiCommonsBoxZoom4Width");break;default:s.class("sapSuiteUiCommonsBoxZoom2Width")}if(t.hasOwnProperty("left")&&t.left.draw){s.class("sapSuiteUiCommonsBoxMiddleBorderHeight");s.class("sapSuiteUiCommonsBorderBottom");if(t.left.type===e.ProcessFlowConnectionType.Planned){s.class("sapSuiteUiCommonsBorderBottomTypePlanned")}else{s.class("sapSuiteUiCommonsBorderBottomTypeNormal")}if(t.left.state===e.ProcessFlowConnectionState.Highlighted){s.class("sapSuiteUiCommonsBorderBottomStateHighlighted");s.class("sapSuiteUiCommonsStateHighlighted")}else if(t.left.state===e.ProcessFlowConnectionState.Dimmed){s.class("sapSuiteUiCommonsBorderBottomStateDimmed")}else if(t.left.state===e.ProcessFlowConnectionState.Selected){s.class("sapSuiteUiCommonsBorderBottomStateSelected");s.class("sapSuiteUiCommonsStateSelected")}else{s.class("sapSuiteUiCommonsBorderBottomStateRegular");s.class("sapSuiteUiCommonsStateRegular")}}else{s.class("sapSuiteUiCommonsBoxMiddleHeight")}s.openEnd();s.close("div");s.openStart("div");s.class("sapSuiteUiCommonsFloatLeft");if(a._getShowLabels()){s.class("sapSuiteUiCommonsPFWithLabel")}s.class("sapSuiteUiCommonsBoxMiddleWidth");s.class("sapSuiteUiCommonsBoxMiddleBorderHeight");if(t.hasOwnProperty("left")&&t.left.draw||t.hasOwnProperty("right")&&t.right.draw||t.hasOwnProperty("top")&&t.top.draw||t.hasOwnProperty("bottom")&&t.bottom.draw){s.class("sapSuiteUiCommonsBorderBottom");s.class("sapSuiteUiCommonsBorderBottomTypeNormal");if(t.right.state===e.ProcessFlowConnectionState.Highlighted||t.top.state===e.ProcessFlowConnectionState.Highlighted||t.left.state===e.ProcessFlowConnectionState.Highlighted||t.bottom.state===e.ProcessFlowConnectionState.Highlighted){s.class("sapSuiteUiCommonsBorderBottomStateHighlighted");s.class("sapSuiteUiCommonsStateHighlighted")}else if(t.right.state===e.ProcessFlowConnectionState.Selected||t.top.state===e.ProcessFlowConnectionState.Selected||t.left.state===e.ProcessFlowConnectionState.Selected||t.bottom.state===e.ProcessFlowConnectionState.Selected){s.class("sapSuiteUiCommonsBorderBottomStateSelected");s.class("sapSuiteUiCommonsStateSelected")}else if(t.right.state===e.ProcessFlowConnectionState.Dimmed||t.top.state===e.ProcessFlowConnectionState.Dimmed||t.left.state===e.ProcessFlowConnectionState.Dimmed||t.bottom.state===e.ProcessFlowConnectionState.Dimmed){s.class("sapSuiteUiCommonsBorderBottomStateDimmed")}else{s.class("sapSuiteUiCommonsBorderBottomStateRegular");s.class("sapSuiteUiCommonsStateRegular")}}s.openEnd();s.close("div");s.openStart("div");if(a._getShowLabels()&&t.arrow||!a._getShowLabels()){s.class("sapSuiteUiCommonsFloatLeft")}if(a._getShowLabels()){s.class("sapSuiteUiCommonsPFWithLabel")}if(t.arrow){s.class("sapSuiteUiCommonsParentPosition");switch(i){case e.ProcessFlowZoomLevel.One:s.class("sapSuiteUiCommonsBoxArrowZoom1Width");break;case e.ProcessFlowZoomLevel.Three:s.class("sapSuiteUiCommonsBoxArrowZoom3Width");break;case e.ProcessFlowZoomLevel.Four:s.class("sapSuiteUiCommonsBoxArrowZoom4Width");break;default:s.class("sapSuiteUiCommonsBoxArrowZoom2Width")}}else if(a._getShowLabels()){switch(i){case e.ProcessFlowZoomLevel.One:s.class("sapSuiteUiCommonsBoxZoom1WidthWithLabel");break;case e.ProcessFlowZoomLevel.Three:s.class("sapSuiteUiCommonsBoxZoom3WidthWithLabel");break;case e.ProcessFlowZoomLevel.Four:s.class("sapSuiteUiCommonsBoxZoom4WidthWithLabel");break;default:s.class("sapSuiteUiCommonsBoxZoom2WidthWithLabel")}}else{switch(i){case e.ProcessFlowZoomLevel.One:s.class("sapSuiteUiCommonsBoxZoom1Width");break;case e.ProcessFlowZoomLevel.Three:s.class("sapSuiteUiCommonsBoxZoom3Width");break;case e.ProcessFlowZoomLevel.Four:s.class("sapSuiteUiCommonsBoxZoom4Width");break;default:s.class("sapSuiteUiCommonsBoxZoom2Width")}}if(t.hasOwnProperty("right")&&t.right.draw){s.class("sapSuiteUiCommonsBoxMiddleBorderHeight");s.class("sapSuiteUiCommonsBorderBottom");if(t.right.type===e.ProcessFlowConnectionType.Planned){s.class("sapSuiteUiCommonsBorderBottomTypePlanned")}else{s.class("sapSuiteUiCommonsBorderBottomTypeNormal")}if(t.right.state===e.ProcessFlowConnectionState.Highlighted){s.class("sapSuiteUiCommonsBorderBottomStateHighlighted");s.class("sapSuiteUiCommonsStateHighlighted")}else if(t.right.state===e.ProcessFlowConnectionState.Dimmed){s.class("sapSuiteUiCommonsBorderBottomStateDimmed")}else if(t.right.state===e.ProcessFlowConnectionState.Selected){s.class("sapSuiteUiCommonsBorderBottomStateSelected");s.class("sapSuiteUiCommonsStateSelected")}else{s.class("sapSuiteUiCommonsBorderBottomStateRegular");s.class("sapSuiteUiCommonsStateRegular")}}else{s.class("sapSuiteUiCommonsBoxMiddleHeight")}s.openEnd();if(t.labels&&a._showLabels){o._renderLabel(s,a,t)}if(t.arrow){s.openStart("div");s.class("sapSuiteUiCommonsArrowRight");if(t.hasOwnProperty("right")){if(t.right.state===e.ProcessFlowConnectionState.Highlighted){s.class("sapSuiteUiCommonsBorderLeftStateHighlighted")}else if(t.right.state===e.ProcessFlowConnectionState.Dimmed){s.class("sapSuiteUiCommonsBorderLeftStateDimmed")}else if(t.right.state===e.ProcessFlowConnectionState.Selected){s.class("sapSuiteUiCommonsBorderLeftStateSelected")}else{s.class("sapSuiteUiCommonsBorderLeftStateRegular")}}s.openEnd();s.close("div")}s.close("div")};o._writeThirdRowOfSpecialLine=function(s,t,i,a){o._resetFloat(s);s.openStart("div");s.class("sapSuiteUiCommonsFloatLeft");if(a._getShowLabels()){s.class("sapSuiteUiCommonsPFWithLabel")}switch(i){case e.ProcessFlowZoomLevel.One:s.class("sapSuiteUiCommonsBoxZoom1Width");s.class("sapSuiteUiCommonsBoxBottomZoom1Height");break;case e.ProcessFlowZoomLevel.Three:s.class("sapSuiteUiCommonsBoxZoom3Width");s.class("sapSuiteUiCommonsBoxBottomZoom3Height");break;case e.ProcessFlowZoomLevel.Four:s.class("sapSuiteUiCommonsBoxZoom4Width");s.class("sapSuiteUiCommonsBoxBottomZoom4Height");break;default:s.class("sapSuiteUiCommonsBoxZoom2Width");s.class("sapSuiteUiCommonsBoxBottomZoom2Height")}s.openEnd();s.close("div");s.openStart("div");if(a._getShowLabels()){s.class("sapSuiteUiCommonsPFWithLabel")}s.class("sapSuiteUiCommonsFloatLeft");switch(i){case e.ProcessFlowZoomLevel.One:s.class("sapSuiteUiCommonsBoxBottomZoom1Height");break;case e.ProcessFlowZoomLevel.Three:s.class("sapSuiteUiCommonsBoxBottomZoom3Height");break;case e.ProcessFlowZoomLevel.Four:s.class("sapSuiteUiCommonsBoxBottomZoom4Height");break;default:s.class("sapSuiteUiCommonsBoxBottomZoom2Height")}if(t.hasOwnProperty("bottom")&&t.bottom.draw){s.class("sapSuiteUiCommonsBoxMiddleBorderWidth");s.class("sapSuiteUiCommonsBorderLeft");if(t.bottom.type===e.ProcessFlowConnectionType.Planned){s.class("sapSuiteUiCommonsBorderLeftTypePlanned")}else{s.class("sapSuiteUiCommonsBorderLeftTypeNormal")}if(t.bottom.state===e.ProcessFlowConnectionState.Highlighted){s.class("sapSuiteUiCommonsBorderLeftStateHighlighted");s.class("sapSuiteUiCommonsStateHighlighted")}else if(t.bottom.state===e.ProcessFlowConnectionState.Dimmed){s.class("sapSuiteUiCommonsBorderLeftStateDimmed")}else if(t.bottom.state===e.ProcessFlowConnectionState.Selected){s.class("sapSuiteUiCommonsBorderLeftStateSelected");s.class("sapSuiteUiCommonsStateSelected")}else{s.class("sapSuiteUiCommonsBorderLeftStateRegular");s.class("sapSuiteUiCommonsStateRegular")}}else{s.class("sapSuiteUiCommonsBoxMiddleWidth")}s.openEnd();s.close("div")};o._resetFloat=function(e){e.openStart("div");e.class("sapSuiteUiCommonsFloatClear");e.openEnd();e.close("div")};o._renderLabel=function(e,o){var s=o._getVisibleLabel();if(o.getAggregation("_labels")){var t=o.getAggregation("_labels");for(var i=0;i<t.length;i++){if(t[i]._getSelected()){s._setDimmed(false);if(t[i].getId()!==s.getId()){s._setSelected(true);t[i]._setSelected(false)}}}}if(s){e.renderControl(s)}};return o},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ProcessFlowLaneHeader",["sap/ui/thirdparty/jquery","sap/m/Image","./library","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/Device","sap/ui/core/Icon","./ProcessFlowLaneHeaderRenderer"],function(e,t,o,s,r,i,n,a){"use strict";var l=s.extend("sap.suite.ui.commons.ProcessFlowLaneHeader",{metadata:{library:"sap.suite.ui.commons",properties:{text:{type:"string",group:"Misc",defaultValue:null},iconSrc:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},position:{type:"int",group:"Misc",defaultValue:null},laneId:{type:"string",group:"Misc",defaultValue:null},state:{type:"object",group:"Misc",defaultValue:null},zoomLevel:{type:"sap.suite.ui.commons.ProcessFlowZoomLevel",group:"Misc",defaultValue:null}},events:{press:{parameters:{oEvent:{type:"object"}}}}}});l.prototype._oResBundle=null;l.prototype._mergedLanePosition=null;l.symbolType={startSymbol:"startSymbol",endSymbol:"endSymbol",processSymbol:"processSymbol",standardType:"standardType"};l._constants={halfGapSize:.0241,minPercentage:.025,ringThickness:5,ringInnerRadius:23,positionX:32,positionY:32,outerCircleRadius:31,outerCircleStrokeColor:"OuterCircleStrikeColor",outerCircleStrokeWidth:1,sectorPositiveColor:"suiteUiCommonsProcessFlowHeaderPositiveColor",sectorNegativeColor:"suiteUiCommonsProcessFlowHeaderNegativeColor",sectorNeutralColor:"suiteUiCommonsProcessFlowHeaderNeutralColor",sectorCriticalColor:"suiteUiCommonsProcessFlowHeaderCriticalColor",sectorPlannedColor:"suiteUiCommonsProcessFlowHeaderPlannedColor",ellipsis:"...",ellipsisLength:3};l.prototype.init=function(){this._virtualTableSpan=1;if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons")}};l.prototype.exit=function(){this._destroyImage();this.$().off("click",this.ontouchend)};l.prototype.onBeforeRendering=function(){this.$("lh-icon").off("click",e.proxy(this.ontouchend,this));this.$().off("click",this.ontouchend)};l.prototype.onAfterRendering=function(){var t=this.$();var o=this.$("lh-icon");var s="click";if(i.support.touch){s="touchend"}if(o.length>0){o.on(s,e.proxy(this.ontouchend,this));o.css("cursor","inherit")}this.$().on("click",e.proxy(this.ontouchend,this));if(this._isHeaderMode()){t.addClass("suiteUiProcessFlowLaneHeaderPointer")}else{t.removeClass("suiteUiProcessFlowLaneHeaderPointer")}if(i.browser.mozilla){this.$("lh-text").css("word-break","break-all")}if(!this._ellipsisDisabled&&!l._hasNativeLineClamp){this._clampText()}};l.prototype.ontouchend=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault()}if(this){this.firePress(this)}if(e&&!e.isPropagationStopped()){e.stopPropagation()}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation()}};l.prototype._setMergedPosition=function(e){this._mergedLanePosition=e};l.prototype._getSymbolType=function(){return this._oSymbolType?this._oSymbolType:l.symbolType.standardType};l.prototype._setSymbolType=function(e,t){t._oSymbolType=e};l.prototype._getImage=function(e,o){this._destroyImage();if(this._oImageControl){this._oImageControl.setSrc(o)}else{this._oImageControl=r.createControlByURI(o,t);this._oImageControl.sId=e;this._oImageControl.setParent(this,null,true)}if(this._oImageControl instanceof n){this._oImageControl.setUseIconTooltip(false)}return this._oImageControl};l.prototype._setHeaderMode=function(e){this._bHeaderMode=e};l._setVirtualTableSpan=function(e){this._virtualTableSpan=e};l._getVirtualTableSpan=function(){return this._virtualTableSpan};l.prototype._isHeaderMode=function(){return this._bHeaderMode};l.prototype._clampValues=function(e,t,o){var s=e.length-1,r=false,i;while(s>=0){i=e[s];if(i<t){e[s]=o;r=true}s--}return r};l.prototype._rescaleToUnit=function(e,t){var o,s,r,i,n,a;if(!t){t=0}s=e.length-1;o=0;r=i=0;while(s>=0){n=e[s];if(n>0){if(n<=t){i++}else{o+=e[s]}r++}s--}o-=(r-i)*t;a=(1-r*t)/o;s=e.length-1;while(s>=0){n=e[s];if(n>0){if(n<=t){e[s]=t}else{e[s]=(n-t)*a+t}}s--}};l.prototype._countGaps=function(e){var t=e.length-1,o=0;while(t>=0){if(e[t]>0){o++}t--}if(o===1){o=0}return o};l.prototype._rescaleByFactor=function(e,t){var o=e.length-1;while(o>=0){e[o]*=t;o--}};l.prototype._colorMap=[l._constants.sectorPositiveColor,l._constants.sectorNegativeColor,l._constants.sectorNeutralColor,l._constants.sectorPlannedColor,l._constants.sectorCriticalColor];l.prototype._calculateSectorRangeDefinitions=function(e,t){var o=[],s=-Math.PI/2,r,i=e.length,n=0;while(n<i){if(e[n]>0){r=s+2*Math.PI*e[n];o.push({start:s,end:r,color:this._colorMap[n]});s=r+t}n++}return o};l.prototype._renderDonutPercentages=function(e){var t=this.getState(),s=0,r,i=[0,0,0,0],n,a,c=l._constants.halfGapSize,u=l._constants.ringInnerRadius,p=l._constants.ringThickness,d=l._constants.ringInnerRadius+p,h=l._constants.outerCircleStrokeColor,_=l._constants.outerCircleStrokeWidth,y=l._constants.outerCircleRadius,f=l._constants.positionX,g=l._constants.positionY,m=l._constants.minPercentage;if(t&&Object.prototype.toString.call(t)==="[object Array]"&&t.length>0){t.forEach(function(e){switch(e.state){case o.ProcessFlowNodeState.Positive:i[0]=e.value;break;case o.ProcessFlowNodeState.Negative:i[1]=e.value;break;case o.ProcessFlowNodeState.Neutral:i[2]=e.value;break;case o.ProcessFlowNodeState.Planned:i[3]=e.value;break;case o.ProcessFlowNodeState.Critical:i[4]=e.value;break;default:i[3]=e.value}});this._clampValues(i,0,0);this._rescaleToUnit(i);this._rescaleToUnit(i,m);s=this._countGaps(i);n=1-s*c/Math.PI;this._rescaleByFactor(i,n);this._renderCircle(e,h,_,f,g,y);if(s>0){r=this._calculateSectorRangeDefinitions(i,2*c);this._renderDonutSectors(e,r,f,g,u,d)}else{a=this._selectColor(i);this._renderCircle(e,a,p,f,g,u+p/2,true)}}else{this._renderCircle(e,h,_,f,g,y)}};l.prototype._renderCircle=function(e,t,o,s,r,i,n){e.openStart("circle");var a=n?this.getId()+"-donut-circle-inner":this.getId()+"-donut-circle";e.attr("id",a);if(t!==l._constants.outerCircleStrokeColor){e.class("suiteUiCommonsProcessFlowHeaderIconFill").class(t)}else{e.class("suiteUiCommonsProcessFlowHeaderIconFill")}e.attr("stroke-width",o);e.attr("cx",s);e.attr("cy",r);e.attr("r",i);e.openEnd().close("circle")};l.prototype._renderDonutSectors=function(e,t,o,s,r,i){var n=0,a=t.length,l,c;while(n<a){l=t[n];c=this._getDonutSectorPath(o,s,l.start,l.end,r,i);e.openStart("path");e.attr("id",this.getId()+"-donut-segment-"+n);e.attr("d",c);e.attr("class",l.color);e.attr("opacity","1");e.openEnd().close("path");n++}};l.prototype._selectColor=function(e){var t;if(e[0]){t=l._constants.sectorPositiveColor}else if(e[1]){t=l._constants.sectorNegativeColor}else if(e[2]){t=l._constants.sectorNeutralColor}else if(e[3]){t=l._constants.sectorPlannedColor}else if(e[4]){t=l._constants.sectorCriticalColor}else{t=l._constants.sectorNeutralColor}return t};l.prototype._getDonutSectorPath=function(e,t,o,s,r,i){var n=0,a,l,c,u,p,d,h,_,y;if((s-o)%(Math.PI*2)>Math.PI){n=1}d=Math.cos(o);h=Math.cos(s);_=Math.sin(o);y=Math.sin(s);a=(e+r*d).toFixed(3)+","+(t+r*_).toFixed(3);l=(e+i*d).toFixed(3)+","+(t+i*_).toFixed(3);c=(e+i*h).toFixed(3)+","+(t+i*y).toFixed(3);u=(e+r*h).toFixed(3)+","+(t+r*y).toFixed(3);p="M"+a+"L"+l+"A"+i+","+i+" 0 "+n+" 1 "+c+"L"+u+"A"+r+","+r+" 0 "+n+" 0 "+a+"z";return p};l.prototype._destroyImage=function(){if(this._oImageControl){this._oImageControl.destroy()}this._oImageControl=null};l.prototype._clampText=function(){var e=this.$("lh-text").length?this.$("lh-text"):null,t=this.getText(),o="",s=l._constants.ellipsis,r=l._constants.ellipsisLength,i=r+1,n,a=t.length,c,u;if(e){c=parseInt(e.css("height").slice(0,-2),10);if(e[0].scrollHeight>c){u=e.css("visibility");e.css("visibility","hidden");o=t;do{n=i+a>>1;e.textContent=t.slice(0,n-r)+s;if(e.scrollHeight>c){a=n}else{i=n;o=e.textContent}}while(a-i>1);e.css("visibility",u)}if(e.scrollHeight>c){e.textContent=o}}};l._hasNativeLineClamp=function(){return document.documentElement.style.webkitLineClamp!==undefined}();l.prototype._getAriaTextForStatusValue=function(e){switch(e){case o.ProcessFlowNodeState.Positive:return this._oResBundle.getText("PF_ARIA_STATUS_POSITIVE");case o.ProcessFlowNodeState.Negative:return this._oResBundle.getText("PF_ARIA_STATUS_NEGATIVE");case o.ProcessFlowNodeState.Critical:return this._oResBundle.getText("PF_ARIA_STATUS_CRITICAL");case o.ProcessFlowNodeState.Planned:return this._oResBundle.getText("PF_ARIA_STATUS_PLANNED");case o.ProcessFlowNodeState.PlannedNegative:return this._oResBundle.getText("PF_ARIA_STATUS_PLNNEGATIVE");case o.ProcessFlowNodeState.Neutral:default:return this._oResBundle.getText("PF_ARIA_STATUS_NEUTRAL")}};l.prototype._getAriaText=function(){var e=this.getText();var t=this.getState();if(t){var o=[];for(var s in t){o.push(t[s].value)}this._clampValues(o,0,0);this._rescaleToUnit(o);var r=this._oResBundle.getText("PF_ARIA_STATUS");var i=false;for(var n in t){if(t[n].value!==0){var a=this._getAriaTextForStatusValue(t[n].state);var l=" "+Math.round(o[n]*100)+"% "+a+",";r=r.concat(l);i=true}}if(i){if(e==""){e=r.slice(0,-1)}else{e=e+", "+r.slice(0,-1)}}}return e};l.prototype._getSymbolAriaText=function(){var e="";switch(this._getSymbolType()){case l.symbolType.startSymbol:e=this._oResBundle.getText("PF_ARIA_SYMBOL_LANE_START");break;case l.symbolType.endSymbol:e=this._oResBundle.getText("PF_ARIA_SYMBOL_LANE_END");break;case l.symbolType.processSymbol:e=this._oResBundle.getText("PF_ARIA_SYMBOL_LANE_PROCESS");break;default:}return e};l.createNewStartSymbol=function(e){var t=new l({laneId:"processFlowLaneStart"});t._setSymbolType(l.symbolType.startSymbol,t);t._setHeaderMode(e);return t};l.createNewEndSymbol=function(e){var t=new l({laneId:"processFlowLaneEnd"});t._setSymbolType(l.symbolType.endSymbol,t);t._setHeaderMode(e);return t};l.createNewProcessSymbol=function(e){var t=new l({laneId:"processFlowLaneProcess",iconSrc:"sap-icon://process"});t._setSymbolType(l.symbolType.processSymbol,t);t._setHeaderMode(e);return t};l.enableEllipsisSupportForText=function(e){this._ellipsisDisabled=!e};l.prototype.getPosition=function(){if(this._mergedLanePosition){return this._mergedLanePosition}else{return this.getProperty("position")}};return l});
/*
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ProcessFlowLaneHeaderRenderer",["sap/base/security/encodeXML"],function(e){"use strict";var t;var o={apiVersion:2};o.render=function(e,o){t=t||sap.ui.require("sap/suite/ui/commons/ProcessFlowLaneHeader");switch(o._getSymbolType()){case t.symbolType.startSymbol:this._writeSymbolNodeType(e,o,"-start",["suiteUiProcessFlowLaneHeaderStartEndSymbol","suiteUiProcessFlowLaneHeaderStartSymbol"],["suiteUiProcessFlowLaneHeaderStartEndSymbolContainer","suiteUiProcessFlowLaneHeaderNoSelection"],false,o._isHeaderMode());break;case t.symbolType.endSymbol:this._writeSymbolNodeType(e,o,"-end",["suiteUiProcessFlowLaneHeaderStartEndSymbol","suiteUiProcessFlowLaneHeaderEndSymbol"],["suiteUiProcessFlowLaneHeaderStartEndSymbolContainer","suiteUiProcessFlowLaneHeaderNoSelection"],false,o._isHeaderMode());break;case t.symbolType.processSymbol:this._writeSymbolNodeType(e,o,"-process",["suiteUiProcessFlowLaneHeaderProcessSymbol"],["suiteUiProcessFlowLaneHeaderProcessSymbolContainer","suiteUiProcessFlowLaneHeaderNoSelection"],true,o._isHeaderMode());break;default:this._writeDefaultNodeType(e,o)}};o._writeSymbolNodeType=function(t,o,r,a,s,i){t.openStart("div",o);s.forEach(function(o){t.class(e(o))});t.attr("role","separator");t.attr("aria-label",o._getSymbolAriaText());t.openEnd();t.openStart("div");t.attr("id",o.getId()+r);a.forEach(function(o){t.class(e(o))});t.openEnd();if(i){var n=o.getIconSrc();if(n){var d=o._getImage(o.getId()+"-lh-icon",n);t.renderControl(d)}}t.close("div");t.close("div")};o._writeDefaultNodeType=function(e,t){e.openStart("div",t);e.class("suiteUiProcessFlowLaneHeaderContainer");e.class("suiteUiProcessFlowLaneHeaderNoSelection");e.openEnd();e.openStart("div");e.attr("id",t.getId()+"-standard");e.attr("role","img");var o=t._getAriaText();e.attr("aria-label",o);var r=t.getTooltip()?t.getTooltip():o;e.attr("title",r);e.class("suiteUiProcessFlowLaneHeaderBodyContainer");e.openEnd();e.openStart("div");e.attr("id",t.getId()+"-horizontal-line");e.class("suiteUiProcessFlowLaneHeaderHorizontalLine");e.openEnd().close("div");e.openStart("svg");e.attr("id",t.getId()+"-donut-chart");e.class("suiteUiProcessFlowLaneHeaderDonutSvg");e.openEnd();t._renderDonutPercentages(e);e.close("svg");e.openStart("div");e.attr("id",t.getId()+"-lh-icon-container");e.class("suiteUiProcessFlowLaneHeaderIconContainer");e.openEnd();var a=t.getIconSrc();if(a){var s=t._getImage(t.getId()+"-lh-icon",a);s.addStyleClass("suiteUiProcessFlowLaneHeaderProcessSymbolIcon");e.renderControl(s)}e.close("div");e.close("div");e.openStart("div");e.attr("id",t.getId()+"-lh-text-container");e.class("suiteUiProcessFlowLaneHeaderTextContainer");e.openEnd();e.openStart("span");e.attr("id",t.getId()+"-lh-text");e.class("suiteUiProcessFlowLaneHeaderText");e.attr("aria-hidden",true);e.openEnd();e.text(t.getText());e.close("span");e.close("div");e.close("div")};return o},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ProcessFlowNode",["sap/ui/thirdparty/jquery","sap/m/Text","./library","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/Device","sap/ui/core/Icon","sap/base/Log","./ProcessFlowNodeRenderer"],function(e,s,o,t,a,l,r,i,d){"use strict";var n=t.extend("sap.suite.ui.commons.ProcessFlowNode",{metadata:{library:"sap.suite.ui.commons",properties:{title:{type:"string",group:"Misc",defaultValue:null},isTitleClickable:{type:"boolean",group:"Behavior",defaultValue:false,deprecated:true},laneId:{type:"string",group:"Misc",defaultValue:null},nodeId:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.suite.ui.commons.ProcessFlowNodeState",group:"Appearance",defaultValue:"Neutral"},type:{type:"sap.suite.ui.commons.ProcessFlowNodeType",group:"Appearance",defaultValue:"Single"},children:{type:"any[]",group:"Misc",defaultValue:null},titleAbbreviation:{type:"string",group:"Data",defaultValue:null},stateText:{type:"string",group:"Data",defaultValue:null},texts:{type:"string[]",group:"Misc",defaultValue:null},highlighted:{type:"boolean",group:"Appearance",defaultValue:false},focused:{type:"boolean",group:"Appearance",defaultValue:false},tag:{type:"object",group:"Misc",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{zoomLevelOneContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelTwoContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelThreeContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelFourContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},ariaProperties:{type:"sap.suite.ui.commons.AriaProperties",multiple:false,group:"Misc"}},associations:{parents:{type:"sap.suite.ui.commons.ProcessFlowNode",multiple:true,singularName:"parent"}},events:{titlePress:{deprecated:true,parameters:{oEvent:{type:"object"}}},press:{parameters:{oEvent:{type:"object"}}}}}});n.prototype._zoomLevel=o.ProcessFlowZoomLevel.Two;n.prototype._tag=null;n.prototype._displayState=o.ProcessFlowDisplayState.Regular;n.prototype._oResBundle=null;n.prototype._mergedLaneId=null;n.prototype._foldedCorner=false;n.prototype._foldedCornerControl=null;n.prototype._parent=null;n.prototype._headerControl=null;n.prototype._stateTextControl=null;n.prototype._iconControl=null;n.prototype._text1Control=null;n.prototype._text2Control=null;n.prototype._navigationFocus=false;n.prototype._sMouseEvents=" mousedown mouseup mouseenter mouseleave ";n.prototype._sMouseTouchEvents=l.support.touch?"saptouchstart saptouchcancel touchstart touchend":"";n.prototype._grabCursorClass="sapSuiteUiGrabCursorPF";n.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorPF";n.prototype._nodeHoverClass="sapSuiteUiCommonsProcessFlowNodeHover";n.prototype._nodeActiveClass="sapSuiteUiCommonsProcessFlowNodeActive";n.prototype._nodePlannedClass="sapSuiteUiCommonsProcessFlowNodeStatePlanned";n.prototype._nodePlannedClassIdentifier="."+n.prototype._nodePlannedClass;n.prototype._nodeFCHoverClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeHover";n.prototype._nodeFCActiveClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeActive";n.prototype._nodeFCIconHoverClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeIconHover";n.prototype._nodeAggregatedClass="sapSuiteUiCommonsProcessFlowNodeAggregated";n.prototype._nodeAggregatedHoveredClass="sapSuiteUiCommonsProcessFlowNodeAggregatedHovered";n.prototype._nodeAggregatedDimmedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmed";n.prototype._nodeAggregatedFocusedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedFocused";n.prototype._nodeAggregatedPressedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedPressed";n.prototype._nodeAggregatedDimmedPressedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedPressed";n.prototype._nodeAggregatedDimmedHoveredClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedHovered";n.prototype._nodeAggregatedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedZoomLevel4";n.prototype._nodeAggregatedHoveredClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedHoveredZoomLevel4";n.prototype._nodeAggregatedPressedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedPressedZoomLevel4";n.prototype._nodeAggregatedDimmedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedZoomLevel4";n.prototype._nodeAggregatedFocusedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedFocusedZoomLevel4";n.prototype._nodeAggregatedDimmedPressedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedPressedZoomLevel4";n.prototype._nodeAggregatedDimmedHoveredClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedHoveredZoomLevel4";n.prototype.init=function(){a.addIcon("context-menu","businessSuite","PFBusinessSuiteInAppSymbols","e02b",true);if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons")}};n.prototype.exit=function(){if(this._foldedCornerControl){this._foldedCornerControl.destroy();this._foldedCornerControl=null}if(this._headerControl){this._headerControl.destroy();this._headerControl=null}if(this._stateTextControl){this._stateTextControl.destroy();this._stateTextControl=null}if(this._iconControl){this._iconControl.destroy();this._iconControl=null}if(this._text1Control){this._text1Control.destroy();this._text1Control=null}if(this._text2Control){this._text2Control.destroy();this._text2Control=null}this.$().off(this._sMouseEvents,this._handleEvents);if(l.support.touch){this.$().off(this._sMouseTouchEvents,this._handleEvents)}};n.prototype.onBeforeRendering=function(){this.$().off(this._sMouseEvents,this._handleEvents);if(l.support.touch){this.$().off(this._sMouseTouchEvents,this._handleEvents)}};n.prototype.onAfterRendering=function(){this._sMouseEvents=this._sMouseEvents.concat(" ",this._sMouseTouchEvents);this.$().bind(this._sMouseEvents,e.proxy(this._handleEvents,this))};n.prototype._handleClick=function(e){if(this._parent&&this._parent._bHighlightedMode&&this._getDisplayState()===o.ProcessFlowDisplayState.Dimmed||this._getDisplayState()===o.ProcessFlowDisplayState.DimmedFocused){i.info("Event ignored, node in dimmed state.")}else if(this._parent){this.getParent()._changeNavigationFocus(this.getParent()._getLastNavigationFocusElement(),this);if(e.target.id.indexOf("title")>=0&&this.getIsTitleClickable()){this._parent.fireNodeTitlePress(this)}else{this._parent.fireNodePress(this)}}if(e&&!e.isPropagationStopped()){e.stopPropagation()}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation()}};n.prototype.onclick=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault()}this._handleClick(e)};n.prototype._handleEvents=function(s){var t=this.$().find("*");var a=this.$().attr("id");var r=this._getFoldedCorner();var i=this.getParent();var d=t.not(".sapUiIconTitle");if(s&&!s.isDefaultPrevented()){s.preventDefault()}if(this._parent&&this._parent._bHighlightedMode&&this._getDimmed()){return}if(this.getType()===o.ProcessFlowNodeType.Aggregated){this._adjustClassesForAggregation(s)}var n=sap.ui.require("sap/suite/ui/commons/ProcessFlow");if(!n){return}function C(e){return e.replace(/([:.\[\],=@])/g,"\\$1")}switch(s.type){case n._mouseEvents.mouseDown:case"keydown":this.$().removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);t.removeClass(this._nodeHoverClass);d.addClass(this._nodeActiveClass);if(r){e(document.getElementById(a)).removeClass(this._nodeFCHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeFCIconHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeFCIconHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass)}break;case n._mouseEvents.mouseUp:if(i.$().hasClass(this._grabbingCursorClass)){i.$().removeClass(this._grabbingCursorClass)}this.$().removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);t.removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);if(r){e(document.getElementById(a)).removeClass(this._nodeHoverClass+" "+this._nodeFCActiveClass).addClass(this._nodeFCHoverClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeHoverClass+" "+this._nodeFCActiveClass).addClass(this._nodeFCIconHoverClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeHoverClass+" "+this._nodeFCActiveClass).addClass(this._nodeFCIconHoverClass)}break;case n._mouseEvents.mouseEnter:if(!i.$().hasClass(this._grabbingCursorClass)){this.$().addClass(this._nodeHoverClass);d.addClass(this._nodeHoverClass);this.$().find(this._nodePlannedClassIdentifier).find("*").addClass(this._nodePlannedClass);if(r){e(document.getElementById(a)).removeClass(this._nodeHoverClass).addClass(this._nodeFCHoverClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeHoverClass).addClass(this._nodeFCIconHoverClass)}}break;case n._mouseEvents.mouseLeave:case"keyup":this.$().removeClass(this._nodeActiveClass+" "+this._nodeHoverClass);t.removeClass(this._nodeActiveClass+" "+this._nodeHoverClass);if(r){e(document.getElementById(a)).removeClass(this._nodeFCActiveClass+" "+this._nodeFCHoverClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeFCActiveClass+" "+this._nodeFCIconHoverClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeFCActiveClass+" "+this._nodeFCIconHoverClass)}if(!i.$().hasClass(this._grabbingCursorClass)){i.$().addClass(this._grabCursorClass)}break;case n._mouseEvents.touchStart:if(l.support.touch){this.$().addClass(this._nodeActiveClass);d.addClass(this._nodeActiveClass);if(r){e(document.getElementById(a)).removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass)}}break;case n._mouseEvents.sapTouchStart:this.$().removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);t.removeClass(this._nodeHoverClass);d.addClass(this._nodeActiveClass);if(r){e(document.getElementById(a)).removeClass(this._nodeFCHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeFCIconHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeFCIconHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass)}break;case n._mouseEvents.touchEnd:if(l.support.touch){this.$().removeClass(this._nodeActiveClass+" "+this._nodeHoverClass);t.removeClass(this._nodeActiveClass+" "+this._nodeHoverClass);if(r){e(document.getElementById(a)).removeClass(this._nodeFCActiveClass+" "+this._nodeFCHoverClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeFCActiveClass+" "+this._nodeFCIconHoverClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeFCActiveClass+" "+this._nodeFCIconHoverClass)}}this._handleClick(s);break;case n._mouseEvents.sapTouchCancel:this.$().removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);t.removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);if(r){e(document.getElementById(a)).removeClass(this._nodeFCActiveClass+" "+this._nodeHoverClass).addClass(this._nodeFCHoverClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeFCActiveClass+" "+this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeFCActiveClass+" "+this._nodeHoverClass).addClass(this._nodeFCIconHoverClass)}break;default:break}};n.prototype._setMergedLaneId=function(e){this._mergedLaneId=e};n.prototype._setParentFlow=function(e){this._parent=e};n.prototype._getFoldedCornerControl=function(){if(this._foldedCornerControl){this._foldedCornerControl.destroy()}this._foldedCornerControl=new r({id:this.getId()+"-corner-icon",src:a.getIconURI("context-menu","businessSuite"),visible:true});if(this._parent&&!this._parent._bHighlightedMode||!this._getDimmed()){this._foldedCornerControl.addStyleClass("sapUiIconPointer")}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel4");break;default:break}this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1");return this._foldedCornerControl};n.prototype._getHeaderControl=function(){if(this._headerControl){this._headerControl.destroy()}var e=0;var t="";var a=true;var l=this.getTitle();switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:e=3;break;case o.ProcessFlowZoomLevel.Two:e=3;break;case o.ProcessFlowZoomLevel.Three:e=2;l=this.getTitleAbbreviation();break;case o.ProcessFlowZoomLevel.Four:l="";e=0;t="0px";a=false;break;default:break}this._headerControl=new s({id:this.getId()+"-nodeid-anchor-title",text:l,visible:a,wrapping:true,wrappingType:sap.m.WrappingType.Hyphenated,width:t,maxLines:e});if(this.getIsTitleClickable()){this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleClickable")}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel4");break;default:break}this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Title");return this._headerControl};n.prototype._getIconControl=function(){if(this._iconControl){this._iconControl.destroy()}var e=null;var s=true;switch(this.getState()){case o.ProcessFlowNodeState.Positive:e="sap-icon://message-success";break;case o.ProcessFlowNodeState.Negative:case o.ProcessFlowNodeState.PlannedNegative:e="sap-icon://message-error";break;case o.ProcessFlowNodeState.Planned:e=null;break;case o.ProcessFlowNodeState.Neutral:e="sap-icon://process";break;case o.ProcessFlowNodeState.Critical:e="sap-icon://message-warning";break;default:break}this._iconControl=new r({id:this.getId()+"-icon",src:e,visible:s});if(this._parent&&!this._parent._bHighlightedMode||!this._getDimmed()){this._iconControl.addStyleClass("sapUiIconPointer")}var t=sap.ui.getCore().getConfiguration().getRTL();if(t){this._iconControl.addStyleClass("sapUiIconSuppressMirrorInRTL")}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:case o.ProcessFlowZoomLevel.Two:var a="sapSuiteUiCommonsProcessFlowNode3StateIconLeft";if(t){a="sapSuiteUiCommonsProcessFlowNode3StateIconRight"}this._iconControl.addStyleClass(a);break;case o.ProcessFlowZoomLevel.Three:case o.ProcessFlowZoomLevel.Four:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconCenter");break;default:break}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel4");break;default:break}this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIcon");return this._iconControl};n.prototype._getStateTextControl=function(){if(this._stateTextControl){this._stateTextControl.destroy()}var e=2;var t="";var a=true;var l=this.getState();var r=l===o.ProcessFlowNodeState.Planned?"":this.getStateText();if(l===o.ProcessFlowNodeState.PlannedNegative&&r.length===0){r="Planned Negative"}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:case o.ProcessFlowZoomLevel.Two:case o.ProcessFlowZoomLevel.Three:e=2;break;case o.ProcessFlowZoomLevel.Four:r="";e=0;t="0px";a=false;break;default:break}this._stateTextControl=new s({id:this.getId()+"-stateText",text:r,visible:a,wrapping:true,wrappingType:sap.m.WrappingType.Hyphenated,width:t,maxLines:e});switch(l){case o.ProcessFlowNodeState.Positive:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePositive");break;case o.ProcessFlowNodeState.Negative:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case o.ProcessFlowNodeState.Planned:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePlanned");break;case o.ProcessFlowNodeState.Neutral:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateNeutral");break;case o.ProcessFlowNodeState.PlannedNegative:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePlanned");break;case o.ProcessFlowNodeState.Critical:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateCritical");break;default:break}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel4");break;default:break}this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateText");return this._stateTextControl};n.prototype._getZoomLevel=function(){return this._zoomLevel};n.prototype._setZoomLevel=function(e){this._zoomLevel=e};n.prototype._setNavigationFocus=function(e){this._navigationFocus=e};n.prototype._getNavigationFocus=function(){return this._navigationFocus};n.prototype._setFoldedCorner=function(e){this._foldedCorner=e};n.prototype._getFoldedCorner=function(){return this._foldedCorner};n.prototype._setTag=function(e){this._tag=e};n.prototype._getTag=function(){return this._tag};n.prototype._setDimmedState=function(){var e=this.getFocused();var s=this.getHighlighted();var t=this.getSelected();if(s||t){throw new Error("Cannot set highlighed or selected node to dimmed state"+this.getNodeId())}this._displayState=o.ProcessFlowDisplayState.Dimmed;if(e){this._displayState=o.ProcessFlowDisplayState.DimmedFocused}};n.prototype._setRegularState=function(){this._displayState=o.ProcessFlowDisplayState.Regular};n.prototype._getLane=function(){var e=this.getParent();var s=null;if(e){s=e._getLane(this.getLaneId())}return s};n.prototype._getDimmed=function(){return this._displayState===o.ProcessFlowDisplayState.Dimmed||this._displayState===o.ProcessFlowDisplayState.DimmedFocused};n.prototype._getAriaText=function(){var e=this.getParents().length;var s=this._getCurrentZoomLevelContent();var t=0;if(this._hasChildren()){t=this.getChildren().length}var a="";var l=this._getLane();if(l){a=l.getText();if(!a){a=this._oResBundle.getText("PF_VALUE_UNDEFINED")}}var r="";var i=this.getTexts();if(i){for(var d in i){if(i[d]){var n=i[d].concat(", ");r=r.concat(n)}}r=r.slice(0,-1)}var C=this.getTitle();if(!C&&!s){C=this._oResBundle.getText("PF_VALUE_UNDEFINED")}var c=this.getState();if(!c){c=this._oResBundle.getText("PF_VALUE_UNDEFINED")}var m=this.getStateText();if(this.getState()===o.ProcessFlowNodeState.Planned){m=""}var p="";if(this.getType()===o.ProcessFlowNodeType.Aggregated){p=this._oResBundle.getText("PF_ARIA_TYPE")}return this._oResBundle.getText("PF_ARIA_NODE",[C,c,m,a,r,e,t,p])};n.prototype._getDisplayState=function(){var e=this.getFocused();var s=this.getHighlighted();var t=this.getSelected();if(this._displayState===o.ProcessFlowDisplayState.Dimmed||this._displayState===o.ProcessFlowDisplayState.DimmedFocused){return this._displayState}if(t){if(s){if(e){this._displayState=o.ProcessFlowDisplayState.SelectedHighlightedFocused}else{this._displayState=o.ProcessFlowDisplayState.SelectedHighlighted}}else if(e){this._displayState=o.ProcessFlowDisplayState.SelectedFocused}else{this._displayState=o.ProcessFlowDisplayState.Selected}}else if(e&&s){this._displayState=o.ProcessFlowDisplayState.HighlightedFocused}else if(e){this._displayState=o.ProcessFlowDisplayState.RegularFocused}else if(s){this._displayState=o.ProcessFlowDisplayState.Highlighted}else if(this._displayState===o.ProcessFlowDisplayState.HighlightedFocused||this._displayState===o.ProcessFlowDisplayState.RegularFocused||this._displayState===o.ProcessFlowDisplayState.Highlighted||this._displayState===o.ProcessFlowDisplayState.Selected){this._setRegularState()}return this._displayState};n.prototype._createTextControlInternal=function(e,t,a){if(a){a.destroy()}var l=2;var r="";var i=true;var d=t;switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:case o.ProcessFlowZoomLevel.Two:l=2;break;case o.ProcessFlowZoomLevel.Three:l=0;r="0px";i=false;break;case o.ProcessFlowZoomLevel.Four:d="";l=0;r="0px";i=false;break;default:break}if(this.getState){a=new s({id:this.getId()+e,text:d,visible:i,wrapping:true,wrappingType:sap.m.WrappingType.Hyphenated,width:r,maxLines:l})}return a};n.prototype._createText1Control=function(){var e=this.getTexts();if(e&&e.length>0){e=e[0]}this._text1Control=this._createTextControlInternal("-text1-control",e,this._text1Control);switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel1");this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel2");this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:break}this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Text");return this._text1Control};n.prototype._createText2Control=function(){var e=this.getTexts();if(e&&e.length>1){e=e[1]}else{e=""}this._text2Control=this._createTextControlInternal("-text2-control",e,this._text2Control);switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:break}this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Text");return this._text2Control};n.prototype._adjustClassesForAggregation=function(e){var s=[o.ProcessFlowDisplayState.RegularFocused,o.ProcessFlowDisplayState.HighlightedFocused,o.ProcessFlowDisplayState.DimmedFocused];var t=[o.ProcessFlowDisplayState.DimmedFocused,o.ProcessFlowDisplayState.Dimmed];var a=sap.ui.require("sap/suite/ui/commons/ProcessFlow");if(!a){return}switch(e.type){case a._mouseEvents.mouseDown:case a._mouseEvents.touchStart:case a._mouseEvents.sapTouchStart:l(this);break;case a._mouseEvents.mouseUp:r(this);break;case a._mouseEvents.sapTouchCancel:case a._mouseEvents.touchEnd:r(this);d(this);break;case a._mouseEvents.mouseEnter:i(this);break;case a._mouseEvents.mouseLeave:r(this);d(this);break;default:break}function l(e){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){if(t&&Array.prototype.indexOf.call(t,e._getDisplayState())>=0){e.$().removeClass(e._nodeAggregatedDimmedHoveredClassZoomLevel4).addClass(e._nodeAggregatedDimmedPressedClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedClassZoomLevel4).removeClass(e._nodeAggregatedHoveredClassZoomLevel4).addClass(e._nodeAggregatedPressedClassZoomLevel4)}}else if(t&&Array.prototype.indexOf.call(t,e._getDisplayState())>=0){e.$().removeClass(e._nodeAggregatedDimmedHoveredClass).addClass(e._nodeAggregatedDimmedPressedClass)}else{e.$().removeClass(e._nodeAggregatedClass).removeClass(e._nodeAggregatedHoveredClass).addClass(e._nodeAggregatedPressedClass)}}function r(e){if(s&&Array.prototype.indexOf.call(s,e._getDisplayState())>=0&&(e.$().hasClass(e._nodeAggregatedPressedClass)||e.$().hasClass(e._nodeAggregatedPressedClassZoomLevel4))){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedPressedClassZoomLevel4).addClass(e._nodeAggregatedFocusedClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedPressedClass).addClass(e._nodeAggregatedFocusedClass)}}else if(e.$().hasClass(e._nodeAggregatedDimmedPressedClass)||e.$().hasClass(e._nodeAggregatedDimmedPressedClassZoomLevel4)){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedDimmedPressedClassZoomLevel4).addClass(e._nodeAggregatedDimmedHoveredClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedDimmedPressedClass).addClass(e._nodeAggregatedDimmedHoveredClass)}}else if(e.$().hasClass(e._nodeAggregatedPressedClass)||e.$().hasClass(e._nodeAggregatedPressedClassZoomLevel4)){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedPressedClassZoomLevel4).addClass(e._nodeAggregatedClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedPressedClass).addClass(e._nodeAggregatedClass)}}}function i(e){if(t&&Array.prototype.indexOf.call(t,e._getDisplayState())>=0){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedDimmedClassZoomLevel4).addClass(e._nodeAggregatedDimmedHoveredClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedDimmedClass).addClass(e._nodeAggregatedDimmedHoveredClass)}}else if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().addClass(e._nodeAggregatedHoveredClassZoomLevel4)}else{e.$().addClass(e._nodeAggregatedHoveredClass)}}function d(e){if(t&&Array.prototype.indexOf.call(t,e._getDisplayState())>=0){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedDimmedHoveredClassZoomLevel4).addClass(e._nodeAggregatedDimmedClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedDimmedHoveredClass).addClass(e._nodeAggregatedDimmedClass)}}else if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedHoveredClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedHoveredClass)}}};n.prototype._hasChildren=function(){var e=this.getChildren();return e&&e.length>0};n.prototype._hasChildrenWithNodeId=function(e){var s=this.getChildren();if(s&&s.length>0){for(var o=0;o<s.length;o++){if(typeof s[o]==="object"&&s[o].nodeId===e||s[o]===e){return true}}}return false};n.prototype.getLaneId=function(){if(this._mergedLaneId){return this._mergedLaneId}else{return this.getProperty("laneId")}};n.prototype._getCurrentZoomLevelContent=function(){var e=this.getParent();if(!e||e.getMetadata().getName()!=="sap.suite.ui.commons.ProcessFlow"){return null}return this["getZoomLevel"+e.getZoomLevel()+"Content"]()};return n});
/*
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ProcessFlowNodeRenderer",["./library","sap/ui/Device","sap/base/security/encodeXML"],function(e,o,s){"use strict";var a={apiVersion:2};a._constants={top:"top",right:"right",bottom:"bottom",left:"left",corner:"corner"};a._nodeLevels={iLevel0:0,iLevel1:1,iLevel2:2,iLevel3:3};a.render=function(o,s){var t=null;var l=s._getCurrentZoomLevelContent();if(s._getFoldedCorner()){t=s._getFoldedCornerControl()}var i=s._getHeaderControl();var r=s._getIconControl();var c=s._getStateTextControl();var d=s._createText1Control();var n=s._createText2Control();o.openStart("div",s);if(l){o.class("sapSuiteUiCommonsProcessFlowNodeCustom")}a._assignNodeClasses(o,s,0);o.openEnd();switch(s._getDisplayState()){case e.ProcessFlowDisplayState.Highlighted:case e.ProcessFlowDisplayState.HighlightedFocused:case e.ProcessFlowDisplayState.SelectedHighlighted:case e.ProcessFlowDisplayState.SelectedHighlightedFocused:o.openStart("div");a._assignShadowClasses(o,s,"top");o.openEnd().close("div");o.openStart("div");a._assignShadowClasses(o,s,"right");o.openEnd().close("div");o.openStart("div");a._assignShadowClasses(o,s,"bottom");o.openEnd().close("div");o.openStart("div");a._assignShadowClasses(o,s,"left");o.openEnd().close("div");if(s._getFoldedCorner()){o.openStart("div");a._assignShadowClasses(o,s,"corner");o.openEnd().close("div")}break;default:}o.openStart("div");a._assignNodeClasses(o,s,1);o.openEnd();if(s._getFoldedCorner()){o.renderControl(t)}o.close("div");o.openStart("div");a._assignNodeClasses(o,s,2);o.openEnd();o.close("div");o.openStart("div");a._assignNodeClasses(o,s,3);o.openEnd();if(l){o.openStart("div");o.class("sapSuiteUiCommonsProcessFlowNode3ContentPadding");o.openEnd();o.renderControl(l);o.close("div")}else{o.openStart("div");a._assignNodeTitleClasses(o,s);o.openEnd();o.renderControl(i);o.close("div");o.openStart("div");a._assignNodeStateClasses(o,s);o.openEnd();o.openStart("div");a._assignNodeIconClasses(o,s);o.openEnd();o.renderControl(r);o.close("div");o.openStart("div");a._assignNodeStateTextClasses(o,s);o.openEnd();o.renderControl(c);o.close("div");o.close("div");o.openStart("div");a._assignNodeText1Classes(o,s);o.openEnd();o.renderControl(d);o.close("div");o.openStart("div");a._assignNodeText2Classes(o,s);o.openEnd();o.renderControl(n);o.close("div")}o.close("div");o.close("div")};a._assignNodeClasses=function(o,t,l){switch(l){case a._nodeLevels.iLevel0:break;case a._nodeLevels.iLevel1:o.attr("id",t.getId()+"-corner-container");break;case a._nodeLevels.iLevel2:o.attr("id",t.getId()+"-top-container");break;case a._nodeLevels.iLevel3:o.attr("id",t.getId()+"-content-container");break;default:}if(l>a._nodeLevels.iLevel0){switch(t.getState()){case e.ProcessFlowNodeState.Planned:if(l===a._nodeLevels.iLevel1&&t._getFoldedCorner()){o.class("sapSuiteUiCommonsProcessFlowFoldedCornerPlanned")}else{o.class("sapSuiteUiCommonsProcessFlowNodeStatePlanned");o.class("sapSuiteUiCommonsProcessFlowNodeStatePlannedDashedBorder")}break;case e.ProcessFlowNodeState.PlannedNegative:if(l===a._nodeLevels.iLevel1&&t._getFoldedCorner()){o.class("sapSuiteUiCommonsProcessFlowFoldedCornerPlanned")}else{o.class("sapSuiteUiCommonsProcessFlowNodeStatePlanned");o.class("sapSuiteUiCommonsProcessFlowNodeStatePlannedDashedBorder")}break;default:}if(t._getNavigationFocus()){o.class("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateNavigation")}switch(t._getDisplayState()){case e.ProcessFlowDisplayState.RegularFocused:case e.ProcessFlowDisplayState.HighlightedFocused:case e.ProcessFlowDisplayState.DimmedFocused:case e.ProcessFlowDisplayState.SelectedHighlightedFocused:case e.ProcessFlowDisplayState.SelectedFocused:if(l===a._nodeLevels.iLevel1&&t._getFoldedCorner()){o.class("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateFocused")}else{o.class("sapSuiteUiCommonsProcessFlowNodeDisplayStateFocused")}break;default:}switch(t._getDisplayState()){case e.ProcessFlowDisplayState.Regular:case e.ProcessFlowDisplayState.RegularFocused:case e.ProcessFlowDisplayState.Selected:if(l===a._nodeLevels.iLevel1&&t._getFoldedCorner()){o.class("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateRegular")}else{o.class("sapSuiteUiCommonsProcessFlowNodeDisplayStateRegular")}break;case e.ProcessFlowDisplayState.Highlighted:case e.ProcessFlowDisplayState.HighlightedFocused:case e.ProcessFlowDisplayState.SelectedHighlighted:case e.ProcessFlowDisplayState.SelectedHighlightedFocused:if(l===a._nodeLevels.iLevel1&&t._getFoldedCorner()){o.class("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateHighlighted")}else{o.class("sapSuiteUiCommonsProcessFlowNodeDisplayStateHighlighted")}break;case e.ProcessFlowDisplayState.Dimmed:case e.ProcessFlowDisplayState.DimmedFocused:if(l===a._nodeLevels.iLevel1&&t._getFoldedCorner()){o.class("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateDimmed")}else{o.class("sapSuiteUiCommonsProcessFlowNodeDisplayStateDimmed")}break;default:}}if(l===a._nodeLevels.iLevel0){if(t._getNavigationFocus()){o.class("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateNavigation")}if(t._getDisplayState()===e.ProcessFlowDisplayState.Highlighted){o.class("sapSuiteUiCommonsProcessFlowNodeDisplayStateHighlighted")}if(t.getType()===e.ProcessFlowNodeType.Aggregated){a._assignAggregatedNodeClasses(o,t)}}switch(t._getZoomLevel()){case e.ProcessFlowZoomLevel.One:o.class(s("sapSuiteUiCommonsProcessFlowNode"+l+"ZoomLevel1"));break;case e.ProcessFlowZoomLevel.Two:o.class(s("sapSuiteUiCommonsProcessFlowNode"+l+"ZoomLevel2"));break;case e.ProcessFlowZoomLevel.Three:o.class(s("sapSuiteUiCommonsProcessFlowNode"+l+"ZoomLevel3"));break;case e.ProcessFlowZoomLevel.Four:o.class(s("sapSuiteUiCommonsProcessFlowNode"+l+"ZoomLevel4"));break;default:}if(l===a._nodeLevels.iLevel1){if(t._getFoldedCorner()){o.class("sapSuiteUiCommonsProcessFlowNode1FoldedBorderStyle")}else{o.class("sapSuiteUiCommonsProcessFlowNode1BorderStyle");o.class("sapSuiteUiCommonsProcessFlowNodeBorderStandard")}}else if(l>a._nodeLevels.iLevel1){o.class(s("sapSuiteUiCommonsProcessFlowNode"+l+"BorderStyle"));o.class("sapSuiteUiCommonsProcessFlowNodeBorderStandard")}if(l===a._nodeLevels.iLevel1&&t._getFoldedCorner()){o.class("sapSuiteUiCommonsProcessFlowFoldedCornerNode1")}else{o.class(s("sapSuiteUiCommonsProcessFlowNode"+l))}if(l===a._nodeLevels.iLevel0&&t._getFoldedCorner()){o.class("sapSuiteUiCommonsProcessFlowFoldedCornerIndication")}};a._assignAggregatedNodeClasses=function(o,s){switch(s._getDisplayState()){case e.ProcessFlowDisplayState.Highlighted:case e.ProcessFlowDisplayState.Regular:case e.ProcessFlowDisplayState.Selected:if(s._getZoomLevel()===e.ProcessFlowZoomLevel.Four){o.class("sapSuiteUiCommonsProcessFlowNodeAggregatedZoomLevel4")}else{o.class("sapSuiteUiCommonsProcessFlowNodeAggregated")}break;case e.ProcessFlowDisplayState.Dimmed:if(s._getZoomLevel()===e.ProcessFlowZoomLevel.Four){o.class("sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedZoomLevel4")}else{o.class("sapSuiteUiCommonsProcessFlowNodeAggregatedDimmed")}break;default:if(s._getZoomLevel()===e.ProcessFlowZoomLevel.Four){o.class("sapSuiteUiCommonsProcessFlowNodeAggregatedFocusedZoomLevel4")}else{o.class("sapSuiteUiCommonsProcessFlowNodeAggregatedFocused")}break}};a._assignShadowClasses=function(e,s,t){e.class("sapSuiteUiCommonsShadowedDivCommon");switch(t){case a._constants.top:if(s._getFoldedCorner()){e.class("sapSuiteUiCommonsShadowedDivFoldedCornerBorderTop")}else{e.class("sapSuiteUiCommonsShadowedDivBorderTop")}break;case a._constants.right:e.class("sapSuiteUiCommonsShadowedDivBorderRight");break;case a._constants.bottom:e.class("sapSuiteUiCommonsShadowedDivBorderBottom");break;case a._constants.left:if(s._getFoldedCorner()){e.class("sapSuiteUiCommonsShadowedDivFoldedCornerBorderLeft")}else{e.class("sapSuiteUiCommonsShadowedDivBorderLeft")}break;case a._constants.corner:if(o.browser.safari){e.class("sapSuiteUiCommonsShadowedDivFoldedCornerSafari")}else{e.class("sapSuiteUiCommonsShadowedDivFoldedCorner")}break;default:}};a._assignNodeTitleClasses=function(o,s){o.attr("id",s.getId()+"-title");switch(s._getZoomLevel()){case e.ProcessFlowZoomLevel.One:o.class("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel1");break;case e.ProcessFlowZoomLevel.Two:o.class("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel2");break;case e.ProcessFlowZoomLevel.Three:o.class("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel3");break;case e.ProcessFlowZoomLevel.Four:o.class("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel4");break;default:}o.class("sapSuiteUiCommonsProcessFlowNode3Title")};a._assignNodeStateClasses=function(o,s){o.attr("id",s.getId()+"-state");switch(s._getZoomLevel()){case e.ProcessFlowZoomLevel.One:o.class("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel1");break;case e.ProcessFlowZoomLevel.Two:o.class("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel2");break;case e.ProcessFlowZoomLevel.Three:o.class("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel3");break;case e.ProcessFlowZoomLevel.Four:o.class("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel4");break;default:}o.class("sapSuiteUiCommonsProcessFlowNode3State")};a._assignNodeIconClasses=function(o,s){o.attr("id",s.getId()+"-icon-container");switch(s.getState()){case e.ProcessFlowNodeState.Positive:o.class("sapSuiteUiCommonsProcessFlowNodeStatePositive");break;case e.ProcessFlowNodeState.Negative:o.class("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case e.ProcessFlowNodeState.Planned:o.class("sapSuiteUiCommonsProcessFlowNodeStatePlanned");break;case e.ProcessFlowNodeState.Neutral:o.class("sapSuiteUiCommonsProcessFlowNodeStateNeutral");break;case e.ProcessFlowNodeState.PlannedNegative:o.class("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case e.ProcessFlowNodeState.Critical:o.class("sapSuiteUiCommonsProcessFlowNodeStateCritical");break;default:}switch(s._getZoomLevel()){case e.ProcessFlowZoomLevel.One:o.class("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel1");break;case e.ProcessFlowZoomLevel.Two:o.class("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel2");break;case e.ProcessFlowZoomLevel.Three:o.class("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel3");break;case e.ProcessFlowZoomLevel.Four:o.class("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel4");break;default:}o.class("sapSuiteUiCommonsProcessFlowNode3StateIcon")};a._assignNodeStateTextClasses=function(o,s){o.attr("id",s.getId()+"-state-text");switch(s.getState()){case e.ProcessFlowNodeState.Positive:o.class("sapSuiteUiCommonsProcessFlowNodeStatePositive");break;case e.ProcessFlowNodeState.Negative:o.class("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case e.ProcessFlowNodeState.Planned:o.class("sapSuiteUiCommonsProcessFlowNodeStatePlanned");break;case e.ProcessFlowNodeState.Neutral:o.class("sapSuiteUiCommonsProcessFlowNodeStateNeutral");break;case e.ProcessFlowNodeState.PlannedNegative:o.class("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case e.ProcessFlowNodeState.Critical:o.class("sapSuiteUiCommonsProcessFlowNodeStateCritical");break;default:}switch(s._getZoomLevel()){case e.ProcessFlowZoomLevel.One:o.class("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel1");break;case e.ProcessFlowZoomLevel.Two:o.class("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel2");break;case e.ProcessFlowZoomLevel.Three:o.class("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel3");break;case e.ProcessFlowZoomLevel.Four:o.class("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel4");break;default:}o.class("sapSuiteUiCommonsProcessFlowNode3StateText")};a._assignNodeText1Classes=function(o,s){o.attr("id",s.getId()+"-text1");switch(s._getZoomLevel()){case e.ProcessFlowZoomLevel.One:o.class("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel1");o.class("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case e.ProcessFlowZoomLevel.Two:o.class("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel2");o.class("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case e.ProcessFlowZoomLevel.Three:o.class("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case e.ProcessFlowZoomLevel.Four:o.class("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:}o.class("sapSuiteUiCommonsProcessFlowNode3Text")};a._assignNodeText2Classes=function(o,s){o.attr("id",s.getId()+"-text2");switch(s._getZoomLevel()){case e.ProcessFlowZoomLevel.One:o.class("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case e.ProcessFlowZoomLevel.Two:o.class("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case e.ProcessFlowZoomLevel.Three:o.class("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case e.ProcessFlowZoomLevel.Four:o.class("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:}o.class("sapSuiteUiCommonsProcessFlowNode3Text")};return a},true);
/*
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ProcessFlowRenderer",["sap/ui/thirdparty/jquery","./library","./ProcessFlowLaneHeader","./AriaProperties","sap/ui/Device","sap/base/security/encodeXML"],function(e,t,o,r,a,n){"use strict";var l=t.ProcessFlowZoomLevel;var s={apiVersion:2};s.render=function(e,t){var o=this._getZoomStyleClass(t),r,a,l,d=s,i,c;c=d._renderBasicStructure(e,t);if(c){return}try{r=t._getOrCreateProcessFlow();a=t._getOrCreateLaneMap();i=t._getConnectionsMap()}catch(e){t._handleException(e);return}e.openStart("table");e.attr("id",t.getId()+"-table");e.attr("aria-label",t._getAriaText());e.class("sapSuiteUiCommonsPF");e.class(n(o));e.openEnd();l=Object.keys(a).length;d._renderTableHeader(e,t,a,l);d._renderTableBody(e,t,l,r,i);e.close("table");e.close("div");e.close("div");this._writeCounter(e,t,"Right");e.renderControl(t._getScrollingArrow("right"));e.close("div")};s._renderNormalNodeHeader=function(t,r,a,n,l){t.openStart("th").attr("scope","colgroup").attr("colspan","3").openEnd();t.renderControl(a);t.close("th");if(n<l-1){t.openStart("th").attr("scope","colgroup").attr("colspan","2").openEnd();var s=o.createNewProcessSymbol(r._isHeaderMode());s.attachPress(e.proxy(r.ontouchend,r));t.renderControl(s);t.close("th")}};s._renderMergedNodeHeader=function(t,r,a,n,l,s){var d=r._mergeLaneIdNodeStates(l);a.setState(d);n++;var i=n*3+(n-1)*2;t.openStart("th").attr("scope","colgroup").attr("colspan",i).openEnd();t.renderControl(a);t.close("th");if(s){t.openStart("th").attr("scope","colgroup").attr("colspan","2").openEnd();var c=o.createNewProcessSymbol(r._isHeaderMode());c.attachPress(e.proxy(r.ontouchend,r));t.renderControl(c);t.close("th")}};s._renderNode=function(e,t,o,a){if(a){var n=o.getId()+"-node";var l=o._getCurrentZoomLevelContent();e.attr("id",n);e.attr("tabindex",0);var s={};s.label=o._getAriaText();if(l){s.labelledBy=n+" "+l.getId()}r.writeAriaProperties(e,s,o.getAriaProperties());e.openEnd();a=false}o._setParentFlow(t);o._setZoomLevel(t.getZoomLevel());o._setFoldedCorner(t.getFoldedCorners());e.renderControl(o);return a};s._renderConnection=function(e,t,o,r){if(r){if(o.getAggregation("_labels")&&o.getAggregation("_labels").length>0){e.attr("tabindex",0)}e.openEnd();r=false}o.setZoomLevel(t.getZoomLevel());t.addAggregation("_connections",o);e.renderControl(o);return r};s._renderTableHeader=function(e,t,r,a){var n,l=null,s=null,d,i;e.openStart("thead");e.attr("id",t.getId()+"-thead");e.openEnd();e.openStart("tr");e.class("sapSuiteUiCommonsPFHeader");e.class("sapSuiteUiCommonsPFHeaderHidden");if(t.getShowLabels()){e.class("sapSuiteUiPFWithLabel")}e.openEnd();e.openStart("th").openEnd().close("th");n=0;while(n<a-1){e.openStart("th").openEnd().close("th");e.openStart("th").openEnd().close("th");e.openStart("th").openEnd().close("th");e.openStart("th").openEnd().close("th");e.openStart("th").openEnd().close("th");n++}e.openStart("th").openEnd().close("th");e.openStart("th").openEnd().close("th");e.openStart("th").openEnd().close("th");e.openStart("th").openEnd().close("th");e.close("tr");e.openStart("tr");e.class("sapSuiteUiCommonsPFHeaderRow");e.openEnd();e.openStart("th").attr("scope","col").openEnd();d=o.createNewStartSymbol(t._isHeaderMode());e.renderControl(d);e.close("th");n=0;var c=0;var p=[];var g="1";i=false;while(n<a-1){l=r[n];s=r[n+1];if(l.getLaneId()+g===s.getLaneId()){c=c+1;p.push(l.getState())}else if(c===0){this._renderNormalNodeHeader(e,t,l,n,a)}else{p.push(l.getState());i=true;this._renderMergedNodeHeader(e,t,l,c,p,i);p=[];c=0}n++}if(c===0){if(!s){s=r[0]}this._renderNormalNodeHeader(e,t,s,n,a)}else{p.push(s.getState());i=false;this._renderMergedNodeHeader(e,t,l,c,p,i);c=0}e.openStart("th").attr("scope","col").openEnd();d=o.createNewEndSymbol(t._isHeaderMode());e.renderControl(d);e.close("th");e.close("tr");e.close("thead")};s._renderTableBody=function(e,t,o,r,n){var l,d,i,c,p;var g=s._checkIfHighlightedOrSelectedNodesExists(n);e.openStart("tbody").openEnd();i=r.length;if(i>0){e.openStart("tr").openEnd();e.openStart("td");e.attr("colspan",(o*5).toString());e.openEnd();e.close("td");e.close("tr")}l=0;while(l<i){e.openStart("tr").openEnd();e.openStart("td").openEnd().close("td");c=r[l].length;d=0;while(d<c-1){p=r[l][d];var u=true;if(d==0||d%2){e.openStart("td")}else{e.openStart("td").attr("colspan","4");if(a.browser.chrome){e.class("sapSuiteUiCommonsProcessFlowZIndexForConnectors")}}if(p){if(p.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){u=s._renderNode(e,t,p,u)}else{p._setShowLabels(t.getShowLabels());s._setLabelsInConnection(r,n,p,{row:l,column:d},t,g);u=s._renderConnection(e,t,p,u)}}if(u){e.openEnd()}e.close("td");d++}e.openStart("td").openEnd().close("td");e.openStart("td").openEnd().close("td");e.close("tr");l++}e.close("tbody")};s._renderBasicStructure=function(e,t){e.openStart("div",t);var o={};o.label=t._getAriaText();r.writeAriaProperties(e,o,t.getAriaProperties());e.class("sapSuiteUiPFContainer");if(t._arrowScrollable){e.class("sapPFHScrollable");if(t._bPreviousScrollForward){e.class("sapPFHScrollForward")}else{e.class("sapPFHNoScrollForward")}if(t._bPreviousScrollBack){e.class("sapPFHScrollBack")}else{e.class("sapPFHNoScrollBack")}}else{e.class("sapPFHNotScrollable")}e.openEnd();this._writeCounter(e,t,"Left");e.renderControl(t._getScrollingArrow("left"));e.openStart("div");e.attr("id",t.getId()+"-scrollContainer");e.class("sapSuiteUiScrollContainerPF");e.class("sapSuiteUiDefaultCursorPF");e.openEnd();e.openStart("div");e.attr("id",t.getId()+"-scroll-content");e.attr("tabindex",0);e.openEnd();if(!t.getLanes()||t.getLanes().length==0){e.close("div");e.close("div");e.close("div");return true}return false};s._getZoomStyleClass=function(e){switch(e.getZoomLevel()){case l.One:return"sapSuiteUiCommonsPFZoomLevel1";case l.Two:return"sapSuiteUiCommonsPFZoomLevel2";case l.Three:return"sapSuiteUiCommonsPFZoomLevel3";case l.Four:return"sapSuiteUiCommonsPFZoomLevel4";default:break}};s._setLabelsInConnection=function(e,t,o,r,a,n){for(var l=0;l<t.length;l++){var d=t[l];if(d&&d.label){for(var i=0;i<d.connectionParts.length;i++){var c=d.connectionParts[i];if(c.x===r.column&&c.y===r.row){if(e[r.row][r.column+1]&&e[r.row][r.column+1].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&e[r.row][r.column+1].getNodeId()===d.targetNode.getNodeId()){s._setLineTypeInLabel(d,n);if(a._bHighlightedMode&&!d.label._getHighlighted()){d.label.setEnabled(false)}if(d.label.getEnabled()){if(d.label.hasListeners("press")){d.label.detachEvent("press",a._handleLabelClick,a)}d.label.attachPress(a._handleLabelClick,a)}o.addAggregation("_labels",d.label,true)}}}}}};s._setLineTypeInLabel=function(e,t){var o=false,r,a=false,n=false;if(e.sourceNode.getSelected()&&e.targetNode.getSelected()){o=true;e.label._setSelected(true)}else{e.label._setSelected(false)}r=e.targetNode;if(r.getHighlighted()){var l=r.getParents(),s;for(var d=0;d<l.length;d++){s=sap.ui.getCore().byId(l[d]);if(s.getHighlighted()){a=true;break}}}if(a){n=true;e.label._setHighlighted(true)}else{e.label._setHighlighted(false)}if(t&&!o&&!n){e.label._setDimmed(true)}else{e.label._setDimmed(false)}};s._checkIfHighlightedOrSelectedNodesExists=function(e){var t=false;for(var o=0;o<e.length;o++){var r=e[o];if(r.label){if(r.sourceNode.getSelected()&&r.targetNode.getSelected()||r.sourceNode.getHighlighted()&&r.targetNode.getHighlighted()){t=true}}}return t};s._writeCounter=function(e,t,o){e.openStart("span");e.attr("id",t.getId()+"-counter"+o);e.class("suiteUiPFHCounter");e.class(n("suiteUiPFHCounter"+o));e.openEnd();e.text("0");e.close("span")};return s},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ThreePanelThingViewer",["sap/ui/thirdparty/jquery","./library","sap/ui/ux3/library","sap/ui/commons/library","./VerticalNavigationBar","sap/ui/ux3/ThingViewer","sap/ui/commons/Button","sap/suite/ui/commons/ThreePanelThingViewerRenderer","sap/ui/events/ControlEvents","sap/ui/dom/containsOrEquals"],function(e,t,n,i,o,r,s,u,a,p){"use strict";var d=r.extend("sap.suite.ui.commons.ThreePanelThingViewer",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{logo:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:null},sidebarWidth:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"244px"}},aggregations:{menuContent:{type:"sap.ui.commons.Link",multiple:true,singularName:"menuContent"}}}});d.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oNavBar=new o;this.setAggregation("navBar",this._oNavBar);this._oNavBar.attachSelect(function(e){var t=e.getParameters().item;if(this.fireFacetSelected({id:t.getId(),key:t.getKey(),item:t})){this.setSelectedFacet(t)}else{e.preventDefault()}},this);this._iSelectedMenuItem=0;this._oMenuButton=new s({id:this.getId()+"-menu-button",tooltip:this._rb.getText("THREEPANELTHINGVIEWER_BUTTON_MENU_TOOLTIP"),lite:true,press:[this._toggleMenuPopup,this]});this._oMenuButton.addStyleClass("sapSuiteTvTitleMb");this.fAnyEventHandlerProxy=e.proxy(this.onAnyEvent,this)};d.prototype.exit=function(){this._oMenuButton.destroy();a.unbindAnyEvent(this.fAnyEventHandlerProxy)};d.prototype.onAfterRendering=function(){this._bMenuOpened=false;this._updateMenuPopup();this._toggleHeaderContent()};d.prototype.selectDefaultFacet=function(){this._selectDefault();return this};d.prototype._toggleMenuPopup=function(){e(document.getElementById(this.getId()+"-menu-popup")).toggle();this._bMenuOpened=!this._bMenuOpened;if(this._bMenuOpened){a.bindAnyEvent(this.fAnyEventHandlerProxy);this.getMenuContent()[0].focus();this._iSelectedMenuItem=0}else{a.unbindAnyEvent(this.fAnyEventHandlerProxy)}};d.prototype._updateMenuPopup=function(){var t=e(document.getElementById(this.getId()+"-header")).width();var n=e(document.getElementById(this.getId()+"-menu-popup"));var i=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";var o=this.getMenuContent().length;n.css(i,t-22+"px");n.children().each(function(t){var n=e(this);n.attr("tabindex","-1");n.attr("role","menuitem");n.attr("aria-posinset",t+1);n.attr("aria-setsize",o)})};d.prototype._rerenderFacetContent=function(){var t=e(document.getElementById(this.getId()+"-facetContent"));if(t.length>0){var n=sap.ui.getCore().createRenderManager();u.renderFacetContent(n,this);n.flush(t[0]);n.destroy();this._resize=false;this._setTriggerValue();this._onresize()}};d.prototype._rerenderHeader=function(){var t=e(document.getElementById(this.getId()+"-header"));if(t.length>0){var n=sap.ui.getCore().createRenderManager();u.renderHeader(n,this);n.flush(t[0]);n.destroy()}};d.prototype._rerenderHeaderContent=function(){var t=e(document.getElementById(this.getId()+"-headerContent"));if(t.length>0){var n=sap.ui.getCore().createRenderManager();u.renderHeaderContent(n,this);n.flush(t[0]);n.destroy()}};d.prototype._toggleHeaderContent=function(){var t=e(document.getElementById(this.getId()+"-headerContent"));if(this.getShowHeader()){t.show()}else{t.hide()}};d.prototype.onAnyEvent=function(e){if(this._bMenuOpened&&(e.type==="mousedown"||e.type==="focusin")){var t=e.target;var n=this.getId()+"-menu-popup"?window.document.getElementById(this.getId()+"-menu-popup"):null;if(!p(n,t)||t.tagName==="BODY"){this._toggleMenuPopup()}}};d.prototype.onsapescape=function(){if(this._bMenuOpened){this._toggleMenuPopup();this._oMenuButton.focus()}};d.prototype.onsapnext=function(e){if(this._bMenuOpened){var t=this.getMenuContent();this._iSelectedMenuItem++;if(this._iSelectedMenuItem>=t.length){this._iSelectedMenuItem=0}t[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation()}};d.prototype.onsapprevious=function(e){if(this._bMenuOpened){var t=this.getMenuContent();this._iSelectedMenuItem--;if(this._iSelectedMenuItem<0){this._iSelectedMenuItem=t.length-1}t[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation()}};d.prototype.setShowHeader=function(e){this.setProperty("showHeader",e,true);this._toggleHeaderContent();return this};return d});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/ThreePanelThingViewerRenderer",["sap/ui/core/Renderer","sap/ui/ux3/ThingViewerRenderer"],function(e,t){"use strict";var i=e.extend(t);i.renderContent=function(e,t){e.write("<div");e.addClass("sapSuiteTvMinHeight");e.writeClasses();e.write(">");e.write("<header");e.writeAttribute("id",t.getId()+"-header");e.addClass("sapSuiteTvTitle");e.writeClasses();e.addStyle("width",t.getSidebarWidth());e.writeStyles();e.write(">");this.renderHeader(e,t);e.write("</header>");e.write("<nav");e.writeAttribute("id",t.getId()+"-navigation");e.addClass("sapSuiteTvNav");if(!t.getLogo()){e.addClass("sapSuiteTvNavNoLogo")}e.writeClasses();e.addStyle("width",t.getSidebarWidth());e.writeStyles();e.write(">");e.renderControl(t._getNavBar());e.write("</nav>");e.write("<aside");e.writeAttribute("id",t.getId()+"-headerContent");e.addClass("sapSuiteTvHeader");e.writeClasses();e.write(">");this.renderHeaderContent(e,t);e.write("</aside>");e.write("<div");e.writeAttribute("id",t.getId()+"-facetContent");e.addClass("sapSuiteTvFacet");e.writeClasses();e.write(">");this.renderFacetContent(e,t);e.write("</div>");if(t.getLogo()){e.write("<footer");e.writeAttribute("id",t.getId()+"-footer");e.addClass("sapSuiteTvLogo");e.writeClasses();e.addStyle("width",t.getSidebarWidth());e.writeStyles();e.write(">");e.write("<img");e.writeAttribute("id",t.getId()+"-logo");e.writeAttribute("role","presentation");e.writeAttributeEscaped("src",t.getLogo());e.addClass("sapSuiteTvLogoIcon");e.writeClasses();e.write("/>");e.write("</footer>")}e.write("</div>")};i.renderHeader=function(e,t){var i=t.getMenuContent().length;e.write("<div");e.addClass("sapSuiteTvTitleBar");e.writeClasses();e.write(">");if(t.getIcon()){e.write("<img");e.writeAttribute("id",t.getId()+"-swatch");e.writeAttribute("role","presentation");e.writeAttributeEscaped("src",t.getIcon());e.addClass("sapSuiteTvTitleIcon");e.writeClasses();e.write("/>")}if(i>0){e.renderControl(t._oMenuButton)}e.write("<div");e.writeAttribute("role","heading");e.writeAttribute("aria-level",1);e.writeAttributeEscaped("title",t.getType());e.addClass("sapSuiteTvTitleType");e.addClass("sapSuiteTvTextCrop");e.writeClasses();e.write(">");e.writeEscaped(t.getType());e.write("</div>");e.write("<div");e.writeAttribute("role","heading");e.writeAttribute("aria-level",2);e.writeAttributeEscaped("title",t.getTitle());e.addClass("sapSuiteTvTitleFirst");e.writeClasses();e.write(">");e.writeEscaped(t.getTitle());e.write("</div>");e.write("<div");e.writeAttribute("role","heading");e.writeAttribute("aria-level",3);e.writeAttributeEscaped("title",t.getSubtitle());e.addClass("sapSuiteTvTitleSecond");e.addClass("sapSuiteTvTextCrop");e.writeClasses();e.write(">");e.writeEscaped(t.getSubtitle());e.write("</div>");e.write("</div>");this.renderFlyOutMenu(e,t)};i.renderFacetContent=function(e,t){var i=t.getFacetContent();for(var r=0;r<i.length;r++){var a=i[r];e.write("<div");e.writeAttribute("role","form");if(a.getColspan()){e.addClass("sapUiUx3TVFacetThingGroupSpan")}else{e.addClass("sapUiUx3TVFacetThingGroup")}e.writeClasses();e.write(">");e.write("<div");e.writeAttributeEscaped("title",a.getTitle());e.addClass("sapUiUx3TVFacetThingGroupContentTitle");e.writeClasses();e.write(">");e.write("<span>");e.writeEscaped(a.getTitle());e.write("</span>");e.write("</div>");e.write("<div");e.addClass("sapUiUx3TVFacetThingGroupContent");e.writeClasses();e.write(">");var s=a.getContent();for(var d=0;d<s.length;d++){e.renderControl(s[d])}e.write("</div>");e.write("</div>")}};i.renderFlyOutMenu=function(e,t){e.write("<div");e.writeAttribute("id",t.getId()+"-menu-popup");e.writeAttribute("role","menu");e.addClass("sapSuiteTvPopupMenu");e.writeClasses();e.write(">");var i=t.getMenuContent();for(var r=0;r<i.length;r++){var a=i[r];a.addStyleClass("sapSuiteTvPopupMenuLink");e.renderControl(a)}e.write("</div>")};return i},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/Timeline",["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/core/ResizeHandler","sap/ui/core/format/DateFormat","sap/ui/model/ClientListBinding","sap/ui/model/FilterType","sap/suite/ui/commons/TimelineNavigator","sap/suite/ui/commons/util/DateUtils","sap/suite/ui/commons/util/ManagedObjectRegister","sap/ui/model/json/JSONModel","sap/ui/model/Sorter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/base/ManagedObject","sap/suite/ui/commons/TimelineItem","sap/suite/ui/commons/TimelineRenderManager","sap/ui/core/delegate/ScrollEnablement","sap/ui/base/Object","sap/base/assert","sap/base/Log","./TimelineRenderer"],function(t,e,i,r,s,o,n,a,l,u,h,p,g,c,f,d,_,m,y,D,F,I){"use strict";var S=e.TimelineScrollingFadeout,b=e.TimelineAlignment,T=e.TimelineGroupType,M=e.TimelineFilterType,v=e.TimelineAxisOrientation;var C=i.extend("sap.suite.ui.commons.Timeline",{metadata:{library:"sap.suite.ui.commons",properties:{alignment:{type:"sap.suite.ui.commons.TimelineAlignment",group:"Misc",defaultValue:"Right"},axisOrientation:{type:"sap.suite.ui.commons.TimelineAxisOrientation",group:"Misc",defaultValue:"Vertical"},data:{type:"object",group:"Misc",defaultValue:null,deprecated:true},enableAllInFilterItem:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},enableBackendFilter:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},enableBusyIndicator:{type:"boolean",group:"Misc",defaultValue:true},enableDoubleSided:{type:"boolean",group:"Misc",defaultValue:false},enableModelFilter:{type:"boolean",group:"Misc",defaultValue:true},enableScroll:{type:"boolean",group:"Misc",defaultValue:true},enableSocial:{type:"boolean",group:"Misc",defaultValue:false},filterTitle:{type:"string",group:"Misc",defaultValue:null},forceGrowing:{type:"boolean",group:"Misc",defaultValue:false},group:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},groupBy:{type:"string",group:"Misc",defaultValue:null},groupByType:{type:"sap.suite.ui.commons.TimelineGroupType",group:"Misc",defaultValue:"None"},growing:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},growingThreshold:{type:"int",group:"Misc",defaultValue:5},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:""},lazyLoading:{type:"boolean",group:"Dimension",defaultValue:false},noDataText:{type:"string",group:"Misc",defaultValue:null},scrollingFadeout:{type:"sap.suite.ui.commons.TimelineScrollingFadeout",group:"Misc",defaultValue:"None"},showFilterBar:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},showHeaderBar:{type:"boolean",group:"Misc",defaultValue:true},showIcons:{type:"boolean",group:"Misc",defaultValue:true},showItemFilter:{type:"boolean",group:"Misc",defaultValue:true},showSearch:{type:"boolean",group:"Misc",defaultValue:true},showSort:{type:"boolean",group:"Misc",defaultValue:true},showSuggestion:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},showTimeFilter:{type:"boolean",group:"Misc",defaultValue:true},sort:{type:"boolean",group:"Misc",defaultValue:true},dateTimePath:{type:"string",group:"Misc",defaultValue:""},sortOldestFirst:{type:"boolean",group:"Misc",defaultValue:false},textHeight:{type:"string",group:"Misc",defaultValue:""},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"}},defaultAggregation:"content",aggregations:{content:{type:"sap.suite.ui.commons.TimelineItem",multiple:true,singularName:"content"},customFilter:{type:"sap.ui.core.Control",multiple:false},filterList:{type:"sap.suite.ui.commons.TimelineFilterListItem",multiple:true,singularName:"filterList"},suggestionItems:{type:"sap.m.StandardListItem",multiple:true,singularName:"suggestionItem",deprecated:true}},events:{addPost:{deprecated:true,parameters:{value:{type:"string"}}},customMessageClosed:{},filterOpen:{},filterSelectionChange:{parameters:{type:{type:"sap.suite.ui.commons.TimelineFilterType"},searchTerm:{type:"string"},selectedItem:{type:"string"},selectedItems:{type:"object"},timeKeys:{type:"object"},clear:{type:"boolean"}}},grow:{},itemFiltering:{parameters:{item:{type:"sap.suite.ui.commons.TimelineItem"},reasons:{type:"object"},dataKeys:{type:"object"},timeKeys:{type:"object"},searchTerm:{type:"string"}}},select:{parameters:{selectedItem:{type:"sap.suite.ui.commons.TimelineItem"},userAction:{type:"boolean"}}},suggest:{deprecated:true,parameters:{suggestValue:{type:"string"}}},suggestionItemSelected:{deprecated:true,parameters:{selectedItem:{type:"sap.ui.core.Item"}}}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designTime:true}});function w(t,e){var i;Object.defineProperty(t,e,{get:function(){return typeof i==="function"?i():i},set:function(t){i=t}})}var B=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),N=Object.freeze({ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"}),G=Object.freeze({UP:"UP",DOWN:"DOWN",NONE:"NONE"}),x={Year:s.getDateInstance({pattern:"yyyy"}),Quarter:s.getDateInstance({pattern:"QQQQ yyyy"}),Month:s.getDateInstance({format:"yyyyMMMM"}),Week:s.getDateInstance({pattern:"w"}),Day:s.getDateInstance({style:"long"}),MonthDay:s.getDateInstance({style:"medium"})};function E(t,e){var i;D(Array.isArray(t),"aArray must be an array.");if(typeof t.findIndex==="function"){return t.findIndex(e)}for(i=0;i<t.length;i++){if(e(t[i],i,t)){return i}}return-1}C.prototype.init=function(){this._objects=new u;this.reset();w(this,"_endDate");w(this,"_startDate");this._initControls();this.setBusyIndicatorDelay(0)};C.prototype.resetTimeLimits=function(){this._maxDate=null;this._minDate=null};C.prototype.setCustomModelFilter=function(t,e){var i=this.getBinding("content");if(i){var r=i.aFilters||[];var s=E(r,function(e){return e._customTimelineId===t});if(s!==-1){r.splice(s,1)}if(e!==null){e._customTimelineId=t;r.push(e)}i.filter(r,n.Control)}};C.prototype.setCustomGrouping=function(t){var e=this.getBindingInfo("content");this._fnCustomGroupBy=t;if(e){this._bindGroupingAndSorting(e);this.updateAggregation("content")}};C.prototype.setCurrentTimeFilter=function(t){this._startDate=t.from;this._endDate=t.to;this._rangeFilterType=t.type};C.prototype.setCurrentSearch=function(t){this._objects.getSearchField().setValue(t)};C.prototype.setCurrentFilter=function(t){var e=this,i=function(e){for(var i=0;i<t.length;i++){if(t[i]===e){return true}}return false};if(!t){return}if(!Array.isArray(t)){t=[t]}if(this._aFilterList.length===0){this._setFilterList()}e._currentFilterKeys=[];this._aFilterList.forEach(function(t){var r=t.key;if(i(r)){e._currentFilterKeys.push({key:r,text:t.text?t.text:t.key})}})};C.prototype.getGroups=function(){return this._useBinding()?this.getContent().filter(function(t){return t._isGroupHeader}):this._aGroups};C.prototype.exit=function(){this._objects.destroyAll();if(this.oItemNavigation){this.removeDelegate(this.oItemNavigation);this.oItemNavigation.destroy();this.oItemNavigation=null}if(this._oScroller){this._oScroller.destroy();this._oScroller=null}if(this.oResizeListener){r.deregister(this.oResizeListener);this.oResizeListener=null}};C.prototype.adjustUI=function(){this._performUiChanges(true)};C.prototype.setModelFilterMessage=function(t,e){if(t===M.Data){this._dataMessage=e}if(t===M.Time){this._rangeMessage=e}};C.prototype.setCustomFilterMessage=function(t){this._customFilterMessage=t};C.prototype.setModelFilter=function(t){switch(t.type){case M.Data:this._dataFilter=t.filter;break;case M.Time:this._rangeDataFilter=t.filter;break;case M.Search:this._searchFilter=t.filter;break;default:}if(t.refresh!==false){this.recreateFilter()}};C.prototype.getAggregation=function(t){switch(t){case"headerBar":return this.getHeaderBar();case"searchField":return this._objects.getSearchField();case"sortIcon":return this._objects.getSortIcon();case"filterIcon":return this._objects.getFilterIcon();default:return i.prototype.getAggregation.apply(this,arguments)}};C.prototype._formatGroupBy=function(t,e){if(this._fnCustomGroupBy){return this._fnCustomGroupBy(t)}var i=t,r=t;if(t instanceof Date){switch(e){case T.Year:i=t.getFullYear();r=x.Year.format(t);break;case T.Quarter:i=t.getFullYear()+"/"+Math.floor(t.getMonth()/4);r=x.Quarter.format(t);break;case T.Month:i=t.getFullYear()+"/"+t.getMonth();r=x.Month.format(t);break;case T.Week:var s=new Date(t),o=new Date(t),n=t.getFullYear(),a=x.Week.format(t),l=t.getDate()-t.getDay(),u=l+6,h=new Date(s.setDate(l)),p=new Date(o.setDate(u));i=n+"/"+a;r=x.MonthDay.format(h)+" – "+x.MonthDay.format(p);break;case T.Day:i=t.getFullYear()+"/"+t.getMonth()+"/"+t.getDate();r=x.Day.format(t);break;default:}}return{key:i,title:r,date:t}};C.prototype._fnDateDiff=function(t,e,i){var r,s,o,n,a=0;e=e||this._minDate;i=i||this._maxDate;switch(t){case T.Year:a=i.getFullYear()-e.getFullYear();break;case T.Month:r=(i.getFullYear()-e.getFullYear())*12;r+=i.getMonth()-e.getMonth();a=r<=0?0:r;break;case T.Quarter:s=(i.getFullYear()-e.getFullYear())*4;o=Math.floor(e.getMonth()/3);n=Math.floor(i.getMonth()/3);a=s+(n-o);break;case T.Day:var l=24*60*60*1e3;a=Math.round(Math.abs((e.getTime()-i.getTime())/l));break;default:}return a};C.prototype._fnAddDate=function(t,e){var i,r,s,o=function(t,e,i){this.setHours(t);this.setMinutes(e);this.setSeconds(i)},n=function(t,i,r){if(e===G.UP){o.call(r,23,59,59);return new Date(Math.min.apply(null,[this._maxDate,r]))}if(e===G.DOWN){o.call(i,0,0,0);return new Date(Math.max.apply(null,[this._minDate,i]))}return t};switch(this._rangeFilterType){case T.Year:i=new Date(new Date(this._minDate).setFullYear(this._minDate.getFullYear()+t));r=new Date(i.getFullYear(),0,1);s=new Date(i.getFullYear(),11,31);break;case T.Month:i=new Date(new Date(this._minDate).setMonth(this._minDate.getMonth()+t));r=new Date(i.getFullYear(),i.getMonth(),1);s=new Date(i.getFullYear(),i.getMonth()+1,0);break;case T.Quarter:i=new Date(new Date(this._minDate).setMonth(this._minDate.getMonth()+t*3));var a=i.getMonth()%3;r=new Date(i.getFullYear(),i.getMonth()-a,1);s=new Date(i.getFullYear(),i.getMonth()+(2-a)+1,0);break;case T.Day:i=r=s=new Date(new Date(this._minDate).setDate(this._minDate.getDate()+t));break;default:}return n.call(this,i,r,s)};C.prototype._calculateRangeTypeFilter=function(){var t=this._fnDateDiff(T.Day);if(t>500){return T.Year}else if(t>200){return T.Quarter}else if(t>62){return T.Month}return T.Day};C.prototype._setRangeFilter=function(){var t=this._fnDateDiff(this._rangeFilterType);this._objects.getTimeRangeSlider().setMin(0);this._objects.getTimeRangeSlider().setMax(t);this._objects.getTimeRangeSlider().setRange([0,t]);this._objects.getTimeRangeSlider().invalidate();var e=this._objects.getTimeRangeSlider().getRange();if(e[1]-e[0]===0){this._objects.getTimeRangeSlider().addStyleClass("sapTimelineRangeFilterNoDiff")}else{this._objects.getTimeRangeSlider().removeStyleClass("sapTimelineRangeFilterNoDiff")}};C.prototype._sortClick=function(){var t,e;this._sortOrder=this._sortOrder===N.ASCENDING?N.DESCENDING:N.ASCENDING;this._objects.getSortIcon().setIcon(this._sortOrder===N.ASCENDING?"sap-icon://arrow-bottom":"sap-icon://arrow-top");this._objects.getSortIcon().setTooltip(this._sortOrder===N.ASCENDING?B.getText("TIMELINE_SORT_ASCENDING"):B.getText("TIMELINE_SORT_DESCENDING"));if(this._useModelFilter()){t=this.getBinding("content");e=this._findDateTimeBindingPath();t.sort(this._getDefaultSorter(e,this._sortOrder===N.ASCENDING))}else{this.invalidate()}};C.prototype._sort=function(t,e){var i=e||this._sortOrder;t.sort(function(t,e){var r=t.getDateTime(),s=e.getDateTime(),o=i===N.ASCENDING?-1:1;return r<s?1*o:-1*o});return t};C.prototype._loadMore=function(){var t,e,i=function(){var t=this._displayShowMore()?this.getGrowingThreshold():this._calculateItemCountToLoad(this.$());this._iItemCount+=t;this._iItemCount=Math.min(this._getMaxItemsCount(),this._iItemCount)}.bind(this);this._lastScrollPosition.more=this._isVertical()?this._$content.get(0).scrollTop:this._$content.get(0).scrollLeft;this._setBusy(true);this.fireGrow();if(this._useBinding()){if(this._isMaxed()){this._setBusy(false);return}i();t=this.getBindingInfo("content");t.startIndex=0;if(!this._loadAllData()){t.length=this._iItemCount}e=this.getBinding("content").getContexts(0,t.length);if(e&&e.dataRequested){return}this.updateAggregation("content")}else{i();this.invalidate()}this.oItemNavigation.refocusOnNextUpdate()};C.prototype.recreateFilter=function(t){var e=this.getBinding("content"),i=this,r=[],s=[];if(e){if(!t){r=e.aFilters||[]}if(this._dataFilter){s.push(this._dataFilter)}if(this._rangeDataFilter){s.push(this._rangeDataFilter)}if(this._searchFilter){s.push(this._searchFilter)}if(this._filter&&!t){var o=E(r,function(t){return t===i._filter});if(o!==-1){r.splice(o,1)}}if(s.length>0){this._filter=new g(s,true);r.push(this._filter)}e.filter(r,n.Control)}else{this.invalidate()}};C.prototype._getRangeMessage=function(){var t=this._rangeMessage;if(!t){var e=this._formatGroupBy(this._startDate,this._rangeFilterType).title,i=this._formatGroupBy(this._endDate,this._rangeFilterType).title;t=B.getText("TIMELINE_RANGE_SELECTION")+" (";t+=e+" - "+i+")"}return t};C.prototype._getFilterMessage=function(){var t="",e=null;if(this._dataMessage){t=this._dataMessage}else if(this._currentFilterKeys.length>0){t=this._currentFilterKeys.map(function(t){return t.text?t.text:t.key}).join(", ");t=this._getFilterTitle()+" ("+t+")"}if(this._rangeDataFilter||this._rangeMessage||this._startDate&&this._endDate){t=t?t+", ":"";t+=this._getRangeMessage()}if(this._customFilterMessage){t=t?t+", "+this._customFilterMessage:this._customFilterMessage}if(t){e=B.getText("TIMELINE_FILTER_INFO_BY",t)}return e};C.prototype.refreshContent=function(){var e=this.getBinding("content"),i=this.getBindingInfo("content"),r=this.getGrowingThreshold();this._setBusy(true);if(e&&i){this._iItemCount=e.sOperationMode==="Default"?0:this._iItemCount;e.getContexts(0,r);i.length=r;e.attachEventOnce("dataReceived",t.proxy(function(){this.updateAggregation("content")},this))}else{this.updateAggregation("content")}};C.prototype.updateContent=function(){this._setBusy(false);this.updateAggregation("content");var t=this._objects.getSortIcon();if(this.getAggregation("content").length<=1){t.setEnabled(false)}else{t.setEnabled(true)}this.invalidate()};C.prototype.destroyContent=function(){var t=this.$("line"),e=this.$().find(".sapSuiteUiCommonsTimelineItemGetMoreButton");if(t.get(0)){t.remove()}if(e.get(0)){e.remove()}this.destroyAggregation("content");return this};C.prototype._search=function(t){var e=this,i,r,s,o,n=[];this._searchValue=t;if(this._useModelFilter()){i=this._fireSelectionChange({searchTerm:this._searchValue,type:M.Search});if(i){this._searchFilter=null;if(this._searchValue){r=this._findBindingPaths("text");s=this._findBindingPaths("title");o=this._findBindingPaths("userName");if(r.length>0){n.push(r)}if(s.length>0){n.push(s)}if(o.length>0){n.push(o)}if(n.length>0){this._searchFilter=new g(n.map(function(t){return new g(t.map(function(t){return new g(t,c.Contains,e._searchValue)}),false)}))}}this.recreateFilter()}}else{this.invalidate()}};C.prototype._filterData=function(t){var e,i;this._dataMessage="";if(this._useModelFilter()){this._dataFilter=null;e=this._fireSelectionChange({selectedItem:this._currentFilterKeys[0]?this._currentFilterKeys[0].key:"",selectedItems:this._currentFilterKeys,type:M.Data});if(e){if(this._currentFilterKeys.length>0){i=this._findBindingPath("filterValue");if(i){this._dataFilter=new g(this._currentFilterKeys.map(function(t){return new g(i,c.EQ,t.key)}),false)}}}this._rangeDataFilter=null;if(t){e=this._fireSelectionChange({type:M.Time,timeKeys:{from:this._startDate,to:this._endDate}});if(e){i=this._findDateTimeBindingPath();if(i){this._rangeDataFilter=new g({path:i,operator:c.BT,value1:this._startDate,value2:this._endDate})}}}this._setBusy(true);this.recreateFilter()}else{this.invalidate()}};C.prototype._filterRangeData=function(){var t,e;this._rangeMessage="";if(this._useModelFilter()){t=this._fireSelectionChange({from:this._startDate,to:this._endDate,type:M.Time});if(t){e=this._findDateTimeBindingPath();this._rangeDataFilter=null;if(e){this._rangeDataFilter=new g({path:e,operator:c.BT,value1:this._startDate,value2:this._endDate})}this._setBusy(true);this.recreateFilter()}}else{this.invalidate()}};C.prototype.applySettings=function(t,e){f.prototype.applySettings.apply(this,[t,e]);this._settingsApplied=true;if(this._bindOptions){this.bindAggregation("content",this._bindOptions);this._bindOptions=null}};C.prototype._setFilterList=function(){var t=false,e,i,r,s={},o,n;this._aFilterList=[];if(this._useModelFilter()){this._aFilterList=this.getFilterList().map(function(t){return{key:t.getProperty("key"),text:t.getProperty("text")}});if(this._aFilterList.length===0){n=this._findBindingData("filterValue");o=this.getBinding("content");if(n&&o){e=o.getDistinctValues(n.path);if(Array.isArray(e)){this._aFilterList=e.map(function(t){return{key:t,text:n.formatter?n.formatter(t):t}});this._aFilterList=this._aFilterList.filter(function(t){return t.key})}t=true}}}else{i=this.getContent();t=true;for(var a=0;a<i.length;a++){r=i[a].getFilterValue();if(!r){continue}if(!(r in s)){s[r]=1;this._aFilterList.push({key:r,text:r})}}}if(t){this._aFilterList.sort(function(t,e){if(t.text.toLowerCase){return t.text.toLowerCase().localeCompare(e.text.toLowerCase())}else{return t.text>e.text}})}};C.prototype._clearFilter=function(){var t=function(){var t,e=this._objects.getTimeRangeSlider();this._startDate=null;this._endDate=null;this._rangeMessage=null;e.setRange([e.getMin(),e.getMax()]);if(this._useModelFilter()){t=this._fireSelectionChange({clear:true,timeKeys:{from:null,to:null},type:M.Range})}return t}.bind(this),e=function(){var t;this._currentFilterKeys=[];if(this._useModelFilter()){t=this._fireSelectionChange({clear:true,selectedItems:[],selectedItem:"",type:M.Data})}return t}.bind(this);var i=e(),r=t();this._customFilterMessage="";if(i||r){if(i){this._dataFilter=null}if(r){this._rangeDataFilter=null}this.recreateFilter(true)}else{this.invalidate()}this._objects.destroyObject("FilterContent");this._setupFilterDialog()};C.prototype._getTimeFilterData=function(){var t=this,e,i,r,s,o=function(e,i){return a(e,t[i]).then(function(e){if(e){if(!t._objects.getTimeFilterSelect().getEnabled()){t._objects.getTimeFilterSelect().setEnabled(true)}var r=l.parseDate(e);if(r instanceof Date){t[i]=r}}}).catch(function(){t._objects.getTimeFilterSelect().setEnabled(false)})},n=function(e){var i,r,s,o,n,a="sap_suite_ui_commons_Timeline";i=this.getBinding("content").getModel();if(!i){return Promise.reject()}r=this._findDateTimeBindingPath();if(!r){return}s=new p(r,e);o=this.getBinding("content");if(!o){return Promise.reject()}if(i.submitBatch){n={$$groupId:a}}var u=i.bindList(o.getPath(),o.getContext(),s,undefined,n);u.initialize();var g=u.getContexts(0,1);if(y.isA(u,"sap.ui.model.json.JSONListBinding")&&g.length===0){return Promise.reject()}else if(g.length>0){return Promise.resolve(l.parseDate(g[0].getProperty(r)))}else if(y.isA(u,"sap.ui.model.odata.v4.ODataListBinding")){t._setBusy(true);return new Promise(function(e,s){i.submitBatch(a).then(function(){t._setBusy(false);h(u,r,e,s)})})}else if(u&&u.attachDataReceived){t._setBusy(true);return new Promise(function(e,i){u.attachDataReceived(function(){t._setBusy(false);h(u,r,e,i)})})}return Promise.reject()}.bind(this),a=function(t,e){if(e){return Promise.resolve(e)}return n(t==="max")},u=function(){e=this.getContent();if(e.length>0){this._minDate=e[0].getDateTime();this._maxDate=e[0].getDateTime();for(var t=1;t<e.length;t++){s=e[t].getDateTime();if(s<this._minDate){this._minDate=s}if(s>this._maxDate){this._maxDate=s}}}},h=function(t,e,i,r){var s=t.getContexts(0,1);if(s.length>0){i(l.parseDate(s[0].getProperty(e)))}else{r()}};return new Promise(function(e,s){if(!t._maxDate||!t._minDate){if(t._useModelFilter()){i=o("min","_minDate",i);r=o("max","_maxDate",r);Promise.all([i,r]).then(function(){e()}).catch(function(){s()})}else{u.call(t);e()}}else{e()}})};C.prototype._openFilterDialog=function(){var t=this.getCustomFilter();if(t){if(typeof t.openBy==="function"){t.openBy(this._objects.getFilterIcon())}else if(typeof t.open==="function"){t.open()}else{F.error("CustomFilter is expected to have an openBy or open function. The provided instance doesn't have either.")}this.fireFilterOpen();return}this._filterState={data:false,range:false};this._objects.getFilterContent().open();this._objects.getTimestampFilterPicker().resizeDialog(this._objects);this.fireFilterOpen()};C.prototype._createGroupHeader=function(t,e){var i=this.getId()+"-timelinegroupheader-"+this._groupId,r=t.key,s=new d(i,{text:"GroupHeader",dateTime:t.date,userName:r,title:t.title,icon:"sap-icon://arrow-down"});s._isGroupHeader=true;if(e){s.setParent(this,"content");this._aGroups.push(s)}else{this.addAggregation("content",s,false)}this._groupId++;return s};C.prototype._getDefaultSorter=function(t,e){var i=this;if(t){return new p(t,!e,function(e){var r=e.getProperty(t),s=l.parseDate(r);return s instanceof Date?i._formatGroupBy(s,i.getGroupByType()):{date:s}})}};C.prototype._findBindingInfoFromTemplate=function(t,e){if(!e){var i=this.getBindingInfo("content");if(i){e=i.template}}if(e){var r=e.getBindingInfo(t);if(r&&r.parts&&r.parts[0]){return r}}return null};C.prototype._findBindingPaths=function(t,e){var i=this._findBindingInfoFromTemplate(t,e);if(i&&i.parts){return i.parts.map(function(t){return t.path})}return[]};C.prototype._findDateTimeBindingPath=function(t){var e=this.getDateTimePath();if(e){return e}var i=this._findBindingInfoFromTemplate("dateTime",t);if(i){return i.parts[0].path}return null};C.prototype._findBindingPath=function(t,e){var i=this._findBindingInfoFromTemplate(t,e);if(i){return i.parts[0].path}return null};C.prototype._findBindingData=function(t,e){var i=this._findBindingInfoFromTemplate(t,e);if(i){return{path:i.parts[0].path,formatter:i.formatter}}return null};C.prototype._bindGroupingAndSorting=function(e){if(!this._isGrouped()&&this.getSort()){var i=this._findDateTimeBindingPath(e.template);if(i){e.sorter=this._getDefaultSorter(i,this.getSortOldestFirst())}}e.groupHeaderFactory=null;if(this._isGrouped()){e.sorter=this._getDefaultSorter(this.getGroupBy(),this.getSortOldestFirst());e.groupHeaderFactory=t.proxy(this._createGroupHeader,this)}};C.prototype.updateBindingContext=function(){this.reset();return f.prototype.updateBindingContext.apply(this,arguments)};C.prototype.bindAggregation=function(e,i){if(e==="content"){if(!this._settingsApplied){this._bindOptions=i;return null}this._bindGroupingAndSorting(i);if(this._lazyLoading()){this._iItemCount=this._calculateItemCountToLoad(t(window));if(!this._loadAllData(true)){i.length=this._iItemCount}}else if(this._displayShowMore()&&!this._loadAllData(i.template||i.factory)){this._iItemCount=this.getGrowingThreshold();i.length=this._iItemCount}this._oOptions=i}return f.prototype.bindAggregation.apply(this,[e,i])};C.prototype._calculateItemCountToLoad=function(t){var e=v.Vertical===this.getAxisOrientation(),i=e?t.height():t.width(),r=this.getEnableDoubleSided(),s=r?.6:1,o=e?1200:2e3,n=e?120:280,a=13*s,l;if(!i){i=o}l=i/(n*s)*1.5;return Math.floor(Math.max(l,a))};C.prototype.onBeforeRendering=function(){var e=this.getGrowingThreshold(),i;this._bRtlMode=sap.ui.getCore().getConfiguration().getRTL();this._objects.getSortIcon().setIcon(this._sortOrder===N.ASCENDING?"sap-icon://arrow-bottom":"sap-icon://arrow-top");this._objects.getSortIcon().setTooltip(this._sortOrder===N.ASCENDING?B.getText("TIMELINE_SORT_ASCENDING"):B.getText("TIMELINE_SORT_DESCENDING"));this._aGroups=[];this._bRendered=false;i=this.getContent();if(!this._iItemCount&&!this._useBinding()&&this._lazyLoading()){this._iItemCount=this._calculateItemCountToLoad(t(window))}if(!this._iItemCount){if(e!==0){this._iItemCount=e}}if(!this._iItemCount||!this._useGrowing()){this._iItemCount=i.filter(function(t){return!t._isGroupHeader}).length}this._setOutput(i)};C.prototype.addContentGroup=function(t){};C.prototype._performScroll=function(t){var e=this,i=this._isVertical()?this._$content.get(0).scrollTop+t:this._$content.get(0).scrollLeft+t;i=Math.max(i,0);if(this._isVertical()){this._$content.get(0).scrollTop=i}else{this._$content.get(0).scrollLeft=i}if(this._manualScrolling){setTimeout(e._performScroll.bind(e,t),50)}};C.prototype._moveScrollBar=function(t){if(this._lastScrollPosition.more||this._lastScrollPosition.backup){if(t){this._lastScrollPosition.more=this._lastScrollPosition.backup}if(!t){this._lastScrollPosition.backup=this._lastScrollPosition.more}this._lastScrollPosition.more=0}};C.prototype.onAfterRendering=function(){var t=this.$();if(this._isVertical()){this._$content=this.$("content");this._$scroll=this.$("scroll")}else{this._$content=this.$("contentH");this._$scroll=this.$("scrollH")}this.setBusy(false);if(!this._oScroller){this._oScroller=new m(this,this._$scroll.attr("id"),{})}this._oScroller._$Container=this._$scroll.parent();this._oScroller.setVertical(this._isVertical());this._oScroller.setHorizontal(!this._isVertical());this._startItemNavigation();this._scrollersSet=false;this._scrollMoreEvent=true;this._lastStateDblSided=null;this._showCustomMessage();this._setupScrollEvent();this._performUiChanges();this._moveScrollBar();this._bRendered=true;t.css("opacity",1)};C.prototype._clientFilter=function(t){var e=[],i,r,s,o,n,a,l,u,h,p;function g(t){return t.key===i.getProperty("filterValue")}for(var c=0;c<t.length;c++){i=t[c];r=false;s={};if(this._currentFilterKeys.length>0){o=E(this._currentFilterKeys,g);if(o===-1){r=true;s[M.Data]=1}}if(this._startDate&&this._endDate){n=i.getDateTime();if(n<this._startDate||n>this._endDate){r=true;s[M.Time]=1}}if(this._searchValue){a=this._searchValue.toLowerCase();l=i.getProperty("text")||"";u=i.getProperty("title")||"";h=i.getProperty("userName")||"";if(!(l.toLowerCase().indexOf(a)!==-1||u.toLowerCase().indexOf(a)!==-1||h.toLowerCase().indexOf(a)!==-1)){r=true;s[M.Search]=1}}p=!this.fireEvent("itemFiltering",{item:i,reasons:s,dataKeys:this._currentFilterKeys,timeKeys:{from:this._startDate,to:this._endDate},searchTerm:this._searchValue},true);if(p){r=!r}if(!r){e.push(i)}}return e};C.prototype._setOutput=function(e){var i;var r=function(){var t=0,e=[],r=0;if(this._iItemCount!==i.length){for(;r<i.length;r++){if(!i[r]._isGroupHeader){t++}if(t>this._iItemCount){break}e.push(i[r])}i=e}},s=function(){var t=[],e,r,s={key:""};for(var o=0;o<i.length;o++){e=i[o];r=this._formatGroupBy(e.getDateTime(),this.getGroupByType());if(r.key!=s.key){t.push(this._createGroupHeader(r,true));s=r}t.push(e)}return t},o=function(){var t;if(!this._maxDate&&!this._minDate){if(this.getSort()||this._isGrouped()){for(var i=0;i<e.length;i++){t=e[i];if(!t._isGroupHeader){this._sortOrder===N.ASCENDING?this._minDate=t.getDateTime():this._maxDate=t.getDateTime();break}}}}},n,a,l,u;o.call(this);if((!this._useBinding()||!this._useModelFilter())&&this.getSort()){e=this._sort(e)}i=this._useModelFilter()?e:this._clientFilter(e);i=i.filter(function(t){return!t._isGroupHeader});this._showMore=this.getForceGrowing();if(!this._showMore&&this._displayShowMore()){this._showMore=i.length>this._iItemCount;if(!this._showMore&&this._useModelFilter()){this._showMore=i.length===this._iItemCount&&this._iItemCount<this._getMaxItemsCount()}}i=i.filter(function(t){return t.getVisible()});r.call(this);this._outputItem=[];if(this._isGrouped()){if(!this._useBinding()){e=s.call(this)}var h=e.filter(function(t){return t._isGroupHeader});this._groupCount=h.length;for(var p=0;p<h.length;p++){n=h[p];l=n.getUserName();u=true;n._groupID=l;for(var g=0;g<i.length;g++){var c=i[g];a=this._formatGroupBy(c.getDateTime(),this.getGroupByType());if(a.key==l&&!c._isGroupHeader){if(u){this._outputItem.push(n);u=false}c._groupID=l;this._outputItem.push(c)}}}}else{this._outputItem=t.extend(true,[],i)}};C.prototype._getMaxItemsCount=function(){var t=this.getBinding("content"),e,i,r;if(t){r=t.getLength()||0;e=t.getModel();i=e&&e.iSizeLimit;return Math.min(r,i||r)}return this.getContent().length};C.prototype._showCustomMessage=function(){var t=!!this._customMessage,e=this._objects.getMessageStrip().$();this._objects.getMessageStrip().setVisible(t);this._objects.getMessageStrip().setText(this._customMessage);if(t){e.show()}else{e.hide()}};C.prototype._performExpandCollapse=function(e,i){var r=this,s,o,n=this.$(),a=i?"slideDown":"slideUp",l=250;n.find('li[groupid="'+e+'"][nodeType="GroupHeaderBar"]').each(function(e,r){var s=t(r);if(!i){s.addClass("sapSuiteUiCommonsTimelineItemGroupCollapsedBar")}else{s.removeClass("sapSuiteUiCommonsTimelineItemGroupCollapsedBar")}});s=n.find('li[groupid="'+e+'"][nodeType!="GroupHeader"][nodeType!="GroupHeaderBar"]');if(this.getAxisOrientation()==="Vertical"){o=s.parent()}return new Promise(function(t,e){if(r._noAnimation){if(i){if(o){o.show()}else{s.show()}}else{if(o){o.hide()}else{s.hide()}}t()}else{if(r._isVertical()){s[a](l)}else{s.animate({width:"toggle"},350)}s.promise().done(function(){t()})}})};C.prototype._itemRendered=function(){if(this._bRendered){this.adjustUI()}};C.prototype._startItemNavigation=function(t){var e=this._getItemsForNavigation(),i=this.$("content").get(0)||this.$("contentH").get(0),r=function(t,e){return e.filter(function(e){return e.getFocusDomRef()===t})};if(!this.oItemNavigation){this.oItemNavigation=new a(i,e.items,false,e.rows);this.oItemNavigation.setPageSize(10);this.oItemNavigation.attachEvent("AfterFocus",function(t){var e=this.oItemNavigation.getItemDomRefs()[t.getParameter("index")],i=r(e,this._outputItem);if(i[0]){this.fireSelect({selectedItem:i[0],userAction:t.mParameters.event&&t.mParameters.event.type==="mousedown"})}},this);this.oItemNavigation.attachEvent("Enter",function(t){var e=r(t.getParameter("domRef"),this._outputItem);if(e[0]){this.fireSelect({selectedItem:e[0],userAction:true})}},this);this.addDelegate(this.oItemNavigation)}else{this.oItemNavigation.updateReferences(i,e.items,e.rows)}if(e.columns){this.oItemNavigation.setColumns(e.columns,false)}};C.prototype._getItemsForNavigation=function(){var t={},e,i,r,s,o;if(this._renderDblSided){if(this._isVertical()){t.items=this._outputItem;t.rows=[];s=[];t.items.forEach(function(e){var i=e.$(),r=i.hasClass("sapSuiteUiCommonsTimelineItemWrapperVLeft")||i.hasClass("sapSuiteUiCommonsTimelineItemOdd");if(r&&s.length===1){s.push(null)}else if(!r&&s.length===0){s.push(null)}if(s.length>1){t.rows.push(s);s=[]}s.push(e)});if(s.length>0){t.rows.push(s)}}else{i=[];r=[];this._outputItem.forEach(function(t){if(t._placementLine==="top"){i.push(t)}else{while(r.length+1<i.length){r.push(null)}r.push(t)}});t.items=this._outputItem;t.rows=[i,r]}}else{t.items=this._outputItem}t.items=t.items.map(function(t){return t.getFocusDomRef()});if(t.rows){o=0;t.rows=t.rows.map(function(t){if(t.length>o){o=t.length}return t.map(function(t){return t===null?null:t.getFocusDomRef()})});t.rows.forEach(function(t){while(t.length<o){t.push(null)}})}if(this._showMore){e=this._objects.getMoreButton().getFocusDomRef();t.items.push(e);if(t.rows){if(this._isVertical()){if(t.rows.length>0){t.rows.push(t.rows[0].map(function(t,i,r){if(i===r.length-1){return e}else{return null}}))}else{t.rows.push([e])}}else{t.rows.forEach(function(t,i,r){if(i===r.length-1){t.push(e)}else{t.push(null)}})}}}return t};C.prototype.setShowItemFilter=function(t){this.setProperty("showItemFilter",t,true);if(this._objects.isObjectInitialized("FilterContent")){this._setupFilterFirstPage(this._objects.getFilterContent())}this._objects.getFilterIcon().setVisible(t||this.getShowTimeFilter());return this};C.prototype.setShowTimeFilter=function(t){this.setProperty("showTimeFilter",t,true);if(this._objects.isObjectInitialized("FilterContent")){this._setupFilterFirstPage(this._objects.getFilterContent())}this._objects.getFilterIcon().setVisible(t||this.getShowItemFilter());return this};C.prototype._getFilterTitle=function(){var t=this.getFilterTitle();if(!t){t=B.getText("TIMELINE_FILTER_ITEMS")}return t};C.prototype.getNoDataText=function(){var t=this.getProperty("noDataText");if(!t){t=B.getText("TIMELINE_NO_DATA")}return t};C.prototype.setSortOldestFirst=function(t){this._sortOrder=t?N.ASCENDING:N.DESCENDING;this._objects.getSortIcon().setIcon(this._sortOrder===N.ASCENDING?"sap-icon://arrow-bottom":"sap-icon://arrow-top");this._objects.getSortIcon().setTooltip(this._sortOrder===N.ASCENDING?B.getText("TIMELINE_SORT_ASCENDING"):B.getText("TIMELINE_SORT_DESCENDING"));this.setProperty("sortOldestFirst",t);return this};C.prototype.setGrowingThreshold=function(t){this.setProperty("growingThreshold",t,true);this._iItemCount=t;return this};C.prototype.setShowHeaderBar=function(t){this.setProperty("showHeaderBar",t,true);this._objects.getHeaderBar().setVisible(t);return this};C.prototype.setSort=function(t){this.setProperty("sort",t);this._objects.getSortIcon().setVisible(t&&this.getShowSort());return this};C.prototype.setAxisOrientation=function(t){this.setProperty("axisOrientation",t);if(this._oScroller){this._oScroller.destroy();this._oScroller=null}return this};C.prototype.setEnableDoubleSided=function(t){this.setProperty("enableDoubleSided",t);this._renderDblSided=t;return this};C.prototype.getCurrentFilter=function(){return this._currentFilterKeys.map(function(t){return{key:t.key,text:t.text||t.key}})};C.prototype.reset=function(){this._iItemCount=0;this._aFilterList=[];this._collapsedGroups={};this._renderDblSided=null;this._groupId=0;this._lastScrollPosition={x:0,y:0,more:0};this._sortOrder=this.getSortOldestFirst()?N.ASCENDING:N.DESCENDING;this._scrollersSet=false;this._currentFilterKeys=[];this._bRendered=false;this._noAnimation=true};C.prototype.setShowFilterBar=function(t){this.setProperty("showFilterBar",t,true);this.setShowHeaderBar(t);return this};C.prototype.setShowSearch=function(t){this.setProperty("showSearch",t,true);this._objects.getSearchField().setVisible(!!t);return this};C.prototype.setShowSort=function(t){this.setProperty("showSort",t,true);this._objects.getSortIcon().setVisible(this.getSort()&&t);return this};C.prototype.setCustomMessage=function(t){this._customMessage=t;this._showCustomMessage();return this};C.prototype.getHeaderBar=function(){return this._objects.getHeaderBar()};C.prototype.getMessageStrip=function(){return this._objects.getMessageStrip()};C.prototype.setContent=function(t){this.removeAllContent();var e=0;for(var i=0;i<t.length;i++){var r=t[i];if(r instanceof d){if(this._isGrouped()){var s=this._formatGroupBy(r.getDateTime(),this.getGroupByType());if(s.key!==e.key){this._createGroupHeader(s);e=s}}this.addContent(r)}}this._iItemCount=0;return this};C.prototype.setData=function(e){var i="sapsuiteuicommonsTimelineInternalModel",r=new h,s,o,n=function(t,e){var i=new d({dateTime:e.getProperty("dateTime"),icon:e.getProperty("icon"),userName:e.getProperty("userName"),title:e.getProperty("title"),text:e.getProperty("text"),filterValue:e.getProperty("filterValue")});if(e.getProperty("content")){i.setEmbeddedControl(e.getProperty("content"))}return i},a=function(t,e){var i=t;if(e){i=e+">"+t}return i};if(typeof e==="undefined"){return this}s=a("/",i);r.setData(e);this.setModel(r,i);this.setProperty("data",e,true);o={path:s,sorter:this._getDefaultSorter("dateTime",this.getSortOldestFirst()),factory:t.proxy(n,this)};if(this._isGrouped()){o.groupHeaderFactory=t.proxy(this._getGroupHeader,this)}this.bindAggregation("content",o);return this};C.prototype.getSuspendSocialFeature=function(){return this._suspenseSocial};C.prototype.setSuspendSocialFeature=function(t){this._suspenseSocial=t;if(!this.getEnableSocial()){return}var e=this.getContent();for(var i=0;i<e.length;i++){e[i]._objects.getReplyLink().setEnabled(!t)}this.invalidate();return this};C.prototype.updateFilterList=function(){this.updateAggregation("filterList");this._setFilterList()};C.prototype.setGroupByType=function(t){var e=this.getBindingInfo("content");this.setProperty("groupByType",t);if(e){this._bindGroupingAndSorting(e);this.updateAggregation("content")}return this};C.prototype.getGroup=function(){return this.getGroupByType()!=="None"};C.prototype.setGroup=function(t){if(t&&this.getGroupByType()===T.None){this.setGroupByType(T.Year)}if(!t){this.setGroupByType(T.None)}return this};C.prototype.setGrowing=function(t){if(!t){this.setGrowingThreshold(0)}return this};C.prototype.getGrowing=function(t){return this.getGrowingThreshold()!==0};C.prototype.setEnableBackendFilter=function(t){this.setProperty("enableModelFilter",t);return this};C.prototype.getEnableBackendFilter=function(){return this.getProperty("enableModelFilter")};C.prototype._isGrouped=function(){return(this.getGroupByType()!==T.None||this._fnCustomGroupBy)&&this.getGroupBy()!==""};C.prototype._lazyLoading=function(){return this.getEnableScroll()&&this.getLazyLoading()};C.prototype._loadAllData=function(t){return!this._useModelFilter(t)};C.prototype._isVertical=function(){return v.Vertical===this.getAxisOrientation()};C.prototype._displayShowMore=function(){return this.getForceGrowing()||this.getGrowingThreshold()!==0&&!this._lazyLoading()};C.prototype._useGrowing=function(){return this.getForceGrowing()||this.getGrowingThreshold()!==0||this._lazyLoading()};C.prototype._isMaxed=function(){return this._iItemCount>=this._getMaxItemsCount()};C.prototype._useModelFilter=function(t){return this.getEnableModelFilter()&&(t||this._useTemplateBinding()||this._useFactoryBinding())};C.prototype._scrollingFadeout=function(t){return this.getScrollingFadeout()!==S.None&&this.getEnableScroll()};C.prototype._setBusy=function(t){if(this.getEnableBusyIndicator()){this.setBusy(t)}};C.prototype._fireSelectionChange=function(t){return this.fireEvent("filterSelectionChange",t,true)};C.prototype._isLeftAlignment=function(){return this.getAlignment()===b.Left||this.getAlignment()===b.Top};C.prototype._useBinding=function(t){return this.getBindingInfo("content")!=null};C.prototype._useTemplateBinding=function(){var t=this.getBindingInfo("content");return t&&t.template!=null};C.prototype._useFactoryBinding=function(){var t=this.getBindingInfo("content");return t&&t.factory!=null};C.prototype._useAutomaticHeight=function(){return this.getTextHeight().toLowerCase()==="automatic"&&!this._isVertical()};C.prototype._getItemsCount=function(){return this._outputItem?this._outputItem.length:0};_.extendTimeline(C);return C});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/TimelineFilterListItem",["./library","sap/ui/core/Control"],function(e,t){"use strict";var i=t.extend("sap.suite.ui.commons.TimelineFilterListItem",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Data",defaultValue:null},text:{type:"string",group:"Misc",defaultValue:null}}}});return i});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/TimelineItem",["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/m/Text","sap/m/Toolbar","sap/m/Link","sap/m/TextArea","sap/m/Popover","sap/m/ToolbarSpacer","sap/m/Button","sap/ui/Device","sap/suite/ui/commons/util/ManagedObjectRegister","sap/suite/ui/commons/util/DateUtils","sap/ui/core/Icon","sap/m/library","sap/ui/core/format/DateFormat","sap/ui/base/Object","sap/ui/dom/containsOrEquals","sap/base/security/encodeXML","./TimelineItemRenderer","sap/ui/events/KeyCodes"],function(e,t,i,s,r,o,n,a,l,p,u,c,h,g,d,f,m,_,y,T){"use strict";var x=g.PlacementType;var C=g.ToolbarDesign;var I=g.Avatar;var v=g.AvatarShape;var b=g.AvatarSize;var S=t.extend("sap.suite.ui.commons.TimelineItem",{metadata:{library:"sap.suite.ui.commons",properties:{dateTime:{type:"any",group:"Misc",defaultValue:null},filterValue:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Misc",defaultValue:null},iconDisplayShape:{type:"sap.m.AvatarShape",defaultValue:v.Circle},iconInitials:{type:"string",defaultValue:""},iconSize:{type:"sap.m.AvatarSize",defaultValue:b.XS},iconTooltip:{type:"string",group:"Misc",defaultValue:null},useIconTooltip:{type:"boolean",group:"Accessibility",defaultValue:true},maxCharacters:{type:"int",group:"Behavior",defaultValue:null},replyCount:{type:"int",group:"Misc",defaultValue:null},status:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},text:{type:"string",group:"Misc",defaultValue:null},userName:{type:"string",group:"Misc",defaultValue:null},userNameClickable:{type:"boolean",group:"Misc",defaultValue:false},userPicture:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null}},defaultAggregation:"embeddedControl",aggregations:{customAction:{type:"sap.ui.core.CustomData",multiple:true,singularName:"customAction"},customReply:{type:"sap.ui.core.Control",multiple:false},embeddedControl:{type:"sap.ui.core.Control",multiple:false},replyList:{type:"sap.m.List",multiple:false},suggestionItems:{type:"sap.m.StandardListItem",multiple:true,singularName:"suggestionItem",deprecated:true}},events:{userNameClicked:{parameters:{uiElement:{type:"sap.ui.core.Control"}}},select:{},press:{},replyPost:{parameters:{value:{type:"string"}}},replyListOpen:{},customActionClicked:{parameters:{value:{type:"string"},key:{type:"string"},linkObj:{type:"sap.m.Link"}}},suggest:{deprecated:true,parameters:{suggestValue:{type:"string"}}},suggestionItemSelected:{deprecated:true,parameters:{selectedItem:{type:"sap.ui.core.Item"}}}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}}}});var E=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),L={Warning:"sapSuiteUiCommonsTimelineStatusWarning",Error:"sapSuiteUiCommonsTimelineStatusError",Success:"sapSuiteUiCommonsTimelineStatusSuccess",Information:"sapSuiteUiCommonsTimelineStatusInformation"};S.prototype.init=function(){this._customReply=false;this._objects=new u;this._nMaxCharactersMobile=500;this._nMaxCharactersDesktop=800;this._sTextShowMore=E.getText("TIMELINE_TEXT_SHOW_MORE");this._registerControls();this._registerPopup();this._orientation="V"};S.prototype.setCustomMessage=function(e){this._objects.getInfoText().setText(e);this._objects.getInfoBar().setVisible(e&&e.length>0);this.invalidate()};S.prototype.setDateTime=function(e){var t="";var i=RegExp(/^(?:[0-9]{4}-[0-9]{2}-[0-9]{2})?(?:[ T][0-9]{2}:[0-9]{2}:[0-9]{2})(?:[.][0-9]{1,12})?[Z]/);var s=RegExp(/^(?:[0-9]{4}-[0-9]{2}-[0-9]{2})?(?:[ T][0-9]{2}:[0-9]{2}:[0-9]{2})/);if(i.test(e)){if(e.indexOf(".")>0&&e.split(".")[1]){var r=e.split(".")[1].length-1;for(var o=0;o<r;o++){t=t+"S"}var n="yyyy-MM-dd'T'HH:mm:ss."+t+"X";var a=d.getDateTimeInstance({pattern:n});var l=a.parse(e);if(l instanceof Date){e=l}}else{e=e?c.parseDate(e):e}}else if(s.test(e)){e=e?c.parseDate(e):e}this.setProperty("dateTime",e);return this};S.prototype.applyFocusInfo=function(){this.focus();this.getParent()._moveScrollBar(true)};S.prototype.getFocusDomRef=function(){return this.$("outline")[0]};S.prototype._replyPost=function(){var e=this._objects.getReplyInputArea().getValue();this.fireReplyPost({value:e})};S.prototype._registerPopup=function(){var e=this;this._objects.register("fullText",function(){var t=new i(e.getId()+"-fullText",{text:e.getText()});t.addStyleClass("sapSuiteUiCommonsTimelineItemPopoverText");return t});this._objects.register("fullTextPopover",function(){var t=new n({placement:x.Bottom,showArrow:false,showHeader:false,contentMinWidth:"300px",contentWidth:"450px",resizable:true,content:[e._objects.getFullText()]});t.addStyleClass("sapSuiteUiCommonsTimelineItemShowMorePopover");return t})};S.prototype._openReplyDialog=function(){if(this._customReply){this.getCustomReply().openBy(this._objects.getReplyLink());this.fireReplyListOpen()}else{this.fireReplyListOpen();this._objects.getReplyInputArea().setValue("");this._oldReplyInputArea="";this._list=this.getReplyList();if(this._list!==null){this.setAggregation("replyList",null,true);this._objects.getReplyPop().addContent(this._list)}this._objects.getReplyPop().addContent(this._objects.getReplyInputArea());this._objects.getReplyPop().openBy(this._objects.getReplyLink())}};S.prototype._callParentFn=function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),i=this.getParent();if(i&&typeof i[t]==="function"){return i[t].apply(i,e)}};S.prototype._getCorrectGroupIcon=function(){var e="",t=function(){return this.getParent()&&this.getParent()._renderDblSided}.bind(this),i=this._isGroupCollapsed();if(this._orientation==="H"){e="sap-icon://navigation-right-arrow";if(!i){e=this._callParentFn("_isLeftAlignment")||t()?"sap-icon://navigation-down-arrow":"sap-icon://navigation-up-arrow"}}else{e="sap-icon://navigation-down-arrow";if(i){e=this._callParentFn("_isLeftAlignment")||t()?"sap-icon://navigation-right-arrow":"sap-icon://navigation-left-arrow"}}return e};S.prototype.onclick=function(e){var t=this;var i=e.srcControl;if(m(this.$("outline").get(0),e.target)){if(this._isGroupHeader){t._performExpandCollapse(t._groupID)}}if(i&&(i instanceof h||i.getId().indexOf("userNameLink")>-1)||i instanceof sap.m.Avatar){return}if(i instanceof r){this.firePress()}else{this.fireSelect()}};S.prototype.onkeydown=function(e){if(e.which===T.ENTER||e.which===T.SPACE){if(e.srcControl.getId().indexOf("userNameLink")>-1){this.fireUserNameClicked({uiElement:this})}else if(e.srcControl instanceof r){this.firePress()}else{this.fireSelect()}}};S.prototype._performExpandCollapse=function(e){var t=false,i=this._isGroupCollapsed(e);var s=function(e,t){var i=e.find(".sapSuiteUiCommonsTimelineItemBarV"),s,r;if(t.get(0)){s=t.attr("groupId");r=!this._isGroupCollapsed(s);if(r){i.addClass("sapSuiteUiCommonsTimelineGroupNextExpanded")}else{i.removeClass("sapSuiteUiCommonsTimelineGroupNextExpanded")}}}.bind(this),r=function(){var e,i,s;if(!t){e=this._objects.getGroupCollapseIcon&&this._objects.getGroupCollapseIcon();i=this.$();s=this._isGroupCollapsed();if(!s){i.removeClass("sapSuiteUiCommonsTimelineGroupCollapsed");i.addClass("sapSuiteUiCommonsTimelineGroupExpanded")}else{i.addClass("sapSuiteUiCommonsTimelineGroupCollapsed");i.removeClass("sapSuiteUiCommonsTimelineGroupExpanded")}e.setSrc(this._getCorrectGroupIcon());t=true}}.bind(this),o=function(){if(this.getParent()){this.getParent()._collapsedGroups[e]=!i}}.bind(this),n=this.$(),a=this,l=n.parent(),p,u,c,h,g,d;o();if(this._orientation==="H"){p=this.$("line")}else{p=n.find(".sapSuiteUiCommonsTimelineGroupHeaderBarWrapper");u=l.next().children("li").first();c=l.prev().children(":visible:last");if(c.get(0)){s(c,n)}if(i){h=l.children().last();s(h,u)}else{s(n,u)}}if(i){p.hide()}else{p.show()}d=n.find(".sapSuiteUiCommonsTimelineGroupHeaderMainWrapper");d.attr("aria-expanded",!!i);n.attr("aria-expanded",!!i);if(i){d.attr("aria-label",E.getText("TIMELINE_ACCESSIBILITY_GROUP_HEADER")+": "+d.prevObject[0].outerText+" "+E.getText("TIMELINE_ACCESSIBILITY_GROUP_EXPAND"),true)}else{d.attr("aria-label",E.getText("TIMELINE_ACCESSIBILITY_GROUP_HEADER")+": "+d.prevObject[0].outerText+" "+E.getText("TIMELINE_ACCESSIBILITY_GROUP_COLLAPSE"),true)}if(this._orientation!=="H"||i){r()}g=this._callParentFn("_performExpandCollapse",e,i,this);if(g){return new Promise(function(e,t){g.then(function(){r();a._callParentFn("_performUiChanges");e()})})}};S.prototype._getStatusColorClass=function(){var e=this.getStatus();return L[e]||""};S.prototype._getLineIcon=function(){var e=this,t;this._objects.register("lineIcon",function(){var i="sap-icon://circle-task",s=e.getText()==="GroupHeader";if(!s){i=e.getIcon()?e.getIcon():"sap-icon://activity-items"}t=new h(e.getId()+"-icon",{src:i,tooltip:e.getIconTooltip(),useIconTooltip:e.getUseIconTooltip()});t.addStyleClass("sapSuiteUiCommonsTimelineBarIcon");return t});return this._objects.getLineIcon()};S.prototype._isGroupCollapsed=function(e){var t=this.getParent();e=e||this._groupID;return t&&t._collapsedGroups&&t._collapsedGroups[e]};S.prototype._getCollapsedText=function(){var e=this.getText().substring(0,this._nMaxCollapsedLength);var t=e.lastIndexOf(" ");if(t>0){this._sShortText=e.substr(0,t)}else{this._sShortText=e}return this._sShortText};S.prototype._toggleTextExpanded=function(t){var i=this,s=t.getSource(),r=s.$(),o=this.$("realtext"),n=r.height(),a=r.position().top,l=o.parent().position().top,p=r.parent().prev(),u,c,h=this.getParent()&&this.getParent()._noAnimation,g=8,d=function(){return i.getParent()&&i.getParent()._renderDblSided},f=function(e,t,s){p.css("-webkit-line-clamp",s+"px");if(d()||h){p.css("height",e+"px");i._callParentFn("_performUiChanges")}else{p.animate({height:t},250,i._callParentFn("_performUiChanges"))}};if(this._orientation==="V"){c=this.$("threeDots");u=p.children().first();if(!this._expanded){this._textProperties={height:p.css("height"),clamp:p.css("-webkit-line-clamp"),text:u.html()};p.attr("expanded",true);c.hide();u.html(this._encodeHTMLAndLineBreak(this.getText()));var m=E.getText("TIMELINE_TEXT_SHOW_LESS");s.setText(m);s.rerender();f("",u.height(),"")}else{p.attr("expanded",false);s.setText(this._sTextShowMore);s.rerender();c.show();u.html(this._textProperties.text);f(this._textProperties.height,this._textProperties.height,this._textProperties.clamp)}i._expanded=!i._expanded}else{var _=l-a-n-g,y=e(window).height()-r.offset().top,T=200;if(y<T){_-=T-y}this._objects.getFullText().setText(this.getText());this._objects.getFullTextPopover().setOffsetY(Math.floor(_));this._objects.getFullTextPopover().openBy(this._objects.getExpandButton())}};S.prototype._getButtonExpandCollapse=function(){var e=this;this._objects.register("expandButton",function(){return new r(e.getId()+"-fullTextBtn",{text:e._sTextShowMore,press:e._toggleTextExpanded.bind(e)})});return this._objects.getExpandButton()};S.prototype._checkTextIsExpandable=function(){this._nMaxCollapsedLength=this.getMaxCharacters();if(this._nMaxCollapsedLength===0){this._nMaxCollapsedLength=p.system.phone?this._nMaxCharactersMobile:this._nMaxCharactersDesktop}return this.getText().length>this._nMaxCollapsedLength};S.prototype.onBeforeRendering=function(){var e=this;if(!this._list){this._list=this.getReplyList()}if(this.getReplyCount()>0){this._objects.getReplyLink().setText(E.getText("TIMELINE_REPLY")+" ("+this.getReplyCount()+")")}else if(this._list&&this._list.getItems().length>0){this._objects.getReplyLink().setText(E.getText("TIMELINE_REPLY")+" ("+this._list.getItems().length+")")}this._objects.getSocialBar().removeAllContent();if(this._callParentFn("getEnableSocial")){this._objects.getSocialBar().addContent(this._objects.getReplyLink())}this._actionList=this.getCustomAction();function t(t,i){e.fireCustomActionClicked({value:i.value,key:i.key,linkObj:this})}for(var i=0;i<this._actionList.length;i++){var s=this._actionList[i].getKey();var o=this._actionList[i].getValue();var n=new r({text:o,tooltip:s});n.addStyleClass("sapSuiteUiCommonsTimelineItemActionLink");n.attachPress({value:o,key:s},t);this._objects.getSocialBar().addContent(n)}};S.prototype._encodeHTMLAndLineBreak=function(e){return _(e).replace(/&#xa;/g,"<br>")};S.prototype._getUserPictureControl=function(){var e=this.getId()+"-userPictureControl",t=this.getUserPicture(),i=this.getIconInitials(),s=this.getIconDisplayShape(),r=this.getIconSize();if(!t){return null}this._objects.register("userPictureControl",function(){var o=new I({id:e,src:t,initials:i,displayShape:s,displaySize:r,tooltip:E.getText("TIMELINE_USER_PICTURE")});return o});return this._objects.getUserPictureControl()};S.prototype._getUserNameLinkControl=function(){var e=this;if(this.getUserNameClickable()){this._objects.register("userNameLink",function(){var t=new r(e.getId()+"-userNameLink",{text:e.getUserName(),press:function(t){e.fireUserNameClicked({uiElement:this})}});t.addStyleClass("sapUiSelectable");return t});return this._objects.getUserNameLink()}};S.prototype.onAfterRendering=function(){this._expanded=false;this._callParentFn("_itemRendered")};S.prototype._registerControls=function(){var e=this;this._objects.register("infoText",new i(this.getId()+"-infoText",{maxLines:1,width:"100%"}));this._objects.register("infoBar",new s(this.getId()+"-infoBar",{id:this.getId()+"-customMessageInfoBar",content:[this._objects.getInfoText()],design:C.Info,visible:false}));this._objects.register("replyLink",function(){var t=new r(e.getId()+"-replyLink",{text:E.getText("TIMELINE_REPLY"),press:[e._openReplyDialog,e]});t.addStyleClass("sapSuiteUiCommonsTimelineItemActionLink");return t});this._objects.register("socialBar",function(){var t=new s(e.getId()+"-socialBar",{});t.data("sap-ui-fastnavgroup",null);return t});this._objects.register("replyInputArea",new o(this.getId()+"-replyInputArea",{height:"4rem",width:"100%"}));this._objects.register("replyPop",function(){return new n(e.getId()+"-replyPop",{initialFocus:e._objects.getReplyInputArea(),title:E.getText("TIMELINE_REPLIES"),placement:x.Vertical,footer:new s({content:[new a,new l(e.getId()+"-replyButton",{text:E.getText("TIMELINE_REPLY"),press:function(){e._replyPost();e._objects.getReplyPop().close()}})]}),contentHeight:"15rem",contentWidth:"20rem"})})};S.prototype.exit=function(){this._objects.destroyAll()};S.prototype.getDateTimeWithoutStringParse=function(){var e=this.getProperty("dateTime");return c.parseDate(e,false)||""};S.prototype.setCustomReply=function(e){if(e){this._customReply=true;this.setAggregation("customReply",e,true)}else{this._customReply=false}return this};S.prototype.setReplyList=function(t){if(t===null){return this}this.setAggregation("replyList",t,true);var i=this;this.getReplyList().attachUpdateFinished(function(t){var s=i._objects.getReplyInputArea().getDomRef("inner");if(s){e(s.id).focus()}});return this};S.prototype.getDateTime=function(){var e=this.getProperty("dateTime");e=c.parseDate(e);if(typeof e==="string"&&this instanceof sap.suite.ui.commons.TimelineItem&&this.getBinding("dateTime")){var t=this.getBinding("dateTime").getValue();if(t instanceof Date){return t}else{return c.parseDate(t)}}else{return e}};S.prototype.onkeyup=function(e){if(e.which==T.ENTER||e.which==T.SPACE){if(m(this.$("outline").get(0),e.target)){if(this._isGroupHeader){this._performExpandCollapse(this._groupID)}}}};return S});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/TimelineItemRenderer",["./library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/format/DateFormat","sap/ui/core/Icon","sap/base/security/encodeXML","sap/base/security/encodeCSS","sap/ui/core/InvisibleText"],function(e,i,t,a,d,s,l){"use strict";var n=e.TimelineAlignment;var o={};o.apiVersion=2;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),m=24*60*60*1e3;o.render=function(e,i){this._getTimelineItemElement(i).getRenderer().render(e)};o._getTimelineItemElement=function(e){if(e._orientation==="V"){return this._getVerticalTimelineItemElement(e)}else{return this._getHorizontalTimelineItemElement(e)}};o._getFormatedDateTime=function(e,i){i=i||{};var a=i.resBundle||r,d=i.dateFormat||t.getDateInstance({style:"short"}),s=i.timeFormat||t.getTimeInstance({style:"short"}),l=e.getDateTimeWithoutStringParse(),n,o,C,p;if(!(l instanceof Date)||isNaN(l.getTime())){return l}n=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate());o=new Date;o=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate());C=Math.floor((o-n)/m);switch(C){case 0:p=a.getText("TIMELINE_TODAY");break;case 1:p=a.getText("TIMELINE_YESTERDAY");break;default:p=d.format(l)}return p+" "+a.getText("TIMELINE_AT")+" "+s.format(l)};o._getHorizontalTimelineItemElement=function(e){var t=e._placementLine==="top",a=t?"sapSuiteUiCommonsTimelineItemHTop":"sapSuiteUiCommonsTimelineItemHBottom",l=e.getText()==="GroupHeader",n=e._groupID,o,r;if(l){return this._getGroupHeaderElement(e)}var m=new i("li"),C=new i("div"),p=new i("div"),u=new i("div"),I=new i("div"),T=new i("div"),S=new i("div"),g=this._getTimelineItemShell(e);if(n){m.setAttribute("groupid",e._groupID)}if(e._isFirstGroupEvenItem){m.setAttribute("firstgroupevenitem",e._isFirstGroupEvenItem)}m.addControlData(e);m.addClass("sapSuiteUiCommonsTimelineItemLiWrapperV");m.addClass(d(a));C.addClass("sapSuiteUiCommonsTimelineItemWrapperH sapSuiteUiCommonsTimelineItemBaseLength");m.addChild(C);p.addClass("sapSuiteUiCommonsTimelineItemBubbleSpacer");C.addChild(p);u.addClass("sapSuiteUiCommonsTimelineItemBubble");p.addChild(u);I.addClass("sapSuiteUiCommonsTimelineItemOutline");I.setId(e.getId()+"-outline");I.setAttribute("tabindex","0");this._addAccessibilityTags(I,e);T.addClass("sapSuiteUiCommonsTimelineItemBox");I.addChild(T);S.addClass("sapSuiteUiCommonsTimelineItemArrow");if(t){u.addChild(I);u.addChild(S)}else{u.addChild(S);u.addChild(I)}if(!e._callParentFn("_isGrouped")&&e._callParentFn("getEnableDoubleSided")&&e._index===1){r=e.getParent();o="margin-left";if(r&&r._bRtlMode){o="margin-right"}m.addStyle(s(o),"100px")}T.addChild(g);if(e._isGroupCollapsed()){m.addStyle("display","none")}return m};o._getGroupHeaderElement=function(e){var t=new i("li"),s=new i("div"),l=new i("div"),o=new i("div"),r=new i("div"),m=new i("div"),C=new i("span"),p=new i("div"),u=new i("div"),I=new i("div"),T=e._orientation==="V"?l:o,S=new i("div"),g=new i("div"),h=new i("div");var c=e._isGroupCollapsed(),_=e._callParentFn("getShowIcons"),U;if(e._groupID){t.setAttribute("groupid",e._groupID)}if(e._isLastGroup){t.addClass("sapSuiteUiCommonsTimelineLastItem")}t.addControlData(e);t.addClass("sapSuiteUiCommonsTimelineGroupHeader");t.addChild(s);s.addChild(l);s.addClass("sapSuiteUiCommonsTimelineGroupHeaderDirectChild");l.addClass("sapSuiteUiCommonsTimelineGroupHeaderMainWrapper");l.setId(e.getId()+"-outline");l.setAttribute("tabindex","0");this._addAccessibilityTags(l,e,true);l.setAttribute("data-sap-ui-fastnavgroup",true);l.addChild(o);t.addChild(I);t.setAttribute("nodeType","GroupHeader");r.addClass("sapSuiteUiCommonsTimelineGroupHeaderSpanWrapper");if(e._orientation==="V"){t.addClass(e._position===n.Left?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight");t.setAttribute("role","treeitem");t.setAttribute("aria-expanded",c?false:true);t.setAttribute("aria-level",1)}else{t.setAttribute("role","presentation")}o.addClass("sapSuiteUiCommonsTimelineGroupHeaderWrapper");o.addClass("sapSuiteUiCommonsTimelineGroupHeaderPointer");T.addChild(m);o.addChild(u);o.addChild(r);t.addClass(c?"sapSuiteUiCommonsTimelineGroupCollapsed":"sapSuiteUiCommonsTimelineGroupExpanded");u.addClass("sapSuiteUiCommonsTimelineGroupHeaderIconWrapper");U=e._getCorrectGroupIcon();e._objects.register("groupCollapseIcon",function(){var i=new a(e.getId()+"-groupCollapseIcon",{src:U,decorative:true});i.addStyleClass("sapSuiteUiCommonsTimelineGroupHeaderPointer");i.setParent(e);return i});u.addChild(e._objects.getGroupCollapseIcon());m.addClass("sapSuiteUiCommonsTimelineItemArrow");I.addClass("sapSuiteUiCommonsTimelineGroupHeaderLineWrapper");p.addClass("sapSuiteUiCommonsTimelineGroupHeaderLine");I.addChild(p);r.addChild(C);C.addClass("sapSuiteUiCommonsTimelineGroupHeaderSpan");C.addChildEscaped(" "+e.getTitle());if(e._orientation==="V"){t.addChild(S);g.addChild(e._getLineIcon());S.addChild(g);g.addClass("sapSuiteUiCommonsTimelineItemBarIconWrapperV");S.addClass("sapSuiteUiCommonsTimelineGroupHeaderBarWrapper");if(!e._isGroupCollapsed()){S.addStyle("display","none")}h.addClass("sapSuiteUiCommonsTimelineItemBarV");if(!_){h.addClass("sapSuiteUiCommonsTimelineItemBarNoIcon")}S.addChild(h);if(e._additionalBarClass){h.addClass(d(e._additionalBarClass))}}return t};o._getVerticalTimelineItemElement=function(e){var t=new i("li"),a=new i("div"),s=new i("div"),l=new i("div"),o=new i("div"),r=new i("div"),m=new i("div"),C=new i("div"),p=new i("div"),u=new i("div"),I=new i("div"),T,S=new i("ul");var g=e._callParentFn("getShowIcons"),h=e._groupID,c=e.getText()==="GroupHeader",_=e._getStatusColorClass();if(c){return this._getGroupHeaderElement(e)}if(h){t.setAttribute("groupID",h);t.setAttribute("aria-level",2)}else{t.setAttribute("role","presentation")}t.addControlData(e);t.addClass("sapSuiteUiCommonsTimelineItem");t.setAttribute("aria-labelledby",e.getAriaLabelledBy().join(" "),true);if(e._isLast){t.addClass("sapSuiteUiCommonsTimelineLastItem")}a.addClass(c?"sapSuiteUiCommonsTimelineItemWrapperGrp":"sapSuiteUiCommonsTimelineItemWrapperV");t.addChild(a);a.addClass(e._position===n.Left?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight");a.addChild(o);a.addChild(s);s.addClass("sapSuiteUiCommonsTimelineItemBarWrapperV");l.addClass("sapSuiteUiCommonsTimelineItemBarIconWrapperV");if(_){l.addClass(d(_))}else{l.addClass("sapSuiteUiCommonsTimelineNoStatus")}if(g){s.addChild(l);l.addChild(e._getLineIcon("",h))}else{I.addChild(u);I.addClass("sapSuiteUiCommonsTimelineItemNoIconWrapper");u.addClass("sapSuiteUiCommonsTimelineItemNoIcon");s.addChild(I);if(_){u.addClass(d(_))}r.addClass("sapSuiteUiCommonsTimelineItemBarNoIcon")}r.addClass("sapSuiteUiCommonsTimelineItemBarV");s.addChild(r);if(e._additionalBarClass){r.addClass(d(e._additionalBarClass))}o.addClass("sapSuiteUiCommonsTimelineItemBubble");p.addClass("sapSuiteUiCommonsTimelineItemArrow");o.addChild(p);o.addChild(C);C.addClass("sapSuiteUiCommonsTimelineItemOutline");C.setId(e.getId()+"-outline");C.setAttribute("tabindex","0");this._addAccessibilityTags(C,e);m.addClass("sapSuiteUiCommonsTimelineItemBox");C.addChild(m);T=this._getTimelineItemShell(e);m.addChild(T);if(e._isGroupCollapsed()){S.addStyle("display","none")}if(h){S.addClass("sapSuiteUiCommonsTimelineItemUlWrapper");S.addChild(t);return S}return t};o._getTimelineItemShell=function(e){var t=new i("div"),a=new i("div"),d=new i("div"),s=new i("span"),l,n,o=new i("span"),r=new i("div"),m=new i("div"),C=new i("div"),p=new i("span"),u=new i("div"),I=new i("span"),T=new i("div"),S;var g=e.getEmbeddedControl();t.setId(e.getId()+"-shell");t.addClass("sapSuiteUiCommonsTimelineItemShell");t.addChild(e._objects.getInfoBar());t.addChild(a);a.addClass("sapSuiteUiCommonsTimelineItemHeaderWrapper");l=e._getUserPictureControl();if(l){l.addStyleClass("sapSuiteUiCommonsTimelineItemUserPicture");a.addChild(l)}d.setId(e.getId()+"-header");d.addClass("sapSuiteUiCommonsTimelineItemHeader");d.addClass("sapSuiteUiCommonsTimelineItemTextLineClamp");s.setId(e.getId()+"-username");s.addClass("sapSuiteUiCommonsTimelineItemShellUser");d.addChild(s);n=e._getUserNameLinkControl();if(n){s.addChild(n)}else{s.addChildEscaped(e.getUserName());s.addClass("sapUiSelectable")}a.addChild(d);o.addClass("sapSuiteUiCommonsTimelineItemShellHdr");o.addClass("sapUiSelectable");o.addChildEscaped(" "+e.getTitle());d.addChild(o);r.addClass("sapSuiteUiCommonsTimelineItemShellDateTime");r.addClass("sapUiSelectable");r.addChildEscaped(this._getFormatedDateTime(e));d.addChild(r);m.addClass("sapSuiteUiCommonsTimelineItemShellBody");t.addChild(m);if(g!==null){m.addChild(g)}else if(e.getText()){C.addChild(p);C.addClass("sapSuiteUiCommonsTimelineItemTextWrapper");p.setId(e.getId()+"-realtext");p.addClass("sapUiSelectable");m.addChild(C);S=e._checkTextIsExpandable();if(S){I.setId(e.getId()+"-threeDots");I.addClass("sapMFeedListItemTextString");I.addChildEscaped(" ");C.addChild(I);p.addChildEscaped(e._getCollapsedText(),true);I.addChildEscaped("... ");C.setAttribute("expandable",true)}else{p.addChildEscaped(e.getText(),true);u.addStyle("display","none")}m.addChild(u);u.addClass("sapSuiteUiCommonsTimelineItemShowMore");u.addChild(e._getButtonExpandCollapse())}if(e.getParent()&&e.getParent()._aFilterList&&(e._callParentFn("getEnableSocial")||e.getCustomAction().length>0)){T.addClass("sapSuiteUiCommonsTimelineItemShellBottom");T.addChild(e._objects.getSocialBar());t.addChild(T)}return t};o._addAccessibilityTags=function(e,i,t){var a;e.setAttribute("role","option");if(i.getStatus()){var d=new l;d.setText("status "+i.getStatus());d.toStatic();e.setAttribute("aria-describedby",d.getId(),true)}if(typeof i._index==="number"){e.setAttribute("aria-posinset",i._index+1);e.setAttribute("aria-setsize",i._callParentFn("_getItemsCount"))}e.setAttribute("aria-live","polite");if(t){e.setAttribute("aria-expanded",!i._isGroupCollapsed());if(!i._isGroupCollapsed()){a=r.getText("TIMELINE_ACCESSIBILITY_GROUP_HEADER")+": "+i.getTitle()+" "+r.getText("TIMELINE_ACCESSIBILITY_GROUP_EXPAND")}else{a=r.getText("TIMELINE_ACCESSIBILITY_GROUP_HEADER")+": "+i.getTitle()+" "+r.getText("TIMELINE_ACCESSIBILITY_GROUP_COLLAPSE")}e.setAttribute("aria-label",a,true)}};return o},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/TimelineNavigator",["sap/ui/thirdparty/jquery","sap/ui/core/delegate/ItemNavigation","sap/base/assert","sap/ui/dom/containsOrEquals","sap/ui/events/KeyCodes"],function(t,e,i,s,o){"use strict";function n(t,e){var i=t.length-e.length;return i>=0&&t.lastIndexOf(e)===i}var a=e.extend("sap.suite.ui.commons.TimelineNavigator",{constructor:function(t,i,s,o){e.apply(this,arguments);this.setDisabledModifiers({sapnext:["alt"],sapprevious:["alt"]});this.setCycling(false);this._aRows=o;this.iActiveTabIndex=0;this.iTabIndex=0;this.bRefocusOnNextUpdate=false;this.oLastFocused=null}});a.prototype.updateReferences=function(t,e,i){this.oDomRef=t;this.setItemDomRefs(e);this._aRows=i;if(this.bRefocusOnNextUpdate){this._refocusItem();this.bRefocusOnNextUpdate=false}this.setBeforeAfterTabIndex()};a.prototype.refocusOnNextUpdate=function(){this.bRefocusOnNextUpdate=true};a.prototype._refocusItem=function(){var e=this.iFocusedIndex;if(e<0){return}while(!t(this.aItemDomRefs[e]).is(":visible")){e++;if(e>=this.aItemDomRefs.length){e=0}if(e===this.iFocusedIndex){break}}setTimeout(function(){if(this.aItemDomRefs){this.focusItem(e)}}.bind(this),0)};a.prototype.setItemDomRefs=function(e){i(Array.isArray(e),"aItemDomRefs must be an array of DOM elements");this.aItemDomRefs=e;if(this.iFocusedIndex>e.length-1){this.iFocusedIndex=e.length-1}for(var s=0;s<this.aItemDomRefs.length;s++){if(this.aItemDomRefs[s]){var o=t(this.aItemDomRefs[s]);if(s==this.iFocusedIndex&&!o.data("sap.INRoot")){o.attr("tabIndex",this.iActiveTabIndex)}else if(o.attr("tabindex")=="0"){o.attr("tabIndex",this.iTabIndex)}o.data("sap.INItem",true);o.data("sap.InNavArea",true);if(o.data("sap.INRoot")&&s!=this.iFocusedIndex){o.data("sap.INRoot").setNestedItemsTabindex()}}}return this};a.prototype.setItemsTabindex=function(){for(var e=0;e<this.aItemDomRefs.length;e++){if(this.aItemDomRefs[e]){var i=t(this.aItemDomRefs[e]);if(i.is(":sapFocusable")){if(e==this.iFocusedIndex&&!i.data("sap.INRoot")){i.attr("tabIndex",this.iActiveTabIndex)}else{i.attr("tabIndex",this.iTabIndex)}}}}return this};a.prototype.setBeforeAfterTabIndex=function(){if(this.oDomRef){var e=this.oDomRef.id+"-after";t(window.document.getElementById(e)).attr("tabindex",-1);e=this.oDomRef.id+"-before";t(window.document.getElementById(e)).attr("tabindex",-1);t(this.oDomRef).attr("tabindex",-1)}};a.prototype.setFocusedIndex=function(e){var i;if(this.aItemDomRefs.length<0){this.iFocusedIndex=-1;return this}if(e<0){e=0}if(e>this.aItemDomRefs.length-1){e=this.aItemDomRefs.length-1}if(this.iFocusedIndex!==-1&&this.aItemDomRefs.length>this.iFocusedIndex){t(this.aItemDomRefs[this.iFocusedIndex]).attr("tabIndex",this.iTabIndex);i=t(this.aItemDomRefs[this.iFocusedIndex]);if(i.data("sap.INRoot")&&e!=this.iFocusedIndex){t(i.data("sap.INRoot").aItemDomRefs[i.data("sap.INRoot").iFocusedIndex]).attr("tabIndex",this.iTabIndex)}}this.iFocusedIndex=e;var s=this.aItemDomRefs[this.iFocusedIndex];i=t(this.aItemDomRefs[this.iFocusedIndex]);if(!i.data("sap.INRoot")){t(s).attr("tabIndex",this.iActiveTabIndex)}return this};a.prototype._callParent=function(t,i){if(typeof e.prototype[t]==="function"){e.prototype[t].apply(this,i)}};a.prototype._onF7=function(t){if(!s(this.oDomRef,t.target)){return}var e=this.getFocusedIndex();if(e>=0){this.focusItem(e,t);t.preventDefault();t.stopPropagation()}};a.prototype.onsapspace=function(t){this.onsapenter(t)};a.prototype.onsapenter=function(e){var i,s;if(this._skipNavigation(e,false,true)){return}s=t(this.getFocusedDomRef());i=s.attr("id");if(n(i,"-outline")){if(s.hasClass("sapSuiteUiCommonsTimelineGroupHeaderMainWrapper")){i=i.substr(0,i.length-"outline".length)+"groupCollapseIcon";s.find("#"+i).keyup()}else{s.find("div[role='toolbar']").children().first().mousedown().mouseup().click();this.fireEvent("Enter",{domRef:s.get(0)})}e.preventDefault();e.stopPropagation()}};a.prototype.onsaphome=function(t){if(this.aItemDomRefs.length===0){return}if(this._skipNavigation(t,false,false)){return}this._callParent("onsaphome",arguments)};a.prototype.onkeydown=function(t){this._callParent("onkeydown",arguments);if(t.keyCode===o.F7){this._onF7(t)}};a.prototype.onmousedown=function(e){var i=e.target;var o=function(e,i){var s=false;var o=t(e);while(!o.is(":sapFocusable")&&o.get(0)!=i){o=o.parent()}if(o.get(0)!=i){s=true}return s};if(s(this.oDomRef,i)){for(var n=0;n<this.aItemDomRefs.length;n++){var a=this.aItemDomRefs[n];if(s(a,i)){if(a===i||!o(i,a)){this.focusItem(n,e)}return}}this._bMouseDownHappened=true;setTimeout(function(){this._bMouseDownHappened=false}.bind(this),20)}};a.prototype.onsapnext=function(e){var i,s=true,n,a,r;if(!this._aRows){this._callParent("onsapnext",arguments);return}if(this._skipNavigation(e,true,false)){return}e.preventDefault();e.stopPropagation();if(this.getFocusedIndex()<0){return}n=this._findPosition(this.iFocusedIndex);if(n===null){throw new Error("TimelineNavigation cannot obtain a position of focused item and hance it cannot senect next.")}a=Object.assign({},n);do{if(e.keyCode===o.ARROW_DOWN){a.iY++;if(a.iY>=this._aRows.length){if(a.iX+1>=this._aRows[this._aRows.length-1].length){return}a.iY=0;a.iX++}}else{a.iX++;if(a.iX>=this._aRows[a.iY].length){if(a.iY+1>=this._aRows.length){return}a.iX=0;a.iY++}}if(a.iX===n.iX&&a.iY===n.iY){if(s){s=false}else{return}}r=this._aRows[a.iY][a.iX]}while(!r||!t(r).is(":sapFocusable"));i=this._findIndex(a);this.focusItem(i,e)};a.prototype.onsapprevious=function(e){var i,s=true,n,a,r;if(!this._aRows){this._callParent("onsapprevious",arguments);return}if(this._skipNavigation(e,true,false)){return}e.preventDefault();e.stopPropagation();if(this.getFocusedIndex()<0){return}n=this._findPosition(this.iFocusedIndex);if(n===null){throw new Error("TimelineNavigation cannot obtain a position of focused item and hance it cannot senect next.")}a=Object.assign({},n);do{if(e.keyCode===o.ARROW_UP){a.iY--;if(a.iY<0){if(a.iX<=0){return}a.iY=this._aRows.length-1;a.iX--}}else{a.iX--;if(a.iX<0){if(a.iY<=0){return}a.iX=this._aRows[a.iY].length-1;a.iY--}}if(a.iX===n.iX&&a.iY===n.iY){if(s){s=false}else{return}}r=this._aRows[a.iY][a.iX]}while(!r||!t(r).is(":sapFocusable"));i=this._findIndex(a);this.focusItem(i,e)};a.prototype._isInDomRefs=function(t){return this.aItemDomRefs.indexOf(t)>-1};a.prototype._isInTimeline=function(t){while(t){if(this._isInDomRefs(t)){return true}t=t.parentElement}return false};a.prototype._hasTabbableChildren=function(t){if(t&&t.tabIndex>=0){return true}var e=this;if(t&&t.childElementCount>0){t.childNodes.forEach(function(t){return e._hasTabbableChildren(t)})}return false};a.prototype._isLastChildInTimeline=function(t){return this._isInTimeline(t.target)&&!this._hasTabbableChildren(t.target)};a.prototype.onsaptabnext=function(e){if(e.target.id&&this._isLastChildInTimeline(e)){var i=this.oDomRef.id+"-after";t(window.document.getElementById(i)).focus()}};a.prototype.onsaptabprevious=function(e){if(this._isInDomRefs(e.target)){var i=this.oDomRef.id+"-before";t(window.document.getElementById(i)).focus()}};a.prototype.onfocusin=function(e){if(this._isInTimeline(e.target)){this.oLastFocused=e.target}if(!e.relatedTarget||!this._isInTimeline(e.relatedTarget)){if(this._isInTimeline(e.target)&&this.oLastFocused&&this.oLastFocused!==e.target){t(this.oLastFocused).focus()}}};a.prototype._findPosition=function(t){var e,i,s=this.aItemDomRefs[t];for(i=0;i<this._aRows.length;i++){for(e=0;e<this._aRows[i].length;e++){if(s===this._aRows[i][e]){return{iX:e,iY:i}}}}return null};a.prototype._findIndex=function(t){var e=this._aRows[t.iY][t.iX],i;for(i=0;i<this.aItemDomRefs.length;i++){if(e===this.aItemDomRefs[i]){return i}}return null};a.prototype._skipNavigation=function(e,i,o){return!s(this.oDomRef,e.target)||this.getFocusedIndex()<0&&o||this.aItemDomRefs&&Array.prototype.indexOf.call(this.aItemDomRefs,e.target)===-1||t(this.oDomRef).data("sap.InNavArea")&&i};return a});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/TimelineRenderManager",["sap/ui/thirdparty/jquery","./library","sap/m/Text","sap/ui/core/Icon","sap/m/ViewSettingsDialog","sap/ui/core/ResizeHandler","sap/ui/core/Item","sap/m/ToolbarSpacer","sap/m/SearchField","sap/m/OverflowToolbar","sap/m/Select","sap/m/RangeSlider","sap/m/Label","sap/m/Panel","sap/m/FlexBox","sap/m/OverflowToolbarButton","sap/m/MessageStrip","sap/m/ViewSettingsFilterItem","sap/m/ViewSettingsCustomItem","sap/m/OverflowToolbarLayoutData","sap/m/library","sap/m/MessageToast","sap/ui/core/InvisibleText","sap/m/SliderTooltip","sap/suite/ui/commons/TimelineRenderManagerTimestamp","sap/suite/ui/commons/util/StringSliderTooltip","sap/m/ResponsiveScale","sap/ui/core/library"],function(e,t,i,s,r,n,o,a,l,m,p,c,g,u,f,h,d,_,S,T,C,b,I,v,y,U,D,x){"use strict";var F=x.CSSSize;var w=C.ButtonType;var L=C.OverflowToolbarPriority;var R=t.TimelineGroupType;var E=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var M=680;var P=Object.freeze({UP:"UP",DOWN:"DOWN",NONE:"NONE"});function H(e,t,i){e.removeClass(t).addClass(i)}function V(e,t){return parseInt(e.css(t).replace("px",""),10)}var j={extendTimeline:function(t){t.prototype._initControls=function(){this._setupMessageStrip();this._setupFilterDialog();this._setupHeaderToolbar();this._setupAccessibilityItems()};t.prototype._registerResizeListener=function(){var t=this.$().parent().get(0);if(t){this.oResizeListener=n.register(t,e.proxy(this._performResizeChanges,this))}};t.prototype._deregisterResizeListener=function(){if(this.oResizeListener){n.deregister(this.oResizeListener)}};t.prototype._performUiChanges=function(e){this._deregisterResizeListener();if(!this.getDomRef()){return}if(this._isVertical()){this._performUiChangesV(e)}else{this._performUiChangesH()}this._setupScrollers();this._startItemNavigation();this._registerResizeListener()};t.prototype._performDoubleSidedChangesLi=function(e,t){var i=e.children().first(),s=this._isLeftAlignment()?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight";if(this._renderDblSided){if(e.hasClass("sapSuiteUiCommonsTimelineItem")){e.removeClass("sapSuiteUiCommonsTimelineItem").addClass(t?"sapSuiteUiCommonsTimelineItemOdd":"sapSuiteUiCommonsTimelineItemEven");if(!t){H(i,"sapSuiteUiCommonsTimelineItemWrapperVLeft","sapSuiteUiCommonsTimelineItemWrapperVRight")}else{H(i,"sapSuiteUiCommonsTimelineItemWrapperVRight","sapSuiteUiCommonsTimelineItemWrapperVLeft")}}}else{e.removeClass("sapSuiteUiCommonsTimelineItemOdd").removeClass("sapSuiteUiCommonsTimelineItemEven").addClass("sapSuiteUiCommonsTimelineItem");i.removeClass("sapSuiteUiCommonsTimelineItemWrapperVLeft").removeClass("sapSuiteUiCommonsTimelineItemWrapperVRight").addClass(s)}};t.prototype._performDoubleSidedChanges=function(){var t=this.$(),i=t.find(".sapSuiteUiCommonsTimelineItemUlWrapper").not(".sapSuiteUiCommonsTimelineShowMoreWrapper"),s=t.find(".sapSuiteUiCommonsTimelineScrollV .sapSuiteUiCommonsTimelineGroupHeader"),r;if(this._renderDblSided){this._$content.addClass("sapSuiteUiCommonsTimelineDblSided");s.addClass("sapSuiteUiCommonsTimelineGroupHeaderDblSided");s.addClass("sapSuiteUiCommonsTimelineItemWrapperVLeft").removeClass("sapSuiteUiCommonsTimelineItemWrapperVRight")}else{this._$content.removeClass("sapSuiteUiCommonsTimelineDblSided");s.removeClass("sapSuiteUiCommonsTimelineGroupHeaderDblSided sapSuiteUiCommonsTimelineItemWrapperVLeft");s.addClass(this._isLeftAlignment()?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight")}for(var n=0;n<i.length;n++){var o=e(i[n]),a=o.find("> li").not(".sapSuiteUiCommonsTimelineGroupHeader");a.eq(1).css("margin-top",this._renderDblSided?"40px":"auto");for(var l=0;l<a.length;l++){r=e(a[l]);this._performDoubleSidedChangesLi(r,l%2===0)}}t.find(".sapSuiteUiCommonsTimelineItemBarV").css("height","");t.find(".sapSuiteUiCommonsTimelineItem").css("margin-bottom","")};t.prototype._performUiChangesH=function(){var t=this.$(),i,s;var r=function(e){return t.width()-(e.position().left+e.outerWidth())};if(this.getEnableDoubleSided()&&this._isGrouped()){s=t.find(".sapSuiteUiCommonsTimelineHorizontalBottomLine ul");t.find("[firstgroupevenitem = true]:visible").each(function(t,n){var o=function(e){return e+"-"+(this._bRtlMode?"right":"left")}.bind(this),a=e("#"+n.id+"-line"),l=this._bRtlMode?r(a):a.position().left,m=30,p=e(n),c=V(s,o("padding")),g,u;if(t===0){g=l-m-c}else{i=p.prevAll(".sapSuiteUiCommonsTimelineItemLiWrapperV:visible:first");u=this._bRtlMode?r(i):i.position().left+V(i,o("margin"));g=l-m-(u+i.outerWidth())}p.css(o("margin"),g+"px")}.bind(this))}if(!this.getEnableScroll()){t.find(".sapSuiteUiCommonsTimelineContentsH").css("overflow-x","hidden")}this._calculateTextHeight()};t.prototype._performUiChangesV=function(e){var t=this.$(),i=t.outerWidth()+50;if(this.getEnableDoubleSided()){this._renderDblSided=i>=M;if(this._renderDblSided!==this._lastStateDblSided||e){this._performDoubleSidedChanges()}this._lastStateDblSided=this._renderDblSided}this._calculateTextHeight();this._calculateHeightV()};t.prototype._calculateHeightV=function(){var t=this.$(),i=this.$("headerBar").outerHeight()||0,s=this.$("filterMessage").outerHeight()||0,r=this.$("messageStrip").outerHeight()||0,n=r+s+i,o=function(t,i){var s,r,n,o,a,l,m,p=t.length,c=this.getShowIcons()?".sapSuiteUiCommonsTimelineItemBarIconWrapperV:visible":".sapSuiteUiCommonsTimelineItemNoIcon:visible",g=i.length>0?i.find(c+", .sapSuiteUiCommonsTimelineItemBarIconWrapperV:visible").eq(0):e(),u=8;for(var f=0;f<p;f++){s=e(t[f+1]);r=e(t[f]);n=f<p-1?s.find(c):g;a=r.find(c);if(n.length>0&&a.length>0){l=n.offset().top;m=a.offset().top+a.height();o=r.find(".sapSuiteUiCommonsTimelineItemBarV");u=8;o.height(l-m-u)}}},a=function(t){var i,s,r,n,o,a=40,l=100,m=function(){var e=V(r,"margin-top")+r.position().top+r.height()-i.position().top;s.css("margin-bottom",e+a+"px")};for(var p=2;p<t.length;p++){i=e(t[p]);s=e(t[p-1]);r=e(t[p-2]);n=this._bRtlMode?!i.hasClass("sapSuiteUiCommonsTimelineItemOdd"):i.hasClass("sapSuiteUiCommonsTimelineItemOdd");o=i.position().left;if(!n&&o<l||n&&o>l){m()}else{var c=i.position().top-s.position().top,g=V(r,"margin-bottom");if(c<a){r.css("margin-bottom",g+a-c+"px")}}}},l=function(){var e=5,i=t.position().top,s=t.parent().height(),r=V(this._$content,"padding-bottom"),o=V(this._$content,"padding-top"),a=s-i-n-o-r-e;this._$content.height(a)}.bind(this),m,p,c,g;if(this.getEnableScroll()){l()}if(this._renderDblSided){m=t.find(".sapSuiteUiCommonsTimelineItemUlWrapper");for(var u=0;u<m.length;u++){p=e(m[u]);c=e(m[u+1]);g=p.find(" > li:not(.sapSuiteUiCommonsTimelineGroupHeader):visible");g.css("margin-bottom","");a.call(this,g,p);o.call(this,g,c)}}};t.prototype._performResizeChanges=function(){this._performUiChanges()};t.prototype._calculateTextHeight=function(){var t=this.$(),i=this.getTextHeight(),s,r,n=function(i,s){t.find(".sapSuiteUiCommonsTimelineItemTextWrapper:visible").each(function(t,r){var n=e(r),o=n.children().first(),a=o.get(0).getClientRects(),l=0,m=0,p,c=-1e5,g=0,u=E.getText("TIMELINE_TEXT_SHOW_MORE"),f=n.attr("expanded");f=f=="true";n.height("auto");n.css("-webkit-line-clamp","");if(a&&a.length>0){p=a[0].top;g=0;for(var h=0;h<a.length-1;h++){if(c!==a[h].bottom){c=a[h].bottom;g++}if(i>0&&a[h+1].bottom-p>i){m=g;l=a[h].bottom-p;break}if(s>0&&g===s){l=a[h].bottom-a[0].top;m=s;break}}}if(!f){if(l>0){n.height(l);n.css("-webkit-line-clamp",m.toString());n.next().show()}else if(!n.attr("expandable")){n.next().hide()}}else{for(var d=h;d<a.length-1;d++){if(c!==a[d].bottom){c=a[d].bottom;g++}}if(s>0&&g<=s){n.attr("expanded",false);n.next().children()[0].text=u;n.next().hide()}}})},o=function(e){n(0,parseInt(e,10))},a=function(e){n(e,0)},l=function(){var i=t.find(".sapSuiteUiCommonsTimelineItemTextWrapper");i.css("height","");i.css("-webkit-line-clamp","");t.css("height","100%");var s=this._$content.height(),r=V(this._$content,"padding-bottom"),n=this._$content.get(0).scrollHeight,o=n-s-r,a={height:0},l,m=20;t.find(".sapSuiteUiCommonsTimelineItemTextWrapper").each(function(t,i){var s=e(i).height();if(s>a.height){a.height=s;a.item=e(this)}});if(a.item){l=a.item.parent().find(".sapSuiteUiCommonsTimelineItemShowMore:hidden").height();return a.height-o-l-m}return 1};if(i){if(this._useAutomaticHeight()){a(l.call(this))}else if(e.isNumeric(i)){o(i)}else{s=/([0-9]*\.?[0-9]+)(px)+/i;r=s.exec(i);if(r&&r.length>1){a(r[1])}else if(F.isValid(i)){t.find(".sapSuiteUiCommonsTimelineItemTextWrapper").height(i)}}}};t.prototype._fixScrollerPositionH=function(){var e=this.$(),t=e.find(".sapSuiteUiCommonsTimelineHorizontalMiddleLine"),i=e.find(".sapSuiteUiCommonsTimelineHorizontalScroller"),s,r=this._$content.position().top;if(t.get(0)){s=t.position().top;e.find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").css("top",s-5+"px");i.css("top",r+"px");i.height(this._$content.outerHeight()-15)}};t.prototype._setupScrollers=function(){var t=this.$(),i=450,s="rgba(0, 0, 0, 0)",r,n,o,a,l,m,p,c,g,u,f,h,d,_=function(t){var i=s;t.parents().each(function(t,r){var n=e(r).css("background-color"),o=e(r).css("background-image");if(o!=="none"){i=s;return}if(n!==s&&n!=="transparent"){i=n}});return i};if(this._scrollingFadeout()){r=this._isVertical()?t.height():t.width();if(r<i){t.find(".sapSuiteUiCommonsTimelineVerticalScroller",".sapSuiteUiCommonsTimelineHorizontalScroller").hide();this._scrollersSet=false;return}if(!this._scrollersSet){n=_(this.$());if(n&&n!==s){o=n.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);if(o&&o.length>=4){a=parseInt(o[1],10);l=parseInt(o[2],10);m=parseInt(o[3],10);p="rgba("+a+","+l+","+m+", 0)";g="rgba("+a+","+l+","+m+", 0.7)";c="rgba("+a+","+l+","+m+", 1)";u=t.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller, .sapSuiteUiCommonsTimelineTopScroller ");f=t.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller, .sapSuiteUiCommonsTimelineBottomScroller");h=this._isVertical()?"top":"left";d=this._isVertical()?"bottom":"right";u.css("background-image","linear-gradient(to "+h+", "+p+", "+c+")");f.css("background-image","linear-gradient(to "+d+", "+p+", "+c+")");u.css("background-image","-webkit-linear-gradient("+d+", "+p+", "+g+" 30%,"+c+")");f.css("background-image","-webkit-linear-gradient("+h+", "+p+", "+g+" 30%,"+c+")");this._scrollersSet=true;if(this.getContent().length>0){if(!this._isVertical()&&this._$content.get(0).scrollWidth>this._$content.outerWidth()||this._isVertical()&&this._$content.get(0).scrollHeight>this._$content.outerHeight()){f.show()}}}}else{t.find(".sapSuiteUiCommonsTimelineHorizontalScroller").hide()}}if(!this._isVertical()){this._fixScrollerPositionH()}}};t.prototype._setupScrollEvent=function(){var t=this.$(),i=t.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper, .sapSuiteUiCommonsTimelineTopScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper"),s=t.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper, .sapSuiteUiCommonsTimelineBottomScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper"),r=t.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller, .sapSuiteUiCommonsTimelineTopScroller"),n=t.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller, .sapSuiteUiCommonsTimelineBottomScroller"),o=this._$content,a=this;if(a._lazyLoading()||a._scrollingFadeout()){o.on("scroll",function(t){var o=e(t.currentTarget),l=o.get(0).scrollLeft,m=o.get(0).scrollTop,p=false,c=200,g=5,u=false,f,h,d,_,S;if(a._isVertical()){f=o.outerHeight();h=o.get(0).scrollHeight;u=m+f>h-c;p=m+f>=h-g}else{d=o.width();_=o.get(0).scrollWidth;u=l+d>_-c;p=l+d>=_-g-185}if(a._lazyLoading()&&a._scrollMoreEvent){if(u&&!a._isMaxed()){a._scrollMoreEvent=false;a._loadMore()}}if(a._scrollersSet){if(l>50||m>50){r.show()}else{r.hide();a._manualScrolling=false}if(p){n.hide()}else{n.show()}var T;if(a._isVertical()){T=o.get(0).scrollTop;S=T>a._lastScrollPosition.y?s:i;a._lastScrollPosition.y=T}else{T=o.get(0).scrollLeft;S=T>a._lastScrollPosition.x?s:i;a._lastScrollPosition.x=T}S.addClass("sapSuiteUiCommonsTimelineScrolling");clearTimeout(e.data(this,"scrollTimer"));e.data(this,"scrollTimer",setTimeout(function(){i.removeClass("sapSuiteUiCommonsTimelineScrolling");s.removeClass("sapSuiteUiCommonsTimelineScrolling")},350))}});this.$().find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").on("mousedown",function(t){var i=90,s=e(this).hasClass("sapSuiteUiCommonsTimelineScrollerIconWrapperLeft")||e(this).hasClass("sapSuiteUiCommonsTimelineScrollerIconWrapperTop")?-i:i;a._manualScrolling=true;a._performScroll(s)});this.$().find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").on("mouseup",function(){a._manualScrolling=false}).on("mouseout",function(){a._manualScrolling=false})}if(this.getEnableScroll()&&!a._isVertical()){this._$content.on("wheel",function(e){if(e.originalEvent.deltaX){return}var t=e.originalEvent.deltaY,i=30;if(t<i&&t>i*-1){t=t>0?i:i*-1}this.scrollLeft+=t*2});t.find(".sapSuiteUiCommonsTimelineHorizontalScroller, .sapSuiteUiCommonsTimelineVerticalScroller").on("wheel",function(e){var t=e.originalEvent.deltaY;if(a._isVertical()){a._$content.get(0).scrollTop+=t*2}else{a._$content.get(0).scrollLeft+=t*2}})}};t.prototype._setupMessageStrip=function(){var e=this;this._objects.register("messageStrip",function(){return new d(e.getId()+"-messageStrip",{close:function(){e.setCustomMessage("");e.fireCustomMessageClosed()},showCloseButton:true})});this._objects.register("filterMessageText",function(){return new i(e.getId()+"-filterMessageText",{})});this._objects.register("filterMessage",function(){var t=e._objects.getFilterMessageText(),i,r;r=new s(e.getId()+"filterMessageIcon",{src:"sap-icon://decline",press:[e._clearFilter,e]});r.setTooltip(E.getText("TIMELINE_CLEAR_ICN_TOOLTIP"));i=new m(e.getId()+"-filterMessage",{design:"Info",content:[t,new a,r]});i.addStyleClass("sapSuiteUiCommonsTimelineFilterInfoBar");i.setHeight("auto");return i})};t.prototype._setMessageBars=function(e){var t=this._getFilterMessage();if(t){e.addChild(this._objects.getFilterMessage());this._objects.getFilterMessageText().setText(t)}};t.prototype._setupRangeFilterPage=function(){var e=this;this._rangeFilterType=null;this._objects.register("timestampFilterPicker",function(){return new y(e.getId(),{dateChanged:function(t){var i=t.getSource(),s=i.getStartDate()||e._minDate,r=i.getEndDate()||e._maxDate;e._filterDialogRangePage.setFilterCount(+(s!==e._minDate||r!==e._maxDate))}},undefined,E)});this._objects.register("timeFilterSelect",function(){var t=new p(e.getId()+"-timeFilterSelect",{ariaLabelledBy:e._objects.getRangeTypeLbl().getId(),change:function(t){e._rangeFilterType=t.getParameter("selectedItem").getProperty("key");e.toggleGroupTypeSelector(e._rangeFilterType);e._setRangeFilter()},items:[new o({text:E.getText("TIMELINE_YEAR"),key:R.Year}),new o({text:E.getText("TIMELINE_QUARTER"),key:R.Quarter}),new o({text:E.getText("TIMELINE_MONTH"),key:R.Month}),new o({text:E.getText("TIMELINE_DAY"),key:R.Day}),new o({text:E.getText("TIMELINE_CUSTOM_RANGE"),key:R.None})]});t.addStyleClass("sapSuiteUiCommonsTimelineRangeSelect");return t});this._objects.register("timeRangeSlider",function(){var t=function(t){if(typeof t==="string"){t=Number(t)}var i=e._fnAddDate(t);return e._formatGroupBy(i,e._rangeFilterType).title};var i=new D;i.getLabel=t;var s=new c(e.getId()+"-timeRangeSlider",{enableTickmarks:true,visible:false,showAdvancedTooltip:true,step:1,change:function(t){var i=s.getMin(),r=s.getMax(),n=s.getRange();e._filterDialogRangePage.setFilterCount(+(n[0]!==i||n[1]!==r))},customTooltips:[new U({mapFunction:t}),new U({mapFunction:t,fetchValue2:true})],scale:i});s.addStyleClass("sapSuiteUiCommonsTimelineRangeFilter");return s});this._objects.register("rangeTypeLbl",function(){return new g(e.getId()+"-rangeTypeLbl",{text:E.getText("TIMELINE_GROUP_BY_PERIOD")+":"})});this._objects.register("rangeTypePanel",function(){var t=new u(e.getId()+"-rangeTypePanel",{content:[e._objects.getRangeTypeLbl(),e._objects.getTimeFilterSelect()]});t.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanel");t.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanelShadowed");return t});this._objects.register("rangePanel",function(){return new f(e.getId()+"rangePanel",{direction:"Column",items:[e._objects.getRangeTypePanel(),e._objects.getTimeRangeSlider(),e._objects.getTimestampFilterPicker().getTimestampPanelRadio(),e._objects.getTimestampFilterPicker().getTimestampPanelPicker()]})})};t.prototype._setupFilterFirstPage=function(e){if(e){e.removeAllAggregation("filterItems");if(this.getShowItemFilter()){e.addAggregation("filterItems",new _({key:"items",text:this._getFilterTitle()}))}if(this.getShowTimeFilter()){this._filterDialogRangePage=new S({key:"range",text:E.getText("TIMELINE_RANGE_SELECTION"),customControl:[this._objects.getRangePanel()]});e.addAggregation("filterItems",this._filterDialogRangePage)}}};t.prototype._setupFilterDialog=function(){var t=this;this._setupRangeFilterPage();this._objects.register("filterContent",function(){var i,s,n=function(i){if(!t._filterState.data){t._setFilterList();i.removeAllItems();t._aFilterList.forEach(function(s){var r=e.grep(t._currentFilterKeys,function(e){return s.key===e.key}).length>0;i.addItem(new _({key:s.key,text:s.text,selected:r}))})}t._filterState.data=true},o=function(){b.show(E.getText("TIMELINE_NO_LIMIT_DATA"))},a=function(){if(!t._filterState.range){l.setBusy(true);t._getTimeFilterData().then(function(){l.setBusy(false);if(!t._minDate||!t._maxDate||(!(t._minDate instanceof Date)||!(t._maxDate instanceof Date))){o();return}if(!t._rangeFilterType){t._rangeFilterType=t._calculateRangeTypeFilter()}if(!t._startDate&&!t._endDate){t._setRangeFilter()}else{var e=t._objects.getTimeRangeSlider(),r=t._fnDateDiff(t._rangeFilterType),n=e.getMin(),a=e.getMax();if(a-n!==r){t._setRangeFilter()}i=t._fnDateDiff(t._rangeFilterType,t._minDate,t._startDate);s=t._fnDateDiff(t._rangeFilterType,t._minDate,t._endDate);e.setRange([i,s])}t.toggleGroupTypeSelector(t._rangeFilterType);t._objects.getTimeFilterSelect().setSelectedKey(t._rangeFilterType)}).catch(function(){l.setBusy(false);o()});t._filterState.range=true}},l=new r(t.getId()+"-filterContent",{confirm:function(e){var i=e.getParameter("filterItems"),s,r,n,o,a;t._currentFilterKeys=i.map(function(e){return{key:e.getProperty("key"),text:e.getProperty("text")}});t._startDate=null;t._endDate=null;if(t._objects.getTimestampFilterPicker().getVisible()){var l=t._objects.getTimestampFilterPicker().getStartDate()||t._minDate,m=t._objects.getTimestampFilterPicker().getEndDate()||t._maxDate;if(l!==t._minDate||m!==t._maxDate){t._startDate=l;t._endDate=m;a=true}}else{s=t._objects.getTimeRangeSlider();o=s.getRange();r=s.getMin();n=s.getMax();if(o[0]!==r||o[1]!==n){t._startDate=t._fnAddDate(Math.min.apply(null,o),P.DOWN);t._endDate=t._fnAddDate(Math.max.apply(null,o),P.UP);a=true}}t._filterData(a)},resetFilters:function(e){var i=t._objects.getTimeRangeSlider();i.setValue(i.getMin());i.setValue2(i.getMax());t._filterDialogRangePage.setFilterCount(0);t._objects.getTimestampFilterPicker().clearDates()},filterDetailPageOpened:function(e){var t=e.getParameter("parentFilterItem").getProperty("key");if(t==="items"){n(e.getParameter("parentFilterItem"))}if(t==="range"){a()}}});t._setupFilterFirstPage(l);return l})};t.prototype._setupHeaderToolbar=function(){var e=this,t=function(t){e._objects.register(t.name,function(){var i=new h(e.getId()+"-"+t.name,{type:w.Transparent,icon:t.icon,tooltip:t.tooltip,press:t.fnPress});i.setLayoutData(new T({priority:t.priority}));return i})};t({name:"filterIcon",icon:"sap-icon://add-filter",tooltip:E.getText("TIMELINE_FILTER_BY"),fnPress:[e._openFilterDialog,e],priority:L.NeverOverflow,visible:e.getShowItemFilter()||e.getShowTimeFilter()});t({name:"sortIcon",icon:"sap-icon://arrow-bottom",tooltip:E.getText("TIMELINE_SORT"),fnPress:[e._sortClick,e],priority:L.High,visible:e.getSort()&&e.getShowSort()});var i=new a;this._objects.register("searchFieldLabel",function(){return new I(e.getId()+"-searchFieldLabel",{text:E.getText("TIMELINE_ACCESSIBILITY_SEARCH")})});this._objects.register("searchField",function(){var t=new l(e.getId()+"-searchField",{width:"14rem",ariaLabelledBy:e._objects.getSearchFieldLabel().getId(),search:function(t){e._search(t.getSource().getValue())},visible:e.getShowSearch()});t.setLayoutData(new T({priority:L.Low}));return t});this._objects.register("headerBar",function(){var t=[i,e._objects.getSearchFieldLabel(),e._objects.getSearchField(),e._objects.getSortIcon(),e._objects.getFilterIcon()];var s=new m(e.getId()+"-headerBar",{content:t,visible:e.getShowHeaderBar()});s.addStyleClass("sapSuiteUiCommonsTimelineHeaderBar");s.setParent(e);return s})};t.prototype._setupAccessibilityItems=function(){var e=this;this._objects.register("accessibilityTitle",function(){return new I(e.getId()+"-accessibilityTitle",{text:E.getText("TIMELINE_ACCESSIBILITY_TITLE")})})};t.prototype.toggleGroupTypeSelector=function(e){var t=e!==R.None;this._objects.getTimestampFilterPicker().setVisible(!t);this._objects.getTimeRangeSlider().setVisible(t)}}};return j},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/TimelineRenderManagerTimestamp",["sap/ui/base/ManagedObject","sap/m/RadioButtonGroup","sap/m/RadioButton","sap/m/Panel","sap/m/DateTimePicker","sap/m/Label"],function(e,t,i,a,n,s){"use strict";var r={RANGE:0,START:1,END:2};var o=e.extend("sap.suite.ui.commons.TimelineRenderManagerTimestamp",{constructor:function(t,i,a,n){var s;var r;this.getText=n.getText.bind(n);this.getTimestampPanelPicker=function(){if(!s){s=this._createTimestampPanelPicker()}return s};this.getTimestampPanelRadio=function(){if(!r){r=this._createTimestampPanelRadio()}return r};e.call(this,t,i,a);this.setVisible(false)},metadata:{events:{dateChanged:{}}}});o.prototype._createTimestampPanelPicker=function(){var e=this.getId()+"-timestamp-panel-picker";var t;var i=new s({text:this.getText("TIMELINE_FROM")+":"});var r=new s({text:this.getText("TIMELINE_TO")+":"});var o=new a({id:e,content:[i,new s({text:this.getText("TIMELINE_NOW"),visible:false}),new n({width:"auto",ariaLabelledBy:[i],change:this._handlerTimePickerRange.bind(this)}),r,new s({text:this.getText("TIMELINE_NOW"),visible:false}),new n({width:"auto",ariaLabelledBy:[r],change:this._handlerTimePickerRange.bind(this)})]});o.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanel");t=o.getContent();t[1].addStyleClass("sapSuiteUiCommonsTimelineRangeLabelNow");t[2].addStyleClass("sapSuiteUiCommonsTimelineRangeDatePicker");t[4].addStyleClass("sapSuiteUiCommonsTimelineRangeLabelNow");t[5].addStyleClass("sapSuiteUiCommonsTimelineRangeDatePicker");return o};o.prototype._createTimestampPanelRadio=function(){var e=this.getId()+"-timestamp-panel-radio";return new a({id:e,content:[new t({columns:3,select:this.handlerSelectRadioButton.bind(this),buttons:[new i({id:e+"-range-of-dates",text:this.getText("TIMELINE_TIMESTAMP_RANGE_OF_DATES")}),new i({id:e+"-starting-date",text:this.getText("TIMELINE_TIMESTAMP_STARTING_DATE")}),new i({id:e+"-ending-date",text:this.getText("TIMELINE_TIMESTAMP_ENDING_DATE")})]})]})};o.prototype.resizeDialog=function(e){e.getFilterContent()._getDialog().setContentWidth("50em")};o.prototype.setVisible=function(e){this.getTimestampPanelPicker().setVisible(e);this.getTimestampPanelRadio().setVisible(e)};o.prototype.setPickerView=function(e,t){t.getContent()[1].setVisible(e===r.END);t.getContent()[2].setVisible(e===r.START||e===r.RANGE);t.getContent()[4].setVisible(e===r.START);t.getContent()[5].setVisible(e===r.END||e===r.RANGE)};o.prototype.handlerSelectRadioButton=function(e){this.setPickerView(e.getParameter("selectedIndex"),this.getTimestampPanelPicker())};o.prototype.getVisible=function(){return this.getTimestampPanelPicker().getVisible()&&this.getTimestampPanelRadio().getVisible()};o.prototype.getStartDate=function(){var e;var t=this.getTimestampPanelPicker().getContent()[2];if(t.getVisible()){e=t.getDateValue()}else{e=function(){return new Date}}return e};o.prototype.clearDates=function(){var e=this.getTimestampPanelPicker().getContent()[2],t=this.getTimestampPanelPicker().getContent()[5];e.setDateValue();t.setDateValue()};o.prototype.getEndDate=function(){var e;var t=this.getTimestampPanelPicker().getContent()[5];if(t.getVisible()){e=t.getDateValue()}else{e=function(){return new Date}}return e};o.prototype.destroy=function(){this.getTimestampPanelPicker().destroy();this.getTimestampPanelRadio().destroy();e.prototype.destroy.call(this)};o.prototype._handlerTimePickerRange=function(e){var t=this.getTimestampPanelPicker().getContent()[2],i=this.getTimestampPanelPicker().getContent()[5];var a=e.getSource();var n=a.getDateValue();if(a===t){if(i.getDateValue()<n){i.setInitialFocusedDateValue(n)}i.setMinDate(n)}else if(a===i){if(t.getDateValue()>n){t.setInitialFocusedDateValue(n)}t.setMaxDate(n)}};return o});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/TimelineRenderer",["./library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Icon","sap/m/Button","sap/base/security/encodeXML"],function(e,i,t,s,a){"use strict";var d=e.TimelineAxisOrientation,o=e.TimelineScrollingFadeout;var l={},n=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");l.apiVersion=2;l.render=function(e,i){var t=this._getHtmlModel(i);t.getRenderer().render(e)};l._getHtmlModel=function(e){if(e.getAxisOrientation()===d.Horizontal){return this._getHorizontalTimelineElement(e)}else{return this._getVerticalTimelineElement(e)}};l._getScrollerIcon=function(e,s,d){var o=new i("div"),l="scrollerIcon"+d,n="getScrollerIcon"+d;o.addClass(a("sapSuiteUiCommonsTimelineScrollerIconWrapper sapSuiteUiCommonsTimelineScrollerIconWrapper"+d));e._objects.register(l,function(){return new t({src:"sap-icon://step"})});o.addChild(e._objects[n]());return o};l._setWidthAndHeight=function(e,i){var t=e.getHeight(),s=e.getWidth();if(t&&!e._isVertical()){i.addStyle("height",t)}if(s&&(e._isVertical()||e.getEnableScroll())){i.addStyle("width",s)}};l._getHorizontalTimelineElement=function(e){var t=e.getEnableDoubleSided(),s=e._isLeftAlignment(),a=e._outputItem,d=0,l=true,n,r,m,u,C,p,c=e._isMaxed(),g,S=function(){var e=new i("ul");e.setAttribute("role","listbox");return e};var h=new i("div"),T=new i("div"),_=new i("div"),f=new i("div"),I=new i("div"),U=S(),v=new i("div"),H=S(),b=new i("div"),w=S(),B=new i("div"),A=new i("div"),G=new i("div"),E=new i("div");h.addControlData(e);h.addClass("sapSuiteUiCommonsTimelineH");if(!e.getEnableScroll()){h.addClass("sapSuiteUiCommonsTimelineNoScroll")}if(e._useAutomaticHeight()){h.addClass("sapSuiteUiCommonsTimelineAutomaticLineHeight")}this._addAccessibilityTags(h,e);this._setWidthAndHeight(e,h);if(t){h.addClass("sapSuiteUiCommonsTimelineDblSidedH")}else{h.addClass(s?"sapSuiteUiCommonsTimelineRight":"sapSuiteUiCommonsTimelineLeft")}if(e._isGrouped()){h.addClass("sapSuiteUiCommonsTimelineGrouped")}h.addChild(e._objects.getHeaderBar());e._setMessageBars(h);G.setId(e.getId()+"-contentH-before");h.addChild(G);T.setId(e.getId()+"-contentH");T.addClass("sapSuiteUiCommonsTimelineContentsH");h.addChild(T);E.setId(e.getId()+"-contentH-after");h.addChild(E);_.setId(e.getId()+"-scrollH");_.addClass("sapSuiteUiCommonsTimelineScrollH");T.addChild(_);I.addClass("sapSuiteUiCommonsTimelineHorizontalTopLine");v.addClass("sapSuiteUiCommonsTimelineHorizontalMiddleLine");v.addChild(H);b.addClass("sapSuiteUiCommonsTimelineHorizontalBottomLine");if(t||s){I.addChild(U)}if(t||!s){b.addChild(w)}U.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");w.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");H.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");if(a.length>0){if(e._scrollingFadeout()){h.addChild(B);h.addChild(A);B.addClass("sapSuiteUiCommonsTimelineHorizontalLeftScroller sapSuiteUiCommonsTimelineHorizontalScroller");A.addClass("sapSuiteUiCommonsTimelineHorizontalRightScroller sapSuiteUiCommonsTimelineHorizontalScroller");if(e.getScrollingFadeout()===o.AreaWithButtons){B.addChild(this._getScrollerIcon(e,"_scollerIconLeft","Left"));A.addChild(this._getScrollerIcon(e,"_scollerIconRight","Right"))}}f.addClass("sapSuiteUiCommonsTimelineHorizontalScrollContainer");_.addChild(f);f.addChild(I);f.addChild(v);f.addChild(b);H.addChild(this._getFirstHorizontalDelimiterLine(a[0]));for(var M=0;M<a.length;M++){g=c;n=a[M];r=s?"top":"bottom";m=d%2;u=n.getText()==="GroupHeader";C=a[M+1];p=s?U:w;if(t){p=U;if(!u){p=m?w:U}r=m?"bottom":"top"}if(u){d=0;l=true;r="top";if(g){for(var L=M+1;L<a.length;L++){if(a[L]._isGroupHeader){g=false;break}}}}else if(m){n._isFirstGroupEvenItem=l;l=false}n._index=M;n._orientation="H";n._placementLine=r;p.addChild(n);var x=this._getHorizontalDelimiterLine(e,n,d,C,c&&!C,g);if(x){H.addChild(x)}if(!u){d++}}}else{_.addChild(this._getEmptyTimelineElement(e))}if(e._showMore){H.addChild(this._getShowMoreElement(e))}return h};l._getFirstHorizontalDelimiterLine=function(e){var t=new i("li"),s=new i("div"),a=new i("div"),d=new i("div"),o=e._isGroupHeader;d.addClass("sapSuiteUiCommonsTimelineItemBarH");a.addClass("sapSuiteUiCommonsTimelineItemBarWrapper");a.addChild(d);s.addChild(a);s.addClass("sapSuiteUiCommonsTimelineItemBarDivWrapper");t.addChild(s);t.addClass("sapSuiteUiCommonsTimelineItemFirstBar");if(o){t.addClass(e._isGroupCollapsed()?"sapSuiteUiCommonsTimelineGroupCollapsed":"sapSuiteUiCommonsTimelineGroupExpanded")}return t};l._getHorizontalDelimiterLine=function(e,t,s,d,o,l){var n=s%2,r=t.getText()==="GroupHeader",m=r?"sapSuiteUiCommonsTimelineItemGroupHeaderH":"sapSuiteUiCommonsTimelineItemBaseLength",u="sapSuiteUiCommonsTimelineItemBarH",C=d!=null&&d._isGroupHeader,p=d===null,c=t._getStatusColorClass(),g=new i("li"),S=new i("div"),h=new i("div"),T=new i("div"),_=new i("div"),f=new i("div"),I=new i("div");g.setId(t.getId()+"-line");if(r&&!t._isGroupCollapsed()){g.addStyle("display","none")}if(t._groupID){g.setAttribute("groupid",t._groupID)}if(r){u="sapSuiteUiCommonsTimelineItemGroupHeaderBar";g.setAttribute("nodeType","GroupHeaderBar")}else if(e.getEnableDoubleSided()){if((!C||n)&&!p){m=n?"sapSuiteUiCommonsTimelineItemHOdd":"sapSuiteUiCommonsTimelineItemHEven"}}if(!r&&o||r&&l){g.addClass("sapSuiteUiCommonsTimelineLastItem")}g.addClass(a(m));T.addClass("sapSuiteUiCommonsTimelineItemBarWrapper");h.addClass("sapSuiteUiCommonsTimelineItemBarH");h.addClass(a(u));S.addStyle("display","flex");S.addStyle("height","100%");if(e.getShowIcons()||r){S.addChild(_);if(!r){if(c){_.addClass(a(c))}else{_.addClass("sapSuiteUiCommonsTimelineNoStatus")}_.addClass("sapSuiteUiCommonsTimelineItemIconWrapper")}else{_.addClass("sapSuiteUiCommonsTimelineItemGroupBarIconWrapper")}_.addChild(t._getLineIcon())}else{I.addChild(f);I.addClass("sapSuiteUiCommonsTimelineItemNoIconWrapper");f.addClass("sapSuiteUiCommonsTimelineItemNoIcon");if(c){f.addClass(a(c))}else{f.addClass("sapSuiteUiCommonsTimelineNoStatus")}S.addClass("sapSuiteUiCommonsTimelineItemWrapper");S.addChild(I)}S.addChild(T);T.addChild(h);if(e._collapsedGroups[t._groupID]){if(r){g.addClass("sapSuiteUiCommonsTimelineItemGroupCollapsedBar")}else{g.addStyle("display","none")}}g.addChild(S);return g};l._getVerticalTimelineElement=function(e){var t=new i("div"),s=new i("div"),a=new i("div"),d=new i("div"),l=new i("div"),n=new i("div"),r=new i("div"),m=new i("div"),u=new i("div"),C,p,c,g,S,h,T=function(){var t=new i("ul");t.addClass("sapSuiteUiCommonsTimelineItemUlWrapper");t.setAttribute("role","listbox");t.setAttribute("aria-labelledby",e.getAriaLabelledBy().join(" "),true);return t};t.addControlData(e);t.addClass("sapSuiteUiCommonsTimeline");this._addAccessibilityTags(t,e);n.addClass("sapSuiteUiCommonsTimelineContentWrapper");if(e._isGrouped()){t.addClass("sapSuiteUiCommonsTimelineGrouped")}if(e._scrollingFadeout()){n.addChild(s);n.addChild(a);s.addClass("sapSuiteUiCommonsTimelineTopScroller sapSuiteUiCommonsTimelineVerticalScroller");a.addClass("sapSuiteUiCommonsTimelineBottomScroller sapSuiteUiCommonsTimelineVerticalScroller");if(e.getScrollingFadeout()===o.AreaWithButtons){s.addChild(this._getScrollerIcon(e,"_scollerIconTop","Top"));a.addChild(this._getScrollerIcon(e,"_scrollerIconBottom","Bottom"))}}this._setWidthAndHeight(e,t);t.addChild(e._objects.getHeaderBar());e._setMessageBars(t);if(e.getMessageStrip()!==null&&e.getMessageStrip()!==undefined&&e.getMessageStrip().getText()!==""){t.addChild(e._objects.getMessageStrip())}m.setId(e.getId()+"-content-before");m.setAttribute("tabindex",0);t.addChild(m);t.addChild(n);n.addChild(d);d.setId(e.getId()+"-content");d.setAttribute("data-sap-ui-fastnavgroup","true");d.addClass("sapSuiteUiCommonsTimelineContents");d.addClass("sapSuiteUiCommonsTimelineScrollV");d.addClass("sapSuiteUiCommonsTimelineScroll");u.setId(e.getId()+"-content-after");u.setAttribute("tabindex",0);t.addChild(u);d.addChild(l);l.setId(e.getId()+"-scroll");l.addClass("sapSuiteUiCommonsTimelineScroll");C=T();var _=e._outputItem,f=e._isMaxed();if(_.length>0){l.addChild(C);for(var I=0;I<_.length;I++){h=f;p=_[I];c=_[I+1];g=p._isGroupHeader;p._orientation="V";p._position=e.getAlignment();p._additionalBarClass="";p._index=I;p._isLast=f&&_.length-1===I;if(g){C.setAttribute("groupId",p._groupID)}if(g){for(var U=I+1;U<_.length;U++){S=_[U];if(S._isGroupHeader){if(!S._isGroupCollapsed()&&p._isGroupCollapsed()){p._additionalBarClass="sapSuiteUiCommonsTimelineGroupNextExpanded"}h=false;break}}}p._isLastGroup=h;if(c&&c._isGroupHeader&&!c._isGroupCollapsed()){p._additionalBarClass="sapSuiteUiCommonsTimelineGroupNextExpanded"}if(g&&I!=0){C=T();l.addChild(C)}if(g){C.setAttribute("role","tree")}C.addChild(p)}}else{l.addChild(this._getEmptyTimelineElement(e))}if(e._showMore){r.addClass("sapSuiteUiCommonsTimelineShowMoreWrapper");r.addChild(this._getShowMoreElement(e));l.addChild(r)}return t};l._getEmptyTimelineElement=function(e){var t=new i("div"),s=new i("span");t.addClass("sapSuiteUiCommonsTimelineNoTextWrapper");t.addChild(s);s.addChildEscaped(e.getNoDataText());return t};l._getShowMoreElement=function(e){var t=e._isVertical()?new i("div"):new i("li"),o="sapSuiteUiCommonsTimelineItemGetMoreButtonV",l="sap-icon://drill-down";if(e.getAxisOrientation()===d.Horizontal){l="sap-icon://process";o="sapSuiteUiCommonsTimelineItemGetMoreButtonH"}e._objects.register("moreButton",function(){var i=new s({icon:l,tooltip:n.getText("TIMELINE_MORE"),press:function(){e._loadMore()}});i.addEventDelegate({onAfterRendering:function(){this.$().attr("tabindex",-1)}},i);return i});t.addClass("sapSuiteUiCommonsTimelineItemGetMoreButton");t.addClass(a(o));t.addChild(e._objects.getMoreButton());return t};l._addAccessibilityTags=function(e,i){var t=[i._objects.getAccessibilityTitle().getId()];if(i._getFilterMessage()){t.push(i._objects.getFilterMessageText().getId())}e.setAttribute("role","presentation");e.addChild(i._objects.getAccessibilityTitle());e.setAttribute("aria-labelledby",t.join(" "),true);e.setAttribute("aria-live","assertive")};return l},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/Utils",[],function(){"use strict";var e={};e._setupMobileDraggable=function(e){if(sap.ui.getCore().isMobile()){var t=function(e,t){if(e.originalEvent.touches.length>1){return}e.preventDefault();var n=e.originalEvent.changedTouches[0],u=document.createEvent("MouseEvents");u.initMouseEvent(t,true,true,window,1,n.screenX,n.screenY,n.clientX,n.clientY,false,false,false,false,0,null);e.target.dispatchEvent(u)};var n=false;e.bind({touchstart:function(e){if(n){return}n=true;t(e,"mouseover");t(e,"mousemove");t(e,"mousedown")},touchmove:function(e){if(!n){return}t(e,"mousemove")},touchend:function(e){if(!n){return}t(e,"mouseup");t(e,"mouseout");t(e,"click");n=false}})}};return e},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/flexibility/Timeline.flexibility",["./changeHandler/PropertyChangeMapper","sap/base/Log"],function(e,r){"use strict";var n=Object.freeze({"-sortIcon":"showSort","-filterIcon":["showItemFilter","showTimeFilter"],"-searchField":"showSearch","-headerBar":"showHeaderBar"});function t(e){var t;for(t in n){if(typeof t=="string"&&t.length>0&&e.endsWith(t)){return n[t]}}r.fatal("Unkonw id of an inner component: "+e);return null}return{hideToolbarItem:new e(function(e){var r=e.removedElement.id;return t(r)},false),unhideToolbarItem:new e(function(e){var r=e.revealedElementId;return t(r)},true),hideControl:"default",unhideControl:"default",moveControls:"default"}},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/flexibility/changeHandler/PropertyChangeMapper",["sap/ui/base/Object","sap/ui/fl/changeHandler/PropertyChange","sap/base/Log"],function(e,t,n){var r=e.extend("sap.suite.ui.commons.flexibility.changeHandler.PropertyChangeMapper",{constructor:function(e,t){if(typeof e==="function"){this._fnProperty=e}else if(typeof e==="string"){this._fnProperty=function(){return e}}else{n.fatal("Incorrect type of property: "+typeof e)}if(typeof t==="function"){this._fnValue=t}else{this._fnValue=function(){return t}}}});r.prototype.applyChange=function(e,n,r){var o=e.getDefinition().content,a=o.property;if(Array.isArray(a)){a.forEach(function(a){o.property=a;t.applyChange(e,n,r)})}else{t.applyChange(e,n,r)}};r.prototype.completeChangeContent=function(e,n){var r=this._fnProperty(n),o=Object.assign(n,{content:{property:r,newValue:this._fnValue(r)}});t.completeChangeContent(e,o)};r.revertChange=function(e,n,r){var o=e.getDefinition().content,a=o.property;if(Array.isArray(a)){a.forEach(function(a){o.property=a;t.revertChange(e,n,r)})}else{t.revertChange(e,n,r)}};return r});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/CropCustomShapeHistoryItem",["./HistoryItem","sap/base/assert"],function(t,e){"use strict";var i=t.extend("sap.suite.ui.commons.imageeditor.CropCustomShapeHistoryItem",{constructor:function(i){t.apply(this,arguments);i=i||{};e(typeof i.x==="number","X must be a number.");e(typeof i.y==="number","Y must be a number.");e(typeof i.width==="number","Width must be a number.");e(typeof i.height==="number","Height value must be a number.");e(typeof i.oldWidth==="number","Old width value must be a number.");e(typeof i.oldHeight==="number","Old height value must be a number.");this._iX=i.x;this._iY=i.y;this._iWidth=i.width;this._iHeight=i.height;this._iOldWidth=i.oldWidth;this._iOldHeight=i.oldHeight}});i.prototype.getX=function(){return this._iX};i.prototype.getY=function(){return this._iY};i.prototype.getWidth=function(){return this._iWidth};i.prototype.getHeight=function(){return this._iHeight};i.prototype.getOldWidth=function(){return this._iOldWidth};i.prototype.getOldHeight=function(){return this._iOldHeight};i.prototype.compare=function(t){var e=["getWidth","getHeight"];return this._compare(t,e)};return i});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/CropEllipseHistoryItem",["./HistoryItem","sap/base/assert"],function(t,e){"use strict";var i=t.extend("sap.suite.ui.commons.imageeditor.CropEllipseHistoryItem",{constructor:function(i){t.apply(this,arguments);i=i||{};e(typeof i.x==="number","X must be a number.");e(typeof i.y==="number","Y must be a number.");e(typeof i.rx==="number","RX value must be a number.");e(typeof i.ry==="number","RY value must be a number.");e(typeof i.width==="number","Width must be a number.");e(typeof i.height==="number","Height value must be a number.");e(typeof i.oldWidth==="number","Old width value must be a number.");e(typeof i.oldHeight==="number","Old height value must be a number.");this._iX=i.x;this._iY=i.y;this._iRx=i.rx;this._iRy=i.ry;this._iWidth=i.width;this._iHeight=i.height;this._iOldWidth=i.oldWidth;this._iOldHeight=i.oldHeight}});i.prototype.getX=function(){return this._iX};i.prototype.getY=function(){return this._iY};i.prototype.getRx=function(){return this._iRx};i.prototype.getRy=function(){return this._iRy};i.prototype.getWidth=function(){return this._iWidth};i.prototype.getHeight=function(){return this._iHeight};i.prototype.getOldWidth=function(){return this._iOldWidth};i.prototype.getOldHeight=function(){return this._iOldHeight};i.prototype.compare=function(t){var e=["getWidth","getHeight"];return this._compare(t,e)};return i});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/CropRectangleHistoryItem",["./HistoryItem","sap/base/assert"],function(t,e){"use strict";var i=t.extend("sap.suite.ui.commons.imageeditor.CropRectangleHistoryItem",{constructor:function(i){t.apply(this,arguments);i=i||{};e(typeof i.x==="number","X must be a number.");e(typeof i.y==="number","Y must be a number.");e(typeof i.width==="number","Width must be a number.");e(typeof i.height==="number","Height value must be a number.");e(typeof i.oldWidth==="number","Old width value must be a number.");e(typeof i.oldHeight==="number","Old height value must be a number.");this._iX=i.x;this._iY=i.y;this._iWidth=i.width;this._iHeight=i.height;this._iOldWidth=i.oldWidth;this._iOldHeight=i.oldHeight}});i.prototype.getX=function(){return this._iX};i.prototype.getY=function(){return this._iY};i.prototype.getWidth=function(){return this._iWidth};i.prototype.getHeight=function(){return this._iHeight};i.prototype.getOldWidth=function(){return this._iOldWidth};i.prototype.getOldHeight=function(){return this._iOldHeight};i.prototype.compare=function(t){var e=["getWidth","getHeight"];return this._compare(t,e)};return i});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/CustomSizeItem",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.suite.ui.commons.imageeditor.CustomSizeItem",{metadata:{properties:{width:{type:"float",defaultValue:0},height:{type:"float",defaultValue:0},label:{type:"string",defaultValue:""},icon:{type:"sap.ui.core.URI",defaultValue:""},relative:{type:"boolean",defaultValue:false}}}});return t});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/FilterHistoryItem",["./HistoryItem","sap/base/assert"],function(t,e){"use strict";var i=t.extend("sap.suite.ui.commons.imageeditor.FilterHistoryItem",{constructor:function(i){t.apply(this,arguments);i=i||{};e(typeof i.type==="string","Filter type must be a string.");e(typeof i.value==="number","Filter value must be a number.");e(typeof i.unit==="string","Filter unit must be a string.");this._sType=i.type;this._iValue=i.value;this._sUnit=i.unit}});i.prototype.getType=function(){return this._sType};i.prototype.getValue=function(){return this._iValue};i.prototype.getUnit=function(){return this._sUnit};i.prototype.compare=function(t){return false};return i});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/FilterUtils",[],function(){"use strict";var a=function(){};a.grayscale=function(a,t){var d,n,r;for(var s=0;s<a.data.length;s+=4){d=a.data[s];n=a.data[s+1];r=a.data[s+2];a.data[s]=d*(.2126+.7874*(1-t))+n*(.7152-.7152*(1-t))+r*(.0722-.0722*(1-t));a.data[s+1]=d*(.2126-.2126*(1-t))+n*(.7152+.2848*(1-t))+r*(.0722-.0722*(1-t));a.data[s+2]=d*(.2126-.2126*(1-t))+n*(.7152-.7152*(1-t))+r*(.0722+.9278*(1-t))}};a.sepia=function(a,t){var d,n,r;for(var s=0;s<a.data.length;s+=4){d=a.data[s];n=a.data[s+1];r=a.data[s+2];a.data[s]=d*(.393+.607*(1-t))+n*(.769-.769*(1-t))+r*(.189-.189*(1-t));a.data[s+1]=d*(.349-.349*(1-t))+n*(.686+.314*(1-t))+r*(.168-.168*(1-t));a.data[s+2]=d*(.272-.272*(1-t))+n*(.534-.534*(1-t))+r*(.131+.869*(1-t))}};a.saturate=function(a,t){var d,n,r;for(var s=0;s<a.data.length;s+=4){d=a.data[s];n=a.data[s+1];r=a.data[s+2];a.data[s]=d*(.213+.787*t)+n*(.715-.715*t)+r*(.072-.072*t);a.data[s+1]=d*(.213-.213*t)+n*(.715+.285*t)+r*(.072-.072*t);a.data[s+2]=d*(.213-.213*t)+n*(.715-.715*t)+r*(.072+.928*t)}};a.invert=function(a,t){var d,n,r,s,i,o;for(var h=0;h<a.data.length;h+=4){d=a.data[h];n=a.data[h+1];r=a.data[h+2];s=255-d;i=255-n;o=255-r;a.data[h]=d-(d-s)*t;a.data[h+1]=n-(n-i)*t;a.data[h+2]=r-(r-o)*t}};a.brightness=function(a,t){var d,n,r;for(var s=0;s<a.data.length;s+=4){d=a.data[s];n=a.data[s+1];r=a.data[s+2];a.data[s]=d*t;a.data[s+1]=n*t;a.data[s+2]=r*t}};a.contrast=function(a,t){var d,n,r;for(var s=0;s<a.data.length;s+=4){d=a.data[s];n=a.data[s+1];r=a.data[s+2];a.data[s]=d*t+(-.5*t+.5)*255;a.data[s+1]=n*t+(-.5*t+.5)*255;a.data[s+2]=r*t+(-.5*t+.5)*255}};a.hueRotate=function(a,t){var d,n,r;for(var s=0;s<a.data.length;s+=4){d=a.data[s];n=a.data[s+1];r=a.data[s+2];a.data[s]=d*(.2126+Math.cos(t)*.7874-Math.sin(t)*.2126)+n*(.7152-Math.cos(t)*.7152-Math.sin(t)*.7152)+r*(.0722-Math.cos(t)*.0722+Math.sin(t)*.9278);a.data[s+1]=d*(.2126-Math.cos(t)*.2126+Math.sin(t)*.143)+n*(.7152+Math.cos(t)*.285+Math.sin(t)*.14)+r*(.0722-Math.cos(t)*.0722-Math.sin(t)*.283);a.data[s+2]=d*(.2126-Math.cos(t)*.2126-Math.sin(t)*.7874)+n*(.7152-Math.cos(t)*.7152+Math.sin(t)*.7152)+r*(.0722+Math.cos(t)*.9278+Math.sin(t)*.0722)}};return a},true);
sap.ui.predefine("sap/suite/ui/commons/imageeditor/FlipHistoryItem",["./HistoryItem","sap/base/assert"],function(t,o){"use strict";var e=t.extend("sap.suite.ui.commons.imageeditor.FlipHistoryItem",{constructor:function(e){t.apply(this,arguments);e=e||{};o(typeof e.vertical==="boolean","Vertical must be a boolean.");o(typeof e.horizontal==="boolean","Horizontal value must be a bolean.");this._bVertical=e.vertical;this._bHorizontal=e.horizontal}});e.prototype.getVertical=function(){return this._bVertical};e.prototype.getHorizontal=function(){return this._bHorizontal};e.prototype.compare=function(t){return false};return e});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/HistoryItem",["sap/ui/base/Object"],function(t){"use strict";var e=t.extend("sap.suite.ui.commons.imageeditor.HistoryItem",{metadata:{abstract:true}});e.prototype._isSameClass=function(t){return this.getMetadata().getName()===t.getMetadata().getName()};e.prototype._compare=function(t,e){var a=this;return this._isSameClass(t)&&e.reduce(function(e,i){return a[i]()===t[i]()},true)};return e});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/ImageEditor",["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/suite/ui/commons/library","sap/ui/core/library","sap/m/library","sap/base/Log","sap/ui/Device","sap/m/MessageToast","sap/ui/core/Icon","./ResizeHistoryItem","./RotateHistoryItem","./CropRectangleHistoryItem","./CropEllipseHistoryItem","./CropCustomShapeHistoryItem","./FilterHistoryItem","./FlipHistoryItem","./FilterUtils","sap/ui/core/util/File","sap/suite/ui/commons/Utils","./ImageEditorRenderer","sap/ui/thirdparty/jqueryui/jquery-ui-draggable","sap/ui/thirdparty/jqueryui/jquery-ui-resizable"],function(t,e,i,o,s,r,a,n,h,p,l,g,_,d,u,m,c,C,f){"use strict";var y=i.ImageEditorMode,I=i.ImageFormat,w=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var v=e.extend("sap.suite.ui.commons.imageeditor.ImageEditor",{metadata:{library:"sap.suite.ui.commons",properties:{src:{type:"any",defaultValue:""},customShapeSrc:{type:"any",defaultValue:""},mode:{type:"sap.suite.ui.commons.ImageEditorMode",defaultValue:y.Default},keepCropAspectRatio:{type:"boolean",defaultValue:true},keepResizeAspectRatio:{type:"boolean",defaultValue:true},scaleCropArea:{type:"boolean",defaultValue:false}},events:{loaded:{},error:{},customShapeLoaded:{},customShapeError:{},sizeChanged:{parameters:{width:{type:"int"},height:{type:"int"},originalWidth:{type:"int"},originalHeight:{type:"int"}}},cropAreaChanged:{parameters:{cropArea:{type:"object"},originalCropArea:{type:"object"}}},zoomChanged:{parameters:{zoom:{type:"int"}}},historyChanged:{history:{type:"sap.suite.ui.commons.imageeditor.HistoryItem[]"},index:{type:"int"}}}}});v.LIMITS=Object.freeze({WIDTH_MIN:1,WIDTH_MAX:8192,HEIGHT_MIN:1,HEIGHT_MAX:8192,MAX_CANVAS_SIZE:67108864,MAX_SAFARI_MOBILE_CANVAS_SIZE:16777216,ROTATION_MIN:-360,ROTATION_MAX:360,SEPIA_MIN:0,SEPIA_MAX:100,GRAYSCALE_MIN:0,GRAYSCALE_MAX:100,SATURATE_MIN:0,SATURATE_MAX:500,INVERT_MIN:0,INVERT_MAX:100,BRIGHTNESS_MIN:0,BRIGHTNESS_MAX:500,CONTRAST_MIN:0,CONTRAST_MAX:500,CROP_AREA_MIN:1});v.ZOOM_MILESTONES=[5,10,25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500];var S=Object.freeze({CROP_AREA_SHORTER_SIDE_OFFSET:.8,DEFAULT_ZOOM_MILESTONE:100});v.prototype.init=function(){this._oCanvas=document.createElement("canvas");this._initCanvas();this._initOrigImg();this._initCustomShapeImg();this._fZoom=S.DEFAULT_ZOOM_MILESTONE;this._oSavedImg=document.createElement("canvas");this._oSavedImg.width=0;this._oSavedImg.height=0};v.prototype._initOrigImg=function(){var t=this;this._oOrigImg=new Image;this._oOrigImg.crossOrigin="Anonymous";this._oOrigImg.onload=function(){t._bImageLoaded=true;t._drawImage(t._oOrigImg);t._storeCurrentImg();t._applyExifOrientation();if(t._isReady()){t._onAfterIsReady()}if(t.getCustomShapeLoaded()&&!a.browser.msie){t._renderCustomShapeMask()}t.fireLoaded()};this._oOrigImg.onerror=function(e){t.fireError()}};v.prototype._initCustomShapeImg=function(){var t=this;this._oCustomShapeImg=new Image;this._oCustomShapeImg.crossOrigin="Anonymous";this._oCustomShapeImg.onload=function(){t._bCustomShapeLoaded=true;t.$().addClass("sapSuiteUiCommonsImageEditorModeCropCustomShapeLoaded");t._renderCustomShapeMask();t.fireCustomShapeLoaded()};this._oCustomShapeImg.onerror=function(){t.fireCustomShapeError()}};v.prototype._getExifOrientation=function(t){var e=new FileReader,i,o,s,r,a,n,h,p,l,g={FIRST_CHECK:65496,SECOND_CHECK:65505,CORRECT_FORMAT_CHECK:1165519206,LITTLE_CHECK:18761,FOURTH_CHECK:65280,EXIF_CHECK:274,ERR_FILE_FORMAT:-2,OFFSET_STEP:2,OFFSET_STEP_MED:4,OFFSET_STEP_BIG:6};return new Promise(function(_){e.onload=function(t){o=t.target.result;s=new DataView(o);r=s.byteLength;i=2;l=0;try{if(s.getUint16(0,false)!=g.FIRST_CHECK){return}while(i<r){a=s.getUint16(i,false);i+=g.OFFSET_STEP;if(a==g.SECOND_CHECK){i+=g.OFFSET_STEP;if(s.getUint32(i,false)!=g.CORRECT_FORMAT_CHECK){return}i+=g.OFFSET_STEP_BIG;n=s.getUint16(i,false)==g.LITTLE_CHECK;i+=s.getUint32(i+g.OFFSET_STEP_MED,n);h=s.getUint16(i,n);i+=g.OFFSET_STEP;for(p=0;p<h;p++){if(s.getUint16(i+p*12,n)==g.EXIF_CHECK){return s.getUint16(i+p*12+8,n)}}}else if((a&g.FOURTH_CHECK)!=FOURTH_CHECK){break}else{i+=s.getUint16(i,false)}}}catch(t){return _(g.ERR_FILE_FORMAT)}};e.readAsArrayBuffer(t.slice(0,64*1024))})};v.prototype._handleExifOrientation=function(t){var e=this;this._getExifOrientation(t).then(function(t){switch(t){case 1:e._iExifRotation=0;break;case 2:e._iExifRotation=0;e._bExifFlip=true;break;case 3:e._iExifRotation=180;break;case 4:e._bExifFlip=true;e._iExifRotation=180;break;case 5:e._bExifFlip=true;e._iExifRotation=90;break;case 6:e._iExifRotation=90;break;case 7:e._bExifFlip=true;e._iExifRotation=-90;break;case 8:e._iExifRotation=-90;break;default:e._iExifRotation=0;break}e._applyExifOrientation()})};v.prototype._applyExifOrientation=function(){if(this.getLoaded()){if(this._iExifRotation){this._setRotation(this._iExifRotation);this._storeCurrentImg()}if(this._bExifFlip){this._flipHorizontal();this._storeCurrentImg()}}};v.prototype._renderCustomShapeMask=function(){var e=document.createElement("canvas"),i=e.getContext("2d"),o,s;this._oCustomShapeImg.width=500;this._oCustomShapeImg.height=this._oCustomShapeImg.naturalHeight*this._oCustomShapeImg.width/this._oCustomShapeImg.naturalWidth;t("body").prepend(this._oCustomShapeImg);o=this._oCustomShapeImg.clientWidth;s=this._oCustomShapeImg.clientHeight;t(this._oCustomShapeImg).remove();if(o>=s){e.width=this._oCanvas.width;e.height=s*(this._oCanvas.width/o)}else{e.height=this._oCanvas.height;e.width=o*(this._oCanvas.height/s)}this._oCustomShapeImg.width=e.width;this._oCustomShapeImg.height=e.height;i.drawImage(this._oCustomShapeImg,0,0,this._oCustomShapeImg.width,this._oCustomShapeImg.height);i.globalCompositeOperation="source-in";i.fillStyle="black";i.fillRect(0,0,e.width,e.height);this._sBlackCustomShapeUrl=e.toDataURL();if(this.$("overlayMaskCustomBlack")[0]){this.$("overlayMaskCustomBlack")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sBlackCustomShapeUrl)}i.fillStyle="white";i.fillRect(0,0,e.width,e.height);this._sWhiteCustomShapeUrl=e.toDataURL();if(this.$("overlayMaskCustomWhite")[0]){this.$("overlayMaskCustomWhite")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sWhiteCustomShapeUrl)}};v.prototype.onAfterRendering=function(){this._$Container=this.$("canvasInnerContainer");this._$Container.prepend(this._oCanvas);this._initContainer();this._initCropArea();if(this._isReady()){this._onAfterIsReady()}};v.prototype.setSrc=function(t){this.setProperty("src",t,true);var e=this,i,o;this._reset();if(typeof t==="string"){i=t;this._oOriginalBlob=this._fetchUrlAsBlob(i).then(function(t){e._handleExifOrientation(t);e._oOriginalBlob=t;e._sOriginalFileType=t.type});if(!i.startsWith("data:image")){this._sOriginalFileName=this._getFileNameFromUrl(i)}}else if(t instanceof Blob){o=window.URL;i=o.createObjectURL(t);o.revokeObjectURL(t);e._handleExifOrientation(t);this._oOriginalBlob=t;this._sOriginalFileType=t.type;if(t instanceof File){this._sOriginalFileName=t.name}}if(i){this._oOrigImg.src=i}else{this.fireLoaded()}return this};v.prototype.setScaleCropArea=function(t){this.setProperty("scaleCropArea",t,true);return this};v.prototype.setCustomShapeSrc=function(t){this.setProperty("customShapeSrc",t,true);var e=this,i,o;e._bCustomShapeLoaded=false;if(typeof t==="string"){if((a.browser.msie||a.browser.firefox)&&t.startsWith("data:image/svg+xml;base64,")){this._handleSvgString(atob(t.slice("data:image/svg+xml;base64,".length)))}else{i=t}}else if(t instanceof Blob){if(t instanceof File&&t.type==="image/svg+xml"){var s=new FileReader;s.onload=function(t){e._handleSvgString(t.target.result)};s.readAsText(t)}else{o=window.URL;i=o.createObjectURL(t);o.revokeObjectURL(t);this._setCustomShapeSrc(i)}}if(i){this._setCustomShapeSrc(i)}else if(!t){this._sBlackCustomShapeUrl="";this._sWhiteCustomShapeUrl="";if(this.$("overlayMaskCustomBlack")[0]){this.$("overlayMaskCustomBlack")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sBlackCustomShapeUrl)}if(this.$("overlayMaskCustomWhite")[0]){this.$("overlayMaskCustomWhite")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sWhiteCustomShapeUrl)}this.$().removeClass("sapSuiteUiCommonsImageEditorModeCropCustomShapeLoaded");this.fireCustomShapeLoaded()}return this};v.prototype._handleSvgString=function(t){var e,i;if(a.browser.msie){throw Error("SVG files cannot be used as shapes for custom crop in Internet Explorer. Please use a different image source or a different browser.")}var o=(new DOMParser).parseFromString(t,"image/svg+xml");if(o.documentElement.width.baseVal.value>0){o.documentElement.width.baseVal.valueAsString=o.documentElement.width.baseVal.value.toString()+"px"}if(o.documentElement.height.baseVal.value>0){o.documentElement.height.baseVal.valueAsString=o.documentElement.height.baseVal.value.toString()+"px"}i=(new XMLSerializer).serializeToString(o);e="data:image/svg+xml;base64,"+btoa(i);this._setCustomShapeSrc(e)};v.prototype._setCustomShapeSrc=function(t){this._oCustomShapeImg.src=t};v.prototype.setKeepCropAspectRatio=function(t){this.setProperty("keepCropAspectRatio",t,true);this._updateResizableCropAspectRatio();return this};v.prototype.setKeepResizeAspectRatio=function(t){this.setProperty("keepResizeAspectRatio",t,true);this._updateResizableResizeAspectRatio();return this};v.prototype.getLoaded=function(){return!!this.getSrc()&&this._bImageLoaded};v.prototype.getCustomShapeLoaded=function(){return!!this.getCustomShapeSrc()&&this._bCustomShapeLoaded};v.prototype.setSize=function(t,e,i){this._throwIfNotLoaded("setSize");var o,s,r;t=this._constraintValue(t,v.LIMITS.WIDTH_MIN,v.LIMITS.WIDTH_MAX);e=this._constraintValue(e,v.LIMITS.HEIGHT_MIN,v.LIMITS.HEIGHT_MAX);r=this._limitCanvasSize(t,e);t=r.width;e=r.height;this._cancelPreview();o=this.getWidth();s=this.getHeight();this._setCanvasSize(t,e);this._addHistory(new p({width:t,height:e,oldWidth:o,oldHeight:s}),i);return this};v.prototype.getWidth=function(){this._throwIfNotLoaded("getWidth");return this._getLastImg().width};v.prototype.getPreviewWidth=function(){this._throwIfNotLoaded("getPreviewWidth");return this._oCanvas.width};v.prototype.setWidth=function(t,e){this._throwIfNotLoaded("setWidth");var i=this.getHeight(),o=this.getWidth(),s=this.getPreviewHeight(),r;t=this._constraintValue(t,v.LIMITS.WIDTH_MIN,v.LIMITS.WIDTH_MAX);if(this.getKeepResizeAspectRatio()){s=Math.round(t*s/this.getPreviewWidth())}r=this._limitCanvasSize(t,s);t=r.width;s=r.height;this._cancelPreview();this._setCanvasSize(t,s);this._addHistory(new p({width:t,height:s,oldWidth:o,oldHeight:i}),e);return this};v.prototype.getHeight=function(){this._throwIfNotLoaded("getHeight");return this._getLastImg().height};v.prototype.getPreviewHeight=function(){this._throwIfNotLoaded("getPreviewHeight");return this._oCanvas.height};v.prototype.setHeight=function(t,e){this._throwIfNotLoaded("setHeight");var i=this.getWidth(),o=this.getHeight(),s=this.getPreviewWidth(),r;t=this._constraintValue(t,v.LIMITS.HEIGHT_MIN,v.LIMITS.HEIGHT_MAX);if(this.getKeepResizeAspectRatio()){s=Math.round(t*s/this.getPreviewHeight())}r=this._limitCanvasSize(s,t);s=r.width;t=r.height;this._cancelPreview();this._setCanvasSize(s,t);this._addHistory(new p({width:s,height:t,oldWidth:i,oldHeight:o}),e);return this};v.prototype.rotate=function(t,e){this._throwIfNotLoaded("rotate");t=this._constraintValue(t,v.LIMITS.ROTATION_MIN,v.LIMITS.ROTATION_MAX);this._cancelPreview();this._setRotation(t);this._addHistory(new l({degrees:t}),e);return this};v.prototype.flipVertical=function(t){this._throwIfNotLoaded("flipVertical");this._cancelPreview();this._flipVertical();this._addHistory(new m({vertical:true,horizontal:false}),t);return this};v.prototype.flipHorizontal=function(t){this._throwIfNotLoaded("flipHorizontal");this._cancelPreview();this._flipHorizontal();this._addHistory(new m({vertical:false,horizontal:true}),t);return this};v.prototype.flip=function(t,e,i){this._throwIfNotLoaded("flip");this._cancelPreview();this._flip(t,e);this._addHistory(new m({vertical:t,horizontal:e}),i);return this};v.prototype.applyVisibleCrop=function(t){this._throwIfNotReady("applyVisibleCrop");switch(this.getMode()){case y.CropRectangle:{this._applyRectangleCrop(t);break}case y.CropEllipse:{this._applyEllipseCrop(t);break}case y.CropCustomShape:{this._throwIfCustomShapeNotLoaded("applyVisibleCrop CropCustomShape");this._applyCustomShapeCrop(t);break}default:{r.warning("No cropping mode is selected, applyVisibleCrop does nothing");break}}};v.prototype.rectangleCrop=function(t,e,i,o,s){this._throwIfNotLoaded("rectangleCrop");var r=this.getWidth(),a=this.getHeight();this._cancelPreview();this._rectangleCrop(t,e,i,o);this._addHistory(new g({x:Math.round(t),y:Math.round(e),width:Math.round(i),height:Math.round(o),oldWidth:r,oldHeight:a}),s);this._limitCurrentCropArea()};v.prototype.ellipseCrop=function(t,e,i,o,s){this._throwIfNotLoaded("ellipseCrop");var r=this.getWidth(),a=this.getHeight();this._cancelPreview();this._ellipseCrop(t,e,i,o);this._addHistory(new _({x:Math.round(t),y:Math.round(e),rx:Math.round(i),ry:Math.round(o),width:Math.round(i*2),height:Math.round(o*2),oldWidth:r,oldHeight:a}),s);this._limitCurrentCropArea()};v.prototype.customShapeCrop=function(t,e,i,o,s){this._throwIfNotLoaded("customShapeCrop");this._throwIfCustomShapeNotLoaded("customShapeCrop");var r=this.getWidth(),a=this.getHeight();this._cancelPreview();this._customShapeCrop(t,e,i,o);this._addHistory(new d({x:Math.round(t),y:Math.round(e),width:Math.round(i),height:Math.round(o),oldWidth:r,oldHeight:a}),s);this._limitCurrentCropArea()};v.prototype.setCropArea=function(t,e,i,o){this._throwIfNotLoaded("setCropArea");var s=this._limitCropArea(t,e,i,o);this._setCropArea(s.x,s.y,s.width,s.height);return this};v.prototype.setCropAreaByRatio=function(t,e){this._throwIfNotLoaded("setCropAreaByRatio");var i=this._oCanvas.width/this._oCanvas.height,o=t/e,s,r,a,n,h;if(typeof t!=="number"||typeof e!=="number"){return this}if(i>=o){r=S.CROP_AREA_SHORTER_SIDE_OFFSET;s=this._oCanvas.height*r*o;s=100*s/this._oCanvas.width;r*=100;a=(100-s)/2;n=(100-r)/2}else{s=S.CROP_AREA_SHORTER_SIDE_OFFSET;r=this._oCanvas.width*s/o;r=100*r/this._oCanvas.height;s*=100;n=(100-r)/2;a=(100-s)/2}h=this._transposePercentToImageCoordsPx(a,n,s,r);this._setCropArea(h.x,h.y,h.width,h.height);return this};v.prototype.setCustomShapeCropAreaRatio=function(){this._throwIfNotLoaded("setCustomShapeCropAreaRatio");this._throwIfCustomShapeNotLoaded("setCustomShapeCropAreaRatio");this.setCropAreaByRatio(this._oCustomShapeImg.width,this._oCustomShapeImg.height);return this};v.prototype.setCropAreaBySize=function(t,e){this._throwIfNotLoaded("setCropAreaBySize");var i=this._limitCropArea(null,null,t,e);this._setCropArea(null,null,i.width,i.height);return this};v.prototype.getCropArea=function(){return this._oCropArea?t.extend({},this._oCropArea):null};v.prototype.zoom=function(t,e){this._setZoom(t,e);return this};v.prototype.zoomIn=function(t){this._zoomIn(t);return this};v.prototype.zoomOut=function(t){this._zoomOut(t);return this};v.prototype.zoomToFit=function(){this._throwIfNotReady("zoomToFit");this._zoomToFit();return this};v.prototype.getZoomLevel=function(){return this._fZoom};v.prototype.sepia=function(t,e){this._throwIfNotLoaded("sepia");this._constraintValue(t,v.LIMITS.SEPIA_MIN,v.LIMITS.SEPIA_MAX);this._cancelPreview();this._addHistory(new u({type:"sepia",value:t,unit:"%"}),e)};v.prototype.grayscale=function(t,e){this._throwIfNotLoaded("grayscale");this._constraintValue(t,v.LIMITS.GRAYSCALE_MIN,v.LIMITS.GRAYSCALE_MAX);this._cancelPreview();this._addHistory(new u({type:"grayscale",value:t,unit:"%"}),e)};v.prototype.saturate=function(t,e){this._throwIfNotLoaded("saturate");this._constraintValue(t,v.LIMITS.SATURATE_MIN,v.LIMITS.SATURATE_MAX);this._cancelPreview();this._addHistory(new u({type:"saturate",value:t,unit:"%"}),e)};v.prototype.invert=function(t,e){this._throwIfNotLoaded("invert");this._constraintValue(t,v.LIMITS.INVERT_MIN,v.LIMITS.INVERT_MAX);this._cancelPreview();this._addHistory(new u({type:"invert",value:t,unit:"%"}),e)};v.prototype.brightness=function(t,e){this._throwIfNotLoaded("brightness");this._constraintValue(t,v.LIMITS.BRIGHTNESS_MIN,v.LIMITS.BRIGHTNESS_MAX);this._cancelPreview();this._addHistory(new u({type:"brightness",value:t,unit:"%"}),e)};v.prototype.contrast=function(t,e){this._throwIfNotLoaded("contrast");this._constraintValue(t,v.LIMITS.CONTRAST_MIN,v.LIMITS.CONTRAST_MAX);this._cancelPreview();this._addHistory(new u({type:"contrast",value:t,unit:"%"}),e)};v.prototype.applyPreview=function(){this._throwIfNotLoaded("applyPreview");this._applyPreview()};v.prototype.cancelPreview=function(){this._throwIfNotLoaded("cancelPreview");this._cancelPreview()};v.prototype.undo=function(){this._throwIfNotLoaded("undo");this._jumpToHistory(this._iHistoryIndex+1)};v.prototype.redo=function(){this._throwIfNotLoaded("redo");this._jumpToHistory(this._iHistoryIndex-1)};v.prototype.jumpToHistory=function(t){this._throwIfNotLoaded("jumpToHistory");this._jumpToHistory(t)};v.prototype.getHistory=function(){return this._aHistory};v.prototype.getHistoryIndex=function(){return this._iHistoryIndex};v.prototype.getImagePngDataURL=function(){this._throwIfNotLoaded("getImagePngDataURL");return this._getFinalisedCanvas().toDataURL("image/png")};v.prototype.getImageJpegDataURL=function(t){this._throwIfNotLoaded("getImageJpegDataURL");return this._getFinalisedCanvas().toDataURL("image/jpeg",t)};v.prototype.getImageDataURL=function(t,e){this._throwIfNotLoaded("getImageDataURL");t=this._convertImageFormatEnumToMime(t)||this._getFileFormat();return this._getFinalisedCanvas().toDataURL(t,e)};v.prototype.getImageAsBlob=function(t,e){this._throwIfNotLoaded("getImageAsBlob");var i=this,o;t=this._convertImageFormatEnumToMime(t)||this._getFileFormat();if(this._aHistory.length===0){o=this._getOriginalBlob()}else{o=new Promise(function(o,s){var r=i._getFinalisedCanvas();if(r.toBlob){r.toBlob(function(t){o(t)},t,e)}else{i._createBlob(r,t,e).then(function(t){o(t)})}})}return o};v.prototype.openSaveDialog=function(t,e,i){this._throwIfNotLoaded("openSaveDialog");var o,s;t=t||this._getFileName();e=this._convertImageFormatEnumToMime(e)||this._getFileFormat();s=e.split("/")[1];if(this._aHistory.length===0){this._getOriginalBlob().then(function(i){C.save(i,t,s,e)})}else{o=this._getFinalisedCanvas();if(o.toBlob){o.toBlob(function(i){C.save(i,t,s,e)},e,i)}else{this._createBlob(o,e,i).then(function(i){C.save(i,t,s,e)})}}};v.prototype.getFileName=function(){return this._getFullFileName()};v.prototype._throwIfNotLoaded=function(t){if(!this.getLoaded()){throw Error("Cannot call "+t+" before image is set and loaded")}};v.prototype._throwIfNotReady=function(t){if(!this._isReady()){throw Error("Cannot call "+t+" before image is set and loaded and control is rendered")}};v.prototype._throwIfCustomShapeNotLoaded=function(t){if(!this.getCustomShapeLoaded()){throw Error("Cannot call "+t+" before custom shape is set and loaded")}};v.prototype._onAfterIsReady=function(){var t=this;this.$().removeClass("sapSuiteUiCommonsImageEditorEmpty");t._refreshContainerSize();this._$Container.css({width:this._oCanvas.width*this._getScale()+"px",height:this._oCanvas.height*this._getScale()+"px"});if(!this.getCropArea()){this.setCropAreaByRatio(this.getWidth(),this.getHeight())}else{this._setCropArea(this._oCropArea.x,this._oCropArea.y,this._oCropArea.width,this._oCropArea.height)}this.getDomRef().onmousewheel=this._onMouseWheel.bind(this);this.getDomRef().onmousedown=this._onMouseDown.bind(this)};v.prototype._isReady=function(){return!!this._$Container&&this.getLoaded()};v.prototype._createBlob=function(t,e,i){var o=this;return new Promise(function(s,r){var a=t.toDataURL(e,i).split(",")[1];setTimeout(function(){s(o._convertDataUriToBlob(a,e))})})};v.prototype._convertDataUriToBlob=function(t,e){var i=atob(t),o=i.length,s=new Uint8Array(o);for(var r=0;r<o;r++){s[r]=i.charCodeAt(r)}return new Blob([s],{type:e})};v.prototype._fetchUrlAsBlob=function(t){var e,i,o,s;if(window.fetch){e=fetch(t).then(function(t){return t.blob()}).then(function(t){return t})}else{if(t.startsWith("data:image")){i=t.split(",");o=i[1];s=i[0].split(";")[0].split(":")[1];e=Promise.resolve(this._convertDataUriToBlob(o,s))}else{e=new Promise(function(e,i){var o=new XMLHttpRequest;o.open("GET",t);o.responseType="blob";o.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){if(this.status===200){e(o.response)}else{i()}}};o.send()})}}return e};v.prototype._getOriginalBlob=function(){var t;if(this._oOriginalBlob instanceof Promise){t=this._oOriginalBlob}else{t=Promise.resolve(this._oOriginalBlob)}return t};v.prototype._getFileNameFromUrl=function(t){return t.split("#")[0].split("?")[0].split("/").pop()};v.prototype._getFileName=function(){var t=this._sOriginalFileName||"image",e;e=t.lastIndexOf(".");if(e>0){t=t.slice(0,e)}return t};v.prototype._getFullFileName=function(){return this._sOriginalFileName};v.prototype._convertImageFormatEnumToMime=function(t){switch(t){case I.Png:t="image/png";break;case I.Jpeg:t="image/jpeg";break;default:break}return t};v.prototype._getFileFormat=function(){return this._sOriginalFileType};v.prototype._updateTransformation=function(){this._oCanvas.style.transform="scale("+this._getScale()+")"};v.prototype._refreshContainerSize=function(){if(!this._$Container||!this._$Container[0]||!this._isReady()){return}this._$Container.css({width:this._oCanvas.width*this._getScale()+"px",height:this._oCanvas.height*this._getScale()+"px"});this._refreshOverlayMask()};v.prototype._refreshOverlayMask=function(){var t=this.$().find(".sapSuiteUiCommonsImageEditorCropOverlayContainer")[0];if(!t||!this._$Container){return}this._$Container[0].removeChild(t);this._$Container[0].insertBefore(t,this._oCanvas.nextSibling)};v.prototype._refreshCropContainerSize=function(){var t=this.getCropArea(),e,i;if(t){e=this._transposeImageCoordsPxToPercent(t.x,t.y,t.width,t.height);i=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle");i.css({left:e.x+"%",top:e.y+"%"});i.width(e.width+"%");i.height(e.height+"%")}};v.prototype._refreshCropContainerLook=function(){function t(t){return t/parseFloat(getComputedStyle(document.documentElement).fontSize)}var e=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle"),i=t(e.width()),o=t(e.height()),s=Math.min(i,o);e.removeClass("sapSuiteUiCommonsImageEditorCropInnerRectangleSmall sapSuiteUiCommonsImageEditorCropInnerRectangleVerySmall sapSuiteUiCommonsImageEditorCropInnerRectangleExtraSmall");if(s<1.25){e.addClass("sapSuiteUiCommonsImageEditorCropInnerRectangleExtraSmall")}else if(s<2){e.addClass("sapSuiteUiCommonsImageEditorCropInnerRectangleVerySmall")}else if(s<3){e.addClass("sapSuiteUiCommonsImageEditorCropInnerRectangleSmall")}};v.prototype._initCanvas=function(){this._oCanvas.id=this.getId()+"-image";this._oCanvas.classList.add("sapSuiteUiCommonsImageEditorCanvas");this._oContext=this._oCanvas.getContext("2d")};v.prototype._initContainer=function(){var e=this,i=this.$().find(".sapSuiteUiCommonsImageEditorTransformHandlers .sapSuiteUiCommonsImageEditorHandlerContainer");this._$Container.resizable({containment:"parent",aspectRatio:this.getKeepResizeAspectRatio(),start:function(i,o){e.$("image").addClass("sapSuiteUiCommonsImageEditorCanvasResize");e.$("image").css("transform","");t(this).css({top:o.position.top+"px",left:o.position.left+"px",width:o.size.width+"px",height:o.size.height+"px"})},stop:function(t,i){var o=i.size.width*e._oCanvas.width/i.originalSize.width,s=i.size.height*e._oCanvas.height/i.originalSize.height,r=e._oCanvas.width,a=e._oCanvas.height;e.$("image").removeClass("sapSuiteUiCommonsImageEditorCanvasResize");e._$Container.css({top:"",left:""});e.setSize(o,s,true);e._refreshContainerSize();e._updateTransformation();e.fireSizeChanged({width:e.getPreviewWidth(),height:e.getPreviewHeight(),originalWidth:r,originalHeight:a})},handles:{nw:i.filter(".ui-resizable-nw"),ne:i.filter(".ui-resizable-ne"),sw:i.filter(".ui-resizable-sw"),se:i.filter(".ui-resizable-se"),n:i.filter(".ui-resizable-n"),s:i.filter(".ui-resizable-s"),w:i.filter(".ui-resizable-w"),e:i.filter(".ui-resizable-e")}});f._setupMobileDraggable(this._$Container)};v.prototype._initCropArea=function(){var e=this,i=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle"),o=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle .sapSuiteUiCommonsImageEditorHandlerContainer"),s=this.$().find(".sapSuiteUiCommonsImageEditorDragHandlerContainer")[0];function r(t,i){var o=getComputedStyle(i.helper[0]);e._setOverlayMaskSize(i.position.left,i.position.top,i.size?i.size.width:parseFloat(o.width),i.size?i.size.height:parseFloat(o.height),"px");e._refreshCropContainerLook()}function a(i,o){var s=t(this),r=this.getBoundingClientRect(),a=s.position(),n=e._transposeViewportCoordsToImageCoords(a.left,a.top,r.width,r.height),h=e.getCropArea(),p;p=e._limitCropArea(n.x,n.y,n.width,n.height);e._setCropArea(p.x,p.y,p.width,p.height);p=e.getCropArea();e.fireCropAreaChanged({cropArea:p,originalCropArea:h})}i.resizable({aspectRatio:this.getKeepCropAspectRatio(),containment:"parent",minWidth:v.LIMITS.CROP_AREA_MIN,minHeight:v.LIMITS.CROP_AREA_MIN,resize:r,stop:a,handles:{nw:o.filter(".ui-resizable-nw"),ne:o.filter(".ui-resizable-ne"),sw:o.filter(".ui-resizable-sw"),se:o.filter(".ui-resizable-se"),n:o.filter(".ui-resizable-n"),s:o.filter(".ui-resizable-s"),w:o.filter(".ui-resizable-w"),e:o.filter(".ui-resizable-e")}});s.onmousewheel=this._onMouseWheel.bind(this);i.draggable({containment:"parent",handle:s,drag:r,stop:a});f._setupMobileDraggable(i);i.css("position","absolute")};v.prototype._getLastImg=function(){return this._oSavedImg};v.prototype._storeCurrentImg=function(){this._oSavedImg.width=this._oCanvas.width;this._oSavedImg.height=this._oCanvas.height;this._oSavedImg.getContext("2d").drawImage(this._oCanvas,0,0)};v.prototype._addHistory=function(t,e){if(e){this._oPreview=t}else{this._addNewHistory(t);this._oPreview=null}this._updateFilters()};v.prototype._applyPreview=function(){if(!this._oPreview){return}this._addNewHistory(this._oPreview);this._oPreview=null};v.prototype._addNewHistory=function(t){this._aHistory=this._aHistory.slice(this._iHistoryIndex);this._iHistoryIndex=0;if(this._aHistory.length===0||!this._aHistory[0].compare(t)){this._aHistory.unshift(t);this._storeCurrentImg();this._fireHistoryChanged()}};v.prototype._cancelPreview=function(){if(!this._oPreview){return}this._oPreview=null;this._updateFilters();this._drawImage(this._getLastImg())};v.prototype._jumpToHistory=function(t){var e=this._iHistoryIndex,i,o;this._iHistoryIndex=Math.min(this._aHistory.length,Math.max(0,t));if(e===this._iHistoryIndex){return}if(e<this._iHistoryIndex){this._drawImage(this._oOrigImg);this._storeCurrentImg();this._applyExifOrientation();o=this._aHistory.length-1}else{o=e-1}for(o;o>=this._iHistoryIndex;o--){i=this._aHistory[o];switch(i.getMetadata().getName()){case"sap.suite.ui.commons.imageeditor.RotateHistoryItem":{this._setRotation(i.getDegrees());break}case"sap.suite.ui.commons.imageeditor.ResizeHistoryItem":{this._setCanvasSize(i.getWidth(),i.getHeight());break}case"sap.suite.ui.commons.imageeditor.FlipHistoryItem":{this._flip(i.getVertical(),i.getHorizontal());break}case"sap.suite.ui.commons.imageeditor.FilterHistoryItem":{if(this._needsManualFilter()){this._applyFilterItem(i)}break}case"sap.suite.ui.commons.imageeditor.CropRectangleHistoryItem":{this._rectangleCrop(i.getX(),i.getY(),i.getWidth(),i.getHeight());break}case"sap.suite.ui.commons.imageeditor.CropEllipseHistoryItem":{this._ellipseCrop(i.getX(),i.getY(),i.getRx(),i.getRy());break}case"sap.suite.ui.commons.imageeditor.CropCustomShapeHistoryItem":{this._customShapeCrop(i.getX(),i.getY(),i.getWidth(),i.getHeight());break}default:{break}}this._storeCurrentImg()}this._updateFilters();this._fireHistoryChanged()};v.prototype._fireHistoryChanged=function(){this.fireHistoryChanged({history:this._aHistory.slice(),index:this._iHistoryIndex})};v.prototype._onMouseDown=function(t){if(t.button!==0||t.target!==this.getDomRef()&&t.target!==this._oCanvas){return}var e=this,i=t.clientX,o=t.clientY;t.preventDefault();function s(t){var s=t.clientX,r=t.clientY,a=s-i,n=r-o,h=e.getDomRef();h.scrollLeft-=a;h.scrollTop-=n;i=s;o=r}function r(){document.removeEventListener("mousemove",s);document.removeEventListener("mouseup",r)}document.addEventListener("mousemove",s);document.addEventListener("mouseup",r)};v.prototype._onMouseWheel=function(t){if(!t.ctrlKey){return}t.preventDefault();var e=t.wheelDeltaY>0?this._zoomIn.bind(this):this._zoomOut.bind(this);e({x:(t.clientX-this._$Container[0].getBoundingClientRect().x)/this.getZoomLevel()*100,y:(t.clientY-this._$Container[0].getBoundingClientRect().y)/this.getZoomLevel()*100});this.fireZoomChanged({zoom:this._fZoom})};v.prototype._limitCropArea=function(t,e,i,o,s){var r=this._getMaxCropAreaWidth(s),a=this._getMinCropAreaWidth(s),n=this._getMaxCropAreaHeight(s),h=this._getMinCropAreaHeight(s);t=t&&t<0?0:t;e=e&&e<0?0:e;i=this._constraintValue(i,a,r);o=this._constraintValue(o,h,n);if(t+i>this.getWidth()){t-=t+i-this.getWidth()}if(e+o>this.getHeight()){e-=e+o-this.getHeight()}return{x:t,y:e,width:i,height:o}};v.prototype._limitCurrentCropArea=function(){var t=this.getCropArea();if(t){this.setCropArea(t.x,t.y,t.width,t.height)}};v.prototype._getMaxCropAreaWidth=function(t){var e,i=this.getCropArea();if(t&&this.getKeepCropAspectRatio()&&i&&this.getWidth()/this.getHeight()>i.width/i.height){e=i.width*this._getMaxCropAreaHeight()/i.height}else{e=this.getWidth()}return Math.round(e)};v.prototype._getMinCropAreaWidth=function(t){var e,i=this.getCropArea();if(t&&this.getKeepCropAspectRatio()&&i&&i.width>i.height){i=this.getCropArea();e=i.width*this._getMinCropAreaHeight()/i.height}else{e=v.LIMITS.CROP_AREA_MIN}return Math.round(e)};v.prototype._getMaxCropAreaHeight=function(t){var e,i=this.getCropArea();if(t&&this.getKeepCropAspectRatio()&&i&&this.getWidth()/this.getHeight()<i.width/i.height){i=this.getCropArea();e=i.height*this._getMaxCropAreaWidth()/i.width}else{e=this.getHeight()}return Math.round(e)};v.prototype._getMinCropAreaHeight=function(t){var e,i=this.getCropArea();if(t&&this.getKeepCropAspectRatio()&&i&&i.width<i.height){i=this.getCropArea();e=i.height*this._getMinCropAreaWidth()/i.width}else{e=v.LIMITS.CROP_AREA_MIN}return Math.round(e)};v.prototype._scaleCropArea=function(t,e){var i=this.getCropArea();if(i&&typeof i.x==="number"&&typeof i.width==="number"){i.newWidth=i.width*(t/e);i.newHeight=i.height*(t/e);i.x+=(i.width-i.newWidth)/2;i.y+=(i.height-i.newHeight)/2;i=this._limitCropArea(i.x,i.y,i.newWidth,i.newHeight,true);this._setCropArea(i.x,i.y,i.width,i.height)}};v.prototype._setCropArea=function(t,e,i,o){this._oCropArea={x:t,y:e,width:i,height:o};if(!this._isReady()){return}var s;if(typeof this._oCropArea.x!=="number"){this._oCropArea.x=(this.getWidth()-i)/2;this._oCropArea.y=(this.getHeight()-o)/2}s=this._transposeImageCoordsPxToPercent(this._oCropArea.x,this._oCropArea.y,this._oCropArea.width,this._oCropArea.height);this._refreshCropContainerSize();this._setOverlayMaskSize(s.x,s.y,s.width,s.height,"%");this._refreshOverlayMask();this._refreshCropContainerLook();this._updateCropAreaHandlerColors()};v.prototype._setOverlayMaskSize=function(t,e,i,o,s){var r;r=this.$("overlayMaskRect");r.attr({x:t+s,y:e+s,width:i+s,height:o+s});r=this.$("overlayMaskEllipse");r.attr({cx:t+i/2+s,cy:e+o/2+s,rx:i/2+s,ry:o/2+s});r=this.$("overlayMaskCustomBlack");r.attr({x:t+s,y:e+s,width:i+s,height:o+s});r=this.$("overlayMaskCustomWhite");r.attr({x:t+s,y:e+s,width:i+s,height:o+s})};v.prototype._constraintValue=function(t,e,i){if(isNaN(t)||t<e){t=e}else if(t>i){t=i}return Math.round(t)};v.prototype._setZoom=function(t,e){var i=this._fZoom,o=this.getDomRef(),s,r,a,n,h,p,l,g;this._fZoom=parseFloat(t.toFixed(2));if(this._fZoom<=0){this._fZoom=1}e=e||{};if(o){a=o.clientWidth;n=o.clientHeight;h=o.scrollLeft;p=o.scrollTop}this._updateTransformation();this._refreshContainerSize();if(o){s=o.getBoundingClientRect();r=this._$Container[0].getBoundingClientRect();e.x=e.x||(o.clientWidth/2+s.x-(r.x-(a-o.clientWidth)/2))/i*100;e.y=e.y||(o.clientHeight/2+s.y-(r.y-(n-o.clientHeight)/2))/i*100}if(e.x&&e.y){l=o.scrollLeft+(e.x/100*this.getZoomLevel()-o.scrollLeft)-(e.x/100*i-h);g=o.scrollTop+(e.y/100*this.getZoomLevel()-o.scrollTop)-(e.y/100*i-p)}if(o&&e.x){o.scrollLeft=l}if(o&&e.y){o.scrollTop=g}if(this.getScaleCropArea()){this._scaleCropArea(i,this._fZoom)}this._refreshCropContainerLook()};v.prototype._getScale=function(){return this._fZoom/100};v.prototype._zoomIn=function(t){var e=v.ZOOM_MILESTONES.indexOf(this._fZoom),i=this._fZoom,o;if(e>=0&&e<v.ZOOM_MILESTONES.length-1){i=v.ZOOM_MILESTONES[e+1]}else{for(o=0;o<v.ZOOM_MILESTONES.length;o++){if(v.ZOOM_MILESTONES[o]>i){i=v.ZOOM_MILESTONES[o];break}}}this._setZoom(i,t)};v.prototype._zoomOut=function(t){var e=v.ZOOM_MILESTONES.indexOf(this._fZoom),i=this._fZoom,o;if(e>0){i=v.ZOOM_MILESTONES[e-1]}else{for(o=v.ZOOM_MILESTONES.length-1;o>=0;o--){if(v.ZOOM_MILESTONES[o]<i){i=v.ZOOM_MILESTONES[o];break}}}this._setZoom(i,t)};v.prototype._zoomToFit=function(){this._$Container.css({width:"",height:"",margin:"0px"});this._oCanvas.style.maxWidth="100%";this._oCanvas.style.maxHeight="100%";this._oCanvas.style.transform="";var t=this._oCanvas.getBoundingClientRect().width*100/this._oCanvas.width;this._oCanvas.style.maxWidth="";this._oCanvas.style.maxHeight="";this._$Container.css({margin:"auto"});this.zoom(t)};v.prototype._setCanvasSize=function(t,e){var i=this._getLastImg();this._oCanvas.width=t;this._oCanvas.height=e;this._oContext.drawImage(i,0,0,i.width,i.height,0,0,t,e);this._refreshContainerSize()};v.prototype._setRotation=function(t){var e=this._getLastImg(),i,o,s;i=this._degToRad(t);this._oCanvas.width=Math.abs(e.width*Math.cos(i))+Math.abs(e.height*Math.sin(i));this._oCanvas.height=Math.abs(e.width*Math.sin(i))+Math.abs(e.height*Math.cos(i));o=this._limitCanvasSize(this._oCanvas.width,this._oCanvas.height);s=o.width/this._oCanvas.width;this._oCanvas.width=o.width;this._oCanvas.height=o.height;this._oContext.save();this._oContext.translate(this._oCanvas.width/2,this._oCanvas.height/2);this._oContext.rotate(i);this._oContext.translate(-this._oCanvas.width/2,-this._oCanvas.height/2);this._oContext.drawImage(e,0,0,e.width,e.height,Math.round((this._oCanvas.width-e.width*s)/2),Math.round((this._oCanvas.height-e.height*s)/2),e.width*s,e.height*s);this._oContext.restore();this._refreshContainerSize()};v.prototype._flipVertical=function(){this._flip(true,false)};v.prototype._flipHorizontal=function(){this._flip(false,true)};v.prototype._flip=function(t,e){var i=this._getLastImg(),o=document.createElement("canvas"),s=o.getContext("2d");o.width=i.width;o.height=i.height;s.translate(e?i.width:0,t?i.height:0);s.scale(e?-1:1,t?-1:1);s.drawImage(i,0,0);this._oContext.clearRect(0,0,this._oCanvas.width,this._oCanvas.height);this._oContext.drawImage(o,0,0)};v.prototype._transposeViewportCoordsToImageCoords=function(t,e,i,o){if(!this._isReady()){return{x:0,y:0,width:0,height:0}}var s=this._oCanvas.getBoundingClientRect(),r=this._oCanvas.width/s.width,a=this._oCanvas.height/s.height;return{x:t*r,y:e*a,width:i*r,height:o*a}};v.prototype._transposeImageCoordsToViewportCoords=function(t,e,i,o){if(!this._isReady()){return{x:0,y:0,width:0,height:0}}var s=this._oCanvas.getBoundingClientRect(),r=this._oCanvas.width/s.width,a=this._oCanvas.height/s.height;return{x:t/r,y:e/a,width:i/r,height:o/a}};v.prototype._transposeImageCoordsPxToPercent=function(t,e,i,o){return{x:t*100/this._oCanvas.width,y:e*100/this._oCanvas.height,width:i*100/this._oCanvas.width,height:o*100/this._oCanvas.height}};v.prototype._transposePercentToImageCoordsPx=function(t,e,i,o){return{x:t*this._oCanvas.width/100,y:e*this._oCanvas.height/100,width:i*this._oCanvas.width/100,height:o*this._oCanvas.height/100}};v.prototype._transposeViewPortPxToPercent=function(t,e,i,o){var s=this._$Container[0].getBoundingClientRect();return{x:t*100/s.width,y:e*100/s.height,width:i*100/s.width,height:o*100/s.height}};v.prototype._updateCropAreaHandlerColors=function(){var e;if(!this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle").is(":visible")){return}var i=this;this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle .sapSuiteUiCommonsImageEditorHandlerContainer").each(function(){var o=t(this);if(!o.is(":visible")||o.width()===0||o.height()===0){return}e=i._getContrastColorForElement(this);for(var s=0;s<this.childElementCount;s++){this.children[s].style.background=e}})};v.prototype._getContrastColorForElement=function(t){var e=this._oCanvas.getBoundingClientRect(),i=t.getBoundingClientRect(),o=this._transposeViewportCoordsToImageCoords(i.left-e.left,i.top-e.top,i.width,i.height),s=this._getContrastColorForRectangleArea(o.x,o.y,o.width,o.height);return s};v.prototype._getContrastColorForRectangleArea=function(t,e,i,o){var s=this._getRectangleAreaAvg(t,e,i,o);return s>.5*.5?"white":"black"};v.prototype._getRectangleAreaAvg=function(t,e,i,o){if(i===0||o===0){return 0}var s=this._oContext.getImageData(t,e,Math.ceil(i),Math.ceil(o)).data,r=0,a,n,h,p;for(var l=0;l<s.length;l+=4){a=1-s[l]/255;n=1-s[l+1]/255;h=1-s[l+2]/255;p=s[l+3]/255;r+=(.2126*a*a+.7152*n*n+.0722*h*h)*p}return r/(s.length/4)};v.prototype._updateResizableCropAspectRatio=function(){var t=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle"),e=this.getKeepCropAspectRatio();this._updateResizableAspectRatio(t,e)};v.prototype._updateResizableResizeAspectRatio=function(){var t=this.getKeepResizeAspectRatio();this._updateResizableAspectRatio(this._$Container,t)};v.prototype._updateResizableAspectRatio=function(t,e){if(t&&t.data("uiResizable")){t.resizable("option","aspectRatio",e).data("uiResizable")._aspectRatio=e}};v.prototype._applyRectangleCrop=function(t){var e=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle")[0].getBoundingClientRect(),i=this._oCanvas.getBoundingClientRect(),o=this._transposeViewportCoordsToImageCoords(e.left-i.left,e.top-i.top,e.width,e.height);this.rectangleCrop(o.x,o.y,o.width,o.height,t)};v.prototype._rectangleCrop=function(t,e,i,o){var s=document.createElement("canvas");s.width=Math.round(i);s.height=Math.round(o);s.getContext("2d").drawImage(this._oCanvas,t,e,i,o,0,0,i,o);this._drawImage(s);this._refreshCropContainerSize()};v.prototype._applyEllipseCrop=function(t){var e,i,o;e=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle")[0].getBoundingClientRect();i=this._oCanvas.getBoundingClientRect();o=this._transposeViewportCoordsToImageCoords(e.left-i.left,e.top-i.top,e.width,e.height);this.ellipseCrop(o.width/2+o.x,o.height/2+o.y,o.width/2,o.height/2,t)};v.prototype._ellipseCrop=function(t,e,i,o){var s=document.createElement("canvas"),r=i*2,a=o*2,n=s.getContext("2d");s.width=Math.round(r);s.height=Math.round(a);if(!n.ellipse){n.save();n.translate(i,o);n.scale(i,o);n.arc(0,0,1,0,360);n.restore()}else{n.ellipse(i,o,i,o,0,0,2*Math.PI)}n.fill();n.globalCompositeOperation="source-in";n.drawImage(this._oCanvas,t-i,e-o,r,a,0,0,r,a);this._drawImage(s);this._refreshCropContainerSize()};v.prototype._applyCustomShapeCrop=function(t){var e,i,o;e=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle")[0].getBoundingClientRect();i=this._oCanvas.getBoundingClientRect();o=this._transposeViewportCoordsToImageCoords(e.left-i.left,e.top-i.top,e.width,e.height);this.customShapeCrop(o.x,o.y,o.width,o.height,t)};v.prototype._customShapeCrop=function(t,e,i,o){var s=document.createElement("canvas"),r=s.getContext("2d");s.width=i;s.height=o;r.drawImage(this._oCustomShapeImg,0,0,i,o);r.globalCompositeOperation="source-in";r.drawImage(this._oCanvas,t,e,i,o,0,0,i,o);r.globalCompositeOperation="source-over";this._drawImage(s);this._refreshCropContainerSize()};v.prototype._getFinalisedCanvas=function(){var t=this.getWidth(),e=this.getHeight(),i,o,s;i=this._getLastImg().getContext("2d").getImageData(0,0,t,e);this._applyFilterHistory(i);o=document.createElement("canvas");s=o.getContext("2d");o.width=t;o.height=e;s.putImageData(i,0,0);return o};v.prototype._applyFilterHistory=function(t){var e;for(var i=this._aHistory.length-1;i>=this._iHistoryIndex;i--){if(this._aHistory[i].isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){e=this._aHistory[i];c[e.getType()](t,e.getValue()/100)}}};v.prototype._applyFilterItem=function(t){var e=this._getLastImg(),i=e.getContext("2d"),o=i.getImageData(0,0,e.width,e.height);c[t.getType()](o,t.getValue()/100);this._oContext.putImageData(o,0,0)};v.prototype._updateFilters=function(){var t="",e;function i(t){return t.getType()+"("+t.getValue()+t.getUnit()+") "}if(this._needsManualFilter()){if(this._isReady()){if(this._oPreview&&this._oPreview.isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){this._applyFilterItem(this._oPreview)}}}else{for(var o=this._aHistory.length-1;o>=this._iHistoryIndex;o--){e=this._aHistory[o];if(e.isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){t+=i(e)}}if(this._oPreview&&this._oPreview.isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){t+=i(this._oPreview)}this._oCanvas.style.filter=t.trim()}};v.prototype._needsManualFilter=function(){return a.browser.msie||a.os.name===a.os.OS.IOS};v.prototype._isMobileSafari=function(){return a.os.name===a.os.OS.IOS&&a.browser.name===a.browser.BROWSER.SAFARI};v.prototype._reset=function(){this.$().addClass("sapSuiteUiCommonsImageEditorEmpty");this._aHistory=[];this._iHistoryIndex=0;this._oPreview=null;this._bImageLoaded=false;this._oCropArea=null;this._oCanvas.width=0;this._oCanvas.height=0;this._oOriginalBlob=null;this._sOriginalFileName=null;this._sOriginalFileType=null;this._iExifRotation=null;this._bExifFlip=false;this._updateFilters();this._refreshContainerSize()};v.prototype._drawImage=function(t){var e=this._limitCanvasSize(t.width,t.height);this._oCanvas.width=e.width;this._oCanvas.height=e.height;this._oContext.drawImage(t,0,0,t.width,t.height,0,0,this._oCanvas.width,this._oCanvas.height);this._refreshContainerSize()};v.prototype._limitCanvasSize=function(t,e,i){var o=this._isMobileSafari()?v.LIMITS.MAX_SAFARI_MOBILE_CANVAS_SIZE:v.LIMITS.MAX_CANVAS_SIZE,s=t,r=e,a;if(t*e>o){a=Math.sqrt(o/(t*e));s=Math.floor(t*a);r=Math.floor(r*s/t);if(!i){this.fireSizeChanged({width:s,height:r,originalWidth:t,originalHeight:e});n.show(w.getText("IMGEDITOR_SCALE_WARNING",[s,r,t,e]),{duration:6e3})}}return{width:s,height:r}};v.prototype._degToRad=function(t){return t*Math.PI/180};v.prototype._RadToDeg=function(t){return t*180/Math.PI};v.prototype._getCropAreaDragIcon=function(){if(!this._cropAreaDragIcon){this._cropAreaDragIcon=new h({src:"sap-icon://move",useIconTooltip:false})}return this._cropAreaDragIcon};return v});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/ImageEditorContainer",["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/suite/ui/commons/library","sap/ui/core/library","sap/m/library","./ImageEditor","sap/m/OverflowToolbar","sap/m/OverflowToolbarButton","sap/m/OverflowToolbarToggleButton","sap/m/OverflowToolbarLayoutData","sap/m/ToggleButton","sap/m/ToolbarSeparator","sap/m/ToolbarSpacer","sap/m/Label","sap/m/Slider","sap/m/Input","sap/m/CheckBox","sap/ui/model/json/JSONModel","sap/m/MenuButton","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/Select","sap/m/Button","sap/ui/core/Item","sap/m/ResponsivePopover","sap/m/List","sap/m/StandardListItem","sap/m/CustomListItem","sap/m/FlexBox","sap/m/FlexItemData","sap/m/IconTabBar","sap/m/IconTabFilter","sap/ui/core/Icon","sap/ui/core/HTML","sap/m/Switch","sap/suite/ui/commons/ControlProxy","sap/base/Log","sap/ui/unified/FileUploader","sap/ui/base/ManagedObjectObserver","sap/ui/core/ResizeHandler","./ImageEditorContainerRenderer"],function(t,e,o,i,r,s,a,n,l,p,h,d,u,g,m,c,_,I,y,f,T,C,b,S,M,E,R,O,P,L,A,w,B,v,F,x,G,H,z,D){"use strict";var N=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var Z=r.InputType,k=r.ListType,V=o.ImageEditorMode,U=o.ImageEditorContainerMode,K=o.ImageEditorContainerButton,W=i.ValueState,X=r.ListMode,j=r.ButtonType,Y=r.FlexDirection,$=r.FlexRendertype,J=r.FlexJustifyContent,q=r.FlexAlignItems,Q=r.IconTabDensityMode,tt=r.BackgroundDesign,et=r.SwitchType,ot=i.TextAlign,it=Object.freeze({WIDTH:{min:s.LIMITS.WIDTH_MIN,max:s.LIMITS.WIDTH_MAX,callback:"_setWidth"},HEIGHT:{min:s.LIMITS.HEIGHT_MIN,max:s.LIMITS.HEIGHT_MAX,callback:"_setHeight"},ROTATION:{min:s.LIMITS.ROTATION_MIN,max:s.LIMITS.ROTATION_MAX,callback:"_rotate"},FILTER:{callback:"_applyCurrentFilter"}}),rt=Object.freeze({CUSTOMSIZE:"sap-icon://write-new-document",ORIGINALSIZE:"sap-icon://table-view",ROTATELEFT:"sap-icon://response",ROTATERIGHT:"sap-icon://forward",CROPRECTANGLE:"sap-icon://color-fill",CROPELLIPSE:"sap-icon://circle-task-2",CROPCUSTOMSHAPE:"sap-icon://add-favorite",TRANSFORM:"sap-icon://draw-rectangle",FILTER:"sap-icon://palette",CROP:"sap-icon://crop",UNDO:"sap-icon://undo",DROPDOWN:"sap-icon://slim-arrow-down",ZONES:"sap-icon://tag",LOCK:"sap-icon://locked",RESET:"sap-icon://reset",FLIPVERTICAL:"sap-icon://resize-vertical",FLIPHORIZONTAL:"sap-icon://resize-horizontal",RELATIVE:"sap-icon://resize",ZOOMIN:"sap-icon://zoom-in",ZOOMOUT:"sap-icon://zoom-out",ZOOMFIT:"sap-icon://popup-window"});var st=e.extend("sap.suite.ui.commons.imageeditor.ImageEditorContainer",{metadata:{library:"sap.suite.ui.commons",properties:{mode:{type:"sap.suite.ui.commons.ImageEditorContainerMode",defaultValue:U.Filter},enabledButtons:{type:"sap.suite.ui.commons.ImageEditorContainerButton[]",defaultValue:[K.Filter,K.Transform,K.Crop]}},defaultAggregation:"imageEditor",aggregations:{imageEditor:{type:"sap.suite.ui.commons.imageeditor.ImageEditor",multiple:false,singularName:"imageEditor"},customToolbarControls:{type:"sap.ui.core.Control",multiple:true,singularName:"customToolbarControl"},customResizeItems:{type:"sap.suite.ui.commons.imageeditor.CustomSizeItem",multiple:true,singularName:"customResizeItem"},customRectangleCropItems:{type:"sap.suite.ui.commons.imageeditor.CustomSizeItem",multiple:true,singularName:"customRectangleCropItem"},customEllipseCropItems:{type:"sap.suite.ui.commons.imageeditor.CustomSizeItem",multiple:true,singularName:"customEllipseCropItem"}}}});var at=Object.freeze({NUM_KEPT_ITEMS:2});st.prototype.init=function(){var t={enabled:false,mode:null,zoom:100,transform:{keepAspectRatio:true,width:null,height:null,widthValueState:W.None,widthValueStateText:null,heightValueState:W.None,heightValueStateText:null,rotate:0,rotateValueState:W.None,rotateValueStateText:null,selectedTypeKey:"Resize",flipVertical:false,flipHorizontal:false,resizes:[{key:"custom",text:N.getText("IMGEDITOR_CUSTOM_SIZE"),icon:rt.CUSTOMSIZE,unlockRatio:true},{key:"original",text:N.getText("IMGEDITOR_ORIGINAL_SIZE"),icon:rt.ORIGINALSIZE}],rotates:[{key:"90left",text:N.getText("IMGEDITOR_ROTATE_90LEFT"),rotate:-90,icon:rt.ROTATELEFT},{key:"90right",text:N.getText("IMGEDITOR_ROTATE_90RIGHT"),rotate:90,icon:rt.ROTATERIGHT},{key:"45left",text:N.getText("IMGEDITOR_ROTATE_45LEFT"),rotate:-45,icon:rt.ROTATELEFT},{key:"45right",text:N.getText("IMGEDITOR_ROTATE_45RIGHT"),rotate:45,icon:rt.ROTATERIGHT}],flips:[{key:"vertical",text:N.getText("IMGEDITOR_FLIP_VERTICAL"),icon:rt.FLIPVERTICAL,flipVertical:true,flipHorizontal:false},{key:"horizontal",text:N.getText("IMGEDITOR_FLIP_HORIZONTAL"),icon:rt.FLIPHORIZONTAL,flipVertical:false,flipHorizontal:true}]},crop:{scaleCropArea:false,customShapeLoaded:false,zoom:100,zoomValueState:W.None,zoomValueStateText:null,width:null,widthValueState:W.None,widthValueStateText:null,height:null,heightValueState:W.None,heightValueStateText:null,keepAspectRatio:true,selectedTypeKey:"Rectangle",selectedType:null,enabled:true,areaRectangle:{x:10,y:10,width:80,height:80},types:[{key:"Rectangle",text:"",icon:rt.CROPRECTANGLE,apply:"applyVisibleCrop"},{key:"Ellipse",text:"",icon:rt.CROPELLIPSE,apply:"applyVisibleCrop"},{key:"CustomShape",text:"",icon:rt.CROPCUSTOMSHAPE,apply:"applyVisibleCrop"}],ratiosRectangle:[{key:"custom",text:N.getText("IMGEDITOR_CUSTOM_SIZE"),icon:rt.CUSTOMSIZE,unlockRatio:true,relative:true},{key:"original",text:N.getText("IMGEDITOR_CROP_RATIO_ORIGINAL"),width:null,height:null,icon:rt.ORIGINALSIZE,relative:true}],ratiosCircle:[{key:"custom",text:N.getText("IMGEDITOR_CUSTOM_SIZE"),icon:rt.CUSTOMSIZE,unlockRatio:true,relative:true},{key:"original",text:N.getText("IMGEDITOR_CROP_RATIO_ORIGINAL"),width:null,height:null,icon:rt.ORIGINALSIZE,relative:true}],ratiosCustomShape:[{key:"custom",text:N.getText("IMGEDITOR_CUSTOM_SIZE"),icon:rt.CUSTOMSIZE,unlockRatio:true,relative:true},{key:"original",text:N.getText("IMGEDITOR_CROP_RATIO_ORIGINAL"),callback:"_setCustomShapeCropAreaRatio",icon:rt.ORIGINALSIZE,relative:true}]},filter:{filterValueState:W.None,filterValueStateText:null,selectedFilter:null,filters:[{text:N.getText("IMGEDITOR_FILTER_BRIGHTNESS"),type:"brightness",value:100,defaultValue:100,unit:"%",min:s.LIMITS.BRIGHTNESS_MIN,max:s.LIMITS.BRIGHTNESS_MAX},{text:N.getText("IMGEDITOR_FILTER_CONTRAST"),type:"contrast",value:100,defaultValue:100,unit:"%",min:s.LIMITS.CONTRAST_MIN,max:s.LIMITS.CONTRAST_MAX},{text:N.getText("IMGEDITOR_FILTER_SATURATION"),type:"saturate",value:100,defaultValue:100,unit:"%",min:s.LIMITS.SATURATE_MIN,max:s.LIMITS.SATURATE_MAX},{text:N.getText("IMGEDITOR_FILTER_GRAYSCALE"),type:"grayscale",value:0,defaultValue:0,unit:"%",min:s.LIMITS.GRAYSCALE_MIN,max:s.LIMITS.GRAYSCALE_MAX},{text:N.getText("IMGEDITOR_FILTER_INVERT"),type:"invert",value:0,defaultValue:0,unit:"%",min:s.LIMITS.INVERT_MIN,max:s.LIMITS.INVERT_MAX},{text:N.getText("IMGEDITOR_FILTER_SEPIA"),type:"sepia",value:0,defaultValue:0,unit:"%",min:s.LIMITS.SEPIA_MIN,max:s.LIMITS.SEPIA_MAX}]},history:[],historyIndex:0};this._bFirstTimeRendered=true;this._oObserver=new z(this._onManagedObjectChange.bind(this));this._oObserver.observe(this,{properties:["enabledButtons"],aggregations:["customToolbarControls"]});this._oModel=new I(t);this._oThumbnailCanvas=document.createElement("canvas");this._updateToolbarsContent();this["_setMode"+this.getMode()]()};st.prototype.onBeforeRendering=function(){if(this._sResizeHandlerId){D.deregister(this._sResizeHandlerId)}};st.prototype.onAfterRendering=function(){var t=this;this._bIsSmallSize=this._isSmallSize();function e(){sap.ui.getCore().detachThemeChanged(e);t._zoomToFit()}if(this._bFirstTimeRendered&&this.getImageEditor()){this._bFirstTimeRendered=false;if(sap.ui.getCore().isThemeApplied()){this._zoomToFit()}else{sap.ui.getCore().attachThemeChanged(e)}}this._sResizeHandlerId=D.register(this,this._onResize.bind(this))};st.prototype.onExit=function(){if(this._sResizeHandlerId){D.deregister(this._sResizeHandlerId)}};st.prototype._onResize=function(){var t=this._isSmallSize();if(this._bIsSmallSize!==t){this._bIsSmallSize=t;this.rerender()}};st.prototype._isSmallSize=function(){var t=sap.m.ScreenSizes&&sap.m.ScreenSizes.table||600;return this.$()[0]&&this.$().width()<t};st.prototype._zoomToFit=function(){var t=this.getImageEditor();if(t&&t._isReady()&&this.getDomRef()){t.zoomToFit();this._oModel.setProperty("/zoom",t.getZoomLevel());this._refreshCropAreaSize()}};st.prototype.exit=function(){this._oObserver.disconnect();this._oObserver.destroy()};st.prototype.setMode=function(t){this.setProperty("mode",t,true);this["_setMode"+this.getMode()]();return this};st.prototype.setImageEditor=function(t){this._detachEditorEvents(this.getImageEditor());this.setAggregation("imageEditor",t);this._attachEditorEvents(t);if(t&&t.getLoaded()){this._onImageLoaded()}if(t&&t.getCustomShapeLoaded()){this._onCustomShapeLoaded()}return this};st.prototype.destroyImageEditor=function(){this._detachEditorEvents(this.getImageEditor());this.destroyAggregation("imageEditor");this._oModel.setProperty("/enabled",false);return this};st.prototype.getToolbar=function(){return this._getHeaderToolbar()};st.prototype.getToolbarIds=function(){return{filter:this.getId()+"-filterButton",crop:this.getId()+"-cropButton",transform:this.getId()+"-transformButton",undo:this.getId()+"-undoButton",history:this.getId()+"-historyButton",zoomIn:this.getId()+"-zoominButton",zoomOut:this.getId()+"-zoomoutButton",zoomToFit:this.getId()+"-zoomToFitButton",zoomLabel:this.getId()+"-zoomLabel",separator:this.getId()+"-separator"}};st.prototype.getMobileHeaderToolbar=function(){return this._getMobileHeaderToolbar()};st.prototype.getMobileZoomToolbar=function(){return this._getMobileZoomToolbar()};st.prototype.getMobileZoomToolbarIds=function(){return{zoomIn:this.getId()+"-mobileZoominButton",zoomLabel:this.getId()+"-mobileZoomLabel",zoomOut:this.getId()+"-mobilezoomoutButton",zoomToFit:this.getId()+"-mobileZoomToFitButton",scaleSwitch:this.getId()+"-mobileScaleSwitch",scaleLabel:this.getId()+"-mobileScaleLabel"}};st.prototype.getMobileFooterToolbar=function(){return this._getMobileFooterToolbar()};st.prototype.getMobileFooterToolbarIds=function(){return{filter:this.getId()+"-mobileFilterButton",crop:this.getId()+"-mobileCropButton",transform:this.getId()+"-mobileTransformButton",undo:this.getId()+"-mobileUndoButton",history:this.getId()+"-mobileHistoryButton",apply:this.getId()+"-mobileApplyButton"}};st.prototype._attachEditorEvents=function(t){if(!t){return}t.attachLoaded(this._onImageLoaded,this);t.attachCustomShapeLoaded(this._onCustomShapeLoaded,this);t.attachError(this._onImageError,this);t.attachCropAreaChanged(this._onCropAreaChange,this);t.attachHistoryChanged(this._onHistoryChange,this);t.attachSizeChanged(this._onSizeChange,this);t.attachZoomChanged(this._onZoomChange,this)};st.prototype._detachEditorEvents=function(t){if(!t){return}t.detachLoaded(this._onImageLoaded,this);t.detachCustomShapeLoaded(this._onCustomShapeLoaded,this);t.detachError(this._onImageError,this);t.detachCropAreaChanged(this._onCropAreaChange,this);t.detachHistoryChanged(this._onHistoryChange,this);t.detachSizeChanged(this._onSizeChange,this);t.detachZoomChanged(this._onZoomChange,this)};st.prototype._onManagedObjectChange=function(t){if(t.object===this._oMobileHeaderToolbar){this._oMobileHeaderToolbar.setVisible(t.object.getContent().length>0)}else if(t.object===this){this._updateToolbarsContent()}};st.prototype._refreshImageSize=function(){if(!this.getImageEditor()||!this.getImageEditor().getLoaded()){return}var t=this.getImageEditor().getWidth(),e=this.getImageEditor().getHeight();this._oModel.setProperty("/transform/resizes/1/width",t);this._oModel.setProperty("/transform/resizes/1/height",e);this._oModel.setProperty("/crop/ratiosRectangle/1/width",t);this._oModel.setProperty("/crop/ratiosRectangle/1/height",e);this._oModel.setProperty("/crop/ratiosCircle/1/width",t);this._oModel.setProperty("/crop/ratiosCircle/1/height",e);this._updateCurrentSize(t,e)};st.prototype._refreshCropAreaSize=function(){var t=this.getImageEditor().getCropArea();if(!t){return}this._updateCropSize(Math.round(t.width),Math.round(t.height))};st.prototype._onImageLoaded=function(){var t=this.getImageEditor();this._resetValueStates();this._oModel.setProperty("/enabled",!!t.getSrc());if(!t.getSrc()){this._changeOptionsPanelContent();return}this["_setMode"+this.getMode()]();this._refreshImageSize();this._oModel.setProperty("/history",[]);this._oModel.setProperty("/historyIndex",0);this._zoomToFit();this._updateOrigThumbnail();this._resetCurrentPanel()};st.prototype._onCustomShapeLoaded=function(){var t=this.getImageEditor();if(t.getCustomShapeSrc()&&t.getLoaded()&&t.getMode()===V.CropCustomShape){this._setCustomShapeCropAreaRatio()}this._oModel.setProperty("/crop/customShapeLoaded",!!t.getCustomShapeSrc())};st.prototype._onImageError=function(){this._resetValueStates();this._changeOptionsPanelContent();this._oModel.setProperty("/enabled",false)};st.prototype._onCropAreaChange=function(t){this._resetValueStates();this._updateCropSize(Math.round(t.getParameter("cropArea").width),Math.round(t.getParameter("cropArea").height))};st.prototype._onHistoryChange=function(t){var e=t.getParameter("history"),o=t.getParameter("index");this._resetValueStates();this._refreshImageSize();e.push({noChange:"NoChange"});this._oModel.setProperty("/history",e);this._oModel.setProperty("/historyIndex",o)};st.prototype._onSizeChange=function(t){this._resetValueStates();this._updateCurrentSize(t.getParameter("width"),t.getParameter("height"));this._selectResizeCustomSizeItem(this.getImageEditor().getKeepResizeAspectRatio())};st.prototype._onZoomChange=function(t){var e=t.getParameter("zoom");this._oModel.setProperty("/zoom",e);this._refreshCropAreaSize()};st.prototype._updateCropSize=function(t,e){this._oModel.setProperty("/crop/width",t);this._oModel.setProperty("/crop/height",e)};st.prototype._updateCurrentSize=function(t,e){this._oModel.setProperty("/transform/width",t);this._oModel.setProperty("/transform/height",e)};st.prototype._updateOrigThumbnail=function(){var t=this.$("origThumbnail"),e=this.getImageEditor(),o,i,r=this._oThumbnailCanvas.getContext("2d");if(e.getWidth()>=e.getHeight()){o=300;i=Math.round(e.getHeight()*o/e.getWidth())}else{i=300;o=Math.round(e.getWidth()*i/e.getHeight())}this._oThumbnailCanvas.width=o;this._oThumbnailCanvas.height=i;r.clearRect(0,0,o,i);r.drawImage(e._oCanvas,0,0,o,i);t.attr({href:this._oThumbnailCanvas.toDataURL()});if(t[0]){t[0].setAttribute("viewBox","0 0 "+o+" "+i)}};st.prototype._getHeaderToolbar=function(){if(!this._oHeaderToolbar){this._oHeaderToolbar=new a({enabled:"{/enabled}"}).addStyleClass("sapSuiteUiCommonsImageEditorContainerHeaderToolbar");this._oHeaderToolbar.setModel(this._oModel);this.addDependent(this._oHeaderToolbar)}return this._oHeaderToolbar};st.prototype._updateToolbarsContent=function(){var t=this._getHeaderToolbar(),e=this._getMobileHeaderToolbar(),o=this._getMobileFooterToolbar(),i=this.getEnabledButtons(),r;t.removeAllContent();e.removeAllContent();o.removeAllContent();this._getHistoryItems().forEach(function(e){t.addContent(e)});this._getMobileHistoryItems().forEach(function(t){o.addContent(t)});this._getZoomItems().forEach(function(e){t.addContent(e)});t.addContent(this._getToolbarSeparator());for(r=0;r<i.length;r++){switch(i[r]){case K.Filter:{t.addContent(this._getFilterButton());o.addContent(this._getMobileFilterButton());break}case K.Crop:{t.addContent(this._getCropButton());o.addContent(this._getMobileCropButton());break}case K.Transform:{t.addContent(this._getTransformButton());o.addContent(this._getMobileTransformButton());break}case K.History:{break}default:break}}t.addContent(this._getToolbarSpacer());o.addContent(this._getMobileFooterToolbarSpacer());o.addContent(this._getMobileApplyButton());if(this.getCustomToolbarControls().length>0){e.addContent(this._getMobileHeaderToolbarSpacer())}this.getCustomToolbarControls().forEach(function(o){var i=new x,r=new x;this.addDependent(i);i.setAssociation("control",o);t.addContent(i);this.addDependent(r);r.setAssociation("control",o);e.addContent(r)},this)};st.prototype._getToolbarSpacer=function(){if(!this._oSpacer){this._oSpacer=new u({id:this.getId()+"-spacer"});this.addDependent(this._oSpacer)}return this._oSpacer};st.prototype._getMobileHeaderToolbarSpacer=function(){if(!this._oMobileHeaderSpacer){this._oMobileHeaderSpacer=new u({id:this.getId()+"-mobileSpacer"});this.addDependent(this._oMobileHeaderSpacer)}return this._oMobileHeaderSpacer};st.prototype._getMobileFooterToolbarSpacer=function(){if(!this._oMobileFooterSpacer){this._oMobileFooterSpacer=new u({id:this.getId()+"-mobileFooterSpacer"});this.addDependent(this._oMobileFooterSpacer)}return this._oMobileFooterSpacer};st.prototype._getMobileHeaderToolbar=function(){if(!this._oMobileHeaderToolbar){this._oMobileHeaderToolbar=new a({enabled:"{/enabled}",visible:false}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileToolbar");this.addDependent(this._oMobileHeaderToolbar);this._oObserver.observe(this._oMobileHeaderToolbar,{aggregations:["content"]})}return this._oMobileHeaderToolbar};st.prototype._getMobileZoomToolbar=function(){if(!this._oMobileZoomToolbar){this._oMobileZoomToolbar=new a({enabled:"{/enabled}",content:[this._getMobileZoomInButton(),this._getMobileZoomLabel(),this._getMobileZoomOutButton(),this._getMobileZoomToFitButton(),this._getMobileScaleSwitch(),this._getMobileScaleLabel()]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileToolbar");this._oMobileZoomToolbar.setModel(this._oModel);this.addDependent(this._oMobileZoomToolbar)}return this._oMobileZoomToolbar};st.prototype._getMobileFooterToolbar=function(){if(!this._oMobileFooterToolbar){this._oMobileFooterToolbar=new a({enabled:"{/enabled}"}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileToolbar");this._oMobileFooterToolbar.setModel(this._oModel);this.addDependent(this._oMobileFooterToolbar);if(this._oMobileFooterToolbar._applyContextClassFor){this._oMobileFooterToolbar._applyContextClassFor("footer")}else{G.warning("ImageEditorContainer: _applyContextClassFor method doesn't exist, footer look is not applied on mobile footer toolbar")}}return this._oMobileFooterToolbar};st.prototype._getHistoryPopover=function(){var t=this;if(!this._oHistoryPopover){this._oHistoryPopover=new M({title:{path:"/history",formatter:function(t){return N.getText("IMGEDITOR_HISTORY_TITLE",String(t.length-1))}},endButton:new b({text:N.getText("IMGEDITOR_HISTORY_CLOSE"),press:function(){t._oHistoryPopover.close()}}),afterOpen:function(){var e=t._oModel.getProperty("/historyIndex"),o=t._oHistoryList.getItems()[e];t._oHistoryList.setSelectedItem(o);o.focus()}});this._oHistoryList=new E({mode:X.SingleSelectMaster,selectionChange:function(e){var o=e.getParameter("listItem"),i=o.getParent().indexOfItem(o);t._jumpToHistory(i)},items:{path:"/history",factory:this._historyItemFactory.bind(this)}});this._oHistoryPopover.setModel(this._oModel);this._oHistoryPopover.addContent(this._oHistoryList);this.addDependent(this._oHistoryPopover)}return this._oHistoryPopover};st.prototype._historyItemFactory=function(t,e){var o=this._oModel.getProperty("/history").indexOf(e.getProperty()),i=e.getProperty(),r,s,a,n;switch(i.noChange||i.getMetadata().getName()){case"sap.suite.ui.commons.imageeditor.RotateHistoryItem":{s=N.getText("IMGEDITOR_ROTATE");a=i.getDegrees();n=rt.TRANSFORM;break}case"sap.suite.ui.commons.imageeditor.ResizeHistoryItem":{s=N.getText("IMGEDITOR_RESIZE");a=N.getText("IMGEDITOR_HISTORY_TEXT",[i.getOldWidth()+" x "+i.getOldHeight(),i.getWidth()+" x "+i.getHeight()]);n=rt.TRANSFORM;break}case"sap.suite.ui.commons.imageeditor.FlipHistoryItem":{s=N.getText("IMGEDITOR_FLIP");if(i.getVertical()&&i.getHorizontal()){a=N.getText("IMGEDITOR_FLIP_BOTH");n=rt.FLIPHORIZONTAL}else{a=i.getVertical()?N.getText("IMGEDITOR_FLIP_VERTICAL"):N.getText("IMGEDITOR_FLIP_HORIZONTAL");n=i.getVertical()?rt.FLIPVERTICAL:rt.FLIPHORIZONTAL}break}case"sap.suite.ui.commons.imageeditor.FilterHistoryItem":{s=i.getType();s=s[0].toUpperCase()+s.slice(1);a=i.getValue();n=rt.FILTER;break}case"sap.suite.ui.commons.imageeditor.CropRectangleHistoryItem":case"sap.suite.ui.commons.imageeditor.CropEllipseHistoryItem":case"sap.suite.ui.commons.imageeditor.CropCustomShapeHistoryItem":{s=N.getText("IMGEDITOR_CROP");a=N.getText("IMGEDITOR_HISTORY_TEXT",[i.getOldWidth()+" x "+i.getOldHeight(),i.getWidth()+" x "+i.getHeight()]);n=rt.CROP;break}case"NoChange":{s=N.getText("IMGEDITOR_HISTORY_ORIGINAL");a=N.getText("IMGEDITOR_HISTORY_ORIGINAL_TEXT");n=rt.RESET;break}default:{break}}r=new R({title:s,description:a,icon:n,selected:{path:"/historyIndex",formatter:function(t){return o===t}}});return r};st.prototype._getHistoryItems=function(){if(!this._aHistoryItems){this._aHistoryItems=[this._getUndoButton(),this._getHistoryArrowButton()]}return this._aHistoryItems};st.prototype._getMobileHistoryItems=function(){if(!this._aMobileHistoryItems){this._aMobileHistoryItems=[this._getMobileUndoButton(),this._getMobileHistoryArrowButton()]}return this._aMobileHistoryItems};st.prototype._getUndoButton=function(){if(!this._oHistoryButton){this._oHistoryButton=this._createUndoButton(this.getId()+"-undoButton");this.addDependent(this._oHistoryButton)}return this._oHistoryButton};st.prototype._getMobileUndoButton=function(){if(!this._oMobileHistoryButton){this._oMobileHistoryButton=this._createUndoButton(this.getId()+"-mobileUndoButton");this.addDependent(this._oMobileHistoryButton)}return this._oMobileHistoryButton};st.prototype._createUndoButton=function(t){var e=this;return new n({id:t,type:j.Transparent,icon:rt.UNDO,enabled:{parts:["/history","/historyIndex"],formatter:function(t,e){return t.length>1&&e<t.length-1}},press:function(){e._undo()},tooltip:N.getText("IMGEDITOR_PANEL_UNDO")})};st.prototype._getHistoryArrowButton=function(){var t=this;if(!this._oHistoryArrowButton){this._oHistoryArrowButton=this._createHistoryArrowButton(this.getId()+"-historyButton",function(){t._resetValueStates();t._getHistoryPopover().openBy(t._oHistoryArrowButton)});this.addDependent(this._oHistoryArrowButton)}return this._oHistoryArrowButton};st.prototype._getMobileHistoryArrowButton=function(){var t=this;if(!this._oMobileHistoryArrowButton){this._oMobileHistoryArrowButton=this._createHistoryArrowButton(this.getId()+"-mobileHistoryButton",function(){t._resetValueStates();t._getHistoryPopover().openBy(t._oMobileHistoryArrowButton)});this.addDependent(this._oMobileHistoryArrowButton)}return this._oMobileHistoryArrowButton};st.prototype._createHistoryArrowButton=function(t,e){return new n({id:t,type:j.Transparent,icon:rt.DROPDOWN,enabled:{path:"/history",formatter:function(t){return t.length>1}},press:e,tooltip:N.getText("IMGEDITOR_PANEL_HISTORY")})};st.prototype._getZoomItems=function(){if(!this._aZoomItems){this._aZoomItems=[this._getZoomInButton(),this._getZoomLabel(),this._getZoomOutButton(),this._getZoomToFitButton()]}return this._aZoomItems};st.prototype._getZoomInButton=function(){if(!this._oZoomInButton){this._oZoomInButton=this._createZoomInButton(this.getId()+"-zoominButton");this.addDependent(this._oZoomInButton)}return this._oZoomInButton};st.prototype._getMobileZoomInButton=function(){if(!this._oMobileZoomInButton){this._oMobileZoomInButton=this._createZoomInButton(this.getId()+"-mobileZoominButton");this.addDependent(this._oMobileZoomInButton)}return this._oMobileZoomInButton};st.prototype._createZoomInButton=function(t){var e=this;return new n({id:t,type:j.Transparent,icon:rt.ZOOMIN,press:function(){var t=e.getImageEditor();t.zoomIn();e._oModel.setProperty("/zoom",t.getZoomLevel());e._refreshCropAreaSize()},tooltip:N.getText("IMGEDITOR_PANEL_ZOOMIN")})};st.prototype._getZoomLabel=function(){if(!this._oZoomLabel){this._oZoomLabel=this._createZoomLabel(this.getId()+"-zoomLabel");this.addDependent(this._oZoomLabel)}return this._oZoomLabel};st.prototype._getMobileZoomLabel=function(){if(!this._oMobileZoomLabel){this._oMobileZoomLabel=this._createZoomLabel(this.getId()+"-mobileZoomLabel");this.addDependent(this._oMobileZoomLabel)}return this._oMobileZoomLabel};st.prototype._createZoomLabel=function(t){return new g({id:t,text:{path:"/zoom",formatter:function(t){return t+"%"}}})};st.prototype._getZoomOutButton=function(){if(!this._oZoomOutButton){this._oZoomOutButton=this._createZoomOutButton(this.getId()+"-zoomoutButton");this.addDependent(this._oZoomOutButton)}return this._oZoomOutButton};st.prototype._getMobileZoomOutButton=function(){if(!this._oMobileZoomOutButton){this._oMobileZoomOutButton=this._createZoomOutButton(this.getId()+"-mobileZoomoutButton");this.addDependent(this._oMobileZoomOutButton)}return this._oMobileZoomOutButton};st.prototype._createZoomOutButton=function(t){var e=this;return new n({id:t,type:j.Transparent,icon:rt.ZOOMOUT,press:function(){var t=e.getImageEditor();t.zoomOut();e._oModel.setProperty("/zoom",t.getZoomLevel());e._refreshCropAreaSize()},tooltip:N.getText("IMGEDITOR_PANEL_ZOOMOUT")})};st.prototype._getZoomToFitButton=function(){if(!this._oZoomToFit){this._oZoomToFit=this._createZoomToFitButton(this.getId()+"-zoomToFitButton");this.addDependent(this._oZoomToFit)}return this._oZoomToFit};st.prototype._getMobileZoomToFitButton=function(){if(!this._oMobileZoomToFit){this._oMobileZoomToFit=this._createZoomToFitButton(this.getId()+"-mobileZoomToFitButton");this.addDependent(this._oMobileZoomToFit)}return this._oMobileZoomToFit};st.prototype._createZoomToFitButton=function(t){var e=this;return new n({id:t,type:j.Transparent,icon:rt.ZOOMFIT,press:e._zoomToFit.bind(e),tooltip:N.getText("IMGEDITOR_PANEL_ZOOMTOFIT")})};st.prototype._getScaleSwitch=function(){if(!this._oScaleSwitch){this._oScaleSwitch=this._createScaleSwitch(this.getId()+"-scaleSwitch");this.addDependent(this._oScaleSwitch)}return this._oScaleSwitch};st.prototype._getMobileScaleSwitch=function(){if(!this._oMobileScaleSwitch){this._oMobileScaleSwitch=this._createScaleSwitch(this.getId()+"-mobileScaleSwitch");this.addDependent(this._oMobileScaleSwitch)}return this._oMobileScaleSwitch};st.prototype._createScaleSwitch=function(t){var e=this;return new F({id:t,type:et.AcceptReject,state:"{/crop/scaleCropArea}",visible:{path:"/mode",formatter:function(t){return t==="Crop"}},change:function(t){e._setScaleCropArea(t.getParameter("state"))}}).addStyleClass("sapUiTinyMarginEnd")};st.prototype._getScaleLabel=function(){if(!this._oScaleLabel){this._oScaleLabel=this._createScaleLabel(this.getId()+"-scaleLabel");this.addDependent(this._oScaleLabel)}return this._oScaleLabel};st.prototype._getMobileScaleLabel=function(){if(!this._oMobileScaleLabel){this._oMobileScaleLabel=this._createScaleLabel(this.getId()+"-mobileScaleLabel");this.addDependent(this._oMobileScaleLabel)}return this._oMobileScaleLabel};st.prototype._createScaleLabel=function(t){return new g({text:N.getText("IMGEDITOR_CROP_SCALE"),labelFor:t,visible:{path:"/mode",formatter:function(t){return t==="Crop"}}})};st.prototype._getToolbarSeparator=function(){if(!this._oSeparator){this._oSeparator=new d({id:this.getId()+"-separator"});this.addDependent(this._oSeparator)}return this._oSeparator};st.prototype._getTransformButton=function(){if(!this._oTransformButton){this._oTransformButton=this._createTransformButton(this.getId()+"-transformButton");this.addDependent(this._oTransformButton)}return this._oTransformButton};st.prototype._getMobileTransformButton=function(){if(!this._oMobileTransformButton){this._oMobileTransformButton=this._createTransformButton(this.getId()+"-mobileTransformButton");this.addDependent(this._oMobileTransformButton)}return this._oMobileTransformButton};st.prototype._createTransformButton=function(t){return new l({id:t,icon:rt.TRANSFORM,type:j.Transparent,pressed:{path:"/mode",formatter:function(t){return t===U.Transform}},enabled:{path:"/mode",formatter:function(t){return t!==U.Transform}},press:this._onButtonPress.bind(this,this._setModeTransform.bind(this)),tooltip:N.getText("IMGEDITOR_PANEL_TRANSFORM")})};st.prototype._getCropButton=function(){if(!this._oCropButton){this._oCropButton=this._createCropButton(this.getId()+"-cropButton");this.addDependent(this._oCropButton)}return this._oCropButton};st.prototype._getMobileCropButton=function(){if(!this._oMobileCropButton){this._oMobileCropButton=this._createCropButton(this.getId()+"-mobileCropButton");this.addDependent(this._oMobileCropButton)}return this._oMobileCropButton};st.prototype._createCropButton=function(t){return new l({id:t,icon:rt.CROP,type:j.Transparent,pressed:{path:"/mode",formatter:function(t){return t===U.Crop}},enabled:{path:"/mode",formatter:function(t){return t!==U.Crop}},press:this._onButtonPress.bind(this,this._setModeCrop.bind(this)),tooltip:N.getText("IMGEDITOR_PANEL_CROP")})};st.prototype._getFilterButton=function(){if(!this._oFilterButton){this._oFilterButton=this._createFilterButton(this.getId()+"-filterButton");this.addDependent(this._oFilterButton)}return this._oFilterButton};st.prototype._getMobileFilterButton=function(){if(!this._oMobileFilterButton){this._oMobileFilterButton=this._createFilterButton(this.getId()+"-mobileFilterButton");this.addDependent(this._oMobileFilterButton)}return this._oMobileFilterButton};st.prototype._createFilterButton=function(t){return new l({id:t,icon:rt.FILTER,type:j.Transparent,pressed:{path:"/mode",formatter:function(t){return t===U.Filter}},enabled:{path:"/mode",formatter:function(t){return t!==U.Filter}},press:this._onButtonPress.bind(this,this._setModeFilter.bind(this)),tooltip:N.getText("IMGEDITOR_PANEL_FILTER")})};st.prototype._getMobileApplyButton=function(){if(!this._oMobileApplyButton){this._oMobileApplyButton=new b({id:this.getId()+"-mobileApplyButton",text:N.getText("IMGEDITOR_APPLY"),type:j.Emphasized,press:this._applyPreview.bind(this)})}return this._oMobileApplyButton};st.prototype._changeOptionsPanelContent=function(t){var e=this._getOptionsPanel();e.removeAllItems();if(!this.getImageEditor()||!this.getImageEditor().getLoaded()||!t){return}t().forEach(function(t){e.addItem(t)})};st.prototype._onButtonPress=function(t){this.getImageEditor()._cancelPreview();t()};st.prototype._setModeTransform=function(t){this._changeOptionsPanelContent(this._getTransformPanelContent.bind(this));if(this.getImageEditor()){this.getImageEditor().setMode(V.Resize)}if(this.getMode()!==U.Transform){this.setProperty("mode",U.Transform,true)}this._setTransformTypeByKey(t||"Resize");this._oModel.setProperty("/mode",U.Transform)};st.prototype._setModeCrop=function(t){this._changeOptionsPanelContent(this._getCropPanelContent.bind(this));if(this.getImageEditor()){this._setCropTypeByKey(t||"Rectangle")}if(this.getMode()!==U.Crop){this.setProperty("mode",U.Crop,true)}this._oModel.setProperty("/mode",U.Crop);this._setScaleCropArea(this._oModel.getProperty("/crop/scaleCropArea"))};st.prototype._setModeFilter=function(){this._changeOptionsPanelContent(this._getFilterPanelContent.bind(this));if(this.getImageEditor()){this.getImageEditor().setMode(V.Default)}if(this.getMode()!==U.Filter){this.setProperty("mode",U.Filter,true)}this._resetFilterValues();this._selectFilterItem(0);this._oModel.setProperty("/mode",U.Filter)};st.prototype._constraintValue=function(t,e,o){var i=o.getBinding("value"),r=o.getBinding("valueState"),s=o.getBinding("valueStateText"),a;if(isNaN(t)||t<e.min||t>e.max){a=N.getText("IMGEDITOR_BAD_NUMBER",[e.min,e.max]);t=this._oModel.getProperty(i.getPath())}if(a){this._oModel.setProperty(r.getPath(),W.Warning);this._oModel.setProperty(s.getPath(),a)}this._oModel.setProperty(i.getPath(),t);o.setValue(t);return t};st.prototype._onNumberInputChange=function(t,e){var o=e.getParameter("value"),i=e.getParameter("newValue"),r;this._resetValueStates();if(typeof o==="number"){r=o}else if(typeof i==="number"){r=i}else{r=parseInt(e.getParameter("value")||e.getParameter("newValue"),10)}r=this._constraintValue(r,t,e.getSource());this[t.callback](r)};st.prototype._setRatio=function(t,e){if(!this.getImageEditor()||!this.getImageEditor().getLoaded()){return}this.getImageEditor().setCropAreaByRatio(t,e);this._refreshCropAreaSize()};st.prototype._setCropAreaBySize=function(t,e){this.getImageEditor().setCropAreaBySize(t,e);this._refreshCropAreaSize()};st.prototype._setRatioByKey=function(t){if(t==="Rectangle"){this._setRatio(this._oModel.getProperty("/crop/ratiosRectangle/1/width"),this._oModel.getProperty("/crop/ratiosRectangle/1/height"))}else if(t==="Ellipse"){this._setRatio(1,1)}else if(t==="CustomShape"&&this.getImageEditor().getCustomShapeLoaded()){this._setCustomShapeCropAreaRatio()}};st.prototype._setCustomShapeCropAreaRatio=function(){this.getImageEditor().setCustomShapeCropAreaRatio();this._refreshCropAreaSize()};st.prototype._setTransformTypeByKey=function(t){var e=t==="Resize"?V.Resize:V.Default;if(t==="Resize"){this._refreshImageSize();this._selectResizeCustomSizeItem()}else if(t==="Rotate"){this._oModel.setProperty("/transform/rotate",0)}else if(t==="Flip"){this._resetFlips()}this._oModel.setProperty("/transform/selectedTypeKey",t);this._resetValueStates();if(this.getImageEditor()){this.getImageEditor()._cancelPreview();this.getImageEditor().setMode(e)}};st.prototype._setCropTypeByKey=function(t,e){var o=this._oModel.getProperty("/crop/types").filter(function(e){return e.key===t})[0];this._setRatioByKey(t);this._oModel.setProperty("/crop/selectedTypeKey",t);this._oModel.setProperty("/crop/selectedType",o);if(this["_select"+t+"CropCustomSizeItem"]){this["_select"+t+"CropCustomSizeItem"](e)}this.getImageEditor().setMode("Crop"+t);this._resetValueStates()};st.prototype._resetCurrentPanel=function(){this.getImageEditor().cancelPreview();switch(this.getMode()){case U.Transform:{this._setTransformTypeByKey(this._oModel.getProperty("/transform/selectedTypeKey"));break}case U.Crop:{this._setCropTypeByKey(this._oModel.getProperty("/crop/selectedTypeKey"));break}case U.Filter:{this._selectFilterItem(this._getSelectedFilterIndex());break}default:break}this._resetValueStates()};st.prototype._undo=function(){this.getImageEditor().undo();this._resetCurrentPanel()};st.prototype._redo=function(){this.getImageEditor().redo();this._resetCurrentPanel()};st.prototype._jumpToHistory=function(t){this.getImageEditor().jumpToHistory(t);this._resetCurrentPanel()};st.prototype._setZoom=function(t){this._oModel.setProperty("/zoom",t);this.getImageEditor().zoom(t);this._refreshCropAreaSize()};st.prototype._setWidth=function(t){this.getImageEditor().setWidth(t,true);this._oModel.setProperty("/transform/height",this.getImageEditor().getPreviewHeight());this._selectResizeCustomSizeItem(this.getImageEditor().getKeepResizeAspectRatio())};st.prototype._setHeight=function(t){this.getImageEditor().setHeight(t,true);this._oModel.setProperty("/transform/width",this.getImageEditor().getPreviewWidth());this._selectResizeCustomSizeItem(this.getImageEditor().getKeepResizeAspectRatio())};st.prototype._setSize=function(t,e,o){if(o){t=this.getImageEditor().getWidth()*t;e=this.getImageEditor().getHeight()*e}this._updateCurrentSize(t,e);if(this.getImageEditor().getPreviewWidth()===t&&this.getImageEditor().getPreviewHeight()===e){return}this.getImageEditor().setSize(t,e,true)};st.prototype._rotate=function(t){t=t>s.LIMITS.ROTATION_MAX?s.LIMITS.ROTATION_MAX:t;t=t<s.LIMITS.ROTATION_MIN?s.LIMITS.ROTATION_MIN:t;this._oModel.setProperty("/transform/rotate",t);this.getImageEditor().rotate(t,true)};st.prototype._flip=function(t,e){this.getImageEditor().flip(t,e,true)};st.prototype._setKeepResizeAspectRatio=function(t){this._oModel.setProperty("/transform/keepAspectRatio",t);if(this.getImageEditor()){this.getImageEditor().setKeepResizeAspectRatio(t)}};st.prototype._getKeepCropAspectRatio=function(){return this._oModel.getProperty("/crop/keepAspectRatio")};st.prototype._setKeepCropAspectRatio=function(t){this._oModel.setProperty("/crop/keepAspectRatio",t);if(this.getImageEditor()){this.getImageEditor().setKeepCropAspectRatio(t)}};st.prototype._setScaleCropArea=function(t){this._oModel.setProperty("/crop/scaleCropArea",t);if(this.getImageEditor()){this.getImageEditor().setScaleCropArea(t)}};st.prototype._applyCurrentFilter=function(t){var e=this._oModel.getProperty("/filter/selectedFilter");if(typeof t!=="undefined"){this._oModel.setProperty("/filter/selectedFilter/value",t)}this.getImageEditor()[e.type](e.value,true)};st.prototype._resetFilterValues=function(){var t=this._oModel.getProperty("/filter/filters");t.forEach(function(t,e){this._oModel.setProperty("/filter/filters/"+e+"/value",t.defaultValue)},this)};st.prototype._resetValueStates=function(){var t=["/transform/widthValueState","/transform/heightValueState","/transform/rotateValueState","/crop/widthValueState","/crop/heightValueState","/filter/filterValueState"];t.forEach(function(t){this._oModel.setProperty(t,W.None)},this)};st.prototype._resetFlips=function(){this._oModel.setProperty("/transform/flipVertical",false);this._oModel.setProperty("/transform/flipHorizontal",false)};st.prototype._applyPreview=function(){this.getImageEditor().applyPreview();this._resetValueStates();switch(this.getMode()){case U.Transform:{switch(this._oModel.getProperty("/transform/selectedTypeKey")){case"Resize":{this._refreshImageSize();break}case"Rotate":{this._oModel.setProperty("/transform/rotate",0);this._refreshImageSize();break}case"Flip":{this._resetFlips();break}default:break}break}case U.Crop:{var t=this._oModel.getProperty("/crop/selectedType/apply");if(t){this.getImageEditor()[t]()}this._refreshImageSize();this._setRatioByKey(this._oModel.getProperty("/crop/selectedTypeKey"));this._deselectCropItem();this.getImageEditor().setMode(V.Default);break}case U.Filter:{this._resetFilterValues();break}default:break}};st.prototype._createGridList=function(t,e,o){var i=this;var r=new E({width:"auto",mode:"SingleSelectMaster",itemPress:function(t){i._resetValueStates();o.call(i,t)},items:{path:t,factory:e.bind(this)}}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridList");r.setModel(this._oModel);if(!r._oItemNavigation){r._startItemNavigation()}if(r._oItemNavigation){r._oItemNavigation.setColumns(2)}return r};st.prototype._selectResizeCustomSizeItem=function(t){var e=this._getResizeGridList(),o=e.getItems()[0];e.setSelectedItem(o);this._setKeepResizeAspectRatio(!!t)};st.prototype._deselectCropItem=function(){this._getRectangleCropGridList().removeSelections();this._getEllipseCropGridList().removeSelections();this._disableCrop()};st.prototype._disableCrop=function(){this._oModel.setProperty("/crop/enabled",false)};st.prototype._enableCrop=function(){this._oModel.setProperty("/crop/enabled",true)};st.prototype._selectRectangleCropCustomSizeItem=function(t){var e=this._getRectangleCropGridList(),o=e.getItems()[0];e.setSelectedItem(o);this._setKeepCropAspectRatio(!!t);this._enableCrop()};st.prototype._selectEllipseCropCustomSizeItem=function(t){var e=this._getEllipseCropGridList(),o=e.getItems()[0];e.setSelectedItem(o);this._setKeepCropAspectRatio(!!t);this._enableCrop()};st.prototype._selectCustomShapeCropCustomSizeItem=function(t){var e=this._getCustomShapeCropGridList(),o=e.getItems()[0];e.setSelectedItem(o);this._setKeepCropAspectRatio(!!t);this._enableCrop()};st.prototype._selectFilterItem=function(t){var e=this._getFilterGridList(),o=e.getItems()[t];this._oModel.setProperty("/filter/selectedFilter",o.getBindingContext().getProperty());this._oModel.setProperty("/filter/selectedFilter/value",this._oModel.getProperty("/filter/selectedFilter/defaultValue"));e.setSelectedItem(o)};st.prototype._getSelectedFilterIndex=function(){var t=this._oModel.getProperty("/filter/selectedFilter"),e=t?this._oModel.getProperty("/filter/filters").indexOf(t):0;return e};st.prototype._getResizeGridList=function(){if(!this._oGridListResize){this._oGridListResize=this._createGridList("/transform/resizes",this._gridRectShapeItemFactory,this._onResizeGridListSelectionChange)}return this._oGridListResize};st.prototype._onResizeGridListSelectionChange=function(t){var e=t.getParameter("listItem"),o=e.getBindingContext();if(o.getProperty("width")){this._setSize(o.getProperty("width"),o.getProperty("height"),o.getProperty("relative"))}this._setKeepResizeAspectRatio(!o.getProperty("unlockRatio"))};st.prototype._getRotateGridList=function(){if(!this._oGridListRotate){this._oGridListRotate=this._createGridList("/transform/rotates",this._gridRectShapeItemFactory,this._onRotateGridListSelectionChange)}return this._oGridListRotate};st.prototype._onRotateGridListSelectionChange=function(t){var e=t.getParameter("listItem"),o=e.getBindingContext();this._getRotateGridList().removeSelections();this._rotate(this._oModel.getProperty("/transform/rotate")+o.getProperty("rotate"))};st.prototype._getFlipGridList=function(){if(!this._oGridListFlip){this._oGridListFlip=this._createGridList("/transform/flips",this._gridRectShapeItemFactory,this._onFlipGridListSelectionChange)}return this._oGridListFlip};st.prototype._onFlipGridListSelectionChange=function(t){var e=t.getParameter("listItem"),o=e.getBindingContext(),i=this._oModel.getProperty("/transform/flipVertical"),r=this._oModel.getProperty("/transform/flipHorizontal");this._getFlipGridList().removeSelections();i=i!==o.getProperty("flipVertical");r=r!==o.getProperty("flipHorizontal");this._oModel.setProperty("/transform/flipVertical",i);this._oModel.setProperty("/transform/flipHorizontal",r);this._flip(i,r)};st.prototype._getRectangleCropGridList=function(){if(!this._oGridListRectCrop){this._oGridListRectCrop=this._createGridList("/crop/ratiosRectangle",this._gridRectShapeItemFactory,this._onRectCropGridListSelectionChange)}return this._oGridListRectCrop};st.prototype._onRectCropGridListSelectionChange=function(t){var e=t.getParameter("listItem");this._onGridListSelectionChange(e,V.CropRectangle)};st.prototype._getEllipseCropGridList=function(){if(!this._oGridListEllipseCrop){this._oGridListEllipseCrop=this._createGridList("/crop/ratiosCircle",this._gridCircleShapeItemFactory,this._onEllipseCropGridListSelectionChange)}return this._oGridListEllipseCrop};st.prototype._onEllipseCropGridListSelectionChange=function(t){var e=t.getParameter("listItem");this._onGridListSelectionChange(e,V.CropEllipse)};st.prototype._getCustomShapeCropGridList=function(){if(!this._oGridListCustomShapeCrop){this._oGridListCustomShapeCrop=this._createGridList("/crop/ratiosCustomShape",this._gridRectShapeItemFactory,this._onCustomShapeCropGridListSelectionChange);this._oGridListCustomShapeCrop.setModel(this._oModel)}return this._oGridListCustomShapeCrop};st.prototype._onCustomShapeCropGridListSelectionChange=function(t){var e=t.getParameter("listItem");this._onGridListSelectionChange(e,V.CropCustomShape)};st.prototype._onGridListSelectionChange=function(t,e){var o=t.getBindingContext(),i=this.getImageEditor();i.setMode(e);if(o.getProperty("callback")){this[o.getProperty("callback")]()}if(o.getProperty("width")&&o.getProperty("relative")){this._setRatio(o.getProperty("width"),o.getProperty("height"))}else if(o.getProperty("width")&&!o.getProperty("relative")){this._setCropAreaBySize(o.getProperty("width"),o.getProperty("height"))}this._enableCrop();this._setKeepCropAspectRatio(!o.getProperty("unlockRatio"))};st.prototype._getFilterGridList=function(){if(!this._oGridListFilter){this._oGridListFilter=this._createGridList("/filter/filters",this._gridFilterItemFactory,this._onFilterGridListSelectionChange)}return this._oGridListFilter};st.prototype._onFilterGridListSelectionChange=function(t){var e=t.getParameter("listItem"),o=e.getBindingContext();this._resetFilterValues();this._oModel.setProperty("/filter/selectedFilter",o.getProperty());this.getImageEditor().cancelPreview();this.getImageEditor()[o.getProperty("type")](o.getProperty("value"),true)};st.prototype._gridRectShapeItemFactory=function(t,e){var o;if(e.getProperty("icon")){o=new P({renderType:$.Bare,alignItems:q.Center,justifyContent:J.Center,items:[new B({src:"{icon}"})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItemIcon")}else{o=this._createGridItemRectShape(e.getProperty("width"),e.getProperty("height"))}return this._createGridListItem(o)};st.prototype._gridCircleShapeItemFactory=function(t,e){var o;if(e.getProperty("icon")){o=new P({renderType:$.Bare,alignItems:q.Center,justifyContent:J.Center,items:[new B({src:"{icon}"})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItemIcon")}else{o=this._createGridItemCircleShape(e.getProperty("width"),e.getProperty("height"))}return this._createGridListItem(o)};st.prototype._refreshGridListsItems=function(){var t=this,e=[{path:"/transform/resizes",fnGetItems:this.getCustomResizeItems.bind(this)},{path:"/crop/ratiosRectangle",fnGetItems:this.getCustomRectangleCropItems.bind(this)},{path:"/crop/ratiosCircle",fnGetItems:this.getCustomEllipseCropItems.bind(this)}];this.getCustomResizeItems().forEach(function(t){if(t.getRelative()&&!t.getIcon()){t.setIcon(rt.RELATIVE)}});e.forEach(function(e){var o=t._oModel.getProperty(e.path),i=o.slice(0,at.NUM_KEPT_ITEMS);e.fnGetItems().forEach(function(t){if(t.getWidth()>0&&t.getHeight()>0){i.push({width:t.getWidth(),height:t.getHeight(),text:t.getLabel(),icon:t.getIcon(),relative:t.getRelative()})}});t._oModel.setProperty(e.path,i)})};st.prototype._createGridListItem=function(t){return new O({type:k.Active,content:[t,new g({text:"{text}",wrapping:false,textAlign:ot.Center,layoutData:[new L({growFactor:0,shrinkFactor:0,baseSize:"auto"})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItemLabel")]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItem")};st.prototype._createGridItemRectShape=function(t,e){var o,i;if(t<100){t*=10;e*=10}else if(t>100){t/=10;e/=10}o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("class","sapSuiteUiCommonsImageEditorContainerGridItemHeaderContent");o.setAttribute("viewBox","-1 -1 "+(t+2)+" "+(e+2));i=document.createElement("rect");i.setAttribute("x","0");i.setAttribute("y","0");i.setAttribute("width",t);i.setAttribute("height",e);o.appendChild(i);return new v({content:(new XMLSerializer).serializeToString(o)})};st.prototype._createGridItemCircleShape=function(t,e){var o,i;t*=100;e*=100;o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("class","sapSuiteUiCommonsImageEditorContainerGridItemHeaderContent");o.setAttribute("viewBox","-"+(t+2)+" -"+(e+2)+" "+(t*2+4)+" "+(e*2+4));i=document.createElement("ellipse");i.setAttribute("cx","0");i.setAttribute("cy","0");i.setAttribute("rx",t);i.setAttribute("ry",e);o.appendChild(i);return new v({content:(new XMLSerializer).serializeToString(o)})};st.prototype._gridFilterItemFactory=function(t,e){var o,i,r;i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("class","sapSuiteUiCommonsImageEditorContainerGridItemHeaderContent sapSuiteUiCommonsImageEditorContainerGridItemHeaderFilterContent");r=document.createElementNS("http://www.w3.org/2000/svg","use");r.setAttribute("href","#"+this.getId()+"-origThumbnail");r.setAttribute("filter","url(#"+this.getId()+"-"+e.getProperty("type")+")");i.appendChild(r);o=new v({content:(new XMLSerializer).serializeToString(i)});return this._createGridListItem(o)};st.prototype._getTransformPanelContent=function(){var t=this;if(!this._oTransformToolbarContent){this._oTransformToolbarContent=[new m({min:s.LIMITS.ROTATION_MIN,max:s.LIMITS.ROTATION_MAX,showAdvancedTooltip:true,visible:{path:"/transform/selectedTypeKey",formatter:function(t){return t==="Rotate"}},value:{path:"/transform/rotate",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,it.ROTATION),progress:true,ariaLabelledBy:[this.getId()+"-transformAngle"]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileSlider"),new A({tabDensityMode:Q.Compact,backgroundDesign:tt.Transparent,headerBackgroundDesign:tt.Transparent,expandable:false,select:function(e){var o=e.getParameter("key");t._setTransformTypeByKey(o)},selectedKey:"{/transform/selectedTypeKey}",items:[new w({key:"Resize",text:N.getText("IMGEDITOR_RESIZE"),content:[this._getResizeGridList(),new P({renderType:$.Bare,direction:Y.Column,items:[new P({renderType:$.Bare,justifyContent:J.SpaceBetween,items:[new P({renderType:$.Bare,direction:Y.Column,items:[new g({text:N.getText("IMGEDITOR_WIDTH"),labelFor:this.getId()+"-transformWidth"}),new c({id:this.getId()+"-transformWidth",type:Z.Number,textAlign:ot.Right,change:this._onNumberInputChange.bind(this,it.WIDTH),value:{path:"/transform/width",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/transform/widthValueState}",valueStateText:"{/transform/widthValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:N.getText("IMGEDITOR_PX")})]}),new P({renderType:$.Bare,direction:Y.Column,justifyContent:J.End,items:[new h({tooltip:N.getText("IMGEDITOR_LOCK_RATIO"),icon:rt.LOCK,type:j.Transparent,pressed:{path:"/transform/keepAspectRatio"},press:function(e){t._resetValueStates();t.getImageEditor().setKeepResizeAspectRatio(e.getParameter("pressed"));t._selectResizeCustomSizeItem(e.getParameter("pressed"))}})]}),new P({renderType:$.Bare,direction:Y.Column,items:[new g({text:N.getText("IMGEDITOR_HEIGHT"),labelFor:this.getId()+"-transformHeight"}),new c({id:this.getId()+"-transformHeight",type:Z.Number,textAlign:ot.Right,change:this._onNumberInputChange.bind(this,it.HEIGHT),value:{path:"/transform/height",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/transform/heightValueState}",valueStateText:"{/transform/heightValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:N.getText("IMGEDITOR_PX")})]})]}),new b({width:"50%",text:N.getText("IMGEDITOR_APPLY"),type:j.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")]}),new w({key:"Rotate",text:N.getText("IMGEDITOR_ROTATE"),content:[this._getRotateGridList(),new P({renderType:$.Bare,direction:Y.Column,items:[new g({id:this.getId()+"-transformAngle",text:N.getText("IMGEDITOR_TRANSFORM_ANGLE")}),new m({min:s.LIMITS.ROTATION_MIN,max:s.LIMITS.ROTATION_MAX,value:{path:"/transform/rotate",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,it.ROTATION),progress:true,ariaLabelledBy:[this.getId()+"-transformAngle"]}),new c({type:Z.Number,textAlign:ot.Right,width:"50%",fieldWidth:"50%",description:N.getText("IMGEDITOR_TRANSFORM_DEG"),change:this._onNumberInputChange.bind(this,it.ROTATION),value:{path:"/transform/rotate",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/transform/rotateValueState}",valueStateText:"{/transform/rotateValueStateText}",ariaLabelledBy:[this.getId()+"-transformAngle"]}),new b({width:"50%",text:N.getText("IMGEDITOR_APPLY"),type:j.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")]}),new w({key:"Flip",text:N.getText("IMGEDITOR_FLIP"),content:[this._getFlipGridList(),new P({renderType:$.Bare,direction:Y.Column,items:[new b({width:"50%",text:N.getText("IMGEDITOR_APPLY"),type:j.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")]})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerTabBar")];this._oTransformToolbarContent.forEach(function(t){this.addDependent(t)},this)}return this._oTransformToolbarContent};st.prototype._onCropSizeInputChange=function(t,e){var o=this._oModel.getProperty("/crop/width"),i=this._oModel.getProperty("/crop/height"),r=this._getKeepCropAspectRatio(),s,a,n,l,p,h=parseInt(e.getParameter("value"),10);h=isNaN(h)?0:h;if(t==="width"){n=o;s=h;a=r?s*i/o:i;p=this.getImageEditor()._getMaxCropAreaWidth(true);l=this.getImageEditor()._getMinCropAreaWidth(true)}else{n=i;a=h;s=r?a*o/i:o;p=this.getImageEditor()._getMaxCropAreaHeight(true);l=this.getImageEditor()._getMinCropAreaHeight(true)}this._resetValueStates();if(h>p||h<l){e.getSource().setValue(n);this._oModel.setProperty("/crop/"+t+"ValueState",W.Warning);this._oModel.setProperty("/crop/"+t+"ValueStateText",N.getText("IMGEDITOR_BAD_NUMBER",[l,p]))}else{this._setCropAreaBySize(s,a)}};st.prototype._getCropPanelContent=function(){var t=this;if(!this._oCropToolbarContent){this._oCropToolbarContent=[new A({tabDensityMode:Q.Compact,backgroundDesign:tt.Transparent,headerBackgroundDesign:tt.Transparent,expandable:false,select:function(e){var o=e.getParameter("key");t._setCropTypeByKey(o)},selectedKey:"{/crop/selectedTypeKey}",items:[new w({tooltip:N.getText("IMGEDITOR_CROP_RECTANGLE"),key:"Rectangle",text:"",content:[this._getRectangleCropGridList()]}),new w({tooltip:N.getText("IMGEDITOR_CROP_ELLIPSE"),key:"Ellipse",text:"",content:[this._getEllipseCropGridList()]}),new w({tooltip:N.getText("IMGEDITOR_CROP_CUSTOM"),key:"CustomShape",text:"",content:[this._getCustomShapeCropGridList(),this._getCustomShapeCropContent()]})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerTabBar").addStyleClass("sapSuiteUiCommonsImageEditorContainerFilterIcons"),new P({renderType:$.Bare,direction:Y.Column,items:[new P({renderType:$.Bare,justifyContent:J.SpaceBetween,items:[new P({renderType:$.Bare,direction:Y.Column,items:[new g({text:N.getText("IMGEDITOR_WIDTH"),labelFor:this.getId()+"-cropWidth"}),new c({id:this.getId()+"-cropWidth",type:Z.Number,textAlign:ot.Right,value:{path:"/crop/width",mode:"OneWay",type:"sap.ui.model.type.Integer"},valueState:"{/crop/widthValueState}",valueStateText:"{/crop/widthValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:N.getText("IMGEDITOR_PX"),change:this._onCropSizeInputChange.bind(this,"width"),enabled:{parts:["/crop/selectedTypeKey","/crop/customShapeLoaded","/crop/enabled"],formatter:function(t,e,o){return!(t==="CustomShape"&&!e)&&o}}})]}),new P({renderType:$.Bare,direction:Y.Column,justifyContent:J.End,items:[new h({tooltip:N.getText("IMGEDITOR_LOCK_RATIO"),icon:rt.LOCK,type:j.Transparent,pressed:{path:"/crop/keepAspectRatio"},press:function(e){var o=t.getImageEditor().getMode(),i,r;t._resetValueStates();if(t._oModel.getProperty("/crop/selectedTypeKey")==="Rectangle"){i=V.CropRectangle;r=t._selectRectangleCropCustomSizeItem.bind(t)}else if(t._oModel.getProperty("/crop/selectedTypeKey")==="Ellipse"){i=V.CropEllipse;r=t._selectEllipseCropCustomSizeItem.bind(t)}else{i=V.CropCustomShape;r=t._selectCustomShapeCropCustomSizeItem.bind(t)}if(o!==i){t.getImageEditor().setMode(i)}if(r){r(e.getParameter("pressed"))}}})]}),new P({renderType:$.Bare,direction:Y.Column,items:[new g({text:N.getText("IMGEDITOR_HEIGHT"),labelFor:this.getId()+"-cropHeight"}),new c({id:this.getId()+"-cropHeight",type:Z.Number,textAlign:ot.Right,value:{path:"/crop/height",mode:"OneWay",type:"sap.ui.model.type.Integer"},valueState:"{/crop/heightValueState}",valueStateText:"{/crop/heightValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:N.getText("IMGEDITOR_PX"),change:this._onCropSizeInputChange.bind(this,"height"),enabled:{parts:["/crop/selectedTypeKey","/crop/customShapeLoaded","/crop/enabled"],formatter:function(t,e,o){return!(t==="CustomShape"&&!e)&&o}}})]})]}),new P({renderType:$.Bare,alignItems:q.Center,items:[this._getScaleSwitch(),this._getScaleLabel()]}).addStyleClass("sapUiSmallMarginTopBottom"),new b({width:"50%",text:N.getText("IMGEDITOR_APPLY"),type:j.Emphasized,press:this._applyPreview.bind(this),enabled:{parts:["/crop/selectedTypeKey","/crop/customShapeLoaded","/crop/enabled"],formatter:function(t,e,o){return!(t==="CustomShape"&&!e)&&o}}})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")];this._oCropToolbarContent.forEach(function(t){this.addDependent(t)},this)}return this._oCropToolbarContent};st.prototype._getCustomShapeCropContent=function(){var t=this;if(!this.oCustomShapeContent){this.oCustomShapeContent=new P({renderType:$.Bare,direction:Y.Column,items:[new g({text:N.getText("IMGEDITOR_CROP_CUSTOM_FILE"),labelFor:this.getId()+"-customFile"}),new H({id:this.getId()+"-customFile",mimeType:"image/*",change:function(e){var o=e.getParameter("files")[0];if(!o){return}t._resetValueStates();t._enableCrop();t.getImageEditor().setMode(V.CropCustomShape);t.getImageEditor().setCustomShapeSrc(o)}})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea").addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelAreaMobile");this.addDependent(this.oCustomShapeContent)}return this.oCustomShapeContent};st.prototype._getFilterPanelContent=function(){var e=this;if(!this._oFilterToolbarContent){this._oFilterToolbarContent=[new m({min:"{/filter/selectedFilter/min}",max:"{/filter/selectedFilter/max}",showAdvancedTooltip:true,value:{path:"/filter/selectedFilter/value",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,it.FILTER),progress:true,ariaLabelledBy:[this.getId()+"-filterValue"]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileSlider"),this._getFilterGridList(),new P({renderType:$.Bare,direction:Y.Column,items:[new m({min:"{/filter/selectedFilter/min}",max:"{/filter/selectedFilter/max}",value:{path:"/filter/selectedFilter/value",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,it.FILTER),progress:true,ariaLabelledBy:[this.getId()+"-filterValue"]}),new g({id:this.getId()+"-filterValue",text:N.getText("IMGEDITOR_FILTER_VALUE")}),new c({type:Z.Number,textAlign:ot.Right,width:"5.9375rem",fieldWidth:"4.375rem",description:"{/filter/selectedFilter/unit}",change:function(o){e._onNumberInputChange(t.extend(it.FILTER,e._oModel.getProperty("/filter/selectedFilter")),o)},value:{path:"/filter/selectedFilter/value",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/filter/filterValueState}",valueStateText:"{/filter/filterValueStateText}",ariaLabelledBy:[this.getId()+"-filterValue"]}),new b({width:"50%",text:N.getText("IMGEDITOR_APPLY"),type:j.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")];this._oFilterToolbarContent.forEach(function(t){this.addDependent(t)},this)}return this._oFilterToolbarContent};st.prototype._getOptionsPanel=function(){if(!this._oOptionsPanel){this._oOptionsPanel=new P({renderType:$.Bare,direction:Y.Column});this._oOptionsPanel.addStyleClass("sapSuiteUiCommonsImageEditorContainerPanel");this._oOptionsPanel.setModel(this._oModel);this.addDependent(this._oOptionsPanel)}return this._oOptionsPanel};st.prototype.onkeydown=function(t){var e=this;function o(){return e._oModel.getProperty("/historyIndex")<e._oModel.getProperty("/history").length-1}if(t.ctrlKey&&t.key!=="Control"&&t.shiftKey&&t.key!=="Shift"){switch(t.key){case"z":case"Z":if(o()){this.getImageEditor().undo();if(o()){this._getUndoButton().focus()}else{this._getHistoryArrowButton().focus()}}t.preventDefault();break;case"y":case"Y":if(this._oModel.getProperty("/historyIndex")>0){this.getImageEditor().redo();this._getUndoButton().focus()}t.preventDefault();break;case"h":case"H":if(this._oModel.getProperty("/history").length>1){this._getHistoryArrowButton().focus();this._getHistoryPopover().openBy(this._oHistoryArrowButton)}t.preventDefault();break;default:break}}else if(t.ctrlKey&&t.key!=="Control"&&!t.shiftKey){switch(t.key){case"u":case"U":this._focusOnToolbar();t.preventDefault();break;case"g":case"G":this._focusOnPanel();t.preventDefault();break;case"i":case"I":this._focusOnImageEditor();t.preventDefault();break;case"e":case"E":this._setModeTransform("Resize");this._focusOnItem(this._getResizeGridList().getItems()[0]);t.preventDefault();break;case"r":case"R":this._setModeTransform("Rotate");this._focusOnItem(this._getRotateGridList().getItems()[0]);t.preventDefault();break;case"f":case"F":this._setModeTransform("Flip");this._focusOnItem(this._getFlipGridList().getItems()[0]);t.preventDefault();break;case"j":case"J":this._setModeCrop("Rectangle");this._focusOnItem(this._getRectangleCropGridList().getItems()[0]);t.preventDefault();break;case"s":case"S":this._setModeFilter();this._focusOnItem(this._getFilterGridList().getItems()[0]);t.preventDefault();break;case"Enter":this._applyPreview();break;default:break}}else if(t.altKey&&t.key!=="Alt"){switch(t.key){case"Enter":this._switchFocusPanelImage();t.preventDefault();break;default:break}}};st.prototype._focusFirstTabbable=function(t){var e=t.find(":tabbable").get(0);if(e){e.focus()}};st.prototype._focusOnToolbar=function(){this._focusFirstTabbable(this._getHeaderToolbar().$())};st.prototype._focusOnPanel=function(){this._focusFirstTabbable(this._getOptionsPanel().$())};st.prototype._focusOnImageEditor=function(){this._focusFirstTabbable(this.getImageEditor().$())};st.prototype._focusOnItem=function(t){if(t.getDomRef()){if(!this._getHistoryPopover().isOpen()){t.focus()}}else{var e={onAfterRendering:function(){t.removeEventDelegate(e);t.focus();if(t.getParent()&&t.getParent().isA("sap.m.List")){t.getParent()._startItemNavigation()}}};t.addEventDelegate(e)}};st.prototype._switchFocusPanelImage=function(){var t=document.activeElement;if(this._getOptionsPanel().getDomRef().contains(t)){this._focusOnImageEditor()}else{this._focusOnPanel()}};return st});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/ImageEditorContainerRenderer",["sap/ui/Device"],function(e){"use strict";var t=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var r={apiVersion:2};r.render=function(e,r){e.openStart("div",r).class("sapSuiteUiCommonsImageEditorContainer").attr("tabindex","0").attr("aria-label",t.getText("IMGEDITOR_ACCESSIBILITY_LABEL")).openEnd();this.renderSvgFilters(e,r);this.renderHeaderToolbar(e,r);this.renderMobileHeaderToolbar(e,r);e.openStart("div").class("sapSuiteUiCommonsImageEditorContainerContent").openEnd();this.renderOptionsPanel(e,r);this.renderImageEditor(e,r);e.close("div");this.renderMobileZoomToolbar(e,r);this.renderMobileFooterToolbar(e,r);e.close("div")};r.renderSvgFilters=function(e,t){e.openStart("svg").attr("width","0").attr("height","0").style("position","absolute").openEnd();e.openStart("defs").openEnd();this.renderOriginalThumbnail(e,t);this.renderSepiaFilter(e,t);this.renderGrayscaleFilter(e,t);this.renderSaturateFilter(e,t);this.renderInvertFilter(e,t);this.renderBrightnessFilter(e,t);this.renderContrastFilter(e,t);this.renderHueRotateFilter(e,t);e.close("defs");e.close("svg")};r.renderOriginalThumbnail=function(e,t){var r=t.getImageEditor();if(!r||!r._oCanvas){return}e.voidStart("image").attr("xmlns","http://www.w3.org/1999/xlink").attr("id",t.getId()+"-origThumbnail").attr("preserveAspectRatio","xMidYMid slice").attr("viewBox","0 0 "+t._oThumbnailCanvas.width+" "+t._oThumbnailCanvas.height).attr("href",r._oCanvas.toDataURL()).attr("width","100%").attr("height","100%").voidEnd()};r.renderSepiaFilter=function(e,t){e.openStart("filter").attr("id",t.getId()+"-sepia").openEnd();e.voidStart("feColorMatrix").attr("type","matrix").attr("values","0.393 0.769 0.189 0 0  0.349 0.686 0.168 0 0  0.272 0.534 0.131 0 0  0 0 0 1 0").voidEnd();e.close("filter")};r.renderGrayscaleFilter=function(e,t){e.openStart("filter").attr("id",t.getId()+"-grayscale").openEnd();e.voidStart("feColorMatrix").attr("type","matrix").attr("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0  0.2126 0.7152 0.0722 0 0 0 0 0 1 0").voidEnd();e.close("filter")};r.renderSaturateFilter=function(e,t){e.openStart("filter").attr("id",t.getId()+"-saturate").openEnd();e.voidStart("feColorMatrix").attr("type","saturate").attr("values","3").voidEnd();e.close("filter")};r.renderInvertFilter=function(e,t){e.openStart("filter").attr("id",t.getId()+"-invert").openEnd();e.openStart("feComponentTransfer").openEnd();e.voidStart("feFuncR").attr("type","table").attr("tableValues","1 0").voidEnd();e.voidStart("feFuncG").attr("type","table").attr("tableValues","1 0").voidEnd();e.voidStart("feFuncB").attr("type","table").attr("tableValues","1 0").voidEnd();e.close("feComponentTransfer");e.close("filter")};r.renderBrightnessFilter=function(e,t){e.openStart("filter").attr("id",t.getId()+"-brightness").openEnd();e.openStart("feComponentTransfer").openEnd();e.voidStart("feFuncR").attr("type","linear").attr("slope","3").voidEnd();e.voidStart("feFuncG").attr("type","linear").attr("slope","3").voidEnd();e.voidStart("feFuncB").attr("type","linear").attr("slope","3").voidEnd();e.close("feComponentTransfer");e.close("filter")};r.renderContrastFilter=function(e,t){e.openStart("filter").attr("id",t.getId()+"-contrast").openEnd();e.openStart("feComponentTransfer").openEnd();e.voidStart("feFuncR").attr("type","linear").attr("slope","3").attr("intercept","-0.3").voidEnd();e.voidStart("feFuncG").attr("type","linear").attr("slope","3").attr("intercept","-0.3").voidEnd();e.voidStart("feFuncB").attr("type","linear").attr("slope","3").attr("intercept","-0.3").voidEnd();e.close("feComponentTransfer");e.close("filter")};r.renderHueRotateFilter=function(e,t){e.openStart("filter").attr("id",t.getId()+"-hueRotate").openEnd();e.voidStart("feColorMatrix").attr("type","hueRotate").attr("values","90").voidEnd();e.close("filter")};r.renderHeaderToolbar=function(t,r){if(!e.system.phone&&!r._isSmallSize()){var n=r._getHeaderToolbar();t.renderControl(n)}};r.renderMobileHeaderToolbar=function(t,r){if(e.system.phone||r._isSmallSize()){var n=r._getMobileHeaderToolbar();t.renderControl(n)}};r.renderMobileZoomToolbar=function(e,t){var r=t._getMobileZoomToolbar();e.renderControl(r)};r.renderMobileFooterToolbar=function(e,t){var r=t._getMobileFooterToolbar();e.renderControl(r)};r.renderOptionsPanel=function(e,t){var r=t._getOptionsPanel();e.renderControl(r);t._refreshGridListsItems()};r.renderImageEditor=function(e,t){var r=t.getImageEditor();e.openStart("div").class("sapSuiteUiCommonsImageEditorContainerWrapper").openEnd();if(r){e.renderControl(r)}e.close("div")};return r},true);
sap.ui.predefine("sap/suite/ui/commons/imageeditor/ImageEditorRenderer",["sap/ui/Device"],function(t){"use strict";var e=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var r={apiVersion:2};var a={nw:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},ne:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},sw:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},se:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},n:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorCenter",handlers:["Horizontal"],types:["Rectangle","CustomShape","Ellipse"]},s:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorCenter",handlers:["Horizontal"],types:["Rectangle","CustomShape","Ellipse"]},w:{vertical:"sapSuiteUiCommonsImageEditorMiddle",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Vertical"],types:["Rectangle","CustomShape","Ellipse"]},e:{vertical:"sapSuiteUiCommonsImageEditorMiddle",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Vertical"],types:["Rectangle","CustomShape","Ellipse"]}};r.render=function(t,e){t.openStart("div",e);t.class("sapSuiteUiCommonsImageEditor").class("sapSuiteUiCommonsImageEditorEmpty").class("sapSuiteUiCommonsImageEditorMode"+e.getMode());if(e.getCustomShapeLoaded()){t.class("sapSuiteUiCommonsImageEditorModeCropCustomShapeLoaded")}t.openEnd();this.renderNoData(t,e);t.openStart("div");t.attr("id",e.getId()+"-canvasInnerContainer");t.attr("tabindex","0");t.attr("role","img");t.class("sapSuiteUiCommonsImageEditorCanvasInnerContainer");t.openEnd();this.renderTransformHandlers(t);this.renderSvgOverlay(t,e);this.renderCropArea(t,e);t.close("div");t.close("div")};r.renderNoData=function(t,r){t.openStart("div");t.class("sapSuiteUiCommonsImageEditorNoData");t.attr("tabindex","0");t.attr("aria-label",e.getText("IMGEDITOR_NO_IMAGE"));t.openEnd();t.openStart("div");t.class("sapSuiteUiCommonsImageEditorNoDataText");t.openEnd();t.text(e.getText("IMGEDITOR_NO_IMAGE"));t.close("div");t.close("div")};r.renderSvgOverlay=function(t,e){t.openStart("svg").class("sapSuiteUiCommonsImageEditorCropOverlayContainer").openEnd();t.openStart("defs").openEnd();t.voidStart("rect").attr("id",e.getId()+"-overlayMaskRect").voidEnd();t.voidStart("ellipse").attr("id",e.getId()+"-overlayMaskEllipse").voidEnd();t.openStart("image").attr("xmlns","http://www.w3.org/1999/xlink").attr("id",e.getId()+"-overlayMaskCustomBlack").attr("preserveAspectRatio","none").attr("x","0").attr("y","0").attr("width","100%").attr("height","100%");if(e._sBlackCustomShapeUrl){t.attr("href",e._sBlackCustomShapeUrl)}t.openEnd().close("image");t.openStart("image").attr("xmlns","http://www.w3.org/1999/xlink").attr("id",e.getId()+"-overlayMaskCustomWhite").attr("preserveAspectRatio","none").attr("x","0").attr("y","0").attr("width","100%").attr("height","100%");if(e._sWhiteCustomShapeUrl){t.attr("href",e._sWhiteCustomShapeUrl)}t.openEnd().close("image");t.openStart("mask").attr("id",e.getId()+"-darkOverlayMask").openEnd();t.voidStart("rect").attr("fill","white").attr("x","0").attr("y","0").attr("width","100%").attr("height","100%").voidEnd();t.voidStart("use").class("sapSuiteUiCommonsImageEditorCropItemRectangle").attr("fill","black").attr("href","#"+e.getId()+"-overlayMaskRect").voidEnd();t.voidStart("use").class("sapSuiteUiCommonsImageEditorCropItemEllipse").attr("fill","black").attr("href","#"+e.getId()+"-overlayMaskEllipse").voidEnd();t.voidStart("use").class("sapSuiteUiCommonsImageEditorCropItemCustomShape").attr("href","#"+e.getId()+"-overlayMaskCustomBlack").voidEnd();t.close("mask");t.openStart("mask").attr("id",e.getId()+"-lightOverlayClip").openEnd();t.voidStart("use").class("sapSuiteUiCommonsImageEditorCropItemRectangle").attr("fill","white").attr("href","#"+e.getId()+"-overlayMaskRect").voidEnd();t.voidStart("use").class("sapSuiteUiCommonsImageEditorCropItemEllipse").attr("fill","white").attr("href","#"+e.getId()+"-overlayMaskEllipse").voidEnd();t.voidStart("use").class("sapSuiteUiCommonsImageEditorCropItemCustomShape").attr("href","#"+e.getId()+"-overlayMaskCustomWhite").voidEnd();t.close("mask");t.close("defs");t.voidStart("rect").class("sapSuiteUiCommonsImageEditorCropOverlayBlack").attr("mask","url(#"+e.getId()+"-darkOverlayMask)").attr("x","0").attr("y","0").attr("width","100%").attr("height","100%").voidEnd();t.voidStart("rect").class("sapSuiteUiCommonsImageEditorCropOverlayWhite").attr("mask","url(#"+e.getId()+"-lightOverlayClip)").attr("fill","white").attr("x","0").attr("y","0").attr("width","100%").attr("height","100%").voidEnd();t.close("svg")};r.renderCropArea=function(t,e){t.openStart("div").class("sapSuiteUiCommonsImageEditorCropInnerRectangle").openEnd();t.openStart("svg").class("sapSuiteUiCommonsImageEditorCropSvg").openEnd();t.openStart("defs").openEnd();t.openStart("mask").attr("id",e.getId()+"-thirdsMask").attr("maskContentUnits","objectBoundingBox").openEnd();t.voidStart("rect").class("sapSuiteUiCommonsImageEditorCropItemRectangle").attr("fill","white").attr("width","1").attr("height","1").voidEnd();t.voidStart("ellipse").class("sapSuiteUiCommonsImageEditorCropItemEllipse").attr("fill","white").attr("cx","0.5").attr("cy","0.5").attr("rx","0.5").attr("ry","0.5").voidEnd();t.close("mask");this.renderShadowFilter(t,e.getId()+"-bottomShadow",0,2);this.renderShadowFilter(t,e.getId()+"-topShadow",0,-2);this.renderShadowFilter(t,e.getId()+"-rightShadow",2,0);this.renderShadowFilter(t,e.getId()+"-leftShadow",-2,0);t.close("defs");t.voidStart("ellipse").class("sapSuiteUiCommonsImageEditorCropItemEllipse").attr("fill","transparent").attr("stroke-width","1").attr("stroke","white").attr("cx","50%").attr("cy","50%").attr("rx","50%").attr("ry","50%").voidEnd();this.renderRectBorders(t,e);this.renderThirdLines(t,e);t.close("svg");this.renderCropAreaDragHandler(t,e);this.renderCropAreaResizeHandlers(t);t.close("div")};r.renderZones=function(t,e){t.openStart("div").class("sapSuiteUiCommonsImageEditorZones").openEnd();e.getZones().forEach(function(r){this.renderZone(t,e,r)},this);t.close("div")};r.renderZone=function(t,e,r){t.openStart("div",r);t.class("sapSuiteUiCommonsImageEditorZone");if(r.getEditable()){t.class("sapSuiteUiCommonsImageEditorZoneEditable")}if(r.getHighlighted()){t.class("sapSuiteUiCommonsImageEditorZoneHighlighted")}t.openEnd();t.openStart("div").class("sapSuiteUiCommonsImageEditorZoneInner").openEnd();if(!r.getEditable()&&!r.getHighlighted()){t.openStart("div").class("sapSuiteUiCommonsImageEditorZoneInnerColoring").openEnd().close("div")}if(r.getHighlighted()){t.openStart("div").class("sapSuiteUiCommonsImageEditorZoneLabel").openEnd();t.openStart("span");t.text(r.getLabel());t.close("span");t.close("div")}if(r.getEditable()){this.renderBWBorder(t)}t.close("div");if(r.getEditable()){this.renderZoneResizeHandlers(t)}t.close("div")};r.renderBWBorder=function(t){t.openStart("svg").class("sapSuiteUiCommonsImageEditorZoneEditBorder").attr("x","0").attr("y","0").attr("width","100%").attr("height","100%").openEnd();this.renderStrokeRect(t,"black",5,5,5,.5);this.renderStrokeRect(t,"white",5,5,0,.5);t.close("svg")};r.renderStrokeRect=function(t,e,r,a,o,i){t.openStart("rect").attr("x","0").attr("y","0").attr("width","100%").attr("height","100%").attr("fill","none").attr("stroke",e).attr("stroke-dasharray",r+","+a).openEnd();t.openStart("animate").attr("attributeName","stroke-dashoffset").attr("repeatCount","indefinite").attr("from",o).attr("to",o+r+a).attr("dur",i).openEnd().close("animate");t.close("rect")};r.renderShadowFilter=function(t,e,r,a){t.openStart("filter").attr("id",e).attr("x","0").attr("y","0").attr("width","100%").attr("height","100%").attr("filterUnits","userSpaceOnUse").openEnd();t.voidStart("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation","2").attr("result","blur").voidEnd();t.voidStart("feOffset").attr("in","blur").attr("result","offOut").attr("x",r).attr("y",a).voidEnd();t.voidStart("feBlend").attr("in","SourceGraphic").attr("in2","offOut").attr("mode","normal").voidEnd();t.close("filter")};r.renderRectBorders=function(t,e){t.openStart("g").class("sapSuiteUiCommonsImageEditorCropItemRectangle").class("sapSuiteUiCommonsImageEditorCropItemCustomShape").openEnd();this.renderCropLine(t,e,"bottomShadow",0,0,100,0);this.renderCropLine(t,e,"leftShadow",100,0,100,100);this.renderCropLine(t,e,"topShadow",100,100,0,100);this.renderCropLine(t,e,"rightShadow",0,100,0,0);t.close("g")};r.renderThirdLines=function(t,e){t.openStart("g").class("sapSuiteUiCommonsImageEditorCropThirds").attr("mask","url("+"#"+e.getId()+"-thirdsMask"+")").openEnd();this.renderCropLine(t,e,"rightShadow",100/3,0,100/3,100);this.renderCropLine(t,e,"rightShadow",100*2/3,0,100*2/3,100);this.renderCropLine(t,e,"bottomShadow",0,100/3,100,100/3);this.renderCropLine(t,e,"bottomShadow",0,100*2/3,100,100*2/3);t.close("g")};r.renderCropLine=function(e,r,a,o,i,n,s){e.voidStart("line").class("sapSuiteUiCommonsImageEditorCropLine");if(!t.browser.msie&&!t.browser.edge){e.attr("filter","url(#"+r.getId()+"-"+a+")")}e.attr("x1",o+"%").attr("y1",i+"%").attr("x2",n+"%").attr("y2",s+"%").voidEnd()};r.renderTransformHandlers=function(t){t.openStart("div").class("sapSuiteUiCommonsImageEditorTransformHandlers").openEnd();Object.keys(a).forEach(function(e){this.renderTransformHandler(t,e)},this);t.close("div")};r.renderTransformHandler=function(t,e){var r=a[e],o;t.openStart("div");o=this.getCommonHandlerClasses(e);o.push("sapSuiteUiCommonsImageEditorHandlerContainer");o.forEach(function(e){t.class(e)});t.openEnd();r.handlers.forEach(function(e){this.renderDiv(t,["sapSuiteUiCommonsImageEditorHandler","sapSuiteUiCommonsImageEditorHandler"+e])},this);t.close("div")};r.renderCropAreaDragHandler=function(t,e){var r=e._getCropAreaDragIcon();t.openStart("div").class("sapSuiteUiCommonsImageEditorDragHandlerContainer").openEnd();t.renderControl(r);t.close("div")};r.renderCropAreaResizeHandlers=function(t){Object.keys(a).forEach(function(e){this.renderCropAreaResizeHandler(t,e)},this)};r.renderCropAreaResizeHandler=function(t,e){var r=a[e],o;t.openStart("div");o=this.getCommonHandlerClasses(e);o.push("sapSuiteUiCommonsImageEditorHandlerContainer");r.types.forEach(function(t){o.push("sapSuiteUiCommonsImageEditorCropItem"+t)});o.forEach(function(e){t.class(e)});t.openEnd();r.handlers.forEach(function(e){this.renderDiv(t,["sapSuiteUiCommonsImageEditorHandler","sapSuiteUiCommonsImageEditorHandler"+e])},this);t.close("div")};r.renderDiv=function(t,e){t.openStart("div");e.forEach(function(e){t.class(e)});t.openEnd();t.close("div")};r.renderZoneResizeHandlers=function(t){Object.keys(a).forEach(function(e){this.renderZoneResizeHandler(t,e)},this)};r.renderZoneResizeHandler=function(t,e){var r=this.getCommonHandlerClasses(e);r.push("sapSuiteUiCommonsImageEditorZoneResizeHandler");this.renderDiv(t,r)};r.getCommonHandlerClasses=function(t){var e=a[t];return["ui-resizable-handle","ui-resizable-"+t,e.vertical,e.horizontal]};return r},true);
sap.ui.predefine("sap/suite/ui/commons/imageeditor/ImageEditorResponsiveContainer",["sap/suite/ui/commons/imageeditor/ImageEditorContainer","./ImageEditorContainerRenderer","sap/ui/Device","sap/m/Button","sap/m/Dialog","sap/m/Bar","sap/m/Title","sap/suite/ui/commons/ControlProxy"],function(e,t,o,i,n,s,r,a){"use strict";var p=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var u=e.extend("sap.suite.ui.commons.imageeditor.ImageEditorResponsiveContainer",{renderer:function(e,i){if(!o.system.phone||i._bInDialog){t.render.apply(this,arguments)}else{e.renderControl(i._getOpenButton())}}});u.prototype._onImageLoaded=function(){e.prototype._onImageLoaded.apply(this,arguments);this._refreshTitle()};u.prototype._getOpenButton=function(){var e=this;if(!this._oOpenButton){this._oOpenButton=new i({text:p.getText("IMGEDITOR_RESPONSIVE_OPEN"),press:function(){e._refreshTitle();e._getDialog().open()}});this.addDependent(this._oOpenButton)}return this._oOpenButton};u.prototype._getTitle=function(){if(!this._oTitle){this._oTitle=new r;this.addDependent(this._oTitle)}return this._oTitle};u.prototype._refreshTitle=function(){var e=this.getImageEditor(),t=p.getText("IMGEDITOR_DIALOG_TITLE");if(e&&e.getFileName()){t+=" - "+e.getFileName()}this._getTitle().setText(t)};u.prototype._getDialog=function(){var e=this;if(!this._oDialog){var t=new a("test");t.setAssociation("control",this);this._oDialog=new n({stretch:true,verticalScrolling:false,beforeOpen:function(){e._bInDialog=true},afterOpen:function(){e._zoomToFit()},beforeClose:function(){e._bInDialog=false},customHeader:new s({contentMiddle:[e._getTitle()],contentRight:[new i({icon:"sap-icon://decline",press:function(){e._oDialog.close()}})]}),content:[t]});this.addDependent(this._oDialog)}return this._oDialog};return u});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/ResizeHistoryItem",["./HistoryItem","sap/base/assert"],function(t,e){"use strict";var i=t.extend("sap.suite.ui.commons.imageeditor.ResizeHistoryItem",{constructor:function(i){t.apply(this,arguments);i=i||{};e(typeof i.width==="number","Width must be a number.");e(typeof i.height==="number","Height value must be a number.");e(typeof i.oldWidth==="number","Old width value must be a number.");e(typeof i.oldHeight==="number","Old height value must be a number.");this._iWidth=i.width;this._iHeight=i.height;this._iOldWidth=i.oldWidth;this._iOldHeight=i.oldHeight}});i.prototype.getWidth=function(){return this._iWidth};i.prototype.getHeight=function(){return this._iHeight};i.prototype.getOldWidth=function(){return this._iOldWidth};i.prototype.getOldHeight=function(){return this._iOldHeight};i.prototype.compare=function(t){var e=["getWidth","getHeight"];return this._compare(t,e)};return i});
sap.ui.predefine("sap/suite/ui/commons/imageeditor/RotateHistoryItem",["./HistoryItem","sap/base/assert"],function(e,t){"use strict";var r=e.extend("sap.suite.ui.commons.imageeditor.RotateHistoryItem",{constructor:function(r){e.apply(this,arguments);r=r||{};t(typeof r.degrees==="number","Degrees must be a number.");this._iDegrees=r.degrees}});r.prototype.getDegrees=function(){return this._iDegrees};r.prototype.compare=function(){return false};return r});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/library",["sap/ui/core/Core","sap/ui/core/library","sap/m/library"],function(e){"use strict";var o=e.initLibrary({name:"sap.suite.ui.commons",dependencies:["sap.ui.core","sap.m"],types:["sap.suite.ui.commons.BulletChartMode","sap.suite.ui.commons.CalculationBuilderComparisonOperatorType","sap.suite.ui.commons.CalculationBuilderFunctionType","sap.suite.ui.commons.CalculationBuilderItemType","sap.suite.ui.commons.CalculationBuilderLayoutType","sap.suite.ui.commons.CalculationBuilderLogicalOperatorType","sap.suite.ui.commons.CalculationBuilderOperatorType","sap.suite.ui.commons.CalculationBuilderValidationType","sap.suite.ui.commons.CommonBackground","sap.suite.ui.commons.ComparisonChartView","sap.suite.ui.commons.DeviationIndicator","sap.suite.ui.commons.FacetOverviewHeight","sap.suite.ui.commons.FrameType","sap.suite.ui.commons.HeaderContainerView","sap.suite.ui.commons.ImageEditorContainerMode","sap.suite.ui.commons.ImageEditorMode","sap.suite.ui.commons.ImageFormat","sap.suite.ui.commons.InfoTileSize","sap.suite.ui.commons.InfoTileTextColor","sap.suite.ui.commons.InfoTileValueColor","sap.suite.ui.commons.LoadState","sap.suite.ui.commons.MicroAreaChartView","sap.suite.ui.commons.MicroProcessFlowRenderType","sap.suite.ui.commons.networkgraph.ActionButtonPosition","sap.suite.ui.commons.networkgraph.BackgroundColor","sap.suite.ui.commons.networkgraph.ElementStatus","sap.suite.ui.commons.networkgraph.LayoutAlgorithmType","sap.suite.ui.commons.networkgraph.LayoutRenderType","sap.suite.ui.commons.networkgraph.LineArrowOrientation","sap.suite.ui.commons.networkgraph.LineArrowPosition","sap.suite.ui.commons.networkgraph.LineType","sap.suite.ui.commons.networkgraph.HeaderCheckboxState","sap.suite.ui.commons.networkgraph.NodePlacement","sap.suite.ui.commons.networkgraph.NodeShape","sap.suite.ui.commons.networkgraph.NodeSize","sap.suite.ui.commons.networkgraph.Orientation","sap.suite.ui.commons.networkgraph.RenderType","sap.suite.ui.commons.ProcessFlowConnectionLabelState","sap.suite.ui.commons.ProcessFlowConnectionState","sap.suite.ui.commons.ProcessFlowConnectionType","sap.suite.ui.commons.ProcessFlowDisplayState","sap.suite.ui.commons.ProcessFlowLaneState","sap.suite.ui.commons.ProcessFlowNodeState","sap.suite.ui.commons.ProcessFlowNodeType","sap.suite.ui.commons.ProcessFlowZoomLevel","sap.suite.ui.commons.SelectionState","sap.suite.ui.commons.statusindicator.FillingType","sap.suite.ui.commons.statusindicator.FillingDirectionType","sap.suite.ui.commons.taccount.TAccountPanelState","sap.suite.ui.commons.ThingGroupDesign","sap.suite.ui.commons.TimelineAlignment","sap.suite.ui.commons.TimelineAxisOrientation","sap.suite.ui.commons.TimelineFilterType","sap.suite.ui.commons.TimelineGroupType","sap.suite.ui.commons.TimelineScrollingFadeout","sap.suite.ui.commons.ValueStatus"],interfaces:[],controls:["sap.suite.ui.commons.BulletChart","sap.suite.ui.commons.BusinessCard","sap.suite.ui.commons.CalculationBuilder","sap.suite.ui.commons.CalculationBuilderExpression","sap.suite.ui.commons.CalculationBuilderFunction","sap.suite.ui.commons.CalculationBuilderInput","sap.suite.ui.commons.CalculationBuilderItem","sap.suite.ui.commons.CalculationBuilderValidationResult","sap.suite.ui.commons.CalculationBuilderVariable","sap.suite.ui.commons.ChartContainer","sap.suite.ui.commons.ChartContainerContent","sap.suite.ui.commons.ChartContainerToolbarPlaceholder","sap.suite.ui.commons.ChartTile","sap.suite.ui.commons.ColumnMicroChart","sap.suite.ui.commons.ComparisonChart","sap.suite.ui.commons.CloudFilePicker","sap.suite.ui.commons.DateRangeScroller","sap.suite.ui.commons.DateRangeSlider","sap.suite.ui.commons.DateRangeSliderInternal","sap.suite.ui.commons.DeltaMicroChart","sap.suite.ui.commons.DynamicContainer","sap.suite.ui.commons.FacetOverview","sap.suite.ui.commons.FeedItemHeader","sap.suite.ui.commons.FeedTile","sap.suite.ui.commons.GenericTile","sap.suite.ui.commons.GenericTile2X2","sap.suite.ui.commons.HarveyBallMicroChart","sap.suite.ui.commons.HeaderCell","sap.suite.ui.commons.HeaderContainer","sap.suite.ui.commons.imageeditor.ImageEditor","sap.suite.ui.commons.imageeditor.ImageEditorContainer","sap.suite.ui.commons.InfoTile","sap.suite.ui.commons.JamContent","sap.suite.ui.commons.KpiTile","sap.suite.ui.commons.LaunchTile","sap.suite.ui.commons.LinkActionSheet","sap.suite.ui.commons.MicroAreaChart","sap.suite.ui.commons.MonitoringContent","sap.suite.ui.commons.MonitoringTile","sap.suite.ui.commons.networkgraph.Graph","sap.suite.ui.commons.networkgraph.Node","sap.suite.ui.commons.NewsContent","sap.suite.ui.commons.NoteTaker","sap.suite.ui.commons.NoteTakerCard","sap.suite.ui.commons.NoteTakerFeeder","sap.suite.ui.commons.NumericContent","sap.suite.ui.commons.NumericTile","sap.suite.ui.commons.PictureZoomIn","sap.suite.ui.commons.ProcessFlow","sap.suite.ui.commons.ProcessFlowConnection","sap.suite.ui.commons.ProcessFlowConnectionLabel","sap.suite.ui.commons.ProcessFlowLaneHeader","sap.suite.ui.commons.ProcessFlowNode","sap.suite.ui.commons.RepeaterViewConfiguration","sap.suite.ui.commons.SplitButton","sap.suite.ui.commons.statusindicator.StatusIndicator","sap.suite.ui.commons.statusindicator.ShapeGroup","sap.suite.ui.commons.statusindicator.Shape","sap.suite.ui.commons.statusindicator.Rectangle","sap.suite.ui.commons.statusindicator.Circle","sap.suite.ui.commons.statusindicator.CustomShape","sap.suite.ui.commons.statusindicator.PropertyThreshold","sap.suite.ui.commons.statusindicator.DiscreteThreshold","sap.suite.ui.commons.statusindicator.LibraryShape","sap.suite.ui.commons.taccount.TAccount","sap.suite.ui.commons.TargetFilter","sap.suite.ui.commons.ThingCollection","sap.suite.ui.commons.ThreePanelThingInspector","sap.suite.ui.commons.ThreePanelThingViewer","sap.suite.ui.commons.TileContent","sap.suite.ui.commons.TileContent2X2","sap.suite.ui.commons.Timeline","sap.suite.ui.commons.TimelineFilterListItem","sap.suite.ui.commons.TimelineItem","sap.suite.ui.commons.UnifiedThingGroup","sap.suite.ui.commons.UnifiedThingInspector","sap.suite.ui.commons.VerticalNavigationBar","sap.suite.ui.commons.ViewRepeater"],elements:["sap.suite.ui.commons.BulletChartData","sap.suite.ui.commons.ColumnData","sap.suite.ui.commons.ColumnMicroChartLabel","sap.suite.ui.commons.ComparisonData","sap.suite.ui.commons.CountingNavigationItem","sap.suite.ui.commons.FeedItem","sap.suite.ui.commons.HarveyBallMicroChartItem","sap.suite.ui.commons.HeaderCellItem","sap.suite.ui.commons.imageeditor.CustomSizeItem","sap.suite.ui.commons.MicroAreaChartItem","sap.suite.ui.commons.MicroAreaChartLabel","sap.suite.ui.commons.MicroAreaChartPoint","sap.suite.ui.commons.TargetFilterColumn","sap.suite.ui.commons.TargetFilterMeasureColumn","sap.suite.ui.commons.AriaProperties"],version:"1.102.0",extensions:{flChangeHandlers:{"sap.suite.ui.commons.Timeline":"sap/suite/ui/commons/flexibility/Timeline"}}});sap.suite.ui.commons.BulletChartMode={Actual:"Actual",Delta:"Delta"};sap.suite.ui.commons.CommonBackground={Lightest:"Lightest",ExtraLight:"ExtraLight",Light:"Light",MediumLight:"MediumLight",Medium:"Medium",Dark:"Dark",ExtraDark:"ExtraDark",Darkest:"Darkest"};sap.suite.ui.commons.ComparisonChartView={Normal:"Normal",Wide:"Wide"};sap.suite.ui.commons.CalculationBuilderComparisonOperatorType={"<":"<",">":">","<=":"<=",">=":">=","=":"=","!=":"!="};sap.suite.ui.commons.CalculationBuilderFunctionType={ABS:"ABS",Round:"ROUND",RoundUp:"RoundUp",RoundDown:"RoundDown",Case:"CASE",SQRT:"SQRT",NDIV0:"NDIV0",NODIM:"NODIM",SUMCT:"SUMCT",SUMGT:"SUMGT",SUMRT:"SUMRT"};sap.suite.ui.commons.CalculationBuilderItemType={Operator:"Operator",CustomOperator:"CustomOperator",Variable:"Variable",Constant:"Constant",Literal:"Literal",Function:"Function",CustomFunction:"CustomFunction",Empty:"Empty",Error:"Error"};sap.suite.ui.commons.CalculationBuilderLogicalOperatorType={AND:"AND",OR:"OR",XOR:"XOR",NOT:"NOT"};sap.suite.ui.commons.CalculationBuilderLayoutType={Default:"Default",VisualTextualReadOnly:"VisualTextualReadOnly",VisualOnly:"VisualOnly",TextualOnly:"TextualOnly"};sap.suite.ui.commons.CalculationBuilderOperatorType={"+":"+","-":"-","/":"/","*":"*","(":"(",")":")",",":","};sap.suite.ui.commons.CalculationBuilderValidationMode={FocusOut:"FocusOut",LiveChange:"LiveChange"};sap.suite.ui.commons.DeviationIndicator={Up:"Up",Down:"Down",None:"None"};sap.suite.ui.commons.FacetOverviewHeight={XS:"XS",S:"S",M:"M",L:"L",XL:"XL",XXL:"XXL",Auto:"Auto",None:"None"};sap.suite.ui.commons.FrameType={OneByOne:"OneByOne",TwoByOne:"TwoByOne",TwoThirds:"TwoThirds",Auto:"Auto"};sap.suite.ui.commons.HeaderContainerView={Horizontal:"Horizontal",Vertical:"Vertical"};sap.suite.ui.commons.InfoTileSize={XS:"XS",S:"S",M:"M",L:"L",Auto:"Auto"};sap.suite.ui.commons.InfoTileTextColor={Positive:"Positive",Critical:"Critical",Negative:"Negative"};sap.suite.ui.commons.InfoTileValueColor={Neutral:"Neutral",Good:"Good",Critical:"Critical",Error:"Error"};sap.suite.ui.commons.LoadState={Loading:"Loading",Loaded:"Loaded",Failed:"Failed",Disabled:"Disabled"};sap.suite.ui.commons.MicroAreaChartView={Normal:"Normal",Wide:"Wide"};sap.suite.ui.commons.MicroProcessFlowRenderType={Wrap:"Wrap",NoWrap:"NoWrap",Scrolling:"Scrolling",ScrollingWithResizer:"ScrollingWithResizer"};sap.suite.ui.commons.networkgraph.BackgroundColor={Default:"Default",White:"White"};sap.suite.ui.commons.networkgraph.ActionButtonPosition={Left:"Left",Right:"Right"};sap.suite.ui.commons.networkgraph.NodeShape={Circle:"Circle",Box:"Box",Custom:"Custom"};sap.suite.ui.commons.networkgraph.LineType={Solid:"Solid",Dashed:"Dashed",Dotted:"Dotted"};sap.suite.ui.commons.networkgraph.NodePlacement={BrandesKoepf:"BrandesKoepf",LinearSegments:"LinearSegments",Simple:"Simple"};sap.suite.ui.commons.networkgraph.ElementStatus={Standard:"Standard",Success:"Success",Warning:"Warning",Error:"Error",Information:"Information"};sap.suite.ui.commons.networkgraph.Orientation={LeftRight:"LeftRight",RightLeft:"RightLeft",TopBottom:"TopBottom",BottomTop:"BottomTop"};sap.suite.ui.commons.networkgraph.RenderType={Html:"Html",Svg:"Svg"};sap.suite.ui.commons.networkgraph.LineArrowOrientation={ParentOf:"ParentOf",ChildOf:"ChildOf",None:"None",Both:"Both"};sap.suite.ui.commons.networkgraph.LineArrowPosition={Start:"Start",Middle:"Middle",End:"End"};sap.suite.ui.commons.networkgraph.LayoutRenderType={LayeredWithGroups:"LayeredWithGroups",SwimLanes:"SwimLanes",Forces:"Forces",TwoColumns:"TwoColumns"};sap.suite.ui.commons.networkgraph.HeaderCheckboxState={Hidden:"Hidden",Checked:"Checked",Unchecked:"Unchecked"};sap.suite.ui.commons.ProcessFlowConnectionLabelState={Neutral:"Neutral",Positive:"Positive",Critical:"Critical",Negative:"Negative"};sap.suite.ui.commons.ProcessFlowConnectionState={Highlighted:"Highlighted",Dimmed:"Dimmed",Regular:"Regular",Selected:"Selected"};sap.suite.ui.commons.ProcessFlowConnectionType={Planned:"Planned",Normal:"Normal"};sap.suite.ui.commons.ProcessFlowDisplayState={Regular:"Regular",RegularFocused:"RegularFocused",Highlighted:"Highlighted",HighlightedFocused:"HighlightedFocused",Dimmed:"Dimmed",DimmedFocused:"DimmedFocused",Selected:"Selected",SelectedHighlighted:"SelectedHighlighted",SelectedHighlightedFocused:"SelectedHighlightedFocused",SelectedFocused:"SelectedFocused"};sap.suite.ui.commons.ProcessFlowLaneState={value:"value",state:"state"};sap.suite.ui.commons.ProcessFlowNodeState={Positive:"Positive",Negative:"Negative",Critical:"Critical",Planned:"Planned",Neutral:"Neutral",PlannedNegative:"PlannedNegative"};sap.suite.ui.commons.ProcessFlowNodeType={Single:"Single",Aggregated:"Aggregated"};sap.suite.ui.commons.ProcessFlowZoomLevel={One:"One",Two:"Two",Three:"Three",Four:"Four"};sap.suite.ui.commons.SelectionState={Selected:"Selected",NotSelected:"NotSelected",Semantic:"Semantic"};sap.suite.ui.commons.statusindicator.FillingDirectionType={Up:"Up",Down:"Down",Left:"Left",Right:"Right",Clockwise:"Clockwise",CounterClockwise:"CounterClockwise"};sap.suite.ui.commons.taccount.TAccountPanelState={Default:"Default",Table:"Table"};sap.suite.ui.commons.statusindicator.HorizontalAlignmentType={Left:"Left",Middle:"Middle",Right:"Right"};sap.suite.ui.commons.statusindicator.VerticalAlignmentType={Top:"Top",Middle:"Middle",Bottom:"Bottom"};sap.suite.ui.commons.statusindicator.SizeType={None:"None",Small:"Small",Medium:"Medium",Large:"Large",ExtraLarge:"ExtraLarge"};sap.suite.ui.commons.statusindicator.LabelPositionType={Top:"Top",Right:"Right",Bottom:"Bottom",Left:"Left"};sap.suite.ui.commons.statusindicator.FillingType={Linear:"Linear",Radial:"Radial",Circular:"Circular",None:"None"};sap.suite.ui.commons.ThingGroupDesign={ZeroIndent:"ZeroIndent",TopIndent:"TopIndent"};sap.suite.ui.commons.TimelineAlignment={Right:"Right",Left:"Left",Top:"Top",Bottom:"Bottom"};sap.suite.ui.commons.TimelineAxisOrientation={Vertical:"Vertical",Horizontal:"Horizontal"};sap.suite.ui.commons.TimelineFilterType={Data:"Data",Time:"Time",Search:"Search"};sap.suite.ui.commons.TimelineGroupType={None:"None",Year:"Year",Month:"Month",Quarter:"Quarter",Week:"Week",Day:"Day"};sap.suite.ui.commons.TimelineScrollingFadeout={None:"None",Area:"Area",AreaWithButtons:"AreaWithButtons"};sap.suite.ui.commons.ValueStatus={Good:"Good",Neutral:"Neutral",Critical:"Critical",Bad:"Bad"};sap.suite.ui.commons.ImageEditorMode={Resize:"Resize",CropRectangle:"CropRectangle",CropEllipse:"CropEllipse",CropCustomShape:"CropCustomShape",Default:"Default"};sap.suite.ui.commons.ImageEditorContainerMode={Transform:"Transform",Crop:"Crop",Filter:"Filter"};sap.suite.ui.commons.ImageFormat={Png:"Png",Jpeg:"Jpeg"};sap.suite.ui.commons.ImageEditorContainerButton={Transform:"Transform",Crop:"Crop",Filter:"Filter"};sap.suite.ui.commons.FilePickerModes={All:"All",FileOnly:"FileOnly",FolderOnly:"FolderOnly"};return o});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/ActionButton",["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.suite.ui.commons.networkgraph.ActionButton",{metadata:{library:"sap.suite.ui.commons",properties:{icon:{type:"string",group:"Appearance",defaultValue:null},title:{type:"string",group:"Appearance",defaultValue:null},enabled:{type:"boolean",group:"Appearance",defaultValue:true},position:{type:"sap.suite.ui.commons.networkgraph.ActionButtonPosition",group:"Appearance",defaultValue:"Right"}},events:{press:{parameters:{buttonElement:{type:"object"}}}}}});e.prototype.invalidate=function(){var t=this.getParent();if(t&&t._bActionButtonsRendered&&!this._bTimeoutRunning){this._bTimeoutRunning=true;setTimeout(function(){this._bTimeoutRunning=false;t._bActionButtonsRendered=false;t.showActionButtons(true)}.bind(this),0)}};return e});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/Coordinate",["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.suite.ui.commons.networkgraph.Coordinate",{metadata:{library:"sap.suite.ui.commons",properties:{x:{type:"float",group:"Misc",defaultValue:undefined},y:{type:"float",group:"Misc",defaultValue:undefined}}}});t.prototype.setX=function(e){this.setProperty("x",e,true);return this};t.prototype.setY=function(e){this.setProperty("y",e,true);return this};return t});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/ElementAttribute",["sap/ui/core/Control","sap/m/Text","sap/suite/ui/commons/networkgraph/ElementBase"],function(e,t,o){"use strict";var i=e.extend("sap.suite.ui.commons.networkgraph.ElementAttribute",{metadata:{library:"sap.suite.ui.commons",properties:{label:{type:"string",group:"Misc",defaultValue:null},value:{type:"string",group:"Misc",defaultValue:null},labelStatus:{type:"string",group:"Misc",defaultValue:null},valueStatus:{type:"string",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},icon:{type:"string",group:"Misc",defaultValue:""}}},renderer:{apiVersion:2,render:function(e,t){var o=t.getId();e.openStart("div",o);e.attr("data-sap-ui",o);e.class("sapSuiteUiCommonsNetworkGraphDivNodeAttributesRow").openEnd();if(t.getVisible()){e.openStart("div").class("sapSuiteUiCommonsNetworkGraphDivNodeAttributesIcons").openEnd();if(t.getIcon()){e.openStart("div",t.getId()+"-icon");e.class("sapSuiteUiCommonsNetworkGraphDivNodeText").class("sapSuiteUiCommonsNetworkGraphDivAttributeIcon").openEnd();t.getParent()._renderHtmlIcon(t.getIcon(),null,null,null,null,e);e.close("div")}e.close("div");e.openStart("div").class("sapSuiteUiCommonsNetworkGraphDivNodeLabels").openEnd();e.renderControl(t._getLabelControl());e.close("div");e.openStart("div").class("sapSuiteUiCommonsNetworkGraphDivNodeValues").openEnd();e.renderControl(t._getValueControl());e.close("div")}e.close("div")}},onAfterRendering:function(){var e=this.getParent(),t=this.getLabelStatus()||e.getStatus(),i=this.getValueStatus()||e.getStatus();if(t){var a=e._getColor(o.ColorType.Content,t);if(a){this.$("label").css("color",a);this.$("icon").css("color",a)}}if(i){var a=e._getColor(o.ColorType.Content,i);if(a){this.$("value").css("color",a)}}}});i.prototype._getLabelControl=function(e){if(!this._oLabel){this._oLabel=new t(this.getId()+"-label",{textAlign:"Left",wrappingType:"Hyphenated"}).addStyleClass("sapSuiteUiCommonsNetworkGraphDivNodeText")}this._oLabel.setText(this.getLabel());return this._oLabel};i.prototype._getValueControl=function(e){if(!this._oValue){this._oValue=new t(this.getId()+"-value",{textAlign:"Right",wrappingType:"Hyphenated"}).addStyleClass("sapSuiteUiCommonsNetworkGraphDivNodeText")}this._oValue.setText(this.getValue());return this._oValue};i.prototype.exit=function(){if(this._oValue){this._oValue.destroy();this._oValue=null}if(this._oLabel){this._oLabel.destroy();this._oLabel=null}};i.Type=Object.freeze({Label:"Label",Value:"Value"});return i});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/ElementBase",["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","./SvgBase","sap/ui/base/ManagedObject","sap/ui/core/theming/Parameters","sap/m/CheckBox","sap/m/library"],function(t,e,r,i,o,n,s){"use strict";var a=s.ValueCSSColor,u=e.networkgraph.ElementStatus,c=e.networkgraph.HeaderCheckboxState;var l=r.extend("sap.suite.ui.commons.networkgraph.ElementBase",{metadata:{properties:{title:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},status:{type:"string",group:"Appearance",defaultValue:u.Standard}},aggregations:{attributes:{type:"sap.suite.ui.commons.networkgraph.ElementAttribute",multiple:true,singularName:"attribute"}}},renderer:{}});l.prototype.scrollToElement=function(){var t=this.getParent();if(t){t._scrollToElement(this)}};l.prototype._afterRenderingBase=function(){var e=this.getParent(),r,i;var o=e&&e._isUseNodeHtml()&&this.isA("sap.suite.ui.commons.networkgraph.Node"),n=this.isA("sap.suite.ui.commons.networkgraph.Group");if(!o&&!n){if(this._cannotAppendInnerHtml()){r=this.$().parent();i=this._convertToSvg(t.parseHTML(this._render()));r[0].replaceChild(i,this.$()[0])}else{this.$()[0].outerHTML=this._render()}}this._afterRendering()};l.prototype._removeFromInvalidatedControls=function(){try{this.getUIArea()._onControlRendered(this)}catch(t){}};l.prototype._setFocus=function(t){var e=t?"addClass":"removeClass";this.$()[e](this.FOCUS_CLASS)};l.prototype._replaceId=function(e,r){if(e.attr("id")){e.attr("id",e.attr("id")+r)}e.removeAttr("data-sap-ui");var i=e.children();if(i.length===0){return}i.each(function(e,i){this._replaceId(t(i),r)}.bind(this))};l.prototype._useInLayout=function(){return true};l.prototype._hasFocus=function(){return this.$().hasClass(this.FOCUS_CLASS)};l.prototype._hasDefaultStatus=function(t){t=t||this.getStatus();return t===u.Error||t===u.Information||t===u.Warning||t===u.Success};l.prototype._hasCustomStatus=function(t){t=t||this.getStatus();if(t===u.Standard||this._hasDefaultStatus(t)){return false}return!!t};l.prototype._isCustomStatusColor=function(t){return t!==l.ColorType.BorderWidth&&t!==l.ColorType.BorderStyle};l.prototype._getElementId=function(t){return t?this.getId()+t:this.getId()};l.prototype._getColor=function(t,e){var r=this.getParent(),i,n,s="";var u=function(){if(typeof this.getSelected==="function"&&this.getSelected()){if(t===l.ColorType.Background||t===l.ColorType.Content||t===l.ColorType.Border){t="Selected"+t}if(t==l.ColorType.HeaderContent&&this._isBox()){t=l.ColorType.Content}}}.bind(this);e=e||this.getStatus();if(!this._hasCustomStatus(e)){return""}if(!r||!t){return""}n=r._oStatuses[e];if(n){if(t.indexOf("Focus")!==-1){if(!n.getUseFocusColorAsContentColor()){return""}t=t.replace("Focus","Content")}u();i="get"+t+"Color";var c=n[i]();if(c){var s=o.get(c);if(!s&&c&&a.isValid(c)){s=c}}}return s?s:""};l.prototype._getStatusValue=function(t,e){var r=this.getParent(),i;e=e||this.getStatus();if(!this._hasCustomStatus(e)){return""}if(!r||!t){return""}i=r._oStatuses[e];if(i){return i["get"+t]()}return""};l.prototype._getStatusStyle=function(t,e){var r="";if(!this._hasCustomStatus()){return""}Object.keys(t).forEach(function(e){var i=this._isCustomStatusColor(t[e])?this._getColor(t[e]):this._getStatusValue(t[e]);if(i){if(r){r+=";"}r+=e+":"+i}},this);if(e&&r){r='style="'+r+'"'}return r};l.prototype._checkForProcessData=function(){var t=this.getParent();if(t&&t._bRequiresDataProcessing){t._processData()}};l.prototype.getStyleObject=function(t){var e={};if(t){var r=t.split(";");for(var i=0;i<r.length;i++){if(r[i]){var o=r[i].split(":");e[o.splice(0,1)[0]]=o.join(":")}}}return e};l.prototype.applyStyles=function(t,e){Object.keys(e).forEach(function(r){t.style(r,e[r])})};l.prototype.getVisibleAttributes=function(){return this.getAttributes().filter(function(t){return t.getVisible()})};l.prototype.setProperty=function(t,e,r){var o=Object.getPrototypeOf(this).aProcessRequiredProperties;i.prototype.setProperty.call(this,t,e,r);if(o&&o.indexOf(t)!==-1&&this.getParent()){this.getParent()._bRequiresDataProcessing=true}};l.prototype.toString=function(){return this.getMetadata()._sClassName+" - "+this.getTitle()};l.prototype._correctTitle=function(t){if(this.getTitle()){var e=this.$().find("."+t);if(e[0]){var r=e[0].getBBox().width,i=parseInt(e.attr("maxwidth"),10);if(r>i){this._createText(e[0],{text:this.getTitle(),hCenter:true})}}}};l.prototype._renderTitle=function(t){var e=10;var r=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-title-clip)"},false);r+=this._renderText({attributes:{style:t.style,class:t.class,x:t.x,y:t.y,maxWidth:t.maxWidth},text:t.title,height:e});r+="</g>";return r};l.prototype._renderClipPath=function(t){var e=this._renderControl("clipPath",{id:t.id},false);e+=this._renderControl("rect",{x:t.x,y:t.y,width:t.width||this._iWidth,height:t.height||this._iHeight,direction:t.direction||""});e+="</clipPath>";return e};l.prototype._renderClonedControl=function(t,e){if(t.mapRender){var r=e.$().clone();this._replaceId(r,t.idSufix);t.renderManager.unsafeHtml(r[0].outerHTML)}else{t.renderManager.renderControl(e)}};l.prototype._appendActionButton=function(e,r){var i=e.id?'id="'+e.id+'"':"";var o="<div "+i+' title="'+e.title+'"class="sapSuiteUiCommonsNetworkGraphDivActionButtonBackground">';o+='<div class="sapSuiteUiCommonsNetworkGraphDivActionButton ';if(!e.enable){o+='sapSuiteUiCommonsNetworkGraphDivActionButtonDisabled"';o+='style = " display: none'}o+='">';o+=this._renderHtmlIcon(e.icon,e.class||"");o+="</div>";o+='<div class="sapSuiteUiCommonsNetworkActionButtonFocusCircle"></div>';o+="</div>";var n=t(o);if(e.enable&&e.click){n.on("click",e.click);n.on("click",function(t){if(this.getParent()){this.getParent().setFocus({item:this,button:n[0]},true)}}.bind(this))}r.append(n)};l._isRectOnScreen=function(t,e,r,i,o,n,s,a){return Math.max(t,e)>o&&Math.min(t,e)<n&&Math.max(r,i)>s&&Math.min(r,i)<a};l.prototype._isOnScreen=function(t,e,r,i){return false};l.prototype._setHeaderCheckBoxState=function(t){if(t!==c.Hidden){this._getHeaderCheckbox().setSelected(t===c.Checked);this._getHeaderCheckbox().setVisible(true)}else if(this.getAggregation("_checkBox")){this._getHeaderCheckbox().setVisible(false)}this.setProperty("headerCheckBoxState",t)};l.prototype.setVisible=function(t){var e=this.getParent();this.setProperty("visible",t);if(e){e.setFocus(null);e._setupKeyboardNavigation()}return this};l.prototype.setStatus=function(t){var e=this.getParent();this.setProperty("status",t);if(e&&e._bIsLayedOut){e.updateLegend()}return this};l.ColorType=Object.freeze({BorderStyle:"BorderStyle",BorderWidth:"BorderWidth",Background:"Background",Border:"Border",Content:"Content",HeaderContent:"HeaderContent",SelectedBorder:"SelectedBorder",SelectedBackground:"SelectedBackground",SelectedContent:"SelectedContent",HoverBackground:"HoverBackground",HoverBorder:"HoverBorder",HoverContent:"HoverContent",Focus:"Focus",HoverFocus:"HoverFocus",SelectedFocus:"SelectedFocus"});return l});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/Graph",["sap/suite/ui/commons/library","sap/ui/thirdparty/jquery","sap/ui/core/Control","./SvgBase","./Node","./Line","./Group","./layout/LayeredLayout","./Tooltip","sap/ui/model/json/JSONModel","sap/m/SuggestionItem","./Utils","sap/m/Label","sap/m/OverflowToolbar","sap/m/OverflowToolbarButton","sap/m/SearchField","sap/m/ToolbarSpacer","sap/ui/core/CustomData","sap/ui/model/Filter","sap/m/OverflowToolbarLayoutData","./KeyboardNavigator","sap/ui/core/theming/Parameters","sap/base/Log","sap/ui/performance/Measurement","sap/base/util/uid","sap/base/security/encodeXML","./GraphRenderer","sap/m/ToggleButton","sap/ui/core/routing/HashChanger","sap/m/library","sap/m/Dialog","sap/suite/ui/commons/util/FullScreenUtil"],function(e,t,i,s,o,n,r,a,h,u,l,g,c,p,f,d,_,m,y,L,v,T,N,S,b,C,E,I,A,w,O,F){"use strict";var R=w.ButtonType,G=e.networkgraph.Orientation,x=e.networkgraph.LayoutRenderType,U=e.networkgraph.RenderType;var $="nodes",D="lines",P="groups";var k=[.05,.1,.25,.33,.5,.67,.75,.8,.9,1,1.1,1.25,1.5,1.75,2,2.5,3,4,5],B=1,H=.4,M=1e5;var K={Group:"group",Node:"node",Line:"line",IsLastKey:"islast",TypeKey:"type"};var W=Object.freeze({Node:"Node",Line:"Line",Group:"Group"});var Z=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var Y=0,z=100;var X=l.extend("sap.suite.ui.commons.networkgraph.LimitedSuggestionItem",{render:function(e,t,i,s){if(Y++<z){l.prototype.render.call(this,e,t,i,s)}}});var V=s.extend("sap.suite.ui.commons.networkgraph.Graph",{metadata:{library:"sap.suite.ui.commons",properties:{height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},orientation:{type:"sap.suite.ui.commons.networkgraph.Orientation",group:"Behavior",defaultValue:G.LeftRight},enableZoom:{type:"boolean",group:"Behavior",defaultValue:true},enableWheelZoom:{type:"boolean",group:"Behavior",defaultValue:true},backgroundImage:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},backgroundColor:{type:"sap.suite.ui.commons.networkgraph.BackgroundColor",group:"Appearance",defaultValue:"White"},renderType:{type:"sap.suite.ui.commons.networkgraph.RenderType",group:"Appearance",defaultValue:U.Html},noData:{type:"boolean",group:"Behavior",defaultValue:false},noDataText:{type:"string",group:"Behavior",defaultValue:""}},aggregations:{lines:{type:"sap.suite.ui.commons.networkgraph.Line",multiple:true,singularName:"line"},nodes:{type:"sap.suite.ui.commons.networkgraph.Node",multiple:true,singularName:"node"},groups:{type:"sap.suite.ui.commons.networkgraph.Group",multiple:true,singularName:"group"},legend:{type:"sap.ui.core.Control",multiple:false},layoutAlgorithm:{type:"sap.suite.ui.commons.networkgraph.layout.LayoutAlgorithm",multiple:false},statuses:{type:"sap.suite.ui.commons.networkgraph.Status",multiple:true,singularName:"status"}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{graphReady:{},afterLayouting:{},beforeLayouting:{},zoomChanged:{},failure:{parameters:{type:"string",message:"string"}},selectionChange:{parameters:{items:{type:"sap.suite.ui.commons.networkgraph.ElementBase[]"}}},searchSuggest:{parameters:{term:{type:"string"}}},search:{parameters:{term:{type:"string"},key:{type:"string"}}}}}});V.FAILURE_TYPE={INCONSISTENT_MODEL:"Inconsistent model",LAYOUT_FAILURE:"Layout failure"};V.prototype.ZOOM_100=B;V.prototype.init=function(){this._fZoomLevel=1;this._mSelectedNodes={};this._mSelectedLines={};this._bIsLayedOut=false;this._bIsFullScreen=false;this._mNodes={};this._bNeedNodeProcessing=true;this._oFullScreenContainer=null;this._bRequiresDataProcessing=true;this._oPanning={};this._oLegendLabels={};this._iRunningLayouts=0;this._oLastLayout=null;this._bIsRtl=sap.ui.getCore().getConfiguration().getRTL();this._oFocus=null;this._tooltip=this._createTooltip();this._bIsInvalid=false;this._oStatuses={};this._aShadedNodes=[];this._createToolbar()};V.prototype.onBeforeRendering=function(){this._bIsRtl=sap.ui.getCore().getConfiguration().getRTL();this.setBusy(false);this.setBusyIndicatorDelay(0);this._iNodeMaxWidth=0;this.getNodes().forEach(function(e){e._resetDimensions();var t=e.getMaxWidth();if(t>this._iNodeMaxWidth){this._iNodeMaxWidth=t}}.bind(this));this.getLines().forEach(function(e){e._resetLayoutData()});if(!this.getNoData()){this.setDisableToolbarButtons(true);this._loadData()}else{this.setDisableToolbarButtons(false)}};V.prototype.onAfterRendering=function(){var e="",t=this.getNodes(),i=this._bIsRtl?"direction="+'"rtl"':"",s='<rect class="sapSuiteFlickerFreeRect" x="0" y="0"></rect>';this.$divnodes=this.$("divnodes");this.$divgroups=this.$("divgroups");this.$background=this.$("background");this.$tooltips=this.$("tooltiplayer");this.$scroller=this.$("scroller");this._$innerscroller=this.$("innerscroller");this.$legend=this.$("legend");if(this._oFullScreenContainer&&this._bIsFullScreen){this._oFullScreenContainer.$content=this.$();this.$().addClass("sapSuiteUiCommonsNetworkGraphFullScreen")}if(t.length===0||this._bIsInvalid||this.getNoData()){if(this._bIsInvalid){this.$scroller.html('<span class="sapSuiteNetworkGraphErrorText">'+Z.getText("NETWORK_GRAPH_WRONGDATA")+"</span>")}if(this._oSuggestionItemsModel){this._oSuggestionItemsModel.setData("")}this.fireGraphReady();return}this.setBusy(true);t.forEach(function(e){e.bOutput=true});if(this._isDelayedLayouting()){if(!this._isUseNodeHtml()){t.forEach(function(t){t._setupWidthAndHeight();e+=t._render({sizeDetermination:true});e+="</g>"})}var o=function(){if(this._iNodeMaxWidth){this.$divnodes.css("width",this._iNodeMaxWidth+50+"px")}this._isUseNodeHtml()?this._createDivNodes():this._$innerscroller.append('<svg id="'+this.getId()+'-sizesvg"'+i+' class="sapSuiteUiCommonsNetworkGraphSvg">'+e+s+"</svg>");t.forEach(function(e){if(this._isUseNodeHtml()){e._setupDivDimensions()}else{e.calculateSizes();e._setupWidthAndHeight()}}.bind(this));this._preprocessData();sap.ui.getCore().detachThemeChanged(o)}.bind(this);if(!sap.ui.getCore().isThemeApplied()){sap.ui.getCore().attachThemeChanged(o)}else{o()}}};V.prototype.exit=function(){if(this._oFullScreenUtil){this._oFullScreenUtil.cleanUpFullScreen(this)}};V.prototype._beforeRender=function(){this.fireEvent("afterLayouting")};V.prototype._fireFailure=function(e,t){var i=t;if(typeof t==="object"&&t.text){i=t.text}var s="Graph failure: "+e+": "+i;if(e===V.FAILURE_TYPE.INCONSISTENT_MODEL){s+=" This may be due to the model size restriction. For its increase use model's 'setSizeLimit' method."}this.fireFailure([e.toString(),i]);N.error(s)};V.prototype.isFullScreen=function(){return this._bIsFullScreen};V.prototype.toggleFullScreen=function(){this._toggleFullScreen()};V.prototype.preventInvalidation=function(e){this._bPreventInvalidation=e};V.prototype.scrollToElement=function(e){this._scrollToElement(e)};V.prototype.setSearchSuggestionItems=function(e){var t=[];if(e){e.forEach(function(e){t.push({text:e.getText(),icon:e.getIcon(),key:e.getKey(),description:e.getDescription()})})}this._oSuggestionItemsModel.setData({items:t})};V.prototype.destroyAllElements=function(){this.destroyAggregation($,false);this.destroyAggregation(P,false);this.destroyAggregation(D,false)};V.prototype.deselect=function(e){var t=[],i=this.$(),s=function(e){Object.keys(e).forEach(function(i){t.push(e[i]);e[i].setSelected(false)},this)}.bind(this);i.find("."+this.HIGHLIGHT_CLASS).removeClass(this.HIGHLIGHT_CLASS);i.find("."+this.SELECT_CLASS).removeClass(this.SELECT_CLASS);i.find("."+this.VISIBLE_ACTIONS_BUTTONS_CLASS).removeClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS);s(this._mSelectedNodes);s(this._mSelectedLines);this._aShadedNodes.forEach(function(e){e._setNodeOpacity(false)});this._aShadedNodes=[];this.$(this.LINEBUTTONSID).hide();if(!e&&t.length){this.fireSelectionChange({items:t})}return t};V.prototype.getFocus=function(){return this._oFocus};V.prototype.getToolbar=function(){return this._toolbar};V.prototype.getNodeByKey=function(e){if(this._bRequiresDataProcessing){this._processData()}return this._mNodes[e]};V.prototype.setCustomLegendLabel=function(e){var t;if(e.isGroup===true){t=W.Group}else if(e.isLine===true){t=W.Line}else{t=e.isNode===false?W.Line:W.Node}if(e.status){this._oLegendLabels[t+e.status]=e.label;this._createLegend()}};V.prototype.updateLegend=function(){this._createLegend()};V.prototype.zoom=function(e){e=e||{};e.deltaY=e.zoomin!==false?1:-1;if(e.x&&e.y){e.point={x:e.x,y:e.y}}this._zoom(e)};V.prototype.getZoomLevelMilestones=function(){return k};V.prototype.getCurrentZoomLevel=function(){return this._fZoomLevel};V.prototype.setCurrentZoomLevel=function(e){this._fZoomLevel=e;this._zoomLabel.setText(this._getZoomText())};V.prototype.getCorrectMousePosition=function(e){var t=this.$svg.offset(),i=1,s=1;if(this._iWidth!==this.$svg.width()||this._iHeight!==this.$svg.height()){i=this._iWidth/this.$svg.width();s=this._iHeight/this.$svg.height()}return{x:parseInt((e.x-t.left)*i,10),y:parseInt((e.y-t.top)*s,10)}};V.prototype._createTooltip=function(){var e=new h(this.getId()+"-tooltip");this.addDependent(e);e.create(this);e.attachEvent("afterClose",function(){var e=this.getFocus();if(e){this.setFocus(e);if(e.button=="menu"){e.item._setMenuButtonFocus(true)}}}.bind(this));return e};V.prototype.defocus=function(){this.$().find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS)};V.prototype.setFocus=function(e,t){if(!e&&!this._oFocus||e&&this._oFocus&&e.item===this._oFocus.item&&e.button===this._oFocus.button){if(t){this._updateAccessibility(e)}return}this.defocus();if(this.getFocusDomRef()){this.getFocusDomRef().focus()}if(e){if(e.button){if(e.item instanceof o||e.item instanceof n){e.item._setActionButtonFocus(e.button,true)}else if(e.item instanceof r){if(e.button===r.BUTTONS.MENU){e.item._setMenuButtonFocus(true)}else if(e.button===r.BUTTONS.COLLAPSE){e.item._setCollapseButtonFocus(true)}}}else if(e.item){e.item._setFocus(true);if(e.item instanceof r){e.button=r.BUTTONS.MENU}}}this._oFocus=e;this._ensureOnScreen(e?e.item:null);this._updateAccessibility(e)};V.prototype._updateAccessibility=function(e){var t=function(){this._setAccessibilityTitle(Z.getText("NETWORK_GRAPH_ACCESSIBILITY_CONTENT"))}.bind(this),i=function(t){if(t==="Expand/Collapse"){if(e.item.getCollapsed()){return Z.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+" "+t+" "+Z.getText("NETWORK_GRAPH_EXPANDED")}else{return Z.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+" "+t+" "+Z.getText("NETWORK_GRAPH_COLLAPSED")}}return Z.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+" "+t};if(e){if(e.button){if(e.item instanceof o){if(e.button.title==="Expand/Collapse"){this._setAccessibilityTitle(e.item._getActionButtonTitle(e.button)+" "+e.item._oExpandState)}else{this._setAccessibilityTitle(e.item._getActionButtonTitle(e.button))}}else if(e.item instanceof r){if(e.button===r.BUTTONS.MENU){this._setAccessibilityTitle(i(Z.getText("NETWORK_GRAPH_GROUP_DETAIL")))}else if(e.button===r.BUTTONS.COLLAPSE){this._setAccessibilityTitle(i(Z.getText("NETWORK_GRAPH_EXPAND_COLLAPSE")))}else{t()}}else{t()}}else if(e.item){this._setAccessibilityTitle(e.item._getAccessibilityLabel())}else{t()}}else{t()}};V.prototype._processProperties=function(){if(this._bNeedNodeProcessing){this._mSelectedNodes={};this._mSelectedLines={};this.getNodes().forEach(function(e){if(e.getSelected()){this._mSelectedNodes[e.getKey()]=e}if(e.getCollapsed()){e.setCollapsed(true)}},this);this.getLines().forEach(function(e){if(e.getSelected()){this._mSelectedLines[e._getLineId()]=e}},this);this._bNeedNodeProcessing=false}};V.prototype._loadData=function(){if(this.getNodes().length>0){if(!this._processData()){return}if(!this._isDelayedLayouting()){setTimeout(this._preprocessData.bind(this),0)}}};V.prototype._preprocessData=function(){this._bIsLayedOut=false;this._bImageLoaded=false;this.fireBeforeLayouting();this._applyLayout().then(this._render.bind(this))};V.prototype._getAllElements=function(){return this.getNodes().concat(this.getGroups())};V.prototype._render=function(){this._beforeRender();this._iRunningLayouts--;if(this._iRunningLayouts>0){return}this._oLastLayout=null;this._createSearchSuggestItems();this._innerRender();this._createLegend();this._processProperties();if(this._fZoomLevel!==1){this.$svg[0].setAttribute("viewBox","0 0 "+this.$svg.width()+" "+this.$svg.height());this.$svg.width(this.$svg.width()*this._fZoomLevel);this.$svg.height(this.$svg.height()*this._fZoomLevel);this.$background.width(this.$svg.width()*this._fZoomLevel);this.$background.height(this.$svg.height()*this._fZoomLevel);if(this._isUseNodeHtml()){var e="scale("+this._fZoomLevel+")";this.$("divnodes").css("transform",e)}this.$("tooltiplayer").css("transform",e);this.$("divgroups").css("transform",e)}this._setLineClasses();if(this._selectElementAfterScroll){this._scrollToElement(this._selectElementAfterScroll);this._selectElementAfterScroll=null}if(this._oFocus&&this._oFocus.button===r.BUTTONS.COLLAPSE){this._oFocus.item._setCollapseButtonFocus(true)}this._bIsLayedOut=true;this._setupEvents();this._setupKeyboardNavigation();this.setFocus(this.getFocus());if(!this.getBackgroundImage()||this._bImageLoaded){this.setBusy(false);this.fireGraphReady()}if(!this._isSwimLane()&&!this._isTwoColumnsLayout()){this.$("innerscroller").addClass(" sapSuiteUiCommonsNetworkGraphInnerScrollerCenter ")}};V.prototype._createDivNodes=function(){var e=sap.ui.getCore().createRenderManager();this.getNodes().forEach(function(t){t._bMainRender=true;e.renderControl(t);t._bMainRender=false});e.flush(this.$divnodes[0]);e.destroy()};V.prototype._innerRender=function(e){var t=function(e){var t="";e.forEach(function(e){t+=e._render();e.bOutput=true});return t};var i=function(){this.$svg.find(".sapSuiteFlickerFreeRect").remove();this._bImageLoaded=true;if(this._bIsLayedOut){this.setBusy(false);this.fireGraphReady()}}.bind(this);var s=function(){var e=sap.ui.getCore().createRenderManager();this.getGroups().forEach(function(t){e.renderControl(t)});e.flush(this.$("divgroups")[0],false,true);e.destroy()}.bind(this);var o=20,n=50,r=function(){var e=0,t=0;var s=function(i,s){if(i>e){e=i}if(s>t){t=s}};this._iWidth=0;this._iHeight=0;this._getAllElements().forEach(function(e){if(!e._isIgnored()){s(e._iWidth+e.getX(),e._iHeight+e.getY())}},this);this.getLines().forEach(function(e){if(!e._isIgnored()){e.getCoordinates().forEach(function(e){s(e.getX(),e.getY())})}},this);if(this.getBackgroundImage()){var r=new Image;r.onload=function(){this._iWidth=Math.max(this._iWidth,r.width);this._iHeight=Math.max(this._iHeight,r.height);this.$svg.width(this._iWidth);this.$svg.height(this._iHeight);this.$background.width(this._iWidth);this.$background.height(this._iHeight);this.$svg.css("background-image","url("+this.getBackgroundImage()+")");this.$svg.css("background-size","cover");i()}.bind(this);r.onerror=function(){N.warning("Unable to load background image.");i()};r.src=this.getBackgroundImage()}this._iWidth=Math.round(e+(this._isTwoColumnsLayout()?0:n));this._iHeight=Math.round(t+o);if(this.getWidth()==="auto"){this.$().width(this._iWidth)}if(this.getHeight()==="auto"){this.$("wrapper").height(this._iHeight)}if(this._isTwoColumnsLayout()){var a=this._$innerscroller.width();if(this._iWidth<a){this._iWidth=a}}this.$svg.width(this._iWidth);this.$svg.height(this._iHeight);this.$background.width(this._iWidth);this.$background.height(this._iHeight);if(this._isUseNodeHtml()){this.$divnodes.width(this._iWidth);this.$divnodes.height(this._iHeight);this.$divnodes.css("opacity",1)}this.$divgroups.width(this._iWidth);this.$divgroups.height(this._iHeight);this.$tooltips.width(this._iWidth);this.$tooltips.height(this._iHeight)}.bind(this);var a=function(e){e.forEach(function(e){e.forEach(function(e){e._afterRendering()})})};var h=this.getNodes(),u=this.getLines();S.start(this.getId(),"Rendering of a network graph");if(!this._isUseNodeHtml()){this.$("sizesvg").remove()}s();this._$innerscroller.append(this._renderSvg(this._isUseNodeHtml()?[]:t(h),t(u)));this.$svg=this.$("networkGraphSvg");this.$background=this.$("background");r();if(this._isUseNodeHtml()){h.forEach(function(e){var t=e.$();if(e._isInCollapsedGroup()){t.hide()}t.css("top",e.getY()+"px");t.css("left",e.getX()+"px")})}a([this._isUseNodeHtml()?[]:h,u]);S.end(this.getId())};V.prototype._renderSvg=function(e,t){var i="",s="sapSuiteUiCommonsNetworkGraphSvg sapSuiteUiCommonsNetworkGraphNoSelect "+(this._fZoomLevel<H?" sapSuiteUiCommonsNetworkGraphZoomedOut ":"");var o=function(e,t,s){i+='<g id="'+this._getDomId(e)+'" class="'+(s||"")+'">';i+=t?t:"";i+="</g>"}.bind(this);i+='<svg id="'+this.getId()+'-networkGraphSvg"';if(this._bIsRtl){i+="direction="+'"rtl"'}i+=' class="'+s+" sapSuiteNetworkGraphSvgMargin ";if(!this._isUseNodeHtml()){i+="sapSuiteNetworkGraphSvgPosition"}i+='" preserveAspectRatio="none" ';i+=">";i+='<g id="'+this.getId()+'-svgbody">';o("lines",t,"sapSuiteUiCommonsNetworkLines");if(!this._isUseNodeHtml()){o("nodes",e,"sapSuiteUiCommonsNetworkNodes")}i+="</g>";if(this.getBackgroundImage()){i+='<rect class="sapSuiteFlickerFreeRect" x="0" y="0" height="100%" width="100%"></rect>'}i+="</svg>";if(this._isUseNodeHtml()){i+='<div id="'+this.getId()+'-background"></div>'}return i};V.prototype._isProperKey=function(e){return e||e==="0"};V.prototype._processData=function(){var e=this._isSwimLane();var t=function(){var t=0,i;this.mGroups={};i=this.getGroups().some(function(i){var s=i.getKey();i._iNestedLevel=0;if(!this._isProperKey(s)){this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Group without a proper key [index: "+t+"] found.");return true}i._bIsSwimLane=e;i._resetSize();i._clearChildren();if(this.mGroups[s]){this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Group with a duplicit key "+s+" found.");return true}this.mGroups[s]=i;t++;return false},this);return i||this.getGroups().some(function(e){if(e.getParentGroupKey()&&!this.mGroups[e.getParentGroupKey()]){this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Group '"+e.getKey()+"' reffers to a nonexistent parent group '"+e.getParentGroupKey()+"'.");return true}return false},this)}.bind(this);var i=function(){var e=0;this._mNodes={};return this.getNodes().some(function(t){if(!this._isProperKey(t.getKey())){this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Node without a proper ID [index: "+e+"] found.");return true}var i=t.getGroup(),s;t._oGroup=null;if(i){s=this.mGroups[i];if(s){t._oGroup=s;s.aNodes.push(t)}else{this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Node belonging to a nonexistent group with key "+i+" found.");return true}}this._isUseNodeHtml()?t._resetDimensions():t._setupWidthAndHeight();t._clearChildren();t._rendered=false;if(this._mNodes[t.getKey()]){this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Node with a duplicit key "+t.getKey()+" found.");return true}this._mNodes[t.getKey()]=t;e++;return false},this)}.bind(this);var s=function(){return this.getLines().some(function(e,t){var i=this.getNodeByKey(e.getFrom()),s=this.getNodeByKey(e.getTo());if(!i){this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Line going from a nonexistent node with key "+e.getFrom()+" found.");return true}if(!s){this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Line going to a nonexistent node with key "+e.getTo()+" found.");return true}e._rendered=false;e._initialized=false;if(i&&s){i.aChildren.push(s);i.aLines.push(e);s.aParents.push(i);s.aParentLines.push(e);e._oFrom=i;e._oTo=s;e._sKey="line_"+i.getKey()+"-"+s.getKey()+"["+t+"]"}if(i._oGroup){i._oGroup.aLines.push(e);i._oGroup.aChildren.push(s)}if(s._oGroup){s._oGroup.aParentLines.push(e);s._oGroup.aParents.push(i)}return false},this)}.bind(this);var o=function(){this.getGroups().forEach(function(e){var t=e.getParentGroupKey();if(t){var i=this.mGroups[t];if(i){e._oParentGroup=i;i.aChildGroups.push(e)}}}.bind(this));this.getGroups().forEach(function(e){var t=0,i=e._oParentGroup,s=false,o=e;while(i){if(i.getCollapsed()&&!s){e._oCollapsedByParent=i;s=true}o=i;i=i._oParentGroup;t++}e._iNestedLevel=t;e._oTopParentGroup=o})}.bind(this);this._bRequiresDataProcessing=false;if(t()||i()||s()){this._bIsInvalid=true;return false}o();this._oStatuses={};this.getStatuses().forEach(function(e){var t=e.getKey();if(t){this._oStatuses[t]=e}},this);this._bIsInvalid=false;return true};V.prototype._validateLayout=function(){var e,t,i,s="";e=this.getNodes().some(function(e){if(e._isIgnored()){return false}s="Missing coordinates: Node("+e.getKey()+")";return!(e._oGroup&&e._oGroup.getCollapsed()||isFinite(e.getX())&&isFinite(e.getY()))});if(e){this._fireFailure(V.FAILURE_TYPE.LAYOUT_FAILURE,s);return false}if(this._isLayered()){t=this.getGroups().some(function(e){if(e._isIgnored()){return false}s="Missing coordinates: Group("+e.getKey()+")";return!e._isEmpty()&&(!isFinite(e.getX())||!isFinite(e.getY()))});if(t){this._fireFailure(V.FAILURE_TYPE.LAYOUT_FAILURE,s);return false}}i=this.getLines().some(function(e){if(e._isIgnored()){return false}s="Missing coordinates: Line("+e.getKey()+")";return!e._validateLayout()});if(i){this._fireFailure(V.FAILURE_TYPE.LAYOUT_FAILURE,s);return false}return true};V.prototype._suggest=function(e){var t=function(e){e.addCustomData(new m({key:K.IsLastKey,value:"true",writeToDom:true}))};var i=function(e){var t=g.find(e.getCustomData(),function(e){return e.getKey()===K.IsLastKey});if(t){e.removeCustomData(t)}};var s=function(e){var t=g.find(e.getCustomData(),function(e){return e.getKey()===K.TypeKey});return t&&t.getValue()};var o=function(){var e=this._searchField.getSuggestionItems(),o,n,r;for(var a=0;a<e.length;a++){o=e[a];i(o);if(a<e.length-1){n=s(o);r=s(e[a+1]);if(n&&r){if(n===K.Node&&r===K.Line||n===K.Line&&r===K.Group){t(o)}}}}}.bind(this);var n=[],r=this.fireEvent("searchSuggest",{term:e},true);Y=0;if(r){if(e){n=[new y([new y("text",function(t){return(t.toLowerCase()||"").indexOf(e.toLowerCase())>-1}),new y("description",function(t){return(t.toLowerCase()||"").indexOf(e.toLowerCase())>-1})],false)]}this._searchField.getBinding("suggestionItems").filter(n);o()}this._searchField.suggest()};V.prototype._getElementSelectFunctionName=function(e){var t="";if(e instanceof o){t="_selectNode"}if(e instanceof n){t="_selectLine"}if(e instanceof r){t="_selectGroup"}return t};V.prototype._search=function(e,t){var i,s,o;s=this.fireEvent("search",{term:e,key:t},true);if(!s){return}if(e){o=g.find(this.getNodes(),function(i){return t?i.getKey()===t:i.getTitle()===e});if(!o){o=g.find(this.getLines(),function(i){if(i._isLoop()){return false}return t?i._getLineId()===t:i._createSuggestionHelpText()===e})}if(!o){o=g.find(this.getGroups(),function(i){return i.aNodes.length>0&&(t?i.getKey()===t:i.getTitle()===e)})}if(o){i=this._getElementSelectFunctionName(o);if(i){this[i]({element:o,scroll:true,alwaysSelect:true})}}}else{this.deselect(false);this.setFocus(null)}};V.prototype._createToolbar=function(){var e=this;this._toolbar=new p(this.getId()+"-toolbar",{content:[new _]}).addStyleClass("sapSuiteUiCommonsNetworkGraphToolbar");this.addDependent(this._toolbar);this._searchField=new d({layoutData:new L({priority:sap.m.OverflowToolbarPriority.NeverOverflow,shrinkable:true}),enableSuggestions:true,suggest:function(t){e._suggest(t.getParameter("suggestValue"))},search:function(t){var i=t.getParameter("query"),s=t.getParameter("suggestionItem"),o;if(s){o=s.getProperty("key")}e._search(i,o)}}).addStyleClass("sapSuiteUiCommonsNetworkGraphSearchField");this._toolbar.addContent(this._searchField);this._toolbar.addContent(new I({id:this.getId()+"-legendButton",type:R.Transparent,icon:"sap-icon://legend",tooltip:Z.getText("NETWORK_GRAPH_LEGEND"),press:function(t){if(e.$legend.is(":visible")){e.$legend.hide()}else{e.$legend.show()}}}));if(this.getEnableZoom()){this._zoomLabel=new c({layoutData:new L({group:1,priority:sap.m.OverflowToolbarPriority.Disappear}),text:"100%"});this._zoomIn=new f({layoutData:new L({group:1}),type:R.Transparent,ariaDescribedBy:[this._zoomLabel],text:Z.getText("CHARTCONTAINER_ZOOMIN"),icon:"sap-icon://zoom-in",tooltip:Z.getText("CHARTCONTAINER_ZOOMIN"),press:function(t){e._zoom({deltaY:1})}});this._toolbar.addContent(this._zoomIn);this._toolbar.addContent(this._zoomLabel);this._zoomOut=new f({layoutData:new L({group:1}),type:R.Transparent,ariaDescribedBy:[this._zoomLabel],text:Z.getText("CHARTCONTAINER_ZOOMOUT"),icon:"sap-icon://zoom-out",tooltip:Z.getText("CHARTCONTAINER_ZOOMOUT"),press:function(t){e._zoom({deltaY:-1})}});this._toolbar.addContent(this._zoomOut)}this._toolbar.addContent(new f({type:R.Transparent,icon:"sap-icon://popup-window",tooltip:Z.getText("NETWORK_GRAPH_ZOOMTOFIT"),text:Z.getText("NETWORK_GRAPH_ZOOMTOFIT"),press:this._fitToScreen.bind(this)}));this._oFullScreenButton=new f({type:R.Transparent,text:Z.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"),icon:"sap-icon://full-screen",tooltip:Z.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"),press:this._toggleFullScreen.bind(this)});this._toolbar.addContent(this._oFullScreenButton)};V.prototype._fitToScreen=function(){var e=this.$scroller.height()/this._iHeight,t=this.$scroller.width()/this._iWidth,i=Math.min(e,t),s=k.slice(-1);for(var o=1;o<k.length;o++){if(i<k[o]){s=k[o-1];break}}this._zoom({zoomLevel:s})};V.prototype._getZoomText=function(){return Math.floor(this._fZoomLevel*100)+"%"};V.prototype._toggleFullScreen=function(){if(this._bIsFullScreen==false){this._sControlHeight=this.getHeight();this.setHeight("100%");this._sControlWidth=this.getWidth();this.setWidth("100%")}var e=function(e,t){this._oFullScreenButton.setIcon(e);this._oFullScreenButton.setText(t);this._oFullScreenButton.setTooltip(t)}.bind(this);if(this._bIsFullScreen){e("sap-icon://full-screen",Z.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"))}else{e("sap-icon://exit-full-screen",Z.getText("CALCULATION_BUILDER_EXIT_FULL_SCREEN_BUTTON"))}this._bIsFullScreen=!this._bIsFullScreen;if(!this._oFullScreenUtil){this._oFullScreenUtil=F}this._oFullScreenUtil.toggleFullScreen(this,this._bIsFullScreen,this._oFullScreenButton,this._toggleFullScreen);if(this._bIsFullScreen==false){this.setHeight(this._sControlHeight);this.setWidth(this._sControlWidth)}};V.prototype._setupKeyboardNavigation=function(){var e=[],t=[[]],i,s;if(!this._isLayedOut()){return}this.getNodes().forEach(function(t){if(t.isHidden()||t._isIgnored()||!t.getVisible()){return}e.push({item:t,x:t.getX(),y:t.getY()})});this.getLines().forEach(function(t){if(t.isHidden()||t._isIgnored()||!t.getVisible()||t.getCoordinates().length<2){return}var i=t.getCoordinates()[0],s=i.getX(),o=i.getY();t.getCoordinates().forEach(function(e){if(s>e.getX()){s=e.getX()}if(o>e.getY()){o=e.getY()}});e.push({item:t,x:s,y:o})});this.getGroups().forEach(function(t){if(t.isHidden()||t._isEmpty()||!t.getVisible()){return}e.push({item:t,x:t.getX(),y:t.getY()})});e.sort(function(e,t){if(e.y<t.y){return-1}else if(e.y>t.y){return 1}else if(e.x<t.x){return-1}else if(e.x>t.x){return 1}else{return 0}});if(e.length>0){s=[e[0]];t=[s];i=e[0];e.forEach(function(e,o){if(o===0){return}if(e.y===i.y){s.push(e)}else{s=[e];t.push(s)}i=e})}t=this._normalizeGrid(t,e);if(!this._oKeyboardNavigator){this._oKeyboardNavigator=new v(this);this.addDelegate(this._oKeyboardNavigator)}this._oKeyboardNavigator.setItems(t);this._oKeyboardNavigator.setWrapperDom(this.getFocusDomRef())};V.prototype._normalizeGrid=function(e,t){if(t.length===0){return e}var i=t[0],s=i.x,o=i.x,n=1,r,a,h=[],u;t.forEach(function(e){if(e.x<s){s=e.x}if(e.x>o){o=e.x}});e.forEach(function(e){if(e.length>n){n=e.length}});r=Math.abs(o-s)/n;a=s;for(u=0;u<n;u++){a+=r;h.push(a)}return e.map(function(e){var t,i;if(e.length===n){t=e}else{t=[];i=0;while(i<n-e.length&&h[i]<e[0].x){i++;t.push(null)}e.forEach(function(e){t.push(e);i++});while(i<n){t.push(null);i++}}return t.map(function(e){return e?e.item:null})})};V.prototype.getFocusDomRef=function(){return this.getDomRef("wrapper")};V.prototype._setupEvents=function(){var e=5;var t=0,i={},s=this.$("ctrlalert"),o=this.$scroller;var n=function(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))};var r=function(e){if(e.touches&&e.touches.length===2){i={t1:e.touches[0],t2:e.touches[1],diff:n(e.touches[0],e.touches[1])}}};var a=function(s){if(s.touches&&s.touches.length===2){if(++t===e){var o=s.touches[0],r=s.touches[1],a=n(o,r);this._zoom({point:{x:(o.clientX+r.clientX)/2,y:(o.clientY+r.clientY)/2},deltaY:a-i.diff});t=0;i={t1:o,t2:r,diff:a}}}}.bind(this);o.on("mousemove",function(e){this._mouseMove(e.clientX,e.clientY)}.bind(this));var h=this._isSwimLane()?this.$svg:this.$divgroups;h.on("mousedown",function(e){this._mouseDown(e.clientX,e.clientY);e.preventDefault()}.bind(this));o.on("mouseleave",this._endDragging.bind(this));o.on("mouseup",this._mouseUp.bind(this));if(this.getEnableZoom()){o.on("wheel",function(e){if(this._wheel({x:e.originalEvent.clientX,y:e.originalEvent.clientY,deltaY:e.originalEvent.deltaY,div:s,ctrl:e.ctrlKey})){e.preventDefault()}}.bind(this))}o.on("touchstart",function(e){r(e)});o.on("touchmove",function(e){a(e)})};V.prototype._wheel=function(e){if(this.getEnableWheelZoom()||e.ctrl){e.div.css("opacity","0");this._zoom({point:{x:e.x,y:e.y},deltaY:-e.deltaY});this._zoomLabel.setText(this._getZoomText());return true}};V.prototype._endDragging=function(){this._oPanning.dragging=false;this.$scroller.removeClass("sapSuiteUiCommonsNetworkGraphPanning")};V.prototype._mouseMove=function(e,t){var i=this.$scroller[0];if(this._oPanning.dragging){if(!this.$scroller.hasClass("sapSuiteUiCommonsNetworkGraphPanning")){this.$scroller.addClass("sapSuiteUiCommonsNetworkGraphPanning")}i.scrollTop=i.scrollTop-(t-this._oPanning.lastY);i.scrollLeft=i.scrollLeft-(e-this._oPanning.lastX);this._oPanning.lastX=e;this._oPanning.lastY=t}};V.prototype._mouseDown=function(e,t){this.deselect(false);this.setFocus(null);this._oPanning.lastX=e;this._oPanning.lastY=t;this._oPanning.dragging=true;this._tooltip.instantClose()};V.prototype._mouseUp=function(){this._endDragging()};V.prototype._preventZoomToChangeLineWidth=function(){return this._isLayered()&&(this._fZoomLevel>=.5&&this._fZoomLevel<2)};V.prototype._setLineClasses=function(){var e=this.$(),t=this._preventZoomToChangeLineWidth()?"addClass":"removeClass",i=this._fZoomLevel<.5?"removeClass":"addClass";e[t]("sapSuiteUiCommonsNetworkGraphDefaultLineWidth");e[i]("sapSuiteUiCommonsNetworkGraphCrispEdges")};V.prototype._zoom=function(e){var t=this.$svg[0].getAttribute("viewBox"),i=e.deltaY<0?-1:1,s,o,n,r;var a=function(e){var t=0,i;k.forEach(function(s,o){var n=Math.abs(e-s);if(n<i||i===undefined){t=o;i=n}});return t};if(!e.point){e.point={x:this.$scroller.width()/2,y:this.$scroller.height()/2}}s=this.getCorrectMousePosition({x:e.point.x,y:e.point.y});if(e.zoomLevel||e.zoomLevel===0){this._fZoomLevel=e.zoomLevel}else{n=a(this._fZoomLevel);if(k.indexOf(this._fZoomLevel)<0){if(this._fZoomLevel>k[n]){n=i<0?n:n+i}else{n=i>0?n:n+i}}else{n+=i}if(n<0){n=0}else if(n>k.length-1){n=k.length-1}this._fZoomLevel=k[n]}if(this._fZoomLevel<0){this._fZoomLevel=0}if(!t){r="0 0 "+Math.round(this.$svg.width())+" "+Math.round(this.$svg.height());this.$svg[0].setAttribute("viewBox",r)}this.$svg.width(Math.round(this._iWidth*this._fZoomLevel));this.$svg.height(Math.round(this._iHeight*this._fZoomLevel));this.$background.width(Math.round(this._iWidth*this._fZoomLevel));this.$background.height(Math.round(this._iHeight*this._fZoomLevel));o=this.getCorrectMousePosition({x:e.point.x,y:e.point.y});this.$scroller[0].scrollLeft+=(s.x-o.x)*this._fZoomLevel;this.$scroller[0].scrollTop+=(s.y-o.y)*this._fZoomLevel;this._zoomLabel.setText(this._getZoomText());if(this._fZoomLevel<H){this.$svg.addClass("sapSuiteUiCommonsNetworkGraphZoomedOut")}else{this.$svg.removeClass("sapSuiteUiCommonsNetworkGraphZoomedOut")}if(this._isUseNodeHtml()){this.$("divnodes").css("transform","scale("+this._fZoomLevel+")")}this.$("divgroups").css("transform","scale("+this._fZoomLevel+")");this.$tooltips.css("transform","scale("+this._fZoomLevel+")");this._setLineClasses();this.fireEvent("zoomChanged")};V.prototype._createSearchSuggestItems=function(){var e=50;var t={items:[]},i=this.getNodes().sort(function(e,t){return e.getTitle().localeCompare(t.getTitle())}),s=this.getLines().sort(function(e,t){var i=e.getTitle(),s=t.getTitle();if(i===s){return e.getFromNode().getTitle().localeCompare(t.getFromNode().getTitle())}return i.localeCompare(s)}),o=this.getGroups().sort(function(e,t){return e.getTitle().localeCompare(t.getTitle())});this._oSuggestionItemsModel=new u;this._oSuggestionItemsModel.setSizeLimit(M);i.forEach(function(i){var s=g.trimText(i.getTitle(),e);t.items.push({text:s?s:i.getKey(),type:K.Node,icon:i.getIcon(),key:i.getKey(),description:"("+Z.getText("NETWORK_GRAPH_NODE")+")"})});s.forEach(function(e){if(e._isLoop()){return}if(e.getTitle()||e.getFromNode().getTitle()||e.getToNode().getTitle()){t.items.push({text:e._createSuggestionHelpText(),type:K.Line,key:e._getLineId(),description:"("+Z.getText("NETWORK_GRAPH_LINE")+")"})}});o.forEach(function(i){var s=g.trimText(i.getTitle(),e);if(i.aNodes.length>0){t.items.push({text:s?s:i.getKey(),key:i.getKey(),type:K.Group,description:"("+Z.getText("NETWORK_GRAPH_GROUP")+")"})}});this._oSuggestionItemsModel.setData(t);this._searchField.setModel(this._oSuggestionItemsModel);this._searchField.bindAggregation("suggestionItems",{path:"/items",template:new X({text:"{text}",icon:"{icon}",key:"{key}",description:"{description}",customData:new m({key:"type",value:"{type}"})})})};V.prototype._scrollToElement=function(e){var t=e._oGroup&&e._oGroup.getCollapsed(),i,s,o,r,a,h;if(t){e=e._oGroup}if(e instanceof n){a=e.getSource();h=e.getTarget();o=Math.abs(h.getX()-a.getX());r=Math.abs(h.getY()-a.getY());i=Math.min(a.getX(),h.getX());s=Math.max(a.getY(),h.getY())}else{i=e.getX();s=e.getY();o=e._iWidth;r=e._iHeight}this.$scroller.get(0).scrollLeft=(i+(o?o:0)/2)*this._fZoomLevel-this.$scroller.width()/2;this.$scroller.get(0).scrollTop=(s+(r?r:0)/2)*this._fZoomLevel-this.$scroller.height()/2};V.prototype._ensureOnScreen=function(e){if(!e||!this.$scroller){return}var t,i,s,a=this.$scroller[0],h=a.scrollLeft/this._fZoomLevel,u=a.scrollTop/this._fZoomLevel,l=h+this.$scroller.width()/this._fZoomLevel,g=u+this.$scroller.height()/this._fZoomLevel;if(!e._isOnScreen(h,l,u,g)){if(e instanceof o){i=e.getX()+e._iWidth/2;s=e.getY()+e._iHeight/2}else if(e instanceof n){t=e._getArrowFragmentVector();i=(t.center.x+t.apex.x)/2;s=(t.center.y+t.apex.y)/2}else if(e instanceof r){i=e.getX();s=e.getY()}if(i<h||i>l){a.scrollLeft=i*this._fZoomLevel-this.$scroller.width()/2}if(s<u||s>g){a.scrollTop=s*this._fZoomLevel-this.$scroller.height()/2}}};V.prototype._createLegend=function(){var e=this.$("legend"),i="",s=this,o={},n={},r={};var a=function(e,t){var i=C(e.getStatus());if(i){if(t[i]){t[i].push(e)}else{t[i]=[e]}}};var h=function(e){return Object.keys(e).length>0};var u=function(e,t,s){var o=this._oStatuses[e],n=o&&o._getLegendColor(),r=n?"background-color:"+n:"";i+=this._renderControl("div",{status:e,elementtype:s,class:"sapSuiteUiCommonsNetworkGraphLegendLine"},false);i+=this._renderControl("div",{class:"sapSuiteUiCommonsNetworkGraphLegendColorLine "+this._getStatusClass(e),style:r});i+=this._renderControl("label",{class:"sapSuiteUiCommonsNetworkGraphLegendLineLabel"},false);i+=C(this._oLegendLabels[s+e]?this._oLegendLabels[s+e]:t);i+="</label>";i+="</div>"}.bind(this);var l=function(e,t,s,o,n){e.forEach(function(e){a(e,t)});if(h(t)){i+='<div class="'+s+'"><label class="sapSuiteUiCommonsNetworkGraphLegendTitle">'+C(Z.getText(o))+"</label></div>";var r=Object.keys(t).reduce(function(e,t){var i;if(this._oLegendLabels[n+t]){i=this._oLegendLabels[n+t]}else{var s=this._oStatuses[t];i=s?s.getTitle()||t:Z.getText("NETWORK_GRAPH_"+t.toUpperCase())}e[t]=i;return e}.bind(this),{});Object.keys(t).sort(function(e,t){return(r[e]||"").localeCompare(r[t])}).forEach(function(e){u(e,r[e],n)})}}.bind(this);if(this.getLegend()){return}if(!e[0]){return}l(this.getNodes(),o,"sapSuiteUiCommonsNetworkGraphLegendTitleNode","NETWORK_GRAPH_NODES",W.Node);l(this.getLines(),n,"sapSuiteUiCommonsNetworkGraphLegendTitleLine","NETWORK_GRAPH_LINES",W.Line);l(this.getGroups(),r,"sapSuiteUiCommonsNetworkGraphLegendTitleLine","NETWORK_GRAPH_GROUPS",W.Group);e.html(i);if(sap.ui.getCore().byId(this.getId()+"-legendButton").getPressed()){this.getDomRef("legend").style.display="block"}this.$().find(".sapSuiteUiCommonsNetworkGraphLegendLine").on("click",function(e){var i=t(this).attr("status"),r=t(this).attr("elementtype"),a;if(r===W.Node){a=o}if(r===W.Line){a=n}if(!e.ctrlKey){s.deselect(false);s.setFocus(null)}if(r!==W.Group&&a[i]){a[i].forEach(function(e){e.setSelected(true)})}})};V.prototype._selectElement=function(e){var t=e.element&&!e.element.getSelected(),i=[];var s=function(t){e.element.setSelected(t);if(e.setFocus!==false){this.setFocus({item:e.element})}}.bind(this);this.$("svg").find("."+this.VISIBLE_ACTIONS_BUTTONS_CLASS).removeClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS);if(!e.preventDeselect){i=this.deselect(true);if(e.setFocus){this.setFocus(null)}if(t||e.alwaysSelect){s(true)}}else{s(t)}if(!e.element._hasFocus()&&e.forceFocus){this.setFocus({item:e.element})}if(!i.some(function(t){return t===e.element})){i.push(e.element)}this.fireSelectionChange({items:i})};V.prototype._selectLine=function(e){var t=e.element.getFromNode(),i=e.element.getToNode(),s=t._isInCollapsedGroup()&&t._oGroup===i._oGroup?i._oGroup:null;if(e.scroll){this._scrollToElement(s||e.element)}if(!s){this._selectElement(e)}};V.prototype._selectNode=function(e){var t=e.element._isInCollapsedGroup()?e.element._oGroup:null;if(e.scroll){this._scrollToElement(t||e.element)}if(!t){this._selectElement(e);if(e.renderActionButtons!==false){e.element.showActionButtons(true)}}};V.prototype._selectGroup=function(e){if(e.scroll){this._scrollToElement(e.element)}this.setFocus({item:e.element})};V.prototype._applyLayout=function(){var e;this._iRunningLayouts++;e=this._getLayoutAlgorithm().layout().catch(function(e){this._fireFailure(V.FAILURE_TYPE.LAYOUT_FAILURE,e);return Promise.reject()}.bind(this)).then(function(){return new Promise(function(t,i){if(e.isTerminated()){t();return}if(this._validateLayout()){t()}else{i()}}.bind(this))}.bind(this));if(this._oLastLayout&&this._iRunningLayouts>1){this._oLastLayout.terminate()}this._oLastLayout=e;return e};V.prototype._setAccessibilityTitle=function(e){var t,i=this.$("accessibility");if(e===null){t=Z.getText("NETWORK_GRAPH_ACCESSIBILITY_CONTENT")}else if(typeof e==="string"){t=e}else{t=e._getAccessibilityLabel()}if(i){i.html(C(t))}};V.prototype._isTopBottom=function(){return this.getOrientation()===G.TopBottom||this.getOrientation()===G.BottomTop};V.prototype._getLayoutAlgorithm=function(){return this.getLayoutAlgorithm()||this._getDefalutLayout()};V.prototype._isUseNodeHtml=function(){return this.getRenderType()===U.Html};V.prototype._getDefalutLayout=function(){if(!this._oDefalutLayout){this._oDefaultLayout=new a;this._oDefaultLayout.setParent(this,null,true)}return this._oDefaultLayout};V.prototype._isLayered=function(){var e=this._getLayoutAlgorithm().getLayoutRenderType();return e===x.SwimLanes||e===x.LayeredWithGroups||e===x.TwoColumns};V.prototype._isSwimLane=function(){return this._getLayoutAlgorithm().getLayoutRenderType()===x.SwimLanes};V.prototype._isTwoColumnsLayout=function(){return this._getLayoutAlgorithm().getLayoutRenderType()===x.TwoColumns};V.prototype._isDelayedLayouting=function(){if(this._isUseNodeHtml()){return true}return this.getNodes().some(function(e){var t=e.hasListeners("computeSizes");return t||e._useAutomaticSize()||e.getTitleLineSize()!==1||e._displayDescription()})};V.prototype._isLayedOut=function(){return this._bIsLayedOut};V.prototype.setEnableZoom=function(e){if(this._toolbar){this._zoomLabel.setVisible(e);this._zoomIn.setVisible(e);this._zoomOut.setVisible(e)}this.setProperty("enableZoom",e);return this};V.prototype.setDisableToolbarButtons=function(e){this._toolbar.setEnabled(e);return this};V.prototype.destroyAggregation=function(e,t){this._bRequiresDataProcessing=true;i.prototype.destroyAggregation.call(this,e,t)};V.prototype.insertAggregation=function(e,t,s,o){this._bRequiresDataProcessing=true;i.prototype.insertAggregation.call(this,e,t,s,o)};V.prototype.removeAggregation=function(e,t,s){this._bRequiresDataProcessing=true;i.prototype.removeAggregation.call(this,e,t,s)};V.prototype.addAggregation=function(e,t,s){this._bRequiresDataProcessing=true;i.prototype.addAggregation.call(this,e,t,s)};V.prototype.removeAllAggregation=function(e,t){this._bRequiresDataProcessing=true;i.prototype.removeAllAggregation.call(this,e,t)};V.prototype.updateAggregation=function(e){this._bNeedNodeProcessing=true;i.prototype.updateAggregation.call(this,e)};V.prototype.invalidate=function(){if(this._bPreventInvalidation!==true){i.prototype.invalidate.call(this)}};return V});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/GraphMap",["sap/ui/thirdparty/jquery","./SvgBase","sap/ui/core/ResizeHandler","./GraphMapRenderer"],function(t,e,i,r){"use strict";var s=4;var o=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var a=e.extend("sap.suite.ui.commons.networkgraph.GraphMap",{metadata:{library:"sap.suite.ui.commons",properties:{height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:""},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:""},directRenderNodeLimit:{type:"int",group:"Behavior",defaultValue:250},title:{type:"string",group:"Misc",defaultValue:""}},associations:{graph:{type:"sap.suite.ui.commons.networkgraph.Graph",multiple:false,singularName:"graph"}},events:{mapReady:{}}}});a.prototype.init=function(){this._oResizeListener=null;this.setBusyIndicatorDelay(0)};a.prototype.onAfterRendering=function(){var t=this.getGraph();if(t&&t._bIsLayedOut){this._renderMap()}else{this.setBusy(true)}};a.prototype._renderMap=function(){var t=this.getGraph();if(!t){return}var e,i,r,o,a,h,n,p=this,d=t._fZoomLevel,u=t.getNodes().length===0,g=t._isUseNodeHtml();var f=function(t){var e="";t.forEach(function(t){e+=t._render({mapRender:true,idSufix:p.getId()})});return e};var l=function(t,e){var i=sap.ui.getCore().createRenderManager();t.forEach(function(t){t._render({mapRender:true,renderManager:i,idSufix:p.getId()})});i.flush(e);i.destroy()};var c=function(){var e=sap.ui.getCore().createRenderManager();t.getGroups().forEach(function(t){t._render({mapRender:true,renderManager:e,idSufix:p.getId()})});e.flush(this.getDomRef("divgroups"));e.destroy()}.bind(this);var m=function(e){o+=this._renderControl("rect",{x:s/2,y:s/2,width:Math.min((t.$scroller.width()-s/2)/d,(t.$svg.width()-s/2)/d),height:Math.min((t.$scroller.height()-s/2)/d,(t.$svg.height()-s/2)/d),class:e,id:this._getDomId("mapNavigator")})}.bind(this);if(!t._iWidth||!t._iHeight||u){if(t._bIsInvalid||u){this.setBusy(false);this.$().find(".sapSuiteUiCommonsNetworkGraphMapContent").html("");this.fireMapReady()}return}e=t.$("networkGraphSvg").attr("viewBox");if(!e){e="0 0 "+t._iWidth+" "+t._iHeight}o='<svg class="sapSuiteUiCommonsNetworkGraphMapSvg" width="100%" height="100%" aria-hidden="true" viewBox="'+e+'" '+'id="'+this._getDomId("svg")+'"';if(t._bIsRtl){o+=' direction ="rtl"'}o+=" >";if(this._useGraphClone()){o+=this._renderControl("use",{"xlink:href":"#"+t._getDomId("svgbody")})}else{o+=f(t.getLines());if(!g){o+=f(t.getNodes())}}o+=this._renderControl("rect",{x:0,y:0,width:t._iWidth,height:t._iHeight,class:"sapSuiteUiCommonsNetworkGraphMapBoundary","pointer-events":"fill"});if(!g){m("sapSuiteUiCommonsNetworkGraphMapNavigator")}o+="</svg>";o+='<div id="'+this._getDomId("divgroups")+'" class="sapSuiteUiCommonsNetworkGraphMapDivGroups';if(sap.ui.getCore().getConfiguration().getRTL()){o+=" sapSuiteUiCommonsNetworkGraphMapDivGroupsLeft"}o+='"></div>';if(g){o+='<div id="'+this._getDomId("divnodes")+'" class="sapSuiteUiCommonsNetworkGraphMapDivNodes';if(sap.ui.getCore().getConfiguration().getRTL()){o+=" sapSuiteUiCommonsNetworkGraphMapDivGroupsLeft"}o+='">';o+="</div>";o+='<svg class="sapSuiteUiCommonsNetworkGraphSvgNavigator" width="100%" height="100%" viewBox="'+e+'">';m("sapSuiteUiCommonsNetworkGraphMapNavigator");o+="</svg>"}this.$().find(".sapSuiteUiCommonsNetworkGraphMapContent").html(o);c();if(g){var v=this.getDomRef("divnodes");l(t.getNodes(),v)}a=this.$("svg");i=t._iWidth;r=t._iHeight;h=Math.max(i/a.width(),r/a.height());this._setHtmlNodesPosition(h);n=Math.ceil(h/5);this._iStrokeWidth=n;this._correctLineWidth();this.$("svg").find("circle").css("stroke-width",n+"px");this._setupEvents();this._correctPosition();this.setBusy(false);this.fireMapReady()};a.prototype._setHtmlNodesPosition=function(t){var e=this.getGraph(),i=this.$("svg"),r=1/t,s,o;s=Math.floor(i.width()/2-e._iWidth/2*r);o=Math.floor(i.height()/2-e._iHeight/2*r);this.$("divgroups").css("transform","matrix("+r+", 0, 0, "+r+", "+s+", "+o+")");if(e._isUseNodeHtml){this.$("divnodes").css("transform","matrix("+r+", 0, 0, "+r+", "+s+", "+o+")")}};a.prototype._useGraphClone=function(){var t=this.getDirectRenderNodeLimit(),e=this.getGraph();if(e){return t>e.getNodes().length&&!e._isUseNodeHtml()}return false};a.prototype._correctLineWidth=function(t){var t=this.getGraph(),e=this._isMSBrowser()||(!this._useGraphClone()||t._preventZoomToChangeLineWidth());this.$("svg").css("stroke-width",e?this._iStrokeWidth+"px":"1px")};a.prototype._correctMapNavigator=function(){var t=this.$("mapNavigator"),e=parseFloat(t.attr("width")),i=parseFloat(t.attr("height")),r=parseFloat(t.attr("x")),s=parseFloat(t.attr("y")),o=this.getGraph(),a=o._iWidth,h=o._iHeight;if(e+r>a){t.attr("width",a-r)}if(i+s>h){t.attr("height",h-s)}};a.prototype._resize=function(){var t=this.getGraph(),e=t.$scroller,i=this.$("mapNavigator");i.attr("x",Math.max(s/2,e[0].scrollLeft/t._fZoomLevel));i.attr("y",Math.max(s/2,e[0].scrollTop/t._fZoomLevel));i.attr("width",e.width()/t._fZoomLevel);i.attr("height",e.height()/t._fZoomLevel);this._correctLineWidth();this._correctMapNavigator()};a.prototype._resizeHandler=function(){this._resize();var t=this.getGraph();if(t._isUseNodeHtml()){var e=this.$("svg"),i=this.getGraph().$svg;if(i){var r=Math.max(i.width()/e.width(),i.height()/e.height())*(1/t._fZoomLevel);this._setHtmlNodesPosition(r)}}};a.prototype._correctPosition=function(){var t=this.getGraph(),e=t&&t.$scroller,i=this.$("mapNavigator");if(t&&e[0]){i.attr("x",Math.max(s/2,e[0].scrollLeft/t._fZoomLevel));i.attr("y",Math.max(s/2,e[0].scrollTop/t._fZoomLevel));this._correctMapNavigator()}};a.prototype._setupEvents=function(){var t=false,e=this.getGraph(),i=this.$("svg"),r=e.$scroller;var s=function(t){var s=e.$svg,o=Math.max(s.width()/i.width(),s.height()/i.height()),a=i.find(".sapSuiteUiCommonsNetworkGraphMapBoundary"),h=r[0],n=a.offset().left,p=a.offset().top;h.scrollLeft=(t.pageX-n)*o-r.width()/2;h.scrollTop=(t.pageY-p)*o-r.height()/2};var o=function(){i.removeClass("sapSuiteUiCommonsNetworkGraphPanning");t=false};r.on("scroll",function(){this._correctPosition()}.bind(this));i.off();i.on("mousedown",function(e){t=true;s(e);e.preventDefault()});i.on("mousemove",function(e){if(t){if(!i.hasClass("sapSuiteUiCommonsNetworkGraphPanning")){i.addClass("sapSuiteUiCommonsNetworkGraphPanning")}s(e)}});i.on("mouseleave",function(t){o()});i.on("mouseup",function(t){o()})};a.prototype._onBeforeDataProcess=function(){if(this.getDomRef("svg")){this.$("svg").html("");this.setBusy(true)}};a.prototype._onGraphReady=function(){setTimeout(this._renderMap.bind(this),0);if(this._oResizeListener){i.deregister(this._oResizeListener)}this._oResizeListener=i.register(this.getGraph().$("wrapper")[0],t.proxy(this._resizeHandler,this))};a.prototype._removeListeners=function(){var t=this.getGraph();if(t){t.detachBeforeLayouting(this._onBeforeDataProcess,this);t.detachGraphReady(this._onGraphReady,this);t.detachZoomChanged(this._resize,this)}};a.prototype.destroy=function(){this._removeListeners();e.prototype.destroy.apply(this,arguments)};a.prototype.exit=function(){if(this._oResizeListener){i.deregister(this._oResizeListener);this._oResizeListener=null}};a.prototype.getTitle=function(){var t=this.getProperty("title");return t?t:o.getText("NETWORK_GRAPH_MAP_TITLE")};a.prototype.getGraph=function(){var t=this.getAssociation("graph");return t?sap.ui.getCore().byId(t):null||null};a.prototype.setGraph=function(t){this._removeListeners();this.setAssociation("graph",t);var e=this.getGraph();if(e){e.attachBeforeLayouting(this._onBeforeDataProcess,this);e.attachGraphReady(this._onGraphReady,this);e.attachZoomChanged(this._resize,this);if(e._isLayedOut()){this._onGraphReady()}}return this};return a});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/GraphMapRenderer",["sap/ui/core/Renderer","sap/ui/Device"],function(e,t){"use strict";return{_appendHeightAndWidth:function(e,t){t.style("height",e.getHeight());t.style("width",e.getWidth())},apiVersion:2,render:function(e,i){e.openStart("div",i);e.class("sapSuiteUiCommonsNetworkGraphMap");this._appendHeightAndWidth(i,e);e.openEnd();e.openStart("div");e.class("sapSuiteUiCommonsNetworkGraphMapTitle");e.openEnd();e.openStart("span");e.class("sapSuiteUiCommonsNetworkGraphMapTitleText");e.openEnd();e.text(i.getTitle());e.close("span");e.close("div");e.openStart("div");e.class("sapSuiteUiCommonsNetworkGraphMapContent");if(t.browser.msie){if(i.getHeight()){e.style("flex-direction","row-reverse");e.style("height","100%")}else{e.style("flex-direction","row-reverse")}}else{if(i.getHeight()){e.style("height","100%")}}e.openEnd();e.close("div");e.close("div")}}},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/GraphRenderer",["sap/suite/ui/commons/library"],function(e){"use strict";var t=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var o=e.networkgraph.BackgroundColor;return{_appendHeightAndWidth:function(e,t){t.style("height",e.getHeight());t.style("width",e.getWidth())},apiVersion:2,render:function(e,a){var i=a._isLayered()?"sapSuiteUiCommonsNetworkGraphLayered":"sapSuiteUiCommonsNetworkGraphNotLayered",r=a._isSwimLane()?"sapSuiteUiCommonsNetworkGraphSwimLane":"";e.openStart("div",a);e.class("sapSuiteUiCommonsNetworkGraph");e.class(r);e.class(i);e.attr("tabindex","0");this._appendHeightAndWidth(a,e);this._writeAriaTags(e,a);e.openEnd();e.renderControl(a._toolbar);e.openStart("div",a.getId()+"-wrapper");e.class("sapSuiteUiCommonsNetworkGraphContentWrapper");e.attr("tabindex","0");e.attr("aria-live","assertive");e.attr("aria-label",t.getText("NETWORK_GRAPH_ACCESSIBILITY_LABEL"));e.attr("role","application");e.openEnd();e.openStart("div",a.getId()+"-accessibility");e.class("sapSuiteUiCommonsNetworkGraphContentWrapperAccessibility");e.openEnd();e.text(t.getText("NETWORK_GRAPH_ACCESSIBILITY_CONTENT"));e.close("div");e.openStart("div",a.getId()+"-scroller");e.class("sapSuiteUiCommonsNetworkGraphScroller");if(a.getBackgroundColor()===o.White){e.class("sapSuiteUiCommonsNetworkGraphBackgroundWhite")}else{e.class("sapSuiteUiCommonsNetworkGraphBackgroundDefault")}e.openEnd();if(a.getNoData()){this._renderNoData(e,a);e.close("div");e.close("div");e.close("div");return}e.openStart("div",a.getId()+"-innerscroller");e.class("sapSuiteUiCommonsNetworkGraphInnerScroller");if(a._isTwoColumnsLayout()){e.style("width","100%")}e.openEnd();e.openStart("div",a.getId()+"-tooltiplayer");e.class("sapSuiteUiCommonsNetworkGraphTooltips");e.openEnd();e.openStart("div",a.getId()+"-divlinebuttons");e.style("display","none");e.class("sapSuiteUiCommonsNetworkGraphLineButtons");e.openEnd();e.openStart("div",a.getId()+"-linetooltip");e.class("sapSuiteUiCommonsNetworkGraphLineTooltip");e.openEnd();e.close("div");e.openStart("div",a.getId()+"-linetooltipbuttons");e.class("sapSuiteUiCommonsNetworkGraphLineActionButtons");e.openEnd();e.close("div");e.close("div");e.close("div");e.openStart("div",a.getId()+"-divgroups");e.class("sapSuiteUiCommonsNetworkGraphDivGroups");e.attr("aria-hidden","true");e.openEnd();e.close("div");if(a._isUseNodeHtml()){e.openStart("div",a.getId()+"-divnodes");e.class("sapSuiteUiCommonsNetworkGraphDivNodes");e.style("opacity","0");e.attr("aria-hidden","true");e.openEnd();e.close("div")}e.close("div");e.close("div");e.openStart("div",a.getId()+"-ctrlalert");e.class("sapSuiteUiCommonsNetworkAlertWrapper");e.openEnd();e.openStart("p");e.class("sapSuiteUiCommonsNetworkAlertText");e.openEnd();e.text(t.getText("NETWORK_GRAPH_ZOOMCTRL"));e.close("p");e.close("div");e.openStart("div",a.getId()+"-legend");e.style("display","none");e.class("sapSuiteUiCommonsNetworkGraphLegend");e.attr("tabindex","0");e.openEnd();if(a.getLegend()){e.renderControl(a.getLegend())}e.close("div");e.close("div");e.close("div")},_writeAriaTags:function(e,o){var a=o.getAriaLabelledBy(),i=o.getAriaDescribedBy();e.attr("role","graphics-document");if(a.length>0){e.attr("aria-labelledby",a.join(" "))}else{e.attr("aria-label",t.getText("NETWORK_GRAPH_ACCESSIBILITY_LABEL"))}if(i.length>0){e.attr("aria-describedby",i.join(" "))}},_renderNoData:function(e,o){e.openStart("div");e.class("sapSuiteUiCommonsNetworkGraphNoDataWrapper");e.attr("tabindex","0");e.openEnd();o._renderHtmlIcon("sap-icon://document","sapSuiteUiCommonsNetworkGraphNoDataIcon",null,null,null,e);var a=o.getNoDataText(),i=a?a:t.getText("NETWORK_GRAPH_NO_DATA");e.openStart("div");e.class("sapSuiteUiCommonsNetworkGraphNoDataLabel");e.openEnd();e.text(i);e.close("div");e.close("div")}}},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/Group",["sap/suite/ui/commons/library","sap/ui/thirdparty/jquery","./ElementBase","sap/ui/core/IconPool","sap/m/CheckBox"],function(e,t,o,i,s){"use strict";var r=e.networkgraph.ElementStatus,n=e.networkgraph.HeaderCheckboxState;var a={COLLAPSED_HEIGHT:32,COLLAPSED_WIDTH:160,ROUNDING:6,ICON_OFFSET:8,ICON_SIZE:15,HEADER_SIZE:32};var u="expand-all",p="collapse-all",h="horizontal-grip";var l=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var d=o.extend("sap.suite.ui.commons.networkgraph.Group",{metadata:{library:"sap.suite.ui.commons",properties:{headerCheckBoxState:{type:"sap.suite.ui.commons.networkgraph.HeaderCheckboxState",group:"Misc",defaultValue:n.Hidden},key:{type:"string",group:"Misc",defaultValue:null},collapsed:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"string",group:"Appearance",defaultValue:null},minWidth:{type:"float",defaultValue:undefined},parentGroupKey:{type:"string",group:"Misc",defaultValue:null}},events:{headerCheckBoxPress:{parameters:{checked:"boolean"}},collapseExpand:{},showDetail:{}},aggregations:{_checkBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"}}},renderer:{apiVersion:2,render:function(e,t){t._render({renderManager:e})}},onAfterRendering:function(){this._afterRenderingBase()}});d.prototype.aProcessRequiredProperties=["key","parentGroupKey"];d.BUTTONS={MENU:"menu",COLLAPSE:"collapse"};d.prototype.init=function(){this._iWidth=a.COLLAPSED_WIDTH;this._iHeight=a.COLLAPSED_HEIGHT;this._oActionButtons={};this._clearChildren();this._bIsHidden=false};d.prototype._afterRendering=function(){this._setupEvents();if(!this._isVisible()){this.$().hide()}if(this.$().find(".sapSuiteUiCommonsNetworkGraphHeaderCheckboxInner").length!==0){this.$().find(".sapSuiteUiCommonsNetworkGraphHeaderCheckboxInner").attr("aria-label",this.getTitle())}this._removeFromInvalidatedControls()};d.prototype._renderTopGroup=function(e){var t=this._getElementId(e.idSufix),o=this._iTopGroupIndex===0,i=e.renderManager;var s=this.getIcon(),r=this.getTitle();var n=this._iTopGroupIndex*50;if(this.getParent()._bIsRtl){o=!o;n=o?0:50}if(o){i.openStart("div").class("sapSuiteUiCommonsNetworkTopGroupDelimiter").openEnd().close("div")}this._renderHtmlElement("div",{top:0,left:n+"%",width:"50%",height:"32px"},{id:t,"data-sap-ui":t,class:"sapSuiteUiCommonsNetworkTopGroup "+(!o?"sapSuiteUiCommonsNetworkTopGroupRight":"")},i);i.openStart("div").class("sapSuiteUiCommonsNetworkTopGroupHeader").openEnd();if(s){this._renderHtmlIcon(s,null,null,null,null,i)}if(r){i.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderTitle").openEnd().text(r).close("div")}i.close("div");i.close("div")};d.prototype._render=function(e){var t=this.getParent(),i=!this.getCollapsed()||this._isCollapsedSwimLane()?this._iHeight:a.HEADER_SIZE,s;e=e||{};if(this._iNestedLevel===0&&t._isTwoColumnsLayout()){this._renderTopGroup(e);return""}if(this._isIgnored()||!this.getVisible()){return""}if(this.getParent()._isLayered()){s=this._getElementId(e.idSufix);var r=this._convertToStyle({top:this.getY()+"px",left:this.getX()+"px",width:this._iWidth+"px",height:i+"px"},this._getStatusStyle({"border-color":o.ColorType.Border,"border-width":o.ColorType.BorderWidth,"border-style":o.ColorType.BorderStyle}),true);this._renderHtmlElement("div",{},{id:s,"data-sap-ui":s,class:this._getGroupClass(),style:r},e.renderManager);this._renderHeader(e);e.renderManager.close("div")}};d.prototype._renderHeader=function(e){var t=this.getIcon(),i=this.getTitle();var s="",n="",a="",d="";if(this.getStatus()&&this.getStatus()!==r.Standard){a=this._getStatusStyle({color:o.ColorType.Content},true);d=this._getStatusStyle({color:o.ColorType.Content},false);if(this._bIsSwimLane){s=this._getStatusStyle({"background-color":o.ColorType.Background},false)}else{n=this._getStatusStyle({"background-color":o.ColorType.Background,"border-color":o.ColorType.Background},false)}}e.renderManager.openStart("div");this.applyStyles(e.renderManager,this.getStyleObject(n));e.renderManager.class("sapSuiteUiCommonsNetworkGroupHeader").openEnd();if(this._bIsSwimLane&&(s||this._hasDefaultStatus())){e.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderStatus").openEnd();this.applyStyles(e.renderManager,this.getStyleObject(s));e.renderManager.close("div")}e.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderInner").class("sapSuiteUiCommonsNetworkGroupHeaderInnerText").openEnd();if(this._showHeaderCheckBox()){this._renderClonedControl(e,this._getHeaderCheckbox())}if(t){this._renderHtmlIcon(t,"sapSuiteUiCommonsNetworkGroupHeaderIcon",null,a,null,e.renderManager)}if(i){e.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderTitle");var c=sap.ui.getCore().getConfiguration().getLanguage();var f=["ja","zh_TW","zh_CN","ko"];if(this._isVerticalSwimLane()&&f.indexOf(c)>-1){d=d.length>0?d.concat(";text-orientation:sideways"):d.concat("text-orientation:sideways")}this.applyStyles(e.renderManager,this.getStyleObject(d));e.renderManager.openEnd();e.renderManager.text(i);e.renderManager.close("div")}e.renderManager.close("div");e.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderInner").class("sapSuiteUiCommonsNetworkGroupHeaderInnerIcons").openEnd();this._renderHtmlIcon(this.getCollapsed()?u:p,"sapSuiteUiCommonsNetworkGroupHeaderMenuIcon","collapse",a,l.getText("NETWORK_GRAPH_EXPAND_COLLAPSE"),e.renderManager);this._renderHtmlIcon(h,"sapSuiteUiCommonsNetworkGroupHeaderMenuIcon","menu",a,l.getText("NETWORK_GRAPH_GROUP_DETAILS"),e.renderManager);e.renderManager.close("div");e.renderManager.close("div")};d.prototype._getGroupClass=function(){return"sapSuiteUiCommonsNetworkGroup "+this._getStatusClass()+(this.getCollapsed()?"sapSuiteUiCommonsNetworkGroupCollapsed":"sapSuiteUiCommonsNetworkGroupExpanded")+(this._bIsSwimLane?" sapSuiteUiCommonsNetworkGroupSwimLane":" sapSuiteUiCommonsNetworkGroupClassic")+(this._isVerticalSwimLane()?" sapSuiteUiCommonsNetworkGroupVerticalSwimLane":"")+(this._isTopBottom()?" sapSuiteUiCommonsNetworkGroupTopBottom ":"")};d.prototype.getChildNodes=function(){this._checkForProcessData();return this.aChildren};d.prototype.getChildLines=function(){this._checkForProcessData();return this.aLines};d.prototype.getParentNodes=function(){this._checkForProcessData();return this.aParents};d.prototype.getParentLines=function(){this._checkForProcessData();return this.aParentLines};d.prototype.getNodes=function(){this._checkForProcessData();return this.aNodes};d.prototype.isHidden=function(){return this._bIsHidden};d.prototype.setHidden=function(e){this.$()[e?"hide":"show"]();this._bIsHidden=e};d.prototype.getHeaderCheckbox=function(){return this._getHeaderCheckbox()};d.prototype._getHeaderCheckbox=function(){var e=this.getAggregation("_checkBox"),t=this;if(!e){e=new s(this.getId()+"-checkbox",{select:function(o){var i=e.getSelected();t.fireHeaderCheckBoxPress({checked:i})}}).addStyleClass("sapSuiteUiCommonsNetworkGraphHeaderCheckboxInner");this.setAggregation("_checkBox",e,true)}return e};d.prototype._isCollapsedSwimLane=function(){return this._bIsSwimLane&&this.getCollapsed()};d.prototype._clearChildren=function(){this.aNodes=[];this.aLines=[];this.aChildren=[];this.aParentLines=[];this.aParents=[];this.aChildGroups=[]};d.prototype._hasVisibleNodes=function(e){var t=this.aNodes.some(function(e){return!e._bIsHidden});if(!t){for(var o=0;o<this.aChildGroups.length;o++){if(this.aChildGroups[o]._hasVisibleNodes()){return true}}}return t};d.prototype._hasNodes=function(){var e=this.aNodes.some(function(e){return e._useInLayout()});if(!e){e=this.aChildGroups.some(function(e){return e._hasNodes()})}return e};d.prototype._hideShow=function(e){this.$()[e?"hide":"show"]();this._bIsHidden=e;var t=this._oParentGroup;while(t){var o=t._hasVisibleNodes();if(o&&!e||!o&&e){t._hideShow(e)}else{break}t=t._oParentGroup}};d.prototype._setButtonFocus=function(e,t){var o=t?"addClass":"removeClass";e[o]("sapSuiteUiCommonsNetworkElementFocus")};d.prototype._setMenuButtonFocus=function(e){this._setButtonFocus(t(this._oActionButtons.menu),e)};d.prototype._setCollapseButtonFocus=function(e){this._setButtonFocus(t(this._oActionButtons.collapse),e)};d.prototype._setupEvents=function(){var e=this.$("menu"),i=this.$("header"),s=this.$("collapse"),r=this.$().find(".sapSuiteUiCommonsNetworkGroupHeaderMenuIcon");this._oActionButtons.menu=e[0];this._oActionButtons.collapse=s[0];s.off("click");e.off("click");i.off("click");r.off("mouseover");r.off("mouseout");e.on("click",function(e){var t=this.fireEvent("showDetail",{},true);if(t){this._openDetail()}if(this.getParent()){this.getParent().setFocus({item:this,button:d.BUTTONS.MENU})}this._setMenuButtonFocus(false)}.bind(this));s.on("click",function(e){this._collapse();if(this.getParent()){this.getParent().setFocus({item:this,button:d.BUTTONS.COLLAPSE})}}.bind(this));i.on("click",function(e){if(this.getParent()){this.getParent().setFocus({item:this})}this.firePress()}.bind(this));var n=function(e,t,o){if(!this._bIsSwimLane){e.css("background-color",this._getColor(t))}e.css("color",this._getColor(o))}.bind(this);r.on("mouseover",function(e){n(t(e.currentTarget),o.ColorType.HoverBackground,o.ColorType.HoverContent)});r.on("mouseout",function(e){n(t(e.currentTarget),o.ColorType.Background,o.ColorType.Content)})};d.prototype._collapse=function(){this.getParent()._selectElementAfterScroll=this;this.fireEvent("collapseExpand",{},true);this.setCollapsed(!this.getCollapsed())};d.prototype._openDetail=function(){var e=this.$("menu");this.getParent()._tooltip.openDetail({item:this,opener:e[0]})};d.prototype._isEmpty=function(){return this.aNodes.length===0};d.prototype._isIgnored=function(){if(!this._useInLayout()){return true}return!this._hasNodes()};d.prototype._isVisible=function(){var e=this._bIsSwimLane||this.aNodes.some(function(e){return!e.isHidden()});if(!e){e=this.aChildGroups.some(function(e){return e._isVisible()})}return e};d.prototype._useInLayout=function(){return!this._oCollapsedByParent};d.prototype._resetSize=function(){if(this.getCollapsed()){this._iHeight=a.COLLAPSED_HEIGHT}};d.prototype._getAccessibilityLabel=function(){return l.getText("NETWORK_GRAPH_GROUP")+" "+this.getTitle()};d.prototype._isTopBottom=function(){var e=this.getParent();return e&&e._isTopBottom()};d.prototype._isVerticalSwimLane=function(){if(this._bIsSwimLane){var e=this._isTopBottom();return e&&!this.getCollapsed()||!e&&this.getCollapsed()}return false};d.prototype._isCollapsed=function(){return this.getCollapsed()||!!this._oCollapsedByParent};o.prototype._showHeaderCheckBox=function(){return this.getHeaderCheckBoxState()!==n.Hidden};d.prototype._getBorderSize=function(){return 1};d.prototype._setFocus=function(e){this._setMenuButtonFocus(e)};d.prototype._isOnScreen=function(e,t,i,s){var r=this.getX(),n=this.getY();return o._isRectOnScreen(r,r+this._iWidth,n,n+this._iHeight,e,t,i,s)};d.prototype.getHeaderCheckBoxState=function(){if(this.getProperty("headerCheckBoxState")===n.Hidden){return n.Hidden}return this.getHeaderCheckbox().getSelected()?n.Checked:n.Unchecked};d.prototype.setHeaderCheckBoxState=function(e){this._setHeaderCheckBoxState(e);return this};d.prototype.setX=function(e){this.fX=e;return this};d.prototype.getX=function(){return this.fX};d.prototype.setY=function(e){this.fY=e;return this};d.prototype.getY=function(){return this.fY};d.prototype._setCollapsed=function(e,t){var o=this;var i=this.getParent(),s=[];var r=function(t){t.aChildGroups.forEach(function(e){r(e)});if(o!==t){if(!t._oCollapsedByParent||t._oCollapsedByParent===o){t._oCollapsedByParent=e?o:null}}};var n=function(t){if(e){this.getNodes().forEach(function(e){if(e.getSelected()){e.setSelected(false);s.push(e)}});this.getChildLines().forEach(function(e){if(e.getSelected()&&e._isInCollapsedGroup()){e.setSelected(false);s.push(e)}})}}.bind(this);if(e!==this.getCollapsed()||t){this.setProperty("collapsed",e,true);if(e){this.getNodes().forEach(function(e){if(e.getSelected()){e.setSelected(false);s.push(e)}});this.getChildLines().forEach(function(e){if(e.getSelected()&&e._isInCollapsedGroup()){e.setSelected(false);s.push(e)}})}this.aChildGroups.forEach(function(e){n(e)});r(this);if(i&&s.length>0){i.fireSelectionChange({items:s})}if(i&&i._bIsLayedOut){i.invalidate()}}};d.prototype.setCollapsed=function(e){this._setCollapsed(e,false);return this};d.prototype.setVisible=function(e){this.setProperty("visible",e);var t=this.getParent();if(t&&t._bIsLayedOut&&!this.getCollapsed()){this.aNodes.forEach(function(t){if(!e){t.$().hide()}else if(!t._bIsHidden){t.$().show()}})}return this};return d});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/KeyboardNavigator",["sap/ui/thirdparty/jquery","sap/ui/base/Object","./Group","./Node","./Line","sap/ui/events/KeyCodes","sap/ui/dom/containsOrEquals","sap/base/Log"],function(t,e,o,i,s,n,r,u){"use strict";var a={LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down"};var l=/^on.*|setFocus|setItems$/;function h(t){var e,o=t.prototype;for(e in o){if(o.hasOwnProperty(e)&&typeof o[e]==="function"&&l.test(e)){o[e]=f(o[e])}}}function f(t){return function(){try{return t.apply(this,arguments)}catch(t){this._handleError(t)}return undefined}}var p=e.extend("sap.suite.ui.commons.networkgraph.KeyboardNavigator",{constructor:function(t){e.apply(this,arguments);this._oGraph=t;this._aItems=[[]];this._iRows=0;this._iColumns=0;this._iPageSize=5;this._oFocus=null;this._oFocusPosition=null;this._oWrapperDom=null}});p.prototype.getFocus=function(){var t=this._oGraph.getFocus();if(this._oFocus!==t){this._oFocus=t?{item:t.item,button:t.button}:null;this._oFocusPosition=null}if(this._oFocus!=null&&this._oFocus.item===null&&this._oFocus.button===null){return null}return this._oFocus?{item:this._oFocus.item,button:this._oFocus.button}:null};p.prototype.getFocusPosition=function(){var t=this.getFocus();if(!this._oFocusPosition){var e,o;this._oFocusPosition={iX:null,iY:null};if(!t){return this._oFocusPosition}for(o=0;o<this._aItems.length;o++){for(e=0;e<this._aItems[o].length;e++){if(this._aItems[o][e]===t.item){this._oFocusPosition={iX:e,iY:o};return this._oFocusPosition}}}}return this._oFocusPosition};p.prototype.setItems=function(t){this._aItems=t;this._iRows=t.length;this._iColumns=0;t.forEach(function(t){if(this._iColumns<t.length){this._iColumns=t.length}},this)};p.prototype.setWrapperDom=function(t){this._oWrapperDom=t};p.prototype.setPageSize=function(t){this._iPageSize=t};p.prototype.onsapend=function(t){this._moveThroughMatrix(t,true,true)};p.prototype.onsaphome=function(t){this._moveThroughMatrix(t,true,false)};p.prototype.onsapendmodifiers=function(t){if(t.ctrlKey){this._moveThroughMatrix(t,false,true)}};p.prototype.onsaphomemodifiers=function(t){if(t.ctrlKey){this._moveThroughMatrix(t,false,false)}};p.prototype.onsappagedown=function(t){this._moveThroughMatrix(t,false,true,this._iPageSize)};p.prototype.onsappageup=function(t){this._moveThroughMatrix(t,false,false,this._iPageSize)};p.prototype.onsappagedownmodifiers=function(t){if(t.altKey){this._moveThroughMatrix(t,true,true,this._iPageSize)}};p.prototype.onsappageupmodifiers=function(t){if(t.altKey){this._moveThroughMatrix(t,true,false,this._iPageSize)}};p.prototype.onsapspace=function(t){this._handleEnter();if(this._oGraph.getFocusDomRef()===document.activeElement){t.stopPropagation();t.preventDefault()}};p.prototype.onsapspacemodifiers=function(t){if(t.ctrlKey&&this._oGraph.getFocusDomRef()===document.activeElement){this._selectElement(true);t.stopPropagation();t.preventDefault()}};p.prototype.onsapenter=function(t){this._handleEnter()};p.prototype.onsaptabnext=function(t){this._handleTab(t,a.RIGHT)};p.prototype.onsaptabprevious=function(t){this._handleTab(t,a.LEFT)};p.prototype.onsapleft=function(t){this._handleArrow(t,a.LEFT)};p.prototype.onsapright=function(t){this._handleArrow(t,a.RIGHT)};p.prototype.onsapup=function(t){this._handleArrow(t,a.UP)};p.prototype.onsapdown=function(t){this._handleArrow(t,a.DOWN)};p.prototype.onkeydown=function(t){var e,r,u=this.getFocus();if(!u){return}e=u.item;r=u.button;if(t.ctrlKey&&t.keyCode===n.A){this._onCtrlA(t)}else if(t.keyCode===n.F2){if(e instanceof i){if(e.hasVisibleActionButtons()){e._detailClick()}}else if(e instanceof s){e.getParent()._tooltip.openDetail({item:e,point:e._getArrowFragmentVector().apex})}else if(e instanceof o){e._openDetail()}t.stopPropagation()}else if(t.keyCode===n.F6){if(e&&r){u.button=null;this._oGraph.setFocus(u)}this._handleArrow(t,t.shiftKey?a.LEFT:a.RIGHT)}else if(t.keyCode===n.F7&&!t.shiftKey){if(e&&r){u.button=null;this._oGraph.setFocus(u)}}else if(t.ctrlKey&&(t.keyCode===n.DIGIT_0||t.keyCode===n.NUMPAD_0)){this._onCtrl0(t)}else if(t.ctrlKey&&(t.keyCode===n.PLUS||t.keyCode===n.NUMPAD_PLUS)){this._onCtrlPlus(t)}else if(t.ctrlKey&&(t.keyCode===n.SLASH||t.keyCode===n.NUMPAD_MINUS)){this._onCtrlMinus(t)}};p.prototype._handleEnter=function(){var e,n,r=this.getFocus();if(!r){return}if(r.button=="menu"){r.item._setMenuButtonFocus(false)}e=r.item;n=r.button;if(e instanceof i){if(n){this._oGraph._isUseNodeHtml()?t(n).trigger("click"):t(n).children().first().trigger("click")}else{e._mouseDown(false);if(!e.getSelected()){e.$().removeClass(e.HIGHLIGHT_CLASS);e._setStatusColors("")}}}else if(e instanceof s){var u=e._getArrowFragmentVector();e._click({ctrlKey:false,clientX:u.apex.x,clientY:u.apex.y,skipConversion:true})}else if(e instanceof o){if(n===o.BUTTONS.MENU){e._openDetail()}else if(n===o.BUTTONS.COLLAPSE){e._collapse()}else{e._openDetail()}}};p.prototype._handleTab=function(t,e){if(this._ignoreEvent(t)){this._oWrapperDom.classList.remove("sapSuiteUiCommonsNetworkGraphContentFocusHidden");return}else{this._oWrapperDom.classList.add("sapSuiteUiCommonsNetworkGraphContentFocusHidden")}if(this._handleTabOverNodeWithButtons(t,e)||this._handleTabOverGroupWithButtons(t,e)){t.preventDefault();t.stopPropagation();return}this._moveItemFocus(t,e)};p.prototype._handleTabOverNodeWithButtons=function(t,e){var o=this.getFocus(),s,n,r,u=false,l;if(!o){return false}s=o.item;n=o.button;r=s&&s.getEnabledActionButtons?s.getEnabledActionButtons():[];if(!(s instanceof i)||!s.hasVisibleActionButtons()||r.length===0){return false}if(n){l=0;for(var h=0;h<r.length;h++){if(r[h].isEqualNode(n)){l=h;break}}if(e===a.RIGHT){if(l===r.length-1){return false}else{this._setActionButtonFocus(r[l+1])}u=true}else if(e===a.LEFT){if(l===0){this._moveItemFocus(t,this.getFocusPosition())}else{this._setActionButtonFocus(r[l-1])}u=true}}else if(e===a.RIGHT){this._setActionButtonFocus(r[0]);u=true}return u};p.prototype._handleTabOverGroupWithButtons=function(t,e){var i=this.getFocus(),s,n;if(!i){return false}s=i.item;n=i.button;if(s instanceof o){if(!n){n=o.BUTTONS.MENU}if(n){if(n===o.BUTTONS.MENU){if(e===a.RIGHT){i.button=o.BUTTONS.COLLAPSE;this._oGraph.setFocus(i);return true}else if(e===a.LEFT){return false}}else if(n===o.BUTTONS.COLLAPSE){if(e===a.RIGHT){return false}else if(e===a.LEFT){i.button=o.BUTTONS.MENU;this._oGraph.setFocus(i);return true}}}}return false};p.prototype._setActionButtonFocus=function(t){var e=this.getFocus();if(!e){return}e.button=t;this._oGraph.setFocus(e)};p.prototype._selectElement=function(t){var e=this.getFocus(),o;if(!e){return}o=e.item;if(o instanceof i){o.getParent()._selectNode({element:o,setFocus:false,renderActionButtons:false,preventDeselect:t})}else if(o instanceof s){o.getParent()._selectLine({element:o,setFocus:false,preventDeselect:t})}};p.prototype._moveThroughMatrix=function(t,e,o,i){var s=this.getFocus(),n,r,u,a,l=this.getFocusPosition().iX,h=this.getFocusPosition().iY;if(this._ignoreEvent(t)||!s){return}n=s.item;u=0;i=i||Number.POSITIVE_INFINITY;do{for(var f=(e?l:h)+(o?1:-1);o&&f<(e?this._iColumns:this._iRows)||!o&&f>=0;f+=o?1:-1){r=e&&h>=0&&h<this._iRows||!e&&l>=0&&l<this._iColumns?this._aItems[e?h:f][e?f:l]:null;if(r&&u<i){a=r;u++;if(u>=i){break}}}if(i<Number.POSITIVE_INFINITY&&u<i){if(e){if(o){l=-1;h++}else{l=this._iColumns;h--}}else if(o){l++;h=-1}else{l--;h=this._iRows}}}while(i<Number.POSITIVE_INFINITY&&u<i&&h>=-1&&h<=this._iRows&&l>=-1&&l<=this._iColumns);if(a&&a!==n){s.item=a;s.button=null;this._oGraph.setFocus(s);t.stopPropagation()}};p.prototype._handleArrow=function(t,e){if(this._ignoreEvent(t)||!this.getFocus()){return}this._moveItemFocus(t,e,true)};p.prototype._moveItemFocus=function(t,e,s){var n,r=e===a.LEFT&&t.key==="Tab",u,l,h;if(typeof e==="string"){u=this._findNextPosition(e)}else{u=e}l=this._getItemAtPosition(u);n={item:l,button:null};if(r&&l!==null){if(l instanceof i&&l.hasVisibleActionButtons()){h=l.getEnabledActionButtons();if(h.length>0){n.button=h[h.length-1]}}else if(l instanceof o){n.button=o.BUTTONS.COLLAPSE}}if(l||!s){this._oGraph.setFocus(n)}if(t&&l){t.preventDefault();t.stopPropagation()}};p.prototype._getItemAtPosition=function(t){var e;if(!t||t.iX===null){return null}else{e=this._aItems[t.iY];return e?e[t.iX]:null}};p.prototype._findNextPosition=function(t){var e,o;if(this.getFocusPosition().iX===null){if(t===a.LEFT){e=this._iColumns-1;o=this._iRows-1}else{e=0;o=0}if(this._aItems[o][e]!==null){return{iX:e,iY:o}}}else{e=this.getFocusPosition().iX;o=this.getFocusPosition().iY}do{switch(t){case a.RIGHT:e+=1;if(e>=this._iColumns){o+=1;e=0}break;case a.LEFT:e-=1;if(e<0){o-=1;e=this._iColumns-1}break;case a.UP:o-=1;if(o<0&&e>0){e-=1;o=this._iRows-1}break;case a.DOWN:o+=1;if(o>=this._iRows&&e<this._iColumns-1){e+=1;o=0}break;default:throw new Error("Unexpected direction: "+t)}}while(o>=0&&o<this._iRows&&this._aItems[o][e]===null);if(o<0||o>=this._iRows){return null}else{return{iX:e,iY:o}}};p.prototype._onCtrlA=function(t){if(this._ignoreEvent(t)){return}var e=true;this._forEach(function(t){if(t instanceof o){return false}if(!t.getSelected()){e=false;return true}return false});e=!e;this._forEach(function(t){if(!(t instanceof o)){t.setSelected(e)}});t.preventDefault();t.stopPropagation()};p.prototype._forEach=function(t){var e,o,i,s;for(o=0;o<this._iRows;o++){for(e=0;e<this._iColumns;e++){i=this._aItems[o][e];if(i){s=t.call(this,i,e,o);if(s){return}}}}};p.prototype._onCtrl0=function(t){this._oGraph._zoom({zoomLevel:this._oGraph.ZOOM_100});t.preventDefault();t.stopPropagation()};p.prototype._onCtrlPlus=function(t){this._oGraph._zoom({deltaY:1});t.preventDefault();t.stopPropagation()};p.prototype._onCtrlMinus=function(t){this._oGraph._zoom({deltaY:-1});t.preventDefault();t.stopPropagation()};p.prototype._ignoreEvent=function(t){return!r(this._oWrapperDom,t.target)};p.prototype._handleError=function(t){u.error("An error in KeyboardNavigator: "+t)};h(p);return p});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/Line",["sap/suite/ui/commons/library","./ElementBase","./layout/Geometry","./Coordinate","./Utils"],function(t,e,o,i,r){"use strict";var s=t.networkgraph.LineArrowPosition,n=t.networkgraph.LineType,a=t.networkgraph.LineArrowOrientation,h=t.networkgraph.NodeShape,p=t.networkgraph.Orientation;var g=6,u=5,d=.45,l=15,c={Apex:{x:5.5,y:0},Second:{x:-5.5,y:-7.5},Third:{x:-5.5,y:7.5}},f={Apex:{x:16,y:0},Second:{x:5,y:-7.5},Third:{x:5,y:7.5}},y={Apex:{x:-12,y:0},Second:{x:-1,y:-7.5},Third:{x:-1,y:7.5}},_=5;var m=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var C=e.extend("sap.suite.ui.commons.networkgraph.Line",{metadata:{library:"sap.suite.ui.commons",properties:{selected:{type:"boolean",group:"Misc",defaultValue:false},from:{type:"string",group:"Misc",defaultValue:null},to:{type:"string",group:"Misc",defaultValue:null},lineType:{type:"sap.suite.ui.commons.networkgraph.LineType",group:"Appearance",defaultValue:n.Solid},arrowPosition:{type:"sap.suite.ui.commons.networkgraph.LineArrowPosition",group:"Appearance",defaultValue:s.End},arrowOrientation:{type:"sap.suite.ui.commons.networkgraph.LineArrowOrientation",group:"Appearance",defaultValue:a.ParentOf},stretchToCenter:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{coordinates:{type:"sap.suite.ui.commons.networkgraph.Coordinate",multiple:true,singularName:"coordinate"},actionButtons:{type:"sap.suite.ui.commons.networkgraph.ActionButton",multiple:true,singularName:"actionButton"}},events:{hover:{},press:{parameters:{point:"Object",opener:"Object"}}}},renderer:function(t,e){t.write(e._render())},onAfterRendering:function(){this._afterRenderingBase()},init:function(){this._oFrom=null;this._oTo=null;this._bFocusRendered=false;this._sKey="";this._bIsHidden=false}});C.prototype.aProcessRequiredProperties=["from","to"];C.prototype._afterRendering=function(){this._setupEvents();if(this.getFromNode()._bIsHidden||this.getToNode()._bIsHidden){this.$().hide()}this._removeFromInvalidatedControls()};C.prototype._render=function(t){var o="",i=this.getSelected()?" "+this.SELECT_CLASS+" ":"",r=this._getElementId(t&&t.idSufix),n;var h=this._getStatusStyle({stroke:e.ColorType.Border,"stroke-width":e.ColorType.BorderWidth,"stroke-dasharray":e.ColorType.BorderStyle});var g=this._getStatusStyle({fill:e.ColorType.Background,stroke:e.ColorType.Border});var u=function(t,e,o){return this._renderControl("path",{d:n,class:t||this._getLineClass(),style:o?"":h,from:this.getFromNode().getKey(),to:this.getToNode().getKey(),id:r?r+"-"+e:""})}.bind(this);var d=function(t,e,o){return{id:r+"-"+o,class:"sapSuiteUiCommonsNetworkLineArrow",style:g,d:"M "+e[t+0].x+","+e[t+0].y+" L "+e[t+1].x+","+e[t+1].y+" L "+e[t+2].x+","+e[t+2].y+" Z"}};var l=function(t,e,o){var i=this._getArrowPoints(t,e),r=this._renderControl("path",d(0,i,o||"arrow"));if(this._isBothMiddleArrow()){r+=this._renderControl("path",d(3,i,"arrow1"))}return r}.bind(this);var c=function(t,e,o){var i=t,r=e,s=" 0 0 0 ";if(o===p.LeftRight||o===p.RightLeft){e-=_;r+=_}if(o===p.TopBottom||o===p.BottomTop){t-=_;i+=_}if(o===p.BottomTop||o===p.LeftRight){s=" 0 0 1 "}return"M"+t+" "+e+"A"+_+" "+_+s+" "+i+" "+r};this._bFocusRendered=false;if(this._isIgnored()){return""}if(!this.getVisible()){return'<g style="display:none" id="'+r+'" data-sap-ui="'+r+'"></g>'}n=this._createPath();o+=this._renderControl("g",{class:"sapSuiteUiCommonsNetworkLine "+this._getStatusClass()+i,id:r,"data-sap-ui":r},false);o+=u("sapSuiteUiCommonsNetworkLineInvisibleWrapper","invisibleWrapper",true);o+=u("","path");if(this.getArrowOrientation()!==a.None&&this.getCoordinates().length>=2){if(this.getArrowOrientation()===a.Both){if(this.getArrowPosition()===s.Middle){o+=l(a.ParentOf,s.Middle)}else{o+=l(a.ChildOf,s.Start,"arrow");o+=l(a.ParentOf,s.End,"arrow1")}}else{o+=l()}}if(this._aNipples){var f=g?'style="'+g+'"':"";this._aNipples.forEach(function(t){o+="<path "+f+' class="sapSuiteUiCommonsNetworkLineNipple" d="'+c(t.x,t.y,t.orientation)+'" />'})}o+="</g>";return o};C.prototype._renderFocusWrapper=function(){var t=function(t){var e=this._createElement("path",{d:this._createPath(t),class:"sapSuiteUiCommonsNetworkLineFocus"});this.$()[0].appendChild(e)}.bind(this);if(!this._bFocusRendered){t(u);t(-u);this._bFocusRendered=true}};C.prototype._resetLayoutData=function(){this._aNipples=null};C.prototype._createPath=function(t){if(!this.getSource()||!this.getTarget()){return}var e=[{x:this.getSource().getX(),y:this.getSource().getY()}],i="M"+this.getSource().getX()+","+this.getSource().getY(),r,s,n=this._isTopBottom(),a=n?"x":"y",h=n?"getX":"getY",p=this.getBends().concat([this.getTarget()]);for(var u=0;u<p.length;u++){r=e[u-1]?e[u-1][a]:NaN;s=p[u][h]();if(Math.abs(r-p[u][h]())<2){e.pop();s=r}e.push({x:n?s:p[u].getX(),y:!n?s:p[u].getY()})}for(var d=1;d<e.length;d++){i+=" L"+e[d].x+","+e[d].y}return o.getBezierPathCorners(i,g,t)};C.prototype._getLineClass=function(){var t=function(){switch(this.getLineType()){case n.Dashed:return"sapSuiteUiCommonsNetworkDashedLine";case n.Dotted:return"sapSuiteUiCommonsNetworkDottedLine";default:return""}}.bind(this);return"sapSuiteUiCommonsNetworkLinePath "+t()};C.prototype._getArrowFragmentVector=function(t){var e=this.getCoordinates(),i=e.length-1,r=0,n=function(t){return Math.abs(e[t].getX()-e[t+1].getX())+Math.abs(e[t].getY()-e[t+1].getY())};t=t||this.getArrowPosition();if(this.getBends().length===0){r=0}else if(t===s.Start){while(r<i-1&&this._doesLineFragmentCrossCollapsedGroup(r)){r++}if(n(r)<l){r++}if(this._doesLineFragmentCrossCollapsedGroup(r)){r=0}}else if(t===s.End){r=i-1;while(r>0&&this._doesLineFragmentCrossCollapsedGroup(r)){r--}if(n(r)<l){r--}}else{var a=[],h=0;for(var p=0;p<i;p++){if(e[p].getX()===e[p+1].getX()){h+=Math.abs(e[p+1].getY()-e[p].getY())}else if(e[p].getY()===e[p+1].getY()){h+=Math.abs(e[p+1].getX()-e[p].getX())}else{h+=o.getPointsDistance({x:e[p].getX(),y:e[p].getY()},{x:e[p+1].getX(),y:e[p+1].getY()})}a.push(h)}h=h/2;for(p=0;p<i&&r===0;p++){if(a[p]>=h&&!this._doesLineFragmentCrossCollapsedGroup(p)){r=p}}}if(r<0||r>i-1){r=0}return{center:{x:e[r].getX(),y:e[r].getY()},apex:{x:e[r+1].getX(),y:e[r+1].getY()}}};C.prototype._doesLineFragmentCrossCollapsedGroup=function(t){var e=this.getParent(),i=this.getCoordinates()[t],r=this.getCoordinates()[t+1];return e.getGroups().some(function(t){return t.getCollapsed()&&o.doLineRectangleIntersect({p1:{x:Math.min(i.getX(),r.getX())+1,y:Math.min(i.getY(),r.getY())+1},p2:{x:Math.max(i.getX(),r.getX())-1,y:Math.max(i.getY(),r.getY())-1}},{p1:{x:t.getX(),y:t.getY()},p2:{x:t.getX()+t._iWidth,y:t.getY()+t._iHeight}})})};C.prototype._getArrowPoints=function(t,e){var i,r,n,p,g=[];t=t||this.getArrowOrientation();e=e||this.getArrowPosition();var u=function(u){var c=l;if(e===s.Middle){n={x:(r.apex.x-r.center.x)*d+r.center.x,y:(r.apex.y-r.center.y)*d+r.center.y}}else{if(!(this.getToNode()._oGroup&&this.getToNode()._oGroup.getCollapsed())&&this.getToNode().getShape()===h.Circle&&e===s.End){c+=this.getToNode()._getCircleSize()/2}else if(!(this.getFromNode()._oGroup&&this.getFromNode()._oGroup.getCollapsed())&&this.getFromNode().getShape()===h.Circle&&e===s.Start){c+=this.getFromNode()._getCircleSize()/2}i=o.getNormalizedVector(r,c);if(e===s.Start){n=r.center}else if(e===s.End){i=o.getRotatedVector(i,Math.PI);n=r.apex}n=o.getPointSum(n,i.apex)}p=o.getAngleOfVector(r);if(t===a.ChildOf){p+=Math.PI}g.push(o.getPointSum(n,o.getRotatedPoint(u,p)))}.bind(this);r=this._getArrowFragmentVector(e);if(this._isBothMiddleArrow()){u(f.Apex);u(f.Second);u(f.Third);u(y.Apex);u(y.Second);u(y.Third)}else{u(c.Apex);u(c.Second);u(c.Third)}return g};C.prototype._getAccessibilityLabel=function(){return m.getText("NETWORK_GRAPH_ACCESSIBILITY_LINE_LABEL",[this.getFromNode().getTitle(),this.getToNode().getTitle()])+" "+this.getTitle()};C.prototype.getFromNode=function(){this._checkForProcessData();if(!this._oFrom&&this.getParent()){this._oFrom=this.getParent().getNodeByKey(this.getFrom())}return this._oFrom};C.prototype.getToNode=function(){this._checkForProcessData();if(!this._oTo&&this.getParent()){this._oTo=this.getParent().getNodeByKey(this.getTo())}return this._oTo};C.prototype.setSource=function(t){var e;if(this.getCoordinates().length===0){e=new i;this.addAggregation("coordinates",e,true)}e=this.getCoordinates()[0];if(t.x||t.x===0){e.setX(t.x)}if(t.y||t.y===0){e.setY(t.y)}};C.prototype.getSource=function(){return this.getCoordinates()[0]};C.prototype.getTarget=function(){return this.getCoordinates().length>0?this.getCoordinates()[this.getCoordinates().length-1]:null};C.prototype.setTarget=function(t){var e;if(this.getCoordinates().length<2){e=new i;this.addAggregation("coordinates",e,true)}e=this.getCoordinates()[this.getCoordinates().length-1];if(t.x||t.x===0){e.setX(t.x)}if(t.y||t.y===0){e.setY(t.y)}};C.prototype.getBends=function(){return this.getCoordinates().filter(function(t,e){return e>0&&e<this.getCoordinates().length-1},this)};C.prototype.clearBends=function(){this.getBends().forEach(function(t){this.removeAggregation("coordinates",t,true)},this)};C.prototype.addBend=function(t){var e=new i;e.setX(t.x);e.setY(t.y);this.insertAggregation("coordinates",e,this.getCoordinates().length-1,true);return e};C.prototype.isHidden=function(){return this._bIsHidden};C.prototype.getKey=function(){return this._getLineId()};C.prototype.setHidden=function(t){this.$()[t?"hide":"show"]()};C.prototype._isIgnored=function(){var t=this.getFromNode(),e=this.getToNode(),o=t._oGroup&&t._oGroup.getCollapsed()&&e._oGroup&&e._oGroup.getCollapsed()&&t._oGroup===e._oGroup,i=!t._useInLayout()||!e._useInLayout();return!this._useInLayout||o||this._isLoop()||i};C.prototype._isLoop=function(){return this.getFromNode().getId()===this.getToNode().getId()};C.prototype._getLineId=function(){return this._sKey?this._sKey:"line_"+this.getFrom()+"-"+this.getTo()};C.prototype._setupEvents=function(){var t=this.$().find(".sapSuiteUiCommonsNetworkLineInvisibleWrapper");t.on("click",function(t){this._click({ctrlKey:t.ctrlKey,clientX:t.clientX,clientY:t.clientY})}.bind(this));t.on("mouseover",function(t){this._mouseOver()}.bind(this));t.on("mouseout",function(t){this._mouseOut()}.bind(this))};C.prototype._mouseOut=function(){this.$().removeClass(this.HIGHLIGHT_CLASS);if(!this.getSelected()){this._setStatusColors("")}};C.prototype._mouseOver=function(){var t=this.fireEvent("hover",{},true);if(!this.getSelected()&&t){this._setStatusColors("Hover");this.$().addClass(this.HIGHLIGHT_CLASS)}};C.prototype._setStatusColors=function(t){var o=this.$().find(".sapSuiteUiCommonsNetworkLineArrow"),i=this._getColor(e.ColorType[t+"Border"]),r=this._getColor(e.ColorType[t+"Background"]);o.css("fill",r);o.css("stroke",i);this.$("path").css("stroke",i);if(this.getParent()&&this.getParent()._isSwimLane()){var s=this.$().find(".sapSuiteUiCommonsNetworkLineNipple");s.css("fill",r);s.css("stroke",i)}};C.prototype._showActionButtons=function(t){var e=function(t,e,o){var r=i(t,e,o);if(r){t._setNodeOpacity(true);a._aShadedNodes.push(t)}return r};var i=function(t,e,i){return o.hasRectangleRectangleIntersection({p1:{x:y,y:f},p2:{x:i,y:e}},t._getContentRect())};var r=function(t,e){return{p1:{x:t.x,y:t.y},p2:{x:e.x,y:e.y}}};var s=0;var n=function(t,e){if(s<2){var o=jQuery("<div></div>",{class:t,css:{top:e.top,left:e.left,right:e.right,bottom:e.bottom}});p.append(o);s++}};var a=this.getParent(),h=a.$("divlinebuttons"),p=a.$("linetooltip"),g=a.$("linetooltipbuttons");var u=this.getFromNode(),d=this.getToNode();var l=10;a._aShadedNodes=[];var c='<span class="sapSuiteUiCommonsNetworkGraphLineTooltipText">'+u.getTitle()+"</span>";if(this._isBothArrow()){c+='<span class="sapSuiteUiCommonsNetworkGraphLineTooltipArrow sapSuiteUiCommonsNetworkGraphLineTooltipDualArrow"></span>'}c+='<span class="sapSuiteUiCommonsNetworkGraphLineTooltipArrow"></span>'+"</br>"+'<span class="sapSuiteUiCommonsNetworkGraphLineTooltipText">'+d.getTitle()+"</span>";p.html(c);g.html("");this.getActionButtons().forEach(function(t){this._appendActionButton({icon:t.getIcon(),enable:t.getEnabled(),title:t.getTitle(),id:t.getId(),click:function(e){t.firePress({buttonElement:e.target})}},g)}.bind(this));h.show();var f=t.y-p.outerHeight()/2,y=t.x-p.outerWidth()/2,_=f+p.outerHeight(),m=y+p.outerWidth();e(d,_,y+h.width());var C=e(u,f+p.height(),y),S=e(d,_,y+p.outerWidth()+l);if(a._isLayered()){var v={x:y,y:f};var w={x:m,y:f};var T={x:m,y:_};var x={x:y,y:_};var L=this.getCoordinates();for(var A=0;A<L.length-1&&s<2;A++){var N=L[A],P=L[A+1];var F={x:N.getX(),y:N.getY()};var b={x:P.getX(),y:P.getY()};var k=r(F,b);var B=o.getSegmentsIntersection(k,r(v,x));if(B&&!C){n("sapSuiteUiCommonsNetworkGraphTooltipLeftArrow",{top:B.y-f-l})}B=o.getSegmentsIntersection(k,r(w,T));if(B&&!S){n("sapSuiteUiCommonsNetworkGraphTooltipRightArrow",{top:B.y-f-l})}B=o.getSegmentsIntersection(k,r(x,T));if(B){n("sapSuiteUiCommonsNetworkGraphTooltipBottomArrow",{left:B.x-y-l})}B=o.getSegmentsIntersection(k,r(v,w));if(B){n("sapSuiteUiCommonsNetworkGraphTooltipTopArrow",{left:B.x-y-l})}}h.css("top",f+"px");h.css("left",y+"px")}};C.prototype._setActionButtonFocus=function(t,e){var o=this.getParent().$("divlinebuttons");o.removeClass(this.FOCUS_CLASS);o.find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS);jQuery(t).toggleClass(this.FOCUS_CLASS,e)};C.prototype._click=function(t){var e=this.getParent(),o=t.skipConversion?{x:t.clientX,y:t.clientY}:e.getCorrectMousePosition({x:t.clientX,y:t.clientY}),i=e._tooltip._getOpener(this,o),r;e._selectLine({element:this,forceFocus:true,preventDeselect:t.ctrlKey});r=this.fireEvent("press",{opener:i,point:o},true);if(this.getSelected()&&r){this.getActionButtons().length===0?e._tooltip.openDetail({item:this,opener:i,point:o}):this._showActionButtons(o)}};C.prototype._setFocus=function(t){e.prototype._setFocus.call(this,t);if(t){this._renderFocusWrapper()}};C.prototype._isEndPosition=function(){return this.getArrowPosition()===s.End&&this.getArrowOrientation()===a.ParentOf||this.getArrowPosition()===s.Start&&this.getArrowOrientation()===a.ChildOf};C.prototype._moveToEnd=function(){return this._isEndPosition()||this.getArrowPosition()===s.Middle&&this.getArrowOrientation()===a.ParentOf};C.prototype._hideShow=function(t){if(t){this.$().hide();this._bIsHidden=true}else if(!this.getToNode()._bIsHidden&&!this.getFromNode()._bIsHidden){this.$().show();this._bIsHidden=false}};C.prototype._shift=function(t){this.getBends().forEach(function(e){e.setX(e.getX()+t.x);e.setY(e.getY()+t.y)});if(this.getSource()){this.setSource({x:this.getSource().getX()+t.x,y:this.getSource().getY()+t.y})}if(this.getTarget()){this.setTarget({x:this.getTarget().getX()+t.x,y:this.getTarget().getY()+t.y})}if(this._aNipples){this._aNipples.forEach(function(e){e.x+=t.x;e.y+=t.y})}};C.prototype._normalizePath=function(){var t,e;t=this.getFromNode().getCenterPosition();this.setSource({x:t.x,y:t.y});e=this.getToNode().getCenterPosition();this.setTarget({x:e.x,y:e.y});this.clearBends()};C.prototype._validateLayout=function(){return(!this.getSource()||isFinite(this.getSource().getX())&&isFinite(this.getSource().getY()))&&(!this.getTarget()||isFinite(this.getTarget().getX())&&isFinite(this.getTarget().getY()))&&!this.getBends().some(function(t){return!isFinite(t.getX())||!isFinite(t.getY())})};C.prototype.setSelected=function(t){var e=this.getParent(),o=t?"addClass":"removeClass";this._setStatusColors(t?"Selected":"");this.setProperty("selected",t,true);this.$()[o](this.SELECT_CLASS);if(e){if(t){e._mSelectedLines[this._getLineId()]=this}else{this._setStatusColors("");delete e._mSelectedLines[this._getLineId()]}}return this};C.prototype.setFrom=function(t){var e=this.getParent();this.setProperty("from",t,true);if(e){e.invalidate()}return this};C.prototype.setTo=function(t){var e=this.getParent();this.setProperty("to",t,true);if(e){e.invalidate()}return this};C.prototype._isTopBottom=function(){var t=this.getParent();return t&&t._isTopBottom()};C.prototype.getFocusDomRef=function(){return this.getDomRef("invisibleWrapper")};C.prototype._createSuggestionHelpText=function(){var t=25;var e=this.getTitle()?this.getTitle()+" ":"";return e+"("+r.trimText(this.getFromNode().getTitle(),t)+" -> "+r.trimText(this.getToNode().getTitle(),t)+")"};C.prototype._isInCollapsedGroup=function(){var t=this.getFromNode(),e=this.getToNode();return t._oGroup===e._oGroup&&t._isInCollapsedGroup()};C.prototype._isBothMiddleArrow=function(){return this.getArrowOrientation()===a.Both&&this.getArrowPosition()===s.Middle};C.prototype._isBothArrow=function(){return this.getArrowOrientation()===a.Both};C.prototype._isOnScreen=function(t,o,i,r){var s=this.getCoordinates(),n,a;for(n=1;n<s.length;n++){a=e._isRectOnScreen(s[n-1].getX(),s[n].getX(),s[n-1].getY(),s[n].getY(),t,o,i,r);if(a){return true}}return false};return C});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/Node",["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","./ElementBase","./ElementAttribute","sap/ui/core/IconPool","sap/ui/Device","sap/base/security/encodeXML","sap/base/security/sanitizeHTML","sap/m/CheckBox","sap/m/Text","./NodeRenderer"],function(t,e,i,s,o,r,n,a,h,l,p){"use strict";var d=e.networkgraph.NodeShape,u=e.networkgraph.ActionButtonPosition,c=e.networkgraph.HeaderCheckboxState;var g=32,_=5,f=160,C=4;var m={Circle:{WIDTH:96,HEIGHT:64},Box:{WIDTH:160,HEIGHT:32},Attributes:{LINE:16,OFFSET:8},ActionButtons:{RADIUS:13,MARGIN:8,OFFSET:4},Title:{LINESIZE:15,OFFSET:8,ICON_SIZE:16,INFO_BOX_SIZE:20,ICON_X_OFFSET:6,IMAGE_OFFSET_Y:6},Description:{LINESIZE:15},Image:{Box:16,Circle:32}};var S={EXPANDED:"Expanded",COLLAPSED:"Collapsed",PARTIAL:"Partial"};var y={EXPAND:"sys-add",COLLAPSE:"sys-minus",PARTIAL:"overlay"};var T=o.getIconInfo(y.EXPAND),I=o.getIconInfo(y.COLLAPSE),v=o.getIconInfo(y.PARTIAL);T=T&&T.content;I=I&&I.content;v=v&&v.content;var N=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var x=i.extend("sap.suite.ui.commons.networkgraph.Node",{metadata:{library:"sap.suite.ui.commons",properties:{headerCheckBoxState:{type:"sap.suite.ui.commons.networkgraph.HeaderCheckboxState",group:"Misc",defaultValue:c.Hidden},collapsed:{type:"boolean",group:"Misc",defaultValue:false},selected:{type:"boolean",group:"Misc",defaultValue:false},group:{type:"string",group:"Misc",defaultValue:null},key:{type:"string",group:"Misc",defaultValue:null},shape:{type:"sap.suite.ui.commons.networkgraph.NodeShape",groups:"Behavior",defaultValue:d.Circle},icon:{type:"string",group:"Appearance",defaultValue:null},statusIcon:{type:"string",group:"Appearance",defaultValue:null},width:{type:"int",group:"Misc",defaultValue:undefined},height:{type:"int",group:"Misc",defaultValue:undefined},maxWidth:{type:"int",group:"Misc",defaultValue:undefined},x:{type:"float",group:"Misc",defaultValue:0},y:{type:"float",group:"Misc",defaultValue:0},showExpandButton:{type:"boolean",defaultValue:true},showActionLinksButton:{type:"boolean",defaultValue:true},showDetailButton:{type:"boolean",defaultValue:true},titleLineSize:{type:"int",defaultValue:1},descriptionLineSize:{type:"int",defaultValue:-1},iconSize:{type:"int",group:"Appearance",defaultValue:undefined},coreNodeSize:{type:"int",group:"Appearance",defaultValue:0},visible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{actionLinks:{type:"sap.ui.core.Control",multiple:true,singularName:"actionLink"},actionButtons:{type:"sap.suite.ui.commons.networkgraph.ActionButton",multiple:true,singularName:"actionButton"},image:{type:"sap.suite.ui.commons.networkgraph.NodeImage",multiple:false,singularName:"nodeImage"},content:{type:"sap.ui.core.Control",multiple:false},_checkBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"}},events:{headerCheckBoxPress:{parameters:{checked:"boolean"}},press:{},hover:{},collapseExpand:{}}},onAfterRendering:function(){this._afterRenderingBase()}});x.prototype.aProcessRequiredProperties=["key","group"];x.prototype.init=function(t){this._bThemeApplied=true;if(!sap.ui.getCore().isInitialized()){this._bThemeApplied=false;sap.ui.getCore().attachInit(this._handleCoreInitialized.bind(this))}else{this._handleCoreInitialized()}this._oExpandState=S.EXPANDED;this._oGroup=null;this._iWidth=0;this._iHeight=0;this._iLabelAttrWidth=0;this._iValueAttrWidth=0;this._aTitleLines=[[]];this._aDescriptionLines=[[]];this._bIsHidden=false;this._bActionButtonsRendered=false;this._iCircleSize=0;this._iGroupIndex=-1;this._clearChildren()};x.prototype._handleCoreInitialized=function(){this._bThemeApplied=sap.ui.getCore().isThemeApplied();sap.ui.getCore().attachThemeChanged(this._handleThemeApplied,this)};x.prototype._handleThemeApplied=function(){this._bThemeApplied=true;this.invalidate()};x.prototype._clearChildren=function(){this.aChildren=[];this.aParents=[];this.aLines=[];this.aParentLines=[]};x.prototype._afterRendering=function(){var t=this.$();if(this._isInCollapsedGroup()){return}this._correctTitle("sapSuiteUiCommonsNetworkNodeTitle");this._setupEvents();if(this._bIsHidden){t.hide()}if(!this.getVisible()||this._oGroup&&!this._oGroup.getVisible()){t.hide()}if(this._oExpandState===S.COLLAPSED){t.addClass("sapSuiteUiCommonsNetworkNodeCollapsed")}if(this._oExpandState===S.PARTIAL){t.addClass("sapSuiteUiCommonsNetworkNodePartialCollapsed")}this.$(this.getId()+"actionbuttons").detach();this._bActionButtonsRendered=false;this._removeFromInvalidatedControls();if(this._isHtml()&&!x.hasNativeLineClamp){this._setTextHeight(t.find(".sapSuiteUiCommonsNetworkGraphDivNodeTitle"),this.getTitleLineSize());this._setTextHeight(t.find(".sapSuiteUiCommonsNetworkGraphDivNodeDescription"),this.getDescriptionLineSize())}if(this.getSelected()){this.showActionButtons(true)}};x.prototype._render=function(t){var e=this.getParent(),i=e&&e._isUseNodeHtml();if(this._isIgnored()){return""}t=t||{};if(t.mapRender){if(this._oGroup&&!this._oGroup.getVisible()||!this.getVisible()){return""}}return i?this._renderHtml(t):this._renderSvg(t)};x.prototype._renderHtmlInfoIcon=function(t,e){t=t||{};e=e||{};var i=this.getStatusIcon(),s=this._convertToStyle(t,undefined,true),o=e.renderManager;o.openStart("div");o.attr("id",this._getElementId(e.idSufix)+"-statusiconwrapper");o.attr("title",N.getText("NETWORK_GRAPH_COLLAPSED"));this.applyStyles(o,this.getStyleObject(s));o.class("sapSuiteUiCommonsNetworkNodeDivInfoWrapper").class("sapSuiteUiCommonsNetworkNodeInfoWrapper");o.openEnd();o.openStart("div").class("sapSuiteUiCommonsNetworkNodeDivInfoIcon").class("sapSuiteUiCommonsNetworkGraphDivNodeIcon").openEnd();this._renderHtmlIcon(i||"sap-icon://hint",null,null,null,null,o);o.close("div");o.close("div")};x.prototype._renderHtmlText=function(t,e,i,s,o){this._renderHtmlElement("div",{"-webkit-line-clamp":e===0?"":e,color:s},{class:"sapSuiteUiCommonsNetworkGraphDivNodeText "+(i||"")+(e===1?" sapSuiteUiCommonsNetworkGraphDivTextBreakAll ":"")},o);o.text(t);o.close("div")};x.prototype._renderHtmlTitle=function(t,e){var i=this.getTitle();if(i){this._renderHtmlText(i,this.getTitleLineSize(),"sapSuiteUiCommonsNetworkGraphDivNodeTitleText sapSuiteUiCommonsNetworkGraphDivNodeTitle",t,e);e.openStart("div").style("clear","both").openEnd().close("div")}};x.prototype._renderHtmlDescription=function(t,e){var i=this.getDescriptionLineSize(),s=this.getDescription();if(s&&i!=-1){this._renderHtmlText(s,i,"sapSuiteUiCommonsNetworkGraphDivNodeDescription",t,e)}};x.prototype._renderHtmlTitleAndDescription=function(t){this._renderHtmlTitle(null,t);this._renderHtmlDescription(null,t)};x.prototype._renderHtmlAttributes=function(t){var e=this.getVisibleAttributes();if(!t.renderManager){return}if(e.length>0){t.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGraphDivNodeAttributes").openEnd();e.forEach(function(e){this._renderClonedControl(t,e)}.bind(this));t.renderManager.close("div")}};x.prototype._showDivActionButtons=function(t){var e=this,i=this.$("rightdivbuttons"),s=this.$("leftdivbuttons");if(t&&!this._bActionButtonsRendered){i.html("");s.html("");var o=0,r=0;if(this.getShowExpandButton()){this._appendActionButton({class:"sapSuiteUiCommonsNetworkNodeActionCollapseIcon",icon:this._getExpandIcon(true),enable:this._hasVisibleChildren(),title:N.getText("NETWORK_GRAPH_EXPAND_COLLAPSE"),id:this._getDomId("actionCollapse"),click:this._expandClick.bind(this)},i);o++}if(this.getShowDetailButton()){this._appendActionButton({icon:"sap-icon://menu",enable:this._hasDetailData()||this.getTitle(),id:this._getDomId("actionDetail"),title:N.getText("NETWORK_GRAPH_NODE_DETAILS"),click:function(t){this._detailClick(t.target)}.bind(this)},i);if(document.getElementById(this._getDomId("actionDetail"))){document.getElementById(this._getDomId("actionDetail")).setAttribute("aria-haspopup","dialog")}o++}if(this.getShowActionLinksButton()){this._appendActionButton({icon:"sap-icon://chain-link",enable:this._hasActionLinks(),title:N.getText("NETWORK_GRAPH_NODE_LINKS"),id:this._getDomId("actionLinks"),click:function(t){this._linksClick(t.target)}.bind(this)},i);if(document.getElementById(this._getDomId("actionLinks"))){document.getElementById(this._getDomId("actionLinks")).setAttribute("aria-haspopup","dialog")}o++}for(var n=0;o+r<C*2&&n<this.getActionButtons().length;n++){(function(t){var n=t.getPosition(),a=n===u.Right?o:r;if(a>=C){n=n===u.Left?u.Right:u.Left}var h=n===u.Right?i:s;e._appendActionButton({icon:t.getIcon(),enable:t.getEnabled(),title:t.getTitle(),id:t.getId(),click:function(e){t.firePress({buttonElement:e.target})}},h)})(this.getActionButtons()[n])}this._bActionButtonsRendered=true}var a=t?"addClass":"removeClass";this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons")[a](this.VISIBLE_ACTIONS_BUTTONS_CLASS)};x.prototype._getCorrectWidth=function(){var t=this._iWidth||this.getWidth()||"auto",e="";if(this.getMaxWidth()){e=this.getMaxWidth()+"px"}if(t!==""&&t!=="auto"){t+="px"}return{width:t,maxWidth:e}};x.prototype._renderHtml=function(t){var e=this._getElementId(t.idSufix),i=this._isCircle(),s=this._getCorrectWidth();this._renderHtmlElement("div",{width:i?s.width:"","max-width":i?s.maxWidth:"",top:!this._bMainRender&&this.getY()?this.getY()+"px":"",left:!this._bMainRender&&this.getX()?this.getX()+"px":"","min-width":f+"px"},{id:e,"data-sap-ui":e,class:this._getNodeClass()},t.renderManager);this.renderContent(t);t.renderManager.close("div")};x.prototype._renderHtmlContent=function(t){t=t||{};var e=this._getElementId(t.idSufix),s=this._iHeight||this.getHeight()||m.Circle.HEIGHT,o=this._isCircle();var r=function(){var e=this.getContent();if(e){t.renderManager.openStart("div",this.getId()+"-contentwrapper");t.renderManager.openEnd();this._renderClonedControl(t,e);t.renderManager.close("div")}else{this.renderItemContent(t)}}.bind(this);var n=this._getStatusStyle({"border-color":i.ColorType.Focus},false);if(o){this._iCircleSize=this._iCircleSize||s;var a=this._convertToStyle({width:this._iCircleSize+"px",height:this._iCircleSize+"px"},this._getStatusStyle({"border-color":i.ColorType.Border}),true);var h=this._getStatusStyle({"border-color":i.ColorType.Background},false);var l=this._getStatusStyle({"border-color":i.ColorType.Border,"background-color":this.getSelected()?i.ColorType.SelectedBackground:"","border-width":i.ColorType.BorderWidth,"border-style":i.ColorType.BorderStyle},false);t.renderManager.openStart("div",e+"-wrapperwithbuttons");t.renderManager.class("sapSuiteUiCommonsNetworkGraphDivInnerWrapper");this.applyStyles(t.renderManager,this.getStyleObject(a));t.renderManager.openEnd();this.renderHtmlActionButtons(t);t.renderManager.openStart("div",e+"-wrapper");this.applyStyles(t.renderManager,this.getStyleObject(l));t.renderManager.class("sapSuiteUiCommonsNetworkGraphDivInner");t.renderManager.openEnd();t.renderManager.openStart("div");t.renderManager.class("sapSuiteUiCommonsNetworkDivCircleWrapper");t.renderManager.openEnd();this._renderHtmlInfoIcon({},t);t.renderManager.openStart("div",e+"-focus");this.applyStyles(t.renderManager,this.getStyleObject(n));t.renderManager.class("sapSuiteUiCommonsNetworkDivFocus");t.renderManager.openEnd();t.renderManager.openStart("div",e+"-status");this.applyStyles(t.renderManager,this.getStyleObject(h));t.renderManager.class("sapSuiteUiCommonsNetworkDivCircleStatus");t.renderManager.openEnd();this.renderItemContent(t);t.renderManager.close("div");t.renderManager.close("div");t.renderManager.close("div");t.renderManager.close("div");t.renderManager.close("div");this._renderHtmlTitleAndDescription(t.renderManager)}else{var p=this._getCorrectWidth();var a=this._convertToStyle({width:p.width,"max-width":p.maxWidth?p.maxWidth:"inherit","min-width":f+"px"},this._getStatusStyle({"border-color":i.ColorType.Border,"background-color":this.getSelected()?i.ColorType.SelectedBackground:"","border-width":i.ColorType.BorderWidth,"border-style":i.ColorType.BorderStyle}),true);this.renderHtmlActionButtons(t);t.renderManager.openStart("div",e+"-wrapper");this.applyStyles(t.renderManager,this.getStyleObject(a));t.renderManager.class("sapSuiteUiCommonsNetworkGraphDivInner").openEnd();t.renderManager.openStart("div",e+"-focus");this.applyStyles(t.renderManager,this.getStyleObject(n));t.renderManager.class("sapSuiteUiCommonsNetworkDivFocus").openEnd();t.renderManager.close("div");var h=this._getStatusStyle({"background-color":i.ColorType.Background},false);var d=this._getColor(this.getSelected()?i.ColorType.Content:i.ColorType.HeaderContent);t.renderManager.openStart("div",e+"-header");this.applyStyles(t.renderManager,this.getStyleObject(h));t.renderManager.class("sapSuiteUiCommonsNetworkGraphDivHeader").class("sapSuiteUiCommonsNetworkGraphDivHeaderColor");if(!this._hasAdditionalContent()){t.renderManager.class("sapSuiteUiCommonsNetworkGraphDivHeaderOnly")}t.renderManager.openEnd();if(this._showHeaderCheckBox()){this._renderClonedControl(t,this._getHeaderCheckbox())}this._renderHtmlTitleIcon("sapSuiteUiCommonsNetworkGraphDivNodeIconTitle",t.renderManager);this._renderHtmlTitle(d,t.renderManager);t.renderManager.close("div");r();t.renderManager.close("div");this._renderHtmlInfoIcon({},t)}};x.prototype._getHeaderCheckbox=function(){var t=this.getAggregation("_checkBox"),e=this;if(!t){t=new h(this.getId()+"-checkbox").addStyleClass("sapSuiteUiCommonsNetworkGraphHeaderCheckboxInner");t.addEventDelegate({onAfterRendering:function(){t.$().on("mousedown",function(i){var s=!t.getSelected();t.setSelected(s);e.fireHeaderCheckBoxPress({checked:s});i.stopPropagation()})}});this.setAggregation("_checkBox",t,true)}return t};x.prototype._renderHtmlTitleIcon=function(t,e){var s=this.getIcon(),o=this.getImage(),r=this.getIconSize()?'style="font-size:'+this.getIconSize()+'px"':"",n,a;t=(t||"")+" sapSuiteUiCommonsNetworkGraphDivNodeTitleText sapSuiteUiCommonsNetworkGraphDivNodeIcon";n=this._getStatusStyle({color:this._isBox()?i.ColorType.HeaderContent:i.ColorType.Content},false);if(o){a=this._getImageSize();this._renderHtmlElement("img",{width:a.width+"px",height:a.height+"px"},{src:o.getSrc(),class:"sapSuiteUiCommonsNetworkGraphDivNodeImage"},e)}else if(s){e.openStart("div");this.applyStyles(e,this.getStyleObject(n));t.split(" ").forEach(function(t){if(t){e.class(t)}});e.openEnd();this._renderHtmlIcon(s,null,null,r,null,e);e.close("div")}};x.prototype._renderHtmlBoxContent=function(t){var e=this._hasAdditionalContent(),s=this._getElementId(t.idSufix);if(e){t.renderManager.openStart("div",s+"-additionalwarpper");t.renderManager.class("sapSuiteUiCommonsNetworkGraphDivAdditionalContent").openEnd();var o=this._getColor(i.ColorType.Content);this._renderHtmlDescription(o,t.renderManager);this._renderHtmlAttributes(t);t.renderManager.close("div")}};x.prototype._renderHtmlCircleContent=function(t){this._renderHtmlTitleIcon("sapSuiteUiCommonsNetworkGraphDivNodeCircleIcon",t.renderManager)};x.prototype._renderSvg=function(t){var e=this._getElementId(t.idSufix);var i=this._renderControl("g",{id:e,"data-sap-ui":e,nodeid:n(this.getKey()),class:this._getNodeClass()},false);i+=this._renderControl("g",{id:e+"-wrapper",class:"sapSuiteUiCommonsNetworkNodeShape"},false);i+=this._renderContent(t);i+="</g>";i+="</g>";return i};x.prototype._renderSvgContent=function(t){var e=this._isBox()?this._renderBox(t):this._renderCircle(t);var i=this.getParent()._bIsRtl,s,o;if(this._isCircle()){var r=this._iCircleSize/8,n=this._iCircleSize/5.3;s=i?this._getCirclePosition().x+this._iCircleSize-r:this._getCirclePosition().x+r;o=this.getY()+n}else{s=this.getX();o=this.getY()}e+=this.renderStatusIcon({x:s-this.getX(),y:o-this.getY()});return e};x.prototype._renderContent=function(t){return this.renderContent(t)};x.prototype._renderCircleContent=function(){var t=this._iCircleSize,e=this.getParent()._bIsRtl,s=this.getImage(),o,r=this.getX(),h=this.getY(),l="";if(this._displayImage(s)){o=this._getImageSize();l+=this._renderControl("image",{"xlink:href":n(s.getSrc()),x:r+this._iWidth/2-o.width/2,y:h+t/2-o.height/2,width:o.width,height:o.height})}else if(this.getIcon()){l+=this._renderIcon({attributes:{class:"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkCircleNodeIcon sapSuiteUiCommonsNetworkStatusText",style:(this.getIconSize()?"font-size:"+this.getIconSize()+"px;":"")+this._getStatusStyle({fill:i.ColorType.Content}),x:r+this._iWidth/2,y:h+t/2},icon:this.getIcon(),height:this.getIconSize()?this.getIconSize()-2:22})}if(this.getTitle()){if(!this._aTitleLines||this._aTitleLines.length===1){l+=this._renderClipPath({id:this.getId()+"-title-clip",x:r,y:h+t+m.Title.OFFSET-10,height:m.Title.LINESIZE*2});l+=this._renderTitle({class:"sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeText",x:r+this._iWidth/2,y:h+t+m.Title.OFFSET,title:a(this.getTitle()),maxWidth:this._iWidth-5})}else{l+=this._renderMultilineTitle({x:r+this._iWidth/2,y:h+t+m.Title.OFFSET*2})}}if(this._displayDescription()){l+=this._renderDescription({x:e?r+this._iWidth-m.Title.OFFSET:r+m.Title.OFFSET,y:h+this._getTitleHeight()+t+m.Title.OFFSET*2+m.Title.OFFSET/2})}return l};x.prototype._renderCircle=function(){var t="",e=this.getX(),s=this.getY(),o=6,r=2,n=this._iCircleSize;t+=this._renderControl("circle",{id:this.getId()+"-innerBox",cx:e+this._iWidth/2,cy:s+n/2,style:this._getStatusStyle({stroke:i.ColorType.Border}),r:n/2,class:"sapSuiteUiCommonsNetworkInnerCircle"});t+=this._renderControl("circle",{id:this.getId()+"-statusCircle",cx:e+this._iWidth/2,cy:s+n/2,style:this._getStatusStyle({stroke:i.ColorType.Background}),r:n/2-o,class:"sapSuiteUiCommonsNetworkInnerCircleStatus"});t+=this._renderControl("circle",{id:this.getId()+"-focusCircle",cx:e+this._iWidth/2,cy:s+n/2,style:this._getStatusStyle({stroke:i.ColorType.Focus}),r:n/2-r,class:"sapSuiteUiCommonsNetworkCircleFocus"});t+=this.renderItemContent();return t};x.prototype._renderBoxContent=function(t){var e=g/2,s=m.Title.ICON_X_OFFSET,o=this.getParent()._bIsRtl,r=this.getImage(),h=this.getY(),l=this.getX(),p,d=this._getImageSize(),u="";if(this._displayImage(r)){d=this._getImageSize();u+=this._renderControl("image",{"xlink:href":n(r.getSrc()),x:o?l+this._iWidth-m.Title.ICON_X_OFFSET-d.width:l+m.Title.ICON_X_OFFSET,y:h+m.Title.IMAGE_OFFSET_Y,width:d.width,height:d.height});s+=d.width+m.Title.ICON_X_OFFSET}else if(this.getIcon()){u+=this._renderIcon({attributes:{style:this._getStatusStyle({fill:i.ColorType.Content}),class:"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkNodeTitleIcon sapSuiteUiCommonsNetworkStatusText",x:o?l+this._iWidth-m.Title.ICON_X_OFFSET:l+m.Title.ICON_X_OFFSET,y:h+e},icon:this.getIcon(),height:m.Title.LINESIZE});s+=m.Title.ICON_SIZE+m.Title.ICON_X_OFFSET}if(this.getTitle()){p=this._iWidth-s-_;if(p>0){if(!this._aTitleLines||this._aTitleLines.length===1){u+=this._renderClipPath({id:this.getId()+"-title-clip",x:l,y:h,height:g});u+=this._renderTitle({class:"sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeText sapSuiteUiCommonsNetworkStatusText",style:this._getStatusStyle({fill:i.ColorType.Content}),x:o?l+this._iWidth-s:l+s,y:h+e,maxWidth:p,title:a(this.getTitle())})}else{u+=this._renderMultilineTitle({x:o?l+this._iWidth-s:l+s,y:h+m.Title.OFFSET*2})}}}if(this._displayDescription()){u+=this._renderDescription({x:o?l+this._iWidth-m.Title.OFFSET:l+m.Title.OFFSET-m.Title.OFFSET/3,y:h+this._getTitleHeight()+(this._hasMultiLineTitle()?m.Title.OFFSET*2+m.Title.OFFSET/2:m.Title.OFFSET*4)})}if(this._displayAttributes()){u+=t.sizeDetermination?this._renderAttributesForSize():this._renderAttributes({y:this.getY()+this._getDescriptionHeight()+this._getTitleHeight()+m.Title.OFFSET+(!this._hasMultiLineTitle()?m.Attributes.OFFSET:0)})}return u};x.prototype._renderBox=function(t){var e=6,s=4,o=(this._iTitleHeight||this._getTitleHeight())+e,r=3;var n=this.getY(),a=this.getX();var h=this._renderControl("rect",{id:this.getId()+"-innerBox",x:a,y:n,style:this._getStatusStyle({stroke:i.ColorType.Border}),class:"sapSuiteUiCommonsNetworkInnerRect",rx:r,ry:r,width:this._iWidth,height:this._iHeight,"pointer-events":"fill"});var l=this._iHeight===g;h+=this._renderRoundRect({id:this.getId()+"-innerStatusBox",x:a,y:n,style:this._getStatusStyle({fill:i.ColorType.Background}),class:"sapSuiteUiCommonsNetworkNodeBoxStatus",topRight:r,topLeft:r,bottomRight:l?r:0,bottomLeft:l?r:0,width:this._iWidth,height:Math.max(o,g),"pointer-events":"fill"});h+=this._renderControl("rect",{id:this.getId()+"-focusCircle",x:a+s,y:n+s,class:"sapSuiteUiCommonsNetworkBoxFocus",style:this._getStatusStyle({stroke:i.ColorType.Focus}),rx:5,ry:5,width:this._iWidth-s*2,height:this._iHeight-s*2});h+=this.renderItemContent(t);return h};x.prototype._renderInfoIcon=function(t,e,i,s){var o=this.getStatusIcon(),r=o?"sapSuiteUiCommonsNetworkNodeInfoWrapperCustomIcon":"",n='<g id="'+this.getId()+"-statusiconwrapper"+'" class="sapSuiteUiCommonsNetworkNodeInfoWrapper '+r+'">';n+=this._renderControl("circle",{class:"sapSuiteUiCommonsNetworkNodeInfoBox",cx:t,cy:e,r:i||m.Title.INFO_BOX_SIZE/2},false);n+="<title>"+N.getText("NETWORK_GRAPH_COLLAPSED")+"</title>";n+="</circle>";n+=this._renderIcon({attributes:{id:this.getId()+"-statusicon",class:"sapSuiteUiCommonsNetworkNodeInfoIcon sapSuiteUiCommonsNetworkGraphIcon",x:t+m.Title.INFO_BOX_SIZE/2-10,y:e,style:s?"font-size:"+s:""},icon:o||"sap-icon://hint",height:m.Title.INFO_BOX_SIZE/2+2.5});n+="</g>";return n};x.prototype._getNodeClass=function(){var t=this.getSelected()?this.SELECT_CLASS:"",e=this._hasCustomStatus()?" sapSuiteUiCommonsNetworkNodeCustomStatus ":"",i="";if(this.aCustomStyleClasses){i=this.aCustomStyleClasses.join(" ")}return(this.getParent()._isUseNodeHtml()?"sapSuiteUiCommonsNetworkGraphDivNode ":"sapSuiteUiCommonsNetworkNode ")+t+e+(this._isBox()?" sapSuiteUiCommonsNetworkBox ":" sapSuiteUiCommonsNetworkNodeCircle ")+this._getStatusClass()+i};x.prototype._renderAttributesForSize=function(){var t="",e="";this.getVisibleAttributes().forEach(function(i){t+=this._renderText({attributes:{class:"sapSuiteUiCommonsNetworkGraphAttribute",x:this.getX(),y:this.getY()},text:i.getLabel()});e+=this._renderText({attributes:{class:"sapSuiteUiCommonsNetworkGraphAttribute",x:this.getX(),y:this.getY()},text:i.getValue()})},this);t='<g id="'+this.getId()+'-attrLabel">'+t+"</g>";e='<g id="'+this.getId()+'-attrValue">'+e+"</g>";return t+e};x.prototype._getAttributeColor=function(t,e,i){var s=e+"Status",o=t["get"+s]()||this.getStatus();return this._getColor(i,o)};x.prototype._getAttributeColorString=function(t,e,i){var s=this._getAttributeColor(t,e,i);return s?"fill:"+s:""};x.prototype._renderAttributes=function(t){t=t||{};var e=2,o=6,r=12;var n=this.getParent()._bIsRtl,a=n?this.getX()+this._iWidth-o:this.getX()+o,h=this._iLabelAttrWidth?this._iLabelAttrWidth:this._iWidth/2-r,l=n?a-h-r:a+h+r,p=n?l-this.getX()-o:this.getX()+this._iWidth-l-o;var d=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-clip-attr-value)",id:this.getId()+"-attrValue"},false),u=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-clip-attr-label)",id:this.getId()+"-attrLabel"},false),c=t.y,g=this._renderClipPath({id:this.getId()+"-clip-attr-label",x:n?a-h-o+e:a-e,y:c,width:e*2+(n?h+o:h)});g+=this._renderClipPath({id:this.getId()+"-clip-attr-value",x:n?this.getX()+o+e:l-e,y:c,width:e*2+(n?p+o:p)});this.getVisibleAttributes().forEach(function(t,e){var o=c+m.Attributes.LINE*(e+1);u+=this._renderText({attributes:{style:this._getAttributeColorString(t,s.Type.Label,i.ColorType.Content),class:"sapSuiteUiCommonsNetworkGraphAttribute sapSuiteUiCommonsNetworkStatusText",x:a,id:t.getId()+"-label",y:o},text:t.getLabel()});d+=this._renderText({attributes:{style:this._getAttributeColorString(t,s.Type.Value,i.ColorType.Content),class:"sapSuiteUiCommonsNetworkGraphAttribute sapSuiteUiCommonsNetworkGraphAttributeValue sapSuiteUiCommonsNetworkStatusText",x:l,y:o,id:t.getId()+"-value"},text:t.getValue()})},this);d+="</g>";u+="</g>";return g+u+d};x.prototype._detailClick=function(t){t=t||this;t.useClientRect=true;this.getParent()._tooltip.openDetail({item:this,opener:t})};x.prototype._linksClick=function(t){t=t||this;this.getParent()._tooltip.openLink({item:this,opener:t})};x.prototype._expandClick=function(){var t=this.fireEvent("collapseExpand",{},true);if(t){this.setCollapsed(this._oExpandState!==S.COLLAPSED)}};x.prototype._setupMaxWidth=function(){var t=this.getMaxWidth();if(t){this._iWidth=t}};x.prototype._setTextHeight=function(t,e){if(t[0]&&e>0){var i=this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeIcon.sapSuiteUiCommonsNetworkGraphDivNodeIconTitle");i.hide();var s=t.height();t.css("white-space","nowrap");var o=t.height();if(o!==0&&s!==0){t.height(Math.min(s,e*o))}t.css("white-space","");i.show()}};x.prototype._applyMaxWidth=function(){var t=30,e=10;var i,s,o,r=0,n=0,a=0,h,l=this.getMaxWidth();if(this._oGroup&&this._oGroup.getCollapsed()){return}if(!this.getWidth()&&this.getMaxWidth()){s=this.$("attrLabel");o=this.$("attrValue");if(s[0]){n=s[0].getBBox().width}if(o[0]){r=o[0].getBBox().width}a=r+n+t;i=Math.max(this.$()[0].getBBox().width+e,a);this._iWidth=Math.max(Math.min(i,l),80);if(r&&n){h=Math.max(n,r);if(h*2+t/2<this._iWidth){return}if(a>this._iWidth){if(r<l/2){this._iLabelAttrWidth=this._iWidth-r-t}if(n<this._iWidth/2){this._iLabelAttrWidth=n+t/4}}else{this._iLabelAttrWidth=this._iWidth-r-t}}}};x.prototype._resetDimensions=function(){this._iWidth=0;this._iHeight=0;this._iCircleSize=0;this._iTitleHeight=0};x.prototype._setupDivDimensions=function(){var t=this.$();this._iWidth=t.width();this._iHeight=t.height()};x.prototype._setupWidthAndHeight=function(t){var e=this._isBox()?"Box":"Circle",i=this._getTitleHeight(),s=this.getTitle()||this._hasDetailData()?m.Title.LINESIZE:0,o=this._getDescriptionHeight();o=o?o+5:0;var r=function(){var t=this._iHeight||this.getHeight();if(this._isBox()&&!t){t=o+(this._hasMultiLineTitle()?i+m.Title.OFFSET:Math.max(i+s,m.Box.HEIGHT));if(this._displayAttributes()){t+=this.getVisibleAttributes().length*m.Attributes.LINE+m.Attributes.OFFSET}}if(this._isCircle()&&!this._iHeight){t=t?t:m[e].HEIGHT;this._iCircleSize=t;t+=i+o}return Math.max(t,30)}.bind(this);var n=function(){var t=Math.max(this._iWidth||this.getWidth()||m[e].WIDTH,30);if(this._isCircle()&&t<this._iCircleSize){t=this._iCircleSize}return t}.bind(this);this._iHeight=r();this._iWidth=n()};x.prototype._getTitleHeight=function(){var t=0,e=this._getImageSize();if(this._hasMultiLineTitle()){t=(this.getTitleLineSize()>0?Math.min(this._aTitleLines.length,this.getTitleLineSize()):this._aTitleLines.length)*m.Title.LINESIZE}else{t=this._isBox()||this.getTitle()?m.Title.LINESIZE:0}return Math.max(e.height,t)};x.prototype._getDescriptionHeight=function(){var t=this.getDescriptionLineSize();if(t===-1||!this._aDescriptionLines||!this.getDescription()){return 0}return(t>0?Math.min(t,this._aDescriptionLines.length):this._aDescriptionLines.length)*m.Description.LINESIZE};x.prototype._setupEvents=function(){var t=this.$("wrapper");t.off("mousedown");t.off("mouseover");t.off("mouseout");t.on("mousedown",function(t){if(t.which===1){this._mouseDown(t.ctrlKey)}t.preventDefault()}.bind(this));t.on("mouseover",function(t){this._mouseOver()}.bind(this));t.on("mouseout",function(t){this._mouseOut()}.bind(this))};x.prototype._mouseOut=function(){this.$().removeClass(this.HIGHLIGHT_CLASS);if(!this.getSelected()){this._setStatusColors("")}};x.prototype._mouseOver=function(){var t=this.fireEvent("hover",{},true);if(t){if(!this.getSelected()){this._setStatusColors("Hover")}this.$().addClass(this.HIGHLIGHT_CLASS)}};x.prototype._mouseDown=function(t){var e=this.fireEvent("press",{},true);this.getParent()._selectNode({element:this,forceFocus:true,renderActionButtons:e&&!this.getSelected(),preventDeselect:t});if(!this.getSelected()){this.$().addClass(this.HIGHLIGHT_CLASS);this._setStatusColors("Hover")}};x.prototype._deselect=function(){var t=this.$("innerBox");t.css("stroke",this._getColor(i.ColorType.Border));t.css("fill",this._getColor(i.ColorType.Background))};x.prototype._getExpandIcon=function(t){switch(this._oExpandState){case S.PARTIAL:return t?y.PARTIAL:v;case S.EXPANDED:return t?y.COLLAPSE:I;case S.COLLAPSED:return t?y.EXPAND:T;default:return t?y.EXPAND:T}};x.prototype._createLineText=function(t,e,i,s){var o=[[]],r=0,n,a,h,l,p,d,u=this._createElement("tspan");if(!t||e<0){return o}l=t.split(/\s+/).reverse();i.appendChild(u);while(l.length>0){a=l.pop();if(a){h=o[r];h.push(a);u.textContent=o[r].join(" ");if(u.getComputedTextLength()>e){if(h.length>1&&s!==1){l.push(h.pop())}if(h.length===1){d=this._createText(i,{text:h[0],width:e,dots:false});if(d){p=u.textContent;h.pop();h.push(p);n=a.substring(p.length);l.push(n)}}r++;if(s>0&&r>=s){break}o[r]=[]}}}if(s>0&&l.length>0){o[o.length-1].push("...")}if(o.length>0){d=this._createText(i,{text:o[o.length-1].join(" "),width:e,dots:true});if(d){o[s-1]=[u.textContent]}}return o};x.prototype._createDescription=function(){var t,e=this._iWidth-m.Title.OFFSET,i=this.$();if(this._displayDescription()&&i[0]){t=this._createElement("text");t.setAttribute("class","sapSuiteUiCommonsNetworkNodeDescription");i[0].appendChild(t);this._aDescriptionLines=this._createLineText(this.getDescription(),e,t,this.getDescriptionLineSize())}};x.prototype._createMultilineTitle=function(){var t=function(){if(this._isBox()){if(this._displayImage()){return this._iWidth-this._getImageSize().width-m.Title.ICON_X_OFFSET*2}if(this.getIcon()){return this._iWidth-m.Title.ICON_SIZE-m.Title.ICON_X_OFFSET*2}return this._iWidth-m.Title.OFFSET*2}return this._iWidth}.bind(this);var e,i=t(),s=this.$();if(this.getTitleLineSize()!==1&&s[0]&&i>0){e=this._createElement("text");e.setAttribute("class","sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle");s[0].appendChild(e);this._aTitleLines=this._createLineText(this.getTitle(),i,e,this.getTitleLineSize())}};x.prototype.getFocusDomRef=function(){return this.getDomRef("wrapper")};x.prototype._renderMultilineText=function(t){var e="",s=this._isBox()&&t.useCustomstyle;if(!t.lines){return""}for(var o=0;o<t.lines.length;o++){e+=this._renderText({attributes:{style:s?this._getStatusStyle({fill:i.ColorType.Content}):"",class:t.class+(s?" sapSuiteUiCommonsNetworkStatusText ":""),x:t.x,y:t.y+o*t.lineSize},close:false});e+=t.lines[o].join(" ");e+="</text>"}return e};x.prototype._renderDescription=function(t){t.class=" sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle";return this._renderMultilineText({lines:this._aDescriptionLines,maxLineSize:this.getDescriptionLineSize(),lineSize:m.Description.LINESIZE,class:" sapSuiteUiCommonsNetworkNodeDescription ",x:t.x,y:t.y})};x.prototype._sanitizeTitleLines=function(t){for(var e=0;e<t.length;e++){t[e]=[a(t[e])]}return t};x.prototype._renderMultilineTitle=function(t){var e=this._sanitizeTitleLines(this._aTitleLines);return this._renderMultilineText({useCustomStyle:true,lines:e,maxLineSize:this.getTitleLineSize(),lineSize:m.Title.LINESIZE,class:" sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle",x:t.x,y:t.y,trim:this._aTitleLines.length>this.getTitleLineSize()&&this.getTitleLineSize()!==0})};x.prototype._processHideShowParents=function(t,e,i){var s=this._oGroup&&this._oGroup.getCollapsed();var o=function(t){if(t._bIsHidden){return}var i=false,s;if(t.getKey()!==e){if(t.aChildren.length>0){s=t.aChildren[0]._bIsHidden;t.aChildren.forEach(function(t){if(s!==t._bIsHidden){i=true}});t._oExpandState=i?S.PARTIAL:s?S.COLLAPSED:S.EXPANDED;if(t._oExpandState===S.COLLAPSED){t.$().addClass("sapSuiteUiCommonsNetworkNodeCollapsed")}else{t.$().removeClass("sapSuiteUiCommonsNetworkNodeCollapsed")}if(t._oExpandState===S.PARTIAL){t.$().addClass("sapSuiteUiCommonsNetworkNodePartialCollapsed")}else{t.$().removeClass("sapSuiteUiCommonsNetworkNodePartialCollapsed")}}}};o(this);this.aParents.forEach(function(t){if(!i[t.getKey()]){o(t)}});if(s){if(this._oGroup._bNeedParentProcessing){this._oGroup.aNodes.forEach(function(t){t.aParents.forEach(function(t){if(!i[t.getKey()]){o(t)}})});this._oGroup._bNeedParentProcessing=false}}};x.prototype._getAllChildren=function(t,e,i){var s=function(t){if(!i[t]){i[t]=this;return true}return false}.bind(this);if(e===this.getKey()){return}if(this._bIsHidden===t){return}if(!s(this.getKey())){return}if(this._oGroup&&this._oGroup.getCollapsed()){this._oGroup.aNodes.forEach(function(s){s._getAllChildren(t,e,i)})}if(this._oExpandState!==S.COLLAPSED){this.aChildren.forEach(function(s){s._getAllChildren(t,e,i)})}};x.prototype._hideShow=function(t){var e=t?"hide":"show",i;this._bIsHidden=t;this.aLines.forEach(function(e){e._hideShow(t)});this.aParentLines.forEach(function(e){e._hideShow(t)});if(this._oGroup&&!this._oGroup._bIsSwimLane){if(this._oGroup.getCollapsed()){this._oGroup._hideShow(t)}else{i=this._oGroup._hasVisibleNodes();if(i&&!t||!i&&t){this._oGroup._hideShow(t)}}}if(this._isInCollapsedGroup()&&this._isHtml()){return}if(this.$()){this.$()[e]()}};x.prototype._setActionButtonFocus=function(e,i){this.$().removeClass(this.FOCUS_CLASS);this.$().find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS);var s=i?"addClass":"removeClass";t(e)[s](this.FOCUS_CLASS)};x.prototype._getActionButtonTitle=function(e){if(this.getParent().getRenderType()==="Html"){var i=t(e).attr("title");return N.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+(i?" "+i:"")}else{var s=t(e).find("title")[0];return N.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+(s?" "+s.textContent:"")}};x.prototype._getAccessibilityLabel=function(){var t=N.getText("NETWORK_GRAPH_NODE")+" "+this.getTitle();if(this._isBox()){this.getVisibleAttributes().forEach(function(e){t+=" "+e.getLabel()+" "+e.getValue()})}if(this.getStatus()&&this.getStatus()!=""){t+=" "+N.getText("PF_ARIA_STATUS")+" "+this.getStatus()}if(this.getSelected()){t+=" "+N.getText("NETWORK_GRAPH_SELECTED_NODE")}return t};x.prototype._setStatusColors=function(e){var s=function(s,n){if(n&&s){var a=this._getColor(i.ColorType[e+"Content"],n),h=o?"color":"fill";t(s).css(h,a||r)}}.bind(this);var o=this.getParent()&&this.getParent()._isUseNodeHtml();if(this._hasCustomStatus()){var r=this._getColor(i.ColorType[e+"Content"]),n=this._getColor(i.ColorType[e+"Background"]),a=this._getColor(i.ColorType[e+"Border"]);var h=e==="Selected"||e==="Hover";if(!o){var l=this.$("innerBox"),p=d?this.$("statusCircle"):this.$("innerStatusBox"),d=this._isCircle();p.css(d?"stroke":"fill",h?"none":n);l.css("fill",h?n:"");l.css("stroke",a);this.$().find(".sapSuiteUiCommonsNetworkStatusText").css("fill",r);this.$("focusCircle").css("stroke",this._getColor(i.ColorType[e+"Focus"]))}else{var u=this.$("wrapper"),c=this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeTitleText");u.css("border-color",a);this.$("focus").css("border-color",this._getColor(i.ColorType[e+"Focus"]));if(this._isBox()){this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeText").css("color",r);this.$("header").css("background-color",h&&!n?"":n);c.css("color",h?r:this._getColor(i.ColorType.HeaderContent));u.css("background-color",h&&n?n:"")}else{this.$("status").css("border-color",n);u.css("background-color",h&&n?n:"");this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeCircleIcon").css("color",r)}}}this.getAttributes().forEach(function(t){if(t&&t.getVisible()){var e=t.getLabelStatus(),i=t.getValueStatus();if(e){s(t.$("icon"),e);s(t.$("label"),e)}if(i){s(t.$("value"),i)}}})};x.prototype._setNodeOpacity=function(e){if(this._isCircle()){this.$("wrapper").css("opacity",e?.3:"");this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeTitleText").css("opacity",e?.3:"");if(e){this.$("wrapperwithbuttons").append(t("<div></div>",{class:"sapSuiteUiCommonsNetworkGraphDivInnerCloned sapSuiteUiCommonsNetworkGraphDivInner"}))}else{this.$("wrapperwithbuttons").find(".sapSuiteUiCommonsNetworkGraphDivInnerCloned").detach()}return}this.$().css("opacity",e?.3:"")};x.prototype._getContentRect=function(){var t=this._getCirclePosition(),e=this._isCircle();var i=e?t.x:this.getX(),s=e?t.y:this.getY(),o=e?this._iCircleSize:this._iHeight,r=e?this._iCircleSize:this._iWidth;return{p1:{x:i,y:s},p2:{x:i+r,y:s+o}}};x.prototype._setFocus=function(t){i.prototype._setFocus.apply(this,arguments);var e=t?"Selected":"";this.$("focus").css("border-color",this._getColor(i.ColorType[e+"Focus"]))};x.prototype.getHeaderCheckbox=function(){return this._getHeaderCheckbox()};x.prototype.computeTextDimensions=function(e){var i=this.getDomRef(),s,o,r;if(i){s=this._createElement("text",e.attributes);i.appendChild(s);try{o=this._createLineText(e.text,e.width,s,e.maxLines);r=s.getBBox().height}catch(t){}t(s).detach();return{text:o,lineHeight:r}}};x.prototype.renderText=function(t){var e=16;var i="",s=t.lines;if(!s){if(t.text){s=[t.text.split(" ")]}else{return""}}for(var o=0;o<s.length;o++){i+=this._renderText({attributes:Object.assign({x:t.x+this.getX(),y:this.getY()+t.y+o*(t.lineSize||e)},t.attributes),close:false});i+=s[o].join(" ");i+="</text>"}return i};x.prototype.renderIcon=function(t){t.attributes=t.attributes||{};Object.assign(t.attributes,{"font-family":"SAP-icons"});t.attributes.x=this.getX()+(t.x||0);t.attributes.y=this.getY()+(t.y||0);return this._renderIcon({attributes:t.attributes,icon:t.icon})};x.prototype.renderHtmlIcon=function(t,e){if(e&&e.renderManager){this._renderHtmlIcon(t,"sapSuiteUiCommonsNetworkGraphDivNodeIcon",null,null,null,e.renderManager)}else{return this._renderHtmlIcon(t,"sapSuiteUiCommonsNetworkGraphDivNodeIcon")}};x.prototype.renderHtmlActionButtons=function(t){t=t||{};var e=this._getElementId(t.idSufix)+"-rightdivbuttons",i=this._getElementId(t.idSufix)+"-leftdivbuttons",s=t.renderManager;s.openStart("div").attr("id",i).class("sapSuiteUiCommonsNetworkGraphDivActionButtons").class("sapSuiteUiCommonsNetworkGraphDivActionButtonsLeft").openEnd().close("div");s.openStart("div").attr("id",e).class("sapSuiteUiCommonsNetworkGraphDivActionButtons").class("sapSuiteUiCommonsNetworkGraphDivActionButtonsRight").openEnd().close("div")};x.prototype.renderHtmlInfoIcon=function(t,e){return this._renderHtmlInfoIcon(t,e)};x.prototype.renderContent=function(t){return this._isHtml()?this._renderHtmlContent(t):this._renderSvgContent(t)};x.prototype.renderItemContent=function(t){if(this._isHtml()){return this._isBox()?this._renderHtmlBoxContent(t):this._renderHtmlCircleContent(t)}return this._isBox()?this._renderBoxContent(t):this._renderCircleContent(t)};x.prototype.calculateSizes=function(){this._setupMaxWidth();this._createMultilineTitle();this._createDescription();this._resetDimensions();this._applyMaxWidth()};x.prototype.renderElement=function(t,e,i){return this._renderControl(t,e,i)};x.prototype.renderStatusIcon=function(t){return this._renderInfoIcon(this.getX()+t.x,this.getY()+t.y,t.size,t.iconSize)};x.prototype.setSize=function(t){if(t){if(t.width){this._iWidth=t.width}if(t.height){this._iHeight=t.height}if(t.titleHeight){this._iTitleHeight=t.titleHeight}}};x.prototype.hasVisibleActionButtons=function(){return this.$("actionButtons").hasClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS)||this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons").hasClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS)};x.prototype.getEnabledActionButtons=function(){return this.$().find(".sapSuiteUiCommonsNetworkNodeActionButton, .sapSuiteUiCommonsNetworkGraphDivActionButton:not(.sapSuiteUiCommonsNetworkGraphDivActionButtonDisabled)").parent().toArray()};x.prototype.showActionButtons=function(e){if(!this.getParent()){return}var i,s,o=this,r=0,n=0,a=this.getParent()._bIsRtl,h,l,p,d,c,g,_;if(this._isHtml()){this._showDivActionButtons(e);return}var f=function(){var t=this.getParent()._bIsRtl?-m.ActionButtons.RADIUS-m.ActionButtons.MARGIN:m.ActionButtons.RADIUS+m.ActionButtons.MARGIN,e=m.ActionButtons.RADIUS,s=[[t,e]];for(var o=1;o<i;o++){s.push([t,e+m.ActionButtons.RADIUS*2*o+m.ActionButtons.OFFSET*o])}return s}.bind(this);var S=function(){var t=this.getActionButtons().length;if(this.getShowExpandButton()){t++}if(this.getShowDetailButton()){t++}if(this.getShowActionLinksButton()){t++}return t}.bind(this);var y=function(e){var i=13,s=2,o=e.position&&e.position===u.Left,l=o&&!a||!o&&a;e.x=e.x+(l?d:p);var c={cx:e.x,cy:e.y,id:e.id+"-circle",class:"sapSuiteUiCommonsNetworkNodeActionButton",r:m.ActionButtons.RADIUS},g={class:"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkNodeActionIcon "+(e.class?e.class:""),x:e.x,y:e.y},_,f,C,S,y,T;if(!e.enable){c.class="sapSuiteUiCommonsNetworkNodeActionButtonDisabledBackground";h.appendChild(this._createElement("circle",c));c.class="sapSuiteUiCommonsNetworkNodeActionButtonDisabled";g.class+=" sapSuiteUiCommonsNetworkNodeActionButtonDisabled"}y=this._createElement("g",{id:e.id});_=this._createElement("circle",{id:e.id+"-circle",cx:e.x,cy:e.y,r:m.ActionButtons.RADIUS-s,class:"sapSuiteUiCommonsNetworkActionButtonFocusCircle"});C=this._createElement("circle",c);S=this._createIcon(g,e.icon,i);if(e.title){f=this._createElement("title");f.textContent=e.title;C.appendChild(f)}y.appendChild(C);y.appendChild(S);y.appendChild(_);h.appendChild(y);T=t(C);if(e.enable){T.on("click",function(){this._setActionButtonFocus(y,true);this._setFocus(false);if(this.getParent()){this.getParent().setFocus({item:this,button:y})}}.bind(this));t(C).on("click",e.click)}o?n++:r++;return{icon:S,wrapper:C}}.bind(this);i=S();s=f();if(i===0){return}if(e&&!this._bActionButtonsRendered){c=this.getY();if(this._isCircle()){p=this.getX()+(this._iWidth/2+this._iCircleSize/2);d=this.getX()+(this._iWidth/2-this._iCircleSize/2)}else{p=this.getX()+this._iWidth;d=this.getX()}var h=this.$("actionButtons")[0];if(!h){h=this._createElement("g",{class:"sapSuiteUiCommonsNetworkNodeActionButtonWrapper",id:this._getDomId("actionButtons")})}else{t(h).children().remove()}if(this.getParent()._isUseNodeHtml()){this.getParent().$("actiionbuttons")[0].appendChild(h)}else{this.$()[0].appendChild(h)}if(this.getShowExpandButton()){l=y({x:s[r][0],y:c+s[r][1],icon:this._getExpandIcon(true),class:"sapSuiteUiCommonsNetworkNodeActionCollapseIcon",enable:this._hasVisibleChildren(),title:N.getText("NETWORK_GRAPH_EXPAND_COLLAPSE"),id:this._getDomId("actionCollapse"),click:this._expandClick.bind(this)});this._expandIcon=l.icon}if(this.getShowDetailButton()){g=y({x:s[r][0],y:c+s[r][1],icon:"sap-icon://menu",enable:this._hasDetailData()||this.getTitle(),id:this._getDomId("actionDetail"),title:N.getText("NETWORK_GRAPH_NODE_DETAILS"),click:function(){this._detailClick(g.wrapper)}.bind(this)})}if(this.getShowActionLinksButton()){_=y({x:s[r][0],y:c+s[r][1],icon:"sap-icon://chain-link",enable:this._hasActionLinks(),title:N.getText("NETWORK_GRAPH_NODE_LINKS"),id:this._getDomId("actionLinks"),click:function(){this._linksClick(_.wrapper)}.bind(this)})}for(var T=0;r+n<C*2&&T<this.getActionButtons().length;T++){(function(t){var e=t.getPosition(),i=e===u.Right?r:n;if(i>=C){e=e===u.Left?u.Right:u.Left;i=e===u.Right?r:n}var o=y({x:s[i][0],y:c+s[i][1],icon:t.getIcon(),title:t.getTitle(),id:t.getId(),click:function(e){t.firePress({buttonElement:o.wrapper})},enable:t.getEnabled(),position:e})})(this.getActionButtons()[T])}this._bActionButtonsRendered=true}else if(this._expandIcon){this._expandIcon.textContent=o._getExpandIcon();this.$().find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS)}var I=e?"addClass":"removeClass";this.$("actionButtons")[I](this.VISIBLE_ACTIONS_BUTTONS_CLASS)};x.prototype.getChildNodes=function(){this._checkForProcessData();return this.aChildren};x.prototype.getChildLines=function(){this._checkForProcessData();return this.aLines};x.prototype.getParentNodes=function(){this._checkForProcessData();return this.aParents};x.prototype.getParentLines=function(){this._checkForProcessData();return this.aParentLines};x.prototype.isHidden=function(){return this._bIsHidden};x.prototype.setHidden=function(t){var e=this;var i=function(i){i.forEach(function(i){var s=i.getFromNode()===e?i.getToNode():i.getFromNode();i.setHidden(t||s.isHidden())})};i(this.getChildLines());i(this.getParentLines());this.$()[t?"hide":"show"]();this._bIsHidden=t;if(this._oGroup){this._oGroup.setHidden(!this._oGroup._hasVisibleNodes())}};x.prototype.getCenterPosition=function(){var t,e;if(this._isBox()){return{x:this.getX()+this._iWidth/2,y:this.getY()+this._iHeight/2}}t=this._getCirclePosition();e=this._getCircleSize()/2;return{x:t.x+e,y:t.y+e}};x.prototype.setHeaderCheckBoxState=function(t){this._setHeaderCheckBoxState(t);return this};x.prototype.setX=function(t){this.setProperty("x",t,true);return this};x.prototype.setY=function(t){this.setProperty("y",t,true);return this};x.prototype.setSelected=function(t){var e=this.getParent(),i=t?"addClass":"removeClass",s=this.getKey();this.setProperty("selected",t,true);if(e){this._setStatusColors(t?"Selected":"");this.$()[i](this.SELECT_CLASS);if(t){e._mSelectedNodes[s]=this}else{delete e._mSelectedNodes[s]}}return this};x.prototype.setCollapsed=function(t){var e={},i,s,o=t?"addClass":"removeClass",r=this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons, .sapSuiteUiCommonsNetworkNodeActionButtonWrapper").find(".sapSuiteUiCommonsNetworkNodeActionCollapseIcon");this.setProperty("collapsed",t,true);this._oExpandState=t?S.COLLAPSED:S.EXPANDED;this.aChildren.forEach(function(i){i._getAllChildren(t,this.getKey(),e)},this);i=Object.keys(e);i.forEach(function(i){e[i]._hideShow(t,this.getKey())},this);i.forEach(function(i){e[i]._processHideShowParents(t,this.getKey(),e)},this);this.aLines.forEach(function(e){e._hideShow(t)});if(r[0]){r[0].textContent=this._getExpandIcon()}this.$().removeClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");this.$()[o]("sapSuiteUiCommonsNetworkNodeCollapsed");s=this.getParent();if(s){s._setupKeyboardNavigation();if(t&&!(s.getFocus()&&s.getFocus().item===this)){s.setFocus({item:this})}}return this};x.prototype.setGroup=function(t){this.setProperty("group",t,true);this._invalidateParent();return this};x.prototype.setShape=function(t){this.setProperty("shape",t,true);this._invalidateParent();return this};x.prototype.setWidth=function(t){this.setProperty("width",t,true);if(this.getParent()&&this.getParent()._bPreventInvalidation){this._iWidth=t}else{this._iWidth=0}this._invalidateParent();return this};x.prototype.setHeight=function(t){this.setProperty("height",t,true);if(this.getParent()&&this.getParent()._bPreventInvalidation){this._iHeight=t}else{this._iHeight=0}this._invalidateParent();return this};x.prototype.setMaxWidth=function(t){this.setProperty("maxWidth",t,true);this._invalidateParent();return this};x.prototype.setTitleLineSize=function(t){this.setProperty("titleLineSize",t,true);this._invalidateParent();return this};x.prototype.addAttribute=function(){i.prototype.addAttribute.apply(this,arguments);this._invalidateParent();return this};x.prototype.insertAttribute=function(){i.prototype.insertAttribute.apply(this,arguments);this._invalidateParent();return this};x.prototype.removeAllAttributes=function(){i.prototype.removeAllAttributes.apply(this,arguments);this._invalidateParent();return this};x.prototype.removeAttribute=function(){i.prototype.removeAttribute.apply(this,arguments);this._invalidateParent();return this};x.prototype.addAttribute=function(){i.prototype.addAttribute.apply(this,arguments);this._invalidateParent();return this};x.prototype.insertAttribute=function(){i.prototype.insertAttribute.apply(this,arguments);this._invalidateParent();return this};x.prototype.removeAllAttributes=function(){i.prototype.removeAllAttributes.apply(this,arguments);this._invalidateParent()};x.prototype.removeAttribute=function(){i.prototype.removeAttribute.apply(this,arguments);this._invalidateParent()};x.prototype.getHeaderCheckBoxState=function(){if(this.getProperty("headerCheckBoxState")===c.Hidden){return c.Hidden}return this.getHeaderCheckbox().getSelected()?c.Checked:c.Unchecked};x.prototype._hasAdditionalContent=function(){return this._displayAttributes()||this._displayDescription()||this.getContent()};x.hasNativeLineClamp=typeof document.documentElement.style.webkitLineClamp!="undefined"&&r.browser.chrome;x.prototype._invalidateParent=function(){var t=this.getParent();if(t){t.invalidate()}};x.prototype._isIgnored=function(){var t=this.getParent(),e=t&&t._isSwimLane(),i=this._isInCollapsedGroup();if(e&&this._isHtml()){i=false}return i||this._isInIgnoredGroup()||!this._useInLayout()};x.prototype._getImageSize=function(){var t=function(t,e){return{width:t?parseInt(t,10):0,height:e?parseInt(e,10):0}};var e=this._isBox()?"Box":"Circle",i=this.getImage();if(!this._displayImage(i)){return t()}return t(i.getWidth()?i.getWidth():m.Image[e],i.getHeight()?i.getHeight():m.Image[e])};x.prototype._displayImage=function(t){t=t||this.getImage();return t&&t.getSrc()};x.prototype._isHtml=function(){return this.getParent()&&this.getParent()._isUseNodeHtml()};x.prototype._isInCollapsedGroup=function(){return this._oGroup&&this._oGroup._isCollapsed()};x.prototype._isInIgnoredGroup=function(){return this._oGroup&&this._oGroup._isIgnored()};x.prototype._displayAttributes=function(){return this.getVisibleAttributes().length!==0&&this._isBox()};x.prototype._displayDescription=function(){return this.getDescriptionLineSize()!==-1&&this.getDescription()};x.prototype._hasTitle=function(){return this.getTitle()||this.getIcon()};x.prototype._isBox=function(){return this.getShape()===d.Box&&this.getParent()._isLayered()};x.prototype._isCircle=function(){return this.getShape()===d.Circle};x.prototype._isCustom=function(){return this.getShape()===d.Custom};x.prototype._hasChildren=function(){return this.aChildren.length>0};x.prototype._showHeaderCheckBox=function(){return this.getHeaderCheckBoxState()!==c.Hidden&&this._isBox()};x.prototype._hasVisibleChildren=function(){return this.aChildren.some(function(t){return!(t._oGroup&&!t._oGroup.getVisible())&&t.getVisible()})};x.prototype._hasDetailData=function(){return this.getDescription()||this.getAttributes().length>0};x.prototype._hasActionLinks=function(){return this.getActionLinks().some(function(t){return t.getVisible()})};x.prototype._useAutomaticSize=function(){return!this.getWidth()&&this.getMaxWidth()>0};x.prototype._getShapeSize=function(t){if(this._isCircle()){return this._getCircleSize()}var e=this._isCustom()?this.getCoreNodeSize():0;return e||(t?this._iWidth:this._iHeight)};x.prototype._getCircleSize=function(){return this._isBox()?undefined:this._iCircleSize};x.prototype._hasMultiLineTitle=function(){return this._aTitleLines&&this._aTitleLines.length>1};x.prototype._getCirclePosition=function(){return this._isBox()?undefined:{x:this.getX()+(this._iWidth-this._getCircleSize())/2,y:this.getY()}};x.prototype._isOnScreen=function(t,e,s,o){var r=this.getX(),n=this.getY();return i._isRectOnScreen(r,r+this._iWidth,n,n+this._iHeight,t,e,s,o)};x.prototype.getFocusDomRef=function(){return this.getDomRef("wrapper")};x.prototype.setVisible=function(t){this.setProperty("visible",t);var e=this.getParent();if(e&&e._bIsLayedOut){this.getParentNodes().forEach(function(t){t._bActionButtonsRendered=false})}return this};x.prototype.setStatusIcon=function(t){var e=this.$("statusicon")[0],i=o.getIconInfo(t),s=i&&i.content;this.$("statusiconwrapper")[t?"addClass":"removeClass"]("sapSuiteUiCommonsNetworkNodeInfoWrapperCustomIcon");e&&(e.textContent=s);this.setProperty("statusIcon",t,true);return this};return x});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/NodeImage",["sap/ui/core/Element"],function(e){"use strict";var a=e.extend("sap.suite.ui.commons.networkgraph.NodeImage",{metadata:{library:"sap.suite.ui.commons",properties:{src:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},width:{type:"int",group:"Appearance",defaultValue:null},height:{type:"int",group:"Appearance",defaultValue:null}}}});return a});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/NodeRenderer",["sap/ui/core/Renderer"],function(){"use strict";return{apiVersion:2,render:function(e,r){var n=r._render({renderManager:e});if(n){e.unsafeHtml(n)}}}},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/Status",["sap/ui/core/Element","sap/ui/core/theming/Parameters","sap/m/library"],function(e,r,a){"use strict";var l=a.ValueCSSColor;var t=e.extend("sap.suite.ui.commons.networkgraph.Status",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Appearance",defaultValue:null},title:{type:"string",group:"Appearance",defaultValue:null},borderColor:{type:"string",group:"Appearance",defaultValue:null},backgroundColor:{type:"string",group:"Appearance",defaultValue:null},contentColor:{type:"string",group:"Appearance",defaultValue:null},headerContentColor:{type:"string",group:"Appearance",defaultValue:null},hoverBackgroundColor:{type:"string",group:"Appearance",defaultValue:null},hoverBorderColor:{type:"string",group:"Appearance",defaultValue:null},hoverContentColor:{type:"string",group:"Appearance",defaultValue:null},selectedBackgroundColor:{type:"string",group:"Appearance",defaultValue:null},selectedBorderColor:{type:"string",group:"Appearance",defaultValue:null},selectedContentColor:{type:"string",group:"Appearance",defaultValue:null},legendColor:{type:"string",group:"Appearance",defaultValue:null},useFocusColorAsContentColor:{type:"boolean",group:"Appearance",defaultValue:false},borderWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:null},borderStyle:{type:"string",group:"Appearance",defaultValue:null}}}});t.prototype._getLegendColor=function(){var e=this.getLegendColor()||this.getBackgroundColor();if(e){var a=r.get(e);if(!a&&l.isValid(e)){a=e}return a}return null};return t});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/SvgBase",["sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/Device","sap/base/security/encodeXML"],function(t,e,o,r,n){"use strict";var i=t.networkgraph.ElementStatus;var s="http://www.w3.org/2000/svg";var a=e.extend("sap.suite.ui.commons.networkgraph.SvgBase",{renderer:{}});a.prototype.HIGHLIGHT_CLASS="sapSuiteUiCommonsNetworkElementHighlight";a.prototype.SELECT_CLASS="sapSuiteUiCommonsNetworkElementSelected";a.prototype.VISIBLE_ACTIONS_BUTTONS_CLASS="sapSuiteUiCommonsNetworkNodeActionButtonsVisible";a.prototype.FOCUS_CLASS="sapSuiteUiCommonsNetworkElementFocus";a.prototype.LINEBUTTONSID="divlinebuttons";a.prototype._createElement=function(t,e){var o=document.createElementNS(s,t);return this._setAttributes(o,e)};a.prototype._setAttributes=function(t,e){e=e||{};Object.keys(e).forEach(function(o){t.setAttribute(o,e[o])});return t};a.prototype._getStatusClass=function(t){var e=t||this.getStatus();switch(e){case i.Warning:return" sapSuiteUiCommonsNetworkElementWarning ";case i.Error:return" sapSuiteUiCommonsNetworkElementError ";case i.Success:return" sapSuiteUiCommonsNetworkElementSuccess ";case i.Information:return" sapSuiteUiCommonsNetworkElementInformation ";default:return""}};a.prototype._getAccessibilityLabel=function(){throw new Error("To be implemented by an extending class.")};a.prototype._renderRoundRect=function(t){return this._renderControl("path",{d:this._renderRoundRectPath(t),style:t.style,class:t.class,id:t.id})};a.prototype._renderRoundRectPath=function(t){t.topRight=t.topRight||0;t.topLeft=t.topLeft||0;t.bottomRight=t.bottomRight||0;t.bottomLeft=t.bottomLeft||0;var e=t.x+t.width,o=t.y+t.height,r="",n=function(t,e,o){r+=" A"+t+","+t+" 0 0,1 "+e+","+o},i=function(t,e){r+=" L"+t+","+e};r="M"+(t.x+t.topLeft)+","+t.y;i(e-t.topRight,t.y);if(t.topRight){n(t.topRight,e,t.y+t.topRight)}i(e,o-t.bottomRight);if(t.bottomRight){n(t.bottomRight,e-t.bottomRight,o)}i(t.x+t.bottomLeft,o);if(t.bottomLeft){n(t.bottomLeft,t.x,o-t.bottomLeft)}i(t.x,t.y+t.topLeft);if(t.topLeft){n(t.topLeft,t.x+t.topLeft,t.y)}return r};a.prototype._appendTextAnchor=function(t){var e=sap.ui.getCore().getConfiguration().getRTL();if(e&&this._isMSBrowser()){t["text-anchor"]="end"}};a.prototype._renderText=function(t){var e;if(t.height&&this._isMSBrowser()){t.attributes.dy=t.height/2}this._appendTextAnchor(t.attributes);e=this._renderControl("text",t.attributes,false);e+=t.text?n(t.text):"";if(t.close!==false){e+="</text>"}return e};a.prototype._renderSpanText=function(t,e,o){var r;if(o&&this._isMSBrowser()){t.dy=o/2}r=this._renderControl("text",t,false);r+=this._renderControl("tspan",{},false);r+=n(e);r+="</tspan></text>";return r};a.prototype._cannotAppendInnerHtml=function(){return this._isMSBrowser()||r.browser.safari};a.prototype._isMSBrowser=function(){return r.browser.edge||r.browser.msie};a.prototype._renderIcon=function(t){var e=o.getIconInfo(t.icon);if(e){return this._renderText({attributes:t.attributes,text:e.content,height:t.height})}return""};a.prototype._renderControl=function(t,e,o){var r="<"+t+" ";e=e||{};Object.keys(e).forEach(function(t){if(typeof e[t]!=="undefined"){r+=t;r+="=";r+='"'+e[t]+'"'}});r+=">";o=o!==false;if(o){r+="</"+t+">"}return r};a.prototype._createText=function(t,e){var o=t.firstChild,r=e.text.length,n=e.dots!==false,i=e.text,s=true,a=false,f=parseInt(t.getAttribute("maxwidth"),10)||e.width,c=parseFloat(t.getAttribute("x")),p=e.suffix?e.suffix:"",u=e.centerWidth?e.centerWidth:f,l="..."+p,h,d;e.trim=e.trim!==false;o.textContent=e.text+p;if(e.trim&&f>0){d=t.getBBox().width;if(d>f){a=true;while(true){r/=2;h=i.length+(s?-1:1)*Math.ceil(r);i=e.text.substring(0,h);o.textContent=i+(n?l:"");d=t.getBBox().width;s=d>f;if(r<.5&&!s){if(d>f){i=e.text.substring(0,i.length-Math.ceil(r*2));o.textContent=i+ +(n?l:"")}break}}}}if(e.hCenter&&!a){t.setAttribute("text-anchor","middle");t.setAttribute("x",c+u/2)}return a};a.prototype._createIcon=function(t,e,r){var n=o.getIconInfo(e),i;if(n){if(r&&this._isMSBrowser()){t.dy=r/2}i=this._createElement("text",t);i.textContent=n.content;return i}return null};a.prototype._getDomId=function(t){var e=this.getId();if(t){e+="-"+t}return e};a.prototype._convertToSvg=function(t){var e;var o=function(t){var e={},o;if(t.attributes){for(var r=0;r<t.attributes.length;r++){o=t.attributes[r];e[o.name]=o.value}}return e};var r=function(t,e){var n,i,s="";if(t.childNodes.length===1&&!t.childNodes[0].localName){e.textContent=t.childNodes[0].textContent;return}for(var a=0;a<t.childNodes.length;a++){n=t.childNodes[a];s=n.localName;if(s==="clippath"){s="clipPath"}i=this._createElement(s,o(n));e.appendChild(i);if(n.childNodes){r(n,i)}}}.bind(this);e=this._createElement(t[0].localName,o(t[0]));r(t[0],e);return e};a.prototype._convertToStyle=function(t,e,o){var r="";if(t){Object.keys(t).forEach(function(e){var o=t[e];if(typeof o!=="undefined"&&o!==""){r+=e;r+=":";r+=t[e]+";"}});r=r+(e||"");if(!o&&r){r='style="'+r+'"'}}return r};a.prototype._renderHtmlElement=function(t,e,o,r){if(!r){var n="";n+="<"+t+" ";n+=this._convertToStyle(e);if(o){Object.keys(o).forEach(function(t){var e=o[t];if(typeof e!=="undefined"&&e!==""){n+=t;n+="=";n+='"'+e+'"'}})}n+=">";return n}else{r=t==="img"?r.voidStart("img"):r.openStart(t);var i=this._convertToStyle(e,undefined,true);this.applyStyles(r,this.getStyleObject(i));if(o){Object.keys(o).forEach(function(t){var e=o[t];if(typeof e!=="undefined"&&e!==""){if(t==="class"){e.split(" ").forEach(function(t){if(t){r.class(t)}})}else if(t==="style"){this.applyStyles(r,this.getStyleObject(e))}else{r.attr(t,e)}}}.bind(this))}r=t==="img"?r.voidEnd():r.openEnd()}};a.prototype._renderHtmlIcon=function(t,e,r,i,s,a){var f=o.getIconInfo(t),c="",p="";if(!a){r=r?'id="'+this.getId()+"-"+r+'"':"";e=e||"";if(f){if(f.fontFamily){p='style="font-family:'+n(f.fontFamily)+'"'}c=s?' aria-label="'+n(s)+'" ':"";s=s?' title="'+n(s)+'" ':"";return"<div "+r+s+c+" "+(i||"")+'class="sapSuiteUiCommonsNetworkGraphIcon '+e+'"><span '+p+">"+n(f.content)+"</span></div>"}return""}else{if(f){a.openStart("div");if(r){a.attr("id",this.getId()+"-"+r)}if(s){a.attr("title",s)}if(s){a.attr("aria-label",s)}a.class("sapSuiteUiCommonsNetworkGraphIcon");if(e){e.split(" ").forEach(function(t){if(t){a.class(t)}})}a.openEnd();a.openStart("span");if(f.fontFamily){a.style("font-family",n(f.fontFamily))}a.openEnd().text(f.content).close("span");a.close("div")}}};return a});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/Tooltip",["sap/ui/thirdparty/jquery","./SvgBase","./Line","./Node","./Group","sap/m/ResponsivePopover","sap/m/Popover","sap/m/List","sap/m/OverflowToolbar","sap/m/Button","sap/m/CustomListItem","sap/m/FlexBox","sap/m/HBox","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/Panel","sap/m/StandardListItem","sap/m/Text","sap/m/ToolbarSpacer","sap/ui/core/Icon","sap/m/FlexItemData","sap/ui/core/library","sap/m/library","sap/ui/Device"],function(t,e,o,i,n,s,p,r,a,l,d,h,u,c,_,m,f,T,g,w,C,v,y,P){"use strict";var S=y.PlacementType;var b=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var A=e.extend("sap.suite.ui.commons.networkgraph.Tooltip",{metadata:{library:"sap.suite.ui.commons",events:{afterOpen:{},afterClose:{}}}});A.prototype.init=function(){this._oPopover=null;this._oElement=null};A.prototype.create=function(e){var o;this._oPopover=new s(this.getId()+"-tooltip",{showHeader:false,placement:this.getParent()._bIsRtl?S.PreferredLeftOrFlip:S.PreferredRightOrFlip,afterOpen:function(){this.fireAfterOpen()}.bind(this),afterClose:function(){this.fireAfterClose()}.bind(this),beforeOpen:function(){this._fnCreate()}.bind(this),contentWidth:"350px"}).addStyleClass("sapSuiteUiCommonsNetworkTooltip");this._oSimpleTooltip=new p({contentMinWidth:"350px",showHeader:false});this.addDependent(this._oPopover);o=this._oPopover.getAggregation("_popup");if(o){o._afterAdjustPositionAndArrowHook=function(){var e=this.$("arrow"),o=this.$().position().top,i=e.position().top,n=15,s=t(window).height(),p=o+i-n;if(s>p+this.$().height()){e.css("top",n+"px");this.$().css("top",p+"px")}}}};A.prototype.instantClose=function(){var t=this._oPopover.getAggregation("_popup");if(t&&t.oPopup&&t.oPopup.close){t.oPopup.close(0)}if(this._oSimpleTooltip.oPopup&&this._oSimpleTooltip.oPopup.close){this._oSimpleTooltip.oPopup.close(0)}};A.prototype.close=function(){this._oPopover.close()};A.prototype.openDetail=function(t){var e=t.opener||this._getOpener(t.item,t.point);if(t.item instanceof i&&!t.item._hasDetailData()){this._oSimpleTooltip.removeAllContent();this._appendHeader(t.item.getTitle(),this._oSimpleTooltip);this._oSimpleTooltip.openBy(e);return}this._fnCreate=this._createDetail;this._oElement=t.item;this._oPopover.openBy(e)};A.prototype._createDetail=function(){var t=this._getTooltipCreateFunction(this._oElement);this._oPopover.removeAllContent();this._appendFooter();t(this._oElement)};A.prototype.openLink=function(t){this._oElement=t.item;this._fnCreate=this._createLink;this._oPopover.openBy(t.opener)};A.prototype._createLink=function(t){var e=new r,o=this._oElement;this._oPopover.removeAllContent();this._appendHeader(b.getText("NETWORK_GRAPH_TOOLTIP_EXTERNAL_LINKS"));o.getActionLinks().forEach(function(t){e.addItem(new d({content:[new u({renderType:"Bare",items:t.clone(null,null,{cloneChildren:true,cloneBindings:false}).addStyleClass("sapUiTinyMargin")})]}))});this._oPopover.addContent(e);this._appendFooter()};A.prototype._getOpener=function(t,e){if(t instanceof o&&e){if(this._oElement===t&&this._tooltipRect){var i=parseInt(this._tooltipRect.getAttribute("x"),10),n=parseInt(this._tooltipRect.getAttribute("y"),10),s=10;if(Math.abs(i-e.x)<s&&Math.abs(n-e.y)<s){return this._tooltipRect}}this._cleanUpLineTooltip();this._tooltipRect=this._createElement("rect",{x:e.x,y:e.y,width:P.browser.firefox?.01:0,height:P.browser.firefox?.01:0});this.getParent().$svg.append(this._tooltipRect);return this._tooltipRect}return t};A.prototype._getTooltipCreateFunction=function(t){if(t instanceof i){return this._createNodeTooltip.bind(this)}if(t instanceof o){return this._createLineTooltip.bind(this)}if(t instanceof n){return this._createGroupTooltip.bind(this)}return null};A.prototype._cleanUpLineTooltip=function(){if(this._tooltipRect){t(this._tooltipRect).remove()}};A.prototype._appendDescription=function(t,e){if(t.getDescription()){e=e||this._oPopover;e.addContent(new m({content:new T({textAlign:"Initial",text:t.getDescription()}).addStyleClass("sapSuiteUiCommonsNetworkTooltipDescription")}).addStyleClass("sapSuiteUiCommonsNetworkTooltipArea"))}};A.prototype._appendAttributes=function(t,e){var o=new r,i=e||this._oPopover;if(t.length>0){t.forEach(function(t){o.addItem(new d({content:[new u({items:[new T({layoutData:[new C({baseSize:"50%"})],text:t.getLabel()}),new T({layoutData:[new C({baseSize:"50%"})],text:t.getValue(),width:"100%",textAlign:v.TextAlign.End})]}).addStyleClass("sapSuiteUiCommonsNetworkTooltipLine")]}));i.addContent(o)})}};A.prototype._appendNodesList=function(t,e){var o=new r;t.aNodes.forEach(function(t){if(t.getTitle()){o.addItem(new f({title:t.getTitle(),icon:t.getIcon()}))}});e.addContent(o)};A.prototype._appendFooter=function(){var t=this;this.oCloseButton=new l({text:b.getText("NETWORK_GRAPH_CLOSE"),press:function(){t._oPopover.close()}});this._oPopover.setEndButton(this.oCloseButton);this._oPopover.setInitialFocus(this.oCloseButton)};A.prototype._appendHeader=function(t,e){e=e||this._oPopover;if(t){var o=new T({width:"100%",textAlign:v.TextAlign.Center,text:t});e.insertContent(new m({width:"100%",content:[o]}).addStyleClass("sapSuiteUiCommonsNetworkTooltipArea"),0);e.addAriaLabelledBy(o)}};A.prototype._createGroupTooltip=function(t){var e=function(){return t.getAttributes().length>0||t.getDescription()};var o,i;this._appendHeader(t.getTitle());if(e()){i=new _({text:b.getText("NETWORK_GRAPH_TOOLTIP_LIST_OF_NODES")});o=new _({text:b.getText("NETWORK_GRAPH_TOOLTIP_INFORMATION")});this._oPopover.addContent(new c({items:[o,i]}));this._oPopover.addStyleClass("sapSuiteUiCommonsNetworkGroupTooltipTabBar");this._appendDescription(t,o);this._appendAttributes(t.getAttributes(),o);this._appendNodesList(t,i)}else{this._appendNodesList(t,this._oPopover)}};A.prototype._createNodeTooltip=function(t){this._appendDescription(t);this._appendAttributes(t.getAttributes());this._appendHeader(t.getTitle())};A.prototype._createLineTooltip=function(t,e){var o=function(){var e=new T({width:"50%",text:t.getFromNode().getTitle()}).addStyleClass("sapSuiteUiCommonsNetworkGraphNoPointerEvents sapSuiteUiCommonsNetworkLineTooltipLabel"),o=new w({src:"sap-icon://arrow-right"}).addStyleClass("sapUiTinyMarginEnd sapSuiteUiCommonsNetworkGraphNoPointerEvents sapSuiteUiCommonsNetworkLineTooltipFromToIcon"),i=new w({src:"sap-icon://arrow-left"}).addStyleClass("sapUiTinyMarginBegin sapSuiteUiCommonsNetworkGraphNoPointerEvents sapSuiteUiCommonsNetworkLineTooltipFromToIcon"),n=new T({textAlign:v.TextAlign.End,width:"50%",text:t.getToNode().getTitle()}).addStyleClass("sapSuiteUiCommonsNetworkGraphNoPointerEvents sapSuiteUiCommonsNetworkLineTooltipLabel"),s=new h({renderType:"Bare",width:"100%",justifyContent:"Center",items:[e]}).addStyleClass("sapSuiteUiCommonsNetworkLineTooltipFromTo");t._isBothArrow()?s.addItem(i):o.addStyleClass("sapUiTinyMarginBegin");s.addItem(o);s.addItem(n);return s},i=function(){var e=t.getTitle();this._oPopover.addContent(o());if(e){this._appendHeader(e)}this._appendDescription(t);this._appendAttributes(t.getAttributes())}.bind(this);i(t)};return A});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/Utils",[],function(){"use strict";var n={};n.find=function(n,r,t){var e;if(typeof n.find==="function"){return n.find(r,t)}else{for(e=0;e<n.length;e++){if(r.call(t,n[e],e,n)){return n[e]}}return undefined}};n.trimText=function(n,r){if(n&&n.length>r){return n.substring(0,r)+" ... "}return n};return n},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/layout/D3ForceWrapper",[],function(){"use strict";var r;var n={};n._d3Path=sap.ui.require.toUrl("sap/ui/thirdparty")+"/d3.js";n.run=function(r,t){n.getD3().then(function(n){var e=r.graph;var i=n.layout.force().nodes(e.nodes).links(e.links).alpha(r.alpha).friction(r.friction).charge(r.charge).start();setTimeout(i.stop,r.maximumDuration);i.on("end",function(){t(e)})})};n.layout=function(r){return new Promise(function(t,e){n.run(r,t)})};n.getD3=function(){if(r){return Promise.resolve(r)}else{return new Promise(function(n){sap.ui.require(["sap/ui/thirdparty/d3"],function(t){r=t;n(t)})})}};return n},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/layout/ForceBasedLayout",["sap/suite/ui/commons/library","./LayoutAlgorithm","./Geometry","./D3ForceWrapper","./LayoutTask","sap/ui/performance/Measurement"],function(e,t,a,o,r,i){"use strict";var n=e.networkgraph.LayoutRenderType,u=12;var s=t.extend("sap.suite.ui.commons.networkgraph.layout.ForceBasedLayout",{metadata:{properties:{alpha:{type:"float",group:"Behavior",defaultValue:.3},charge:{type:"float",group:"Behavior",defaultValue:-30},friction:{type:"float",group:"Behavior",defaultValue:.9},maximumDuration:{type:"int",group:"Behavior",defaultValue:1e3}}}});s.prototype.getLayoutRenderType=function(){return n.Forces};s.prototype.isLayered=function(){return false};s.prototype.layout=function(){return new r(function(e,t,r){var n={nodes:[],links:[]},s=this.getParent();if(!s){t("The algorithm must be associated with a graph.");return}i.start("NetworkGraph - ForceBasedLayout","Layouting of a graph "+s.getId());s.getNodes().forEach(function(e,t){n.nodes.push({id:e.getKey()});e.iIndex=t});s.getNodes().forEach(function(e){e.aChildren.forEach(function(t){n.links.push({source:e.iIndex,target:t.iIndex,value:1})})});o.layout({graph:n,alpha:this.getAlpha(),friction:this.getFriction(),charge:this.getCharge(),maximumDuration:this.getMaximumDuration()}).then(function(t){if(r.isTerminated()){e();return}var o=t.graph||t;var i=a.getBoundingBox(o.nodes),n=i.p1.x*-u+100,p=i.p1.y*-u+100;o.nodes.forEach(function(e){var t=s.getNodeByKey(e.id);t.setX(e.x*u+n);t.setY(e.y*u+p)});this._normalizeLines();this._alignCoordinatesWithView();e()}.bind(this),t)}.bind(this))};return s});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/layout/ForceDirectedLayout",["sap/suite/ui/commons/library","./LayoutAlgorithm","./Geometry","./LayoutTask","sap/ui/performance/Measurement"],function(t,e,i,o,r){"use strict";var a=e.extend("sap.suite.ui.commons.networkgraph.layout.ForceDirectedLayout",{metadata:{properties:{optimalDistanceConstant:{type:"float",defaultValue:.2},maxIterations:{type:"int",defaultValue:200},maxTime:{type:"int",defaultValue:2e3},initialTemperature:{type:"float",defaultValue:200},coolDownStep:{type:"float",defaultValue:1},staticNodes:{type:"string[]",defaultValue:[]}}}});var n=t.networkgraph.LayoutRenderType,s=200,h=2.3999632297286535;a.prototype.getLayoutRenderType=function(){return n.Forces};a.prototype.isLayered=function(){return false};a.prototype.layout=function(){return new o(function(t,e,i){var o=this.getParent();if(!o){e("The algorithm must be associated with a graph.");return}this.oGraph=o;r.start("NetworkGraph - ForceDirectedLayout","Layouting of a graph "+o.getId());this._initPhyllotaxisPattern();this._runSimulation();this._normalizeLines();this._alignCoordinatesWithView();t()}.bind(this))};a.prototype._initPhyllotaxisPattern=function(){var t=s*Math.sqrt(this.oGraph.getNodes().length),e=0,o={center:{x:0,y:0},apex:{x:0,y:0}};this.aCenters=[];this.oGraph.getNodes().forEach(function(r,a){if(this.getStaticNodes().indexOf(r.getKey())>-1){r.center={x:r.getCenterPosition().x,y:r.getCenterPosition().y}}else{o.apex.x=Math.sqrt(a+1)*s;o.apex.y=0;e+=h;o=i.getRotatedVector(o,e);r.center={x:o.apex.x+t,y:o.apex.y+t}}this.aCenters.push(r.center)}.bind(this))};a.prototype._runSimulation=function(){var t=this.getMaxIterations(),e=this.getInitialTemperature(),o=this.getCoolDownStep(),r=this.getMaxTime()>0?this.getMaxTime()+Date.now():0,a=0,n,s,h,p,u,y,c;var d=i.getBoundingBox(this.aCenters),g=(d.p2.x-d.p1.x)*(d.p2.y-d.p1.y),f=this.getOptimalDistanceConstant()*Math.sqrt(g/this.oGraph.getNodes().length);var l=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},x=function(t){return t*t/f},m=function(t){return f*f/t};while(e>0&&a<t&&(r===0||Date.now()<r)){this.oGraph.getNodes().forEach(function(t){t.disp={x:0,y:0}});this.oGraph.getNodes().forEach(function(t){this.oGraph.getNodes().forEach(function(e){if(t.getKey()===e.getKey()){return}n=i.getPointDif(t.center,e.center);s=Math.max(1,l(n)-(t._getCircleSize()/2+e._getCircleSize()/2));t.disp.x+=n.x/s*m(s);t.disp.y+=n.y/s*m(s)})}.bind(this));this.oGraph.getLines().forEach(function(t){p=t.getFromNode();u=t.getToNode();if(p.getKey()===u.getKey()){return}n=i.getPointDif(p.center,u.center);s=l(n);y=n.x/s*x(s);c=n.y/s*x(s);p.disp.x-=y;p.disp.y-=c;u.disp.x+=y;u.disp.y+=c});this.oGraph.getNodes().forEach(function(t){if(this.getStaticNodes().indexOf(t.getKey())>-1){return}s=l(t.disp);h=Math.min(s,e)/s;t.center.x+=t.disp.x*h;t.center.y+=t.disp.y*h}.bind(this));e-=o;a++}this.oGraph.getNodes().forEach(function(t){t.setX(t.center.x-t._iWidth/2);t.setY(t.center.y-t._iHeight/2)})};a.prototype.destroy=function(){this.aCenters=null;this.oGraph=null;e.prototype.destroy.apply(this)};return a});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/layout/Geometry",[],function(){"use strict";var e={};var t=1e-10;e.getPointsDistance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};e.getLineEquation=function(e){var t=(e.p1.y-e.p2.y)/(e.p1.x-e.p2.x),n=e.p1.y-t*e.p1.x;return{slope:t,intercept:n,verticalX:e.p1.x}};e.isPointUnderLine=function(e,t){if(!isFinite(t.slope)){if(e.x===t.verticalX){return 0}else if(e.x>t.verticalX){return 1}else{return-1}}var n=e.y-t.slope*e.x;if(Math.abs(n-t.intercept)<Number.EPSILON*1e3){return 0}else if(n<t.intercept){return 1}else{return-1}};e.doLinesIntersect=function(t,n){var r=e.getLineEquation(t),i=e.getLineEquation(n);return e.isPointUnderLine(t.p1,i)!=e.isPointUnderLine(t.p2,i)&&e.isPointUnderLine(n.p1,r)!=e.isPointUnderLine(n.p2,r)};e.getLinesIntersection=function(t,n){var r=t.p1.x,i=t.p1.y,p=t.p2.x,x=t.p2.y,a=n.p1.x,o=n.p1.y,y=n.p2.x,u=n.p2.y,s=(r-p)*(o-u)-(i-x)*(a-y);if(s===0){var f=e.getLineEquation(t),c=e.getLineEquation(n);if(f.slope===c.slope&&f.intercept===c.intercept){return{x:Infinity,y:Infinity}}else{return undefined}}return{x:((r*x-i*p)*(a-y)-(r-p)*(a*u-o*y))/s,y:((r*x-i*p)*(o-u)-(i-x)*(a*u-o*y))/s}};e.doLineRectangleIntersect=function(t,n){return e.getLineRectangleIntersections(t,n).length>=2};e.getLineRectangleIntersections=function(n,r){var i=[];if(n.p1.x<r.p1.x&&n.p2.x<r.p1.x||n.p1.x>r.p2.x&&n.p2.x>r.p2.x||n.p1.y<r.p1.y&&n.p2.y<r.p1.y||n.p1.y>r.p2.y&&n.p2.y>r.p2.y){return i}var p,x=t;[{p1:r.p1,p2:{x:r.p1.x,y:r.p2.y}},{p1:{x:r.p1.x,y:r.p2.y},p2:r.p2},{p1:{x:r.p2.x,y:r.p1.y},p2:r.p2},{p1:r.p1,p2:{x:r.p2.x,y:r.p1.y}}].forEach(function(t){p=e.getLinesIntersection(n,t);if(p&&p.x>=t.p1.x-x&&p.x<=t.p2.x+x&&p.y>=t.p1.y-x&&p.y<=t.p2.y+x){i.push(p)}});return i};e.getPolygonCentroid=function(e){var t=0,n,r,i,p=0,x=0;if(e.points.length<3){throw new Error("Polygon must have three or more points.")}for(var a=0;a<e.points.length;a++){n=e.points[a];r=a<e.points.length-1?e.points[a+1]:e.points[0];t+=n.x*r.y-r.x*n.y}t=t/2;for(var o=0;o<e.points.length;o++){n=e.points[o];r=o<e.points.length-1?e.points[o+1]:e.points[0];i=n.x*r.y-r.x*n.y;p+=(n.x+r.x)*i;x+=(n.y+r.y)*i}p=p/(6*t);x=x/(6*t);return{x:p,y:x}};e.getAngleOfVector=function(e){var t=e.apex.x-e.center.x,n=e.apex.y-e.center.y,r=Math.atan(n/t);if(n>0){return t>=0?r:r+Math.PI}else{return t>=0?r+2*Math.PI:r+Math.PI}};e.getLengthOfVector=function(e){return Math.sqrt(Math.pow(e.apex.x-e.center.x,2)+Math.pow(e.apex.y-e.center.y,2))};e.getRotatedPoint=function(t,n){return e.getRotatedVector({center:{x:0,y:0},apex:t},n).apex};e.getPointSum=function(e,t){return{x:e.x+t.x,y:e.y+t.y}};e.getPointDif=function(e,t){return{x:e.x-t.x,y:e.y-t.y}};e.getRotatedVector=function(t,n){var r=e.getAngleOfVector(t),i=e.getLengthOfVector(t);r+=n;var p={x:Math.cos(r)*i+t.center.x,y:Math.sin(r)*i+t.center.y};return{center:t.center,apex:p}};e.getBoundingBox=function(e){var t=Infinity,n=Infinity,r=-Infinity,i=-Infinity;e.forEach(function(e){if(e.x<t){t=e.x}if(e.x>r){r=e.x}if(e.y<n){n=e.y}if(e.y>i){i=e.y}});return{p1:{x:t,y:n},p2:{x:r,y:i}}};e.enlargeBox=function(e,t){e.p1.x=e.p1.x-t;e.p1.y=e.p1.y-t;e.p2.x+=t;e.p2.y+=t};e.getNormalizedVector=function(t,n){var r=n/e.getLengthOfVector(t),i=(t.apex.x-t.center.x)*r,p=(t.apex.y-t.center.y)*r;return{center:{x:0,y:0},apex:{x:i,y:p}}};e.hasRectangleRectangleIntersection=function(e,t){return!(t.p1.x>e.p2.x||t.p2.x<e.p1.x||t.p1.y>e.p2.y||t.p2.y<e.p1.y)};e.getSegmentsIntersection=function(e,t){var n=1e-7;var r=function(e,t,r){return e-n<=t&&t<=r+n};var i=e.p1.x,p=e.p1.y,x=e.p2.x,a=e.p2.y,o=t.p1.x,y=t.p1.y,u=t.p2.x,s=t.p2.y;var f=((i*a-p*x)*(o-u)-(i-x)*(o*s-y*u))/((i-x)*(y-s)-(p-a)*(o-u));var c=((i*a-p*x)*(y-s)-(p-a)*(o*s-y*u))/((i-x)*(y-s)-(p-a)*(o-u));if(isNaN(f)||isNaN(c)){return false}else{if(i>=x){if(!r(x,f,i)){return false}}else if(!r(i,f,x)){return false}if(p>=a){if(!r(a,c,p)){return false}}else if(!r(p,c,a)){return false}if(o>=u){if(!r(u,f,o)){return false}}else if(!r(o,f,u)){return false}if(y>=s){if(!r(s,c,y)){return false}}else if(!r(y,c,s)){return false}}return{x:f,y:c}};e.getBezierPathCorners=function(n,r,i){var p=[],x=[],a;var o=n.split(/[,\s]/).reduce(function(e,t){var n=t.match("([a-zA-Z])(.+)");if(n){e.push(n[1]);e.push(n[2])}else{e.push(t)}return e},[]);var y=o.reduce(function(e,t){if(parseFloat(t)==t&&e.length){e[e.length-1].push(t)}else{e.push([t])}return e},[]);function u(e,t,n){var r=t.x-e.x;var i=t.y-e.y;var p=Math.sqrt(r*r+i*i);return s(e,t,Math.min(1,n/p))}function s(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}}function f(e,t){if(e.length>2){e[e.length-2]=t.x;e[e.length-1]=t.y}}function c(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}function l(e){return{x:parseFloat(y[e][1]),y:parseFloat(y[e][2])}}function h(e,n){return Math.abs(e-n)<t}function g(e,n){return n-e>t}function v(e,n){return e-n>t}function d(t){var n,r,i,p,a=t>0?1:-1,o=[],u,s,f,c;if(t===0){return}t=Math.abs(t);r=l(0);i=l(1);p=e.getNormalizedVector({center:r,apex:i},t);p=e.getRotatedVector(p,-a*Math.PI/2).apex;r.x+=p.x;r.y+=p.y;o.push(r);for(u=1;u<y.length-1;u++){n=l(u-1);r=l(u);i=l(u+1);s=h(n.x,r.x)&&g(n.y,r.y)||h(r.x,i.x)&&g(r.y,i.y);f=h(n.y,r.y)&&v(n.x,r.x)||h(r.y,i.y)&&v(r.x,i.x);c=h(n.y,r.y)&&g(n.x,r.x)&&h(r.x,i.x)&&v(r.y,i.y)||h(n.y,r.y)&&v(n.x,r.x)&&h(r.x,i.x)&&g(r.y,i.y)||h(n.x,r.x)&&g(n.y,r.y)&&h(r.y,i.y)&&g(r.x,i.x)||h(n.x,r.x)&&v(n.y,r.y)&&h(r.y,i.y)&&v(r.x,i.x);if(a<0){c=!c}p.x=(s?t:-t)*a;p.y=(f?t:-t)*a;r.x+=p.x;r.y+=p.y;r.inner=c;o.push(r)}r=l(y.length-1);n=l(y.length-2);p=e.getNormalizedVector({center:r,apex:n},t);p=e.getRotatedVector(p,a*Math.PI/2).apex;r.x+=p.x;r.y+=p.y;o.push(r);for(u=0;u<y.length;u++){y[u][1]=o[u].x.toFixed(0).toString();y[u][2]=o[u].y.toFixed(0).toString();x[u]=o[u].inner}}if(i){d(i)}if(y.length>1){var M=c(y[0]),L=null;if(y[y.length-1][0]=="Z"&&y[0].length>2){L=["L",M.x,M.y];y[y.length-1]=L}p.push(y[0]);for(var I=1;I<y.length;I++){var P=p[p.length-1],m=y[I],V=m==L?y[1]:y[I+1],R;if(x[I]===true){R=r*.65}else if(x[I]===false){R=r*1.35}else{R=r}if(V&&P&&P.length>2&&m[0]=="L"&&V.length>2&&V[0]=="L"){var E=c(P),N=c(m),b=c(V),q,F,w=Math.abs(E.x-N.x)+Math.abs(E.y-N.y),O=Math.abs(b.x-N.x)+Math.abs(b.y-N.y),z=Math.max(Math.min(R,w,O/2),1);q=u(N,E,z);F=u(N,b,z);f(m,q);m.origPoint=N;p.push(m);var S=s(q,N,.5),U=s(N,F,.5),B=["C",S.x,S.y,U.x,U.y,F.x,F.y];B.origPoint=N;p.push(B)}else{p.push(m)}}if(L){var A=c(p[p.length-1]);p.push(["Z"]);f(p[0],A)}}else{p=y}a=p.reduce(function(e,t){return e+t.join(" ")+" "},"");return a};return e},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/layout/KlayWrapper",["sap/ui/base/ObjectPool","sap/ui/Device"],function(e,r){"use strict";var o="sap.ui.thirdparty";function t(){var e=sap.ui.require.toUrl(o.replace(/\./g,"/"))+"/klay.js";this._worker=new Worker(e)}t.prototype.getWorker=function(){return this._worker};t.prototype.init=function(){};t.prototype.reset=function(){this._worker.onmessage=null;this._worker.onerror=null};var n={},a=!r.browser.firefox;n._pool=new e(t);n.layout=function(e){if(typeof Worker!=="undefined"&&a){try{var r=n._pool.borrowObject(),o=r.getWorker();o.postMessage({graph:e.graph,options:e.options});o.onmessage=function(o){if(o.data.stacktrace){e.error(o.data)}else{e.success(o.data)}n._pool.returnObject(r)};o.onerror=function(){n._pool.returnObject(r);n.run(e)}}catch(r){n.run(e)}}else{n.run(e)}};n.run=function(e){n.getKlay().then(function(r){r.layout(e)})};n.getKlay=function(){if(typeof $klay==="undefined"){return new Promise(function(e){var r=o.replace(/\./g,"/")+"/klay";sap.ui.require([r],function(){e($klay)})})}else{return Promise.resolve($klay)}};return n},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/layout/LayeredLayout",["sap/suite/ui/commons/library","./LayoutAlgorithm","./Geometry","./KlayWrapper","./LayoutTask","sap/ui/performance/Measurement"],function(t,e,o,i,r,a){"use strict";var n=t.networkgraph.Orientation,s=t.networkgraph.NodePlacement,h=t.networkgraph.LayoutRenderType;var d=34,p=25,u=17,g=4,c="N_",l="G_",f=2;var y=function(){var t={};t[s.BrandesKoepf]="BRANDES_KOEPF";t[s.LinearSegments]="LINEAR_SEGMENTS";t[s.Simple]="SIMPLE";return Object.freeze(t)}();var _=e.extend("sap.suite.ui.commons.networkgraph.layout.LayeredLayout",{metadata:{library:"sap.suite.ui.commons",properties:{nodeSpacing:{type:"float",defaultValue:55},lineSpacingFactor:{type:"float",defaultValue:.25},nodePlacement:{type:"sap.suite.ui.commons.networkgraph.NodePlacement",defaultValue:s.BrandesKoepf},mergeEdges:{type:"boolean",defaultValue:false}}}});_.prototype.getLayoutRenderType=function(){return h.LayeredWithGroups};_.prototype.layout=function(){return new r(function(t,e,o){var r=this.getParent();if(!r){e("The algorithm must be associated with a graph.");return}if(this._hasHierarchicalGroups()){e("Layered layout algorithm doesn't support hierarchical groups.");return}this.oGraph=r;this.oKGraph={children:[],edges:[]};this.mLineMap={};a.start("NetworkGraph - LayeredLayout","Layouting of a graph "+r.getId());r.getGroups().forEach(this._addGroupToKlay,this);r.getNodes().forEach(this._addNodeToKlay,this);r.getLines().forEach(this._addLineToKlay,this);i.layout({graph:this.oKGraph,options:this._getOptions(),success:function(e){if(o.isTerminated()){t();return}this._copyStuffWithoutPrefixes(e);e.children.forEach(function(t){this._extractNodeFromKlay(t)},this);e.edges.forEach(function(t){this._extractLineFromKlay(t)},this);this._dealWithOrientation();this._makeExpandedGroupsBoxesAroundNodes();this._shrinkGroupsDownward();this._stretchLinesToCircleNodeAxes();this._alignCoordinatesWithView();a.end("NetworkGraph - LayeredLayout");t()}.bind(this),error:function(t){e(t)}})}.bind(this))};_.prototype._buildNodeForKlay=function(t){var e={},o=t._isCircle();if(o||t.getCoreNodeSize()&&t._isCustom()){var i=o?t._getCircleSize():t.getCoreNodeSize();if(this.oGraph.getOrientation()!==n.TopBottom&&this.oGraph.getOrientation()!==n.BottomTop){var r=t._iHeight-i+g;e={additionalPortSpace:"top="+g+", bottom="+r}}else{var a=(t._iWidth-i)/2+g;e={additionalPortSpace:"top="+a+", bottom="+a}}}return{id:c+t.getKey(),width:t._iWidth,height:t._iHeight,properties:e}};_.prototype._addGroupToKlay=function(t){if(t._isIgnored()){return}var e=2*t._getBorderSize(),o={id:l+t.getKey(),width:t._iWidth+e,height:t._iHeight+e};this.oKGraph.children.push(o);if(!t.getCollapsed()){t.aNodes.forEach(function(t){if(!t._isIgnored()){if(!o.children){o.children=[]}o.children.push(this._buildNodeForKlay(t))}},this)}};_.prototype._addNodeToKlay=function(t){if(!t._oGroup&&!t._isIgnored()){this.oKGraph.children.push(this._buildNodeForKlay(t))}};_.prototype._addLineToKlay=function(t){var e,o,i;if(!t._isIgnored()){e=t.getFromNode()._oGroup&&t.getFromNode()._oGroup.getCollapsed()?l+t.getFromNode()._oGroup.getKey():c+t.getFrom();o=t.getToNode()._oGroup&&t.getToNode()._oGroup.getCollapsed()?l+t.getToNode()._oGroup.getKey():c+t.getTo();i=e+"->"+o+"["+this.oKGraph.edges.length+"]";this.oKGraph.edges.push({id:i,source:e,target:o});this.mLineMap[i]=t}};_.prototype._getOptions=function(){var t=this.oGraph.getOrientation(),e;switch(t){case n.LeftRight:case n.RightLeft:e="RIGHT";break;case n.TopBottom:case n.BottomTop:e="DOWN";break;default:e="RIGHT"}return{direction:e,spacing:this.getNodeSpacing(),nodePlace:y[this.getNodePlacement()],edgeSpacingFactor:this.getLineSpacingFactor(),mergeEdges:this.getMergeEdges()}};_.prototype._extractNodeFromKlay=function(t){var e=t.id.substring(0,f)===c?this.oGraph.getNodeByKey(t.originalId):undefined,o;if(!e){e=this.oGraph.mGroups[t.originalId];if(e&&!e.getCollapsed()&&t.children){t.children.forEach(function(e){o=this.oGraph.getNodeByKey(e.originalId);if(o){o.setX(Math.round(e.x+t.x));o.setY(Math.round(e.y+t.y))}},this)}}if(e){e.setX(Math.round(t.x));e.setY(Math.round(t.y))}};_.prototype._extractLineFromKlay=function(t){var e=this.mLineMap[t.id];e.setSource({x:Math.round(t.sourcePoint.x),y:Math.round(t.sourcePoint.y)});e.setTarget({x:Math.round(t.targetPoint.x),y:Math.round(t.targetPoint.y)});e.clearBends();if(t.bendPoints){t.bendPoints.forEach(function(t){e.addBend({x:Math.round(t.x),y:Math.round(t.y)})})}if(e.getFromNode()._oGroup&&!e.getFromNode()._oGroup.getCollapsed()){e._shift({x:e.getFromNode()._oGroup.getX(),y:e.getFromNode()._oGroup.getY()})}};_.prototype._dealWithOrientation=function(){if(!this.oGraph._bIsRtl&&this.oGraph.getOrientation()===n.RightLeft||this.oGraph._bIsRtl&&this.oGraph.getOrientation()!==n.RightLeft){this._verticalMirror(true)}if(this.oGraph.getOrientation()===n.BottomTop){this._horizontalMirror(true)}};_.prototype._makeExpandedGroupsBoxesAroundNodes=function(){var t=[],e;this.oGraph.getGroups().forEach(function(i){if(i.getCollapsed()||i.aNodes.length===0){return}t=this._getNodesPoints(i.aNodes);e=o.getBoundingBox(t);o.enlargeBox(e,p);i.setX(Math.round(e.p1.x));i.setY(Math.round(e.p1.y-d));i._iWidth=e.p2.x-e.p1.x;i._iHeight=e.p2.y-e.p1.y+d},this)};_.prototype._shrinkGroupsDownward=function(){var t;this.oGraph.getGroups().forEach(function(e){if(e.getCollapsed()){return}e.aNodes.forEach(function(o){t=(e.getY()+e._iHeight-o.getY())/e._iHeight;o.setY(o.getY()+t)});e.setY(e.getY()+u);e._iHeight-=u})};_.prototype._copyStuffWithoutPrefixes=function(t){t.children.forEach(function(t){t.originalId=t.id.substring(f);if(t.children){t.children.forEach(function(t){t.originalId=t.id.substring(f)})}});t.edges.forEach(function(t){t.originalSource=t.source.substring(f);t.originalTarget=t.target.substring(f)})};return _});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/layout/LayoutAlgorithm",["sap/suite/ui/commons/library","sap/ui/core/Element","./Geometry"],function(t,e,o){"use strict";var i=e.extend("sap.suite.ui.commons.networkgraph.layout.LayoutAlgorithm",{metadata:{abstract:true,publicMethods:["getType","isLayered","layout"]}});var n=50,r=.2;var g=t.networkgraph.Orientation,s=t.networkgraph.NodeShape;i.prototype._normalizeLines=function(){var t=this.getParent(),e={},i,n,g,s,a,c,u,p,h;t.getLines().forEach(function(t){i=t.getFrom()<t.getTo()?t.getFrom()+"-"+t.getTo():t.getTo()+"-"+t.getFrom();if(!e[i]){e[i]={from:t.getFromNode(),to:t.getToNode(),lines:[]}}e[i].lines.push(t)});Object.keys(e).forEach(function(t){n=e[t];if(n.lines.length===1){n.lines[0]._normalizePath();return}a=Math.min(n.from._getCircleSize(),n.to._getCircleSize())/2;u=2*(1-r)/(n.lines.length-1);g=-1;n.lines.forEach(function(t){g++;s={center:t.getFromNode().getCenterPosition(),apex:t.getToNode().getCenterPosition()};c=o.getNormalizedVector(s,a);c=o.getRotatedVector(c,Math.PI/2);p=(r-1+g*u)*c.apex.x;h=(r-1+g*u)*c.apex.y;t.setSource({x:t.getFromNode().getCenterPosition().x+p,y:t.getFromNode().getCenterPosition().y+h});t.setTarget({x:t.getToNode().getCenterPosition().x+p,y:t.getToNode().getCenterPosition().y+h})})})};i.prototype._stretchLinesToCircleNodeAxes=function(){var t=this.getParent(),e=t.getOrientation()!=g.TopBottom&&t.getOrientation()!=g.BottomTop,o,i;t.getLines().forEach(function(t){if(t._isIgnored()){return}var n=t.getStretchToCenter();var r=function(t){return(n&&t._isCustom()||t._isCircle())&&!t._isIgnored()};o=t.getFromNode();i=t.getToNode();if(e){if(r(o)){t.getSource().setX(Math.round(o.getX()+o._iWidth/2))}if(r(i)){t.getTarget().setX(Math.round(i.getX()+i._iWidth/2))}}else{if(r(o)){t.getSource().setY(Math.round(o.getY()+o._getShapeSize(e)/2))}if(r(i)){t.getTarget().setY(Math.round(i.getY()+i._getShapeSize(e)/2))}}})};i.prototype._cutLinesAtBoxNodeBorders=function(){var t=this.getParent(),e,i,n,r,g,a;t.getLines().forEach(function(t){e=t.getCoordinates();if(t.getFromNode().getShape()===s.Box){i={x:e[0].getX(),y:e[0].getY()};n={x:e[1].getX(),y:e[1].getY()};r=this._getNodePoints(t.getFromNode());g=o.getLineRectangleIntersections({p1:i,p2:n},{p1:r[0],p2:r[1]});if(g.length>1){if(o.getPointsDistance(g[0],n)<o.getPointsDistance(g[1],n)){t.setSource(g[0])}else{t.setSource(g[1])}}}if(t.getToNode().getShape()===s.Box){a=e.length-1;i={x:e[a-1].getX(),y:e[a-1].getY()};n={x:e[a].getX(),y:e[a].getY()};r=this._getNodePoints(t.getToNode());g=o.getLineRectangleIntersections({p1:i,p2:n},{p1:r[0],p2:r[1]});if(g.length>1){if(o.getPointsDistance(g[0],i)<o.getPointsDistance(g[1],i)){t.setTarget(g[0])}else{t.setTarget(g[1])}}}}.bind(this))};i.prototype._getNodePoints=function(t){return[{x:t.getX(),y:t.getY()},{x:t.getX()+t._iWidth,y:t.getY()+t._iHeight}]};i.prototype._getNodesPoints=function(t){var e=[];t.forEach(function(t){if(t._isIgnored&&!t._isIgnored()&&(!t._isInCollapsedGroup||!t._isInCollapsedGroup())){e.push({x:t.getX(),y:t.getY()});e.push({x:t.getX()+t._iWidth,y:t.getY()+t._iHeight})}});return e};i.prototype._getLinesPoints=function(){var t=this.getParent(),e=[];t.getLines().forEach(function(t){if(t._isIgnored()){return}if(t.getSource()){e.push({x:t.getSource().getX(),y:t.getSource().getY()})}if(t.getTarget()){e.push({x:t.getTarget().getX(),y:t.getTarget().getY()})}t.getBends().forEach(function(t){e.push({x:t.getX(),y:t.getY()})})});return e};i.prototype._verticalMirror=function(t){var e=this.getParent(),o=this._getGraphBoundingBox(),i=o.p1.x+o.p2.x,n;e.getNodes().forEach(function(t){t.setX(i-(t.getX()+t._iWidth))});e.getGroups().forEach(function(e){n=t?2*e._getBorderSize():0;e.setX(i-(e.getX()+e._iWidth+n))});e.getLines().forEach(function(t){if(t._isIgnored()){return}if(t.getSource()){t.setSource({x:i-t.getSource().getX()})}if(t.getTarget()){t.setTarget({x:i-t.getTarget().getX()})}t.getBends().forEach(function(t){t.setX(i-t.getX())});if(t._aNipples){t._aNipples.forEach(function(t){t.x=i-t.x;if(t.orientation===g.LeftRight){t.orientation=g.RightLeft}else if(t.orientation===g.RightLeft){t.orientation=g.LeftRight}})}})};i.prototype._horizontalMirror=function(t){var e=this.getParent(),o=this._getGraphBoundingBox(),i=o.p1.y+o.p2.y,n;e.getNodes().forEach(function(t){t.setY(i-(t.getY()+t._iHeight))});e.getGroups().forEach(function(e){n=t?2*e._getBorderSize():0;e.setY(i-(e.getY()+e._iHeight+n))});e.getLines().forEach(function(t){if(t._isIgnored()){return}if(t.getSource()){t.setSource({y:i-t.getSource().getY()})}if(t.getTarget()){t.setTarget({y:i-t.getTarget().getY()})}t.getBends().forEach(function(t){t.setY(i-t.getY())});if(t._aNipples){t._aNipples.forEach(function(t){t.y=i-t.y;if(t.orientation===g.TopBottom){t.orientation=g.BottomTop}else if(t.orientation===g.BottomTop){t.orientation=g.TopBottom}})}})};i.prototype._shiftGraph=function(t,e,o){var i=this.getParent();if(!o){i.getGroups().forEach(function(o){o.setX(o.getX()+t);o.setY(o.getY()+e)})}i.getNodes().forEach(function(o){o.setX(o.getX()+t);o.setY(o.getY()+e);o.aLines.forEach(function(o){o._shift({x:t,y:e})})})};i.prototype._getGraphBoundingBox=function(){var t=this.getParent(),e=this._getNodesPoints(t.getNodes()).concat(this._getNodesPoints(t.getGroups())).concat(this._getLinesPoints());return o.getBoundingBox(e)};i.prototype._alignCoordinatesWithView=function(){var t=this._getGraphBoundingBox(),e=n-t.p1.x,o=n-t.p1.y;this._shiftGraph(e,o)};i.prototype._hasHierarchicalGroups=function(){return this.getParent().getGroups().some(function(t){return t.getParentGroupKey()})};i.prototype.getType=function(){throw new Error("To be overridden in implementing class.")};i.prototype.isLayered=function(){throw new Error("To be overridden in implementing class.")};i.prototype.layout=function(){throw new Error("To be overridden in implementing class.")};return i});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/layout/LayoutTask",["sap/ui/base/Object"],function(t){"use strict";var e=t.extend("sap.suite.ui.commons.networkgraph.layout.LayoutTask",{constructor:function(e){t.apply(this,arguments);this._bTerminated=false;this._oPromise=new Promise(function(t,i){e(t,i,this)}.bind(this))}});e.prototype.then=function(t,e){this._oPromise=this._oPromise.then(t,e);return this};e.prototype.catch=function(t){this._oPromise=this._oPromise.catch(t);return this};e.prototype.terminate=function(){this._bTerminated=true;return this};e.prototype.isTerminated=function(){return this._bTerminated};return e});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/layout/NoopLayout",["sap/suite/ui/commons/library","./LayoutAlgorithm","./LayoutTask"],function(t,e,o){"use strict";var r=t.networkgraph.LayoutRenderType;var a=e.extend("sap.suite.ui.commons.networkgraph.layout.NoopLayout");a.prototype.getLayoutRenderType=function(){return r.LayeredWithGroups};a.prototype.layout=function(){return new o(function(t,e,o){var r=this.getParent();if(o.isTerminated()){t();return}if(!r){e("The algorithm must be associated with a graph.");return}this._normalizeLines();t()}.bind(this))};return a});
sap.ui.predefine("sap/suite/ui/commons/networkgraph/layout/SwimLaneChainLayout",["sap/suite/ui/commons/library","./LayoutAlgorithm","./Geometry","./LayoutTask"],function(e,t,i,n){"use strict";var s=e.networkgraph.Orientation;var o=e.networkgraph.LayoutRenderType,a=32,r=50,h=75,d=75,f=75,g=32,p=10,c=25;var u=t.extend("sap.suite.ui.commons.networkgraph.layout.SwimlaneChainLayout",{metadata:{library:"sap.suite.ui.commons",properties:{}}});u.prototype.getLayoutRenderType=function(){return o.SwimLanes};u.prototype.layout=function(){return new n(function(e,t,i){var n=this.getParent(),o;if(!n){t("The algorithm must be associated with a graph.");return}this.oGraph=n;o=this._validateGraphDefinition();if(o){t(o)}this.bVertLane=n.getOrientation()===s.LeftRight||n.getOrientation()===s.RightLeft;this._calcLanesProperties();this._findRoots();this._initGrid();this._traceAndStackNodes();this._calcRowsProperties();this._calcNodesCoordinates();this.oGraph.getLines().forEach(function(e){this._traceSingleLine(e);this._calcLineCentroid(e);e._aNipples=[]}.bind(this));this._indexAllLineFragments();this._cutLinesAtBoxNodeBorders();this._removeLineOverlays(this.aHorizontalFragments,true);this._removeLineOverlays(this.aVerticalFragments,false);this._calcLanesWidthsAndPositions();this._collapseShiftNodesAndLines();this._alignCoordinatesWithView();this._beautify();this._findAllNipples();this._cullLineFragmentsInCollapsedGroups();if(!this.oGraph._bIsRtl&&n.getOrientation()===s.RightLeft||this.oGraph._bIsRtl&&n.getOrientation()===s.LeftRight){this._verticalMirror()}else if(n.getOrientation()===s.BottomTop){this._horizontalMirror()}e()}.bind(this))};u.prototype._validateGraphDefinition=function(){var e=[];this.oGraph.getNodes().forEach(function(t){if(!t.getGroup()){e.push(t.getKey())}});if(e.length>0){return"Some nodes are missing swim lanes: "+e.join()}if(this._hasHierarchicalGroups()){return"Swim lane layout algorithm doesn't support hierarchical groups."}return null};u.prototype._calcLanesProperties=function(){this.aLanes=[];this.oGraph.getGroups().forEach(function(e){if(this.bVertLane){e.setY(0)}else{e.setX(0)}this.aLanes.push(e.getKey())}.bind(this));this.aLanes.sort();this.oGraph.getNodes().forEach(function(e){e._iGroupIndex=this.aLanes.indexOf(e.getGroup())}.bind(this));var e;this.aLaneWidths={};this.aLaneOffsets={};this.oGraph.getNodes().forEach(function(t){e=this.bVertLane?t._iWidth:t._iHeight;if(!this.aLaneWidths[t._iGroupIndex]||this.aLaneWidths[t._iGroupIndex]<e){this.aLaneWidths[t._iGroupIndex]=e}}.bind(this));var t;this.aLaneGroups={};this.oGraph.getGroups().forEach(function(e){t=this.aLanes.indexOf(e.getKey());if(this.aLaneWidths[t]<e.getMinWidth()){this.aLaneWidths[t]=e.getMinWidth()}this.aLaneGroups[t]=e}.bind(this));var i=0;Object.keys(this.aLaneWidths).forEach(function(e){if(i>0){i+=d}this.aLaneOffsets[e]=i;i+=this.aLaneWidths[e]}.bind(this))};u.prototype._findRoots=function(){this.aRoots=[];this.oGraph.getNodes().forEach(function(e){if(e._iGroupIndex===0&&e.aParents.length===0){this.aRoots.push(e)}}.bind(this));this.oGraph.getNodes().forEach(function(e){if(e._iGroupIndex>0&&e.aParents.length===0){this.aRoots.push(e)}}.bind(this));this.oGraph.getNodes().forEach(function(e){this.aRoots.push(e)}.bind(this))};u.prototype._initGrid=function(){this.aGrid=[];this.oGraph.getNodes().forEach(function(e){if(!this.aGrid[e._iGroupIndex]){this.aGrid[e._iGroupIndex]=[]}e._bChainTraced=false}.bind(this))};u.prototype._traceAndStackNodes=function(){this.aRoots.forEach(function(e){if(!e._bChainTraced){this.aGrid[e._iGroupIndex].push(e);e._bChainTraced=true;this._traceNodeChainDepthFirst(e)}}.bind(this))};u.prototype._traceNodeChainDepthFirst=function(e){e.aChildren.forEach(function(e){if(!e._bChainTraced){e._bChainTraced=true;this.aGrid[e._iGroupIndex].push(e);this._traceNodeChainDepthFirst(e)}}.bind(this))};u.prototype._calcRowsProperties=function(){var e=0,t;this.aGrid.forEach(function(t){if(t.length>e){e=t.length}});this.aRowHeights=[];this.aRowOffsets=[];for(var i=0;i<e;i++){this.aGrid.forEach(function(e){if(!e[i]){return}t=this.bVertLane?e[i]._iHeight:e[i]._iWidth;if(!this.aRowHeights[i]||this.aRowHeights[i]<t){this.aRowHeights[i]=t}}.bind(this))}var n=-1,s=0;this.aRowHeights.forEach(function(e){n++;if(n>0){s+=d}this.aRowOffsets[n]=s;s+=e}.bind(this));this.fGridHeight=this.aRowOffsets[e-1]+this.aRowHeights[e-1];if(this.bVertLane){this.fGridHeight+=r}else{this.fGridHeight+=h}this.oGraph.getGroups().forEach(function(e){if(this.bVertLane){e._iHeight=this.fGridHeight}else{e._iWidth=this.fGridHeight}}.bind(this))};u.prototype._calcNodesCoordinates=function(){var e;this.aGrid.forEach(function(t){e=-1;t.forEach(function(t){e++;if(this.bVertLane){t.setX(this.aLaneOffsets[t._iGroupIndex]+this.aLaneWidths[t._iGroupIndex]/2-t._iWidth/2+d/2);t.setY(this.aRowOffsets[e]+this.aRowHeights[e]/2-t._iHeight/2+f/2)}else{t.setX(this.aRowOffsets[e]+this.aRowHeights[e]/2-t._iWidth/2+f/2);t.setY(this.aLaneOffsets[t._iGroupIndex]+this.aLaneWidths[t._iGroupIndex]/2-t._iHeight/2+d/2)}t.iRow=e}.bind(this))}.bind(this))};u.prototype._calcLineCentroid=function(e){var t=e.getBends().length+2,i=e.getSource().getX()+e.getTarget().getX(),n=e.getSource().getY()+e.getTarget().getY();e.getBends().forEach(function(e){i+=e.getX();n+=e.getY()});e._oCentroid={x:i/t,y:n/t}};u.prototype._indexAllLineFragments=function(){this.aVerticalFragments=[];this.aHorizontalFragments=[];this.oGraph.getLines().forEach(function(e){this._indexLineFragments(e)}.bind(this))};u.prototype._indexLineFragments=function(e){var t=this._getLinePointsList(e),i,n;for(var s=0;s<t.length-1;s++){i=t[s];n=t[s+1];if(i.x===n.x){if(i.y<n.y){this.aVerticalFragments.push({line:e,index:s,cc:i.x,c1:i.y,c2:n.y})}else{this.aVerticalFragments.push({line:e,index:s,cc:i.x,c1:n.y,c2:i.y,invert:true})}}else if(i.y===n.y){if(i.x<n.x){this.aHorizontalFragments.push({line:e,index:s,cc:i.y,c1:i.x,c2:n.x})}else{this.aHorizontalFragments.push({line:e,index:s,cc:i.y,c1:n.x,c2:i.x,invert:true})}}}};u.prototype._removeLineOverlays=function(e,t){var i,n,s,o,a;for(var r=0;r<e.length;r++){i=e[r];n=[i];for(var h=r+1;h<e.length;h++){if(this._doFragmentsIntersect(i,e[h])){n.push(e[h])}}if(n.length===1){continue}n.sort(function(e,i){if(t){return e.line._oCentroid.y-i.line._oCentroid.y}else{return e.line._oCentroid.x-i.line._oCentroid.x}});s=(n.length-1)*p;if(s>c){s=c}o=s/(n.length-1);a=i.cc-s/2;for(h=0;h<n.length;h++){this._shiftLineFragment(n[h],a,!t);a+=o}}};u.prototype._shiftLineFragment=function(e,t,i){var n=e.line.getCoordinates()[e.index],s=e.line.getCoordinates()[e.index+1];e.cc=t;if(i){n.setX(t);s.setX(t)}else{n.setY(t);s.setY(t)}};u.prototype._doFragmentsIntersect=function(e,t){return e.cc===t.cc&&!(e.c1<t.c1&&e.c1<t.c2&&e.c2<t.c1&&e.c2<t.c2||e.c1>t.c1&&e.c1>t.c2&&e.c2>t.c1&&e.c2>t.c2)};u.prototype._getLinePointsList=function(e){var t=[];t.push({x:e.getSource().getX(),y:e.getSource().getY()});e.getBends().forEach(function(e){t.push({x:e.getX(),y:e.getY()})});t.push({x:e.getTarget().getX(),y:e.getTarget().getY()});return t};u.prototype._calcLanesWidthsAndPositions=function(){var e,t=0;this.aLanes.forEach(function(i,n){e=this.oGraph.mGroups[i];e._fExpandedWidth=this.aLaneWidths[n]+d;e._fExpandedPosition=this.aLaneOffsets[n];if(this.bVertLane){e.setX(this.aLaneOffsets[n]+t)}else{e.setY(this.aLaneOffsets[n]+t)}if(e.getCollapsed()){if(this.bVertLane){e._iWidth=g}else{e._iHeight=g}if(e.getNodes().length>0){t+=g-(this.aLaneWidths[n]+d)}}else{if(this.bVertLane){e._iWidth=e._fExpandedWidth}else{e._iHeight=e._fExpandedWidth}}}.bind(this))};u.prototype._collapseShiftNodesAndLines=function(){var e,t,i;this.aLanes.forEach(function(n){i=this.oGraph.mGroups[n];t=g/i._fExpandedWidth;this.oGraph.getNodes().forEach(function(t){if(this.bVertLane){if(t.getCenterPosition().x>i._fExpandedPosition&&t.getCenterPosition().x<=i._fExpandedPosition+i._fExpandedWidth){e=i.getX()-i._fExpandedPosition;if(i.getCollapsed()){e+=(g-i._fExpandedWidth)/2}t.setX(t.getX()+e)}}else{if(t.getCenterPosition().y>i._fExpandedPosition&&t.getCenterPosition().y<=i._fExpandedPosition+i._fExpandedWidth){e=i.getY()-i._fExpandedPosition;if(i.getCollapsed()){e+=(g-i._fExpandedWidth)/2}t.setY(t.getY()+e)}}}.bind(this));this.oGraph.getLines().forEach(function(n){n.getCoordinates().forEach(function(n){if(this.bVertLane){if(n.getX()>i._fExpandedPosition&&n.getX()<=i._fExpandedPosition+i._fExpandedWidth){e=i.getX()-i._fExpandedPosition;if(i.getCollapsed()){e-=(n.getX()-i._fExpandedPosition)*(1-t)}n.setX(n.getX()+e)}}else{if(n.getY()>i._fExpandedPosition&&n.getY()<=i._fExpandedPosition+i._fExpandedWidth){e=i.getY()-i._fExpandedPosition;if(i.getCollapsed()){e-=(n.getY()-i._fExpandedPosition)*(1-t)}n.setY(n.getY()+e)}}}.bind(this))}.bind(this))}.bind(this))};u.prototype._traceSingleLine=function(e){var t,i,n,s;t=e.getFromNode();i=e.getToNode();n=t.getCenterPosition();s=i.getCenterPosition();e.setSource({x:n.x,y:n.y});e.setTarget({x:s.x,y:s.y});e.clearBends();var o=(this.aLaneWidths[t._iGroupIndex]+d)/2,a=(this.aLaneWidths[i._iGroupIndex]+d)/2,r=(this.aRowHeights[t.iRow]+f)/2,h=(this.aRowHeights[i.iRow]+f)/2;if(t._iGroupIndex===i._iGroupIndex&&Math.abs(t.iRow-i.iRow)===1||t.iRow===i.iRow&&Math.abs(t._iGroupIndex-i._iGroupIndex)===1){}else if(t._iGroupIndex===i._iGroupIndex){if(this.bVertLane){e.addBend({x:n.x+o,y:n.y});e.addBend({x:s.x+a,y:s.y})}else{e.addBend({x:n.x,y:n.y+o});e.addBend({x:s.x,y:s.y+a})}}else if(t.iRow===i.iRow){var g=true,p=Math.min(t._iGroupIndex,i._iGroupIndex),c=Math.max(t._iGroupIndex,i._iGroupIndex);for(var u=p+1;u<c;u++){if(this.aGrid[u]&&this.aGrid[u].length>t.iRow){g=false}}if(!g){if(this.bVertLane){e.addBend({x:n.x,y:n.y+r});e.addBend({x:s.x,y:s.y+h})}else{e.addBend({x:n.x+r,y:n.y});e.addBend({x:s.x+h,y:s.y})}}}else if(Math.abs(t.iRow-i.iRow)===1){if(this.bVertLane){if(t.iRow<i.iRow){e.addBend({x:n.x,y:n.y+r});e.addBend({x:s.x,y:s.y-h})}else{e.addBend({x:n.x,y:n.y-r});e.addBend({x:s.x,y:s.y+h})}}else{if(t.iRow<i.iRow){e.addBend({x:n.x+r,y:n.y});e.addBend({x:s.x-h,y:s.y})}else{e.addBend({x:n.x-r,y:n.y});e.addBend({x:s.x+h,y:s.y})}}}else if(Math.abs(t._iGroupIndex-i._iGroupIndex)===1){if(this.bVertLane){if(t._iGroupIndex<i._iGroupIndex){e.addBend({x:n.x+o,y:n.y});e.addBend({x:s.x-a,y:s.y})}else{e.addBend({x:n.x-o,y:n.y});e.addBend({x:s.x+a,y:s.y})}}else{if(t._iGroupIndex<i._iGroupIndex){e.addBend({x:n.x,y:n.y+o});e.addBend({x:s.x,y:s.y-a})}else{e.addBend({x:n.x,y:n.y-o});e.addBend({x:s.x,y:s.y+a})}}}else{var l,x;if(this.bVertLane){l=t._iGroupIndex<i._iGroupIndex?n.x+o:n.x-o;e.addBend({x:l,y:n.y});x=t.iRow<i.iRow?s.y-h:s.y+h;e.addBend({x:l,y:x});e.addBend({x:s.x,y:x})}else{x=t._iGroupIndex<i._iGroupIndex?n.y+o:n.y-o;e.addBend({x:n.x,y:x});l=t.iRow<i.iRow?s.x-h:s.x+h;e.addBend({x:l,y:x});e.addBend({x:l,y:s.y})}}var _,y;if(e.getBends().length>0){y=e.getBends()[e.getBends().length-1];_={x:y.getX(),y:y.getY()}}else{_=n}if(s.x===_.x){if(s.y<_.y){e.setTarget({x:s.x,y:s.y+i._iHeight/2})}else{e.setTarget({x:s.x,y:s.y-i._iHeight/2})}}else{if(s.x<_.x){e.setTarget({x:s.x+i._iWidth/2,y:s.y})}else{e.setTarget({x:s.x-i._iWidth/2,y:s.y})}}};u.prototype._beautify=function(){if(this.bVertLane){this.oGraph.getGroups().forEach(function(e){e._iHeight+=a;this._shiftGraph(0,4,true)}.bind(this))}else{this._shiftGraph(a/2,0,true)}};u.prototype._alignCoordinatesWithView=function(){var e=this._getGraphBoundingBox();this._shiftGraph(-e.p1.x,-e.p1.y)};u.prototype._findAllNipples=function(){var e,t,i,n,o,a,r,h,d,f,g,p;this._indexAllLineFragments();e=this.bVertLane?this.aHorizontalFragments:this.aVerticalFragments;e.forEach(function(e){t=Object.keys(this.aLaneOffsets).length-1;Object.keys(this.aLaneOffsets).forEach(function(c,u){if(u===t){return}i=this.aLaneGroups[c];n=this.aLaneGroups[Object.keys(this.aLaneOffsets)[u+1]];if(!i.getCollapsed()&&!n.getCollapsed()){return}o=e.line.getFromNode()._oGroup;a=e.line.getToNode()._oGroup;if(i.getCollapsed()&&n.getCollapsed()&&o===i&&a===n){return}r=i.getCollapsed()&&(i.getKey()===o.getKey()||i.getKey()===a.getKey());h=n.getCollapsed()&&(n.getKey()===o.getKey()||n.getKey()===a.getKey());g=undefined;d=i.getX()+i._iWidth;f=i.getY()+i._iHeight;if(this.bVertLane){if((r&&e.c1<=d&&e.c2>d||h&&e.c1<d&&e.c2>=d)&&e.cc>i.getY()&&e.cc<f){g={x:d,y:e.cc}}}else{if((r&&e.c1<=f&&e.c2>f||h&&e.c1<f&&e.c2>=f)&&e.cc>i.getX()&&e.cc<d){g={x:e.cc,y:f}}}if(g){if(r){if(this.bVertLane){p=s.LeftRight}else{p=s.TopBottom}}else if(h){if(this.bVertLane){p=s.RightLeft}else{p=s.BottomTop}}else{return}e.line._aNipples.push({x:g.x,y:g.y,orientation:p})}}.bind(this))}.bind(this))};u.prototype._cullLineFragmentsInCollapsedGroups=function(){var e,t,i=function(e,t){return e.getX()>=t.getX()&&e.getX()<=t.getX()+t._iWidth&&e.getY()>=t.getY()&&e.getY()<=t.getY()+t._iHeight},n=function(n,s){var o=s?n.getToNode():n.getFromNode(),a=function(){return s?n.getCoordinates().length-1:0},r;if(!o._isInCollapsedGroup()){return}r=o._oGroup;while(n.getCoordinates().length>0&&i(n.getCoordinates()[a()],r)){e=n.getCoordinates()[a()];t=n.getCoordinates()[a()+(s?-1:1)];if(t&&!i(t,r)){if(this.bVertLane){if(t.getX()<e.getX()){e.setX(r.getX())}else{e.setX(r.getX()+r._iWidth)}}else{if(t.getY()<e.getY()){e.setY(r.getY())}else{e.setY(r.getY()+r._iHeight)}}break}else{n.removeAggregation("coordinates",a(),true)}}}.bind(this);this.oGraph.getLines().forEach(function(e){n(e,false);n(e,true)})};return u});
sap.ui.predefine("sap/suite/ui/commons/networkgraph/layout/TwoColumnsLayout",["sap/suite/ui/commons/library","./LayoutAlgorithm","./Geometry","./LayoutTask"],function(o,e,t,i){"use strict";var r=o.networkgraph.LayoutRenderType;var n=15,s=75,a=32,u=42,h=160,p=100,d=50,l=25,f=10,_=.6,g=20;var c=e.extend("sap.suite.ui.commons.networkgraph.layout.TwoColumnsLayout");c.prototype.getLayoutRenderType=function(){return r.TwoColumns};c.prototype.layout=function(){return new i(function(o,e,t){var i=this.getParent(),r;if(!i){e("The algorithm must be associated with a graph.");return}this.oGraph=i;this.oLeftColumn=undefined;this.oRightColumn=undefined;r=this._validateGraphDefinition();if(r){e(r)}this._preprocessGroupsAndNodes();r=this._validateLines();if(r){e(r)}this._calcLanesProperties();this._createNodesGrid();this._calcNodeEndingAndStartingPoints();this._setNodesCoordinates();this._setGroupCoordinates();this._setLinesCoordinates();this._cutLinesAtBoxNodeBorders();if(this.oGraph._bIsRtl){this._verticalMirror()}o()}.bind(this))};c.prototype._validateGraphDefinition=function(){var o=[];this.oGraph.getNodes().forEach(function(e){if(!e.getGroup()){o.push(e.getKey())}});if(o.length>0){return"Some nodes are missing group: "+o.join()}return null};c.prototype._preprocessGroupsAndNodes=function(){if(this.oGraph.getGroups().some(function(o){o._oFirstNode=null;o._oLastNode=null;o._bNestedSet=false;if(!o._oParentGroup){if(!this.oLeftColumn){this.oLeftColumn=o}else if(!this.oRightColumn){this.oRightColumn=o}else{return true}}return false}.bind(this))){return"There are too many columns, ie. groups without a parent group. Expected exactly 2."}if(!this.oRightColumn||!this.oLeftColumn){return"There are too few columns, ie. groups without a parent group. Expected exactly 2."}this.oGraph.getNodes().forEach(function(o){o._iStartingGroupCount=0;o._iEndingGroupCount=0})};c.prototype._validateLines=function(){var o,e;if(this.oGraph.getLines().some(function(t){o=t.getFromNode()._oGroup._oTopParentGroup;e=t.getToNode()._oGroup._oTopParentGroup;return!(o===this.oLeftColumn&&e===this.oRightColumn||e===this.oLeftColumn&&o===this.oRightColumn)}.bind(this))){return"For Two columns layout all lines have to go from one column to the other."}else{return null}};c.prototype._calcLanesProperties=function(){var o;this.aLanes=[];this.oGraph.getGroups().forEach(function(o){if(!o.getParentGroupKey()){this.aLanes.push(o.getKey())}}.bind(this));this.aLanes.sort();var e=this.aLanes.map(Number.prototype.valueOf,0);this.oGraph.getNodes().forEach(function(t){var i=t._oGroup,r=i._oTopParentGroup&&i._oTopParentGroup.getKey()||t.getGroup();o=this.aLanes.indexOf(r);t._iGroupIndex=i._iLaneIndex=o;if(i._iNestedLevel>e[o]){e[o]=i._iNestedLevel}}.bind(this));this.oGraph.getGroups().forEach(function(o){var e=o._oTopParentGroup&&o._oTopParentGroup.getKey()||o.getKey();o._iLaneIndex=this.aLanes.indexOf(e)}.bind(this));this.aLaneWidths=[];this.oGraph.getNodes().forEach(function(o){if(!this.aLaneWidths[o._iGroupIndex]||this.aLaneWidths[o._iGroupIndex]<o._iWidth){this.aLaneWidths[o._iGroupIndex]=o._iWidth}}.bind(this));this.aLaneWidths=this.aLaneWidths.map(function(o,e){var t=this.oGraph.mGroups[this.aLanes[e]],i=t.getMinWidth()||h;return Math.max(i,o)}.bind(this));this.aLaneGroupWidths=this.aLaneWidths.map(function(o,t){return o+e[t]*n*2});var t=this.oGraph.$("innerscroller").width();t=Math.max(this.aLaneGroupWidths[0]+this.aLaneGroupWidths[1]+p+l*2,t);this.aLaneCenters=[l+this.aLaneGroupWidths[0]/2+(this.oGraph._bIsRtl?30:0),t-this.aLaneGroupWidths[1]/2-l*1.5]};c.prototype._createNodesGrid=function(){var o=this.oGraph.getGroups(),e=0;var t=o.filter(function(o){return o._iNestedLevel===0});this.aGrid=this.aLanes.map(function(o){return[]});var i=function(o){o.aNodes.forEach(function(t){var i=t._oGroup._oCollapsedByParent,r=i||o;if(!o.getCollapsed()&&!i){this.aGrid[e].push(t)}else if(r.getCollapsed()){while(r._oCollapsedByParent){r=r._oCollapsedByParent}if(!r._bNestedSet){r._bNestedSet=true;this.aGrid[e].push(t)}}}.bind(this));o.aChildGroups.forEach(function(o){i(o)})}.bind(this);t.forEach(function(o,t){o._iTopGroupIndex=t;i(o);e++})};c.prototype._calcNodeEndingAndStartingPoints=function(){var o=function(o,e,t,i,r){var n=o._oParentGroup;while(n&&n._iNestedLevel>0){if(!n[t]||r){n[t]=e;if(!n._oCollapsedByParent&&!n.getCollapsed()){e[i]++}}else{return}n=n._oParentGroup}};var e=function(e){if(!e._oGroup._oLastNode){e._oGroup._oLastNode=e;if(!e._oGroup._oCollapsedByParent&&!e._oGroup.getCollapsed()){e._iEndingGroupCount++}o(e._oGroup,e,"_oLastNode","_iEndingGroupCount",false)}};var t=function(e){if(!e._oGroup._oFirstNode){e._oGroup._oFirstNode=e;if(!e._oGroup._oCollapsedByParent&&!e._oGroup.getCollapsed()){e._iStartingGroupCount++}o(e._oGroup,e,"_oFirstNode","_iStartingGroupCount",false)}};for(var i=0;i<this.aGrid.length;i++){var r=null;for(var n=0;n<this.aGrid[i].length;n++){var s=this.aGrid[i][n];if(s._oGroup!==r){t(s);r=s._oGroup}}r=null;for(var n=this.aGrid[i].length-1;n>=0;n--){var s=this.aGrid[i][n];if(s._oGroup!==r){e(s);r=s._oGroup}}}};c.prototype._setGroupCoordinates=function(){var o=this.aLanes.map(Number.prototype.valueOf,0);var e=function(o,e){var t=e._oGroup._oCollapsedByParent||e._oGroup.getCollapsed()?0:1,i=e._oGroup._oParentGroup;if(o===e._oGroup){return t}while(i){if(!i._oCollapsedByParent&&!i.getCollapsed()){t++}if(o===i){break}i=i._oParentGroup}return t};var t=function(o,e){var t=0,i=e._oGroup._oParentGroup;if(o===e._oGroup){return t}while(i){if(!i._oCollapsedByParent&&!i.getCollapsed()){t++}if(o===i){break}i=i._oParentGroup}return t};this.oGraph.getGroups().forEach(function(e){o[e._iLaneIndex]=e._iNestedLevel>o[e._iLaneIndex]?e._iNestedLevel:o[e._iLaneIndex]});this.oGraph.getGroups().forEach(function(i){if(i._iNestedLevel===0){i.setX(this.aLaneCenters[i._iLaneIndex]-this.aLaneWidths[i._iLaneIndex]);i.setY(0)}else if(i._oLastNode&&i._oFirstNode){i._iWidth=this.aLaneWidths[i._iLaneIndex]+(o[i._iLaneIndex]-i._iNestedLevel)*n*2+n*2;i.setX(this.aLaneCenters[i._iLaneIndex]-i._iWidth/2);var r=t(i,i._oLastNode),s=r*(n/2)+n/2,h=e(i,i._oFirstNode),p=h*u;var d=i._oFirstNode.getY()-p,l=i._oLastNode._oGroup.getCollapsed()||i._oLastNode._oGroup._oCollapsedByParent?a:i._oLastNode._iHeight;i.setY(d);i._iHeight=i.getCollapsed()?a:i._oLastNode.getY()+l-d+s}}.bind(this))};c.prototype._setNodesCoordinates=function(){this.aGrid.forEach(function(o){var e=d;o.forEach(function(o){var t=o._oGroup._oCollapsedByParent||o._oGroup;o.setX(this.aLaneCenters[o._iGroupIndex]-o._iWidth/2);e+=o._iStartingGroupCount*u;o.setY(e);e+=s/2;e+=o._iEndingGroupCount*n/2;e+=t.getCollapsed()?a:o._iHeight}.bind(this))}.bind(this))};c.prototype._setLinesCoordinates=function(){var o,e,t,i,r=[],n=[],s=[],a=function(o){var e;if(!o._oGroup){return null}e=o._oGroup;while(e&&e._isCollapsed()){if(!e._oParentGroup||!e._oParentGroup._isCollapsed()){return e}e=e._oParentGroup}return null},u=function(o){var e;if(o._oTopParentGroup===this.oLeftColumn){e=o.getX()+o._iWidth+2*o._getBorderSize()}else{e=o.getX()}return{x:e,y:o.getY()+o._iHeight/2}},h=function(o){var e,t,i;if(o.groupDelegate){o.anchors.forEach(function(e){o.groupDelegate.anchors.push({node:o,line:e.line,oppositeY:e.oppositeY});if(o.isLeftie){s.push(e.line)}});return}e=(o._iHeight-2*f)/(o.anchors.length-1);t=o.anchors.length===1?o.getCenterPosition().y:o.getY()+f;i=t;o.anchors.sort(function(o,e){return o.oppositeY-e.oppositeY}).forEach(function(t){var r=t.line,n=o.getCenterPosition().x;if(o===r.getFromNode()){r.setSource({x:n,y:i})}else if(o===r.getToNode()){r.setTarget({x:n,y:i})}i+=e;if(o.isLeftie){s.push(r)}})},p=function(o){var e=u.bind(this)(o),t=(o._iHeight-2*f)/(o.anchors.length-1),i=o.anchors.length===1?u.bind(this)(o).y:o.getY()+f,r=i;o.anchors.sort(function(o,e){return o.oppositeY-e.oppositeY}).forEach(function(o){var i=o.line;if(o.node===i.getFromNode()){i.setSource({x:e.x,y:r})}else if(o.node===i.getToNode()){i.setTarget({x:e.x,y:r})}r+=t})},d=function(){var o=_*(this.oRightColumn.getX()-(this.oLeftColumn.getX()+this.oLeftColumn._iWidth)),e=this.oGraph.getLines().length-1,t=o/e,i=t<g?t:g,a=(r[0].getCenterPosition().x+n[0].getCenterPosition().x)/2,u=a-e*i/2,h=u;s.forEach(function(o){o.addBend({x:h,y:o.getSource().getY()});o.addBend({x:h,y:o.getTarget().getY()});h+=i})}.bind(this);this.oGraph.getNodes().forEach(function(o){if(o._oGroup){if(o._oGroup._oTopParentGroup===this.oLeftColumn){o.isLeftie=true;r.push(o)}else if(o._oGroup._oTopParentGroup===this.oRightColumn){o.isLeftie=false;n.push(o)}}o.groupDelegate=a(o);o.anchors=[]}.bind(this));this.oGraph.getLines().forEach(function(r){o=r.getFromNode();e=r.getToNode();t=o.getCenterPosition();i=e.getCenterPosition();o.anchors.push({line:r,oppositeY:i.y});e.anchors.push({line:r,oppositeY:t.y});r.setSource({x:0,y:0});r.clearBends()});this.oGraph.getGroups().forEach(function(o){o.anchors=[]});r.sort(function(o,e){return o.getY()-e.getY()}).forEach(h);n.sort(function(o,e){return o.getY()-e.getY()}).forEach(h);this.oGraph.getGroups().sort(function(o,e){return o.getY()-e.getY()}).forEach(p.bind(this));d()};return c});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/networkgraph/util/Dijkstra",[],function(){"use strict";function e(e,t,i){this.oGraph=e;this.oSourceNode=t;this.oSettings=Object.assign({fnLineValue:function(){return 1},bIgnoreDirections:false,bIgnoreCollapsed:false},i);this._compute()}e.prototype._compute=function(){var e,t,i,o=[this.oSourceNode],n={},r={},s={},g=this.oSettings.fnLineValue,h=this.oSettings.bIgnoreDirections,u=this.oSettings.bIgnoreCollapsed;function l(e,t){for(var i=0;i<o.length;i++){if(t>r[o[i].getKey()]){o.splice(i,0,e);return}}o.push(e)}function f(t,i){var o=i?t.getFromNode():t.getToNode(),n=o.getKey(),h=r[e.getKey()]+g(t);if(h<r[n]){r[n]=h;s[n]={line:t,reverse:i};l(o,h)}}this.oGraph.getNodes().forEach(function(e){r[e.getKey()]=Number.MAX_VALUE});r[this.oSourceNode.getKey()]=0;while(o.length>0){e=o.shift();if(n[e.getKey()]){continue}if(u&&(e.isHidden()||e.getVisible()===false||e._isIgnored())){continue}n[e.getKey()]=true;t=e.getChildLines();for(i=0;i<t.length;i++){f(t[i],false)}if(h){t=e.getParentLines();for(i=0;i<t.length;i++){f(t[i],true)}}}this.mDist=r;this.mPath=s};e.prototype.getShortestPathTo=function(e){var t=this.mPath[e.getKey()],i=[],o,n;if(t){o=t.reverse?t.line.getFromNode():t.line.getToNode()}while(t&&o!==this.oSourceNode){i.push(t.line);n=t.reverse?t.line.getToNode():t.line.getFromNode();t=this.mPath[n.getKey()];if(t){o=t.reverse?t.line.getFromNode():t.line.getToNode()}}return i};return e},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/Circle",["sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/SimpleShape","sap/suite/ui/commons/statusindicator/SimpleShapeRenderer"],function(t,e,i,s){"use strict";var r=i.extend("sap.suite.ui.commons.statusindicator.Circle",{metadata:{library:"sap.suite.ui.commons",properties:{cx:{type:"float",defaultValue:0},cy:{type:"float",defaultValue:0},r:{type:"float",defaultValue:0}}},renderer:s});r.prototype._getSimpleShapeElement=function(t){var i=new e("circle");i.setId(this._buildIdString(t));i.setAttribute("cx",this.getCx());i.setAttribute("cy",this.getCy());i.setAttribute("r",this.getR());i.setAttribute("stroke-width",this.getStrokeWidth());i.setAttribute("stroke",this._getCssStrokeColor());return i};return r});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/CustomShape",["sap/ui/thirdparty/jquery","../library","sap/suite/ui/commons/statusindicator/ShapeGroup","sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/statusindicator/Path","sap/suite/ui/commons/statusindicator/Circle","sap/suite/ui/commons/statusindicator/Rectangle","sap/suite/ui/commons/util/HtmlElement","sap/base/Log","./CustomShapeRenderer"],function(e,t,i,r,a,o,s,n,p,l){"use strict";var u=t.statusindicator.FillingType;var h=r.extend("sap.suite.ui.commons.statusindicator.CustomShape",{metadata:{library:"sap.suite.ui.commons",properties:{x:{type:"int",defaultValue:0},y:{type:"int",defaultValue:0},width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},strokeColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"},strokeWidth:{type:"float",defaultValue:.25},definition:{type:"string",defaultValue:null}},defaultAggregation:"shapes",aggregations:{shapes:{type:"sap.suite.ui.commons.statusindicator.SimpleShape",multiple:true,defaultValue:null},fillingOptions:{type:"sap.suite.ui.commons.statusindicator.FillingOption",multiple:true,defaultValue:null}}}});h.prototype.init=function(){if(r.prototype.init){r.prototype.init.apply(this,arguments)}this._iDisplayedValue=0;this._initShapeState()};h.prototype.onBeforeRendering=function(){this._refreshInternalStructure()};h.prototype.onAfterRendering=function(){this._updateDom(this.getDisplayedValue())};h.prototype.addFillingOption=function(e){var t=typeof e.getOrder()==="undefined";if(t){p.fatal("The passed FillingOption has to have set its order property.");return this}var i=this.getFillingOptions().length>0&&this.getFillingOptions().filter(function(t){return t.getOrder()===e.getOrder()}).length>0;if(i){p.fatal("The property 'order' has to be unique within the FillingOptions aggregation, but option"+" with order: "+e.getOrder()+" is already inserted. No FillingOption added.");return this}return this.addAggregation("fillingOptions",e,true)};h.prototype._initShapeState=function(){this._aFillableSubShapes=[];this.oDefinition=[];this._sViewBox=null;this.destroyShapes()};h.prototype._refreshInternalStructure=function(){this._initShapeState();this._aFillableSubShapes.forEach(function(e){if(e.fillingOption){e.fillingOption.destroy()}e.shape.destroy()});if(!this.getDefinition()){if(!this.isA("sap.suite.ui.commons.statusindicator.LibraryShape")){p.fatal("Definition has to be specified.")}return}var t=e(this.getDefinition());this._sViewBox=t[0].getAttribute("viewBox");e.map(t.children(),this._preprocessNode.bind(this))};h.prototype._preprocessNode=function(t){var i=e(t),r=i.prop("tagName"),a=this;switch(r){case"g":e.map(i.children(),function(t){return a._preprocessLeafNode.call(a,e(t))});break;default:this._preprocessLeafNode(i)}};h.prototype._preprocessLeafNode=function(e){var t=e.prop("tagName");switch(t){case"path":this._preprocessPathNode(e);break;case"circle":this._preprocessCircleNode(e);break;case"rect":this._preprocessRectangleNode(e);break;case"defs":this._preprocessDefinitionsNode(e[0]);break;default:p.fatal("Unsupported node tag name ('"+t+"')")}};h.prototype._preprocessPathNode=function(e){var t=new a({d:e.attr("d")});this._prepareShape(t,e)};h.prototype._preprocessCircleNode=function(e){var t=new o({cx:Number(e.attr("cx")),cy:Number(e.attr("cy")),r:Number(e.attr("r"))});this._prepareShape(t,e)};h.prototype._preprocessRectangleNode=function(e){var t=new s({x:Number(e.attr("x")),y:Number(e.attr("y")),width:Number(e.attr("width")),height:Number(e.attr("height"))});this._prepareShape(t,e)};h.prototype._preprocessDefinitionsNode=function(e){var t=new n("defs");t.addChild(e.innerHTML);return t};h.prototype._setInitialValue=function(e){this._iDisplayedValue=e};h.prototype.getDisplayedValue=function(){return this._iDisplayedValue};h.prototype._prepareShape=function(e,t){e.setFillingAngle(this.getFillingAngle());e.setStrokeWidth(this.getStrokeWidth());e.setStrokeColor(this.getStrokeColor());this.addShape(e);e._injectAnimationPropertiesResolver(this._oAnimationPropertiesResolver);var i=t.attr("style");if(!i){e.setFillingDirection(this.getFillingDirection());e.setFillColor(this.getFillColor());e.setFillingType(this.getFillingType());var r=t.data("shape-id");var a={shape:e,fillingOption:r?this._getFillingOptionById(r):null};this._aFillableSubShapes.push(a);if(a.fillingOption){this._aFillableSubShapes.sort(function(e,t){var i=e.fillingOption;var r=t.fillingOption;if(!i){return-1}if(!r){return 1}return i.getOrder()-r.getOrder()})}}else{e.setFillingType(u.None);e._setStyle(i)}};h.prototype._updateDom=function(e,t){function i(e){var t=e.fillingOption;return t&&t.getWeight()!==0?t.getWeight():1}p.debug("Updating to "+e,null,this);if(this._aFillableSubShapes.length===0){p.info("Update of DOM skipped. No shape for update found");return}var r=this._aFillableSubShapes.reduce(function(e,t){return e+i(t)},0);try{var a=this;var o=t?e:this._oAnimationPropertiesResolver.getValue(this,e);this._aFillableSubShapes.forEach(function(s){var n=i(s);var l=n/r;var u;if(o===0){u=0}else if(o>=100*l){u=100}else{u=o/l}o-=u*l;if(!t){var h=s.shape.getRenderer();var d=a.getDisplayedFillColor(e);p.debug("Updating color to '"+d+"'",null,s.shape);h._updateDomColor(s.shape,d)}s.shape._updateDom(u,true)})}catch(e){p.fatal("Update of DOM failed. Reason: "+e.message);return}if(!t){this._oAnimationPropertiesResolver.propagateValueChange(this,e);this._oAnimationPropertiesResolver.propagateColorChange(this,e)}this._iDisplayedValue=e};h.prototype._getFillingOptionById=function(e){var t=null;this.getFillingOptions().some(function(i){if(i.getShapeId()===e){t=i;return true}return false});return t};h.prototype._getInternalViewBox=function(){return this._sViewBox};return h});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/CustomShapeRenderer",["../library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Renderer"],function(t,e,r){"use strict";var i=r.extend("sap.suite.ui.commons.statusindicator.CustomShapeRenderer");i.apiVersion=2;i.render=function(t,e){var r=this._getHtmlModel(e);r.getRenderer().render(t)};i._getHtmlModel=function(t){var r=new e("svg");r.addControlData(t);r.setAttribute("version","1.1");r.setAttribute("xlmns","http://www.w3.org/2000/svg");var i=t._getInternalViewBox();if(i){r.setAttribute("viewBox",i)}r.setAttribute("preserveAspectRatio",t._buildPreserveAspectRatioAttribute());r.setAttribute("x",t.getX());r.setAttribute("y",t.getY());r.setAttribute("width",t.getWidth());r.setAttribute("height",t.getHeight());t.getShapes().forEach(r.addChild.bind(r));return r};i._updateDomColor=function(t,e){t._aFillableSubShapes.forEach(function(t){var r=t.shape;var i=r.getRenderer();i._updateDomColor(r,e)})};return i},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/DiscreteThreshold",["sap/ui/core/Control"],function(e){"use strict";var t=e.extend("sap.suite.ui.commons.statusindicator.DiscreteThreshold",{metadata:{library:"sap.suite.ui.commons",properties:{value:{type:"int",defaultValue:0},ariaLabel:{type:"string",defaultValue:null}}}});return t});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/FillingOption",["sap/ui/core/Control","sap/base/Log"],function(t,i){"use strict";var e=t.extend("sap.suite.ui.commons.statusindicator.FillingOption",{metadata:{library:"sap.suite.ui.commons",properties:{shapeId:{type:"string",defaultValue:null},weight:{type:"int",defaultValue:1},order:{type:"int"}}}});e.prototype.setWeight=function(t){if(t<=0){i.fatal("An invalid weight is passed. Weight should be a positive integer. Given: "+t)}this.setProperty("weight",t)};return e});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/LibraryShape",["./CustomShape","./CustomShapeRenderer","./shapes/ShapeFactory"],function(e,t,a){"use strict";var r=e.extend("sap.suite.ui.commons.statusindicator.LibraryShape",{metadata:{properties:{shapeId:{type:"string",group:"Misc",defaultValue:null}},events:{afterShapeLoaded:{}}},renderer:t});r.prototype.setShapeId=function(e){e=this._getValidShapeId(e);this.setProperty("shapeId",e,true);(new a).getShapeById(e).then(function(e){this.setDefinition(e);this.fireAfterShapeLoaded()}.bind(this));return this};r.prototype._getValidShapeId=function(e){return e.replace(/[\\\.\/]/g,"")};return r});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/Path",["sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/SimpleShape","sap/suite/ui/commons/statusindicator/SimpleShapeRenderer"],function(t,e,s){"use strict";var i=e.extend("sap.suite.ui.commons.statusindicator.Path",{metadata:{library:"sap.suite.ui.commons",properties:{d:{type:"string",defaultValue:null}}},renderer:s});i.prototype._getSimpleShapeElement=function(e){var s=new t("path");s.setId(this._buildIdString(e));s.setAttribute("d",this.getD());s.setAttribute("stroke-width",this.getStrokeWidth());s.setAttribute("stroke",this._getCssStrokeColor());if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(s.addClass.bind(s))}return s};return i});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/PropertyThreshold",["sap/ui/core/Control","sap/suite/ui/commons/statusindicator/util/ThemingUtil"],function(t,o){"use strict";var s=t.extend("sap.suite.ui.commons.statusindicator.PropertyThreshold",{metadata:{library:"sap.suite.ui.commons",properties:{fillColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"},toValue:{type:"int",defaultValue:0},ariaLabel:{type:"string",defaultValue:null}}}});s.prototype._getCssFillColor=function(){if(!this._cssFillColor){this._cssFillColor=o.resolveColor(this.getFillColor())}return this._cssFillColor};return s});
sap.ui.predefine("sap/suite/ui/commons/statusindicator/Rectangle",["sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/SimpleShape","sap/suite/ui/commons/statusindicator/SimpleShapeRenderer"],function(t,e,i){"use strict";var s=e.extend("sap.suite.ui.commons.statusindicator.Rectangle",{metadata:{properties:{x:{type:"int",defaultValue:0},y:{type:"int",defaultValue:0},rx:{type:"int",defaultValue:0},ry:{type:"int",defaultValue:0},width:{type:"int",defaultValue:0},height:{type:"int",defaultValue:0}}},renderer:i});s.prototype._getSimpleShapeElement=function(e){var i=new t("rect");i.setId(this._buildIdString(e));i.setAttribute("x",this.getX());i.setAttribute("y",this.getY());i.setAttribute("width",this.getWidth());i.setAttribute("height",this.getHeight());i.setAttribute("rx",this.getRx());i.setAttribute("ry",this.getRy());i.setAttribute("stroke-width",this.getStrokeWidth());i.setAttribute("stroke",this._getCssStrokeColor());return i};return s});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/Shape",["sap/ui/thirdparty/jquery","../library","sap/ui/core/Control","sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/util/ThemingUtil","sap/base/Log"],function(t,i,e,n,r,o){"use strict";var l=i.statusindicator.FillingType;var a=i.statusindicator.FillingDirectionType;var s=i.statusindicator.VerticalAlignmentType;var u=i.statusindicator.HorizontalAlignmentType;var g=e.extend("sap.suite.ui.commons.statusindicator.Shape",{metadata:{abstract:true,library:"sap.suite.ui.commons",properties:{fullAnimationDuration:{type:"int",defaultValue:0},fillColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"},animationOnStartup:{type:"boolean",defaultValue:false},animationOnChange:{type:"boolean",defaultValue:true},animationOnStartupDelay:{type:"int",defaultValue:0},fillingDirection:{type:"sap.suite.ui.commons.statusindicator.FillingDirectionType",defaultValue:a.Up},fillingType:{type:"sap.suite.ui.commons.statusindicator.FillingType",defaultValue:l.Linear},fillingAngle:{type:"int",defaultValue:undefined},verticalAlignment:{type:"sap.suite.ui.commons.statusindicator.VerticalAlignmentType",defaultValue:s.Middle},horizontalAlignment:{type:"sap.suite.ui.commons.statusindicator.HorizontalAlignmentType",defaultValue:u.Middle}}},renderer:null});g.prototype.GRADIENT_ID="gradient";g.prototype.STOP_ID="stop";g.prototype.getDisplayedValue=function(){o.fatal("Must be overridden!")};g.prototype._setInitialValue=function(t){o.fatal("Must be overridden!")};g.prototype._updateDom=function(t,i){o.fatal("Must be overridden!")};g.prototype.init=function(){if(e.prototype.init){e.prototype.init.apply(this,arguments)}this._oAnimationPropertiesResolver=null};g.prototype.onBeforeRendering=function(){if(e.prototype.onBeforeRendering){e.prototype.onBeforeRendering.apply(this,arguments)}this._clearBoundingBox()};g.prototype._getCssFillColor=function(){return r.resolveColor(this.getFillColor())};g.prototype._resolveFillColor=function(){return this._oAnimationPropertiesResolver.getColor(this,this.getDisplayedValue())};g.prototype._injectAnimationPropertiesResolver=function(t){this._oAnimationPropertiesResolver=t};g.prototype.getDisplayedFillColor=function(t){return this._oAnimationPropertiesResolver.getColor(this,t)};g.prototype.getFullAnimationDuration=function(){return 250};g.prototype._buildPreserveAspectRatioAttribute=function(){var t="x";switch(this.getHorizontalAlignment()){case u.Left:t+="Min";break;case u.Middle:t+="Mid";break;case u.Right:t+="Max";break}t+="Y";switch(this.getVerticalAlignment()){case s.Top:t+="Min";break;case s.Middle:t+="Mid";break;case s.Bottom:t+="Max";break}t+=" meet";return t};g.prototype._getGradientElement=function(t){var i=new n(this.getFillingType()===l.Linear?"linearGradient":"radialGradient");i.setId(this._buildIdString(this.getId(),this.GRADIENT_ID));if(this.getFillingType()===l.Linear){var e=this.computeLinearFillingAngle();i.setAttribute("x1",e===90?1:0);i.setAttribute("y1",e===0?1:0);i.setAttribute("x2",e===270?1:0);i.setAttribute("y2",e===180?1:0)}var r=this._getDisplayedGradientOffset(t);var o=new n(this.STOP_ID);o.setAttribute("offset",r);o.setAttribute("stop-color","white");i.addChild(o);var a=new n(this.STOP_ID);a.setAttribute("offset",r);a.setAttribute("stop-color","transparent");i.addChild(a);return i};g.prototype.getPolygonElement=function(t){var i=new n("polygon");i.setId(this._buildIdString(this.getId(),"polygon"));i.setAttribute("fill","white");return i};g.prototype.computeLinearFillingAngle=function(){if(this.getFillingAngle()!==undefined){return this._getNormalizedFillingAngle()}switch(this.getFillingDirection()){case a.Up:return 0;case a.Down:return 180;case a.Left:return 90;case a.Right:return 270;default:o.error("Unknown FillingDirection '"+this.getFillingDirection()+"'");return 0}};g.prototype._useGradientForAnimation=function(){var t=this._getNormalizedFillingAngle();var i=this.getFillingType();return i===l.Radial||i===l.Linear&&(t===undefined||[0,90,180,270].indexOf(t)>-1)};g.prototype._getPolygonPoints=function(t){var i;switch(this.getFillingType()){case l.Linear:i=this._getPolygonPointsForLinearFilling(t);break;case l.Circular:i=this._getPolygonPointsForCircularFilling(t);break;default:o.error("Unknown FillingType '"+this.getFillingType()+"' given.");i=this._getPolygonPointsForLinearFilling(t)}i=i.map(function(t){t.x=Number(t.x.toFixed(3));t.y=Number(t.y.toFixed(3));return t});return i};g.prototype._getPolygonPointsForLinearFilling=function(t){var i=180-this._getNormalizedFillingAngle();var e=Math.tan(i*Math.PI/180);var n=this._getBoundingPoints();var r=n.start;var o=n.end;var l=r.y-e*r.x;var a=o.y-e*o.x;var s=l+(a-l)/100*t;var u=r.x;var g=u*e+s;var p=r.y;var d=(p-s)/e;var h=[r,{x:u,y:g},{x:d,y:p}];return h};g.prototype._getPolygonPointsForCircularFilling=function(t){var i=this,e=3.6*t,n=this._getBoundingBox(),r=[];var o,l,s;var u=p(n.x+n.width/2,n.y);var g=p(n.x+n.width/2,n.y+n.height/2);function d(t){var e=Object.assign({},t);if(i.getFillingDirection()===a.CounterClockwise){var n=t.x-g.x;e.x=g.x-n}return e}function h(t,i,e){var n=Math.tan((i-t)*Math.PI/180);return n*e/2}r.push(u);if(0<e&&e<45){o=h(e,0,n.height);s=p(u.x-o,u.y);r.push(d(s))}if(45<=e){r.push(d(p(n.x+n.width,n.y)))}if(45<e&&e<135){l=h(e,90,n.width);s=p(n.x+n.width,n.y+n.height/2-l);r.push(d(s))}if(135<=e){r.push(d(p(n.x+n.width,n.y+n.height)))}if(135<e&&e<225){o=h(e,180,n.height);s=p(n.x+n.width/2+o,n.y+n.height);r.push(d(s))}if(225<=e){r.push(d(p(n.x,n.y+n.height)))}if(225<e&&e<315){l=h(e,270,n.width);s=p(n.x,n.y+n.height/2+l);r.push(d(s))}if(315<=e){r.push(d(p(n.x,n.y)))}if(315<e&&e<=360){o=h(e,360,n.height);s=p(n.x+n.width/2-o,n.y);r.push(d(s))}r.push(g);return r};g.prototype._isFillingAngleInFirstQuadrant=function(){var t=this._getNormalizedFillingAngle();return 0<t&&t<90};g.prototype._isFillingAngleInSecondQuadrant=function(){var t=this._getNormalizedFillingAngle();return 90<t&&t<180};g.prototype._isFillingAngleInThirdQuadrant=function(){var t=this._getNormalizedFillingAngle();return 180<t&&t<270};g.prototype._isFillingAngleInForthQuadrant=function(){var t=this._getNormalizedFillingAngle();return 270<t&&t<360};g.prototype._getBoundingPoints=function(){var t=this._getBoundingBox();var i=t.x+t.width;var e=t.y+t.height;var n=t.x;var r=t.y;if(this._isFillingAngleInFirstQuadrant()){}else if(this._isFillingAngleInSecondQuadrant()){i=t.x+t.width;e=t.y;n=t.x;r=t.y+t.height}else if(this._isFillingAngleInThirdQuadrant()){i=t.x;e=t.y;n=t.x+t.width;r=t.y+t.height}else if(this._isFillingAngleInForthQuadrant()){i=t.x;e=t.y+t.height;n=t.x+t.width;r=t.y}else{o.error("Invalid call of _getBoundingPoints. FillingAngle '"+this.getFillingAngle()+"' is not in any quadrant")}return{start:p(i,e),end:p(n,r)}};g.prototype._getBoundingBox=function(){if(!this._oBoundingBox){this._oBoundingBox=this.$()[0].getBBox()}return this._oBoundingBox};g.prototype._clearBoundingBox=function(){this._oBoundingBox=null};g.prototype._getNormalizedFillingAngle=function(){if(this.getFillingAngle()===undefined){return this.getFillingAngle()}var t=this.getFillingAngle()%360;if(t<0){t+=360}return t};g.prototype.isFillable=function(){return this.getFillingType()!==l.None};g.prototype._getDisplayedGradientOffset=function(t){if(this.isFillable()){var i=t/100;return i}else{return 1}};g.prototype._getMaskElement=function(t){var i=new n("mask");i.setId(t);if(this._useGradientForAnimation()){var e=this._getSimpleShapeElement(this._buildIdString(this.getId(),"mask-shape"));e.setAttribute("stroke-width",0);e.setAttribute("stroke","white");e.setAttribute("fill",this._buildSvgUrlString(this.getId(),this.GRADIENT_ID));i.addChild(e)}else{i.addChild(this.getPolygonElement(this._iDisplayedValue))}return i};g.prototype._buildSvgUrlString=function(){return"url(#"+this._buildIdString.apply(this,arguments)+")"};g.prototype._buildIdString=function(){var i=t.makeArray(arguments).join("-");return i};function p(t,i){return{x:t,y:i}}return g});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/ShapeGroup",["sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Configuration","sap/suite/ui/commons/statusindicator/util/ProgressHandler","sap/base/Log"],function(e,t,i,r,a){"use strict";var o=e.extend("sap.suite.ui.commons.statusindicator.ShapeGroup",{metadata:{library:"sap.suite.ui.commons",properties:{weight:{type:"int",defaultValue:10}},defaultAggregation:"shapes",aggregations:{shapes:{type:"sap.suite.ui.commons.statusindicator.Shape",multiple:true}}}});o.prototype.init=function(){this._iTargetValue=0;this._oAnimationPropertiesResolver=null;this._iLastDirectValueUpdate=0};o.prototype.discreteThresholdsChangeHandler=function(e){var t=this._oAnimationPropertiesResolver._getGroupValue(this,e);if(t!==this._iLastDirectValueUpdate){this.getShapes().forEach(function(e){e._updateDom(t,true)});this._iLastDirectValueUpdate=t}};o.prototype.propertyThresholdsChangeHandler=function(e){this.getShapes().forEach(function(t){if(t.getDisplayedValue()!==0){t.getRenderer()._updateDomColor(t,e)}})};o.prototype._injectAnimationPropertiesResolver=function(e){this._oAnimationPropertiesResolver=e;this._oAnimationPropertiesResolver.addDiscreteThresholdChange(this.discreteThresholdsChangeHandler.bind(this));this._oAnimationPropertiesResolver.addPropertyThresholdChange(this.propertyThresholdsChangeHandler.bind(this));this.getShapes().forEach(function(t){t._injectAnimationPropertiesResolver(e)})};o.prototype.addShape=function(e){this.addAggregation("shapes",e,true);e._injectAnimationPropertiesResolver(this._oAnimationPropertiesResolver);return this};o.prototype._setValue=function(e,t){var i=this;t=t||false;this._iTargetValue=e;if(!this._isAnimationAllowed()||t){this.getShapes().forEach(function(e){e._updateDom(i._iTargetValue)});return Promise.resolve()}this.getShapes().forEach(function(e){if(!e.getAnimationOnChange()){e._updateDom(i._iTargetValue)}});if(this.oCurrentProgressHandler&&this.oCurrentProgressHandler.isInProgress()){this.oCurrentProgressHandler.cancel()}this.oCurrentProgressHandler=new r(function(e){var t=performance.now();i._animationStep(t,e,t)});return this.oCurrentProgressHandler.start()};o.prototype._animationStep=function(e,t,i){a.debug("AnimationStep at time: "+i.toString(10),null,this);i=Math.max(i,e);if(t.isCanceled()){t.stop({cancelled:true});return}var r=true;var o=this._iTargetValue;this.getShapes().forEach(function(t){var a=t.getDisplayedValue();if(a===o){return}var s=e+t.getFullAnimationDuration()*Math.abs(o-a)/100;var n=o;if(i<s){var u=o-a;var p=s-e;var h=(i-e)/p;n=u*h+a;r=false}t._updateDom(n)});if(r){t.finish()}else{window.requestAnimationFrame(this._animationStep.bind(this,i,t))}};o.prototype._showsFullProgress=function(){return!this.getShapes().some(function(e){return e.getDisplayedValue()!==100})};o.prototype._setInitialValue=function(e){this._iTargetValue=e;this._iLastDirectValueUpdate=e;this.getShapes().forEach(function(t){t._setInitialValue(e)})};o.prototype._isAnimationAllowed=function(){var e=t.getConfiguration();var r=e.getAnimationMode();return r!==i.AnimationMode.none};return o});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/SimpleShape",["../library","sap/ui/core/Control","sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/statusindicator/util/ThemingUtil","sap/base/Log","./SimpleShapeRenderer"],function(e,t,i,o,r,s){"use strict";var a=i.extend("sap.suite.ui.commons.statusindicator.SimpleShape",{metadata:{abstract:true,library:"sap.suite.ui.commons",properties:{strokeWidth:{type:"float",defaultValue:.25},strokeColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"}}}});a.prototype._getSimpleShapeElement=function(){r.fatal("Must be overriden!")};a.prototype.init=function(){if(i.prototype.init){i.prototype.init.apply(this,arguments)}this._iDisplayedValue=0;this._sViewBox=null};a.prototype.onBeforeRendering=function(){if(i.prototype.onBeforeRendering){i.prototype.onBeforeRendering.apply(this,arguments)}this.getRenderer()._clearDomReferences(this)};a.prototype._updateDom=function(e,t){r.debug("Updating to "+e,null,this);var i=this.getRenderer();if(!t){var o=this.getDisplayedFillColor(e);i._updateDomColor(this,o);this._oAnimationPropertiesResolver.propagateColorChange(this,e)}var s=t?e:this._oAnimationPropertiesResolver.getValue(this,e);if(this._useGradientForAnimation()){i._updateDomGradient(this,s)}else{i._updateDomPolygon(this,s)}if(!t){this._oAnimationPropertiesResolver.propagateValueChange(this,e);this._iDisplayedValue=e}};a.prototype.getDisplayedValue=function(){return this._iDisplayedValue};a.prototype._setInitialValue=function(e){this._iDisplayedValue=e};a.prototype._setStyle=function(e){this._sStyleAttribute=e};a.prototype._setInternalViewBox=function(e){this._sViewBox=e};a.prototype._getInternalViewBox=function(){return this._sViewBox};a.prototype._getCssStrokeColor=function(){return o.resolveColor(this.getStrokeColor())};return a});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/SimpleShapeRenderer",["../library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Renderer"],function(e,t,i){"use strict";var r=e.statusindicator.FillingType;var n=i.extend("sap.suite.ui.commons.statusindicator.SimpleShapeRenderer");n.apiVersion=2;n.render=function(e,t){var i=this._getHtmlModel(t);i.getRenderer().render(e)};n._getHtmlModel=function(e){var i=e._buildIdString(e.getId(),"mask");var n=new t("svg");n.setAttribute("xlmns","http://www.w3.org/2000/svg");var o=e._getInternalViewBox();if(o){n.setAttribute("viewBox",o)}n.setAttribute("preserveAspectRatio",e._buildPreserveAspectRatioAttribute());n.setAttribute("overflow","visible");n.addControlData(e);var s=new t("defs");if(e.getFillingType()!==r.None){if(e._useGradientForAnimation()){s.addChild(e._getGradientElement(e._iDisplayedValue))}var l=e._getMaskElement(i);s.addChild(l);n.addChild(s)}var a=e._buildIdString(e.getId(),"shape");var d=e._getSimpleShapeElement(a);d.setAttribute("fill",e._resolveFillColor());d.setAttribute("mask",e._buildSvgUrlString(i));if(e._sStyleAttribute){d.setAttribute("style",e._sStyleAttribute)}d.setAttribute("stroke-width",0);n.addChild(d);var u=e._getSimpleShapeElement(e._buildIdString(a,"border"));u.setAttribute("fill","transparent");n.addChild(u);return n};n._updateDomColor=function(e,t){e.$("shape").attr("fill",t)};n._updateDomGradient=function(e,t){if(!e.$stopNodes){e.$stopNodes=e.$(e.GRADIENT_ID).find(e.STOP_ID)}e.$stopNodes.attr("offset",e._getDisplayedGradientOffset(t))};n._updateDomPolygon=function(e,t){if(!e.$polygon){e.$polygon=e.$("polygon")}var i=e._getPolygonPoints(t).reduce(function(e,t){return e+t.x+","+t.y+" "},"");e.$polygon.attr("points",i)};n._clearDomReferences=function(e){e.$polygon=null;e.$stopNodes=null};return n},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/StatusIndicator",["../library","sap/m/library","sap/ui/core/Control","sap/ui/core/Core","sap/suite/ui/commons/statusindicator/util/AnimationPropertiesResolver","sap/suite/ui/commons/statusindicator/util/ThemingUtil","sap/m/Text","sap/base/Log","./StatusIndicatorRenderer"],function(e,t,r,o,s,i,a,u,n){"use strict";var l=e.statusindicator.SizeType;var h=e.statusindicator.LabelPositionType;var p=t.ValueColor;var d=r.extend("sap.suite.ui.commons.statusindicator.StatusIndicator",{metadata:{library:"sap.suite.ui.commons",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension"},height:{type:"sap.ui.core.CSSSize",group:"Dimension"},value:{type:"int",defaultValue:0},viewBox:{type:"string",defaultValue:null},ariaLabel:{type:"string",defaultValue:null},size:{type:"sap.suite.ui.commons.statusindicator.SizeType",defaultValue:l.None},labelPosition:{type:"sap.suite.ui.commons.statusindicator.LabelPositionType",defaultValue:h.Left},showLabel:{type:"boolean",defaultValue:false}},defaultAggregation:"groups",aggregations:{groups:{type:"sap.suite.ui.commons.statusindicator.ShapeGroup",multiple:true},propertyThresholds:{type:"sap.suite.ui.commons.statusindicator.PropertyThreshold",multiple:true},discreteThresholds:{type:"sap.suite.ui.commons.statusindicator.DiscreteThreshold",multiple:true},label:{type:"sap.m.Text",multiple:false}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{press:{}}}});d.prototype.init=function(){if(r.prototype.init){r.prototype.init.apply(this,arguments)}this._sortedPropertyThresholds=[];this._sortedDiscreteThresholds=[];this._bStarted=false;this._oCurrentAnimationPromise=null;this._oAnimationPropertiesResolver=new s(this);this._oDefaultLabel=null;if(!sap.ui.getCore().isInitialized()){sap.ui.getCore().attachInit(this._handleCoreInitialized.bind(this))}else{this._handleCoreInitialized()}};d.prototype._handleCoreInitialized=function(){sap.ui.getCore().attachThemeChanged(this._handleThemeApplied,this)};d.prototype._handleThemeApplied=function(){this.invalidate()};d.prototype._internalIds=Object.freeze({svgNodeId:"svg"});d.prototype.getLabel=function(){var e=this.getAggregation("label");if(e!==null){return e}if(this._oDefaultLabel!==null){return this._oDefaultLabel}this._oDefaultLabel=new a(this.getId()+"-label");this.addDependent(this._oDefaultLabel);return this._oDefaultLabel};d.prototype.addPropertyThreshold=function(e){this.addAggregation("propertyThresholds",e,true);if(this._sortedPropertyThresholds.filter(function(t){return t.getToValue()===e.getToValue()}).length>0){u.fatal("There are two or more property thresholds with the same toValue in thresholds "+"aggregation. The last threshold from them has the highest priority")}this._sortedPropertyThresholds.push(e);this._sortedPropertyThresholds.sort(function(e,t){return e.getToValue()-t.getToValue()});return this};d.prototype.addDiscreteThreshold=function(e){this.addAggregation("discreteThresholds",e,true);if(this._sortedDiscreteThresholds.filter(function(t){return t.getValue()===e.getValue()}).length>0){u.fatal("There are two or more discrete thresholds with the same value in thresholds "+"aggregation. The last threshold from them has the highest priority")}this._sortedDiscreteThresholds.push(e);this._sortedDiscreteThresholds.sort(function(e,t){return e.getValue()-t.getValue()});return this};d.prototype._discreteThresholdsEnabled=function(){return this._sortedDiscreteThresholds.length>0};d.prototype._getDiscreteThresholdForValue=function(e){var t=null;this._sortedDiscreteThresholds.every(function(r){if(e>=r.getValue()){t=r;return true}return false});return t};d.prototype._propertyThresholdsEnabled=function(){return this._sortedPropertyThresholds.length>0};d.prototype._getPropertyThresholdForValue=function(e){var t=null;this._sortedPropertyThresholds.some(function(r){if(e<=r.getToValue()){t=r;return true}return false});return t};d.prototype._getFullId=function(e){return this.getId()+"-"+e};d.prototype.onBeforeRendering=function(){var e=this;this.getGroups().forEach(function(t){t._injectAnimationPropertiesResolver(e._oAnimationPropertiesResolver)})};d.prototype.onAfterRendering=function(){this._setValueToLabel(this.getValue());this._start()};d.prototype._start=function(){this._bStarted=true;this._propagateValueToGroups()};d.prototype._shouldInvertGroupUpdateOrder=function(e){var t;e.some(function(e,r){t=r;return e.newValue!==100});var r;this.getGroups().some(function(e,t){r=t;return!e._showsFullProgress()});return t<r};d.prototype._propagateValueToGroups=function(){var e=this.getSize()===l.Small;var t=this._computeGroupValueDistribution();var r=this._shouldInvertGroupUpdateOrder(t);if(r){t=t.reverse()}this._updateAccessibilityDOM();this._oCurrentAnimationPromise=t.reduce(function(t,r){return t.then(function(t){if(t&&t.cancelled){u.debug("Group animation cancelled.");return t}else{return r.group._setValue(r.newValue,e)}})},Promise.resolve());return this._oCurrentAnimationPromise};d.prototype._computeGroupValueDistribution=function(){var e=this.getValue();var t=this._getTotalWeight();return this.getGroups().map(function(r){var o=r.getWeight()/t;var s;if(e===0){s=0}else if(e>=100*o){s=100}else{s=e/o}e-=s*o;return{group:r,newValue:Number(s.toFixed(3))}})};d.prototype.setValue=function(e){e=Math.round(e);if(e>100){e=100}if(e<0){e=0}this.setProperty("value",e,true);this._setValueToLabel(e);if(this._bStarted){this._propagateValueToGroups()}return this};d.prototype._setValueToLabel=function(e){var t=this.getLabel();var r;t.setText(Math.floor(e)+"%");r=i.resolveColor(p.Neutral);if(this._propertyThresholdsEnabled()){var o=this._getPropertyThresholdForValue(e);if(o){r=o._getCssFillColor()}}var s=t.$();if(s){s.css("color",r)}};d.prototype._getTotalWeight=function(){return this.getGroups().reduce(function(e,t){return e+t.getWeight()},0)};d.prototype.ontap=d.prototype.firePress;d.prototype.onsapenter=d.prototype.firePress;d.prototype.onsapspace=d.prototype.firePress;d.prototype._getGroupShapes=function(){return this.getGroups().reduce(function(e,t){return e.concat(t.getShapes())},[])};d.prototype._updateAccessibilityDOM=function(){var e=this.getValue();this.$().attr("aria-valuenow",e);this.$().attr("aria-valuetext",this._createValueTextMessage(e))};d.prototype._createValueTextMessage=function(e){var t=null;var r=null;var o=null;var s=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");if(this._discreteThresholdsEnabled()){var i=this._getDiscreteThresholdForValue(e);if(i){t=i.getAriaLabel();r=true}else{t=this._sortedDiscreteThresholds[0].getAriaLabel();r=false}}if(this._propertyThresholdsEnabled()){var a=this._getPropertyThresholdForValue(e);if(a){o=a.getAriaLabel()}}var u;if(t){if(o){if(r){u=s.getText("STATUS_INDICATOR_VALUE_ABOVE_THRESHOLD_COLOR",[e,t,o])}else{u=s.getText("STATUS_INDICATOR_VALUE_BELOW_THRESHOLD_COLOR",[e,t,o])}}else{if(r){u=s.getText("STATUS_INDICATOR_VALUE_ABOVE_THRESHOLD",[e,t])}else{u=s.getText("STATUS_INDICATOR_VALUE_BELOW_THRESHOLD",[e,t])}}}else if(o){u=s.getText("STATUS_INDICATOR_VALUE_COLOR",[e,o])}else{u=s.getText("STATUS_INDICATOR_VALUE",[e])}return u};return d});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/StatusIndicatorRenderer",["../library","sap/ui/core/library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Renderer","sap/base/Log"],function(t,e,a,i,s){"use strict";var r=t.statusindicator.SizeType;var o=t.statusindicator.LabelPositionType;var n=e.TextAlign;var d=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");function u(t,e){var a="";e=typeof e==="string"?e:"";switch(t.getSize()){case r.Small:a="sapSuiteUiCommonsStatusIndicatorSmall";break;case r.Medium:a="sapSuiteUiCommonsStatusIndicatorMedium";break;case r.Large:a="sapSuiteUiCommonsStatusIndicatorLarge";break;case r.ExtraLarge:a="sapSuiteUiCommonsStatusIndicatorExtraLarge";break;case r.None:break;default:s.error("Unknown size. Expecting size defined in sap.suite.ui.commons.statusindicator.SizeType,"+" but '"+t.getSize()+"' given.");a="sapSuiteUiCommonsStatusIndicatorSmall"}if(a){return a+e}else{return""}}function l(t){var e=t.getLabelPosition();var a=t.getSize();return"sapSuiteUiCommonsStatusIndicator"+a+e+"Label"}var S=i.extend("sap.suite.ui.commons.StatusIndicatorRenderer");S.apiVersion=2;S.render=function(t,e){var a=this._getHtmlModel(e);a.getRenderer().render(t)};S._getHtmlModel=function(t){var e=t.getLabelPosition();var i=e===o.Left||e===o.Right,s=e===o.Left||e===o.Top;var r=new a("div");r.addControlData(t);r.addClass("sapSuiteUiCommonsStatusIndicator");r.setAttribute("role","progressbar");r.setAttribute("aria-roledescription",d.getText("STATUS_INDICATOR_ARIA_ROLE_DESCRIPTION"));r.setAttribute("aria-readonly",true);var S=t.getAriaLabel();r.setAttribute("aria-label",S?S:d.getText("STATUS_INDICATOR_ARIA_LABEL"),true);var g=t.getAriaLabelledBy();if(g&&g.length>0){r.setAttribute("aria-labelledby",g.join(" "),true)}var m=t.getAriaDescribedBy();if(m&&m.length>0){r.setAttribute("aria-describedby",m.join(" "),true)}r.setAttribute("tabindex","0");r.setAttribute("aria-valuemin",0);r.setAttribute("aria-valuemax",100);if(i){r.addClass("sapSuiteUiCommonsStatusIndicatorHorizontal")}else{r.addClass("sapSuiteUiCommonsStatusIndicatorVertical")}if(t.getShowLabel()){var c=new a("div");if(s){c.addClass("sapSuiteUiCommonsStatusIndicatorLabelBeforeSvg")}else{c.addClass("sapSuiteUiCommonsStatusIndicatorLabelAfterSvg")}var b=t.getLabel();b.addStyleClass("sapSuiteUiCommonsStatusIndicatorLabel");b.addStyleClass(u(t,"Label"));b.addStyleClass(l(t));b.setTextAlign(i?n.Left:n.Center);c.addChild(b);r.addChild(c)}var p=new a("div");p.setAttribute("focusable",false);p.addClass("sapSuiteUiCommonsStatusIndicatorSvg");p.addClass(u(t,"Svg"));p.addStyle("width",t.getWidth());p.addStyle("height",t.getHeight());p.addChild(this._getSvgElement(t));r.addChild(p);return r};S._getSvgElement=function(t){var e=new a("svg");e.setId(t._getFullId(t._internalIds.svgNodeId));e.setAttribute("version","1.1");e.setAttribute("xlmns","http://www.w3.org/2000/svg");e.setAttribute("preserveAspectRatio","xMidYMid meet");e.addStyle("width","100%");e.addStyle("height","100%");e.setAttribute("focusable",false);if(t.getViewBox()){e.setAttribute("viewBox",t.getViewBox())}t._getGroupShapes().forEach(function(t){e.addChild(t)});return e};return S},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/statusindicator/shapes/ShapeFactory",["sap/ui/base/Object","sap/ui/thirdparty/jquery"],function(e,t){"use strict";var a={};var s=e.extend("sap.suite.ui.commons.statusindicator.shapes.ShapeFactory");s.prototype.getShapeById=function(e){var a=this._getLoadedShapes(),s=a[e]||null;if(!s){return new Promise(function(s,o){t.ajax({url:sap.ui.require.toUrl("sap/suite/ui/commons/statusindicator")+"/shapes/"+e+".svg",dataType:"text"}).done(function(t){a[e]=t;s(t)}).fail(function(e){o(e)})})}return Promise.resolve(s)};s.prototype._getLoadedShapes=function(){return a};s.prototype._removeAllLoadedShapes=function(){a={}};return s});
sap.ui.predefine("sap/suite/ui/commons/statusindicator/util/AnimationPropertiesResolver",["sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/statusindicator/ShapeGroup","sap/suite/ui/commons/statusindicator/CustomShape","sap/base/Log"],function(t,e,r,a){"use strict";var o=function(t){this._oStatusIndicator=t;this.aOnDiscreteThresholdChange=[];this.aOnPropertyThresholdChange=[]};o.prototype.addDiscreteThresholdChange=function(t){this.aOnDiscreteThresholdChange.push(t)};o.prototype.addPropertyThresholdChange=function(t){this.aOnPropertyThresholdChange.push(t)};o.prototype.getValue=function(t,r){var o=t.getParent();if(!o instanceof e){a.fatal("Shape should be always direct child of ShapeGroup.");return r}if(!this._oStatusIndicator._discreteThresholdsEnabled()){return r}return this._getGroupValue(o,this._getCappedValue(o,r))};o.prototype._getCappedValue=function(t,e){var r=this._getStatusIndicatorValue(t,e);var a=this._oStatusIndicator._getDiscreteThresholdForValue(r);return a?a.getValue():0};o.prototype.propagateValueChange=function(t,e){if(!this._oStatusIndicator._discreteThresholdsEnabled()){return}var r=t.getParent();var a=this._getCappedValue(r,t.getDisplayedValue());var o=this._getCappedValue(r,e);if(a!==o){this.aOnDiscreteThresholdChange.forEach(function(t){t(o)})}};o.prototype.getColor=function(t,e){var a=t.getParent();if(a instanceof r){e=a.getDisplayedValue();a=a.getParent()}var o=this._getStatusIndicatorSliderValue();var i=t._getCssFillColor();if(this._oStatusIndicator._propertyThresholdsEnabled()){var s=this._oStatusIndicator._getPropertyThresholdForValue(o);if(s){i=s._getCssFillColor()}}return i};o.prototype.propagateColorChange=function(t,e){if(!this._oStatusIndicator._propertyThresholdsEnabled()){return}var r=t.getParent();var a=this._getPropertyThreshold(r,e);var o=this._getPropertyThreshold(r,t.getDisplayedValue());if(a!==o){this.aOnPropertyThresholdChange.forEach(function(t){t(a._getCssFillColor())})}};o.prototype._getPropertyThreshold=function(t,e){var r=this._getStatusIndicatorValue(t,e);return this._oStatusIndicator._getPropertyThresholdForValue(r)};o.prototype._getStatusIndicatorValue=function(t,e){var r=this;var a=this._oStatusIndicator.getGroups();var o=0;a.some(function(a){var i=a.getWeight()/r._getTotalWeight();if(a!==t){var s=100*i;o+=s;return false}var n=e*i;o+=n;return true});return Number(o.toPrecision(3))};o.prototype._getStatusIndicatorSliderValue=function(){var t=0;if(this._oStatusIndicator){t=this._oStatusIndicator.getValue()}return t};o.prototype._getGroupValue=function(t,e){var r=this._oStatusIndicator.getGroups();var a=this._getTotalWeight();var o=0;r.some(function(r){var i=r.getWeight()/a;var s;if(e===0){s=0}else if(e>=100*i){s=100}else{s=e/i}e-=s*i;if(t!==r){return false}o=s;return true});return o};o.prototype._getTotalWeight=function(){return this._oStatusIndicator.getGroups().reduce(function(t,e){return t+e.getWeight()},0)};return o});
sap.ui.predefine("sap/suite/ui/commons/statusindicator/util/ProgressHandler",[],function(){"use strict";var s=function(s){var e=this;this._fnResolveCallback=null;this._oPromise=null;this._bInProgress=false;this._fnProgress=s;this._oInnerProgressHandler={finish:function(){e.finish()},stop:function(s){e.stop(s)},isCanceled:function(){return e.isCanceled()}}};s.prototype.start=function(){var s=this;if(this._oPromise){return this._oPromise}this._oPromise=new Promise(function(e,n){s._fnResolveCallback=e;s._bInProgress=true;s._fnProgress(s._oInnerProgressHandler)});return this._oPromise};s.prototype.finish=function(){this._bInProgress=false;if(this._fnResolveCallback){this._fnResolveCallback();this._fnResolveCallback=null}};s.prototype.stop=function(s){this._bInProgress=false;if(this._fnResolveCallback){this._fnResolveCallback(s);this._fnResolveCallback=null}};s.prototype.cancel=function(){this._bCancelled=true};s.prototype.isCanceled=function(){return this._bCancelled};s.prototype.isInProgress=function(){return this._bInProgress};return s},true);
sap.ui.predefine("sap/suite/ui/commons/statusindicator/util/ThemingUtil",["sap/ui/core/theming/Parameters","sap/m/library","sap/ui/core/library"],function(r,e,t){"use strict";var a=e.ValueColor;var i=t.CSSColor;var o=function(){throw new Error};o.resolveColor=function(e){if(i.isValid(e)){return e}switch(e){case a.Good:return r.get("sapPositiveColor");case a.Error:return r.get("sapNegativeColor");case a.Critical:return r.get("sapCriticalColor");case a.Neutral:return r.get("sapNeutralColor");default:return r.get(e)}};return o},true);
sap.ui.predefine("sap/suite/ui/commons/taccount/TAccount",["sap/suite/ui/commons/library","sap/ui/Device","sap/ui/core/Control","sap/ui/core/delegate/ItemNavigation","./TAccountGroup","./TAccountPanel","sap/ui/core/IconPool","sap/ui/core/Icon","sap/ui/core/InvisibleText","sap/base/security/encodeXML","./TAccountUtils","sap/suite/ui/commons/Utils","sap/ui/thirdparty/bignumber","sap/ui/thirdparty/jqueryui/jquery-ui-core","sap/ui/thirdparty/jqueryui/jquery-ui-widget","sap/ui/thirdparty/jqueryui/jquery-ui-mouse","sap/ui/thirdparty/jqueryui/jquery-ui-draggable","sap/ui/thirdparty/jqueryui/jquery-ui-droppable","sap/ui/thirdparty/jqueryui/jquery-ui-selectable"],function(t,e,i,o,n,s,a,r,p,u,c,d,l){"use strict";var g=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var m=Object.freeze({UP:"UP",DOWN:"DOWN",PREVIOUS:"PREVIOUS",NEXT:"NEXT"});var h=e.os.macintosh?"metaKey":"ctrlKey";var f=i.extend("sap.suite.ui.commons.taccount.TAccount",{metadata:{library:"sap.suite.ui.commons",properties:{measureOfUnit:{type:"string",group:"Misc",defaultValue:""},collapsed:{type:"boolean",group:"Misc",defaultValue:false},title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},orderBy:{type:"string",group:"Misc",defaultValue:""},opening:{type:"boolean",group:"Misc",defaultValue:false},openingDebit:{type:"any",group:"Misc",defaultValue:0},openingCredit:{type:"any",group:"Misc",defaultValue:0}},aggregations:{debit:{type:"sap.suite.ui.commons.taccount.TAccountItem",multiple:true,singularName:"debit"},credit:{type:"sap.suite.ui.commons.taccount.TAccountItem",multiple:true,singularName:"credit"}}},renderer:{apiVersion:2,render:function(t,e){var i=function(e,i){e.forEach(function(o,n){o._bIsDebit=i;o._index=n+1;o._indexSize=e.length;t.renderControl(o)})};var o=function(i){var o=e.getOrderBy();i.forEach(function(t){var e=t.getProperties();t._sOrderBy="";for(var i=0;i<e.length;i++){if(e[i].getKey().toLowerCase()===o.toLowerCase()){t._sOrderBy=e[i].getValue();break}}});i.sort(function(t,e){return new Date(t._sOrderBy)>=new Date(e._sOrderBy)?1:-1});e._setItemsAttrs(i);i.forEach(function(e){t.renderControl(e.addStyleClass(e._bIsDebit?"sapSuiteUiCommonsAccountItemLeft":"sapSuiteUiCommonsAccountItemRight"))})};var n=e._getPanel();var s=function(t){var i=t?e.getDebit():e.getCredit(),o=new l(t?e.getOpeningDebit():e.getOpeningCredit());i.forEach(function(t){o=o.plus(new l(t.getValue()))});return c.formatCurrency(o,e.getMeasureOfUnit(),n?n.getMaxFractionDigits():0)};var a=e.getMeasureOfUnit(),r=c.formatCurrency(e.getOpeningDebit(),a,n?n.getMaxFractionDigits():0),p=c.formatCurrency(e.getOpeningCredit(),a,n?n.getMaxFractionDigits():0),d=e.getDebit().length>0||e.getCredit().length>0;t.openStart("div",e);if(e.getCollapsed()){t.class("sapSuiteUiCommonsAccountCollapsed")}t.class("sapSuiteUiCommonsAccount");if(!d){t.class("sapSuiteUiCommonsAccountEmpty")}t.attr("role","region");t.attr("aria-describedby",e.getId());t.attr("aria-label",e._getAriaLabelText());t.attr("tabindex","0");t.openEnd();t.openStart("div").class("sapSuiteUiCommonsTAccountDropZoneTop").openEnd().close("div");t.openStart("div").class("sapSuiteUiCommonsTAccountDropZoneBottom").openEnd().close("div");t.openStart("div").class("sapSuiteUiCommonsTAccountInfoIconWrapper").class("sapSuiteUiCommonsTAccountBaseInfoIconWrapper").attr("aria-labelledby",e.getId()+"-mark-text").attr("title",g.getText("TACCOUNT_SELECTED")).openEnd();t.renderControl(e._getAriaMarkText());t.openStart("div").class("sapSuiteUiCommonsInfoIcon").openEnd();t.text("!");t.close("div");t.close("div");t.openStart("div").class("sapSuiteUiCommonsAccountHeader").openEnd();t.openStart("div").class("sapSuiteUiCommonsAccountHeaderFirst").openEnd();t.openStart("div").class("sapSuiteUiCommonsAccountHeaderExpandWrapper").openEnd();t.renderControl(e._getDownArrow());t.close("div");var m=u(e.getTitle()).replace(/&#xa;|\n/g,"<br>");if(e.getSubtitle()){var h=u(e.getSubtitle()).replace(/&#xa;|\n/g,"<br>");t.openStart("div").class("sapSuiteUiCommonsAccountHeaderTitleWrapper").openEnd();t.openStart("div").class("sapSuiteUiCommonsAccountHeaderTitleWithSubtitle").attr("id",e.getId()+"-title").openEnd().unsafeHtml(m).close("div");t.openStart("div").class("sapSuiteUiCommonsAccountHeaderSubtitle").openEnd().unsafeHtml(h).close("div");t.close("div")}else{t.openStart("span").attr("id",e.getId()+"-title").class("sapSuiteUiCommonsAccountHeaderTitle").openEnd().unsafeHtml(m).close("span")}t.close("div");t.openStart("div").class("sapSuiteUiCommonsAccountHeaderSecond").openEnd();t.openStart("span").attr("id",e.getId()+"-sum").class("sapSuiteUiCommonsAccountHeaderSUM").openEnd().text(e._getSumText()).close("span");t.close("div");t.close("div");t.openStart("div").attr("id",e.getId()+"-content").class("sapSuiteUiCommonsAccountTWrapper");if(e.getCollapsed()){t.style("display","none")}t.openEnd();if(d||e.getOpening()){t.openStart("div");t.class("sapSuiteUiCommonsAccountTHeader");if(e.getOpening()){t.class("sapSuiteUiCommonsAccountTHeaderOpening")}t.openEnd();t.openStart("span").attr("id",e.getId()+"-debit-text").class("sapSuiteUiCommonsAccountTHeaderTitle").openEnd().text(g.getText("TACCOUNT_DEBIT")).close("span");t.openStart("span").attr("id",e.getId()+"-credit-text").class("sapSuiteUiCommonsAccountTHeaderTitle").openEnd().text(g.getText("TACCOUNT_CREDIT")).close("span");t.close("div");if(d){if(e.getOpening()){t.openStart("div").class("sapSuiteUiCommonsAccountOpeningHeader").openEnd();t.openStart("span").attr("id",e.getId()+"-opening-debit-text").class("sapSuiteUiCommonsAccountTHeaderOpeningDebitTitle").openEnd().text(r+" "+a).close("span");t.openStart("span").attr("id",e.getId()+"-opening-credit-text").class("sapSuiteUiCommonsAccountTHeaderOpeningCreditTitle").openEnd().text(p+" "+a).close("span");t.close("div")}t.openStart("div").class("sapSuiteUiCommonsAccountTBody").attr("role","listbox").openEnd();if(e._isOrdered()){t.openStart("div").class("sapSuiteUiCommonsAccountDebitCredit").attr("role","listbox").attr("aria-labelledby",e.getId()+"-debit-text "+e.getId()+"-credit-text").openEnd();t.openStart("div").class("sapSuiteUiCommonsAccountMiddleBorder").openEnd().close("div");o(e.getDebit().concat(e.getCredit()))}else{t.openStart("div").class("sapSuiteUiCommonsAccountDebit").attr("role","listbox").attr("aria-labelledby",e.getId()+"-debit-text").openEnd();i(e.getDebit(),true)}t.close("div");if(!e._isOrdered()){t.openStart("div").class("sapSuiteUiCommonsAccountCredit").attr("role","listbox").attr("aria-labelledby",e.getId()+"-credit-text").openEnd();i(e.getCredit(),false);t.close("div")}t.close("div")}}else{t.openStart("div").class("sapSuiteUiCommonsAccountNoData").openEnd();t.text(g.getText("TACCOUNT_NO_DATA"));t.close("div")}if(e.getOpening()){t.openStart("div").class("sapSuiteUiCommonsAccountClosingHeaderLine").openEnd().close("div");t.openStart("div").class("sapSuiteUiCommonsAccountClosingHeader").openEnd();t.openStart("span").attr("id",e.getId()+"-closing-debit-text").class("sapSuiteUiCommonsAccountTHeaderOpeningDebitTitle").openEnd().text(s(true)+" "+a).close("span");t.openStart("span").attr("id",e.getId()+"-closing-credit-text").class("sapSuiteUiCommonsAccountTHeaderOpeningCreditTitle").openEnd().text(s(false)+" "+a).close("span");t.close("div")}t.close("div");t.close("div")}}});f.prototype.onBeforeRendering=function(){this._bRendered=false;this._iOldSum=this._iSum;this._iSum=null};f.prototype.onAfterRendering=function(){var t=this.getParent();this._bRendered=true;this._setupDraggable();this._setupKeyboard();if(t&&this._hasGroupParent(t)){if(!t._bRendered){t.addEventDelegate({onAfterRendering:this._setupTooltips.bind(this)})}if(t._bRendered&&this._iOldSum!=null){var e=this._iSum-this._iOldSum;t._valueChanged(e)}}else{this._setupTooltips()}this.$().find(".sapSuiteUiCommonsAccountGroupCollapseIcon").attr("aria-pressed",!this.getCollapsed())};f.prototype.onsapdownmodifiers=function(t){if(t[h]){this._handleArrowMoveEvent(t,m.DOWN)}};f.prototype.onsapupmodifiers=function(t){if(t[h]){this._handleArrowMoveEvent(t,m.UP)}};f.prototype.onsappreviousmodifiers=function(t){if(t[h]){this._handleArrowMoveEvent(t,m.PREVIOUS)}};f.prototype.onsapnextmodifiers=function(t){if(t[h]){this._handleArrowMoveEvent(t,m.NEXT)}};f.prototype.reset=function(){this._oSum=null};f.prototype._isOrdered=function(){return!!this.getOrderBy()};f.prototype._setupKeyboard=function(){if(!this._oItemNavigation){this._oItemNavigation=new o;this.addDelegate(this._oItemNavigation)}this._oItemNavigation.setRootDomRef(this.$().find(".sapSuiteUiCommonsAccountTBody")[0]);this._oItemNavigation.setItemDomRefs(this.$().find(".sapSuiteUiCommonsAccountItem"));this._oItemNavigation.setCycling(true)};f.prototype._isInGroup=function(){return this.getParent()instanceof n};f.prototype._getPanel=function(){if(this._isInGroup()){var t=this.getParent().getParent();if(t instanceof s){return t}}return null};f.prototype._setupDraggable=function(){if(this._isInGroup()){var t=this.$(),e=this.getParent();t.draggable({revert:"invalid",delay:100,helper:function(){return t.clone().width(t.width()).css("z-index",500)},opacity:.6,scope:e.getId()+"-content",handle:".sapSuiteUiCommonsAccountHeader",start:function(){t.addClass("sapSuiteUiCommonsAccountItemDragging");e.$().find(".sapSuiteUiCommonsAccountGroupDroppingArea").addClass("sapSuiteUiCommonsAccountGroupDroppingAreaHighlight");e.$().find(".sapSuiteUiCommonsAccountHeader").css("cursor","grabbing")},stop:function(){t.removeClass("sapSuiteUiCommonsAccountItemDragging");e.$().find(".sapSuiteUiCommonsAccountGroupDroppingArea").removeClass("sapSuiteUiCommonsAccountGroupDroppingAreaHighlight");e.$().find(".sapSuiteUiCommonsAccountHeader").css("cursor","grab")}});d._setupMobileDraggable(t)}};f.prototype._setItemsAttrs=function(t){t.forEach(function(e,i){e._index=i+1;e._indexSize=t.length});this.getDebit().forEach(function(t){t._bIsDebit=true})};f.prototype._getExpandAltText=function(t){return(t?g.getText("TACCOUNT_COLLAPSE"):g.getText("TACCOUNT_EXPAND"))+" "+g.getText("TACCOUNT_TITLE")};f.prototype._getDownArrow=function(){var t=this.getCollapsed();if(!this._oArrowDown){this._oArrowDown=new r({alt:this._getExpandAltText(!t),tooltip:this._getExpandAltText(!t),decorative:false,src:!t?"sap-icon://navigation-right-arrow":"sap-icon://navigation-down-arrow",press:function(){this.setCollapsed(!this.getCollapsed())}.bind(this)}).addStyleClass("sapSuiteUiCommonsAccountGroupCollapseIcon")}this._oArrowDown.$().attr("aria-pressed",!this.getCollapsed());return this._oArrowDown};f.prototype._getAriaMarkText=function(){if(!this._oMarkText){this._oMarkText=new p({id:this.getId()+"-mark-text",text:g.getText("TACCOUNT_SELECTED")});this.addDependent(this._oMarkText)}return this._oMarkText};f.prototype._getSum=function(){if(this._iSum==null){var t=new l("0");this.getCredit().forEach(function(e){t=t.plus(new l(e.getValue()))});this.getDebit().forEach(function(e){t=t.minus(new l(e.getValue()))});if(this.getOpening()){t=t.plus(new l(this.getOpeningCredit()));t=t.minus(new l(this.getOpeningDebit()))}this._iSum=t}return this._iSum};f.prototype._getAriaLabelText=function(){return this.getTitle()+" "+this._getSumText()+" "+g.getText("TACCOUNT_NAVIGATION")};f.prototype._getSumText=function(){var t=this.getMeasureOfUnit();var e=this._getSum();e=e.isLessThan(0)?e.times(-1):e;var i=this._getPanel();var o=c.formatCurrency(e,t,i?i.getMaxFractionDigits():0);return(this._getSum().isGreaterThan(0)?g.getText("TACCOUNT_CREDIT"):g.getText("TACCOUNT_DEBIT"))+": "+o+" "+u(t)};f.prototype._valueChanged=function(t,e){if(this._bRendered){if(e){this._iSum=this._getSum().minus(t)}else{this._iSum=this._getSum().plus(t)}this.$("sum").text(this._getSumText());var i=this.getParent();if(this._hasGroupParent(i)){i._valueChanged(t,e)}}};f.prototype._hasGroupParent=function(t){return(t||this.getParent())instanceof n};f.prototype._handleArrowMoveEvent=function(t,e){this._moveTAccount(e);t.preventDefault();t.stopImmediatePropagation()};f.prototype._moveTAccount=function(t){var e,i,o,n,s=t===m.UP,a=true,r=this.$();var p=function(t){if(o.length===0){a=false;return}r.detach();e.detach();o[t](r);o[t](e)};if(s||t===m.DOWN){n=s?["next","prev","insertBefore","append"]:["prev","next","insertAfter","prepend"];e=r[n[0]](".sapSuiteUiCommonsAccountGroupDroppingArea");i=r[n[1]]()[n[1]](".sapSuiteUiCommonsAccount");if(i.length!==0){r.detach()[n[2]](i);e.detach()[n[2]](i)}else{o=r.parent()[n[1]](".sapSuiteUiCommonsAccountGroupColumn");p(n[3])}}else{e=r.prev(".sapSuiteUiCommonsAccountGroupDroppingArea");o=r.parent()[t===m.NEXT?"next":"prev"](".sapSuiteUiCommonsAccountGroupColumn");p("append")}if(a){r.focus()}};f.prototype._setControlKeyName=function(t){h=t};f.prototype._setupTooltips=function(){var t=function(t){var e=this.$().find(t);if(e[0]&&e[0].clientHeight<e[0].scrollHeight){e.attr("title",e.html())}}.bind(this);if(this.getSubtitle()){t(".sapSuiteUiCommonsAccountHeaderTitleWithSubtitle");t(".sapSuiteUiCommonsAccountHeaderSubtitle")}else{t(".sapSuiteUiCommonsAccountHeaderTitle")}};f.prototype.updateBindingContext=function(){this.reset();return i.prototype.updateBindingContext.apply(this,arguments)};f.prototype.setMeasureOfUnit=function(t){this.setProperty("measureOfUnit",t,true);if(this._bRendered){this.$("sum").text(this._getSumText());var e=this.getParent();if(this._hasGroupParent(e)){e._measureChanged(t)}}this.invalidate();return this};f.prototype.invalidate=function(){this._bRendered=false;i.prototype.invalidate.apply(this,arguments)};f.prototype.setCollapsed=function(t){this.setProperty("collapsed",t,true);var e=this._getExpandAltText(!t);this._getDownArrow().setTooltip(e);this._getDownArrow().$().attr("aria-label",e);this._getDownArrow().setSrc(!t?"sap-icon://navigation-down-arrow":"sap-icon://navigation-right-arrow");this.$()[t?"addClass":"removeClass"]("sapSuiteUiCommonsAccountCollapsed");this.$().find(".sapSuiteUiCommonsAccountGroupCollapseIcon").attr("aria-pressed",!t);if(this.getDomRef()){this.$("content")[t?"hide":"show"]("medium")}return this};return f});
sap.ui.predefine("sap/suite/ui/commons/taccount/TAccountGroup",["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters","./TAccountPanel","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/Button","sap/base/security/encodeXML","sap/ui/core/Configuration","sap/ui/core/delegate/ItemNavigation","./TAccountUtils","sap/ui/core/ResizeHandler","sap/ui/thirdparty/bignumber"],function(t,e,o,n,s,i,a,r,p,u,c,l,d,h){"use strict";var m=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var C=o.extend("sap.suite.ui.commons.taccount.TAccountGroup",{metadata:{library:"sap.suite.ui.commons",properties:{title:{type:"string",group:"Misc",defaultValue:null},collapsed:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{accounts:{type:"sap.suite.ui.commons.taccount.TAccount",multiple:true,singularName:"account"}},events:{}},renderer:{apiVersion:2,render:function(t,e){if(!e._bThemeApplied){return}t.openStart("div",e);t.class("sapSuiteUiCommonsAccountGroup");if(e.getCollapsed()){t.class("sapSuiteUiCommonsAccountGroupCollapsed")}t.attr("aria-label",e._getSumText());t.openEnd();t.openStart("div").class("sapSuiteUiCommonsGroupHeader").openEnd();t.openStart("div").class("sapSuiteUiCommonsGroupHeaderExpandWrapper").openEnd();t.renderControl(e._getExpandCollapse());t.close("div");t.openStart("div").class("sapSuiteUiCommonsGroupHeaderFirst").openEnd();t.openStart("span").class("sapSuiteUiCommonsGroupHeaderTitle").openEnd().unsafeHtml(p(e.getTitle())).close("span");t.openStart("span").attr("id",e.getId()+"-sum").class("sapSuiteUiCommonsGrouptHeaderSUM").openEnd().text(e._getSumText()).close("span");t.openStart("div").attr("id"," ").class("sapSuiteUiCommonsGroupInfoIconWrapper").class("sapSuiteUiCommonsTAccountBaseInfoIconWrapper").attr("title",m.getText("TACCOUNT_SELECTED")).openEnd();t.openStart("span").class("sapSuiteUiCommonsInfoIcon").openEnd();t.text("!");t.close("span");t.close("div");t.close("div");t.openStart("div").class("sapSuiteUiCommonsGroupHeaderSecond").openEnd();t.renderControl(e._getExpandAllAccounts());t.renderControl(e._getCollapseAllAccounts());t.close("div");t.close("div");t.openStart("div").attr("id",e.getId()+"-content").class("sapSuiteUiCommonsAccountGroupContent").openEnd();e.getAccounts().forEach(function(e){t.renderControl(e)});t.close("div");t.close("div")}}});C.prototype.init=function(){sap.ui.getCore().attachThemeChanged(function(){this._bThemeApplied=true;this.invalidate()},this);this._bThemeApplied=sap.ui.getCore().isThemeApplied();if(!this._sResizeHandlerId){this._sResizeHandlerId=d.register(this,this._adjustUI.bind(this))}};C.prototype.exit=function(){if(this._oIconExpand){this._oIconExpand.destroy()}if(this._oIconCollapse){this._oIconCollapse.destroy()}if(this._sResizeHandlerId){d.deregister(this._sResizeHandlerId);this._sResizeHandlerId=""}};C.prototype.onBeforeRendering=function(){this._bRendered=false;this._oSum=null;this._iColumnCount=-1};C.prototype.onAfterRendering=function(){this._adjustUI();this._bRendered=true;var t=this.getParent();if(t&&this._hasPanelParent(t)&&t._bRendered){t._recalculate()}if(this.getCollapsed()){this.$("content").hide()}};C.prototype.reset=function(){this._oSum=null};C.prototype.updateBindingContext=function(){this.reset();return o.prototype.updateBindingContext.apply(this,arguments)};C.prototype._hasPanelParent=function(t){return(t||this.getParent())instanceof s};C.prototype._getExpandCollapse=function(){var t=this.getCollapsed(),e=this._getExpandAltText(!t);if(!this._oArrowDown){this._oArrowDown=new a({src:t?"sap-icon://navigation-right-arrow":"sap-icon://navigation-down-arrow",alt:e,tooltip:e,press:function(){this._expandCollapse()}.bind(this)})}return this._oArrowDown};C.prototype._getExpandAltText=function(t){return(t?m.getText("TACCOUNT_COLLAPSE"):m.getText("TACCOUNT_EXPAND"))+" "+m.getText("TACCOUNT_GROUP_TITLE")};C.prototype._expandCollapse=function(){var t=this.getCollapsed(),e=this._getExpandAltText(t);this._getExpandCollapse().$().attr("aria-label",e);this._getExpandCollapse().setTooltip(e);this._getExpandCollapse().setSrc(t?"sap-icon://navigation-down-arrow":"sap-icon://navigation-right-arrow");this.setProperty("collapsed",!t,true);this._bIsExpanding=true;this.$("content")[t?"show":"hide"]("medium",function(){this._bIsExpanding=false}.bind(this));this.$()[!t?"addClass":"removeClass"]("sapSuiteUiCommonsAccountGroupCollapsed")};C.prototype._expandCollapseAllAccounts=function(t){this.getAccounts().forEach(function(e){e.setCollapsed(!!t)})};C.prototype._getExpandAllAccounts=function(){if(!this._oIconExpand){this._oIconExpand=new r({icon:"sap-icon://expand-all",type:"Transparent",tooltip:m.getText("TACCOUNT_EXPAND"),press:this._expandCollapseAllAccounts.bind(this,false)}).addStyleClass("sapSuiteUiCommonsGroupHeaderIcon")}return this._oIconExpand};C.prototype._getCollapseAllAccounts=function(){if(!this._oIconCollapse){this._oIconCollapse=new r({icon:"sap-icon://collapse-all",type:"Transparent",tooltip:m.getText("TACCOUNT_COLLAPSE"),press:this._expandCollapseAllAccounts.bind(this,true)}).addStyleClass("sapSuiteUiCommonsGroupHeaderIcon")}return this._oIconCollapse};C.prototype._getSum=function(t){var e=this.getAccounts(),o=new h("0"),n="",s=true;if(!this._oSum||t){for(var i=0;i<e.length;i++){var a=e[i];if(n&&n!==a.getMeasureOfUnit()){s=false;break}n=a.getMeasureOfUnit();o=o.plus(a._getSum())}this._oSum={sum:o,measure:n,correct:s}}return this._oSum};C.prototype._getSumText=function(){var t=this._getSum();var e=this.getParent();if(t&&t.correct){var o=l.formatCurrency(t.sum,t.measure,e instanceof s?e.getMaxFractionDigits():0);return(t.sum>0?m.getText("TACCOUNT_CREDIT"):m.getText("TACCOUNT_DEBIT"))+": "+o+" "+p(t.measure)}return"-"};C.prototype._getAriaText=function(){return"T Account Group "+p(this.getTitle())+" "+this._getSumText()};C.prototype._adjustUI=function(){var e=320,o=16,n=e+o;var s=this.$("content"),i=s.width(),a=Math.max(Math.ceil(i/n)-1,1);if(a===this._iColumnCount){return}if(this._bIsExpanding||this._bRendered&&this.getCollapsed()){return}var r=t('<div id="'+this.getId()+'-content" class="sapSuiteUiCommonsAccountGroupContent"></div>'),p=Array.apply(null,Array(a)).map(Number.prototype.valueOf,0);var u=this.$().find(".sapSuiteUiCommonsAccount"),c=0;this._iColumnCount=a;this._iDivs=[];var l='<div class="sapSuiteUiCommonsAccountGroupDroppingArea"><div class="sapSuiteUiCommonsAccountGroupDroppingAreaInner">'+'</div><div class="sapSuiteUiCommonsAccountGroupDroppingAreaInnerBall"></div><div class="sapSuiteUiCommonsAccountGroupDroppingAreaInnerText">'+m.getText("TACCOUNT_DROP_HERE")+"</div></div>";for(var d=0;d<a;d++){var h='<div class="sapSuiteUiCommonsAccountGroupColumn">'+l+"</div>",C=t(h);r.append(C);this._iDivs.push(C)}for(var d=0;d<u.length;d++){var _=t(u[d]),g=_.height(),f=this._iDivs[c];var v=Number.MAX_VALUE,A=0;for(var S=0;S<a;S++){var T=p[S];if(T<v){v=T;A=S}}var f=this._iDivs[A];_.detach().appendTo(f);t(l).appendTo(f);p[A]+=g}s.detach();this.$().append(r);this._setupDroppable()};C.prototype._setupDroppable=function(){var e=function(e){var o=t(e);return o.hasClass("sapSuiteUiCommonsTAccountDropZoneTop")?o.parent().prev():o.parent().next()};var o=function(t,e){var o=e.draggable,n=o.next();if(n[0]!==t[0]){n.detach().insertAfter(t);o.detach().insertAfter(t)}else{o.detach().insertBefore(t)}t.removeClass("sapSuiteUiCommonsAccountGroupDroppingAreaActiveSide");o.css("left","0px");o.css("top","0px")};var n=this.$().find(".sapSuiteUiCommonsAccountGroupDroppingArea");n.droppable({scope:this.getId()+"-content",tolerance:"pointer",activeClass:"sapSuiteUiCommonsAccountGroupDroppingAreaActive",hoverClass:"sapSuiteUiCommonsAccountGroupDroppingAreaActive",drop:function(e,n){var s=t(this);o(s,n)}});var s=this.$().find(".sapSuiteUiCommonsTAccountDropZoneBottom, .sapSuiteUiCommonsTAccountDropZoneTop");s.droppable({scope:this.getId()+"-content",tolerance:"pointer",drop:function(e,n){var s=t(this);s=s.hasClass("sapSuiteUiCommonsTAccountDropZoneTop")?s.parent().prev():s.parent().next();o(s,n)},over:function(t,o){e(this).addClass("sapSuiteUiCommonsAccountGroupDroppingAreaActiveSide")},out:function(t,o){e(this).removeClass("sapSuiteUiCommonsAccountGroupDroppingAreaActiveSide")}})};C.prototype._valueChanged=function(t,e){if(this._oSum){if(e){this._oSum.sum=this._oSum.sum.minus(t)}else{this._oSum.sum=this._oSum.sum.plus(t)}this.$("sum").text(this._getSumText());var o=this.getParent();if(this._hasPanelParent(o)){o._valueChanged(t,e)}}};C.prototype._measureChanged=function(t){if(this._oSum){if(this._oSum.measure===t&&!this._oSum.correct){this._recalculate();return}if(this._oSum.measure!==t&&this._oSum.correct){var e=this.getParent();this._oSum.correct=false;if(this._hasPanelParent(e)){e._setInvalid()}}this.$("sum").text(this._getSumText())}};C.prototype._recalculate=function(){this._oSum=this._getSum(true);this.$("sum").text(this._getSumText());var t=this.getParent();if(this._hasPanelParent(t)){t._recalculate()}};C.prototype._hasPanelParent=function(t){return(t||this.getParent())instanceof s};C.prototype.invalidate=function(){this._bRendered=false;o.prototype.invalidate.apply(this,arguments)};return C});
sap.ui.predefine("sap/suite/ui/commons/taccount/TAccountItem",["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters","sap/suite/ui/commons/taccount/TAccountPanel","sap/suite/ui/commons/taccount/TAccountGroup","sap/ui/core/format/NumberFormat","sap/ui/core/Core","sap/ui/core/library","./TAccountUtils","sap/ui/thirdparty/bignumber"],function(t,e,i,r,o,a,s,n,u,c,p){"use strict";var l=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var g=i.extend("sap.suite.ui.commons.taccount.TAccountItem",{metadata:{library:"sap.suite.ui.commons",properties:{value:{type:"any",group:"Misc",defaultValue:0},color:{type:"sap.m.ValueCSSColor",group:"Misc",defaultValue:null},group:{type:"string",group:"Misc",defaultValue:""},ariaLabel:{type:"string",group:"Misc",defaultValue:""}},aggregations:{properties:{type:"sap.suite.ui.commons.taccount.TAccountItemProperty",multiple:true,singularName:"property"}},events:{press:{}}},renderer:{apiVersion:2,render:function(t,e){var i=e.getColor(),o=e.getParent()&&e.getParent().getMeasureOfUnit(),a=e._getPanel(),s=c.formatCurrency(e.getValue(),o,a?a.getMaxFractionDigits():0),n=s+" "+o;t.openStart("div",e).attr("tabindex","0");t.class("sapSuiteUiCommonsAccountItem");if(e.getGroup()){t.attr("group",e.getGroup())}t.attr("aria-selected","false");t.attr("aria-setsize",e._indexSize);t.attr("aria-posinset",e._index);t.attr("role","option");t.attr("aria-label",e._getAriaLabel(n));t.openEnd();t.openStart("div").class("sapSuiteUiCommonsAccountColorBar");if(i&&u.CSSColor.isValid(i)){t.style("background-color",i)}else if(u.CSSColor.isValid(r.get(i))){t.style("background-color",r.get(i))}t.openEnd();t.close("div");t.openStart("div").attr("id",e.getId()+"-content").class("sapSuiteUiCommonsAccountContent").openEnd();t.openStart("div").class("sapSuiteUiCommonsAccountItemTitleWrapper").openEnd();t.openStart("span").class("sapSuiteUiCommonsAccountItemTitle").openEnd();t.text(n);t.close("span");t.close("div");t.openStart("div").class("sapSuiteUiCommonsAccountItemProperties").openEnd();e.getProperties().forEach(function(e){t.renderControl(e)});t.close("div");t.close("div");t.close("div")}}});g.prototype.onBeforeRendering=function(){this._prepareProperties()};g.prototype.onAfterRendering=function(){this.$().on("click",this._click.bind(this))};g.prototype._refreshAriaLabel=function(t){this.$().attr("aria-label",this._getAriaLabel())};g.prototype._getAriaLabel=function(t){var e=this.getAriaLabel();if(e){return e}if(!t){var i=this.getParent()&&this.getParent().getMeasureOfUnit(),r=this._getPanel(),o=c.formatCurrency(this.getValue(),i,r?r.getMaxFractionDigits():0),t=o+" "+i}var a=(this._bIsDebit?l.getText("TACCOUNT_DEBIT"):l.getText("TACCOUNT_CREDIT"))+" "+l.getText("TACCOUNT_ITEM");a+=" "+t+" ";this.getProperties().forEach(function(t){if(t.getVisible()){a+=t.getLabel()+":"+t.getValue()+" "}});return a};g.prototype._click=function(){var t=this.fireEvent("press",{},true);if(t){this._highlightItems()}};g.prototype._highlightItems=function(){var e=this.$(),i=this.getGroup(),r=!e.is(".sapSuiteUiCommonsAccountItemSelected, .sapSuiteUiCommonsAccountItemSelectedByGroup"),o=t(".sapSuiteUiCommonsAccountItemSelected");this._setAriaHighlighted(o,false);this._setAriaHighlighted(e,r);o.removeClass("sapSuiteUiCommonsAccountItemSelected");r?e.addClass("sapSuiteUiCommonsAccountItemSelected"):e.removeClass("sapSuiteUiCommonsAccountItemSelected");var s=this._findHighlightParent();if(s){var n=t(".sapSuiteUiCommonsAccountItemSelectedByGroup");n.removeClass("sapSuiteUiCommonsAccountItemSelectedByGroup");this._setAriaHighlighted(n,false);if(i&&r){var u=t(".sapSuiteUiCommonsAccountItem[group="+i+"]");u.addClass("sapSuiteUiCommonsAccountItemSelectedByGroup");var c=this;u.each(function(t,e){var i=sap.ui.getCore().byId(e.id);if(i){c._setAriaHighlighted(i.$(),true);var r=i.getParent();if(r){r.$().addClass("sapSuiteUiCommonsAccountItemSelectedByGroup");var o=r.getParent();if(o instanceof a){o.$().addClass("sapSuiteUiCommonsAccountItemSelectedByGroup")}}}})}}};g.prototype.onsapenter=function(){this._highlightItems()};g.prototype.onsapspace=function(){this._highlightItems()};g.prototype._setAriaHighlighted=function(t,e){t.attr("aria-selected",e);t.attr("aria-label",e?l.getText("COLORED_ITEM_FROM")+" "+this.getGroup():this._getAriaLabel())};g.prototype._findHighlightParent=function(){var t=this.getParent();t=t&&t.getParent();if(t instanceof a){var e=t.getParent();return e instanceof o||t}return null};g.prototype._getPanel=function(){var t=this.getParent();t=t&&t.getParent();if(t instanceof a){var e=t.getParent();if(e instanceof o){return e}}return null};g.prototype._prepareProperties=function(){this._mProperties={};this.getProperties().forEach(function(t){var e=t.getKey();if(e){this._mProperties[e]=t}}.bind(this))};g.prototype.setValue=function(t){var e=new p(t);var i=new p(this.getValue());var r=this._bIsDebit?-1:1;var o=new p(r).times(e.minus(i));var a=o.isGreaterThan(0);this.setProperty("value",t);this.getParent()&&this.getParent()._valueChanged(o,this._bIsDebit&&!a)};return g});
sap.ui.predefine("sap/suite/ui/commons/taccount/TAccountItemProperty",["sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters"],function(e,t,o){"use strict";var a=t.extend("sap.suite.ui.commons.taccount.TAccountItemProperty",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},value:{type:"string",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null},displayLabel:{type:"boolean",group:"Misc",defaultValue:true},visible:{type:"boolean",group:"Misc",defaultValue:true}}},renderer:{apiVersion:2,render:function(e,t){var o=t.getValue(),a=t.getLabel(),i=t.getVisible();e.openStart("div",t).class("sapSuiteUiCommonsAccountPropertyWrapper").attr("key",t.getKey());if(!i){e.style("display","none")}e.openEnd();if(a&&t.getDisplayLabel()){e.openStart("div").class("sapSuiteUiCommonsAccountItemLabel").openEnd().text(a+":").close("div")}e.openStart("div").class("sapSuiteUiCommonsAccountItemProperty").openEnd().text(o).close("div");e.close("div")}}});a.prototype._getLabel=function(){return this.getValue()||this.getKey()};return a});
sap.ui.predefine("sap/suite/ui/commons/taccount/TAccountPanel",["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters","sap/m/Panel","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/Button","sap/m/FlexBox","sap/m/Label","sap/ui/model/Filter","sap/m/SearchField","sap/m/List","sap/m/StandardListItem","sap/m/CheckBox","sap/m/Title","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Text","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/ui/model/FilterOperator","sap/base/security/encodeXML","sap/ui/core/format/NumberFormat","sap/ui/core/Core","sap/ui/core/Configuration","./TAccountUtils","./TAccountPanelRenderer","sap/m/library","sap/ui/thirdparty/bignumber"],function(e,t,o,i,s,a,r,n,l,p,u,c,h,m,d,g,T,_,y,f,S,C,b,v,A,P,w,x,B,I){"use strict";var L=B.ButtonType;var U=A.getLibraryResourceBundle("sap.suite.ui.commons");var O=t.taccount.TAccountPanelState;var D=s.extend("sap.suite.ui.commons.taccount.TAccountPanel",{metadata:{library:"sap.suite.ui.commons",properties:{title:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.suite.ui.commons.taccount.TAccountPanelState",group:"Misc",defaultValue:"Default"},showOverlay:{type:"boolean",group:"Misc",defaultValue:false},maxFractionDigits:{type:"int",group:"Misc",defaultValue:2}},aggregations:{properties:{type:"sap.suite.ui.commons.taccount.TAccountItemProperty",multiple:true,singularName:"property"},table:{type:"sap.ui.core.Control",multiple:false}},events:{stateChanged:{parameters:{state:"sap.suite.ui.commons.taccount.TAccountPanelState"}},settingsApplied:{parameters:{properties:"object"}}}}});D.prototype.init=function(){this._bDisplayLabels=true};D.prototype.onBeforeRendering=function(){this._oSum=null;this._bRendered=false;this._prepareProperties();this._createToolbar()};D.prototype.onAfterRendering=function(){var e=this.$();this._switchContent(this.getState()===O.Table);this._bRendered=true;e.attr("aria-label",this._getAriaLabelText());e.addClass("sapSuiteUiCommonsAccountPanel");this._setTotalBalanceTitle()};D.prototype.getSum=function(){var e=new I("0"),t="",o=true,i=this.getContent();if(!this._oSum){for(var s=0;s<i.length;s++){var a=i[s];if(a instanceof sap.suite.ui.commons.taccount.TAccountGroup){var r=a._getSum();if(t&&t!==r.measure||!r.correct){o=false;break}t=r.measure;e=e.plus(r.sum)}}this._oSum={measure:t,sum:e||0,correct:o}}return this._oSum};D.prototype.switchContent=function(e){var t=e?O.Table:O.Default;this._switchContent(e);this.setProperty("state",t,true)};D.prototype.getSettingsDialog=function(){return this._getPopover()};D.prototype.getToolbar=function(){return this._getToolbar()};D.prototype.openSettings=function(){this._oSelectAllCheckBox&&this._oSelectAllCheckBox.setText(this._getSelectAllText());this._getPopover().open()};D.prototype.reset=function(){this._oSum=null;if(this._oPopover){this._oPopover.destroy();this._oPopover=null}};D.prototype.setState=function(e){var t=e===O.Table;this._switchContent(t);this.setProperty("state",e,true);return this};D.prototype.updateBindingContext=function(){this.reset();return o.prototype.updateBindingContext.apply(this,arguments)};D.prototype._switchContent=function(e){var t=e?O.Table:O.Default;this.$("table")[e?"show":"hide"]();this.$("datacontent")[e?"hide":"show"]();if(this._oDisplaySwitcher){this._oDisplaySwitcher.setSelectedKey(t)}};D.prototype._prepareProperties=function(){this._mProperties={};this.getProperties().forEach(function(e){var t=e.getKey();if(t){this._mProperties[t]=e}}.bind(this))};D.prototype._setPropertiesVisibility=function(t){var o=this.$();Object.keys(t).forEach(function(i){var s=t[i],a=o.find(".sapSuiteUiCommonsAccountPropertyWrapper[key="+i+"]");a.each(function(t,o){var i=s.getVisible(),a=A.byId(o.id);if(a){a.setProperty("visible",i,true);a.getParent()._refreshAriaLabel()}e(o)[i?"show":"hide"]()})});o.find(".sapSuiteUiCommonsAccountItemLabel")[this._bDisplayLabels?"show":"hide"]()};D.prototype._getPopover=function(){if(!this._oPopover){this._createPopover()}return this._oPopover};D.prototype._getSelectAllText=function(e){var t=this.getProperties();if(!e&&e!==0){e=t.reduce(function(e,t){return e+(t.getVisible()?1:0)},0)}this._iSelectedCount=e;return U.getText("TACCOUNT_SELECTALL")+" ("+e+"/"+t.length+")"};D.prototype._createPopover=function(){var e=this,t=false;if(!this._oPopover){this._oPopover=new r({contentWidth:"450px",title:U.getText("TACCOUNT_DISPLAYOPTIONS"),afterOpen:function(){if(!t){var o=e._oPopover.$().height();e._oPopover.setProperty("contentHeight",o+"px",true);t=true}}})}this._oPopover.setEndButton(new n({text:U.getText("TACCOUNT_CANCEL"),press:function(t){e._oPopover.close()}}));this._oPopover.setBeginButton(new n({text:U.getText("TACCOUNT_OK"),type:L.Emphasized,press:function(t){var o=_.getSelectedContexts(true),s=_.getModel();var a={},r={};o.forEach(function(t){var o=s.getProperty(t.sPath);if(o){var i=e._mProperties[o.key];a[o.key]=1;if(i&&!i.getVisible()){i.setProperty("visible",true,true);r[o.key]=i}}});Object.keys(e._mProperties).forEach(function(t){var o=e._mProperties[t];if(o.getVisible()&&!a[t]){o.setProperty("visible",false,true);r[t]=o}});e._bDisplayLabels=i.getSelected();if(e.fireEvent("settingsApplied",{properties:r},true)){e._setPropertiesVisibility(r)}e._oPopover.close()}}));this._oPopover.removeAllContent();var o=new l({width:"100%",renderType:"Bare",direction:"Column"});this._oPopover.addContent(o);var i=new d({selected:this._bDisplayLabels}).addStyleClass("sapUiTinyMarginBegin");var s=new l({renderType:"Bare",alignItems:"Center",items:[i,new p({text:"Show labels"}).addStyleClass("sapUiTinyMarginBegin")]}).addStyleClass("sapUiTinyMarginBottom sapUiTinyMarginTop");o.addItem(s);var g=function(e){var t=[],o=e.getSource().getValue();if(o&&o.length>0){t.push(new u("title",C.Contains,o))}var i=_.getBinding("items");i.filter(t,"Application")};var T=new c({width:"100%",liveChange:g}).addStyleClass("sapSuiteUiCommonsAccountsPopupSearch");o.addItem(T);var _=new h({width:"100%",mode:"MultiSelect",includeItemInSelection:true,selectionChange:function(t){var o=t.getParameter("listItem").getSelected();e._oSelectAllCheckBox.setText(e._getSelectAllText(e._iSelectedCount+(o?1:-1)));e._oSelectAllCheckBox.setSelected(y.length===e._iSelectedCount)}}).addStyleClass("sapSuiteUiCommonsAccountsPopupList");_.bindAggregation("items",{path:"/items",template:new m({title:"{title}",selected:"{selected}"})});var y=this.getProperties(),f=this._getSelectAllText();this._oSelectAllCheckBox=new d({selected:y.length===e._iSelectedCount,text:f,select:function(t){var o=t.getSource().getSelected();e._oSelectAllCheckBox.setText(e._getSelectAllText(o?y.length:0));_.getItems().forEach(function(e){e.setSelected(o)})}}).addStyleClass("sapUiTinyMarginBegin sapUiTinyMarginEnd sapSuiteUiCommonsAccountsPopupSelectAll");var S=new l({renderType:"Bare",alignItems:"Center"}).addStyleClass("sapSuiteUiCommonsAccountsPopupSelectAllWrapper");S.addItem(this._oSelectAllCheckBox);o.addItem(S);o.addItem(_);var b=[];y.forEach(function(e){b.push({title:e._getLabel(),key:e.getKey(),selected:e.getVisible()})});_.setModel(new a({items:b}));return this._oPopover};D.prototype._getToolbar=function(){if(!this._oToolbar){this._createToolbar()}return this._oToolbar};D.prototype._createToolbar=function(){var e=this;if(this._oToolbar){return}this._oToolbar=new T;this._oToolbar.addContent(new g(this.getId()+"-toolbartitle",{text:this.getTitle()}));this._oToolbar.addContent(new _(this.getId()+"-toolbarspacer"));this._oToolbar.addContent(new y(this.getId()+"-toolbarbalancelabel",{wrapping:false,text:U.getText("TACCOUNT_TOTALBALANCE")+":"}).addStyleClass("sapSuiteUiCommonsAccountPanelLabel"));this._oToolbar.addContent(new y(this.getId()+"-toolbarsumtitle",{wrapping:false}).addStyleClass("sapSuiteUiCommonsAccountPanelSum"));this._oDisplaySwitcher=new f(this.getId()+"-toolbarswitcher",{selectionChange:function(t){var o=A.byId(e._oDisplaySwitcher.getSelectedItem());if(o){e.switchContent(o.getKey()===O.Table);e.fireStateChanged({state:o.getKey()})}},items:[new S({key:O.Default,tooltip:U.getText("TACCOUNT_DEFAULT"),icon:"sap-icon://screen-split-two"}),new S({key:O.Table,tooltip:U.getText("TACCOUNT_TABLE"),icon:"sap-icon://table-chart"})]});this._oToolbar.addContent(this._oDisplaySwitcher);this._oToolbar.addContent(new n(this.getId()+"-toolbarsettings",{icon:"sap-icon://action-settings",press:this.openSettings.bind(this)}));this.setHeaderToolbar(this._oToolbar)};D.prototype._getSumText=function(){var e=this.getSum();if(!e.correct){return" - "}return w.formatCurrency(Math.abs(e.sum),e.measure,this.getMaxFractionDigits())+" "+b(e.measure)};D.prototype._setTotalBalanceTitle=function(){var e=this.getSum(),t="";if(!e.correct||e.sum.isEqualTo(0)){t=U.getText("TACCOUNT_TOTALBALANCE")}else{t=e.sum.isGreaterThan(0)?U.getText("TACCOUNT_TOTALCREDIT"):U.getText("TACCOUNT_TOTALDEBIT")}this.$("toolbarbalancelabel").text(t+":");this.$("toolbarsumtitle").text(this._getSumText())};D.prototype._getAriaLabelText=function(){return"T account panel "+this.getTitle()+" "+this._getSumText()};D.prototype._recalculate=function(){this._oSum=null;this._oSum=this.getSum();this._setTotalBalanceTitle()};D.prototype._valueChanged=function(e,t){var o=this.getSum();if(o.correct){if(t){this._oSum.sum=this._oSum.sum.minus(e)}else{this._oSum.sum=this._oSum.sum.plus(e)}}this._setTotalBalanceTitle()};D.prototype.setShowOverlay=function(e){this.setProperty("showOverlay",e,true);this.$("overlay")[e?"addClass":"removeClass"]("sapSuiteUiCommonsAccountPanelOverlayVisible")};D.prototype._setInvalid=function(){if(this._oSum){this._oSum.correct=false;this._setTotalBalanceTitle()}};D.prototype.invalidate=function(){this._bRendered=false;o.prototype.invalidate.apply(this,arguments)};return D});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/taccount/TAccountPanelRenderer",["sap/ui/core/Renderer","sap/m/PanelRenderer"],function(e,n){"use strict";var t=e.extend(n),a;t.renderContent=function(e,t){a=t;n.renderContent.apply(this,[e,t])};t.apiVersion=2;t.renderChildren=function(e,n){var t=a&&a.getId();if(a){var o=a.getTable();if(o){e.openStart("div").attr("id",t+"-table").class("sapSuiteUiCommonsAccountPanelTable").openEnd();e.renderControl(o);e.close("div")}}e.openStart("div").attr("id",t+"-datacontent").class("sapSuiteUiCommonsAccountPanelContent").openEnd();n.forEach(e.renderControl);e.close("div");var r=a&&a.getShowOverlay()?"sapSuiteUiCommonsAccountPanelOverlayVisible":"";e.openStart("div").attr("id",t+"-overlay").class("sapSuiteUiCommonsAccountPanelOverlay").class(r).openEnd();e.close("div")};return t},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/taccount/TAccountUtils",["sap/ui/core/format/NumberFormat","sap/ui/core/Core"],function(r,t){"use strict";var e={};e._oCurrencyFormatter=null;e.formatCurrency=function(r,t,o){return e._getCurrencyFormatter(o).format(r,t)||""};e._getCurrencyFormatter=function(o){e._oCurrencyFormatter=r.getCurrencyInstance({showMeasure:false,maxFractionDigits:o},t.getConfiguration().getLocale());return e._oCurrencyFormatter};return e},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/util/DateUtils",["sap/base/Log"],function(e){"use strict";var t=function(){throw new Error};t.resetDateToStartOfDay=function(e){if(t.isValidDate(e)){e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0)}};t.resetDateToEndOfDay=function(e){if(t.isValidDate(e)){e.setHours(23);e.setMinutes(59);e.setSeconds(59);e.setMilliseconds(999)}};t.resetDateToStartOfMonth=function(e){if(t.isValidDate(e)){e.setDate(1);t.resetDateToStartOfDay(e)}};t.resetDateToEndOfMonth=function(e){if(t.isValidDate(e)){e.setDate(1);e.setMonth(e.getMonth()+1);e.setDate(0);t.resetDateToEndOfDay(e)}};t.resetDateToStartOfYear=function(e){if(t.isValidDate(e)){e.setMonth(0);t.resetDateToStartOfMonth(e)}};t.resetDateToEndOfYear=function(e){if(t.isValidDate(e)){e.setMonth(11);t.resetDateToEndOfMonth(e)}};t.resetDateToStartOfWeek=function(a,n){if(t.isValidDate(a)){if(n===undefined){n=1}else if(isNaN(n)||!isFinite(n)){e.error("DateUtils iFirstDayOfWeek value ='"+n+"' is invalid.");return}a.setDate(a.getDate()-(a.getDay()-n+7)%7);t.resetDateToStartOfDay(a)}};t.resetDateToEndOfWeek=function(a,n){if(t.isValidDate(a)){var i;if(n&&!(n instanceof Object)){e.error("DateUtils oSettings is not an object.");return}if(!n){n={}}if(n.iDuration===undefined){i=7}else{i=n.iDuration;if(isNaN(i)||!isFinite(i)){e.error("DateUtils duration value ='"+i+"' is invalid.");return}}t.resetDateToStartOfWeek(a,n.iFirstDayOfWeek);a.setDate(a.getDate()+i-1);t.resetDateToEndOfDay(a)}};t.isValidDate=function(t){if(Object.prototype.toString.call(t)!=="[object Date]"||isNaN(t.getTime())){e.error("DateUtils invalid date="+t);return false}return true};t.dateDaysEqual=function(e,a){if(t.isValidDate(e)&&t.isValidDate(a)){return e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth()&&e.getDate()===a.getDate()}return false};t.dateMonthsEqual=function(e,a){if(t.isValidDate(e)&&t.isValidDate(a)){return e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth()}return false};t.incrementDateByIndex=function(e,a){var n=null;if(t.isValidDate(e)&&isFinite(a)){n=new Date(e);n.setDate(e.getDate()+parseInt(a,10))}return n};t.incrementMonthByIndex=function(e,a){var n=null;if(t.isValidDate(e)&&isFinite(a)){n=new Date(e);t.resetDateToStartOfMonth(n);n.setMonth(e.getMonth()+parseInt(a,10))}return n};t.numberOfMonthsApart=function(e,a){e=new Date(e);a=new Date(a);t.resetDateToStartOfMonth(e);t.resetDateToStartOfMonth(a);var n=e.getTime()<=a.getTime();var i=0,r=0,s=0;for(i=0,r=0;!(e.getDate()===a.getDate()&&e.getMonth()===a.getMonth()&&e.getFullYear()===a.getFullYear());i++,r--){if(n){e.setMonth(e.getMonth()+1)}else{e.setMonth(e.getMonth()-1)}}if(n){s=i}else{s=r}return s};t.numberOfDaysApart=function(e,a){e=new Date(e);a=new Date(a);t.resetDateToStartOfDay(e);t.resetDateToStartOfDay(a);var n=24*60*60*1e3;var i=Math.round(Math.abs((e.getTime()-a.getTime())/n));if(e.getTime()>a.getTime()){return-i}else{return i}};t.parseDate=function(e,t){if(e instanceof Date||e===null){return e}t=t!==false;if(typeof e==="string"){var a=/Date\((-*\d+)\)/.exec(e);if(a===null){if(t){var n=Date.parse(e);if(!isNaN(n)){e=new Date(n)}else if(!isNaN(e)){e=new Date(parseInt(e,10))}}}else{e=new Date(parseInt(a[1],10))}}else{e=new Date(parseInt(e,10))}return e};return t},true);
sap.ui.predefine("sap/suite/ui/commons/util/FullScreenUtil",["sap/m/Dialog","sap/ui/core/HTML"],function(e,l){"use strict";var o={toggleFullScreen:function(o,n,t,i){var r;if(n){r=o.getDomRef();if(r){if(!o._oHTML){o._oHTML=new l({preferDOM:false,afterRendering:function(){if(o&&o._oHTML){var e=o._oHTML.getDomRef();if(e){e.style.height="100%";e.append(o.getDomRef())}}}})}if(!o._oFullScreenDialog){o._oFullScreenDialog=new e({showHeader:false,stretch:true,beforeClose:function(){if(o&&o._placeHolder&&i){i.call(o,false)}},content:[o._oHTML]});if(t){o._oFullScreenDialog.attachAfterOpen(function(){t.focus()});o._oFullScreenDialog.attachAfterClose(function(){t.focus()})}}o._placeHolder=document.createElement("div");r.parentNode.insertBefore(o._placeHolder,r);o._oHTML.setContent("<div></div>")}o._oFullScreenDialog.open()}else if(o._placeHolder&&o._oHTML){var a=o.getHeight&&o.getHeight();var c=o.getDomRef();if(a&&a!==c.style.height){c.style.height=a}r=o._oHTML.getDomRef();o._placeHolder.parentNode.replaceChild(r.children[0],o._placeHolder);o._placeHolder=null;r=null;if(o._oFullScreenDialog){o._oFullScreenDialog.close()}}},cleanUpFullScreen:function(e){if(e._oFullScreenDialog){e._oFullScreenDialog.destroy();e._oFullScreenDialog=null}e._placeHolder=null;e._oHTML=null}};return o},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/util/HtmlElement",["sap/ui/base/Object","sap/ui/core/Control","./HtmlElementRenderer","sap/base/assert","sap/base/security/encodeXML","sap/base/Log"],function(t,s,e,i,r,a){"use strict";var n=t.extend("sap.suite.ui.commons.util.HtmlElement",{constructor:function(s){t.apply(this,arguments);i(typeof s==="string","Element name must be a string.");this._sName=s;this._mAttributes={};this._aChildren=[]}});n.prototype.getRenderer=function(){return new e(this)};n.prototype.setId=function(t,s){i(typeof t==="string","Id must by a string.");this.setAttribute("id",t);if(s){this.setAttribute("data-sap-ui",t)}};n.prototype.setAttribute=function(t,s,e){i(typeof t==="string","Key must by a string.");i(typeof s==="string"||typeof s==="number"||typeof s==="boolean","Value must be a string, number or boolean");var n=String(s);if(e){n=r(n)}if(t in this._mAttributes){a.warning("Replacing an already existing attribute.","Attribute key = "+t+", old value = "+this._mAttributes[t]+", new value = "+n,this)}if(t==="style"){var o=n.split(";");if(!this._mAttributes.style){this._mAttributes.style={}}for(var u=0;u<o.length;u++){var l=o[u].split(/:(.+)/),m=l.splice(0,1)[0].trim(),p=l.join("").trim();this._mAttributes.style[m]=p}}else{this._mAttributes[t]=n}};n.prototype.addClass=function(t){i(typeof t==="string","Class must be a string.");if(!this._mAttributes.class){this._mAttributes.class=[]}else{i(Array.isArray(this._mAttributes.class),"Cannot add class to customly added classes.")}this._mAttributes.class.push(t)};n.prototype.addStyle=function(t,s){i(typeof t==="string","Name must be a string.");i(typeof s==="string"||typeof s==="number","Value must be a string or a number.");if(!this._mAttributes.style){this._mAttributes.style={}}this._mAttributes.style[t]=s};n.prototype.addControlData=function(t){i(t instanceof s,"Control must be a sapui5 control.");this.setId(t.getId(),true);var e=this;t.getCustomData().forEach(function(s){var i=s._checkWriteToDom(t);if(i){e.setAttribute(i.key,i.value,true)}});if(t.aCustomStyleClasses&&t.aCustomStyleClasses.length>0){t.aCustomStyleClasses.forEach(function(t){e.addClass(r(t))})}};n.prototype.addChild=function(t){i(typeof t==="string"||t instanceof n||t instanceof s,"Child must be a string, HtmlElement or a Control.");this._aChildren.push(t)};n.prototype.addChildEscaped=function(t,s){i(typeof t==="string","sText must be a string");t=r(t);if(s){t=t.replace(/&#xa;/g,"<br>")}this._aChildren.push(t)};return n});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/util/HtmlElementRenderer",["sap/ui/base/Object","sap/ui/core/Control","sap/base/Log"],function(e,t,r){"use strict";var n;var i=e.extend("sap.suite.ui.commons.util.HtmlElementRenderer",{constructor:function(t){e.apply(this,arguments);this._oHtmlElement=t}});i.apiVersion=2;i.prototype.render=function(e){e.openStart(this._oHtmlElement._sName);this._renderAttributes(e);e.openEnd();if(this._oHtmlElement._aChildren.length>0){this._renderChildren(e)}e.close(this._oHtmlElement._sName)};i.prototype._renderAttributes=function(e){var t=this._oHtmlElement._mAttributes;for(var r in t){if(!t.hasOwnProperty(r)){continue}var n=t[r];switch(r){case"class":if(Array.isArray(n)){for(var i in n){e.class(n[i])}}else{e.class(n)}break;case"style":if(typeof n==="object"&&!!n){for(var s in n){e.style(s,n[s])}}break;default:if(Array.isArray(n)){n=n.join("")}e.attr(r,n)}}};i.prototype._renderChildren=function(e){if(typeof n==="undefined"){n=sap.ui.require("sap/suite/ui/commons/util/HtmlElement")}this._oHtmlElement._aChildren.forEach(function(i){if(typeof i==="string"){e.unsafeHtml(i)}else if(n&&i instanceof n){i.getRenderer().render(e)}else if(i instanceof t){e.renderControl(i)}else{r.error(typeof i+" cannot be a child of a HTML element. Skipping rendering for this child.")}})};return i});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/util/ManagedObjectRegister",["sap/ui/base/Object","sap/ui/base/ManagedObject","sap/base/assert","sap/base/Log"],function(e,t,i,s){"use strict";var r=e.extend("sap.suite.ui.commons.util.ManagedObjectRegister",{constructor:function(){e.apply(this,arguments);this._mRegister={}}});r.prototype.register=function(e,r){i(typeof e==="string","Key must be a string.");e=e[0].toUpperCase()+e.substr(1);var o="get"+e;if(typeof this._mRegister[e]!=="undefined"){this.destroyObject(e)}if(typeof r==="function"){this._mRegister[e]={fFactory:r,oValue:undefined}}else if(r instanceof t){this._mRegister[e]={fFactory:undefined,oValue:r}}else{s.error("oFactoryFunction must be either a factory function or a managed object.");return}if(o!=="getObject"){this[o]=function(){return this.getObject(e)}}};r.prototype.getObject=function(e){var s;e=e||"Object";s=this._mRegister[e];if(s){if(typeof s.oValue==="undefined"){s.oValue=s.fFactory(e);i(s.oValue instanceof t,"Factory class must return a managed object.")}return s.oValue}return null};r.prototype.isObjectInitialized=function(e){var t;t=this._mRegister[e];return t&&typeof t.oValue!=="undefined"};r.prototype.destroyObject=function(e){var t;i(typeof e==="string","Key must be a string.");t=this._mRegister[e];if(t){if(t.oValue){t.oValue.destroy()}if(e!=="Object"){delete this["get"+e]}delete this._mRegister[e]}};r.prototype.destroyAll=function(){var e,t;for(e in this._mRegister){t=this._mRegister[e];if(t.oValue){t.oValue.destroy()}if(e!=="Object"){delete this["get"+e]}}this._mRegister={}};return r});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/util/RenderUtils",["sap/ui/base/Object","sap/base/security/encodeXML"],function(e,t){"use strict";var r=function(e){this._rm=e};r.prototype=Object.create(e.prototype||null);r.prototype._getRenderManager=function(){if(!this._rm){throw new Error("Render manager not defined")}return this._rm};r.prototype.writeOpeningTag=function(e,r){r=r||{};var i=this._getRenderManager();var s;i.write("<");i.writeEscaped(e);if(r.classes){for(var a=0;a<r.classes.length;a++){i.addClass(t(r.classes[a]))}i.writeClasses()}if(r.attributes){for(s in r.attributes){i.writeAttribute(s,r.attributes[s])}}if(r.escapedAttributes){for(s in r.escapedAttributes){i.writeAttributeEscaped(s,r.escapedAttributes[s])}}i.write(">")};r.prototype.writeClosingTag=function(e){var t=this._getRenderManager();t.write("</");t.writeEscaped(e);t.write(">")};return r},true);
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/util/StringSliderTooltip",["sap/m/SliderTooltipBase"],function(t){"use strict";var e=t.extend("sap.suite.ui.commons.util.StringSliderTooltip",{metadata:{library:"sap.suite.ui.commons.util",properties:{mapFunction:{type:"any",group:"Misc"},fetchValue2:{type:"boolean",group:"Misc",defaultValue:false}}},renderer:function(t,e){var i=e.getStringValue();if(!i){return}t.write("<div");t.writeControlData(e);t.addClass("sapMSliderTooltip");t.addClass("sapSuiteUiCommonsStringSliderTooltip");t.writeClasses(e);t.write(">");t.writeEscaped(i);t.write("</div>")}});e.prototype.getStringValue=function(){var t=this.getParent();if(!t){return null}var e=this.getFetchValue2()?t.getValue2():t.getValue();var i=this.getMapFunction()||String;return i(e)};e.prototype.sliderValueChanged=function(t){var e=this.getMapFunction()||String,i=e(t);this.$().text(i)};return e});
sap.ui.require.preload({
	"sap/suite/ui/commons/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.suite.ui.commons","type":"library","embeds":[],"applicationVersion":{"version":"1.102.0"},"title":"SAP UI library: sap.suite.ui.commons","description":"SAP UI library: sap.suite.ui.commons","ach":"CA-UI5-SC","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.102","libs":{"sap.ui.core":{"minVersion":"1.102.0"},"sap.m":{"minVersion":"1.102.0"},"sap.suite.ui.microchart":{"minVersion":"1.102.0","lazy":true},"sap.ui.ux3":{"minVersion":"1.102.0","lazy":true},"sap.ui.comp":{"minVersion":"1.102.0","lazy":true},"sap.viz":{"minVersion":"1.102.0","lazy":true},"sap.ui.commons":{"minVersion":"1.102.0","lazy":true}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}'
});
