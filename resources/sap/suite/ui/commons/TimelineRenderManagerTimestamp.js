/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define("sap/suite/ui/commons/TimelineRenderManagerTimestamp",["sap/ui/base/ManagedObject","sap/m/RadioButtonGroup","sap/m/RadioButton","sap/m/Panel","sap/m/DateTimePicker","sap/m/Label"],function(e,t,i,a,n,s){"use strict";var o={RANGE:0,START:1,END:2};var r=e.extend("sap.suite.ui.commons.TimelineRenderManagerTimestamp",{constructor:function(t,i,a,n){var s;var o;this.getText=n.getText.bind(n);this.getTimestampPanelPicker=function(){if(!s){s=this._createTimestampPanelPicker()}return s};this.getTimestampPanelRadio=function(){if(!o){o=this._createTimestampPanelRadio()}return o};e.call(this,t,i,a);this.setVisible(false)},metadata:{events:{dateChanged:{}}}});r.prototype._createTimestampPanelPicker=function(){var e=this.getId()+"-timestamp-panel-picker";var t;var i=new s({text:this.getText("TIMELINE_FROM")+":"});var o=new s({text:this.getText("TIMELINE_TO")+":"});var r=new a({id:e,content:[i,new s({text:this.getText("TIMELINE_NOW"),visible:false}),new n({width:"auto",ariaLabelledBy:[i],change:this._handlerTimePickerRange.bind(this)}),o,new s({text:this.getText("TIMELINE_NOW"),visible:false}),new n({width:"auto",ariaLabelledBy:[o],change:this._handlerTimePickerRange.bind(this)})]});r.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanel");t=r.getContent();t[1].addStyleClass("sapSuiteUiCommonsTimelineRangeLabelNow");t[2].addStyleClass("sapSuiteUiCommonsTimelineRangeDatePicker");t[4].addStyleClass("sapSuiteUiCommonsTimelineRangeLabelNow");t[5].addStyleClass("sapSuiteUiCommonsTimelineRangeDatePicker");return r};r.prototype._createTimestampPanelRadio=function(){var e=this.getId()+"-timestamp-panel-radio";return new a({id:e,content:[new t({columns:3,select:this.handlerSelectRadioButton.bind(this),buttons:[new i({id:e+"-range-of-dates",text:this.getText("TIMELINE_TIMESTAMP_RANGE_OF_DATES")}),new i({id:e+"-starting-date",text:this.getText("TIMELINE_TIMESTAMP_STARTING_DATE")}),new i({id:e+"-ending-date",text:this.getText("TIMELINE_TIMESTAMP_ENDING_DATE")})]})]})};r.prototype.resizeDialog=function(e){e.getFilterContent()._getDialog().setContentWidth("50em")};r.prototype.setVisible=function(e){this.getTimestampPanelPicker().setVisible(e);this.getTimestampPanelRadio().setVisible(e)};r.prototype.setPickerView=function(e,t){t.getContent()[1].setVisible(e===o.END);t.getContent()[2].setVisible(e===o.START||e===o.RANGE);t.getContent()[4].setVisible(e===o.START);t.getContent()[5].setVisible(e===o.END||e===o.RANGE)};r.prototype.handlerSelectRadioButton=function(e){this.setPickerView(e.getParameter("selectedIndex"),this.getTimestampPanelPicker())};r.prototype.getVisible=function(){return this.getTimestampPanelPicker().getVisible()&&this.getTimestampPanelRadio().getVisible()};r.prototype.getStartDate=function(){var e;var t=this.getTimestampPanelPicker().getContent()[2];if(t.getVisible()){e=t.getDateValue()}else{e=function(){return new Date}}return e};r.prototype.clearDates=function(){var e=this.getTimestampPanelPicker().getContent()[2],t=this.getTimestampPanelPicker().getContent()[5];e.setDateValue();t.setDateValue()};r.prototype.getEndDate=function(){var e;var t=this.getTimestampPanelPicker().getContent()[5];if(t.getVisible()){e=t.getDateValue()}else{e=function(){return new Date}}return e};r.prototype.destroy=function(){this.getTimestampPanelPicker().destroy();this.getTimestampPanelRadio().destroy();e.prototype.destroy.call(this)};r.prototype._handlerTimePickerRange=function(e){var t=this.getTimestampPanelPicker().getContent()[2],i=this.getTimestampPanelPicker().getContent()[5];var a=e.getSource();var n=a.getDateValue();if(a===t){if(i.getDateValue()<n){i.setInitialFocusedDateValue(n)}i.setMinDate(n)}else if(a===i){if(t.getDateValue()>n){t.setInitialFocusedDateValue(n)}t.setMaxDate(n)}};return r});