/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/m/Image","sap/ui/core/Control","sap/m/Text","sap/ui/core/library","./PictureZoomInRenderer"],function(t,e,i,o,n,s){"use strict";var r=i.extend("sap.suite.ui.commons.PictureZoomIn",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{description:{type:"string",group:"Misc",defaultValue:null},imageSrc:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null}},aggregations:{busyIndicator:{type:"sap.ui.core.Control",multiple:false}}}});r.prototype.init=function(){var i=this;t(window).resize(function(t){i._calculateImg()});t(document).on("keyup",function(e){if(e.keyCode===27){i.exit();t(document.getElementById(i.getId())).remove()}});if(typeof t(document).tap==="function"){t(document).tap(function(){i.exit();t(document.getElementById(i.getId())).remove()})}this._oImage=new e(this.getId()+"-image",{}).addStyleClass("sapSuiteUiCommonsPictureZoomInImg");this._oDescription=new o(this.getId()+"-description",{textAlign:n.TextAlign.Center});this._oDescription.addStyleClass("sapSuiteUiCommonsPictureZoomInDesc")};r.prototype.onBeforeRendering=function(){this._oImage.setSrc(this.getImageSrc());this._oDescription.setText(this.getDescription())};r.prototype._calculateImg=function(){var e=this.getId()+"-image"?window.document.getElementById(this.getId()+"-image"):null;var i=t(document.getElementById(this.getId()+"-description"));if(!e){return}var o=t(document.getElementById(this.getId()));if(e.naturalWidth<o.width()&&e.naturalHeight<o.height()-i.outerHeight(true)){e.style.width=e.naturalWidth+"px";e.style.height=e.naturalHeight+"px"}else if(e.naturalHeight/(o.height()-i.outerHeight(true))>e.naturalWidth/o.width()){e.style.height=""+(98-i.outerHeight(true)*100/o.height())+"%";e.style.width="auto"}else{e.style.width="96%";e.style.height="auto"}var n=t(document.getElementById(this.getId()+"-image"));var s=o.width();var r=n.width();var a=n.height();if(s>=r){n.css("left",(s-r)/2+"px")}var u=(o.height()-a-i.outerHeight(true))/2;n.css("top",u+"px");i.css("top",u+"px")};r.prototype.onAfterRendering=function(){var e=this;var i=t(document.getElementById(this.getId()+"-image"));var o=t(document.getElementById(this.getId()+"-busy"));i.hide();if(o.length){o.show()}else{this.setBusy(true)}i.onload=function(){if(o.length){o.hide()}else{e.setBusy(false)}i.show();e._calculateImg()}};r.prototype.exit=function(){if(this._oImage){this._oImage.destroy()}if(this._oDescription){this._oDescription.destroy()}};return r});