/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/m/Text","sap/m/Image","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/Icon","sap/ui/core/HTML","sap/ui/Device","sap/ui/events/KeyCodes","sap/base/util/deepEqual","./GenericTile2X2Renderer"],function(e,t,i,s,o,a,r,n,l,p,u,h){"use strict";var d=o.extend("sap.suite.ui.commons.GenericTile2X2",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{header:{type:"string",group:"Appearance",defaultValue:null},subheader:{type:"string",group:"Appearance",defaultValue:null},failedText:{type:"string",group:"Appearance",defaultValue:null},size:{type:"sap.suite.ui.commons.InfoTileSize",group:"Misc",defaultValue:"Auto"},backgroundImage:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},headerImage:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},frameType:{type:"sap.suite.ui.commons.FrameType",group:"Misc",defaultValue:"OneByOne"},state:{type:"sap.suite.ui.commons.LoadState",group:"Misc",defaultValue:"Loaded"},imageDescription:{type:"string",group:"Misc",defaultValue:null}},aggregations:{tileContent:{type:"sap.suite.ui.commons.TileContent2X2",multiple:true,singularName:"tileContent"},icon:{type:"sap.ui.core.Control",multiple:false},titleText:{type:"sap.m.Text",multiple:false,visibility:"hidden"},failedMessageText:{type:"sap.m.Text",multiple:false,visibility:"hidden"}},events:{press:{}}}});d.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oTitle=new i(this.getId()+"-title",{maxLines:2});this._oTitle.addStyleClass("sapSuiteGTTitle");this._oTitle.cacheLineHeight=false;this.setAggregation("titleText",this._oTitle);this._sFailedToLoad=this._rb.getText("INFOTILE_CANNOT_LOAD_TILE");this._oFailed=new i(this.getId()+"-failed-txt",{maxLines:2});this._oFailed.cacheLineHeight=false;this._oFailed.addStyleClass("sapSuiteGTFailed");this.setAggregation("failedMessageText",this._oFailed);this._oWarningIcon=new r(this.getId()+"-warn-icon",{src:"sap-icon://notification",size:"1.37rem"});this._oWarningIcon.addStyleClass("sapSuiteGTFtrFldIcnMrk");this._oBusy=new n(this.getId()+"-overlay");this._oBusy.addStyleClass("sapSuiteGenericTile2X2Loading");this._oBusy.setBusyIndicatorDelay(0)};d.prototype.ontap=function(e){if(l.browser.internet_explorer){this.$().focus()}this.firePress()};d.prototype.onkeydown=function(e){if(e.which==p.SPACE){e.preventDefault()}};d.prototype.onkeyup=function(e){if(e.which==p.ENTER||e.which==p.SPACE){this.firePress();e.preventDefault()}};d.prototype._handleOvrlClick=function(e){e.stopPropagation()};d.prototype.onBeforeRendering=function(){var e=this.getTileContent().length;for(var t=0;t<e;t++){this.getTileContent()[t].setDisabled(this.getState()==="Disabled",true)}var i=this.getFailedText();var s=i?i:this._sFailedToLoad;this._oFailed.setText(s);this._oFailed.setTooltip(s)};d.prototype.onAfterRendering=function(){this._checkFooter(this.getState());if(this.getState()==="Disabled"){this._oBusy.$().on("tap",e.proxy(this._handleOvrlClick,this))}else{this._oBusy.$().off("tap",this._handleOvrlClick)}};d.prototype.getHeader=function(){return this._oTitle.getText()};d.prototype.setHeader=function(e){this._oTitle.setProperty("text",e,true);this.invalidate();return this};d.prototype.exit=function(){this._oWarningIcon.destroy();if(this._oImage){this._oImage.destroy()}this._oBusy.destroy()};d.prototype.setHeaderImage=function(e){var t=!u(this.getHeaderImage(),e);if(t){if(this._oImage){this._oImage.destroy();this._oImage=undefined}if(e){this._oImage=a.createControlByURI({id:this.getId()+"-icon-image",src:e},s);this._oImage.addStyleClass("sapSuiteGTHdrIconImage")}}return this.setProperty("headerImage",e)};d.prototype.attachEvent=function(e,t,i,s){o.prototype.attachEvent.call(this,e,t,i,s);if(this.hasListeners("press")&&this.getState()!="Disabled"){this.$().attr("tabindex",0).addClass("sapSuiteUiCommonsPointer")}return this};d.prototype.setState=function(e,t){this._checkFooter(e);this.setProperty("state",e,t);return this};d.prototype._checkFooter=function(t){var i=e(document.getElementById(this.getId())).find(".sapSuiteTileCntFtrTxt");if(t==="Failed"&&i.is(":visible")){i.hide()}else if(i.is(":hidden")){i.show()}};d.prototype.detachEvent=function(e,t,i){o.prototype.detachEvent.call(this,e,t,i);if(!this.hasListeners("press")){this.$().removeAttr("tabindex").removeClass("sapSuiteUiCommonsPointer")}return this};d.prototype.onsaptouchstart=function(e){this.addStyleClass("sapSuiteGTHvrOutln")};d.prototype.onsaptouchend=function(e){this.removeStyleClass("sapSuiteGTHvrOutln")};d.prototype.ontouchstart=function(e){this.addStyleClass("sapSuiteGTHvrOutln")};d.prototype.ontouchend=function(e){this.removeStyleClass("sapSuiteGTHvrOutln")};d.prototype.getHeaderAltText=function(){var e="";var t=true;if(this.getHeader()){e+=this.getHeader();t=false}if(this.getSubheader()){e+=(t?"":"\n")+this.getSubheader();t=false}if(this.getImageDescription()){e+=(t?"":"\n")+this.getImageDescription()}return e};d.prototype.getBodyAltText=function(){var e="";var t=true;var i=this.getTileContent();for(var s=0;s<i.length;s++){if(i[s].getAltText){e+=(t?"":"\n")+i[s].getAltText();t=false}else if(i[s].getTooltip_AsString()){e+=(t?"":"\n")+i[s].getTooltip_AsString();t=false}}return e};d.prototype.getAltText=function(){return this.getHeaderAltText()+"\n"+this.getBodyAltText()};return d});