/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/m/Text","./library","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/Device","sap/ui/core/Icon","sap/base/Log","./ProcessFlowNodeRenderer"],function(e,s,o,t,a,l,r,i,d){"use strict";var n=t.extend("sap.suite.ui.commons.ProcessFlowNode",{metadata:{library:"sap.suite.ui.commons",properties:{title:{type:"string",group:"Misc",defaultValue:null},isTitleClickable:{type:"boolean",group:"Behavior",defaultValue:false,deprecated:true},laneId:{type:"string",group:"Misc",defaultValue:null},nodeId:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.suite.ui.commons.ProcessFlowNodeState",group:"Appearance",defaultValue:"Neutral"},type:{type:"sap.suite.ui.commons.ProcessFlowNodeType",group:"Appearance",defaultValue:"Single"},children:{type:"any[]",group:"Misc",defaultValue:null},titleAbbreviation:{type:"string",group:"Data",defaultValue:null},stateText:{type:"string",group:"Data",defaultValue:null},texts:{type:"string[]",group:"Misc",defaultValue:null},highlighted:{type:"boolean",group:"Appearance",defaultValue:false},focused:{type:"boolean",group:"Appearance",defaultValue:false},tag:{type:"object",group:"Misc",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{zoomLevelOneContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelTwoContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelThreeContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelFourContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},ariaProperties:{type:"sap.suite.ui.commons.AriaProperties",multiple:false,group:"Misc"}},associations:{parents:{type:"sap.suite.ui.commons.ProcessFlowNode",multiple:true,singularName:"parent"}},events:{titlePress:{deprecated:true,parameters:{oEvent:{type:"object"}}},press:{parameters:{oEvent:{type:"object"}}}}}});n.prototype._zoomLevel=o.ProcessFlowZoomLevel.Two;n.prototype._tag=null;n.prototype._displayState=o.ProcessFlowDisplayState.Regular;n.prototype._oResBundle=null;n.prototype._mergedLaneId=null;n.prototype._foldedCorner=false;n.prototype._foldedCornerControl=null;n.prototype._parent=null;n.prototype._headerControl=null;n.prototype._stateTextControl=null;n.prototype._iconControl=null;n.prototype._text1Control=null;n.prototype._text2Control=null;n.prototype._navigationFocus=false;n.prototype._sMouseEvents=" mousedown mouseup mouseenter mouseleave ";n.prototype._sMouseTouchEvents=l.support.touch?"saptouchstart saptouchcancel touchstart touchend":"";n.prototype._grabCursorClass="sapSuiteUiGrabCursorPF";n.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorPF";n.prototype._nodeHoverClass="sapSuiteUiCommonsProcessFlowNodeHover";n.prototype._nodeActiveClass="sapSuiteUiCommonsProcessFlowNodeActive";n.prototype._nodePlannedClass="sapSuiteUiCommonsProcessFlowNodeStatePlanned";n.prototype._nodePlannedClassIdentifier="."+n.prototype._nodePlannedClass;n.prototype._nodeFCHoverClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeHover";n.prototype._nodeFCActiveClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeActive";n.prototype._nodeFCIconHoverClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeIconHover";n.prototype._nodeAggregatedClass="sapSuiteUiCommonsProcessFlowNodeAggregated";n.prototype._nodeAggregatedHoveredClass="sapSuiteUiCommonsProcessFlowNodeAggregatedHovered";n.prototype._nodeAggregatedDimmedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmed";n.prototype._nodeAggregatedFocusedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedFocused";n.prototype._nodeAggregatedPressedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedPressed";n.prototype._nodeAggregatedDimmedPressedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedPressed";n.prototype._nodeAggregatedDimmedHoveredClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedHovered";n.prototype._nodeAggregatedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedZoomLevel4";n.prototype._nodeAggregatedHoveredClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedHoveredZoomLevel4";n.prototype._nodeAggregatedPressedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedPressedZoomLevel4";n.prototype._nodeAggregatedDimmedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedZoomLevel4";n.prototype._nodeAggregatedFocusedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedFocusedZoomLevel4";n.prototype._nodeAggregatedDimmedPressedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedPressedZoomLevel4";n.prototype._nodeAggregatedDimmedHoveredClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedHoveredZoomLevel4";n.prototype.init=function(){a.addIcon("context-menu","businessSuite","PFBusinessSuiteInAppSymbols","e02b",true);if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons")}};n.prototype.exit=function(){if(this._foldedCornerControl){this._foldedCornerControl.destroy();this._foldedCornerControl=null}if(this._headerControl){this._headerControl.destroy();this._headerControl=null}if(this._stateTextControl){this._stateTextControl.destroy();this._stateTextControl=null}if(this._iconControl){this._iconControl.destroy();this._iconControl=null}if(this._text1Control){this._text1Control.destroy();this._text1Control=null}if(this._text2Control){this._text2Control.destroy();this._text2Control=null}this.$().off(this._sMouseEvents,this._handleEvents);if(l.support.touch){this.$().off(this._sMouseTouchEvents,this._handleEvents)}};n.prototype.onBeforeRendering=function(){this.$().off(this._sMouseEvents,this._handleEvents);if(l.support.touch){this.$().off(this._sMouseTouchEvents,this._handleEvents)}};n.prototype.onAfterRendering=function(){this._sMouseEvents=this._sMouseEvents.concat(" ",this._sMouseTouchEvents);this.$().bind(this._sMouseEvents,e.proxy(this._handleEvents,this))};n.prototype._handleClick=function(e){if(this._parent&&this._parent._bHighlightedMode&&this._getDisplayState()===o.ProcessFlowDisplayState.Dimmed||this._getDisplayState()===o.ProcessFlowDisplayState.DimmedFocused){i.info("Event ignored, node in dimmed state.")}else if(this._parent){this.getParent()._changeNavigationFocus(this.getParent()._getLastNavigationFocusElement(),this);if(e.target.id.indexOf("title")>=0&&this.getIsTitleClickable()){this._parent.fireNodeTitlePress(this)}else{this._parent.fireNodePress(this)}}if(e&&!e.isPropagationStopped()){e.stopPropagation()}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation()}};n.prototype.onclick=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault()}this._handleClick(e)};n.prototype._handleEvents=function(s){var t=this.$().find("*");var a=this.$().attr("id");var r=this._getFoldedCorner();var i=this.getParent();var d=t.not(".sapUiIconTitle");if(s&&!s.isDefaultPrevented()){s.preventDefault()}if(this._parent&&this._parent._bHighlightedMode&&this._getDimmed()){return}if(this.getType()===o.ProcessFlowNodeType.Aggregated){this._adjustClassesForAggregation(s)}var n=sap.ui.require("sap/suite/ui/commons/ProcessFlow");if(!n){return}function C(e){return e.replace(/([:.\[\],=@])/g,"\\$1")}switch(s.type){case n._mouseEvents.mouseDown:case"keydown":this.$().removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);t.removeClass(this._nodeHoverClass);d.addClass(this._nodeActiveClass);if(r){e(document.getElementById(a)).removeClass(this._nodeFCHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeFCIconHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeFCIconHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass)}break;case n._mouseEvents.mouseUp:if(i.$().hasClass(this._grabbingCursorClass)){i.$().removeClass(this._grabbingCursorClass)}this.$().removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);t.removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);if(r){e(document.getElementById(a)).removeClass(this._nodeHoverClass+" "+this._nodeFCActiveClass).addClass(this._nodeFCHoverClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeHoverClass+" "+this._nodeFCActiveClass).addClass(this._nodeFCIconHoverClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeHoverClass+" "+this._nodeFCActiveClass).addClass(this._nodeFCIconHoverClass)}break;case n._mouseEvents.mouseEnter:if(!i.$().hasClass(this._grabbingCursorClass)){this.$().addClass(this._nodeHoverClass);d.addClass(this._nodeHoverClass);this.$().find(this._nodePlannedClassIdentifier).find("*").addClass(this._nodePlannedClass);if(r){e(document.getElementById(a)).removeClass(this._nodeHoverClass).addClass(this._nodeFCHoverClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeHoverClass).addClass(this._nodeFCIconHoverClass)}}break;case n._mouseEvents.mouseLeave:case"keyup":this.$().removeClass(this._nodeActiveClass+" "+this._nodeHoverClass);t.removeClass(this._nodeActiveClass+" "+this._nodeHoverClass);if(r){e(document.getElementById(a)).removeClass(this._nodeFCActiveClass+" "+this._nodeFCHoverClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeFCActiveClass+" "+this._nodeFCIconHoverClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeFCActiveClass+" "+this._nodeFCIconHoverClass)}if(!i.$().hasClass(this._grabbingCursorClass)){i.$().addClass(this._grabCursorClass)}break;case n._mouseEvents.touchStart:if(l.support.touch){this.$().addClass(this._nodeActiveClass);d.addClass(this._nodeActiveClass);if(r){e(document.getElementById(a)).removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass)}}break;case n._mouseEvents.sapTouchStart:this.$().removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);t.removeClass(this._nodeHoverClass);d.addClass(this._nodeActiveClass);if(r){e(document.getElementById(a)).removeClass(this._nodeFCHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeFCIconHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeFCIconHoverClass+" "+this._nodeActiveClass).addClass(this._nodeFCActiveClass)}break;case n._mouseEvents.touchEnd:if(l.support.touch){this.$().removeClass(this._nodeActiveClass+" "+this._nodeHoverClass);t.removeClass(this._nodeActiveClass+" "+this._nodeHoverClass);if(r){e(document.getElementById(a)).removeClass(this._nodeFCActiveClass+" "+this._nodeFCHoverClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeFCActiveClass+" "+this._nodeFCIconHoverClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeFCActiveClass+" "+this._nodeFCIconHoverClass)}}this._handleClick(s);break;case n._mouseEvents.sapTouchCancel:this.$().removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);t.removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);if(r){e(document.getElementById(a)).removeClass(this._nodeFCActiveClass+" "+this._nodeHoverClass).addClass(this._nodeFCHoverClass);e("div[id^="+C(a)+"][id$=-corner-container]").removeClass(this._nodeFCActiveClass+" "+this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);e("span[id^="+C(a)+"][id$=-corner-icon]").removeClass(this._nodeFCActiveClass+" "+this._nodeHoverClass).addClass(this._nodeFCIconHoverClass)}break;default:break}};n.prototype._setMergedLaneId=function(e){this._mergedLaneId=e};n.prototype._setParentFlow=function(e){this._parent=e};n.prototype._getFoldedCornerControl=function(){if(this._foldedCornerControl){this._foldedCornerControl.destroy()}this._foldedCornerControl=new r({id:this.getId()+"-corner-icon",src:a.getIconURI("context-menu","businessSuite"),visible:true});if(this._parent&&!this._parent._bHighlightedMode||!this._getDimmed()){this._foldedCornerControl.addStyleClass("sapUiIconPointer")}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel4");break;default:break}this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1");return this._foldedCornerControl};n.prototype._getHeaderControl=function(){if(this._headerControl){this._headerControl.destroy()}var e=0;var t="";var a=true;var l=this.getTitle();switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:e=3;break;case o.ProcessFlowZoomLevel.Two:e=3;break;case o.ProcessFlowZoomLevel.Three:e=2;l=this.getTitleAbbreviation();break;case o.ProcessFlowZoomLevel.Four:l="";e=0;t="0px";a=false;break;default:break}this._headerControl=new s({id:this.getId()+"-nodeid-anchor-title",text:l,visible:a,wrapping:true,wrappingType:sap.m.WrappingType.Hyphenated,width:t,maxLines:e});if(this.getIsTitleClickable()){this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleClickable")}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel4");break;default:break}this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Title");return this._headerControl};n.prototype._getIconControl=function(){if(this._iconControl){this._iconControl.destroy()}var e=null;var s=true;switch(this.getState()){case o.ProcessFlowNodeState.Positive:e="sap-icon://message-success";break;case o.ProcessFlowNodeState.Negative:case o.ProcessFlowNodeState.PlannedNegative:e="sap-icon://message-error";break;case o.ProcessFlowNodeState.Planned:e=null;break;case o.ProcessFlowNodeState.Neutral:e="sap-icon://process";break;case o.ProcessFlowNodeState.Critical:e="sap-icon://message-warning";break;default:break}this._iconControl=new r({id:this.getId()+"-icon",src:e,visible:s});if(this._parent&&!this._parent._bHighlightedMode||!this._getDimmed()){this._iconControl.addStyleClass("sapUiIconPointer")}var t=sap.ui.getCore().getConfiguration().getRTL();if(t){this._iconControl.addStyleClass("sapUiIconSuppressMirrorInRTL")}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:case o.ProcessFlowZoomLevel.Two:var a="sapSuiteUiCommonsProcessFlowNode3StateIconLeft";if(t){a="sapSuiteUiCommonsProcessFlowNode3StateIconRight"}this._iconControl.addStyleClass(a);break;case o.ProcessFlowZoomLevel.Three:case o.ProcessFlowZoomLevel.Four:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconCenter");break;default:break}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel4");break;default:break}this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIcon");return this._iconControl};n.prototype._getStateTextControl=function(){if(this._stateTextControl){this._stateTextControl.destroy()}var e=2;var t="";var a=true;var l=this.getState();var r=l===o.ProcessFlowNodeState.Planned?"":this.getStateText();if(l===o.ProcessFlowNodeState.PlannedNegative&&r.length===0){r="Planned Negative"}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:case o.ProcessFlowZoomLevel.Two:case o.ProcessFlowZoomLevel.Three:e=2;break;case o.ProcessFlowZoomLevel.Four:r="";e=0;t="0px";a=false;break;default:break}this._stateTextControl=new s({id:this.getId()+"-stateText",text:r,visible:a,wrapping:true,wrappingType:sap.m.WrappingType.Hyphenated,width:t,maxLines:e});switch(l){case o.ProcessFlowNodeState.Positive:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePositive");break;case o.ProcessFlowNodeState.Negative:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case o.ProcessFlowNodeState.Planned:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePlanned");break;case o.ProcessFlowNodeState.Neutral:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateNeutral");break;case o.ProcessFlowNodeState.PlannedNegative:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePlanned");break;case o.ProcessFlowNodeState.Critical:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateCritical");break;default:break}switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel4");break;default:break}this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateText");return this._stateTextControl};n.prototype._getZoomLevel=function(){return this._zoomLevel};n.prototype._setZoomLevel=function(e){this._zoomLevel=e};n.prototype._setNavigationFocus=function(e){this._navigationFocus=e};n.prototype._getNavigationFocus=function(){return this._navigationFocus};n.prototype._setFoldedCorner=function(e){this._foldedCorner=e};n.prototype._getFoldedCorner=function(){return this._foldedCorner};n.prototype._setTag=function(e){this._tag=e};n.prototype._getTag=function(){return this._tag};n.prototype._setDimmedState=function(){var e=this.getFocused();var s=this.getHighlighted();var t=this.getSelected();if(s||t){throw new Error("Cannot set highlighed or selected node to dimmed state"+this.getNodeId())}this._displayState=o.ProcessFlowDisplayState.Dimmed;if(e){this._displayState=o.ProcessFlowDisplayState.DimmedFocused}};n.prototype._setRegularState=function(){this._displayState=o.ProcessFlowDisplayState.Regular};n.prototype._getLane=function(){var e=this.getParent();var s=null;if(e){s=e._getLane(this.getLaneId())}return s};n.prototype._getDimmed=function(){return this._displayState===o.ProcessFlowDisplayState.Dimmed||this._displayState===o.ProcessFlowDisplayState.DimmedFocused};n.prototype._getAriaText=function(){var e=this.getParents().length;var s=this._getCurrentZoomLevelContent();var t=0;if(this._hasChildren()){t=this.getChildren().length}var a="";var l=this._getLane();if(l){a=l.getText();if(!a){a=this._oResBundle.getText("PF_VALUE_UNDEFINED")}}var r="";var i=this.getTexts();if(i){for(var d in i){if(i[d]){var n=i[d].concat(", ");r=r.concat(n)}}r=r.slice(0,-1)}var C=this.getTitle();if(!C&&!s){C=this._oResBundle.getText("PF_VALUE_UNDEFINED")}var c=this.getState();if(!c){c=this._oResBundle.getText("PF_VALUE_UNDEFINED")}var m=this.getStateText();if(this.getState()===o.ProcessFlowNodeState.Planned){m=""}var p="";if(this.getType()===o.ProcessFlowNodeType.Aggregated){p=this._oResBundle.getText("PF_ARIA_TYPE")}return this._oResBundle.getText("PF_ARIA_NODE",[C,c,m,a,r,e,t,p])};n.prototype._getDisplayState=function(){var e=this.getFocused();var s=this.getHighlighted();var t=this.getSelected();if(this._displayState===o.ProcessFlowDisplayState.Dimmed||this._displayState===o.ProcessFlowDisplayState.DimmedFocused){return this._displayState}if(t){if(s){if(e){this._displayState=o.ProcessFlowDisplayState.SelectedHighlightedFocused}else{this._displayState=o.ProcessFlowDisplayState.SelectedHighlighted}}else if(e){this._displayState=o.ProcessFlowDisplayState.SelectedFocused}else{this._displayState=o.ProcessFlowDisplayState.Selected}}else if(e&&s){this._displayState=o.ProcessFlowDisplayState.HighlightedFocused}else if(e){this._displayState=o.ProcessFlowDisplayState.RegularFocused}else if(s){this._displayState=o.ProcessFlowDisplayState.Highlighted}else if(this._displayState===o.ProcessFlowDisplayState.HighlightedFocused||this._displayState===o.ProcessFlowDisplayState.RegularFocused||this._displayState===o.ProcessFlowDisplayState.Highlighted||this._displayState===o.ProcessFlowDisplayState.Selected){this._setRegularState()}return this._displayState};n.prototype._createTextControlInternal=function(e,t,a){if(a){a.destroy()}var l=2;var r="";var i=true;var d=t;switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:case o.ProcessFlowZoomLevel.Two:l=2;break;case o.ProcessFlowZoomLevel.Three:l=0;r="0px";i=false;break;case o.ProcessFlowZoomLevel.Four:d="";l=0;r="0px";i=false;break;default:break}if(this.getState){a=new s({id:this.getId()+e,text:d,visible:i,wrapping:true,wrappingType:sap.m.WrappingType.Hyphenated,width:r,maxLines:l})}return a};n.prototype._createText1Control=function(){var e=this.getTexts();if(e&&e.length>0){e=e[0]}this._text1Control=this._createTextControlInternal("-text1-control",e,this._text1Control);switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel1");this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel2");this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:break}this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Text");return this._text1Control};n.prototype._createText2Control=function(){var e=this.getTexts();if(e&&e.length>1){e=e[1]}else{e=""}this._text2Control=this._createTextControlInternal("-text2-control",e,this._text2Control);switch(this._getZoomLevel()){case o.ProcessFlowZoomLevel.One:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case o.ProcessFlowZoomLevel.Two:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case o.ProcessFlowZoomLevel.Three:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case o.ProcessFlowZoomLevel.Four:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:break}this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Text");return this._text2Control};n.prototype._adjustClassesForAggregation=function(e){var s=[o.ProcessFlowDisplayState.RegularFocused,o.ProcessFlowDisplayState.HighlightedFocused,o.ProcessFlowDisplayState.DimmedFocused];var t=[o.ProcessFlowDisplayState.DimmedFocused,o.ProcessFlowDisplayState.Dimmed];var a=sap.ui.require("sap/suite/ui/commons/ProcessFlow");if(!a){return}switch(e.type){case a._mouseEvents.mouseDown:case a._mouseEvents.touchStart:case a._mouseEvents.sapTouchStart:l(this);break;case a._mouseEvents.mouseUp:r(this);break;case a._mouseEvents.sapTouchCancel:case a._mouseEvents.touchEnd:r(this);d(this);break;case a._mouseEvents.mouseEnter:i(this);break;case a._mouseEvents.mouseLeave:r(this);d(this);break;default:break}function l(e){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){if(t&&Array.prototype.indexOf.call(t,e._getDisplayState())>=0){e.$().removeClass(e._nodeAggregatedDimmedHoveredClassZoomLevel4).addClass(e._nodeAggregatedDimmedPressedClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedClassZoomLevel4).removeClass(e._nodeAggregatedHoveredClassZoomLevel4).addClass(e._nodeAggregatedPressedClassZoomLevel4)}}else if(t&&Array.prototype.indexOf.call(t,e._getDisplayState())>=0){e.$().removeClass(e._nodeAggregatedDimmedHoveredClass).addClass(e._nodeAggregatedDimmedPressedClass)}else{e.$().removeClass(e._nodeAggregatedClass).removeClass(e._nodeAggregatedHoveredClass).addClass(e._nodeAggregatedPressedClass)}}function r(e){if(s&&Array.prototype.indexOf.call(s,e._getDisplayState())>=0&&(e.$().hasClass(e._nodeAggregatedPressedClass)||e.$().hasClass(e._nodeAggregatedPressedClassZoomLevel4))){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedPressedClassZoomLevel4).addClass(e._nodeAggregatedFocusedClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedPressedClass).addClass(e._nodeAggregatedFocusedClass)}}else if(e.$().hasClass(e._nodeAggregatedDimmedPressedClass)||e.$().hasClass(e._nodeAggregatedDimmedPressedClassZoomLevel4)){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedDimmedPressedClassZoomLevel4).addClass(e._nodeAggregatedDimmedHoveredClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedDimmedPressedClass).addClass(e._nodeAggregatedDimmedHoveredClass)}}else if(e.$().hasClass(e._nodeAggregatedPressedClass)||e.$().hasClass(e._nodeAggregatedPressedClassZoomLevel4)){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedPressedClassZoomLevel4).addClass(e._nodeAggregatedClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedPressedClass).addClass(e._nodeAggregatedClass)}}}function i(e){if(t&&Array.prototype.indexOf.call(t,e._getDisplayState())>=0){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedDimmedClassZoomLevel4).addClass(e._nodeAggregatedDimmedHoveredClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedDimmedClass).addClass(e._nodeAggregatedDimmedHoveredClass)}}else if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().addClass(e._nodeAggregatedHoveredClassZoomLevel4)}else{e.$().addClass(e._nodeAggregatedHoveredClass)}}function d(e){if(t&&Array.prototype.indexOf.call(t,e._getDisplayState())>=0){if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedDimmedHoveredClassZoomLevel4).addClass(e._nodeAggregatedDimmedClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedDimmedHoveredClass).addClass(e._nodeAggregatedDimmedClass)}}else if(e._getZoomLevel()===o.ProcessFlowZoomLevel.Four){e.$().removeClass(e._nodeAggregatedHoveredClassZoomLevel4)}else{e.$().removeClass(e._nodeAggregatedHoveredClass)}}};n.prototype._hasChildren=function(){var e=this.getChildren();return e&&e.length>0};n.prototype._hasChildrenWithNodeId=function(e){var s=this.getChildren();if(s&&s.length>0){for(var o=0;o<s.length;o++){if(typeof s[o]==="object"&&s[o].nodeId===e||s[o]===e){return true}}}return false};n.prototype.getLaneId=function(){if(this._mergedLaneId){return this._mergedLaneId}else{return this.getProperty("laneId")}};n.prototype._getCurrentZoomLevelContent=function(){var e=this.getParent();if(!e||e.getMetadata().getName()!=="sap.suite.ui.commons.ProcessFlow"){return null}return this["getZoomLevel"+e.getZoomLevel()+"Content"]()};return n});