/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/thirdparty/jquery"],function(a){"use strict";var e={};e.formatData=function(e,t){if(!(e.data&&e.data.val&&e.data.val.length>0)){return e.data}var i=e.data,r=sap.viz.api.env.Format.format,n=a.extend(true,{},i),f=n.val.hasOwnProperty("timeMeasure")?n.val.timeMeasure:-1,l=n.val.hasOwnProperty("timeDimensions")?n.val.timeDimensions:[],u=t.formatString,o=null,v={},s;if(typeof u==="string"){o=u}else if(u instanceof Object){if(u.formatPattern||u.dataUnit){o=u}else{v=u}}if(f!==-1){var m=n.val.filter(function(a){return a.type&&a.type.toLowerCase()==="measure"})[f];m.value=new Date(m.value)}if(e.timeTooltipData&&t.chartType.indexOf("time")>-1){var d=false;if(u){l.forEach(function(a){if(n.val[a]&&n.val[a].id){var e=v[n.val[a].id];if(e&&(typeof e==="string"||e.formatPattern)){d=true}}})}if(d){n.val.forEach(function(a,e){if(l.indexOf(e)>-1){a.type="measure";a.value=new Date(a.value)}})}else{var p=a.extend(true,[],e.timeTooltipData);p.forEach(function(a,e){if(n.val[e].dataName){p[e].dataName=n.val[e].dataName}});n.val=p;n.isTimeSeries=true}}n.val.forEach(function(a,e){if(a.type&&a.type.toLowerCase()==="measure"){s=v[a.id]||o||a.formatString;if(a.bothValue&&a.bothValue.primaryKey==="percentage"){a.value=a.bothValue.percentage;if(!s){s={formatPattern:"0.00%"}}}else if(a.strValue){a.value=a.strValue}if(s){if(s.formatPattern||s.dataUnit){a.value=r(a.value,s.formatPattern);var t=n.val.timeDimensions&&n.val.timeDimensions.indexOf(e)>-1;if(!t){a.unit=s.dataUnit||a.unit}}else{a.value=r(a.value,s)}}else{a.value=r(a.value)}}});return n};return e});