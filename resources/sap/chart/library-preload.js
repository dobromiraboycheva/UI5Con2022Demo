//@ui5-bundle sap/chart/library-preload.js
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/AutoScaleMode",function(){"use strict";var a={DataSet:"DataSet",VisibleData:"VisibleData"};return a},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/Chart",["sap/chart/library","sap/viz/ui5/controls/VizFrame","sap/viz/ui5/controls/common/BaseControl","sap/viz/ui5/data/Dataset","sap/viz/ui5/data/FlattenedDataset","sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/chart/data/Dimension","sap/chart/data/TimeDimension","sap/chart/data/HierarchyDimension","sap/chart/data/Measure","sap/ui/model/analytics/ODataModelAdapter","sap/chart/utils/RoleFitter","sap/chart/utils/ChartUtils","sap/chart/utils/ChartTypeAdapterUtils","sap/chart/utils/DateFormatUtil","sap/chart/utils/DataSourceUtils","sap/chart/utils/SelectionAPIUtils","sap/chart/utils/MeasureSemanticsUtils","sap/viz/ui5/controls/common/feeds/FeedItem","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterType","sap/ui/model/analytics/odata4analytics","sap/ui/Device","sap/chart/TimeUnitType","sap/chart/coloring/Colorings","sap/chart/ChartLog","sap/chart/pagination/PagingController","sap/ui/core/LocaleData","sap/ui/core/Control","sap/ui/core/BusyIndicatorUtils","sap/ui/core/theming/Parameters","sap/chart/SeriesColorTracker","sap/viz/ui5/format/ChartFormatter","sap/chart/utils/ValueAxisScaleUtils","sap/chart/AutoScaleMode","sap/chart/ScaleBehavior","sap/viz/ui5/utils/CommonUtil","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,i,r,a,s,n,o,l,h,u,c,d,g,p,f,m,y,v,_,S,b,C,D,P,V,z,F,A,x,T,M,k,N,B,O,E,I,U,R,w){"use strict";var j=e.SelectionBehavior,L=e.SelectionMode;var H=i.extend("sap.chart.Chart",{metadata:{library:"sap.chart",designtime:"sap/chart/designtime/Chart.designtime",properties:{chartType:{type:"string",defaultValue:"bar"},uiConfig:{type:"object",group:"Misc"},visibleDimensions:{type:"string[]",defaultValue:[]},inResultDimensions:{type:"string[]",defaultValue:[]},visibleMeasures:{type:"string[]",defaultValue:[]},vizProperties:{type:"object",group:"Misc"},vizScales:{type:"object[]",group:"Misc"},isAnalytical:{type:"boolean"},selectionBehavior:{type:"sap.chart.SelectionBehavior",defaultValue:j.DataPoint},selectionMode:{type:"sap.chart.SelectionMode",defaultValue:L.Multi},enablePagination:{type:"boolean",defaultValue:false},enableStableColor:{type:"boolean",defaultValue:false},enableScalingFactor:{type:"boolean",defaultValue:false},customMessages:{type:"object",defaultValue:null},colorings:{type:"object",defaultValue:null},activeColoring:{type:"object",defaultValue:null},valueAxisScale:{type:"object",defaultValue:null}},aggregations:{data:{type:"sap.ui.core.Element",multiple:true,bindable:"bindable"},_vizFrame:{type:"sap.viz.ui5.controls.VizFrame",multiple:false,visibility:"hidden"},dimensions:{type:"sap.chart.data.Dimension",multiple:true},measures:{type:"sap.chart.data.Measure",multiple:true}},events:{drilledDown:{parameters:{dimensions:{type:"string[]"}}},drilledUp:{parameters:{dimensions:{type:"string[]"}}},renderComplete:{},selectData:{},deselectData:{},valueAxisFixedScaleTurnedOff:{},drillStackChanged:{}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t).style("width",t.getWidth()).style("height",t.getHeight()).openEnd().renderControl(t.getAggregation("_vizFrame")).close("div")}}});H.getMetadata().getAggregation("data")._doesNotRequireFactory=true;function q(e){return e.indexOf("%")!==-1?"100%":e}H.prototype.setHeight=function(e){this.setProperty("height",e);var t=this._getVizFrame();if(t){t.setHeight(q(this.getProperty("height")))}return this};H.prototype.setWidth=function(e){this.setProperty("width",e);var t=this._getVizFrame();if(t){t.setWidth(q(this.getProperty("width")))}return this};H.prototype.setChartType=function(e,t){this.setProperty("chartType",e,t);this._sAdapteredChartType=e;this._bIsPagingChartType=g.CONFIG.pagingChartTypes.indexOf(e)>-1;if(this._isEnablePaging()){this._getPagingController().init(false)}else{var i=this._getDataset();if(i){i.setPagingOption(null);i.setRange(-1,-1)}}this._invalidateBy({source:this,keys:{vizFrame:true}});this._bNeedToApplyDefaultProperties=true;return this};H.prototype.setColorings=function(e){this.setProperty("colorings",e);this._invalidateBy({source:this,keys:{vizFrame:true,checkBinding:true}});return this};H.prototype.setActiveColoring=function(e){this.setProperty("activeColoring",e);this._invalidateBy({source:this,keys:{vizFrame:true,checkBinding:true}});return this};H.prototype.setValueAxisScale=function(e){this._bEnbableValueAxisScale=true;this.setProperty("valueAxisScale",e);if(this._oValueScaleSetting&&this._oValueScaleSetting.fireValueAxisFixedScaleTurnedOff){this._oValueScaleSetting.fireValueAxisFixedScaleTurnedOff=false;this._oValueScaleSetting.resetValueAxisScale=true}this._invalidateBy({source:this,keys:{vizFrame:true}});return this};H.prototype._setValueAxisScale=function(){var e=this.getValueAxisScale(),t=!this._rendered&&!!e,i=!(this._mNeedToUpdate["binding"]&&this._oValueScaleSetting)&&this._bEnbableValueAxisScale;if(t||i){if(!this._bEnbableValueAxisScale){this._bEnbableValueAxisScale=true}this._oValueScaleSetting=O.getValueAxisScaleSetting(this.getChartType(),e,this.getMeasures(),this.getVisibleMeasures())}};H.prototype._getValueAxisScaleSetting=function(){return this._bEnbableValueAxisScale?this._oValueScaleSetting||{}:{}};H.prototype._validateValueScaleOnDimChange=function(e,t){if(t&&this._oValueScaleSetting){var i=this.getValueAxisScale();if(i&&i.scaleBehavior===I.FixedScale){var r=[];e.forEach(function(e){var i=t.indexOf(e);if(i<0){r.push(e)}else{t.splice(i,1)}});r=r.concat(t);if(r.length>0){var a=false,s=this.getChartType();if(g.isStackedLikeChart(s)){a=true;r.forEach(function(e){if(e._getFixedRole()!=="series"){a=false}})}if(!a){this._oValueScaleSetting.fireValueAxisFixedScaleTurnedOff=true;i.scaleBehavior=I.AutoScale;this.setProperty("valueAxisScale",i);this.fireValueAxisFixedScaleTurnedOff();if(this._oValueScaleSetting.resetValueAxisScale){i=this.getValueAxisScale();this.setProperty("valueAxisScale",i)}this._oValueScaleSetting=O.getValueAxisScaleSetting(s,i,this.getMeasures(),this.getVisibleMeasures())}}else{this._oValueScaleSetting=O.getValueAxisScaleSetting(this.getChartType(),i,this.getMeasures(),this.getVisibleMeasures())}}}};H.prototype.removeDimension=function(e){var t=this._getVisibleDimensions()||[];var i;if(this.getIsAnalytical()===false&&e&&e.getName()){i=t.indexOf(e.getName());if(i!==-1){R.error('Data source does not support aggregation. The method "removeDimension" therefore cannot be used!');return}}var r=this.removeAggregation("dimensions",e);if(r){i=t.indexOf(r.getName());if(i!==-1){t.splice(i,1);this.setVisibleDimensions(t)}var a=this.getInResultDimensions()||[];i=a.indexOf(r.getName());if(i!==-1){a.splice(i,1);this.setInResultDimensions(a)}}return r};H.prototype.removeAllDimensions=function(){var e;if(this.getIsAnalytical()===false){R.error('Data source does not support aggregation. The method "removeAllDimensions" therefore cannot be used!')}else{e=this.removeAllAggregation("dimensions");this.setVisibleDimensions([]);this.setInResultDimensions([])}return e};H.prototype.destroyDimensions=function(){var e;if(this.getIsAnalytical()===false){R.error('Data source does not support aggregation. The method "destroyDimensions" therefore cannot be used!')}else{e=this.destroyAggregation("dimensions");this.setVisibleDimensions([]);this.setInResultDimensions([])}return e};H.prototype.removeMeasure=function(e){var t=this.removeAggregation("measures",e);if(t){var i=this._getVisibleMeasures()||[],r=i.indexOf(t.getName());if(r!==-1){i.splice(r,1);this.setVisibleMeasures(i)}}return t};H.prototype.removeAllMeasures=function(){var e=this.removeAllAggregation("measures");this.setVisibleMeasures([]);return e};H.prototype.destroyMeasures=function(){var e=this.destroyAggregation("measures");this.setVisibleMeasures([]);return e};H.prototype._getVisibleDimensions=function(e){var t=this._getDrillStateTop();var i=t?t.dimensions:this.getProperty("visibleDimensions");return e?this._normalizeDorM(i,true):i};H.prototype.getVisibleDimensions=function(){var e=this._getVisibleDimensions();return this._aFeeds?e.filter(function(e){return this._aFeeds._unused.indexOf(e)===-1},this):e};H.prototype._getVisibleMeasures=function(e){var t=this._getDrillStateTop();var i=t?t.measures:this.getProperty("visibleMeasures");return e?this._normalizeDorM(i):i};H.prototype.getVisibleMeasures=function(){var e=this._getVisibleMeasures();return this._aFeeds?e.filter(function(e){return this._aFeeds._unused.indexOf(e)===-1},this):e};H.prototype.setVisibleDimensions=function(e,t){var i=this._dimensionSanityCheck({visible:e});this.setProperty("visibleDimensions",e,t);this.setProperty("inResultDimensions",i.inResult,t);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});return this};H.prototype.setInResultDimensions=function(e,t){var i=this._dimensionSanityCheck({inResult:e});this.setProperty("inResultDimensions",e,t);this.setProperty("visibleDimensions",i.visible,t);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});return this};H.prototype.setVisibleMeasures=function(e,t){this.setProperty("visibleMeasures",e,t);var i=this._getDrillStateTop();if(!this._bIsInitialized){this._createDrillStack()}else{i.measures=this.getProperty("visibleMeasures")}this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});return this};H.prototype.setEnableStableColor=function(e){e=!!e;if(this.getProperty("enableStableColor")!==e){this.setProperty("enableStableColor",e);this._invalidateBy({source:this,keys:{vizFrame:true}})}return this};H.prototype.setEnablePagination=function(e,t){if(!this._bIsInitialized){this.setProperty("enablePagination",e,t);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}})}return this};H.prototype._dimensionSanityCheck=function(e){var t=e.visible||this.getVisibleDimensions()||[],i=e.inResult||this.getInResultDimensions()||[];var r=[].concat(t).concat(i).reduce(function(e,r){var a=t.indexOf(r)!==-1,s=i.indexOf(r)!==-1;if(a&&s){e.common[r]=true}else if(a){e.visible[r]=true}else if(s){e.inResult[r]=true}return e},{visible:{},inResult:{},common:{}});r.visible=Object.keys(r.visible);r.inResult=Object.keys(r.inResult);r.common=Object.keys(r.common);return r};H.prototype._prepareFeeds=function(){if(!this._aFeeds){var e=this._normalizeDorM(this._getVisibleDimensions(),true),t=this._normalizeDorM(this._getVisibleMeasures(),false),i=this._normalizeDorM(this.getInResultDimensions(),true),r;this._sAdapteredChartType=this.getEnablePagination()?this.getChartType():p.adaptChartType(this.getChartType(),e);var a=this._getVisibleMeasures();r=this._normalizeDorM(this.getMeasures().filter(function(e){return a.indexOf(e.getName())===-1}),false);var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");var n=s&&this.getModel()instanceof s;this._aFeeds=d.fit(this._sAdapteredChartType,e,t,i,this._enableSemanticPattern(),r,n);if((!this._aFeeds._valid||this._aFeeds._unused.length)&&this._sAdapteredChartType!==this.getChartType()){this._sAdapteredChartType=this.getChartType();this._aFeeds=d.fit(this._sAdapteredChartType,e,t,i,this._enableSemanticPattern())}if(this._sAdapteredChartType!==this.getChartType()){this._bNeedToApplyDefaultProperties=true}}return this._aFeeds};H.prototype._normalizeDorM=function(e,t){var i=t?this.getDimensions():this.getMeasures(),r=i.reduce(function(e,t){e[t.getName()]=t;return e},{}),a=t?o:u;var s=e.reduce(function(e,t){var i;if(typeof t==="string"){i=t}else if(t instanceof a){i=t.getName()}else{e.errors.push(t)}if(r[i]){e.normalized.push(r[i])}else{e.errors.push(t)}return e},{normalized:[],errors:[]});var n=s.normalized;if(s.errors.length>0){n.errors=s.errors}return n};H.prototype._redundantsFromSelection=function(){var e=this._getVizFrame().vizSelection();if(!e||e.length===0){return{measureNames:{}}}var t=this._getContinuesSemanticTuples();var i=e.reduce(function(e,i){var r=[];for(var a in t){if(t.hasOwnProperty(a)){var s=t[a];if(i.data[a]){r.push(i.data[s.timeAxis]<s.projectedValueStartTime?s.projected:s.actual)}else{r.push(s.actual);r.push(s.projected)}}}w.each(i.data,function(t,i){if(!(r.length>0&&r.indexOf(t)>-1)){if(!e[t]){e[t]=[]}if(e[t].indexOf(i)===-1){e[t].push(i)}}});return e},{});var r=this._getVisibleDimensions().reduce(function(e,t){var r=i[t];if(r.length===1){e[t]=r[0]}return e},{});r.measureNames=this._getVisibleMeasures().reduce(function(e,t){if(!i[t]){e[t]=true}return e},{});return r};H.prototype._deriveFilterFromSelection=function(){var e=this._getVisibleDimensions();var t=this;var i=this._getVizFrame().vizSelection();if(this.getSelectionBehavior().toUpperCase()===j.Category){i=i.category}else if(this.getSelectionBehavior().toUpperCase()===j.Series){i=i.series}var r=false;var a=i.map(function(i){var a=e.reduce(function(e,a){var s=t.getDimensionByName(a);var n;n=i.data[a];if(n!=null){if(g.CONFIG.timeChartTypes.indexOf(t._sAdapteredChartType)>-1&&s instanceof l){var o=f.getInstance(s.getTimeUnit());if(o){var u=o.format.bind(o);n=u(new Date(i.data[a]))}}var c=new S({path:a,operator:b.EQ,value1:n});if(s instanceof h){e.hierarchyFilters.push(c);r=true}else{e.filters.push(c)}e.signature.push(a+"="+i.data[a])}return e},{filters:[],hierarchyFilters:[],signature:[]});a.signature=a.signature.join(";");return a});var s=a.reduce(function(e,t){if(!e[t.signature]&&t.filters.length+t.hierarchyFilters.length>0){e[t.signature]={filters:t.filters.length?new S(t.filters,true):null,hierarchyFilters:t.hierarchyFilters.length?new S(t.hierarchyFilters,true):null}}return e},{});var n=Object.keys(s).map(function(e){return{filters:s[e].filters,hierarchyFilters:s[e].hierarchyFilters}});if(n.length>1){if(r){return{hierarchyFilters:new S(n.map(function(e){return e.hierarchyFilters}),false)}}else{return{filters:new S(n.map(function(e){return e.filters}),false)}}}else if(n.length===1){return{filters:n[0].filters,hierarchyFilters:n[0].hierarchyFilters}}else{return{filters:null,hierarchyFilters:null}}};function $(){var e=this.getSelectionBehavior();var t=this._getVisibleDimensions().concat(this.getInResultDimensions()).filter(function(t){var i=this.getDimensionByName(t);if(e.toUpperCase()===j.Category){return i._getFixedRole()==="category"||i._getFixedRole()==="category2"}else if(e.toUpperCase()===j.Series){return i._getFixedRole()==="series"}return true}.bind(this));var i=t.some(function(e){var t=this.getDimensionByName(e);return t instanceof h}.bind(this));var r;if(e.toUpperCase()===j.Category){r=this.getSelectedCategories().categories}else if(e.toUpperCase()===j.Series){r=this.getSelectedSeries().series}else{r=this.getSelectedDataPoints().dataPoints}if(i&&Object.keys(t).length>1&&r.length>1){return false}return true}H.prototype._checkDrilldownValid=function(e){if(this._bEmptyData){R.error("Drill down not possible, because there is already no data available!");return false}var t=this.getInResultDimensions();var i=this._getVisibleDimensions().concat(t).reduce(function(e,t){e[t]=true;return e},{});if(!$.call(this)){R.error("Drill down not possible, because multiple selections on hierarchy/regular mixed dimension is not supported in backend service!");return false}function r(e,i){var r=true;if(i[e.getName()]){if(!(e instanceof h)){R.error("Drill down not possible, because one of the given dimensions is already drilled down!");r=false}else{if(t.indexOf(e.getName())>-1){R.error("Drill down not possible, because one of the given dimensions is inResult!");r=false}}}return r}for(var a=0;a<e.length;++a){if(!r(e[a],i)){return false}}var s=e.reduce(function(e,t){e[t.getName()]=t;return e},{});var n=this;function o(e){if(Array.isArray(e.aFilters)){return e.aFilters.some(o)}else{return!r(n.getDimensionByName(e.sPath),s)}}var l=this._getDrillStateTop();if(l&&l.filter&&o(l.filter)){return false}return true};H.prototype._createDrillStack=function(){this._drillStateStack=G.call(this);var e=this.getProperty("visibleDimensions")||[];this._aUnavailableDims=e.filter(function(e){return!this.getDimensionByName(e)}.bind(this));if(this._aUnavailableDims.length){this._invalidateBy({source:this,keys:{drillStack:true}})}else{this.fireDrillStackChanged(this.getDrillStack())}};H.prototype._updateDrillStack=function(){var e=this._aUnavailableDims.some(function(e){return this.getDimensionByName(e)instanceof h}.bind(this));if(e){this._drillStateStack=G.call(this)}this._aUnavailableDims=[];this.fireDrillStackChanged(this.getDrillStack())};function G(){var e=this.getProperty("visibleDimensions")||[],t=this.getProperty("visibleMeasures")||[],i=[{dimensions:[],measures:t,filter:undefined,nonHierarchyFilters:undefined,hierarchyFilters:undefined,hierarchylevel:{}}],r=[];var a={};for(var s=0;s<e.length;s++){var n=e[s];r.push(n);var o=this.getDimensionByName(n);if(o&&o instanceof h){a[n]=o.getLevel()}i.push({dimensions:r.slice(),measures:t,filter:undefined,nonHierarchyFilters:undefined,hierarchyFilters:undefined,hierarchylevel:w.extend(true,{},a)})}return i}H.prototype._invalidateBy=function(e){var t=e.source;var i=this._oCandidateColoringSetting?this._oCandidateColoringSetting.additionalDimensions||[]:[];if(t===this){w.each(e.keys||{},function(e,t){this._markForUpdate(e,t)}.bind(this))}else if(t instanceof u&&this._getVisibleMeasures().indexOf(t.getName())!==-1){this._markForUpdate("dataSet",true);this._markForUpdate("vizFrame",true);if(e.property==="unitBinding"||this.getColorings()&&(e.property==="semantics"||e.property==="semanticallyRelatedMeasures")){this._markForUpdate("binding",true)}}else if(t instanceof o&&this._getVisibleDimensions().concat(i).indexOf(t.getName())!==-1){this._markForUpdate("dataSet",true);this._markForUpdate("vizFrame",true);if(t.getDisplayText()&&(e.property==="textProperty"||e.property==="displayText")){this._markForUpdate("binding",true)}else if(e.property==="level"&&this.getProperty("visibleDimensions").indexOf(t.getName())>-1){this._createDrillStack();this._markForUpdate("binding",true)}}else if(t instanceof o&&this.getProperty("inResultDimensions").indexOf(t.getName())>-1){if(e.property==="level"){this._markForUpdate("dataSet",true);this._markForUpdate("binding",true);this._markForUpdate("vizFrame",true)}}this.invalidate(e)};H.prototype._handleNonAnalyticalFeeding=function(){var e=this;var t=this.getInResultDimensions();var i=this._getVisibleDimensions(),r=this.getDimensions().map(function(e){return e.getName()});var a=[];r.forEach(function(t){if(e.getDimensionByName(t)){var i=e.getDimensionByName(t).getTextProperty();if(i){a.push(i)}}});var s=i.concat(r.filter(function(e){return i.indexOf(e)<0})).filter(function(e){return a.indexOf(e)<0&&t.indexOf(e)<0});this.setProperty("visibleDimensions",s);this._createDrillStack()};H.prototype._markForUpdate=function(e,t){if(!this._mNeedToUpdate){this._mNeedToUpdate={}}this._mNeedToUpdate[e]=t;var i=this._updaters.onInvalidate[e];if(i){i.call(this)}};H.prototype._updaters=function(){return{onInvalidate:{vizFrame:function(){this._aFeeds=null;this._bColoringParsed=null},checkBinding:function(){this._bColoringParsed=null},binding:function(){this._bColoringParsed=null},loopData:function(){this._bColoringParsed=null}},checkBinding:function(){var e=this._getCandidateColoringSetting();var t=e.additionalDimensions;var i=e.additionalMeasures;if(t&&t.length||i&&i.length){this._mNeedToUpdate["binding"]=true}},drillStack:function(){this._updateDrillStack()},dataSet:function(){this._getDataset().invalidate()},binding:function(){var e=this._getDataset().getBinding("data"),t=this.getInResultDimensions();if(!e){return}var i=this._getVisibleDimensions(true).concat(this._normalizeDorM(t,true));var r=this._getVisibleMeasures(true);this._oMeasureRangePromise=m.updateModel(this.getIsAnalytical())(this,i,r);var a=this._getDrillStateTop();if(i.length>0||r.length>0){this._getVizFrame()._readyToRender(false);this.setBusy(true)}this._bFilterCalledByChart=true;e.filter(a&&a.filter?a.filter:undefined,C.Control);var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");if(s&&this.getModel()instanceof s){if(e._bSuspendCalledByChart){e._bSuspendCalledByChart=false;e.getRootBinding().resume()}}if(this._bEnbableValueAxisScale){this._validateValueScaleOnDimChange(i,this._aDimensions)}this._aDimensions=i},vizFrame:function(){var e=this,t=this._getDataset(),i=this._getVizFrame();var r=sap.ui.require("sap/ui/model/odata/v4/ODataModel");if(this._mNeedToUpdate["binding"]){var a=this._getDataset().getBinding("data");if(r&&this.getModel()instanceof r){var o=a.getRootBinding();if(o&&!o.isSuspended()){o.suspend();a._bSuspendCalledByChart=true}}if(this._isEnablePaging()){this._getPagingController().reset();this._oColoringStatus={}}else{this._getDataset().setPagingOption(null)}}else{this._markForUpdate("loopData",true)}if(this.getEnableStableColor()){this._oColorTracker.add(i._runtimeScales());i._runtimeScales(this._oColorTracker.get(),true)}else{this._resetRuntimeScale()}var l=this._isEnablePaging()?this._getPagingController().getMeasureRange():{};t.removeAllAggregation("dimensions",true);t.removeAllAggregation("measures",true);i.removeAllAggregation("feeds",true);if(this.getIsAnalytical()===false){this._handleNonAnalyticalFeeding()}var h={};try{h=this._prepareFeeds();h._def.dim.forEach(function(e){t.addAggregation("dimensions",e,true)},this);h._def.msr.forEach(function(i){if(i){var r=l[i.getIdentity()];if(r){i.setRange([r.min,r.max])}if(!e.getDimensionByName(i.getUnit())){i.setUnit(null)}t.addAggregation("measures",i,true)}},this);h.forEach(function(e){i.addFeed(e)})}catch(e){}this._semanticTuples=h._semanticTuples;var u=this._getCandidateColoringSetting();var c=h._context||[];var d=u.additionalMeasures||[];var g=u.additionalDimensions||[];var p=r&&this.getModel()instanceof r;d.forEach(function(e){c.push({id:e,showInTooltip:false});var i=new n({name:e,identity:e,value:"{"+e+"}"});if(p){i.setBindingContext(null)}t.addMeasure(i)});g.forEach(function(e){c.push({id:e,showInTooltip:false});var i=new s({name:e,identity:e,value:"{"+e+"}"});if(p){i.setBindingContext(null)}t.addDimension(i)});t.setContext(c);i.invalidate();t.invalidate();i.setVizType(this._reset100DonutChartType(this._sAdapteredChartType));i._setCustomMessages(this.getCustomMessages());this._setValueAxisScale();if(!this._mNeedToUpdate["loopData"]){this._setEffectiveScales();i.setVizProperties(this._getEffectiveProperties())}},loopData:function(){var e=this._getVizFrame();try{this._prepareData()}catch(e){if(e instanceof F){e.display()}else{throw e}}var t=this._getEffectiveProperties();this._usingDisplayNameForSemantics(t);e.setVizProperties(t);this._setEffectiveScales()}}}();H.prototype._getDrillStateTop=function(){return this._drillStateStack?this._drillStateStack[this._drillStateStack.length-1]:null};H.prototype._getVizFrame=function(){return this.getAggregation("_vizFrame")};H.prototype._getDataset=function(){var e=this._getVizFrame();return e?e.getDataset():null};H.prototype._prepareData=function(){var e=this._getContexts();if(e){this._bEmptyData=e.length?false:true;var t=this._getCandidateColoringSetting().contextHandler;var i=[];if(t){i.push(t);try{this._loopContext(i)}catch(e){if(e instanceof F){e.display();this._oCandidateColoringSetting={}}else{throw e}}}this._oSemanticVizSettings=v.getSemanticVizSettings(this._sAdapteredChartType,this._semanticTuples,this._oCandidateColoringSetting,this._enableSemanticPattern(),this._bDataPointStyleSetByUser,this._bLegendSetByUser)}};H.prototype._getContexts=function(){return this._getDataset()._getDataContexts()};H.prototype._loopContext=function(e){var t=this._getContexts();if(t.length>0&&!t.dataRequested){var i=this;t.forEach(function(t){e.forEach(function(e){e.call(i,t)})})}};H.prototype._filterHandler=function(){if(!this._bFilterCalledByChart){this._bFilterCalledByCustomer=true;this._bColoringParsed=false}this._bFilterCalledByChart=false};H.prototype._dataRefreshListener=function(e){if(e.getParameters().reason==="filter"){this._filterHandler()}if(this.getIsAnalytical()&&e.getParameters().updateAnalyticalInfo){m.updateModel(true)(this)}};H.prototype._bindingChangeListener=function(e){var t=this._getVizFrame();if(e.getParameters().reason==="filter"){this._filterHandler()}if(this.getEnableStableColor()){this._oColorTracker.add(t._runtimeScales());t._runtimeScales(this._oColorTracker.get(),true)}t.invalidate();this.setBusy(false);if(this._isEnablePaging()){this._getPagingController().bindingChanged()}else{t._readyToRender(true)}try{this._prepareData()}catch(e){if(e instanceof F){e.display()}}var i=this._getEffectiveProperties();this._usingDisplayNameForSemantics(i);t.setVizProperties(i);this._setEffectiveScales();this._bFilterCalledByChart=false;this._bFilterCalledByCustomer=false};H.prototype._resetRuntimeScale=function(){this._oColorTracker.clear();this._getVizFrame()._runtimeScales(this._oColorTracker.get(),true)};H.prototype._hasUserSemanticProps=function(){var e=this.getProperty("vizProperties");if(e&&e.plotArea){if(e.plotArea.dataPointStyle||e.plotArea.seriesStyle){return true}}return false};H.prototype._enableSemanticColoring=function(){var e=true;if(this._sAdapteredChartType==="heatmap"){var t=this.getProperty("vizScales")||[];var i=t.filter(function(e){return e.feed==="color"})[0];if(i){e=false}}else{if(this._hasUserSemanticProps()){e=false}}return e};H.prototype._enableSemanticPattern=function(){return!this._hasUserSemanticProps()&&g.CONFIG.nonSemanticPatternChartType.indexOf(this._sAdapteredChartType)===-1};H.prototype._hasSemanticPattern=function(){return this._enableSemanticPattern()&&v.hasSemanticRelation(this._semanticTuples)};H.prototype._getContinuesSemanticTuples=function(){var e={};if(this._hasSemanticPattern()){e=this._semanticTuples.reduce(function(e,t){if(t.semanticMsrName){e[t.semanticMsrName]=t}return e},{})}return e};H.prototype._getContinuesSemanticMap=function(){var e=[];if(this._hasSemanticPattern()){e=this._semanticTuples.filter(function(e){return e.projectedValueStartTime})}return e};H.prototype._getInternalVisibleMeasures=function(){var e=this._getVisibleMeasures();if(this._hasSemanticPattern()){e=e.concat(this._getContinuesSemanticMap().map(function(e){return e.semanticMsrName}))}return e};H.prototype._buildSelectedDataPoints=function(e,t){var i=this._getInternalVisibleMeasures(),r=this._getVisibleDimensions().concat(this.getInResultDimensions()),a=this._getEffectiveContinuesDataPoints(t);return y.buildSelectionVizCtx(i,r,e,a)};H.prototype._getEffectiveContinuesSeries=function(e){var t=e.slice(),i=this._getContinuesSemanticMap();if(this._hasSemanticPattern()){var r=t.map(function(e){return e.measures});i.forEach(function(e){if(r.indexOf(e.actual)>-1||r.indexOf(e.projected)>-1){t=t.filter(function(t){return t.measures!==e.actual&&t.measures!==e.projected});if(r.indexOf(e.actual)>-1&&r.indexOf(e.projected)>-1){t.push({measures:e.semanticMsrName})}}})}return t};H.prototype._getEffectiveContinuesDataPoints=function(e){var t=e.slice(),i=this._getContinuesSemanticMap();if(this._hasSemanticPattern()){var r,a,s,n;for(var o=0;o<t.length;o++){s=t[o].measures;for(var l=0;l<i.length;l++){n=i[l];r=s.indexOf(n.actual);if(r>-1){s.splice(r,1)}a=s.indexOf(n.projected);if(a>-1){s.splice(a,1)}if(r>-1||a>-1){s.push(n.semanticMsrName)}}}}return t};H.prototype._buildSelectEventData=function(e){if(e&&e.length>0&&this._hasSemanticPattern()){var t,i;var r=this._getContinuesSemanticMap();for(var a=0;a<e.length;a++){t=w.extend(true,{},e[a].data);for(var s=0;s<r.length;s++){i=r[s];if(t.measureNames===i.semanticMsrName){if(t[i.timeAxis]<i.projectedValueStartTime){t.measureNames=i.actual;delete t[i.projected];delete t[i.semanticMsrName]}else{t.measureNames=i.projected;delete t[i.actual];delete t[i.semanticMsrName]}}else{if(t[i.actual]&&t.measureNames!==i.actual){delete t[i.actual]}if(t[i.projected]&&t.measureNames!==i.projected){delete t[i.projected]}}}e[a].data=t}}};H.prototype.addData=function(){R.error('Chart manages the "data" aggregation only via data binding. The method "addData" therefore cannot be used programmatically!')};H.prototype.destroyData=function(){R.error('Chart manages the "data" aggregation only via data binding. The method "destroyData" therefore cannot be used programmatically!')};H.prototype.getData=function(){R.error('Chart manages the "data" aggregation only via data binding. The method "getData" therefore cannot be used programmatically!')};H.prototype.indexOfData=function(){R.error('Chart manages the "data" aggregation only via data binding. The method "indexOfData" therefore cannot be used programmatically!')};H.prototype.insertData=function(){R.error('Chart manages the "data" aggregation only via data binding. The method "insertData" therefore cannot be used programmatically!')};H.prototype.removeData=function(){R.error('Chart manages the "data" aggregation only via data binding. The method "removeData" therefore cannot be used programmatically!')};H.prototype.removeAllData=function(){R.error('Chart manages the "data" aggregation only via data binding. The method "removeAllData" therefore cannot be used programmatically!')};H.prototype._createOData4SAPAnalyticsModel=function(e){var t=null;try{t=new D.Model(new D.Model.ReferenceByModel(e))}catch(e){return undefined}return t};H.prototype.getIsAnalytical=function(){return this.getProperty("isAnalytical")};H.prototype.setIsAnalytical=function(e,t){if(this._bIsInitialized){R.error('The proeprty isAnalytical will programmatically set according to data source. The method "setIsAnalytical" therefore cannot be used!')}else{this.setProperty("isAnalytical",e,t)}return this};H.prototype._setIsAnalyticalProperty=function(e,t){var i=e.findQueryResultByName(m.getEntitySet(this.getIsAnalytical())(t))!==undefined;if(this.getIsAnalytical()!==i){this.setProperty("isAnalytical",i)}};H.prototype.bindAggregation=function(e,t){if(e==="data"){this._oBindingInfo=w.extend(true,{},t);var r=this.getModel(t.model);var a;if(r){var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");var n=sap.ui.require("sap/ui/model/json/JSONModel");if(n&&r instanceof n){if(this.getIsAnalytical()!==false){this.setProperty("isAnalytical",false)}}else if(s&&r instanceof s){this.setProperty("isAnalytical",true);if(t){t.parameters=w.extend(true,{$count:t.length!=undefined||this._isEnablePaging()},t.parameters)}}else{a=this._createOData4SAPAnalyticsModel(r);this._setIsAnalyticalProperty(a,t);if(this.getIsAnalytical()){if(t){var o=true;if(t.length!=undefined||this._isEnablePaging()){o=false}t.parameters=w.extend(true,{analyticalInfo:[],useBatchRequests:true,provideGrandTotals:false,reloadSingleUnitMeasures:true,noPaging:o},t.parameters)}c.apply(r);if(a){r.setAnalyticalExtensions(a)}}}}}return i.prototype.bindAggregation.apply(this,arguments)};H.prototype._bindAggregation=function(e,t){if(e==="data"){var r=this.getModel(t.model);var a;if(r){var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");var n=sap.ui.require("sap/ui/model/json/JSONModel");if(n&&r instanceof n){if(this.getIsAnalytical()!==false){this.setProperty("isAnalytical",false)}this._deriveColumns(r,t)}else if(s&&r instanceof s){this.setProperty("isAnalytical",true);if(t){t.parameters=w.extend(true,{$count:t.length!=undefined||this._isEnablePaging()},t.parameters)}}else{a=this._createOData4SAPAnalyticsModel(r);this._setIsAnalyticalProperty(a,t);if(this.getIsAnalytical()){if(t){var o=true;if(t.length!=undefined||this._isEnablePaging()){o=false}t.parameters=w.extend(true,{analyticalInfo:[],useBatchRequests:true,provideGrandTotals:false,reloadSingleUnitMeasures:true,noPaging:o},t.parameters)}c.apply(r);if(a){r.setAnalyticalExtensions(a)}}this._deriveColumns(r,t)}}var l=this._getDataset();l.bindAggregation("data",t);var h=l.getBinding("data");if(h&&r){var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");if(s&&r instanceof s){h._bSuspendCalledByChart=false}}this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}})}else{i.prototype._bindAggregation.apply(this,arguments)}};H.prototype._dataErrorListener=function(e){var t=this._getVizFrame();if(t){t._readyToRender(true);t.invalidate();this.setBusy(false)}};H.prototype.unbindAggregation=function(e,t){if(e==="data"){var r=this._getDataset();if(r){var a=r.getBinding("data");if(a){delete a._bSuspendCalledByChart}r.unbindAggregation.apply(r,arguments)}t=true}return i.prototype.unbindAggregation.apply(this,[e,t])};H.prototype.unbindData=function(){if(!this.getIsAnalytical()){this.removeAllAggregation("dimensions");this.removeAllAggregation("measures");this.setProperty("visibleDimensions",[]);this.setProperty("inResultDimensions",[]);this.setProperty("visibleMeasures",[]);this._createDrillStack()}this.unbindAggregation("data")};H.prototype._deriveColumns=function(e,t){var i=this.getAggregation("dimensions");var r=this.getAggregation("measures");if((i===null||i.length===0)&&(r===null||r.length===0)){var a=m.deriveColumns(this.getIsAnalytical())(e,t);a.dimensions.forEach(this.addDimension.bind(this));a.measures.forEach(this.addMeasure.bind(this))}};H.prototype.onBeforeRendering=function(){this._bIsInitialized=true;i.prototype.onBeforeRendering.apply(this,arguments);var e=["onInvalidate","drillStack","dataSet","vizFrame","checkBinding","binding","loopData"];e.forEach(function(e){if(this._mNeedToUpdate[e]){this._updaters[e].call(this)}}.bind(this));w.each(this._mNeedToUpdate,function(e){this._mNeedToUpdate[e]=false}.bind(this))};H.prototype.onAfterRendering=function(){this._showLoading(this._bLoading);this._rendered=true};H.prototype.onlocalizationChanged=function(){this._invalidateBy({source:this,keys:{vizFrame:true}})};H.prototype.exit=function(){this._getDataset().unbindAggregation("data",true);this._oColorTracker.clear();i.prototype.exit.apply(this,arguments);var e=this._getVizFrame();if(this._delegateEventHandlers){this._delegateEventHandlers.forEach(function(t){e["detach"+t.name](t.handler,this);delete t.handler},this);delete this._delegateEventHandlers}e.detachRenderComplete(this._vizFrameRenderCompleteHandler,this);e.detachEvent("_zoomDetected",Q.bind(this),this);e.detachEvent("_selectionDetails",K.bind(this),this)};H.prototype.applySettings=function(){this._mNeedToUpdate={};T.prototype.applySettings.apply(this,arguments);var e=new a;e.attachEvent("dataChange",{},this._bindingChangeListener,this);e.attachEvent("dataRefresh",{},this._dataRefreshListener,this);e.attachEvent("dataError",{},this._dataErrorListener,this);var i=w.extend(true,{},{applicationSet:"fiori"},this.getUiConfig());this.setUiConfig(i);this._bNeedToApplyDefaultProperties=true;this._oSemanticVizSettings={};var r=new t({width:q(this.getWidth()),height:q(this.getHeight()),vizType:this.getChartType(),uiConfig:this.getUiConfig(),vizProperties:w.extend(true,{title:{visible:false}},this._getEffectiveProperties())});r.setDataset(e);r.attachRenderComplete(null,this._updateLoadingIndicator.bind(this));r.attachEvent("_zoomDetected",Q.bind(this));r.attachEvent("renderFail",null,function(e){var t=this._getPagingController();if(t._sLoadingTimer){clearTimeout(t._sLoadingTimer);t._sLoadingTimer=null}this._showLoading(false)},this);this._rendered=false;r._readyToRender(false);this.setAggregation("_vizFrame",r);this._delegateEvents();this._sAdapteredChartType=this.getChartType();this._oCandidateColoringSetting={};this._oColoringStatus={};this._oColorTracker=new N;if(this._isEnablePaging()){this._getPagingController()}};H.prototype.setCustomMessages=function(e){this.setProperty("customMessages",e);var t=this._getVizFrame();if(t){t._setCustomMessages(e)}return this};H.prototype.getZoomInfo=function(){return this._getZoomInfo()};H.prototype._getZoomInfo=function(){var e=this._getVizFrame();if(e){return e._getZoomInfo()}};H.prototype.resetLayout=function(){this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,vizFrame:true,dataSet:true}});return this};H.prototype.setSelectedDataPoints=function(e){if(this.getSelectionMode()!==L.None){var t=this.getBinding("data"),i=this._getVizFrame();if(!t||!i||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this}i.vizSelection([],{clearSelection:true});i.vizSelection(this._buildSelectedDataPoints(t,e),{selectionMode:this.getSelectionMode()})}return this};H.prototype.addSelectedDataPoints=function(e){if(this.getSelectionMode()!==L.None){var t=this.getBinding("data"),i=this._getVizFrame();if(!t||!i||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this}i.vizSelection(this._buildSelectedDataPoints(t,e),{selectionMode:L.Multi})}return this};H.prototype.getSelectedDataPoints=function(){var e=this._getVizFrame();if(!e||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return{count:0,dataPoints:[]}}var t=this._getContinuesSemanticTuples();var i=this._getVisibleMeasures(),r=this._getDataset(),a=e.vizSelection()||[],s={};for(var n=0,o=a.length;n<o;n++){var l=a[n],h=l.data._context_row_number;if(!s[h]){s[h]={index:h,measures:[],context:r.findContext({_context_row_number:h})}}l.measures=y.filterVisibleMsr(l.data,i);if(!w.isEmptyObject(t)){y.filterSemMsr(t,i,l)}s[h].measures=s[h].measures.concat(l.measures);if(l.unit){s[h].unit=w.extend(true,s[h].unit,l.unit)}if(l.dataName){s[h].dataName=w.extend(true,s[h].dataName,l.dataName)}}return{count:a.length,dataPoints:Object.keys(s).map(function(e){return s[e]})}};H.prototype.removeSelectedDataPoints=function(e){if(this.getSelectionMode()!==L.None){var t=this.getBinding("data"),i=this._getVizFrame();if(!i||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this}var r=this._buildSelectedDataPoints(t,e);i.vizSelection(r,{deselection:true})}return this};H.prototype.setSelectedCategories=function(e){if(this.getSelectionMode()!==L.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!=="CATEGORY"){return this}t.vizSelection([],{clearSelection:true});t.vizSelection(e.map(y.toVizCSCtx),{selectionMode:this.getSelectionMode()})}return this};H.prototype.addSelectedCategories=function(e){if(this.getSelectionMode()!==L.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!==j.Category){return this}t.vizSelection(e.map(y.toVizCSCtx),{selectionMode:L.Multi})}return this};H.prototype.removeSelectedCategories=function(e){if(this.getSelectionMode()!==L.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!==j.Category){return this}t.vizSelection(e.map(y.toVizCSCtx),{deselection:true})}return this};H.prototype.getSelectedCategories=function(){var e=this._getVizFrame(),t=this.getSelectionBehavior().toUpperCase();if(!e||t!==j.Category){return{count:0,categories:[]}}else{var i=e.vizSelection()||[];return{count:i.length,categories:(i.category||[]).map(y.fromVizCSCtx)}}};H.prototype.setSelectedSeries=function(e){if(this.getSelectionMode()!==L.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!==j.Series){return this}t.vizSelection([],{clearSelection:true});var r=this._getEffectiveContinuesSeries(e);t.vizSelection(r.map(y.toVizCSCtx),{selectionMode:this.getSelectionMode()})}return this};H.prototype.addSelectedSeries=function(e){if(this.getSelectionMode()!==L.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!==j.Series){return this}var r=this._getEffectiveContinuesSeries(e);t.vizSelection(r.map(y.toVizCSCtx),{selectionMode:L.Multi})}return this};H.prototype.removeSelectedSeries=function(e){if(this.getSelectionMode()!==L.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!==j.Series){return this}var r=this._getEffectiveContinuesSeries(e);t.vizSelection(r.map(y.toVizCSCtx),{deselection:true})}return this};H.prototype.getSelectedSeries=function(){var e=this._getVizFrame(),t=this.getSelectionBehavior().toUpperCase();if(!e||t!==j.Series){return{count:0,series:[]}}else{var i=e.vizSelection()||[],r=(i.series||[]).map(y.fromVizCSCtx),a=[],s=this._getContinuesSemanticTuples();r=r.filter(function(e){var t=true;if(e&&e.measures){var i=s[e.measures];if(i&&i.semanticMsrName===e.measures){a.push({measures:i.actual});a.push({measures:i.projected});t=false}}return t});r=r.concat(a);return{count:i.length,series:r}}};function W(e){var t=e.filter(function(e){return e});if(t.length===0){return null}else if(t.length===1){return t[0]}else{return new S(t,true)}}H.prototype.drillDown=function(e){if(this.getIsAnalytical()===false){R.error('Data source does not support drillDown/drillUp. The method "drillDown" therefore cannot be used!');return}if(e&&!(e instanceof Array)){e=[e]}var t=this._normalizeDorM(e,true);if(t.length===0){return}if(!this._checkDrilldownValid(t)){return}var i=this._getDrillStateTop(),r=this._redundantsFromSelection(),a=this._deriveFilterFromSelection();var s,n,o;if(a){s=W([a.filters,i.nonHierarchyFilters]);n=a.hierarchyFilters||i.hierarchyFilters;o=W([s,n])||undefined}var l=w.extend(true,{},i.hierarchylevel);t.forEach(function(e){if(e instanceof h){if(l[e.getName()]==null){l[e.getName()]=e.getLevel()}else{l[e.getName()]+=1}}});var u=i.dimensions.slice().filter(function(e){return!r[e]});u=u.concat(t.filter(function(e){return u.indexOf(e.getName())===-1}).map(function(e){return e.getName()}));this._drillStateStack.push({dimensions:u,measures:i.measures.filter(function(e){return!r.measureNames[e]}),filter:o,hierarchylevel:l,nonHierarchyFilters:s,hierarchyFilters:n,redundant:r});if(this._aUnavailableDims.length===0){this.fireDrillStackChanged(this.getDrillStack())}var c=t.map(function(e){return e.getName()});this.fireDrilledDown({dimensions:c});this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}})};H.prototype.drillUp=function(e){if(this.getIsAnalytical()===false){R.error('Data source does not support drillDown/drillUp. The method "drillUp" therefore cannot be used!');return}if(arguments.length===0){e=this._drillStateStack.length-2}var t=this._drillStateStack[e];if(t&&e!=this._drillStateStack.length-1){var i=this._drillStateStack.pop();this._drillStateStack.splice(e+1);if(this._aUnavailableDims.length===0){this.fireDrillStackChanged(this.getDrillStack())}this.fireDrilledUp({dimensions:i.dimensions.filter(function(e){return t.dimensions.indexOf(e)===-1})});this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}})}};H.prototype.getDrillStack=function(){if(this.getIsAnalytical()===false){R.error('Data source does not support drillDown/drillUp. The method "getDrillStack" therefore cannot be used!');return}return w.map(this._drillStateStack||[],function(e,t){return{dimension:e.dimensions.slice(),measure:e.measures.slice(),filter:e.filter,hierarchylevel:w.extend(true,{},e.hierarchylevel)}})};H.prototype.setUiConfig=function(e){this.setProperty("uiConfig",e);if(this._getVizFrame()){this._getVizFrame().setUiConfig(e)}return this};var Z=function(){var e=["interaction.selectability.mode","interaction.selectability.behavior"];function t(e,t){var i=e,r;r=t.reduce(function(e,t){if(i.hasOwnProperty(t)){e.push({parent:i,val:i[t],key:t});i=i[t]}return e},[]);if(r.length!==t.length){return}var a=r.pop();delete a.parent[a.key];while(r.length>0){a=r.pop();if(Object.keys(a.val).length>0){return}else{delete a.parent[a.key]}}}function i(i,r){var a=w.extend(true,{},i);e.forEach(function(e){delete a[e];t(a,e.split("."))});return a}return{sanitize:i,modify:function(e,t,i){var r=t.split("."),a=e;while(r.length>1&&a.hasOwnProperty(r[0])){a=a[r.shift()]}var s=r[0];if(r.length===1&&a.hasOwnProperty(s)){a[s]=i(a[s])}}}}();H.prototype.setVizProperties=function(e){e=Z.sanitize(e);var t=function(e,i){for(var r in i){var a=i[r];if(a!==undefined){if(!w.isPlainObject(a)){e[r]=a}else{var s=e[r];if(!s||!w.isPlainObject(s)){s=e[r]={}}t(s,a)}}}};var i=function(i,r){i=i||{};t(i,e);return i};e=i(w.extend(true,{title:{visible:false}},this.getProperty("vizProperties")),e);this.setProperty("vizProperties",e);if(e.plotArea&&e.plotArea.dataPointStyle){this._bDataPointStyleSetByUser=true;this._invalidateBy({source:this,keys:{vizFrame:true,loopData:true}})}if(e.legend&&e.legend.title){this._bLegendSetByUser=true}if(this._getVizFrame()){this._getVizFrame().setVizProperties(this._getEffectiveProperties())}return this};H.prototype.getVizProperties=function(){var e=this._getVizFrame();var t=Z.sanitize(e?e.getVizProperties():this.getProperty("vizProperties"));function i(e){var t=sap.viz.api.env.Format.numericFormatter();if(!t||typeof t.stripUnit!=="function"){return e}if(typeof e==="string"||e instanceof String){return t.stripUnit(e)}else if(e&&typeof e==="object"){w.each(e,function(i,r){e[i]=t.stripUnit(r)});return e}else{return e}}Z.modify(t,"plotArea.dataLabel.formatString",i);Z.modify(t,"tooltip.formatString",i);return t};H.prototype.setVizScales=function(e){this.setProperty("vizScales",e);this._aVizValueScales=e.filter(function(e){return e.feed==="valueAxis"||e.feed==="valueAxis2"||e.feed==="actualValues"});if(this._aVizValueScales&&this._aVizValueScales.length>0){this._bEnbableValueAxisScale=false}if(this._getVizFrame()){this._getVizFrame().setVizScales(e)}return this};H.prototype.getVizScales=function(){var e=this._getVizFrame();return e?e.getVizScales():this.getProperty("vizScales")};H.prototype.getVizUid=function(){return this._getVizFrame().getVizUid()};H.prototype.zoom=function(e){this._getVizFrame().zoom(e)};var J=["selectData","deselectData"];H.prototype._delegateEvents=function(){if(this._delegateEventHandlers){return}var e=this._getVizFrame();this._delegateEventHandlers=J.map(function(t){var i=t.charAt(0).toUpperCase()+t.slice(1);var r=function(e){var i=e.getParameters();this._buildSelectEventData(i.data);delete i.id;this.fireEvent(t,i)};r=r.bind(this);e["attach"+i](null,r);return{name:i,handler:r}},this);this._vizFrameRenderCompleteHandler=Y.bind(this);e.attachRenderComplete(null,this._vizFrameRenderCompleteHandler);e.attachEvent("_selectionDetails",K.bind(this))};H.getChartTypes=e.api.getChartTypes;H.prototype.getAvailableChartTypes=function(){var e=this._getVisibleDimensions(true),t=this._getVisibleMeasures(true);return g.CONFIG.chartTypes.reduce(function(i,r){var a=d.compatible(r,e,t);if(a.compatible){i.available.push({chart:r})}else{var s={};if(a.error.missing.dim){s.Dimension=a.error.missing.dim}if(a.error.missing.time){s.DateTimeDimension=a.error.missing.time}if(a.error.missing.msr){s.Measure=a.error.missing.msr}i.unavailable.push({chart:r,error:s})}return i},{available:[],unavailable:[]})};H.prototype._getDynamicScaleProp=function(){return{general:{enableScalingFactor:this.getEnableScalingFactor()}}};H.prototype._getEffectiveProperties=function(){var e={};if(this._bNeedToApplyDefaultProperties){e=w.extend(true,e,this._getDefaultVizProperties());this._bNeedToApplyDefaultProperties=false}var t=this.getChartType();e=w.extend(true,e,this._get100DonutProperty(t),this._oSemanticVizSettings.properties||{},this.getProperty("vizProperties"),this._getHostedVizProperties(),this._getPagingVizProperties(),this._getTimeProperties(),this._getValueAxisScaleSetting().property||{},this._getDynamicScaleProp(),v.getSemanticSettingsForCombination(this._semanticTuples,t));return e};H.prototype._get100DonutProperty=function(e){return{tooltip:{bodyMeasureValue:{type:e.indexOf("100_")===0?"percentage":"value"}}}};H.prototype._reset100DonutChartType=function(e){return e.indexOf("donut")>-1?"donut":e};H.prototype._setEffectiveScales=function(){var e=this._getVizFrame(),t=this.getProperty("vizScales"),i=this._getValueAxisScaleSetting(),r=(t||[]).filter(function(e){return e.feed==="color"});var a=U.extendScales(t,i.scale||[],this._oSemanticVizSettings.scales||[]);if(this._oSemanticVizSettings.replaceColorScales&&r.length===0){e.setVizScales(a,{replace:true})}else{e.setVizScales(a)}};H.prototype._usingDisplayNameForSemantics=function(e){var t=function(e){if(typeof e==="undefined"||e===null){return false}return true};if(e.plotArea&&e.plotArea.dataPointStyle&&e.plotArea.dataPointStyle.rules){var i=this._getContexts();if(i.length>0&&!i.hasOwnProperty("dataRequested")){var r=this.getVisibleDimensions(),a=e.plotArea.dataPointStyle.rules;for(var s=0;s<a.length;s++){var n=a[s].dataContext;if(n&&n.length!==0){var o=Object.keys(n);if(!t(a[s].displayName)&&o.length===1){var l=o[0];if(n[l].hasOwnProperty("equal")&&r.indexOf(l)!==-1){var h=this.getDimensionByName(l).getTextProperty();for(var u=0;u<i.length;u++){if(i[u].getProperty(l)===n[l].equal){var c=i[u].getProperty(h);if(!t(h)||!t(c)||typeof c==="object"||this.getDimensionByName(l).getDisplayText()===false){a[s].displayName=n[l].equal;break}else{a[s].displayName=c;break}}}}}}}}}};H.prototype._getCandidateColoringSetting=function(){if(!this._bColoringParsed&&this._semanticTuples){if(this._enableSemanticColoring()){this._bColoringParsed=true;this._oCandidateColoringSetting={};var e={},t=this.getColorings(),i=this.getActiveColoring();e.aMsr=this._normalizeDorM(this.getVisibleMeasures());var r=this._getDrillStateTop();var a=[],s;if(r.redundant){var a=Object.keys(r.redundant).filter(function(e){return e!=="measureNames"})}s=this._normalizeDorM(this.getVisibleDimensions().concat(a),true);e.aDim=s;e.aInResultDim=this._normalizeDorM(this.getInResultDimensions(),true);e.allMsr=this.getMeasures().map(function(e){return e.getName()});e.allDim=this.getDimensions().map(function(e){return e.getName()});if(t){try{var n=sap.ui.getCore().getLibraryResourceBundle("sap.chart.messages");var o={bFiltered:this._bFilterCalledByCustomer};this._oCandidateColoringSetting=z.getCandidateSetting(t,i,this._semanticTuples,e,this._oColoringStatus||{},this._sAdapteredChartType||this.getChartType(),n,o)}catch(e){if(e instanceof F){e.display()}else{throw e}}}}else{this._oCandidateColoringSetting={}}}return this._oCandidateColoringSetting};H.prototype._hostedVizProperties={selectionMode:{prop:"interaction.selectability.mode"},selectionBehavior:{prop:"interaction.selectability.behavior"}};H.prototype._getHostedVizProperties=function(){return Object.keys(this._hostedVizProperties).reduce(function(e,t){var i=this._hostedVizProperties[t].prop.split(".").reverse().reduce(function(e,t){var i={};i[t]=e;return i},this.getProperty(t));return w.extend(true,e,i)}.bind(this),{})};H.prototype._getDefaultVizProperties=function(){var e=this._sAdapteredChartType||this.getChartType();var t=e.indexOf("100_")===0;var i=e==="pie"||e.indexOf("donut")>-1;e="info/"+this._reset100DonutChartType(e);var r={interaction:{extraEventInfo:true}};return w.extend(true,r,n({},e,["valueAxis.label.formatString","valueAxis2.label.formatString"],t?"":B.DefaultPattern.SHORTFLOAT),n({},e,["legend.formatString","sizeLegend.formatString"],B.DefaultPattern.SHORTFLOAT_MFD2),n({},e,["plotArea.dataLabel.formatString"],i?"":B.DefaultPattern.SHORTFLOAT_MFD2),n({},e,["tooltip.formatString"],t?"":B.DefaultPattern.STANDARDFLOAT));function a(e,t,i){if(t.length===0){return i}e=e||{};var r=e[t[0]];e[t[0]]=a(r,t.slice(1),i);return e}function s(e,t){if(e==null||t.length===0){return e}var i=e[t[0]];if(i&&i.children){return s(i.children,t.slice(1))}return i}function n(e,t,i,r){var n=sap.viz.api.metadata.Viz.get(t);if(n){var o=n.properties;i.forEach(function(t){t=t.split(".");var i=s(o,t);if(i&&i.hasOwnProperty("defaultValue")){a(e,t,r)}})}return e}};H.prototype._getPagingVizProperties=function(){if(this._isEnablePaging()){var e={interaction:{zoom:{enablement:false},selectability:{mode:"NONE"}},plotArea:{isFixedDataPointSize:true}};return e}else{return{}}};H.prototype._getTimeProperties=function(){var e=["year","month","day"];var t=null;var i=this;var r=this.getVisibleDimensions().filter(function(e){var t=i.getDimensionByName(e);return t instanceof l&&t._getFixedRole()==="category"})[0];var a="ISO";var s,n,o;if(r){var h=this.getDimensionByName(r);switch(h.getTimeUnit()){case V.yearmonthday:e=["year","month","day"];break;case V.yearquarter:e=["year","quarter"];break;case V.yearmonth:e=["year","month"];break;case V.yearweek:e=["year","week"];var u=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale(),c=x.getInstance(u),o=u.getRegion();s=c.getMinimalDaysInFirstWeek();n=c.getFirstDayOfWeek();n=n===0?7:n;a="Gregorian";break;case V.fiscalyear:e=["fiscal_year"];break;case V.fiscalyearperiod:e=["fiscal_period","fiscal_year"];break;default:}t=h.getFiscalYearPeriodCount()}var d=this.getProperty("vizProperties");if(d&&d.timeAxis){var g=d.timeAxis;if(g.levels){e=g.levels}if(g.fiscal&&g.fiscal.periodNumbers){t=g.fiscal.periodNumbers}}return{timeAxis:{levels:e,fiscal:{periodNumbers:t},levelConfig:{week:{type:a,minDays:s,firstDayOfWeek:n,region:o}}}}};H.prototype.setSelectionMode=function(e){this.setProperty("selectionMode",e);var t=this._getVizFrame();if(t){t.setVizProperties({interaction:{selectability:{mode:e}}})}return this};H.prototype.getSelectionMode=function(){var e=this._getVizFrame();if(e){return e.getVizProperties().interaction.selectability.mode}else{return this.getProperty("selectionMode")}};H.prototype.setSelectionBehavior=function(e){this.setProperty("selectionBehavior",e);var t=this._getVizFrame();if(t){t.setVizProperties({interaction:{selectability:{behavior:e}}})}return this};H.prototype.setEnableScalingFactor=function(e){this.setProperty("enableScalingFactor",e);this._invalidateBy({source:this,keys:{vizFrame:true}});return this};H.prototype.getScalingFactor=function(){var e=this._getVizFrame();if(e){var t=e._states()["dynamicScale"];if(t){var i=null;var r=["primaryValues","secondaryValues"];var a=[t.valueAxis,t.valueAxis2];for(var s=0;s<r.length;s++){var n=a[s];if(n&&(n.symbol||n.unit)){i=i||{};var o=r[s];i[o]={scalingFactor:n.symbol};if(n.unit){i[o]["unit"]=n.unit}}}return i}}return null};H.prototype.getSelectionBehavior=function(){var e=this._getVizFrame();if(e){return e.getVizProperties().interaction.selectability.behavior}else{return this.getProperty("selectionBehavior")}};H.prototype.getDimensionByName=function(e){return this.getDimensions().filter(function(t){return t.getName()===e})[0]};H.prototype.getMeasureByName=function(e){return this.getMeasures().filter(function(t){return t.getName()===e})[0]};H.prototype.getTimeDimensions=function(){return this.getDimensions().filter(function(e){return e instanceof l})};H.prototype._isEnablePaging=function(){this._bMobile=P.system.tablet&&!P.system.desktop||P.system.phone;var e=this.getModel();var t=sap.ui.require("sap/ui/model/json/JSONModel");var i=!(t&&e instanceof t)&&this.getEnablePagination()&&this._bIsPagingChartType&&!this._bMobile;return i};function Y(e){var t=e.getParameters();delete t.id;if(this._isEnablePaging()){this._getPagingController().vizFrameRenderCompleted()}this.fireEvent("renderComplete",t)}function Q(e){var t=e.getParameters();delete t.id;this.fireEvent("_zoomDetected",t)}function K(e){var t=e.getParameters();delete t.id;var i=this._getDataset();t.data.forEach(function(e){e.context=i.findContext({_context_row_number:e.data._context_row_number})});this.fireEvent("_selectionDetails",t)}H.prototype._showLoading=function(e){var t=this.$();if(!t){return}if(!e){if(this._$loadingIndicator){this._$loadingIndicator.remove()}}else{if(!this._$loadingIndicator){this._$loadingIndicator=this._createLoadingIndicator()}this._updateLoadingIndicator();t.append(this._$loadingIndicator)}this._bLoading=e};H.prototype._createLoadingIndicator=function(){var e=w(M.getElement());var t=w("<p>").attr("class","loading-text").text("Loading");t.css({position:"absolute",transform:"translateY(-3em)",width:"100%","text-align":"center"});t.insertBefore(e.children()[0]);e.css({opacity:1});return e};H.prototype._updateLoadingIndicator=function(){var e=this.$();if(!e||!this._$loadingIndicator){return}var t=this._sAdapteredChartType,i=t==="bar"||t.indexOf("horizontal")!==-1;var r=e.find(".v-plot-bound"),a=e.offset(),s={top:a.top,left:a.left,width:e.width(),height:e.height()};if(r.length){var n=r.offset(),o=r[0].getBoundingClientRect();s.top=n.top-1;s.left=n.left;s.width=o.width+1;if(i){s.height=Math.ceil(o.height+1)}else{s.height=Math.floor(o.height+1)}}this._$loadingIndicator.css(s);var l=this._$loadingIndicator.find(".loading-text");l.css({top:s.height/2,"font-weight":k.get("sapUiChartTitleFontWeight"),"font-size":k.get("sapUiChartMainTitleFontSize"),color:k.get("sapUiChartMainTitleFontSize")});this._$loadingIndicator.css({"background-color":k.get("sapUiExtraLightBG")})};H.prototype._getRequiredDimensions=function(){var e=this._getVisibleDimensions(),t=this.getInResultDimensions();return this._normalizeDorM(e.concat(t),true)};H.prototype._getRequiredMeasures=function(){return this._getVisibleMeasures(true)};H.prototype.exportToSVGString=function(e){var t='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"/>',i=this._getVizFrame();if(i){t=i.exportToSVGString(e)}return t};H.prototype._getPagingController=function(){if(!this._pagingController){this._pagingController=new A(this)}return this._pagingController};return H});
/*
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/ChartLog",["sap/base/Log"],function(t){"use strict";function e(t,e,s){this._type=t;this._name=e;this._message=s}e.prototype.display=function(){if(this._type==="error"){t.error("[Analytical Chart] "+this._name,this._message)}};return e});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/ChartType",function(){"use strict";var a={Bar:"bar",Column:"column",Line:"line",Combination:"combination",Pie:"pie",Donut:"donut",Scatter:"scatter",Bubble:"bubble",Heatmap:"heatmap",Bullet:"bullet",VerticalBullet:"vertical_bullet",StackedBar:"stacked_bar",StackedColumn:"stacked_column",StackedCombination:"stacked_combination",HorizontalStackedCombination:"horizontal_stacked_combination",DualBar:"dual_bar",DualColumn:"dual_column",DualLine:"dual_line",DualStackedBar:"dual_stacked_bar",DualStackedColumn:"dual_stacked_column",DualCombination:"dual_combination",DualHorizontalCombination:"dual_horizontal_combination",DualStackedCombination:"dual_stacked_combination",DualHorizontalStackedCombination:"dual_horizontal_stacked_combination",PercentageStackedBar:"100_stacked_bar",PercentageStackedColumn:"100_stacked_column",PercentageDualStackedBar:"100_dual_stacked_bar",PercentageDualStackedColumn:"100_dual_stacked_column",PercentageDonut:"100_donut",Waterfall:"waterfall",HorizontalWaterfall:"horizontal_waterfall"};return a},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/ColoringType",function(){"use strict";var i={Criticality:"Criticality",Emphasis:"Emphasis",Gradation:"Gradation"};return i},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/ScaleBehavior",function(){"use strict";var e={AutoScale:"AutoScale",FixedScale:"FixedScale"};return e},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/SeriesColorTracker",["sap/ui/thirdparty/jquery"],function(r){"use strict";var e={color:true,color2:true};function t(){this._mSeriesColor={}}function i(r){var e=typeof r;if(e==="string"||r instanceof String){return'"'+r+'"'}else if(r===null||r===undefined){return e}else if(Array.isArray(r)){return"["+r.map(i).join(",")+"]"}else if(e==="object"){return"{"+Object.keys(r).map(function(e){return'"'+e+'":'+i(r[e])}).join(",")+"}"}else if(e==="number"||e==="boolean"){return String(r)}else{return e+"<"+String(r)+">"}}function n(r,e){var t;for(var i=0;i<r.length;++i){var n=r[i];if(n.fields.length===e.length){var s=true;for(var o=0;s&&o<e.length;++o){s=e[o]===n.fields[o]}if(s){t=n}}}if(!t){t={fields:e.slice(),results:{}};r.push(t)}return t}t.prototype.add=function(r){var t=this._mSeriesColor,s;if(r){r.forEach(function(r){var o=r.feed;if(!e[o]){return}s=t[o];if(!s){s=[];t[o]=s}var a=n(s,r.fields);var f=a.results;r.results.forEach(function(r){var e=i(r.dataContext);if(!f[e]){f[e]=r}})})}};t.prototype.get=function(){var r=Object.keys(this._mSeriesColor);var e=this._mSeriesColor;var t=[];for(var i=0;i<r.length;++i){var n=e[r[i]];var s={feed:r[i],mappings:[]};for(var o=0;o<n.length;++o){var a=[];var f=n[o].results;var u=Object.keys(f);for(var l=0;l<u.length;++l){a.push(f[u[l]])}s.mappings.push({results:a,fields:n[o].fields})}t.push(s)}return t};t.prototype.clear=function(){this._mSeriesColor={}};return t});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/TimeUnitType",function(){"use strict";var e={Date:"Date",yearmonthday:"yearmonthday",yearquarter:"yearquarter",yearmonth:"yearmonth",yearweek:"yearweek",fiscalyear:"fiscalyear",fiscalyearperiod:"fiscalyearperiod"};return e},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/ColorPalette",[],function(){"use strict";var a={};a.CRITICALITY={Positive:["sapUiChartPaletteSemanticGoodLight3","sapUiChartPaletteSemanticGoodLight2","sapUiChartPaletteSemanticGoodLight1","sapUiChartPaletteSemanticGood","sapUiChartPaletteSemanticGoodDark1","sapUiChartPaletteSemanticGoodDark2"],Critical:["sapUiChartPaletteSemanticCriticalLight3","sapUiChartPaletteSemanticCriticalLight2","sapUiChartPaletteSemanticCriticalLight1","sapUiChartPaletteSemanticCritical","sapUiChartPaletteSemanticCriticalDark1","sapUiChartPaletteSemanticCriticalDark2"],Negative:["sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBadDark2"],Neutral:["sapUiChartPaletteSemanticNeutralLight3","sapUiChartPaletteSemanticNeutralLight2","sapUiChartPaletteSemanticNeutralLight1","sapUiChartPaletteSemanticNeutral","sapUiChartPaletteSemanticNeutralDark1","sapUiChartPaletteSemanticNeutralDark2"]};a.EMPHASIS={Highlight:"sapUiChartPaletteQualitativeHue2",Others:"sapUiChartPaletteQualitativeHue1"};a.GRADATION={SingleColorScheme:{NoSemantics:["sapUiChartPaletteSemanticNeutralLight3","sapUiChartPaletteSemanticNeutralLight2","sapUiChartPaletteSemanticNeutralLight1","sapUiChartPaletteSemanticNeutral","sapUiChartPaletteSemanticNeutralDark1","sapUiChartPaletteSemanticNeutralDark2"],Positive:["sapUiChartPaletteSemanticGoodLight3","sapUiChartPaletteSemanticGoodLight2","sapUiChartPaletteSemanticGoodLight1","sapUiChartPaletteSemanticGood","sapUiChartPaletteSemanticGoodDark1","sapUiChartPaletteSemanticGoodDark2"],Negative:["sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBadDark2"]},DivergingColorScheme:{NoSemantics:["sapUiChartPaletteNoSemDiv1Dark2","sapUiChartPaletteNoSemDiv1Dark1","sapUiChartPaletteNoSemDiv1","sapUiChartPaletteNoSemDiv1Light1","sapUiChartPaletteNoSemDiv1Light2","sapUiChartPaletteNoSemDiv1Light3","sapUiChartPaletteSequentialNeutral","sapUiChartPaletteSequentialHue6Light3","sapUiChartPaletteSequentialHue6Light2","sapUiChartPaletteSequentialHue6Light1","sapUiChartPaletteSequentialHue6","sapUiChartPaletteSequentialHue6Dark1","sapUiChartPaletteSequentialHue6Dark2"],PositiveToNegative:["sapUiChartPaletteSemanticGoodDark2","sapUiChartPaletteSemanticGoodDark1","sapUiChartPaletteSemanticGood","sapUiChartPaletteSemanticGoodLight1","sapUiChartPaletteSemanticGoodLight2","sapUiChartPaletteSemanticGoodLight3","sapUiChartPaletteSequentialNeutral","sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBadDark2"],NegativeToPositive:["sapUiChartPaletteSemanticBadDark2","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSequentialNeutral","sapUiChartPaletteSemanticGoodLight3","sapUiChartPaletteSemanticGoodLight2","sapUiChartPaletteSemanticGoodLight1","sapUiChartPaletteSemanticGood","sapUiChartPaletteSemanticGoodDark1","sapUiChartPaletteSemanticGoodDark2"],ColdToHot:["sapUiChartPaletteSequentialHue1Dark2","sapUiChartPaletteSequentialHue1Dark1","sapUiChartPaletteSequentialHue1","sapUiChartPaletteSequentialHue1Light1","sapUiChartPaletteSequentialHue1Light2","sapUiChartPaletteSequentialHue1Light3","sapUiChartPaletteSequentialNeutral","sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBadDark2"],HotToCold:["sapUiChartPaletteSemanticBadDark2","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSequentialNeutral","sapUiChartPaletteSequentialHue1Light3","sapUiChartPaletteSequentialHue1Light2","sapUiChartPaletteSequentialHue1Light1","sapUiChartPaletteSequentialHue1","sapUiChartPaletteSequentialHue1Dark1","sapUiChartPaletteSequentialHue1Dark2"]},TargetColorScheme:{PositiveTarget:["sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticCriticalLight1","sapUiChartPaletteSemanticCriticalLight3","sapUiChartPaletteSemanticGoodLight2","sapUiChartPaletteSemanticGood"]}};return a});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/ColoringUtils",["sap/chart/ChartLog","sap/chart/data/TimeDimension"],function(e,r){"use strict";var n={};n.find=function(e,r){for(var n=0;n<r.length;n++){if(e===r[n].getName()){return r[n]}}return null};n.isNumber=function(){for(var e=0;e<arguments.length;e++){if(typeof arguments[e]!=="number"){return false}}return true};n.thresholdValue=function(e){e=e.filter(function(r){return e!=null});var r=e.map(function(e){return typeof e==="string"||e instanceof String});return function(n,i){for(var t=0;t<e.length;t++){var o;if(r[t]){if(n[e[t]]!=null){o=n[e[t]]}else{o=i[e[t]]}}else{o=e[t]}if(o!=null){return o}}}};n.isInRange=function(e,r,i,t,o){if(!n.isNumber(e,r,i)){return false}var a=t?r<=e:r<e;var s=o?e<=i:e<i;return a&&s};n.assignColor=function(e,r){switch(r){case 1:return[e[3]];case 2:return[e[1],e[3]];case 3:return[e[1],e[3],e[5]];case 4:return e.slice(1,5);case 5:return e.slice(1,6);case 6:return e.slice(0,6);default:return null}};n.assignUnmentionedColor=function(e,r){switch(r){case 1:return[e[1]];case 2:return[e[1],e[5]];case 3:return[e[1],e[2],e[4]];case 4:return[e[1],e[2],e[4],e[5]];case 5:return e.filter(function(e){return e!==3});default:return null}};n.dimOrMsrUse=function(r,n,i,t){var o=Object.keys(r).filter(function(e){return i.indexOf(e)>-1});if(n.dimension&&n.measure){throw new e("error","activeColoring",'Either "dimension" or "measure" can be set in activeColoring.parameters, but not both of them.')}else if(n.measure){if(t==="Gradation"){if(Array.isArray(n.measure)&&n.measure.length>1){o="DelineatedMeasures"}else{o="RankedMeasureValues"}}else{o="MeasureValues"}}else if(n.dimension){o=t==="Gradation"?"DelineatedDimensionValues":"DimensionValues"}else if(o.length>1){throw new e("error","colorings."+t,'"'+o.join('" and "')+'" all exist in '+t+", please resolve by activeColoring property.")}else if(o.length===1){o=o[0]}return o};var i=function(r,n,i,t,o){r.forEach(function(r){if(n.indexOf(r)<0){throw new e("error",i,t+r+o)}})};var t=function(e,r){var n=r.map(function(e){return e.getName()});i(e,n,"activeColoring.parameters.measure","Active measure, ",", should be visible.")};var o=function(e,r){var n=r.map(function(e){return e.getName()});i(e,n,"activeColoring.parameters.dimension","Active dimension, ",", should be visible.")};var a=function(e,r){var n=Object.keys(r);i(e,n,"activeColoring.parameters.measure","Active measure, ",", should be configured in coloring.")};var s=function(e,r){var n=Object.keys(r);i(e,n,"activeColoring.parameters.dimension","Active dimension, ",", should be configured in coloring.")};var u=function(r){if(r.length>1){throw new e("error","activeColoring.parameters.dimension","Multiple dimensions are defined. Please resolve by activeColoring property.")}};var l=function(i,t,o,a){var s=n.find(i,t);if(s instanceof r&&s.getRole()==="category"){throw new e("error","Colorings."+o+"."+a,"Do not support coloring on timeDimension, "+s.getName()+".")}};var c=function(r){if(r.bMBC){throw new e("error","Colorings","Heatmap only support Criticality.MeasureValues.ConstantThresholds or Gradation.RankedMeasureValues.")}};var f=function(r,n){if(!n.bWaterfall&&(n.bShowUnmentionedMsr&&r.aMsr.length>1||n.bHasOtherSeriesDim||n.bIsPie&&r.aDim.length>1)){throw new e("error","Colorings."+n.type+"."+n.subType,"Semantic coloring could not be applied if chart already has coloring.")}};n.checkColoringDimension=function(e,r,n,i){var t=r.aDim;o(e,t);s(e,n);u(e);l(e[0],t,i.type,i.subType);c(i);f(r,i)};n.checkColoringMeasure=function(e,r,n){t(e,r);a(e,n)};n.hasSeriesDim=function(e){return e.aDim.some(function(e){return e._getFixedRole()==="series"})};n.hasOtherSeriesDim=function(e,r){return r.aDim.some(function(r){return r._getFixedRole()==="series"&&r.getName()!==e})};n.hasDuplicatedValues=function(e){var r=false,n={};e.forEach(function(e){if(n[e]){r=true}else{n[e]=true}});return r};n.notIn=i;return n});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/Colorings",["sap/chart/coloring/criticality/Criticality","sap/chart/coloring/emphasis/Emphasis","sap/chart/coloring/gradation/Gradation","sap/chart/ChartLog","sap/ui/thirdparty/jquery"],function(e,i,t,r,n){"use strict";var a=["Criticality","Emphasis","Gradation"];function o(e,i,t){var n=t.aInResultDim,o=i.coloring||null;if(n&&n.length){throw new r("error","","Semantic coloring could not be applied if inResult Dimensions exist.")}if(!i||!i.coloring){throw new r("error","activeColoring","The activeColoring is mandatory.")}if(a.indexOf(o)<0){throw new r("error","activeColoring","The active coloring type, "+o+", is not supported.")}else if(Object.keys(e).indexOf(o)<0){throw new r("error","activeColoring","The active coloring type, "+o+", should be configured in Coloring.")}}function l(e){if(e.length<=1){return false}if(e.length>2){return true}var i,t,r=false;e.forEach(function(e){var n=e.getSemantics();if(n==="actual"&&!i){i=e}else if(n==="reference"&&!t){t=e}else{r=true}});r=r||i&&t&&i.getSemanticallyRelatedMeasures()!==t.getName();return r}return{getCandidateSetting:function(r,a,s,c,f,u,d,g){o(r,a||{},c);var h,p={},b={Criticality:e,Emphasis:i,Gradation:t};h=b[a.coloring];p.bMBC=u==="heatmap";p.bShowUnmentionedMsr=!(u&&u.indexOf("scatter")>-1||u&&u.indexOf("bubble")>-1);p.bIsScatter=u&&u.indexOf("scatter")>-1||u&&u.indexOf("bubble")>-1;p.bIsPie=u&&(u==="pie"||u.indexOf("donut")>-1);p.bWaterfall=u&&u.indexOf("waterfall")>-1;p.bTimeChart=u&&u.indexOf("timeseries")>-1;p.bIsLine=u&&u.indexOf("line")>-1;n.extend(true,p,g);if(u==="timeseries_bullet"&&l(c.aMsr)){return{}}if(h){var m=h.getCandidateSetting(r,a,s,c,f,p,d);m.type=a.coloring;return m}else{return{}}}}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/CriticalityType",function(){"use strict";var i={Negative:"Negative",Critical:"Critical",Positive:"Positive",Neutral:"Neutral"};return i},true);
/*
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/criticality/Criticality",["sap/chart/coloring/criticality/measureValues/MeasureValues","sap/chart/coloring/criticality/DimensionValues","sap/chart/coloring/ColoringUtils","sap/chart/coloring/ColorPalette","sap/chart/coloring/CriticalityType","sap/chart/data/MeasureSemantics","sap/ui/thirdparty/jquery"],function(e,t,i,a,r,n,s){"use strict";var l=["DimensionValues","MeasureValues"];var o=[r.Positive,r.Neutral,r.Critical,r.Negative,"Unmentioned"];var c=[r.Positive,r.Critical,r.Negative,r.Neutral];function u(e,t){var r=[];t.forEach(function(t){e.forEach(function(e){if(e.chartLog){throw e.chartLog}var n=e.parsed.callbacks[t]||[];n.forEach(function(s,l){var o,c;if(t==="Unmentioned"){o=i.assignUnmentionedColor(a.CRITICALITY.Neutral,n.length);c=e.parsed.legend[l]}else{o=i.assignColor(a.CRITICALITY[t],n.length);var u=e.parsed.legend[t];c=Array.isArray(u)?u[l]:u}var d={callback:s,properties:{color:o[l]},displayName:c};r.push(d)})})});return r}function d(e){var t=e[0];var r=t.parsed.legend;var n=[],s=[];var l=r.segments[0].upperBound>r.min;var o=r.segments.length<2||r.segments[r.segments.length-2].upperBound<r.max;r.segments.forEach(function(e){var t=i.assignColor(a.CRITICALITY[e.CriticalityType],1)[0];n.push(t);s.push(e.upperBound)});if(l){s=[r.min].concat(s)}else{n.splice(0,1)}if(o){s[s.length-1]=r.max}else{n.splice(n.length-1,1);s.splice(s.length-1,1)}var c=n.length;if(n.length===1){n=[n[0],n[0]];c=2}else if(n.length===0){return null}return{feed:"color",palette:n,numOfSegments:c,legendValues:s}}function f(e){var t;if(e&&e.legendTitle){t={title:{text:e.legendTitle,visible:true}}}return t}function g(e,t){return function(){var i,a;if(e.bMBC){i=d(e)}else{var r=u(e,t);a={plotArea:{dataPointStyle:{rules:r}},legend:f(e)}}return{colorScale:i,properties:a}}}function p(e,t){var i=[n.Actual,n.Projected,n.Reference];var a=[r.Positive,r.Neutral,r.Critical,r.Negative];var s=[];var l=[];var o=false;e.forEach(function(e){var a=false;var r=[];e.order=[];if(e.criticalityType){o=true}i.forEach(function(i){if(e[i]){var n=t.filter(function(t){return e[i]===t.msr.getName()})[0];if(n){a=true;e.order.push(i)}else{r.push(i)}}});e.order=e.order.concat(r);if(a){s.push(e)}else{l.push(e)}});if(o){s.sort(function(e,t){return a.indexOf(e.criticalityType)-a.indexOf(t.criticalityType)})}e.splice(0,e.length);e.push.apply(e,s.concat(l))}return{getCandidateSetting:function(a,r,n,u,d,f,h){var v=a.Criticality||{},m=r.parameters||{};var y=i.dimOrMsrUse(v,m,l,"Criticality");var C={additionalMeasures:[],additionalDimensions:[]};var T=f.bMBC,M,V,b;switch(y){case"DimensionValues":var x=m.dimension||Object.keys(v.DimensionValues);if(typeof x==="string"||x instanceof String){x=[x]}M=t.qualify(v.DimensionValues,x,u,f);if(M){C.qualifiedSettings=M;M.parsed=t.parse(M,u.aDim,d,h,f);C.contextHandler=t.getContextHandler(M,h,f);C.ruleGenerator=g([M],c)}break;case"MeasureValues":var D=m.measure||Object.keys(v.MeasureValues);if(typeof D==="string"||D instanceof String){D=[D]}M=e.qualify(v.MeasureValues,n,D,u,d,f);if(M.sMethod){s.each(M,function(t,i){V=e.parse(i,u,d,f,h);s.each(V.additionalMeasures,function(e,t){C.additionalMeasures.push(t)});s.each(V.additionalDimensions,function(e,t){C.additionalDimensions.push(t)});i.parsed=V;if(i.settings.Legend&&i.settings.Legend.Title){M.legendTitle=i.settings.Legend.Title}});b=M.sMethod;C.contextHandler=e.getContextHandler(b,M,T,h);C.qualifiedSettings=M;C.ruleGenerator=g(M,o);M.bMBC=T;p(n,M)}break;default:return{}}if(M.length){C.subType=y}return C},getLegendProps:f}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/criticality/DimensionValues",["sap/chart/coloring/ColoringUtils","sap/chart/ChartLog","sap/chart/data/TimeDimension","sap/chart/coloring/CriticalityType","sap/ui/thirdparty/jquery"],function(e,i,r,a,t){"use strict";var n={};var s=function(r,a,n,s){var l=t.extend({},s);l.bHasOtherSeriesDim=e.hasOtherSeriesDim(a[0],n);l.type="Criticality";l.subType="DimensionValues";e.checkColoringDimension(a,n,r,l);var o=r[a[0]],u=Object.keys(o),c=e.find(a[0],n.aDim),y=c.getRole()==="series"?true:false;u.forEach(function(e){var r=o[e].Values,a=o[e].Legend;r=Array.isArray(r)?r:[r];if(r.length>1&&!a){throw new i("error","Colorings.Criticality.DimensionValues","Legend is mandatory when one criticality type has multiple values.")}if((y||s.bIsPie)&&r.length>1){throw new i("error","Colorings.Criticality.DimensionValues","Criticality on Series Dimension, only single value could be assigned to each CriticalityType.")}})};n.qualify=function(e,i,r,a){s(e,i,r,a);var t=i[0],n;if(t){n={dim:t,setting:e}}return n};n.parse=function(e,i,r,n,s){var l={},o={},u=e.dim,c=[],y=e.setting[u],g=[];t.each(y,function(e,i){var r=!Array.isArray(i)?[i]:i;if(e!==a.Neutral){l[e]=r.map(function(e){return Array.isArray(e.Values)?e.Values:[e.Values]});c=Array.prototype.concat.apply(c,l[e])}o[e]=r.map(function(e){var i=Array.isArray(e.Values)?e.Values[0]:e.Values;var r=e.Legend!=null?e.Legend:i;return r})});if(y.Neutral){g=Array.isArray(y.Neutral.Values)?y.Neutral.Values:[y.Neutral.Values]}var p=function(e){return c.indexOf(e[u])===-1};function f(e){return function(i){return e.indexOf(i[u])!==-1}}var m={Negative:(l.Negative||[]).map(f),Critical:(l.Critical||[]).map(f),Positive:(l.Positive||[]).map(f),Neutral:[p]};return{callbacks:m,legend:o,aCriticalityValues:c.concat(g),status:r}};n.getContextHandler=function(e,r,a){var t=e.dim,n=e.parsed.aCriticalityValues;return function(s){var l=s.getProperty(t),o=this.getDimensionByName(t);if(n.indexOf(l)===-1){if(o._getFixedRole()==="series"||a.bIsPie){var u=new i("error","Colorings.Criticality.DimensionValues","Criticality on Series Dimension, all series must be applied coloring.");e.chartLog=u}else{e.parsed.legend.Neutral=r.getText("COLORING_TYPE_OTHER")}}}};return n});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/criticality/measureValues/MeasureUtils",["sap/chart/coloring/ColoringUtils","sap/chart/coloring/criticality/measureValues/ThresholdsUtils","sap/chart/ChartLog","sap/chart/coloring/CriticalityType","sap/chart/data/MeasureSemantics","sap/ui/thirdparty/jquery"],function(e,t,a,r,i,n){"use strict";var l={Static:{},Calculated:{},DynamicThresholds:{},ConstantThresholds:{},Unmentioned:{}};var s=["Maximize","Minimize","Target"];l.Static.validate=function(e,t,r,l,s){var o=e[t].Static;var c=function(e,r){if(d[r]===t){u=true;if(d.staticType){if(d.staticType!==o){var n="";Object.keys(i).forEach(function(e,t,a){var r=i[e];if(d[r]){if(t!==a.length-1){n+=d[r]+", "}else{n+=d[r]}}});throw new a("error","Colorings.Criticality.Static","When "+n+" have semantic relationship, they must use the same Criticality type.")}}else{d.staticType=o;if(s[o]){throw new a("error","Colorings.Criticality.Static","Measures, "+s[o]+" and "+t+", which use Static Criticality must have different types.")}else{s[o]=t}}return false}};var u=false;for(var g=0;g<l.length;++g){var d=l[g];n.each(i,c);if(u){break}}return{supportMultiMsr:true}};l.Static.parse=function(e,t,a){var r=e.msr?e.msr.getName():undefined;var i=e.settings[e.type];a.callbacks=l.Static.getCallbacks(i,r);var n=e.msr.getLabel()||e.msr.getName();var s=e.settings.Legend||{};a.legend[i]=s[i]!=null?s[i]:n};l.Static.getCallbacks=function(e,t){var a={};a[e]=[function(e){return e.hasOwnProperty(t)}];return a};l.Calculated.validate=function(e,t,r){var i=e[t].Calculated;var n=r.allDim.filter(function(e){return e===i})[0];var l=r.allMsr.filter(function(e){return e===i})[0];if(n){e[t].type="dimension"}else if(l){e[t].type="measure";if(r.aMsr.find(function(e){return e.getName()===l})){throw new a("error","Colorings.Criticality.Calculated","Calculated property, "+i+", could not be available measure.")}}if(!e[t].type){throw new a("error","Colorings.Criticality.Calculated","Calculated property, "+i+", does not exist in data model.")}};l.Calculated.parse=function(t,a,r,i,n){var s=t.settings[t.type];var o=t.settings.type;if(o==="dimension"&&!e.find(s,a.aDims)){r.additionalDimensions.push(s)}else if(o==="measure"){if(!a.aMsrs.find(function(e){return e.getName()===s})){r.additionalMeasures.push(s)}a.oStatus.legend=l.getLegend(t,n)}r.status=a.oStatus};l.Calculated.getCallbacks=function(e,t,a){var r=function(r){return(r[e]===t||l.Calculated.getCriticalityType(r[e])===t)&&r.hasOwnProperty(a)};return[r]};l.Calculated.getContextHandler=function(e,t,a){var i=e[0];var n=i.settings[i.type];var s=i.settings.type;delete i.settings.type;delete i.parsed.status.callbacks;return function(t){var o=i.parsed.status;o.legend=o.legend||{};o.callbacks=o.callbacks||{};i.parsed.legend=o.legend;i.parsed.callbacks=o.callbacks;var c=t.getProperty(n);if(s==="measure"){c=l.Calculated.getCriticalityType(c)}if(r[c]){if(s==="dimension"){var u=this.getDimensionByName(n);var g=this.getDimensionByName(n).getDisplayText();e.legendTitle=e.legendTitle||u.getLabel();var d=u.getTextProperty();if(d&&g){var h=t.getProperty(d);i.parsed.legend[c]=h}else if(c){i.parsed.legend[c]=a.getText("COLORING_TYPE_"+c.toUpperCase())}}var v=i.msr.getName();var m=l.Calculated.getCallbacks(n,c,v);i.parsed.callbacks[c]=m}}};l.Calculated.getCriticalityType=function(e){var t;switch(e){case 0:t=r.Neutral;break;case 1:t=r.Negative;break;case 2:t=r.Critical;break;case 3:t=r.Positive;break;default:t=undefined;break}return t};l.DynamicThresholds.validate=function(t,r,i){var n=i.allMsr;var l=[],o=t[r].DynamicThresholds,c;if(s.indexOf(o.ImprovementDirection)>-1){c=o.ImprovementDirection}else{throw new a("error","Colorings.Criticality.DynamicThresholds","ImprovementDirection should be one of 'Maximize', 'Minimize' and 'Target'.")}var u=[o.ToleranceRangeLowValue,o.DeviationRangeLowValue,o.AcceptanceRangeLowValue];var g=[o.ToleranceRangeHighValue,o.DeviationRangeHighValue,o.AcceptanceRangeHighValue];switch(c){case"Maximize":l=u;break;case"Minimize":l=g;break;case"Target":l=u.concat(g);break;default:}if(e.isNumber.apply(null,l)){throw new a("error","Colorings.Criticality.DynamicThresholds","Invalid Thresholds settings.")}l=l.filter(function(e){return typeof e=="string"});e.notIn(l,n,"Colorings.Criticality.DynamicThresholds","Thresholds measure, ",", does not exist in data model.")};l.DynamicThresholds.parse=function(e,a,r,i,n){var s=e.settings[e.type];var o=e.msr?e.msr.getName():undefined;var c=s.ImprovementDirection.toLowerCase();var u={lo:s.ToleranceRangeLowValue,hi:s.ToleranceRangeHighValue};var g={lo:s.DeviationRangeLowValue,hi:s.DeviationRangeHighValue};var d={lo:s.AcceptanceRangeLowValue,hi:s.AcceptanceRangeHighValue};t.fillOmit(d,u,g);r.additionalMeasures=[d.lo,d.hi,u.lo,u.hi,g.lo,g.hi].filter(function(e){return typeof e==="string"&&a.aMsrs.filter(function(t){return t.getName()===e}).length==0});r.callbacks=t.improvement(c,o,d,u,g);r.legend=l.getLegend(e,n)};l.DynamicThresholds.getContextHandler=function(e,a,r){var i=e[0],n=i.settings[i.type],l=n.ImprovementDirection.toLowerCase();function s(e,t){var a;if(typeof t==="number"){a=t}else{a=t?e.getProperty(t):null;if(typeof a==="string"){a=Number.parseFloat(a)}}return a}return function(e){var a={};a.lo=s(e,n.ToleranceRangeLowValue);a.hi=s(e,n.ToleranceRangeHighValue);var r={};r.lo=s(e,n.DeviationRangeLowValue);r.hi=s(e,n.DeviationRangeHighValue);var i={};i.lo=s(e,n.AcceptanceRangeLowValue);i.hi=s(e,n.AcceptanceRangeHighValue);t.fillOmit(i,a,r);t.checkThreshold(l,i,a,r)}};l.ConstantThresholds.validate=function(e,t){var r=e[t].ConstantThresholds;if(s.indexOf(r.ImprovementDirection)===-1){throw new a("error","Colorings.Criticality.ConstantThresholds","ImprovementDirection should be one of 'Maximize', 'Minimize' and 'Target'.")}return{supportHeatMap:true}};l.ConstantThresholds.parse=function(e,a,r,i,n){var s=e.settings[e.type];var o=e.msr?e.msr.getName():undefined;var c=e.msr?e.msr.getLabel()||e.msr.getName():undefined;var u=s.ImprovementDirection.toLowerCase();var g={lo:e.byAggregation.ToleranceRangeLowValue,hi:e.byAggregation.ToleranceRangeHighValue};var d={lo:e.byAggregation.DeviationRangeLowValue,hi:e.byAggregation.DeviationRangeHighValue};var h={lo:e.byAggregation.AcceptanceRangeLowValue,hi:e.byAggregation.AcceptanceRangeHighValue};t.fillOmit(h,g,d);t.checkThreshold(u,h,g,d,true);if(i){r.legend=t.MBCimprovement(u,h,g,d)}else{r.callbacks=t.improvement(u,o,h,g,d);r.legend=l.ConstantThresholds.getLegend(u,c,h,g,d,n)}};var o="";var c="<";var u="";var g=">";var d={"<":">",">":"<","":"","":""};l.ConstantThresholds.getLegend=function(t,a,r,i,n,l){var s={};var h=n.hi;var v=n.lo;var m=i.hi;var f=i.lo;var p=r.hi;var y=r.lo;function T(t,a,r){var i=t.length;var n=t[0]===Number.POSITIVE_INFINITY;var s=t[0]===Number.NEGATIVE_INFINITY;var o=t[i-1]===Number.POSITIVE_INFINITY;var c=t[i-1]===Number.NEGATIVE_INFINITY;if(r&&t[0]===t[i-1]){return""}if(a){if(i===5&&!(s&&o)){if(o||c){t=t.slice(0,3)}if(n||s){t=t.slice(2)}if(t.length<=1){return""}}else if(i===3&&(n||s||o||c)){return""}}t=t.map(function(e){if(e===Number.POSITIVE_INFINITY){return l.getText("POSITIVE_INFINITY")}else if(e===Number.NEGATIVE_INFINITY){return l.getText("NEGATIVE_INFINITY")}return e});if(t.length===3&&e.isNumber(t[0])){var u=d[t[1]];t=[t[2],u,t[0]]}return t.join(" ")}var C=function(e){return e&&e.length>0};var N=function(e){return e.filter(C).join(" , ")};switch(t){case"maximize":s={Positive:T([a,o,y]),Critical:T([v,u,a,c,f],true),Neutral:T([f,u,a,c,y],true),Negative:T([a,c,v])};break;case"minimize":s={Positive:T([a,u,p]),Critical:T([m,c,a,u,h],true),Neutral:T([p,c,a,u,m],true),Negative:T([a,g,h])};break;case"target":s={Positive:T([y,u,a,u,p],true),Critical:N([T([v,u,a,c,f],true,true),T([m,c,a,u,h],true,true)]),Neutral:N([T([f,u,a,c,y],true,true),T([p,c,a,u,m],true,true)]),Negative:N([T([a,c,v],true),T([a,g,h],true)])};break;default:}return s};l.ConstantThresholds.getContextHandler=function(e,t){if(t){var a=e[0];var r=a.msr.getName();var i=a.parsed.legend;return function(e){var t=e.getProperty(r);i.min=Math.min(i.min,t);i.max=Math.max(i.max,t)}}else{return null}};l.getLegend=function(e,t){var a={};n.each(r,function(e,r){a[r]=t.getText("COLORING_TYPE_"+r.toUpperCase())});return n.extend(true,{},a,e.settings.Legend)};return l});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/criticality/measureValues/MeasureValues",["sap/chart/coloring/ColoringUtils","sap/chart/coloring/ColorPalette","sap/chart/coloring/criticality/measureValues/MeasureUtils","sap/chart/ChartLog","sap/chart/data/MeasureSemantics","sap/ui/thirdparty/jquery"],function(e,t,r,a,i,n){"use strict";var s={};var o=["Static","Calculated","DynamicThresholds","ConstantThresholds"];function l(e,t,i,s,o,l,u,c){var h={supportMultiMsr:false,supportHeatMap:false};var f=o.length>1;if(r[e].validate){n.extend(h,r[e].validate(l,i,s,t,c))}if(f&&!h.supportMultiMsr){throw new a("error","Colorings.Criticality","Only support multiple active measures when using Static Criticality.")}if(u.bMBC&&!h.supportHeatMap){throw new a("error","Colorings","Heatmap only support Criticality.MeasureValues.ConstantThresholds.")}}var u=function(t,r,i,n,s){var u=i.aMsr;e.checkColoringMeasure(n,u,t);var h=[];n.forEach(function(e,u){var f=Object.keys(t[e]).filter(function(e){return o.indexOf(e)>-1}).sort();var g=c(f);if(f.length>1&&!g){throw new a("error","Colorings.Criticality.MeasureValues",'The combination of "DynamicThresholds"and "ConstantThresholds" or only one of "Static", "Calculated", "DynamicThresholds", or "ConstantThresholds" can be applied to the measure, '+e+".")}if(!g&&f.length===1){l(f[0],r,e,i,n,t,s,h)}});if(e.hasSeriesDim(i)||s.bTimeChart&&s.bWaterfall&&i.aDim.length>1||s.bIsPie&&i.aDim.length){throw new a("error","colorings.Criticality.MeasureValues","Semantic coloring could not be applied if chart already has coloring.")}};function c(e){return e.length===2&&e[0]=="ConstantThresholds"&&e[1]==="DynamicThresholds"}function h(e,t){var r=e.filter(function(e){return e.msr.getName()===t})[0];return r}function f(e,t,r){if(e.sMethod==="Static"){var a=[];t.forEach(function(t){n.each(i,function(s,o){var l=t[o];if(l){var u=h(e,t[o]);if(!u){n.each(i,function(i,n){if(o!==n){var s=h(e,t[n]);if(s){var u=r.filter(function(e){return e.getName()===l})[0];var c={msr:u,settings:{Static:s.settings.Static},type:"Static"};a.push(c)}}})}else{t.criticalityType=u.settings.Static}}})});e.push.apply(e,a)}}s.qualify=function(t,r,s,o,h,g){u(t,r,o,s,g);var d=[],m=[],p=o.aDim.map(function(e){return e.getName()}).sort();n.each(t,function(i,n){var u=Object.keys(n);var h=e.find(i,o.aMsr);var f=u.filter(function(e){return e!=="Legend"}).sort();if(s.length&&s.indexOf(i)===-1){return}var v=false,y;for(var C=0;C<f.length&&!v;C++){y=f[C];d.sMethod=y;if(y==="ConstantThresholds"){var M=null,b=null;for(var w=0;w<n[y].AggregationLevels.length;w++){if(n[y].AggregationLevels[w].VisibleDimensions){var T=n[y].AggregationLevels[w].VisibleDimensions.sort();if(T.join(",")===p.join(",")){M=n[y].AggregationLevels[w]}}else{b=n[y].AggregationLevels[w]}}M=M||b;if(M){v=true;if(!g.bFiltered){d.push({type:y,msr:h,settings:n,byAggregation:M});m.push(h.getName())}}}else{v=true;d.push({type:y,msr:h,settings:n});m.push(h.getName())}}if(!v){throw new a("error","Colorings.Criticality.MeasureValues.ConstantThresholds","No aggregation levels matched with current visible dimensions.")}if(c(f)){l(y,r,h.getName(),o,s,t,g)}});f(d,r,o.aMsr);if(d.length){var v=0;r.forEach(function(e){var t=false;n.each(i,function(r,a){if(m.indexOf(e[a])>-1){t=true;return false}});if(!t){e.iUnMentionedIndex=v++}});if(v>3){throw new a("error","Colorings.Criticality.MeasureValues","Too many unmentioned measures (the maximum number is 3).")}}d.bShowUnmentionedMsr=g.bShowUnmentionedMsr;return d};s.parse=function(e,t,a,i,n){var s=i.bMBC,o={aMsrs:t.aMsr,aDims:t.aDim,oStatus:a},l={msr:e.msr,callbacks:{},additionalDimensions:[],additionalMeasures:[],legend:{}};r[e.type].parse(e,o,l,s,n);return l};s.getContextHandler=function(e,t,a,i){if(r[e].getContextHandler){return r[e].getContextHandler(t,a,i)}else{return null}};return s});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/criticality/measureValues/ThresholdsUtils",["sap/chart/coloring/ColoringUtils","sap/chart/coloring/CriticalityType","sap/chart/ChartLog"],function(r,e,i){"use strict";var n={};var a={formulas:{}};var t=e.Negative;var u=e.Critical;var l=e.Positive;var o=e.Neutral;function I(r,e,i){return{upperBound:r,CriticalityType:e}}n.fillOmit=function(r,e,i){i.hi=i.hi==undefined?Number.POSITIVE_INFINITY:i.hi;i.lo=i.lo==undefined?Number.NEGATIVE_INFINITY:i.lo;e.hi=e.hi==undefined?i.hi:e.hi;e.lo=e.lo==undefined?i.lo:e.lo;r.hi=r.hi==undefined?e.hi:r.hi;r.lo=r.lo==undefined?e.lo:r.lo};n.checkThreshold=function(e,n,a,t,u){var l;var o=r.isNumber(n.lo,t.lo,a.lo);var I=r.isNumber(n.hi,a.hi,t.hi);switch(e){case"maximize":l=o&&(t.lo<=a.lo&&a.lo<=n.lo);break;case"minimize":l=I&&(n.hi<=a.hi&&a.hi<=t.hi);break;case"target":l=o&&I&&t.lo<=a.lo&&a.lo<=a.hi&&a.hi<=t.hi&&a.lo<=n.lo&&n.lo<=n.hi&&n.hi<=a.hi;break;default:}if(!l){var s=u?"ConstantThresholds":"DynamicThresholds";throw new i("error","Colorings.Criticality."+s,"Invalid Thresholds settings.")}};n.MBCimprovement=function(r,e,i,n){var a=n.hi;var s=n.lo;var v=i.hi;var f=i.lo;var m=e.hi;var c=e.lo;var N=[];var h,T;switch(r){case"maximize":h=[s,f,c,Number.POSITIVE_INFINITY];T=[t,u,o,l];break;case"minimize":h=[m,v,a,Number.POSITIVE_INFINITY];T=[l,o,u,t];break;case"target":h=[s,f,c,m,v,a,Number.POSITIVE_INFINITY];T=[t,u,o,l,o,u,t];break;default:throw new Error("Unsupported ImprovementDirection: "+r)}var g=[];switch(r){case"maximize":g[0]=s===-Infinity;g[1]=s===f;g[2]=f===c;g[3]=c===Infinity;break;case"minimize":g[0]=m===-Infinity;g[1]=m===v;g[2]=v===a;g[3]=a===Infinity;break;case"target":g[0]=s===-Infinity;g[1]=s===f;g[2]=f===c;g[3]=c===m;g[4]=m===v;g[5]=v===a;g[6]=a===Infinity;break;default:throw new Error("Unsupported ImprovementDirection: "+r)}h=h.filter(function(r,e){return!g[e]});T=T.filter(function(r,e){return!g[e]});N=T.map(function(r,e){return I(h[e],r,0)});return{segments:N,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}};function s(r){return[function(e,i){return r(e,i)}]}n.improvement=function(e,i,n,t,u){var l=u.hi;var o=u.lo;var I=t.hi;var v=t.lo;var f=n.hi;var m=n.lo;var c=r.thresholdValue([l,Number.POSITIVE_INFINITY]);var N=r.thresholdValue([o,Number.NEGATIVE_INFINITY]);var h=r.thresholdValue([I,l,Number.POSITIVE_INFINITY]);var T=r.thresholdValue([v,o,Number.NEGATIVE_INFINITY]);var g=r.thresholdValue([f,I,l,Number.POSITIVE_INFINITY]);var b=r.thresholdValue([m,v,o,Number.NEGATIVE_INFINITY]);var d={};switch(e){case"maximize":d["Negative"]=o==-Infinity?null:s(a.formulas.maximize.negative(i,N));d["Critical"]=o==v?null:s(a.formulas.maximize.critical(i,N,T));d["Neutral"]=v==m?null:s(a.formulas.maximize.critical(i,T,b));d["Positive"]=m==Infinity?null:s(a.formulas.maximize.positive(i,b));break;case"minimize":d["Negative"]=l==Infinity?null:s(a.formulas.minimize.negative(i,c));d["Critical"]=I==l?null:s(a.formulas.minimize.critical(i,h,c));d["Neutral"]=f==I?null:s(a.formulas.minimize.neutral(i,g,h));d["Positive"]=f==-Infinity?null:s(a.formulas.minimize.positive(i,g));break;case"target":d["Negative"]=o==-Infinity&&l===Infinity?null:s(a.formulas.target.negative(i,N,c));d["Critical"]=o==v&&I==l?null:s(a.formulas.target.critical(i,N,T,h,c));d["Neutral"]=v==m&&f==I?null:s(a.formulas.target.neutral(i,T,b,g,h));d["Positive"]=s(a.formulas.target.positive(i,b,g));break;default:throw new Error("Unsupported ImprovementDirection: "+e)}return d};a.formulas.maximize={negative:function(e,i){return function(n,a){var t=n[e];var u=i(n,a);return r.isInRange(t,Number.NEGATIVE_INFINITY,u,null,false)}},critical:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);return r.isInRange(u,l,o,true,false)}},neutral:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);return r.isInRange(u,l,o,true,false)}},positive:function(e,i){return function(n,a){var t=n[e];var u=i(n,a);return r.isInRange(t,u,Number.POSITIVE_INFINITY,true)}}};a.formulas.minimize={negative:function(e,i){return function(n,a){var t=n[e];var u=i(n,a);return r.isInRange(t,u,Number.POSITIVE_INFINITY,false)}},critical:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);return r.isInRange(u,l,o,false,true)}},neutral:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);return r.isInRange(u,l,o,false,true)}},positive:function(e,i){return function(n,a){var t=n[e];var u=i(n,a);return r.isInRange(t,Number.NEGATIVE_INFINITY,u,null,true)}}};a.formulas.target={negative:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);var I=r.isInRange(u,Number.NEGATIVE_INFINITY,l,null,false);var s=r.isInRange(u,o,Number.POSITIVE_INFINITY,false);return I||s}},critical:function(e,i,n,a,t){return function(u,l){var o=u[e];var I=i(u,l),s=n(u,l);var v=a(u,l),f=t(u,l);var m=r.isInRange(o,I,s,true,false);var c=r.isInRange(o,v,f,false,true);return m||c}},neutral:function(e,i,n,a,t){return function(u,l){var o=u[e];var I=i(u,l),s=n(u,l);var v=a(u,l),f=t(u,l);var m=r.isInRange(o,I,s,true,false);var c=r.isInRange(o,v,f,false,true);return m||c}},positive:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);return r.isInRange(u,l,o,true,true)}}};return n});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/emphasis/DimensionValues",["sap/chart/coloring/ColoringUtils","sap/chart/coloring/criticality/DimensionValues","sap/chart/ChartLog","sap/ui/thirdparty/jquery"],function(e,i,r,n){"use strict";var t={};var s=function(i,t,s,a){var g=n.extend({},a);g.bHasOtherSeriesDim=s.aDim.some(function(e){return e._getFixedRole()==="series"&&e.getName()!==t[0]});g.type="Emphasis";g.subType="DimensionValues";e.checkColoringDimension(t,s,i,g);var h=i[t[0]],l=h.Values,o=h.Legend||{};if(l.length>1&&!o.Highlighted){throw new r("error","Colorings.Emphasis.DimensionValues","Legend.Highlighted is mandatory when Highlight has multiple values.")}};t.qualify=function(e,i,r,n){s(e,i,r,n);var t;if(i[0]){t={dim:i[0],setting:e}}return t};t.parse=function(e,i){var r={},n=e.dim,t=e.setting[n],s=t.Values;var a=Array.isArray(s)?s:[s];var g=function(e){return a.indexOf(e[n])>-1};if(t.Legend&&t.Legend.Highlighted!=null){r.Highlight=t.Legend.Highlighted}else{r.Highlight=a[0]}if(t.Legend&&t.Legend.Others){r.Others=t.Legend.Others}else{r.Others=i.getText("COLORING_TYPE_OTHER")}var h={Highlight:g};return{callbacks:h,legend:r}};return t});
/*
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/emphasis/Emphasis",["sap/chart/coloring/emphasis/DimensionValues","sap/chart/coloring/ColorPalette","sap/chart/coloring/ColoringUtils","sap/chart/ChartLog","sap/chart/data/TimeDimension"],function(e,r,a,s,i){"use strict";var t=["DimensionValues","MeasureValues"];function n(e,a){var s=e[0];var i=s.parsed.callbacks.Highlight||[];var t=s.parsed.legend;var n=[];n.push({callback:i,properties:{color:r.EMPHASIS.Highlight},displayName:t.Highlight});var o={properties:{color:r.EMPHASIS.Others},displayName:t.Others};return{rules:n,others:o}}function o(e,r){return function(){var r={plotArea:{dataPointStyle:n(e)}};return{properties:r}}}return{getCandidateSetting:function(r,s,i,n,l,p,c){var u=r.Emphasis||{},h=s.parameters||{};var g=a.dimOrMsrUse(u,h,t,"Emphasis");var m;switch(g){case"DimensionValues":var d=h.dimension||Object.keys(u.DimensionValues);if(typeof d==="string"||d instanceof String){d=[d]}m=e.qualify(u.DimensionValues,d,n,p);if(m){m.parsed=e.parse(m,c);m.ruleGenerator=o([m])}break;default:return{}}if(m.length){m.subType=g}return m}}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/gradation/DelineatedDimensionValues",["sap/chart/coloring/ColoringUtils","sap/chart/data/MeasureSemantics","sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureUtils","sap/chart/ChartLog","sap/ui/thirdparty/jquery"],function(e,n,r,i,a){"use strict";var o={};var t=r.SingleColorScheme.SUPPORTED_SINGLE_SCHEMES;var l=r.SingleColorScheme.SUPPORTED_SATURATIONS;var s="colorings.Gradation.DelineatedDimensionValues";var c=function(n,r,o,c){if(n.SingleColorScheme&&t.indexOf(n.SingleColorScheme)===-1){throw new i("error",s,'"SingleColorScheme" should be one of "'+t.join('" or "')+'".')}if(n.Saturation&&l.indexOf(n.Saturation)===-1){throw new i("error",s,'"Saturation" should be one of "'+l.join('" or "')+'".')}var u={};Object.keys(n).forEach(function(e){if(e!=="SingleColorScheme"&&e!=="Saturation"){u[e]=n[e]}});var h=a.extend({},c);h.bHasOtherSeriesDim=e.hasOtherSeriesDim(r[0],o);h.type="Gradation";h.subType="DelineatedDimensionValues";e.checkColoringDimension(r,o,u,h);var d=u[r[0]];if(d){var g=d.Levels;if(!Array.isArray(g)||g.length<2||g.length>6){throw new i("error",s,'The number of dimension names contained in "Levels" should be between 2 to 6.')}if(e.hasDuplicatedValues(g)){throw new i("error",s,'The dimension names contained in "Levels" have duplicated values.')}}};o.qualify=function(e,n,r,i,a){c(e,n,i,a);var o=n[0],t;if(o){t={dim:o,setting:e}}return t};o.parse=function(e){var n=e.dim,r=e.setting;var i={callbacks:{},legend:{},singleColorScheme:r.SingleColorScheme||t[0],saturation:r.Saturation||l[0]};r[n].Levels.forEach(function(e){i.callbacks[e]=o.getCallback(n,e);i.legend[e]=e});return i};o.getCallback=function(e,n){return function(r){return r[e]===n}};o.getContextHandler=function(e){var n=e.dim,r=e.setting[n].Levels;return function(a){var o=a.getProperty(n);if(r.indexOf(o)===-1){e.chartLog=new i("error",s,"Dimension memeber, "+o+', should be configured in "Levels".')}}};return o});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/gradation/DelineatedMeasures",["sap/chart/coloring/ColoringUtils","sap/chart/data/MeasureSemantics","sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureUtils","sap/chart/ChartLog"],function(e,r,a,n){"use strict";var o={};var i=a.SingleColorScheme.SUPPORTED_SINGLE_SCHEMES;var t=a.SingleColorScheme.SUPPORTED_SATURATIONS;var l="colorings.Gradation.DelineatedMeasures";var s=function(r,a,o){if(o.bIsScatter){throw new n("error",l,'"DelineatedMeasures" could not apply to Scatter or Bubble.')}if(r.SingleColorScheme&&i.indexOf(r.SingleColorScheme)===-1){throw new n("error",l,'"SingleColorScheme" should be one of "'+i.join('" or "')+'".')}if(r.Saturation&&t.indexOf(r.Saturation)===-1){throw new n("error",l,'"Saturation" should be one of "'+t.join('" or "')+'".')}var s=a.aMsr.map(function(e){return e.getName()});var u=r.Levels;if(Array.isArray(u)&&u.length>=2&&u.length<=6){e.notIn(u,s,l,"Measure, ",', configured in "Levels" should be visible.');e.notIn(s,u,l,"Visible measure, ",', should be configured in "Levels".');if(e.hasDuplicatedValues(u)){throw new n("error",l,'The measure names contained in "Levels" have duplicated values.')}}else{throw new n("error",l,'The number of measure names contained in "Levels" should be between 2 to 6.')}if(e.hasSeriesDim(a)||o.bTimeChart&&o.bWaterfall&&a.aDim.length>1||o.bIsPie&&a.aDim.length){throw new n("error",l,"Semantic coloring could not be applied if chart already has coloring.")}};o.qualify=function(a,o,u,c){s(a,u,c);o.forEach(function(e){var a;Object.keys(r).forEach(function(o){var i=r[o];if(e[i]){if(!a){a=e[i]}else if(e[i]!==a){a+=", "+e[i];throw new n("error",l,"When "+a+' have semantic relationship, "DelineatedMeasures" could not be applied.')}}})});var h=[],d=a.Levels;d.forEach(function(r){h.push({msr:e.find(r,u.aMsr)})});h.SingleColorScheme=a.SingleColorScheme||i[0];h.Saturation=a.Saturation||t[0];h.Levels=d;return h};o.parse=function(e){var r=e.msr.getName();var a={msr:e.msr,callbacks:o.getCallbacks(r),legend:{}};a.legend[r]=r;return a};o.getCallbacks=function(e){var r={};r[e]=[function(r){return r.hasOwnProperty(e)}];return r};return o});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/gradation/Gradation",["sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureValues","sap/chart/coloring/gradation/DelineatedMeasures","sap/chart/coloring/gradation/DelineatedDimensionValues","sap/chart/coloring/ColorPalette","sap/chart/coloring/ColoringUtils","sap/chart/data/MeasureSemantics","sap/chart/ChartLog"],function(e,a,r,n,t,i,s){"use strict";var o=["DelineatedDimensionValues","RankedMeasureValues","DelineatedMeasures"];function l(a){return function(){var r,n;if(a.bMBC){r=e.createScales(a)}else{var t=c(a);n={plotArea:{dataPointStyle:{rules:t}}}}return{colorScale:r,properties:n}}}function c(e){var a=[];e.forEach(function(r,i){if(r.chartLog){throw r.chartLog}var s=r.dim;var o=r.setting[s].Levels;var l=n.GRADATION.SingleColorScheme[r.parsed.singleColorScheme];l=t.assignColor(l,o.length);if(r.parsed.saturation==="DarkToLight"){l=l.reverse()}o.forEach(function(n,t){var i={callback:r.parsed.callbacks[n],properties:{color:l[t]},displayName:r.parsed.legend[n]};if(e.bIsLine){i.properties.lineColor=i.properties.color}a.push(i)})});return a}function u(e,a){var r=[];a.forEach(function(a){var n=a.msr.getName();e.forEach(function(e){Object.keys(i).forEach(function(a){var t=i[a];if(e[t]===n){e.order=[];e.order.push(t);r.push(e)}})})});e.splice(0,e.length);e.push.apply(e,r)}return{getCandidateSetting:function(n,i,s,c,d,f,p){var g=n.Gradation||{},h=i.parameters||{};var v=t.dimOrMsrUse(g,h,o,"Gradation");var m={};var D;switch(v){case"RankedMeasureValues":var M=h.measure||Object.keys(g.RankedMeasureValues);if(typeof M==="string"||M instanceof String){M=[M]}D=e.qualify(g.RankedMeasureValues,M,c,f);if(D&&D.sMethod){D.forEach(function(a){a.parsed=e.parse(a)});m.contextHandler=e.getContextHandler(D);m.qualifiedSettings=D;m.ruleGenerator=l(D);D.bMBC=f.bMBC}break;case"DelineatedMeasures":D=a.qualify(g.DelineatedMeasures,s,c,f);if(D){m.qualifiedSettings=D;D.forEach(function(e){e.type=v;e.parsed=a.parse(e)});u(s,D)}break;case"DelineatedDimensionValues":var S=h.dimension||Object.keys(g.DelineatedDimensionValues).filter(function(e){return e!=="SingleColorScheme"&&e!=="Saturation"});if(typeof S==="string"||S instanceof String){S=[S]}D=r.qualify(g.DelineatedDimensionValues,S,s,c,f);if(D){m.qualifiedSettings=D;D.parsed=r.parse(D);m.contextHandler=r.getContextHandler(D);var b=[D];m.ruleGenerator=l(b);b.bIsLine=f.bIsLine}break;default:return{}}if(D&&D.length){m.subType=v}return m}}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureUtils",["sap/chart/coloring/ColoringUtils","sap/chart/coloring/ColorPalette","sap/chart/ChartLog"],function(e,r,o){"use strict";var a={SingleColorScheme:{},DivergingColorScheme:{},TargetColorScheme:{}};var i=["NoSemantics","Positive","Negative"];var n=["NoSemantics","PositiveToNegative","NegativeToPositive","ColdToHot","HotToCold"];var t=["PositiveTarget"];var l=["LightToDark","DarkToLight"];var g=5;var c=["BelowMidArea","AboveMidArea"];var s=["MidAreaLowValue","MidAreaHighValue"];var u=["BelowTargetMidpoint","AboveTargetMidpoint"];var h=["TargetMidpoint"];var m="colorings.Gradation.RankedMeasureValues";function f(r){return e.isNumber(r)&&r%1===0&&r>=2&&r<=6}function v(e,r,o){var a=[];var i=(r-e)/o;if(i>1){if(e+Math.ceil(i)*(o-1)<r){i=Math.ceil(i)}else{i=Math.floor(i)}}for(var n=0;n<o;n++){a.push(e+i*n)}return a}function d(e,r,o,a,i){var n=e.min,t=e.max,l=e.hasOwnProperty("belowMidArea")?e.belowMidArea:e.belowTargetMidpoint,g=e.hasOwnProperty("aboveMidArea")?e.aboveMidArea:e.aboveTargetMidpoint,c=e.hasOwnProperty("midAreaLowValue")?e.midAreaLowValue:e.targetMidpoint,s=e.midAreaHighValue;var u=[],h=[],m=[],f=0;if(c!==undefined){u.push(c)}if(s!==undefined&&u.indexOf(s)===-1){u.push(s)}if(u.length>1){h.push(1);m.push(a);f++}var d;if(n<u[0]){u=[n].concat(u);h=[l].concat(h);d=i(r,l);if(r.gradationSaturation==="DarkToLight"){d=d.reverse()}m=d.concat(m);f+=l}if(t>u[u.length-1]){u=u.concat([t]);h=h.concat([g]);d=i(o,g);if(o.gradationSaturation==="DarkToLight"){d=d.reverse()}m=m.concat(d);f+=g}var S=[];for(var b=0;b<u.length-1;b++){S=S.concat(v(u[b],u[b+1],h[b]))}S=S.concat(u.slice(-1));if(m.length===0){m=i(r,1);return{feed:"color",palette:[],startColor:m[0],endColor:m[0],numOfSegments:1}}return{feed:"color",palette:m,numOfSegments:f,maxNumOfSegments:13,legendValues:S}}a.SingleColorScheme.SUPPORTED_SINGLE_SCHEMES=i;a.SingleColorScheme.SUPPORTED_SATURATIONS=l;a.SingleColorScheme.validate=function(e,r){var a=e[r].SingleColorScheme||{};if(a.Scheme&&i.indexOf(a.Scheme)===-1){throw new o("error",m,'"SingleColorScheme.Scheme" of the measure, '+r+', should be one of "'+i.join('" or "')+'".')}if(a.Saturation&&l.indexOf(a.Saturation)===-1){throw new o("error",m,'"SingleColorScheme.Saturation" of the measure, '+r+', should be one of "'+l.join('" or "')+'".')}};a.SingleColorScheme.parse=function(e,r){var o=e.settings[e.type];var a=[];if(e.byAggregation){a=e.byAggregation.LevelBoundaries}r.legend={segments:a,gradationScheme:o.Scheme||i[0],gradationSaturation:o.Saturation||l[0],numberOfLevels:o.NumberOfLevels||g,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}};a.SingleColorScheme.createScales=function(o){var a=[],i=o[0];var n=i.parsed.legend;var t=r.GRADATION.SingleColorScheme[n.gradationScheme];var l=n.numberOfLevels;if(n.segments.length>0){a=n.segments;l=a.length-1;var g=n.min,c=n.max;if(g<a[0]){a=[g].concat(a);l++}if(c>a[a.length-1]){a=a.concat([c]);l++}}t=e.assignColor(t,l);if(n.gradationSaturation==="DarkToLight"){t=t.reverse()}return{feed:"color",palette:t,numOfSegments:l,legendValues:a}};a.SingleColorScheme.levels=function(e,r,a){var i=e[r].SingleColorScheme;if(a){var n=false;var t=a.LevelBoundaries;if(Array.isArray(t)&&t.length>=1&&t.length<=5){n=t.reduce(function(e,r){return e<r?r:Number.POSITIVE_INFINITY},Number.NEGATIVE_INFINITY)<Number.POSITIVE_INFINITY}if(!n){throw new o("error",m,'"SingleColorScheme.RankingPerAggregationLevel.LevelBoundaries" of the measure, '+r+", may contain between 1 to 5 members in strictly increasing sequence.")}}else{if(i.hasOwnProperty("NumberOfLevels")){var l=i.NumberOfLevels;if(!f(l)){throw new o("error",m,'"SingleColorScheme.NumberOfLevels" of the measure, '+r+", should be an Integer between 2 to 6.")}}}};a.DivergingColorScheme.validate=function(e,r){var a=e[r].DivergingColorScheme;if(a.Scheme&&n.indexOf(a.Scheme)===-1){throw new o("error",m,'"DivergingColorScheme.Scheme" of the measure, '+r+', should be one of "'+n.join('" or "')+'".')}var i=a.NumberOfLevels;c.forEach(function(e){if(!f(i&&i[e])){throw new o("error",m,'"DivergingColorScheme.NumberOfLevels.'+e+'"  of the measure, '+r+", should be an Integer between 2 to 6.")}})};a.DivergingColorScheme.parse=function(e,r){var o=e.settings[e.type];r.legend={midAreaLowValue:e.byAggregation.MidAreaLowValue,midAreaHighValue:e.byAggregation.MidAreaHighValue,gradationScheme:o.Scheme||n[0],belowMidArea:o.NumberOfLevels.BelowMidArea,aboveMidArea:o.NumberOfLevels.AboveMidArea,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}};a.DivergingColorScheme.createScales=function(o){var a=o[0];var i=a.parsed.legend;var n=r.GRADATION.DivergingColorScheme[i.gradationScheme],t=n.slice(0,6).reverse(),l=n.slice(7);t.gradationSaturation="DarkToLight";return d(i,t,l,n[6],e.assignColor)};a.DivergingColorScheme.levels=function(r,a,i){var n=false;s.forEach(function(r){if(i.hasOwnProperty(r)){n=true;if(!e.isNumber(i[r])){throw new o("error",m,'"DivergingColorScheme.NumberOfLevels.'+r+'"  of the measure, '+a+", should be a number.")}}});if(!n){throw new o("error",m,'At least one of the "MidAreaLowValue" or "MidAreaHighValue" in "DivergingColorScheme.RankingPerAggregationLevel" of the measure, '+a+", should be specified.")}if(i.MidAreaLowValue>i.MidAreaHighValue){throw new o("error",m,'"MidAreaLowValue" should no more than "MidAreaHighValue" in "DivergingColorScheme.RankingPerAggregationLevel" of the measure, '+a+".")}};a.TargetColorScheme.validate=function(e,r){var a=e[r].TargetColorScheme;if(a.Scheme&&t.indexOf(a.Scheme)===-1){throw new o("error",m,'"TargetColorScheme.Scheme" of the measure, '+r+',  should be "'+t.join('" or "')+'".')}var i=a.NumberOfLevels;u.forEach(function(e){if(!f(i&&i[e])){throw new o("error",m,'"TargetColorScheme.NumberOfLevels.'+e+'"  of the measure, '+r+", should be an Integer between 2 to 6.")}})};a.TargetColorScheme.parse=function(e,r){var o=e.settings[e.type];r.legend={targetMidpoint:e.byAggregation.TargetMidpoint,gradationScheme:o.Scheme||t[0],belowTargetMidpoint:o.NumberOfLevels.BelowTargetMidpoint,aboveTargetMidpoint:o.NumberOfLevels.AboveTargetMidpoint,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}};a.TargetColorScheme.createScales=function(e){var o=e[0];var i=o.parsed.legend;var n=r.GRADATION.TargetColorScheme[i.gradationScheme],t=n.slice(0,6),l=n.slice(0,6);l.gradationSaturation="DarkToLight";return d(i,t,l,null,a.TargetColorScheme.assignColor)};a.TargetColorScheme.levels=function(r,a,i){h.forEach(function(r){if(!e.isNumber(i[r])){throw new o("error",m,'"TargetColorScheme.NumberOfLevels.'+r+'"  of the measure, '+a+", should be a number.")}})};a.TargetColorScheme.assignColor=function(e,r){switch(r){case 1:return[e[5]];case 2:return[e[0],e[5]];case 3:return[e[0],e[2],e[5]];case 4:return e.slice(0,2).concat(e.slice(4,6));case 5:return e.slice(0,3).concat(e.slice(4,6));case 6:return e.slice(0,6);default:return null}};return a});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureValues",["sap/chart/coloring/ColoringUtils","sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureUtils","sap/chart/ChartLog","sap/ui/thirdparty/jquery"],function(e,r,n,a){"use strict";var i={};var t=["SingleColorScheme","DivergingColorScheme","TargetColorScheme"];var o=function(a,i,o,s){if(!s.bMBC){throw new n("error","colorings.Gradation",'"RankedMeasureValues" only applys to Heatmap.')}e.checkColoringMeasure(i,o.aMsr,a);i.forEach(function(e){var i=Object.keys(a[e]).filter(function(e){return t.indexOf(e)>-1});if(i.length>1){throw new n("error","colorings.Gradation.RankedMeasureValues",'One and only one of "'+t.join('" or "')+'" can be applied to the measure, '+e+".")}else{var o=i[0]||t[0];if(r[o].validate){r[o].validate(a,e)}}})};i.qualify=function(i,s,l,u){o(i,s,l,u);var c=[],g=l.aDim.map(function(e){return e.getName()}).sort();a.each(i,function(a,o){if(s.length&&s.indexOf(a)===-1){return}var f=e.find(a,l.aMsr);if(Object.keys(o).length===0){o["SingleColorScheme"]={}}Object.keys(o).forEach(function(e){if(t.indexOf(e)===-1){return}c.sMethod=e;var s=null,l=null;var h=Array.isArray(o[e].RankingPerAggregationLevel)?o[e].RankingPerAggregationLevel:[];h.forEach(function(e){if(e&&e.VisibleDimensions){if(Array.isArray(e.VisibleDimensions)&&e.VisibleDimensions.sort().join(",")===g.join(",")){s=e}}else{l=e}});s=s||l;if(s||h.length===0&&e==="SingleColorScheme"){if(r[e].levels){r[e].levels(i,a,s)}c.push({type:e,msr:f,settings:o,byAggregation:u.bFiltered?null:s})}else{throw new n("error","colorings.Gradation.RankedMeasureValues",'No aggregation level in "'+e+'" of the measure, '+a+",  matched with current visible dimensions.")}})});return c};i.parse=function(e){var n={msr:e.msr,legend:{}};r[e.type].parse(e,n);return n};i.createScales=function(e){return r[e.sMethod].createScales(e)};i.getContextHandler=function(e){var r=e[0];var n=r.msr.getName();var a=r.parsed.legend;return function(e){var r=e.getProperty(n);a.min=Math.min(a.min,r);a.max=Math.max(a.max,r)}};return i});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/Dimension",["sap/ui/core/Element","sap/chart/utils/ChartUtils","sap/ui/thirdparty/jquery"],function(t,e,r){"use strict";var a={category:true,category2:true,series:true};var o=t.extend("sap.chart.data.Dimension",{metadata:{library:"sap.chart",properties:{name:{type:"string"},label:{type:"string"},textFormatter:{type:"function"},textProperty:{type:"string"},displayText:{type:"boolean",defaultValue:true},role:{type:"string",defaultValue:"category"}}}});o.prototype.setLabel=e.makeNotifyParentProperty("label");o.prototype.setTextFormatter=e.makeNotifyParentProperty("textFormatter");var p=e.makeNotifyParentProperty("textProperty");o.prototype.setTextProperty=function(t,e){return p.apply(this,arguments)};o.prototype.setDisplayText=e.makeNotifyParentProperty("displayText");var i=e.makeNotifyParentProperty("role");o.prototype.setRole=function(t,e){if(!a[t]){throw new TypeError("Invalide Dimension role: "+t)}return i.apply(this,arguments)};o.prototype._getFixedRole=function(){return this._sFixedRole||this.getRole()};return o});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/DimensionRoleType",function(){"use strict";var e={category:"category",series:"series",category2:"category2"};return e},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/HierarchyDimension",["sap/chart/data/Dimension","sap/chart/utils/ChartUtils"],function(e,t){"use strict";var a=e.extend("sap.chart.data.HierarchyDimension",{metadata:{library:"sap.chart",properties:{level:{type:"int",defaultValue:0}}}});a.prototype.setLevel=t.makeNotifyParentProperty("level");a.prototype._getEffectiveLevel=function(){if(this._iEffectiveLevel==null){return this.getLevel()}else{return this._iEffectiveLevel}};return a});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/Measure",["sap/ui/core/Element","sap/chart/utils/ChartUtils","sap/chart/data/MeasureSemantics","sap/ui/thirdparty/jquery"],function(e,t,a,r){"use strict";var i={axis1:true,axis2:true,axis3:true,axis4:true};var s=e.extend("sap.chart.data.Measure",{metadata:{library:"sap.chart",properties:{name:{type:"string"},label:{type:"string"},unitBinding:{type:"string"},valueFormat:{type:"string",defaultValue:null},role:{type:"string",defaultValue:"axis1"},semantics:{type:"sap.chart.data.MeasureSemantics",defaultValue:a.Actual},semanticallyRelatedMeasures:{type:"object",defaultValue:null},analyticalInfo:{type:"object",defaultValue:null}}}});s.prototype.setLabel=t.makeNotifyParentProperty("label");var l=t.makeNotifyParentProperty("role");s.prototype.setRole=function(e,t){if(!i[e]){throw new TypeError("Invalide Measure role: "+e)}return l.apply(this,arguments)};s.prototype.setUnitBinding=t.makeNotifyParentProperty("unitBinding");s.prototype.setValueFormat=t.makeNotifyParentProperty("valueFormat");s.prototype.setSemantics=t.makeNotifyParentProperty("semantics");s.prototype.setSemanticallyRelatedMeasures=t.makeNotifyParentProperty("semanticallyRelatedMeasures");s.prototype._getFixedRole=function(){return this._sFixedRole||this.getRole()};return s});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/MeasureRoleType",function(){"use strict";var a={axis1:"axis1",axis2:"axis2",axis3:"axis3",axis4:"axis4"};return a},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/MeasureSemantics",function(){"use strict";var e={Actual:"actual",Reference:"reference",Projected:"projected"};return e},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/TimeDimension",["sap/chart/data/Dimension","sap/chart/utils/ChartUtils"],function(t,e){"use strict";var a=t.extend("sap.chart.data.TimeDimension",{metadata:{library:"sap.chart",properties:{timeUnit:{type:"sap.chart.TimeUnitType"},fiscalYearPeriodCount:{type:"object"},projectedValueStartTime:{type:"any"}}}});a.prototype.setTimeUnit=e.makeNotifyParentProperty("timeUnit");a.prototype.setFiscalYearPeriodCount=e.makeNotifyParentProperty("fiscalYearPeriodCount");a.prototype.setProjectedValueStartTime=e.makeNotifyParentProperty("projectedValueStartTime");return a});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/library",["sap/viz/ui5/format/ChartFormatter","sap/ui/core/library","sap/viz/library","sap/chart/utils/RoleFitter","sap/chart/utils/ChartTypeAdapterUtils","sap/chart/ChartType","sap/chart/data/Dimension","sap/chart/data/Measure","sap/chart/AutoScaleMode","sap/chart/ScaleBehavior","sap/chart/data/MeasureSemantics","sap/chart/coloring/CriticalityType","sap/chart/ColoringType","sap/chart/data/DimensionRoleType","sap/chart/data/MeasureRoleType"],function(e,a,t,r,i,o,n,s,c,u,p){"use strict";var l=sap.ui.getCore().initLibrary({name:"sap.chart",dependencies:["sap.ui.core","sap.viz"],types:["sap.chart.data.MeasureSemantics"],interfaces:[],controls:["sap.chart.Chart"],elements:["sap.chart.data.Dimension","sap.chart.data.TimeDimension","sap.chart.data.HierarchyDimension","sap.chart.data.Measure"],noLibraryCSS:true,version:"1.102.1"});l.SelectionMode={Multi:"MULTIPLE",Single:"SINGLE",None:"NONE"};l.SelectionBehavior={DataPoint:"DATAPOINT",Category:"CATEGORY",Series:"SERIES"};l.MessageId={NoData:"NO_DATA",MultipleUnits:"MULTIPLE_UNITS"};l.api={};l.api.getChartTypes=function(){var e=sap.ui.getCore().getLibraryResourceBundle("sap.chart.messages");return Object.keys(o).reduce(function(a,t){var r=o[t];a[r]=e.getText("info/"+r);return a},{})};l.data=l.data||{};l.coloring=l.coloring||{};l.coloring.ImprovementDirectionType={Minimize:"Minimize",Target:"Target",Maximize:"Maximize"};l.coloring.GradationSingleColorScheme={NoSemantics:"NoSemantics",Positive:"Positive",Negative:"Negative"};l.coloring.GradationDivergingColorScheme={NoSemantics:"NoSemantics",PositiveToNegative:"PositiveToNegative",NegativeToPositive:"NegativeToPositive",ColdToHot:"ColdToHot",HotToCold:"HotToCold"};l.coloring.GradationTargetColorScheme={PositiveTarget:"PositiveTarget"};l.coloring.GradationSaturation={LightToDark:"LightToDark",DarkToLight:"DarkToLight"};l.api.getChartTypeLayout=function(e,a,t){var o,c;if(!e){throw new Error("Invalid chart type: "+String(e))}if(a){o=a.map(function(e,a){if(e instanceof n){return e}else if(e&&e.name){return{getName:function(){return e.name},getRole:function(){return e.role||"category"}}}else{throw new Error("Invalid Dimension at ["+a+"]: "+String(e)+". Dimension should be an object of the format{name:'name'} or an instance of sap.chart.data.Dimension.")}})}else{o=[]}if(t){c=t.map(function(e,a){if(e instanceof s){return e}else if(e&&e.name){return{getName:function(){return e.name},getRole:function(){return e.role||"axis1"}}}else{throw new Error("Invalid Measure at ["+a+"]: "+String(e)+". Measure should be an object of the format{name:'name'} or an instance of sap.chart.data.Measure.")}})}else{c=[]}var u=i.adaptChartType(e,o);var p=r.compatible(u,o,c);return{dimensions:p.used.Dimension||[],measures:p.used.Measure||[],errors:Object.keys(p.error||{}).reduce(function(e,a){return e.concat({cause:a,detail:p.error[a]})},[])}};var m=e.getInstance();if(!(sap.viz.api.env.Format.numericFormatter()instanceof e)){sap.viz.api.env.Format.numericFormatter(m)}return l});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/pagination/PagingController",["sap/ui/model/Sorter","sap/ui/thirdparty/jquery"],function(e,t){"use strict";var i=500;function a(e,t,i){var a=e.getContexts(t,i),r;if(a.length===0||a.dataRequested){r=true}else{r=a.some(function(e){return e===undefined})}return!r}var r=function(e){this._mMeasureRange={};this._iRenderedPageNo=-1;this._bUnderPaging=false;this._iMaxPageNo=-1;this._iRemainingRecords=-1;this._iOffset=null;this._oChart=e;this._bInitialized=false;this._aPagingSorters=null;this._bMinMaxQueried=false;this._oColorTracker=e._oColorTracker;var t=this._oChart._getDataset();if(t){t.setRange(0,i*2)}var a=this._oChart._getVizFrame();a.attachEvent("_scroll",r.prototype._scrollHandler.bind(this))};r.prototype.bindingChanged=function(){if(!this._bInitialized||!this._bMinMaxQueried){this.init(true)}else if(this.isUnderPaging()){this.paging(this._scrollRatio)}};r.prototype.reset=function(){this._bInitialized=false;this._iRenderedPageNo=0;this._mMeasureRange={};this._bMinMaxQueried=false;this._oColorTracker.clear();var t=this._oChart.getBinding("data");var a=this._oChart._getDataset();if(!a||!t){return}var r=this._oChart._prepareFeeds();r._order=r._order.filter(function(e){return e!=="MND"&&this._oChart.getDimensions().map(function(e){return e.getName()}).indexOf(e)>-1}.bind(this));this._aPagingSorters=null;this._oChart._getVizFrame()._runtimeScales(this._oColorTracker.get(),true);this._oChart._getVizFrame()._readyToRender(false);var n;if(this._oChart.getBindingInfo("data").length){n=Math.min(i*2,this._oChart.getBindingInfo("data").length)}else{n=i*2}a.setRange(0,n);var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");if(r._order.length){var o=this._oChart._aFeeds._order.map(function(t){return new e(t)});t.sort(o);this._aPagingSorters=o}else if(s&&t.getModel()instanceof s){t.sort([])}a.setPagingOption({bEnabled:false})};r.prototype.getPagingSorters=function(){return this._aPagingSorters};r.prototype.isUnderPaging=function(){return!!this._bUnderPaging};r.prototype.init=function(e){this._bInitialized=true;this._bUnderPaging=false;var t=this._oChart._getVizFrame();var r=t.getDataset();var n=r.getBinding("data");if(!n){return}var s=n.isA("sap.ui.model.analytics.AnalyticalBinding")?n.getTotalSize():n.getLength();var o;if(s>=0){if(this._oChart.getBindingInfo("data").length){this._iTotalSize=Math.min(this._oChart.getBindingInfo("data").length,s)}else{this._iTotalSize=s}if(this._iTotalSize>i*2){this._bUnderPaging=true;this._iMaxPageNo=Math.floor(this._iTotalSize/i)-1;this._iRemainingRecords=this._iTotalSize%i;this._iOffset=null;this._iRenderedPageNo=0;var h=i/this._iTotalSize;o={bEnabled:true,sMode:"reset",thumbRatio:h};r.setRange(0,i);if(e){this._bMinMaxQueried=true;var g=this._oChart._oMeasureRangePromise||this._queryMinMax(this._oChart,n);g.then(function(e){this._mMeasureRange=e;this._oChart._invalidateBy({source:this._oChart,keys:{vizFrame:true}});this._oChart.setBusy(false);t._readyToRender(a(n,0,i))}.bind(this))}else{t._readyToRender(a(n,0,i))}this._bUnderPaging=true}else{this._mMeasureRange={};o={bEnabled:false};this._bUnderPaging=false;r.setRange(0,this._iTotalSize);t._readyToRender(a(n,0,this._iTotalSize))}r.setPagingOption(o)}};r.prototype.paging=function(e){var t=Math.floor(this._iTotalSize*e/i);var r=this._oChart._getVizFrame();t=Math.min(t,this._iMaxPageNo);this._iOffset=null;var n=Math.max((t-1)*i,0);var s,o;if(t===0){s=i;o=i}else if(t===this._iMaxPageNo){s=i*2+this._iRemainingRecords;o=i+this._iRemainingRecords}else{s=i*2;o=i}this._iOffset=(this._iTotalSize*e-t*i)/o;if(this._iRenderedPageNo===t){var h={plot:{transform:{translate:{translateByPage:{context:this._middleCtx,offset:this._iOffset}}}}};r._states(h)}else{if(this._pagingTimer){clearTimeout(this._pagingTimer)}var g=r.getDataset();var l=g.getBinding("data");this._pagingTimer=setTimeout(function(){g.setRange(n,s);g.setPagingOption({bEnabled:true,sMode:"update",thumbRatio:null});var e=a(l,n,s);if(e){this._iRenderedPageNo=t;g.invalidate();r._readyToRender(true);r.invalidate();this._oColorTracker.add(r._runtimeScales());r._runtimeScales(this._oColorTracker.get(),true)}else{r._readyToRender(false)}}.bind(this),50);this._sLoadingTimer=this._sLoadingTimer||setTimeout(function(){this._oChart._showLoading(true)}.bind(this),200)}};r.prototype.vizFrameRenderCompleted=function(){if(this._sLoadingTimer){clearTimeout(this._sLoadingTimer);this._sLoadingTimer=null}this._oChart._showLoading(false);if(!this._bUnderPaging){return}var e=this._oChart._getVizFrame();var t=e.getDataset();var a=t.getBinding("data");var r=this._iRenderedPageNo;if(r!==0){var n=r*i-1;this._middleCtx=a.getContexts(n,1)[0].getObject()}else{this._middleCtx=null}if(this._middleCtx||this._iOffset){var s={plot:{transform:{translate:{translateByPage:{context:this._middleCtx,offset:this._iOffset}}}}};e._states(s)}};r.prototype._scrollHandler=function(e){if(this._oChart._isEnablePaging()){this._scrollRatio=e.getParameters().position;this.paging(this._scrollRatio)}};r.prototype._queryMinMax=function(e,i){var a=e._getRequiredDimensions().map(function(e){return e.getName()}),r=e._getRequiredMeasures().map(function(e){return e.getName()});var n=r.reduce(function(e,t){e[t]={min:{},max:{}};return e},{});return new Promise(function(e,t){function s(){var t=r.every(function(e){return n[e].min.requested&&n[e].max.requested});if(t){e(n)}}function o(e,t,i){n[e][t].requested=true;n[e][t].value=parseFloat(i&&i.results[0][e]);s()}function h(e,t,i){n[e][t].requested=true;n[e][t].error=i;s()}var g=r.reduce(function(e,t){return e.concat({urlParameters:{$select:a.concat(t).join(","),$top:1,$orderby:t+" asc"},success:o.bind(null,t,"min"),error:h.bind(null,t,"min")},{urlParameters:{$select:a.concat(t).join(","),$top:1,$orderby:t+" desc"},success:o.bind(null,t,"max"),error:h.bind(null,t,"max")})},[]);var l=i.getPath(),_=i.getModel();g.forEach(function(e){_.read(l,e)})}).then(function(e){var i={};t.each(e,function(e,t){i[e]={min:t.min.value,max:t.max.value}});return i})};r.prototype.getMeasureRange=function(){return this._mMeasureRange};return r});
/*
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/ChartTypeAdapterUtils",["sap/chart/utils/ChartUtils","sap/chart/data/TimeDimension"],function(t,e){"use strict";var r={};function a(r,a){var n=a.some(function(t){return t instanceof e});if(n){return t.CONFIG.oAdapteredChartTypes[r]}else{return r}}r.adaptChartType=function(e,r){if(t.CONFIG.oAdapteredChartTypes[e]){return a(e,r)}else{return e}};return r});
/*
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/ChartUtils",["sap/chart/ChartType","sap/base/util/deepEqual"],function(e,t){"use strict";var a={chartTypes:[e.Bar,e.Column,e.Line,e.Combination,e.Pie,e.Donut,e.Scatter,e.Bubble,e.Heatmap,e.Bullet,e.VerticalBullet,e.StackedBar,e.StackedColumn,e.StackedCombination,e.HorizontalStackedCombination,e.DualBar,e.DualColumn,e.DualLine,e.DualStackedBar,e.DualStackedColumn,e.DualCombination,e.DualHorizontalCombination,e.DualStackedCombination,e.DualHorizontalStackedCombination,e.PercentageStackedBar,e.PercentageStackedColumn,e.PercentageDualStackedBar,e.PercentageDualStackedColumn,e.Waterfall,e.HorizontalWaterfall],pagingChartTypes:[e.Bar,e.Column,e.Line,e.Combination,e.Bullet,e.VerticalBullet,e.StackedBar,e.StackedColumn,e.StackedCombination,e.HorizontalStackedCombination,e.DualBar,e.DualColumn,e.DualLine,e.DualStackedBar,e.DualStackedColumn,e.DualCombination,e.DualHorizontalCombination,e.DualStackedCombination,e.DualHorizontalStackedCombination,e.PercentageStackedBar,e.PercentageStackedColumn,e.PercentageDualStackedBar,e.PercentageDualStackedColumn],timeChartTypes:["timeseries_line","timeseries_column","timeseries_bubble","timeseries_scatter","timeseries_combination","dual_timeseries_combination","timeseries_bullet","timeseries_stacked_column","timeseries_100_stacked_column","timeseries_waterfall"],oAdapteredChartTypes:{line:"timeseries_line",column:"timeseries_column",scatter:"timeseries_scatter",bubble:"timeseries_bubble",combination:"timeseries_combination",dual_combination:"dual_timeseries_combination",vertical_bullet:"timeseries_bullet",stacked_column:"timeseries_stacked_column","100_stacked_column":"timeseries_100_stacked_column",waterfall:"timeseries_waterfall"},nonSemanticPatternChartType:[e.Pie,e.Donut,e.PercentageDonut,e.Scatter,e.Bubble,e.Heatmap,e.Waterfall,e.HorizontalWaterfall,"timeseries_bubble","timeseries_scatter","timeseries_waterfall"],lineChartType:[e.Line,e.DualLine,"timeseries_line"]};return{CONFIG:a,makeNotifyParentProperty:function(e){return function(a,i){var n=this.mProperties[e];a=this.validateProperty(e,a);if(t(n,a)){return this}this.setProperty(e,a,i);if(i){return this}var r=this.getParent();if(r&&typeof r._invalidateBy==="function"){r._invalidateBy({source:this,property:e,oldValue:n,newValue:a})}return this}},isStackedLikeChart:function(e){return e.indexOf("stacked")>=0||e.indexOf("waterfall")>=0},isBulletChart:function(e){return e.indexOf("bullet")>=0}}});
/*
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/DataSourceUtils",["sap/chart/data/Dimension","sap/chart/data/TimeDimension","sap/chart/data/HierarchyDimension","sap/chart/data/Measure","sap/chart/TimeUnitType","sap/ui/thirdparty/jquery"],function(e,t,a,n,r,i){"use strict";function o(e,t){var a=t.path;var n=(t.parameters||{}).entitySet;if(!n){n=a.split("/")[1];if(n.indexOf("(")!=-1){n=n.split("(")[0]+(e?"Results":"Set")}}return n}function s(e,t,a){return"{/#"+e+"/"+t+"/@sap:"+a+"}"}var u={"com.sap.vocabularies.Common.v1.IsCalendarDate":"yearmonthday","com.sap.vocabularies.Common.v1.IsCalendarYearQuarter":"yearquarter","com.sap.vocabularies.Common.v1.IsCalendarYearMonth":"yearmonth","com.sap.vocabularies.Common.v1.IsCalendarYearWeek":"yearweek","com.sap.vocabularies.Common.v1.IsFiscalYear":"fiscalyear","com.sap.vocabularies.Common.v1.IsFiscalYearPeriod":"fiscalyearperiod"};function l(n,i){var o=e;if(n.type==="Edm.DateTime"&&n["sap:display-format"]==="Date"){o=t;i.timeUnit=r.Date}else if(n["sap:hierarchy-node-for"]){o=a}else if(n.type==="Edm.String"){var s=Object.keys(u);for(var l=0;l<s.length;l++){var m=s[l];if(n[m]&&n[m].Bool){var c=u[m];if(r[c]){o=t;i.timeUnit=c}break}}}return o}var m={getEntitySet:o.bind(null,true),deriveColumns:function(e,t){var a=e.getAnalyticalExtensions().findQueryResultByName(m.getEntitySet(t));if(!a){throw new Error('value of the "isAnalytical" property does not match the Data Service in use')}var n=a.getEntityType().getQName();n=n.slice(n.lastIndexOf(".")+1);var r=a.getEntityType().getSchema().namespace;var o=m.makeDimension.bind(this,n,r,a);var s=m.makeMeasure.bind(this,n);var u=a.getEntityType().getAllHierarchyPropertyNames().map(function(e){return a.findDimensionByPropertyName(e).getHierarchy().getNodeIDProperty().name});var l=a.getAllDimensionNames().concat(u);return{dimensions:i.map(l,o),measures:i.map(a.getAllMeasures(),s)}},makeDimension:function(e,t,a,n){var r={name:n,label:s(e,n,"label"),textProperty:s(e,n,"text")};var i=m.ANNOTATION_ACCESS_TEMPLATE.replace(/%SCHEMANS/,t).replace(/%RESULTTYPE/,e).replace(/%DIMENSION/,n);var o=a.getModel().getODataModel().getMetaModel().getProperty(i);var u=l(o,r);return new u(r)},makeMeasure:function(e,t){return new n({name:t.getName(),label:s(e,t.getName(),"label")})},updateModel:function(e){function t(e,t,a,n){var r=[];var i={name:e.getName(),grouped:false,inResult:!!a,visible:!n};if(t!=null){i.level=t}r.push(i);var o=e.getTextProperty();if(e.getDisplayText()&&o){i={name:o,grouped:false,inResult:!!a,visible:!n};r.push(i)}return r}function n(t,a){var n=t.getUnitBinding(),r=e._isEnablePaging(),i=t.getAnalyticalInfo(),o=[];if(i){o.push({name:i.propertyPath,with:i.with,as:t.getName(),total:false})}else{o.push({name:t.getName(),total:false,inResult:false,visible:true})}var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");if(r&&s&&e.getModel()instanceof s){o[0].min=true;o[0].max=true}if(n&&a.indexOf(n)===-1){o.push({name:n,inResult:false,visible:true})}return o}var r=e.getBinding("data");if(!r){return}var i=e._getVisibleDimensions(true);var o=e._getVisibleMeasures(true);var s=e._normalizeDorM(e.getInResultDimensions(),true);var u=e._getDrillStateTop().hierarchylevel;var l=i.map(function(e){return e.getName()}).concat(s.map(function(e){return e.getName()})).concat(o.map(function(e){return e.getName()}));var m=i.reduce(function(e,a){return e.concat(t(a,u[a.getName()]))},[]).concat(s.reduce(function(e,n){var r=n instanceof a?n.getLevel():null;return e.concat(t(n,r,true,true))},[])).concat(o.reduce(function(e,t){return e.concat(n(t,l))},[]));var c=e._getCandidateColoringSetting();var d=c.additionalMeasures||[];var p=c.additionalDimensions||[];if(d.length){m=m.concat(e._normalizeDorM(d).reduce(function(e,t){return e.concat(n(t))},[]))}if(p.length){m=m.concat(e._normalizeDorM(p,true).reduce(function(e,a){return e.concat(t(a,u[a.getName()]))},[]))}var g=r.updateAnalyticalInfo(m);return g&&g.measureRangePromise},ANNOTATION_ACCESS_TEMPLATE:"/dataServices/schema/[${"+"namespace"+"}==='%SCHEMANS']/entityType/[${"+"name"+"}==='%RESULTTYPE']/property/[${"+"name"+"}==='%DIMENSION']/"};var c={getEntitySet:o.bind(null,false),deriveColumns:function(e,t){var a=e.getMetaModel(),r={dimensions:[],measures:[]};if(a){var o=a.getODataEntitySet(c.getEntitySet(t)).entityType;var s=a.getODataEntityType(o);i.each(s.property,function(e,t){var a=c.CLAZZ[t.type];if(!a){throw new Error("Unsupported type: "+t.type)}var i={name:t.name};if(t.hasOwnProperty("com.sap.vocabularies.Common.v1.Label")){i.label=t["com.sap.vocabularies.Common.v1.Label"].String}if(a===n){r.measures.push(new a(i))}else{if(t.hasOwnProperty("com.sap.vocabularies.Common.v1.Text")){i.textProperty=t["com.sap.vocabularies.Common.v1.Text"].Path}a=l(t,i);r.dimensions.push(new a(i))}})}return r},CLAZZ:{Null:e,"Edm.Binary":e,"Edm.Boolean":e,"Edm.Byte":n,"Edm.DateTime":e,"Edm.Decimal":n,"Edm.Double":n,"Edm.Single":n,"Edm.Guid":e,"Edm.Int16":n,"Edm.Int32":n,"Edm.Int64":n,"Edm.SByte":n,"Edm.String":e,"Edm.Time":e,"Edm.DateTimeOffset":e},updateModel:function(e,t,a){var n=sap.ui.require("sap/ui/model/odata/ODataModel");if(n&&e.getModel()instanceof n){var r=t.reduce(function(e,t){if(t.getTextProperty()){return e.concat(t.getName(),t.getTextProperty())}else{return e.concat(t.getName())}},[]);var i=a.reduce(function(e,t){if(t.getUnitBinding()){return e.concat(t.getName(),t.getUnitBinding())}else{return e.concat(t.getName())}},[]);e._oBindingInfo.parameters=e._oBindingInfo.parameters||{};e._oBindingInfo.parameters.entitySet=c.getEntitySet(e._oBindingInfo);e._oBindingInfo.parameters.select=r.concat(i).join(",");e.bindData(e._oBindingInfo);if(e._isEnablePaging()&&e._getPagingController().getPagingSorters()){e.getBinding("data").sort(e._getPagingController().getPagingSorters())}}else{return}}};function d(e){return function(t){var a=t?m:c;return a[e]}}return{deriveColumns:d("deriveColumns"),updateModel:d("updateModel"),getEntitySet:d("getEntitySet")}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/DateFormatUtil",["sap/chart/TimeUnitType","sap/ui/core/format/DateFormat"],function(e,t){"use strict";var a={};a[e.yearmonthday]="yyyyMMdd";a[e.yearquarter]="yyyyQQQQQ";a[e.yearmonth]="yyyyMM";a[e.yearweek]="yyyyww";function r(e){var r=a[e];if(r){return t.getDateInstance({pattern:r})}else{return null}}return{getInstance:r}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/MeasureSemanticsUtils",["sap/chart/coloring/ColoringUtils","sap/chart/coloring/ColorPalette","sap/chart/data/MeasureSemantics","sap/chart/coloring/CriticalityType","sap/chart/ChartLog","sap/chart/ColoringType","sap/chart/coloring/criticality/Criticality","sap/chart/utils/ChartUtils","sap/ui/thirdparty/jquery"],function(e,t,a,r,i,n,l,u,s){"use strict";var c=["sapUiChartPaletteQualitativeHue1","sapUiChartPaletteQualitativeHue2","sapUiChartPaletteQualitativeHue3","sapUiChartPaletteQualitativeHue4","sapUiChartPaletteQualitativeHue5","sapUiChartPaletteQualitativeHue6","sapUiChartPaletteQualitativeHue7","sapUiChartPaletteQualitativeHue8","sapUiChartPaletteQualitativeHue9","sapUiChartPaletteQualitativeHue10","sapUiChartPaletteQualitativeHue11","sapUiChartPaletteQualitativeHue12","sapUiChartPaletteQualitativeHue13","sapUiChartPaletteQualitativeHue14","sapUiChartPaletteQualitativeHue15","sapUiChartPaletteQualitativeHue16","sapUiChartPaletteQualitativeHue17","sapUiChartPaletteQualitativeHue18","sapUiChartPaletteQualitativeHue19","sapUiChartPaletteQualitativeHue20","sapUiChartPaletteQualitativeHue21","sapUiChartPaletteQualitativeHue22"],o=[["sapUiChartPaletteSequentialHue1","sapUiChartPaletteSequentialHue1Light2","sapUiChartPaletteSequentialHue1Dark1"],["sapUiChartPaletteSequentialHue2","sapUiChartPaletteSequentialHue2Light2","sapUiChartPaletteSequentialHue2Dark1"]],f="sapUiChartPaletteSequentialNeutralDark2",p="sapUiChartPaletteSemanticNeutral",d={actual:"solid",projected:"dash",reference:"dot"},h={projected:"diagonalLightStripe",reference:"noFill"};var v=[r.Positive,r.Neutral,r.Critical,r.Negative];function m(e){var t={};if(e.getSemanticallyRelatedMeasures){var a=e.getSemanticallyRelatedMeasures();if(a){if(a.projectedValueMeasure){t.projected=a.projectedValueMeasure}if(a.referenceValueMeasure){t.reference=a.referenceValueMeasure}return t}}return t}function g(e,t){var a=e.reduce(function(e,t){e[t.getName()]={msr:t,sem:t.getSemantics&&t.getSemantics()||"actual",rel:m(t)};return e},{});s.each(a,function(e,t){if(t.sem==="actual"){s.each(t.rel,function(e,r){if(a[r]&&a[r].sem!==e){delete t.rel[e];var n=new i("error","Semantic Pattern",r+" shouldn't be used as "+e+" in semantic relation. ");n.display()}})}});if(t){for(var r=0;r<t.length;r++){var n=t[r];var l=m(n);if(l.projected&&l.reference&&a[l.projected]&&a[l.reference]){a[l.projected]={msr:n,sem:"projected",rel:{reference:l.reference}}}}}return a}function C(e,t,r){var n=[],l=0,u;var c;if(!r){c=e.slice().sort(function(a,r){var i=t[a.getName()].sem,n=t[r.getName()].sem;if(i<n){return-1}else if(i>n){return 1}else{return e.indexOf(a)-e.indexOf(r)}})}else{c=s.extend(true,{},e)}s.each(c,function(e,c){var o=c.getName();if(!t[o]){return}var f=t[o];var p={};var d;p[r?"actual":f.sem]=o;if(c.getLabel){d=c.getLabel();if(d){p.labels={};p.labels[f.sem]=d}}p.index=l++;if(!r&&(f.sem==="actual"||f.sem==="projected")){if(f.rel.projected){if(t[f.rel.projected]){p.projected=f.rel.projected;if(t[f.rel.projected].msr.getLabel){d=t[f.rel.projected].msr.getLabel();if(d){p.labels=s.extend(true,p.labels,{projected:d})}}delete t[f.rel.projected]}else{u=new i("error","Semantic Pattern",f.msr.getName()+" has an invalid projected semantic relation.");u.display()}}if(f.rel.reference){if(t[f.rel.reference]){p.reference=f.rel.reference;if(t[f.rel.reference].msr.getLabel){d=t[f.rel.reference].msr.getLabel();if(d){p.labels=s.extend(true,p.labels,{reference:d})}}delete t[f.rel.reference]}else{u=new i("error","Semantic Pattern",f.msr.getName()+" has an invalid reference semantic relation.");u.display()}}delete t[o]}p.order=[a.Actual,a.Projected,a.Reference];n.push(p)});return n}var P=function(e,t){if(!e.dataPointStyle){e=s.extend(true,e,{dataPointStyle:{rules:[],others:null}})}e.dataPointStyle.rules.push(t)};var y=function(e,t,a){var r,i;if(e.indexOf("dual")===-1){i=c;r=c.length}else{var n=a==="valueAxis"?0:1;i=o[n];r=i.length}return{actual:i[t%r],projected:i[t%r],reference:i[t%r]}};var S=function(e,t,r){if(e.projectedValueStartTime&&e.timeAxis&&t!==a.Reference){r=r||function(){return true};var i=function(t){return t.hasOwnProperty(e.semanticMsrName)};if(t===a.Actual){return function(t){return r(t)&&i(t)&&new Date(t[e.timeAxis]).getTime()<e.projectedValueStartTime}}else if(t===a.Projected){return function(t){return r(t)&&i(t)&&new Date(t[e.timeAxis]).getTime()>=e.projectedValueStartTime}}}else{r=r||function(a){return a.hasOwnProperty(e[t])};return r}};var U=function(r,i,n,l){var u,s;if(i){if(r.iUnMentionedIndex==undefined){s=p}else{u=e.assignUnmentionedColor(t.CRITICALITY.Neutral,l.unMentionedTuplesNumber);s=u[r.iUnMentionedIndex]}}else{if(n===a.Reference&&l.hasSingleReference){s=f}else{u=y(l.chartType,r.index,r.valueAxisID);s=u[n]}}return s};var x=function(e,t,a){var r=false;if(e.chartType.indexOf("combination")>-1){if(e.chartType.indexOf("timeseries")>-1){if(t.index!==0||t.valueAxisID!=="valueAxis"){r=true}else{if(t.hasOwnProperty("actual")){if(!t.projectedValueStartTime&&a!=="actual"||a==="reference"){r=true}}}}else{if(a!=="actual"){r=true}}}return r};var b=function(r,i,n,l,s){var c,o,f={},p;var m=r[n];var g;(i||[]).forEach(function(e){if(e.parsed.msr&&e.parsed.msr.getName()===m){o=e.parsed;g=e.type}});var C=r.labels&&r.labels[n]?r.labels[n]:m;if(r.semanticMsrName&&(n===a.Actual||n===a.Projected)){f[r.semanticMsrName]=C}if(o){var y=v,b,j=0;if(i.Levels){y=i.Levels;b=t.GRADATION.SingleColorScheme[i.SingleColorScheme];j=y.length}y.forEach(function(a,v){var m=o.callbacks[a];if(m){var C=S(r,n,m[0]);var y=e.assignColor(b||t.CRITICALITY[a],j||m.length);if(i.Saturation==="DarkToLight"){y=y.reverse()}c=y[j===0?0:v];p={color:c,pattern:h[n]};if(u.CONFIG.lineChartType.indexOf(s.chartType)>-1){p.lineType=d[n];if(g==="Static"||g==="DelineatedMeasures"){p.lineColor=c}}if(x(s,r,n)){if(n==="projected"){p.pattern=""}p.lineType=d[n];if(g==="Static"){p.lineColor=c}}P(l,{callback:C,properties:p,displayName:o.legend[a],dataName:f})}})}else{if(!i||i.bShowUnmentionedMsr){var T=S(r,n);c=U(r,i,n,s);p={color:c,pattern:h[n]};if(u.CONFIG.lineChartType.indexOf(s.chartType)>-1){p.lineType=d[n];p.lineColor=c}if(x(s,r,n)){if(n==="projected"){p.pattern=""}p.lineType=d[n];p.lineColor=c}P(l,{callback:T,properties:p,displayName:C,dataName:f})}}};var j=function(e){return e.reference&&!(e.actual||e.projected)};var T=function(e,t,r,i){var n=e.filter(function(e){return e.reference}).length===1;var l=e.filter(function(e){return e.hasOwnProperty("iUnMentionedIndex")}).length;e.forEach(function(e){e.order.forEach(function(u){var s=true;if(i.indexOf("bullet")>-1){s=u!==a.Reference||j(e)}if(e.hasOwnProperty(u)&&s){var c={chartType:i,hasSingleReference:n,unMentionedTuplesNumber:l};b(e,t,u,r,c)}})})};var H=function(e,t,a,r,u,c){a=a||{};var o=a.type===n.Criticality&&a.subType==="MeasureValues"&&!(a.qualifiedSettings&&a.qualifiedSettings.bMBC);var f=a.type===n.Gradation&&a.subType==="DelineatedMeasures";var p={};if(!u){p.plotArea={dataPointStyle:null}}if(!c){p.legend={title:{text:null,visible:e.indexOf("waterfall")>-1?true:false}}}else{p.legend={}}var d,h=true;if(r&&N(t)||o||f){var v=o||f?a.qualifiedSettings:null;T(t,v,p.plotArea,e);s.extend(true,p.legend,l.getLegendProps(v))}else if(a.ruleGenerator){try{var m=a.ruleGenerator();s.extend(true,p,m.properties);d=m.colorScale}catch(e){if(e instanceof i){e.display()}else{throw e}}}if(d){h=false}return{properties:p,scales:d?[d]:[],replaceColorScales:h}};function N(e){if(e){return e.some(function(e){return e.hasOwnProperty(a.Projected)||e.hasOwnProperty(a.Reference)})}return false}function O(e,t){var a;var r;if(e){r=e.slice(0);r.sort(function(e,t){return e.index>t.index?1:-1})}if(t.indexOf("combination")>-1&&e){var i=true;for(var n=0;n<r.length;n++){if(r[n].hasOwnProperty("projected")||r[n].hasOwnProperty("reference")){i=false;break}}var l=[];var u=[];if(!i){r.forEach(function(e){e.order.forEach(function(t){if(e.hasOwnProperty(t)){if(e.valueAxisID==="valueAxis"){l.push(t==="actual"?"bar":"line")}else{u.push(t==="actual"?"bar":"line")}}})})}else{return}a={plotArea:{dataShape:{primaryAxis:l,secondaryAxis:u}}}}return a}return{getTuples:function(e,t,a){return C(e,g(e,t),a)},getSemanticVizSettings:H,hasSemanticRelation:N,getSemanticSettingsForCombination:O}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/RoleFitter",["sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/viz/ui5/controls/common/feeds/FeedItem","sap/viz/ui5/controls/common/feeds/AnalysisObject","sap/chart/TimeUnitType","sap/chart/data/TimeDimension","sap/chart/utils/DateFormatUtil","sap/chart/utils/ChartUtils","sap/chart/utils/RoleMapper","sap/chart/ChartLog","sap/ui/model/type/String","sap/ui/thirdparty/jquery"],function(e,t,i,n,a,r,s,o,u,c,l,f){"use strict";var d=function(){return sap.viz.vizservices.BVRService.suggestFeeds.apply(null,arguments)};var m=function(e,t){var i=sap.viz.vizservices.FeedService.validate(e,t);if(!i.valid){var n=i.results?i.results.bindings:null;if(n&&Object.keys(n).every(function(e){return n[e].allowMND&&(!n[e].missing||n[e].missing===1)&&!n[e].incorrect})){return{valid:true}}}return i};var p=[{types:"*",toViz:{"category|category2":"categoryAxis",series:"color","axis1|axis2|axis3|axis4":"valueAxis"}},{types:"column|bar|stacked_bar|stacked_column|line|combination|100_stacked_bar|100_stacked_column|stacked_combination|horizontal_stacked_combination",toViz:{}},{types:"scatter|bubble|time_bubble|timeseries_scatter|timeseries_bubble",toViz:{"category|category2":"@context",axis1:"valueAxis",axis2:"valueAxis2"}},{types:"bubble|time_bubble",toViz:{axis3:"bubbleWidth"}},{types:"pie|donut|100_donut",toViz:{"category|series|category2":"color","axis1|axis2|axis3|axis4":"size"}},{types:"bullet|vertical_bullet",toViz:{"axis1|axis2|axis3|axis4":"@semanticBulletMsrs"}},{types:"dual_combination|dual_horizontal_combination|dual_stacked_bar|100_dual_stacked_bar|dual_stacked_column|100_dual_stacked_column|dual_bar|dual_column|dual_line|dual_stacked_combination|dual_horizontal_stacked_combination",toViz:{axis1:"valueAxis","axis2|axis3|axis4":"valueAxis2"}},{types:"timeseries_line|timeseries_column|timeseries_combination|timeseries_stacked_column|timeseries_100_stacked_column",toViz:{category:"timeAxis"}},{types:"timeseries_scatter",toViz:{category:u,"axis2|axis3":false}},{types:"timeseries_bubble",toViz:{category:u,axis2:false,axis3:"bubbleWidth"}},{types:"dual_timeseries_combination",toViz:{category:"timeAxis",axis1:"valueAxis","axis2|axis3|axis4":"valueAxis2"}},{types:"heatmap",toViz:{category:"categoryAxis","category2|series":"categoryAxis2","axis1|axis2|axis3|axis4":"color"}},{types:"waterfall|horizontal_waterfall",toViz:{series:"waterfallType"}},{types:"timeseries_bullet",toViz:{"category|series":"timeAxis","axis1|axis2|axis3|axis4":"@semanticBulletMsrs"}},{types:"timeseries_waterfall",toViz:{"category|series":"timeAxis"}}].reduce(function(e,t){var i=Object.keys(t.toViz).reduce(function(e,i){i.split("|").forEach(function(n){e[n]=t.toViz[i];return e});return e},{});t.types.split("|").forEach(function(t){if(!e.hasOwnProperty(t)){e[t]=[]}e[t].push(i)});return e},{});var v=Object.keys(p).reduce(function(e,t){if(t!=="*"){e[t]=f.extend.apply(null,[true,{}].concat(p["*"].concat(p[t])))}return e},{});function _(e,t,i){var n=typeof t==="function"?t:function(e){return e[t]};return e.reduce(function(e,t){var a=n(t),r=typeof i==="function"?i(t):t;if(a&&!e[a]){e[a]=[r]}else if(a){e[a].push(r)}return e},{})}function g(e,t){var i={},n;t.forEach(function(t){var a=t._sFixedRole||t.getRole();if(e.hasOwnProperty(a)){var r=e[a];if(r){if(typeof r==="function"){if(!n){n=new r}r=n.toFeedingId(t)}if(!i[r]){i[r]=[]}i[r].push(t)}}});return i}var y={from:i.fromLightWeightFmt,build:function(e){var t=[];f.each(e.dims,function(e,i){t.push({id:e,type:"Dimension",values:i.map(b("Dimension"))})});f.each(e.msrs,function(e,i){t.push({id:e,type:"Measure",values:i.map(b("Measure"))})});return t}};function b(e){return function(t){var i=t.getName();if(i==="MND"){return{id:"MND",type:"MND"}}var n={id:i,name:i,type:e};if(t instanceof r){n.dataType="Date"}return n}}function x(t,i){var n=t.getName(),a=t.getLabel(),o=t.getTextProperty(),u=t.getTextFormatter(),c=t.getDisplayText();var f={identity:n,name:a||n,value:"{"+n+"}"};if(typeof u==="function"){f.displayValue={formatter:u,parts:[{path:n,type:new l}]};if(o){f.displayValue.parts.push({path:o,type:new l})}}else if(c&&o){f.displayValue="{"+o+"}"}var d=new e(f);if(i&&t instanceof r){var m=s.getInstance(t.getTimeUnit());if(m){var p=m.parse.bind(m);d.getBindingInfo("value").formatter=function(e){return p(e)}}d.setDataType("Date");d._setTimeUnit(t.getTimeUnit())}return d}function h(e){var i=e.getName();var n=new t({identity:i,name:e.getLabel()||i,value:"{"+i+"}"});n._setUnitBinding(e.getUnitBinding());return n}function z(e,t){var i=sap.viz.api.metadata.Viz.get("info/"+e),n=_(i.bindings,"role"),a=_(t,"id"),r=n["layout.category"]||[],s=n["mark.color"]||[];if(r.length===0){return[]}else{var o=[];f.each(r.concat(s),function(e,t){var i=a[t.id];if(i&&i.length>0){f.each(i[0].values,function(e,t){o.push(t.id)})}});return o}}function k(e){return o.CONFIG.timeChartTypes.indexOf(e)>-1}function T(e){return e&&e.indexOf("bullet")>-1}function D(e){f.each(e,function(e,t){if(t&&(t.getSemantics&&t.getSemantics()!=="actual"||t.getSemanticallyRelatedMeasures&&!f.isEmptyObject(t.getSemanticallyRelatedMeasures()))){new c("error","Semantic Pattern"," Semantic pattern rule defined in invisible measures doesn't work.").display()}})}function V(e,t,i,n,a){var r=v[e];var s={dims:g(r,t),msrs:g(r,i)};if(T(e)){s.invisibleMsrs=a}else{D(a)}var l=null,f=null;if(s.dims["@context"]){l=s.dims["@context"];delete s.dims["@context"]}var d=false;if(!n){if(u.semantics.hasSemanticMeasures(s)){var m;if(o.CONFIG.nonSemanticPatternChartType.indexOf(e)===-1){m=new c("error","Semantic Pattern","Semantic pattern doesn't work when there is dataPointStyle or seriesStyle defined.");d=true}else{m=new c("error","Semantic Pattern",e+" doesn't support semantic pattern feature.");d=true}m.display()}}f=u.semantics.semanticPatternMsrs(s,e,d);l=(l||[]).concat(f.contexts);var p=y.build(s);p.contexts=l;p.semanticTuples=f.semanticTuples;return p}var w=[{chartTypes:"bar,column,line,combination,heatmap,bullet,vertical_bullet,stacked_bar,stacked_column,stacked_combination,horizontal_stacked_combination,dual_bar,dual_column,dual_line,dual_stacked_bar,dual_stacked_column,dual_combination,dual_horizontal_combination,dual_stacked_combination,dual_horizontal_stacked_combination,100_stacked_bar,100_stacked_column,100_dual_stacked_bar,100_dual_stacked_column,waterfall,horizontal_waterfall".split(","),feed:"categoryAxis"},{chartTypes:"donut,100_donut,pie,scatter,bubble".split(","),feed:"color"}];function N(e,t,i){var n,a;for(n=0;n<w.length;n++){if(w[n].chartTypes.indexOf(e)!==-1){a=w[n].feed;break}}var r=t.some(function(e){return e.id===a});if(!r){var s=d("info/"+e,t,[{id:"MND",type:"MND"}]).feedItems;t.splice(0,t.length);s.forEach(function(e){if(e.values.length>0){t.push(e)}});t=E(e,t)}for(n=0;n<t.length;n++){if(t[n].id===a&&t[n].type==="Dimension"){t[n].values=t[n].values.concat(i.map(function(e){return{id:e.getName(),name:e.getName(),type:"Dimension",inResult:true}}))}}return m("info/"+e,t)}function M(e){e.forEach(function(e){e._sFixedRole=e.getRole()})}function O(e,t,i){t.forEach(function(t){t.values.forEach(function(n){var a=i.filter(function(e){return e.getName()===n.id})[0];if(a){f.each(v[e],function(e,i){if(i===t.id){a._sFixedRole=e;return false}})}})})}function A(e,t){var i=true;if(e.indexOf("timeseries_bullet")>-1){i=t.length>1&&t.every(function(e){return e.actual&&e.reference||e.projected&&e.reference})}else if(e.indexOf("timeseries_combination")>-1){i=t.length>0&&t.some(function(e){return e.projected||e.reference})}return i}function S(e,t,i,n,a,r,s){var o=t.concat(i).concat(n);M(o);var u=V(e,t,i,a,r);e=e.indexOf("donut")>-1?"donut":e;var c=m("info/"+e,u);var l=u.contexts,f=u.semanticTuples,d=[];if(!c.valid){if(e.indexOf("dual_timeseries_combination")>-1){u.contexts=[]}u=F(e,c,u,t,i);c=m("info/"+e,u);O(e,u,o);if(a){if(A(e,f)){u=V(e,t,i,a,r);l=u.contexts;f=u.semanticTuples}}}else{O(e,u,o)}if(f){d=f.filter(function(e){return e.projectedValueStartTime})}if(c.valid&&n&&n.length>0){var p=_(t,function(e){return e.getName()});N(e,u,n.filter(function(e){return!p[e.getName()]}))}var v=u.reduce(function(e,t){t.values.forEach(function(t){e[t.id]=true});return e},{});var g=y.from(u);if(l){l.forEach(function(e){v[e.getName()]=true});g._context=l.map(function(e){var t=e.getName();var i=true;for(var n=0;n<d.length;n++){if(t===d[n].actual||t===d[n].projected){i=false;break}}return{id:t,showInTooltip:i}})}g._unused=R(u,t,i).filter(function(e){return!v[e]});g._def=I(t,c.valid?n:[],i,v,f,k(e));if(s){g._def.dim.forEach(function(e){e.setBindingContext(null)});g._def.msr.forEach(function(e){e.setBindingContext(null)})}g._order=z(e,u);g._valid=c.valid;g._semanticTuples=f;return g}function j(e){return _(sap.viz.api.metadata.Viz.get("info/"+e).bindings,"id")}function E(e,t,i){i=i||j(e);t.forEach(function(e){e.type=i[e.id][0].type});return t}function F(e,t,i,n,a){var r=j(e),s=false,o=false;var u=t.results.bindings;Object.keys(u).forEach(function(e){if(!r[e]){return}if(r[e][0].type==="Measure"){o=true}if(r[e][0].type==="Dimension"&&!(u[e].allowMND&&(!u[e].missing||u[e].missing===1))){s=true}});var c=i.filter(function(e){return!(e.type==="Dimension"?s:o)}),l=c.reduce(function(e,t){(t.values||[]).forEach(function(t){e[t.id]=true});return e},{});if(i.contexts){i.contexts.forEach(function(e){l[e.getName()]=true})}var f=n.map(b("Dimension")),m=a.map(b("Measure"));var p=d("info/"+e,c,f.concat(m).filter(function(e){return!l[e.id]})).feedItems;E(e,p,r);return p}function R(e,t,i){var n=e.reduce(function(e,t){t.values.forEach(function(t){e[t.id]=true});return e},{});return t.concat(i).filter(function(e){return!n[e.getName()]}).map(function(e){return e.getName()})}function I(e,i,n,a,o,u){var c;if(u){var l;for(var f=0;f<e.length;f++){if(e[f]instanceof r){l=e[f];break}}c=s.getInstance(l.getTimeUnit())}return{dim:e.reduce(function(e,t){if(a[t.getName()]){e.push(x(t,u))}return e},[]).concat(i.map(function(e){var t=x(e);t._setInResult(true);return t})),msr:n.reduce(function(e,t){if(a[t.getName()]){e.push(h(t))}return e},[]).concat((o||[]).reduce(function(e,i){if(i.timeAxis&&i.projectedValueStartTime){e.push(new t({identity:i.actual+"-"+i.projected,name:(i.labels&&i.labels.actual||i.actual)+"-"+(i.labels&&i.labels.projected||i.projected),value:{parts:[i.timeAxis,i.actual,i.projected],formatter:function(e){var t=e,n;if(e&&e.length>1){var a=e[0];if(a){if(c){var r=c.parse(a);if(r){n=r.getTime()}}else{n=new Date(a).getTime()}if(n&&n<i.projectedValueStartTime){t=e[1]}else{t=e[2]}}}return t}}}))}return e},[]))}}return{fit:S,compatible:function(e,t,i){var n="info/"+e,a={used:{},error:null,compatible:true};var r=V(e,t,i),s=m(n,r);if(!s.valid){r=F(e,s,r,t,i);s=m(n,r);a.needFix=true}if(s.valid){a.used=_(r,function(e){return e.type},function(e){return e.values.filter(function(e){return e.type==="Dimension"||e.type==="Measure"}).map(function(e){return e.id})});f.each(a.used,function(e,t){a.used[e]=t.reduce(function(e,t){return e.concat(t)},[])})}else{a.compatible=false;var o=sap.viz.api.metadata.Viz.get(n).bindings,u=_(o,"type",function(e){return e.id}),c={dim:0,msr:0,time:0};f.each(s.results.bindings,function(e,t){if(!t.missing){return}if(u.Dimension.indexOf(e)!==-1&&!(t.allowMND&&t.missing===1)){c[e==="timeAxis"?"time":"dim"]+=t.missing}else if(u.Measure.indexOf(e)!==-1){c.msr+=t.missing}});a.error={missing:c}}return a}}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/RoleMapper",["sap/chart/data/TimeDimension","sap/chart/utils/MeasureSemanticsUtils","sap/chart/utils/ChartUtils","sap/chart/utils/DateFormatUtil","sap/chart/data/MeasureSemantics","sap/chart/ChartLog","sap/ui/thirdparty/jquery"],function(e,t,a,r,i,s,n){"use strict";function u(e){this._bTimeFed=false}u.prototype.toFeedingId=function(t){if(t instanceof e&&!this._bTimeFed){this._bTimeFed=true;return"timeAxis"}else{return"@context"}};function c(e){return a.CONFIG.timeChartTypes.indexOf(e)>-1}function l(e,t,a){var r={actualValues:[],targetValues:[]};n.each(e,function(e,a){if(a.actual){r.actualValues.push(t[a.actual]);a.valueAxisID="actualValues"}if(a.projected){r.actualValues.push(t[a.projected]);a.valueAxisID="actualValues"}if(a.reference){if(a.actual||a.projected){r.targetValues.push(t[a.reference]);a.valueAxisID="targetValues"}else{r.actualValues.push(t[a.reference]);a.valueAxisID="actualValues"}}});delete a["@semanticBulletMsrs"];n.extend(a,r)}function o(e,t){var a=t["@semanticBulletMsrs"];if(a){var r={actualValues:[]};for(var i=0;i<a.length;i++){r.actualValues.push(a[i])}for(var i=0;i<e.length;i++){e[i].valueAxisID="actualValues"}delete t["@semanticBulletMsrs"];n.extend(t,r)}}u.semantics={hasSemanticMeasures:function(e){return Object.keys(e.msrs).some(function(t){var a=false;var r=e.msrs[t];a=r.some(function(e){if(e.getSemantics){var t=e.getSemantics();return t&&t!=="actual"}});return a})},semanticPatternMsrs:function(e,a,i){var u=[],f=[],m={},d,p;var h=c(a)&&(e.dims.timeAxis&&e.dims.timeAxis.length===1);var v;var g;if(h){var x=e.dims.timeAxis[0];v=x.getProjectedValueStartTime&&x.getProjectedValueStartTime();if(v){var j=x.getTimeUnit();if(j==="fiscalyearperiod"||j==="fiscalyear"){g=v}else{var O=r.getInstance(j);if(O){if(O.parse(v)){g=O.parse(v).getTime()}}else{g=new Date(v).getTime()}}}}var y=["valueAxis","valueAxis2"];var S=Object.keys(e.msrs).sort(function(e,t){return y.indexOf(e)-y.indexOf(t)});var w=this.hasSemanticMeasures(e);S.forEach(function(r){var c=e.msrs[r],l;p=null;n.extend(true,m,c.reduce(function(e,t){e[t.getName()]=t;return e},{}));if(a&&a.indexOf("bullet")>-1&&e.invisibleMsrs){l=e.invisibleMsrs.filter(function(e){return e.getSemantics()==="actual"&&e.getSemanticallyRelatedMeasures()})}if(n.isEmptyObject(e.dims)){p=new s("error","Semantic Pattern","Semantic Pattern doesn't work when there is no dimension.");i=i||true}else if(e.dims.color&&e.dims.color.length>0){p=new s("error","Semantic Pattern","Semantic pattern doesn't work when there is series dimension.");i=i||true}var o;o=t.getTuples(c,l,i);if(a&&(a.indexOf("stacked_column")>-1||a.indexOf("stacked_bar")>-1)){var f=false;if(h&&v){if(!g){p=new s("error","Semantic Pattern","The value of projectedValueStartTime is invalid.");p.display();f=true}for(var d=0;d<o.length;d++){if(o[d].hasOwnProperty("actual")){if(!o[d].hasOwnProperty("projected")){f=true;break}if(o[d].hasOwnProperty("reference")){f=true;break}}else{f=true;break}}}else{var x="";if(o[0].hasOwnProperty("actual")){x="actual"}else if(o[0].hasOwnProperty("projected")){x="projected"}else if(o[0].hasOwnProperty("reference")){x="reference"}if(x==="projected"||x==="reference"){for(var d=0;d<o.length;d++){if(!o[d].hasOwnProperty(x)){f=true;break}}}else{for(var d=0;d<o.length;d++){if(o[d].hasOwnProperty("projected")||o[d].hasOwnProperty("reference")){f=true;break}}}}if(a.indexOf("dual")>-1&&S.length<=1){f=false}if(f){p=new s("error","Semantic Pattern","Actual, forecast or target can't be stacked in one bar or column.");i=true;o=t.getTuples(c,l,i)}}o.forEach(function(e){e.valueAxisID=r});if(w&&i&&p){p.display()}u=u.concat(o)});if(a&&a.indexOf("bullet")>-1){h=h&&u.some(function(e){return e.actual&&e.projected});d=u.some(function(e){return e.actual&&e.projected||e.actual&&e.reference||e.projected&&e.reference});if(d&&!h){l(u,m,e.msrs)}else{o(u,e.msrs)}}if(!i&&h){p=null;var b=[];var P=function(e){var t=b.indexOf(e.getName())===-1;if(!t){f.push(e)}return t};for(var T=0;T<u.length;T++){var V=u[T];if(v){if(g){var A=e.msrs[V.valueAxisID];if(V.actual&&V.projected){V.timeAxis=e.dims.timeAxis[0].getName();V.projectedValueStartTime=g;V.semanticMsrName=V.actual+"-"+V.projected;b.push(V.actual);b.push(V.projected);A.push(m[V.actual].clone().setName(V.semanticMsrName));if(u.length===1&&a.indexOf("combination")>-1){p=new s("error","Semantic Pattern","Do not satisfy the minimum number of measure to work "+"with Projected Value Start Time in Time Series Combination.")}}e.msrs[V.valueAxisID]=A.filter(P)}else{p=new s("error","Semantic Pattern","The value of projectedValueStartTime is invalid.")}}}if(p){p.display()}}if(u.length>0&&!i){var M=[];var k=["actual","projected","semanticMsrName","reference"];u.forEach(function(e){for(var t=0;t<k.length;t++){if(e[k[t]]){M.push(e[k[t]])}}});n.each(e.msrs,function(t){e.msrs[t].sort(function(e,t){return M.indexOf(e.getName())-M.indexOf(t.getName())})})}return{semanticTuples:u,contexts:f}}};return u});
/*
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/SelectionAPIUtils",["sap/ui/thirdparty/jquery"],function(e){"use strict";function t(e){return e.reduce(function(e,t){e[t]=true;return e},{})}function n(e,n){var r=t(e);function i(e){return n.reduce(function(t,n){if(e.hasOwnProperty(n)){t[n]=e[n]}return t},{})}return function(e,t){return e.filter(function(e){return r[e]}).map(function(e){var n=i(t);n[e]="*";return{data:n}})}}function r(t){var n={data:{}},r=t.measures,i=t.dimensions;if(r){n.data.measureNames=r instanceof Array?{in:r}:r}e.each(i||{},function(e,t){n.data[e]=t instanceof Array?{in:t}:t});return n}function i(e){var t=e.data;return Object.keys(t).reduce(function(e,n){var r=t[n];if(r.in&&r.in instanceof Array){r=r.in}if(n==="measureNames"){e.measures=r}else if(!e.dimensions){e.dimensions={};e.dimensions[n]=r}else{e.dimensions[n]=r}return e},{})}function a(e,t,r,i){var a=n(e,t);return i.reduce(function(e,t){var n=r.getContexts(t.index,1);if(n.length>0){e=e.concat(a(t.measures,n[0].getObject()))}return e},[])}function u(e,t){return Object.keys(e).filter(function(e){return t.indexOf(e)!==-1})}function s(t,n,r){if(t){var i,a;for(a in t){if(t.hasOwnProperty(a)&&r.data[a]){var u=t[a];i=r.data[u.timeAxis]<u.projectedValueStartTime?u.projected:u.actual}}if(i){r.measures=r.measures.filter(function(e){return e!==i});if(r.dataName){r.dataName=Object.keys(r.dataName).reduce(function(e,t,i){if(n.indexOf(t)!==-1){e[t]=r.dataName[t]}return e},{});if(e.isEmptyObject(r.dataName)){delete r.dataName}}}else{var s=[];for(var f in t){if(t.hasOwnProperty(f)){a=t[f];s.push(a.actual);s.push(a.projected)}}r.measures=r.measures.filter(function(e){return s.indexOf(e)===-1})}}}return{makeLookUp:t,toVizCtx:n,toVizCSCtx:r,fromVizCSCtx:i,buildSelectionVizCtx:a,filterVisibleMsr:u,filterSemMsr:s,match:function(e,t,n){return Object.keys(e).every(function(r){if(n.indexOf(r)!==-1){return t.hasOwnProperty(r)}else{return e[r]===t[r]}})}}});
/*
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/ValueAxisScaleUtils",["sap/chart/AutoScaleMode","sap/chart/ScaleBehavior","sap/chart/ChartLog","sap/chart/utils/ChartUtils"],function(e,i,a,t){"use strict";var s={};s.getValueAxisScaleSetting=function(s,m,r,u){var n=r.filter(function(e){return u.indexOf(e.getName())!==-1});var l,o,f={};n.forEach(function(e){o=e.getName();l=e._getFixedRole();if(l==="axis1"||l==="axis2"){if(!f[l]){f[l]={measures:[],min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}}f[l].measures.push(o)}});var c,x=m&&m.scaleBehavior===i.FixedScale,S=t.isStackedLikeChart(s)&&n.length>1,h=m&&m.fixedScaleSettings&&m.fixedScaleSettings.measureBoundaryValues||{};if(x){if(S){var g=m&&m.fixedScaleSettings&&m.fixedScaleSettings.stackedMultipleMeasureBoundaryValues||[];if(g&&g.length>0){var p=function(e){return g.filter(function(i){return i.measures&&i.measures.length>0&&i.measures.sort().toString()===e.measures.sort().toString()})};for(var v in f){if(f.hasOwnProperty(v)){var d=f[v];var y=p(d);if(y&&y.length>0){c=y[y.length-1].boundaryValues;if(c&&(isFinite(c.minimum)&&typeof c.minimum=="number")||isFinite(c.maximum)&&typeof c.maximum=="number"){d.min=c.minimum;d.max=c.maximum}}}}}}else{n.forEach(function(e){l=e._getFixedRole();if(l==="axis1"||l==="axis2"){o=e.getName();c=h[o];if(!c||!(isFinite(c.minimum)&&typeof c.minimum=="number")||!(isFinite(c.maximum)&&typeof c.maximum=="number")){f[l].min=Number.NEGATIVE_INFINITY;f[l].max=Number.POSITIVE_INFINITY}else{if(f[l].min>c.minimum){f[l].min=c.minimum}if(f[l].max<c.maximum){f[l].max=c.maximum}}}})}}x=false;var I=[],N=t.isBulletChart(s);for(var v in f){if(f.hasOwnProperty(v)){var d=f[v];var b=!(isFinite(d.min)&&typeof d.min=="number"&&isFinite(d.max)&&typeof d.max=="number");var V=v==="axis1"?"valueAxis":"valueAxis2";if(N){V="actualValues"}if(b){if(m&&m.scaleBehavior===i.FixedScale){new a("error","Chart.ValueAxisScale",V+" was switched to auto scale, because minimum or maximum value is missing in measure").display()}}else if(d.min>d.max){new a("error","Chart.ValueAxisScale",V+" was switched to auto scale, because minimum value exceeds maximum value").display()}else{x=true}I.push({feed:V,type:"linear",min:b?"auto":d.min,max:b?"auto":d.max})}}var F={};if(!x){var A=true,w=false;if(m&&m.autoScaleSettings&&m.autoScaleSettings.zeroAlwaysVisible===false){A=false}if(m&&m.autoScaleSettings&&m.autoScaleSettings.syncWith===e.VisibleData){w=true}F={plotArea:{adjustScale:!A},interaction:{syncValueAxis:w}}}return{scale:I,property:F}};return s});
sap.ui.require.preload({
	"sap/chart/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.chart","type":"library","embeds":[],"applicationVersion":{"version":"1.102.1"},"title":"Smart viz control based on Vizframe","description":"Smart viz control based on Vizframe","ach":"BI-CVM","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":[]},"sap.ui5":{"dependencies":{"minUI5Version":"1.102","libs":{"sap.ui.core":{"minVersion":"1.102.1"},"sap.viz":{"minVersion":"1.102.1"}}},"library":{"i18n":false,"css":false,"content":{"controls":["sap.chart.Chart"],"elements":["sap.chart.data.Dimension","sap.chart.data.TimeDimension","sap.chart.data.HierarchyDimension","sap.chart.data.Measure"],"types":["sap.chart.data.MeasureSemantics"],"interfaces":[]}}}}'
});
